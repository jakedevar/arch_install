(self.webpackChunk=self.webpackChunk||[]).push([[9153],{78754:(e,t,i)=>{i.d(t,{D:()=>a,k:()=>s});var n=i(28338),s=(e=>(e.Sensitivity="Document did not pass sensitivity filtering",e.UnsupportedLanguage="Unsupported language",e.FailedProcessing="Failed to process file",e.ChecksumMismatch="Checksum mismatch",e.UnsupportedFileFormat="Unsupported file format",e.Other="Other error",e))(s||{});const r=class e extends Error{constructor(e,t){super(`[${e}] ${t}`),this.kind=e}static fromMessageError(t){return new e(e.getKind(t),t.title)}};r.getKind=e=>{const{kind:t}=e.errorType;switch(t){case"sensitivity":return"Document did not pass sensitivity filtering";case"unsupportedLanguage":return"Unsupported language";case"failedProcessing":return"Failed to process file";case"checksumMismatch":return"Checksum mismatch";case"unsupportedFileFormat":return"Unsupported file format";case"other":return"Other error";default:(0,n.vE)(t)}};let a=r},77784:(e,t,i)=>{function n(){return"agents/@impl"}function s(e){return`agents/${e}`}function r(e,...t){return a(e,...t)}function a(e,...t){return`agents/@impl/${e}${c(t)}`}function o(e,t,...i){return l(e,t,...i)}function l(e,t,...i){return`${s(e)}/${t}${c(i)}`}function d(e,...t){return`agents/${e}${c(t)}`}function c(e){const t=e.filter(Boolean).join("/");return t?`/${t}`:""}i.d(t,{EZ:()=>a,Lu:()=>s,Yx:()=>l,e7:()=>n,rL:()=>d,wS:()=>r,yp:()=>o})},89449:(e,t,i)=>{i.d(t,{w:()=>p});var n=i(90023),s=i(21176),r=i(27368),a=i(90572),o=i(59179),l=i(31603),d=i(58303),c=i(67177),u=i(98846),f=i(68822),g=i(40594);class p{constructor(e){this._checkingService=e,this._handlers=[],this._log=g.Y.create("AgentsCapiClient"),this._checkingService.pipe(a.h(d.pC),o.U((e=>e.value.capiMessages)),l.J(),a.h((e=>(0,s.rE)(e)||(0,r.eJ)(e))),o.U((e=>e))).subscribe((e=>{this._handlers.forEach((t=>(this._log.debug("Handling CAPI Message",e),t(e),u._.Result.STOP_HANDLING)))}))}enqueueExternalCommand(e){this._log.debug("Enqueueing External Command",e);const t=(0,n.zG)(this._checkingService.get(),d.g_((()=>""),(e=>e.sessionUuid||""))),{action:i,...s}=e({sessionId:t,id:1,currentRevision:0,nextRevision:()=>1});return(0,n.zG)(this._checkingService.get(),c.Yo((()=>new f.YG("Checking service is not available"))),c.tS((e=>e.sendMessage(i,s,!0))))}registerExternalMessageHandler(e){this._handlers.includes(e)||this._handlers.push(e)}unregisterExternalMessageHandler(e){this._handlers=this._handlers.filter((t=>t!==e))}}},52784:(e,t,i)=>{i.r(t),i.d(t,{AgentsDocumentGroupIntegration:()=>ee});var n=i(90572),s=i(27902),r=i(13391),a=i(57747),o=i(40594),l=i(77784),d=i(15805),c=i(42332),u=i(34903),f=i(74441),g=i(60159);const p={[i(79650).f.id]:"ReaderReactions",[u.f.id]:"Humanizer",[f.f.id]:"Paraphraser",[c.f.id]:"ExpertReview",[d.f.id]:"AIDetector",[g.f.id]:"Plagiarism"};var m=i(80891);class h{constructor(e){this._experimentClient=e}isAssigned(e,...t){if(e instanceof m.Cc)return this._experimentClient.isGateEnabled(e);const i=this._experimentClient.getTreatment(e);return null!==i&&i!==m.q4&&t.includes(i)}getTreatment(e){const t=this._experimentClient.getTreatment(e);return t===m.q4?null:t}peekExperiment(e,...t){const i=this._experimentClient.peekTreatment(e);return null!==i&&i!==m.q4&&t.includes(i)}}var v=i(90023),I=i(12518),_=i(68822);class F{constructor(e,t,i){this._telemetry=i;const n=o.Y.create("AgentsTrackingServiceProvider");this._trackingService={trackEvent:(i,s)=>{e.sendFeedback({eventName:i,eventData:JSON.stringify(s),agentId:t})().then((e=>(0,v.zG)(e,I.pF((e=>{throw e}))))).then((e=>{n.debug("Tracking event sent successfully",{event:i,detail:s,response:e})})).catch((e=>{e instanceof _.W5?n.debug("Didn't receive the success response for tracking request on time (it doesn't necessarily mean that the event was not tracked)",{event:i,detail:s,error:e}):(this._telemetry.warn("Tracking request failed",e,{event:i,detail:s,agentId:t}),n.warn("Tracking request failed",e,{event:i,detail:s}))}))}}}getTrackingService(){return this._trackingService}}class b{constructor(e,t){this._actions=e,this._telemetry=t,this._log=o.Y.create("AgentsUphookHubClient")}async getUphookConfig(e){try{const t=await this._actions.getConfiguration(e);return(0,v.zG)(t,I.g_((e=>{throw e}),(e=>e)))}catch(t){throw this._telemetry.error(`Failed to get uphook config for ${e}`,t),this._log.warn(`Failed to get uphook config for ${e}`,t),t}}async trackUphookEvent(e,t){try{const i=await this._actions.trackConfiguration(t,e);(0,v.zG)(i,I.g_((e=>{throw e}),(()=>{})))}catch(i){const n=`Failed to track uphook event for ${(null==e?void 0:e.upgradeHookSlot)||"unknown"} uphook with event kind ${t}`;throw this._telemetry.error(n,i),this._log.warn(n,i),i}}}var C=i(16876),w=i(37997);const y=e=>{const t=new Set;return"edge"!==e.browser&&"msie"!==e.browser&&t.add(w.L.Flag.supportsSVGDominantBaseline),{has:e=>t.has(e)}};class S{constructor(){this.openUrl=e=>(0,I.Y3)((()=>{document.location.href=e.toString()}),I.KC),this.openPopup=e=>(0,I.Y3)((()=>{const t=self.open(e.toString(),"_blank","noopener,noreferrer");t&&(t.opener=null)}),I.KC)}}var x=i(22425),k=i(64443),P=i(98846),U=i(67177),A=i(92054),D=i(62220),T=i(78754),$=i(27368),R=i(9119);var E,q=Object.defineProperty,G=Object.defineProperties,O=Object.getOwnPropertyDescriptors,z=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable,L=(e,t,i)=>t in e?q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,V=(e,t,i)=>new Promise(((n,s)=>{var r=e=>{try{o(i.next(e))}catch(e){s(e)}},a=e=>{try{o(i.throw(e))}catch(e){s(e)}},o=e=>e.done?n(e.value):Promise.resolve(e.value).then(r,a);o((i=i.apply(e,t)).next())}));(E||(E={})).create=(e,t)=>{const i=t||k.C8.Logging.getLogger("FileUploadService"),n=new D.v,s=new _.PJ(6e4,"FileUpload"),r=new _.PJ(6e4,"FileUpload"),a=new _.PJ(6e4,"FileUpload"),o=new _.PJ(6e4,"FileUpload"),l=t=>(i.debug("Sending message",t),(0,v.zG)(e.enqueueExternalCommand((({id:e})=>((e,t)=>G(e,O(t)))(((e,t)=>{for(var i in t||(t={}))M.call(t,i)&&L(e,i,t[i]);if(z)for(var i of z(t))H.call(t,i)&&L(e,i,t[i]);return e})({},t),{id:e}))),U.tS((()=>(0,$.WT)(t)?()=>s.watchRequest(t.fileIdentifier):(0,$.Xl)(t)?()=>r.watchRequest(t.fileIdentifier):(0,$.gs)(t)?()=>a.watchRequest(t.fileIdentifier):(0,$.Iz)(t)?()=>o.watchRequest(t.fileIdentifier):U.t$(new T.D(T.k.Other,"Unknown message type (sendMessage)")))))),d=e=>e.action.startsWith("assistant_file_upload")?((0,$.r2)(e)||(0,$.wV)(e)||(0,$.bm)(e)||(0,$.Sy)(e)?(e=>{if((0,$.bm)(e))return i.debug("Received message (MessageUploadUrlResponse)",e),void s.onValue(e.fileIdentifier,e);if((0,$.r2)(e))return i.debug("Received message (MessageSuccess)",e),void r.onValue(e.fileIdentifier,e);if((0,$.Sy)(e))return i.debug("Received message (MessageFileRemoved)",e),a.hasRequest(e.fileIdentifier)&&a.onValue(e.fileIdentifier,e),void(o.hasRequest(e.fileIdentifier)&&o.onValue(e.fileIdentifier,e));if((0,$.wV)(e)){i.debug("Received error (MessageError)",e);const t=T.D.fromMessageError(e);s.hasRequest(e.fileIdentifier)?s.onError(e.fileIdentifier,t):r.hasRequest(e.fileIdentifier)?r.onError(e.fileIdentifier,t):a.hasRequest(e.fileIdentifier)?a.onError(e.fileIdentifier,t):o.hasRequest(e.fileIdentifier)&&o.onError(e.fileIdentifier,t)}})(e):i.warn("Unknown message type (handler)",e),P._.Result.STOP_HANDLING):P._.Result.CONTINUE_HANDLING;e.registerExternalMessageHandler(d);const c=e=>(i.debug("Getting file upload URL",{fileIdentifier:e}),(0,v.zG)(l({id:0,action:"assistant_file_upload:uploadUrlRequest",fileIdentifier:e}),U.tS((e=>(0,$.bm)(e)?U.F2(e.s3UploadPath):U.t$(new T.D(T.k.Other,"Unknown message type (getFileUploadUrl)")))),U.UI((t=>(i.debug("Successfully received s3UploadPath",{fileIdentifier:e,s3UploadPath:t}),t))),U.Vn((t=>(i.error("Failed to get upload URL",{fileIdentifier:e,error:t}),t))))),u=e=>{const{fileIdentifier:t,uploadUrl:n,file:s}=e;return i.debug("Uploading file",{fileIdentifier:t,uploadUrl:n}),(0,v.zG)(U.Uo(function(e){switch(e.type){case"text/plain":return I.F2(R.d.Txt);case"text/rtf":case"application/rtf":return I.F2(R.d.Rtf);case"application/msword":return I.F2(R.d.Doc);case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":return I.F2(R.d.Docx);case"application/pdf":case"application/x-pdf":case"application/x-bzpdf":case"application/x-gzpdf":return I.F2(R.d.Pdf);case"text/markdown":return I.F2(R.d.Md);case"application/json":return I.F2(R.d.Json);case"application/xml":case"text/xml":return I.F2(R.d.Xml);case"text/html":return e.name.endsWith(".htm")?I.F2(R.d.Htm):I.F2(R.d.Html);case"text/csv":return I.F2(R.d.Csv);case"application/vnd.ms-excel":return I.F2(R.d.Xls);case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":return I.F2(R.d.Xlsx);case"application/vnd.ms-powerpoint":return I.F2(R.d.Ppt);case"application/vnd.openxmlformats-officedocument.presentationml.presentation":return I.F2(R.d.Pptx);default:return I.t$(new T.D(T.k.UnsupportedFileFormat,"Unsupported file format"))}}(s)),U.tS((e=>U.Y3((()=>V(void 0,null,(function*(){const i=yield fetch(n,{method:"PUT",headers:{"Content-Type":s.type,"x-amz-tagging":"ttl=1day"},body:s});if(!i.ok)throw new Error(`S3 upload failed: ${i.status} ${i.statusText}`);return{fileIdentifier:t,fileFormat:e}}))),(e=>{const t=e instanceof Error?e:new Error(String(e));return new T.D(T.k.FailedProcessing,t.message)})))))};return{uploadText:e=>{const{content:t,useCase:s,useCaseParameters:r,agentId:a}=e,o=(0,A.Z)();return i.debug("Uploading text",{useCase:s,useCaseParameters:r,fileIdentifier:o,agentId:a}),n.emit("uploadTextStarted",{useCase:s,useCaseParameters:r,fileIdentifier:o,agentId:a}),(0,v.zG)(c(o),U.tS((e=>(e=>{const{fileIdentifier:t,uploadUrl:n,content:s}=e;return i.debug("Uploading references",{fileIdentifier:t,uploadUrl:n}),U.Y3((()=>V(void 0,null,(function*(){const e=yield fetch(n,{method:"PUT",headers:{"Content-Type":"text/plain","x-amz-tagging":"ttl=1day"},body:s});if(!e.ok)throw new Error(`S3 upload failed: ${e.status} ${e.statusText}`);return{fileIdentifier:t,fileFormat:R.d.Txt}}))),(e=>{const t=e instanceof Error?e:new Error(String(e));return new T.D(T.k.FailedProcessing,t.message)}))})({fileIdentifier:o,uploadUrl:e,content:t}))),U.tS((e=>((e,t,n,s,r)=>{i.debug("Requesting file processing",{fileIdentifier:e,fileFormat:t});const a={id:0,action:"assistant_file_upload:processFile",fileIdentifier:e,fileFormat:t,useCase:n,useCaseParameters:s};return i.debug("useCaseParameters",s),i.debug("Requesting file processing",{request:a}),(0,v.zG)(l(a),U.tS((i=>(0,$.r2)(i)?U.F2({useCase:n,useCaseParameters:s,fileIdentifier:e,fileFormat:t,agentId:r||"unknown"}):U.t$(new T.D(T.k.Other,"Unknown message type (requestFileProcessing)")))),U.Vn((t=>(i.error("Failed to process file",{fileIdentifier:e,error:t}),t))))})(e.fileIdentifier,e.fileFormat,s,r,a))),U.Vn((e=>(n.emit("uploadTextFailed",{useCase:s,useCaseParameters:r,fileIdentifier:o,error:e,agentId:a}),e))),U.UI((e=>(n.emit("uploadTextFinished",e),e))))},uploadFile:e=>{const{file:t,useCase:s,useCaseParameters:r,agentId:a}=e,o=(0,A.Z)();return i.debug("Uploading file",{useCase:s,useCaseParameters:r,fileIdentifier:o,agentId:a}),n.emit("uploadFileStarted",{useCase:s,useCaseParameters:r,fileIdentifier:o,fileName:t.name,agentId:a}),(0,v.zG)(c(o),U.tS((e=>u({fileIdentifier:o,uploadUrl:e,file:t}))),U.tS((e=>((e,t,n,s,r)=>{i.debug("Requesting file processing",{fileIdentifier:e,fileFormat:t});const a={id:0,action:"assistant_file_upload:processFile",fileIdentifier:e,fileFormat:t,useCase:n,useCaseParameters:s};return i.debug("useCaseParameters",s),i.debug("Requesting file processing",{request:a}),(0,v.zG)(l(a),U.tS((i=>(0,$.r2)(i)?U.F2({useCase:n,useCaseParameters:s,fileIdentifier:e,fileFormat:t,fileContent:i.fileContent,agentId:r||"unknown"}):U.t$(new T.D(T.k.Other,"Unknown message type (requestFileProcessing)")))),U.Vn((t=>(i.error("Failed to process file",{fileIdentifier:e,error:t}),t))))})(e.fileIdentifier,e.fileFormat,s,r,a))),U.Vn((e=>(n.emit("uploadFileFailed",{useCase:s,useCaseParameters:r,fileIdentifier:o,fileName:t.name,error:e,agentId:a}),e))),U.UI((e=>(n.emit("uploadFileFinished",e),e))))},removeFile:e=>{const{fileIdentifier:t,agentId:s}=e;return i.debug("Removing file",{fileIdentifier:t,agentId:s}),n.emit("removeFileStarted",{fileIdentifier:t,agentId:s}),(0,v.zG)((e=>{i.debug("Requesting file removal",{fileIdentifier:e});const t={id:0,action:"assistant_file_upload:removeFile",fileIdentifier:e};return i.debug("Requesting file removal",{request:t}),(0,v.zG)(l(t),U.tS((e=>(0,$.Sy)(e)?U.F2(void 0):U.t$(new T.D(T.k.Other,"Unknown message type (requestFileRemoval)")))),U.Vn((t=>(i.error("Failed to process file",{fileIdentifier:e,error:t}),t))))})(t),U.Vn((e=>(n.emit("removeFileFailed",{fileIdentifier:t,error:e,agentId:s}),e))),U.UI((e=>(n.emit("removeFileFinished",{fileIdentifier:t,agentId:s}),e))))},removePersistentData:e=>{const{useCase:t,useCaseParameters:s,agentId:r}=e,a=(0,A.Z)();return i.debug("Removing persistent data",{useCase:t,useCaseParameters:s,fileIdentifier:a,agentId:r}),n.emit("removePersistentDataStarted",{useCase:t,useCaseParameters:s,fileIdentifier:a,agentId:r}),(0,v.zG)(l({id:0,action:"assistant_file_upload:removePersistedData",fileIdentifier:a,useCase:t,useCaseParameters:s}),U.tS((e=>(0,$.Sy)(e)?U.F2({useCase:t,useCaseParameters:s,fileIdentifier:a,agentId:r}):U.t$(new T.D(T.k.Other,"Unknown message type (removePersistentData)")))),U.Vn((e=>(i.error("Failed to remove the persistent data",{fileIdentifier:a,error:e}),n.emit("removePersistentDataFailed",{useCase:t,useCaseParameters:s,fileIdentifier:a,error:e,agentId:r}),e))),U.UI((e=>(n.emit("removePersistentDataFinished",e),e))))},on:n.on.bind(n),dispose:()=>{e.unregisterExternalMessageHandler(d)}}};var N=i(58303),B=i(89449),Y=i(20680),j=i(79256),J=i(84714),W=i(43789);function X(e){const t=new DisposableStack,i=function(e,t,i,n,s){const a=()=>W.RI.resFromText(t());return{id:e,isActive:r.h.combine(n,s,((e,t)=>e&&t)),getText:a,textChanges:(0,Y.z)((0,j.P)((()=>(0,J.of)(a()))),i)}}(e.documentId,e.getPlainText,e.textChanges,e.isTextFieldFocused,e.isActiveTab),n=new B.w(e.checkingService.view(N.ij)),s=x.W.create(n),a=E.create(n);return{document:i,capiConnectionStatus:e.capiConnectionStatus,capiCheckingState:e.capiCheckingState,agentGenericService:s,fileUploadService:a,pushedContentService:e.pushedContentService,capiEvents:e.capiEvents,[Symbol.dispose]:()=>t.dispose()}}var K=i(24196),Z=i(40795);function Q(e){return{[Symbol.asyncDispose]:async()=>{if(!e)return;const t=await e;t&&(!function(e){return Symbol.dispose in e}(t)?function(e){return Symbol.asyncDispose in e}(t)&&await t[Symbol.asyncDispose]():t[Symbol.dispose]())}}}class ee{constructor(e){var t;this._disposables=new AsyncDisposableStack,this._logger=o.Y.create("Agents.DocumentGroupIntegration"),this._focusedTextField=r.h.create(null),this._platformInfo=a.W.detect(),this._environment=(t=this._platformInfo,new C.f(y(t),new S)),this._telemetry=e.telemetry,this._experimentClient=e.experimentClient,this._messageBusClient=e.messageBusClient,this._platformBus=this._messageBusClient.platformBus,this._agentDefinitions=(0,Z.c)(e.experimentClient),this._experimentationService=new h(e.experimentClient),this._uphookHubClient=(0,K.sI)(e.experimentClient)?new b(e.actions,this._telemetry):{getUphookConfig:()=>Promise.resolve(void 0),trackUphookEvent:()=>Promise.resolve()},this._userService={user:e.user.view((e=>({id:e.id,firstName:e.firstName,email:e.email,free:!e.premium,anonymous:e.anonymous})))},this._activeDocumentForTab=this._disposables.use(this._platformBus.state.activeDocument.create(e.tabId,null)),this._agentsFeatureFlagsAtom=this._disposables.use(this._platformBus.state.agentsFeatureFlags.create(e.tabId,null)),this._activePanelAgentId=this._disposables.use(this._platformBus.state.activePanelAgentId.view(null)),this._isActiveTab=this._disposables.use(this._platformBus.state.activeTabId.view(null)).view((t=>t===e.tabId)),this._disposables.adopt(r.h.combine(this._isActiveTab,this._focusedTextField,((e,t)=>e?t:null)).subscribe((e=>this._activeDocumentForTab.set(e))),(e=>e.unsubscribe()))}runDocumentActivations(e){return this._runActivations("documentActivate",e.textFieldSupportsAgents,e.agentsFeatureFlags,(t=>{const i=t.use(X({...e,isActiveTab:this._isActiveTab}));return this._disposables.adopt(e.isTextFieldFocused.pipe((0,n.h)(Boolean)).subscribe((()=>this._focusedTextField.set({id:e.documentId,supportsAgents:e.textFieldSupportsAgents}))),(t=>{var i;(null===(i=this._focusedTextField.get())||void 0===i?void 0:i.id)===e.documentId&&this._focusedTextField.set(null),t.unsubscribe()})),{environment:this._environment,platformInfo:this._platformInfo,userService:this._userService,uphookHubClient:this._uphookHubClient,...i}}),((e,t)=>{var i,n;const s=new F(t.agentGenericService,e.id,this._telemetry),r={...t,trackingServiceProvider:s};return null===(n=(i=e.integrations).documentActivate)||void 0===n?void 0:n.call(i,r).then((t=>({...t,...Q(null!=t?t:{}),agentId:e.id})))}),e.documentId)}runTextDecorationActivations(e){return this._runActivations("textDecorationsActivate",e.textFieldSupportsAgents,e.agentsFeatureFlags,(()=>({documentId:e.documentId})),((e,t)=>{var i,n;return null===(n=(i=e.integrations).textDecorationsActivate)||void 0===n?void 0:n.call(i,t).then((i=>({...i,...Q(i),agentId:e.id,isActive:t.navigation.isPanelOpen})))}),e.documentId)}runInlineCardActivations(e){return this._runActivations("inlineCardActivate",e.textFieldSupportsAgents,e.agentsFeatureFlags,(()=>({documentId:e.documentId})),((e,t)=>{var i,n;return null===(n=(i=e.integrations).inlineCardActivate)||void 0===n?void 0:n.call(i,t).then((t=>({...t,...Q(t),agentId:e.id})))}),e.documentId)}_runActivations(e,t,i,n,r,a){if(!(0,K.w4)(this._experimentClient))return{integrations:[],[Symbol.asyncDispose]:()=>Promise.resolve()};const o=new AsyncDisposableStack;this._disposables.defer((()=>o.disposeAsync()));const d=[],c={documentActivate:"doc",textDecorationsActivate:"text-decorations",inlineCardActivate:"inline-card"},u=n(o);if("documentActivate"===e&&this._agentsFeatureFlagsAtom.set(i),!t)return{integrations:d,[Symbol.asyncDispose]:()=>o.disposeAsync()};for(const t of this._agentDefinitions){if(!i[p[t.id]]){this._logger.debug(`Skipping ${c[e]} activation for ${t.id} - agent is not enabled in availability flags`);continue}this._logger.debug(`Running ${c[e]} activation for ${t.id} on document ${a}`);const n=this._messageBusClient.createPort({name:(0,l.yp)(t.id,c[e],a)});try{const i=r(t,{documentId:a,bus:o.use((0,s.kX)({port:n,clientId:(0,l.Yx)(t.id,c[e],a),keyPrefix:(0,l.Lu)(t.id),protocol:t.protocol})),navigation:{isPanelOpen:this._activePanelAgentId.view((e=>e===t.id))},experimentation:this._experimentationService,...u});null==i||i.then((i=>this._logger.debug(`Activation result for ${t.id}.${e} on document ${a}:`,i))).catch((i=>{this._logger.error(`Failed to get ${e} result for agent ${t.id} on document ${a}`,i),this._telemetry.error(`Failed to get ${e} result for agent`,i,{agentId:t.id})})),i&&(o.use(Q(i.catch((()=>null)))),d.push(i))}catch(i){this._logger.error(`${e} error for agent ${t.id} on document ${a}`,i),this._telemetry.error(`${e} error for agent`,i,{agentId:t.id})}}return{integrations:d,[Symbol.asyncDispose]:()=>o.disposeAsync()}}[Symbol.asyncDispose](){return this._disposables.disposeAsync()}}},62220:(e,t,i)=>{i.d(t,{v:()=>n});class n{listeners=new Map;on(e,t){return this._getOrInitializeListeners(e).add(t),{dispose:()=>{this.listeners.get(e)?.delete(t)}}}emit(e,t){const i=this.listeners.get(e);if(i)for(const n of i)try{n(t)}catch(t){console.error(`Error in event listener for event "${String(e)}":`,t)}}_getOrInitializeListeners(e){return this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e)}}}}]);