/*! For license information please see Grammarly-bg.js.LICENSE.txt */
var __webpack_modules__={20181:(e,t,n)=>{function r(e,t){return null!=t?`${t}/${e}`:e}n.d(t,{k:()=>tt});var i=n(45585);function o(e){return(0,i.r)()&&JSON.parse(JSON.stringify(e)),e}function s(){return performance.timeOrigin+performance.now()}function a(e){const{key:t,parameterValue:n,prefix:i}=e;return`${r(t,i)}${n?`/${n}`:""}`}function c(e,t,n,r){return!("publish"!==e.kind||e.key!==r||void 0!==e.toClientId&&e.toClientId!==t||void 0!==e.toSubscriptionId&&e.toSubscriptionId!==n||void 0!==e.excludeSubscriptionIds&&e.excludeSubscriptionIds.includes(n))}function l(e,t){const n=Object.keys(t).find((t=>{const n=t.match(/^(.*)\/:.*$/);if(!n)return!1;const[r,i]=n;return i===e}));return null!=n?n:e}var u,d,h,p,g,f,m,b,y=n(83535),_=e=>{throw TypeError(e)},v=(e,t,n)=>t.has(e)||_("Cannot "+n),w=(e,t,n)=>(v(e,t,"read from private field"),t.get(e)),S=(e,t,n)=>t.has(e)?_("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),k=(e,t,n,r)=>(v(e,t,"write to private field"),t.set(e,n),n);class I{constructor(e){var t,n;S(this,u,new DisposableStack),S(this,d),S(this,h),S(this,p),S(this,g),S(this,f),S(this,m,!1),S(this,b),k(this,d,e.port),k(this,h,e.schema),k(this,g,e.keyPrefix),k(this,f,e.eventFactory),k(this,p,e.clientId),k(this,m,null!=(t=e.ensureSerializableInDevMode)&&t),k(this,b,null!=(n=e.generateSubscriptionUUID)?n:e=>`${(0,y.v)()}(${e})`)}getEvent(e,t){const n=void 0!==t?l(String(e),w(this,h)):String(e),r=w(this,h)[n],i=a({key:e,parameterValue:t,prefix:w(this,g)}),o={subscribe:e=>{const t=w(this,u).use(new DisposableStack),n=w(this,b).call(this,i);return t.defer((()=>{var t;w(this,d).send({kind:"unsubscribe",subscriptionId:n}),null==(t=null==e?void 0:e.complete)||t.call(e)})),t.use(w(this,d).subscribe((o=>{var s,a;if(c(o,w(this,p),n,i))try{const t=r.codec?r.codec.decode(o.value):o.value;null==(s=null==e?void 0:e.next)||s.call(e,t)}catch(n){null==(a=null==e?void 0:e.error)||a.call(e,n instanceof Error?n:new Error(String(n))),t.dispose()}}))),w(this,d).send({kind:"subscribe",key:i,timestamp:s(),clientId:w(this,p),subscriptionId:n}),{unsubscribe:()=>t.dispose()}}};return w(this,f).call(this,o)}emit(e,t,n){const r=void 0!==n?l(String(e),w(this,h)):String(e),i=w(this,h)[r],c=a({key:e,parameterValue:n,prefix:w(this,g)}),u=i.codec?i.codec.encode(t):t;w(this,m)&&o(u),w(this,d).send({kind:"publish",key:c,value:u,timestamp:s(),clientId:w(this,p)})}[Symbol.dispose](){w(this,u).dispose()}}u=new WeakMap,d=new WeakMap,h=new WeakMap,p=new WeakMap,g=new WeakMap,f=new WeakMap,m=new WeakMap,b=new WeakMap;var C,E,A,x,T,O,P,R,D,N,U,M,j=n(23537),F=e=>{throw TypeError(e)},L=(e,t,n)=>t.has(e)||F("Cannot "+n),G=(e,t,n)=>(L(e,t,"read from private field"),n?n.call(e):t.get(e)),B=(e,t,n)=>t.has(e)?F("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),z=(e,t,n,r)=>(L(e,t,"write to private field"),t.set(e,n),n),V=(e,t,n)=>(L(e,t,"access private method"),n);class q{constructor(e){var t,n;B(this,U),B(this,C,new DisposableStack),B(this,E),B(this,A),B(this,x),B(this,T,!1),B(this,O),B(this,P),B(this,R),B(this,D),B(this,N,new FinalizationRegistry((e=>{G(this,E).send({kind:"unsubscribe",subscriptionId:e})}))),z(this,E,e.port),z(this,x,e.keyPrefix),z(this,T,null!=(t=e.ensureSerializableInDevMode)&&t),z(this,P,e.writableStateFactory),z(this,O,e.readableStateFactory),z(this,A,e.clientId),z(this,R,e.schema),z(this,D,null!=(n=e.generateSubscriptionUUID)?n:e=>`${(0,y.v)()}(${e})`)}createState(e,t,n){return V(this,U,M).call(this,"write",e,t,n)}viewState(e,t,n){return V(this,U,M).call(this,"read",e,t,n)}[Symbol.dispose](){G(this,C).dispose()}}function H(e){const t=new DisposableStack,n=new q(e);return t.use(n),new Proxy({},{get:(e,r)=>r===Symbol.dispose?()=>t.dispose():{create:(...e)=>{const[t,i]=2===e.length?e:[void 0,e[0]];return n.createState(String(r),i,t)},view:(...e)=>{const[t,i]=2===e.length?e:[void 0,e[0]];return n.viewState(String(r),i,t)}}})}C=new WeakMap,E=new WeakMap,A=new WeakMap,x=new WeakMap,T=new WeakMap,O=new WeakMap,P=new WeakMap,R=new WeakMap,D=new WeakMap,N=new WeakMap,U=new WeakSet,M=function(e,t,n,r){const i=void 0!==r?l(String(t),G(this,R)):String(t),u=a({key:t,parameterValue:r,prefix:G(this,x)}),d=G(this,R)[i],h=Object.create(null),p=G(this,D).call(this,u);let g=null;G(this,C).defer((()=>{null==g||g.dispose(),g=null}));const f={subscribe:t=>{var r;const i=G(this,C).use(new DisposableStack);if(g)return(0,j.P)("Already subscribed to remote. Ignoring double subscription."),{unsubscribe:()=>i.dispose()};g=i,i.defer((()=>g=null)),i.use(G(this,E).subscribe((e=>{var n,r;if(c(e,G(this,A),p,u))try{const r=d.codec?d.codec.decode(e.value):e.value;null==(n=null==t?void 0:t.next)||n.call(t,r)}catch(e){null==(r=null==t?void 0:t.error)||r.call(t,e instanceof Error?e:new Error(String(e))),i.dispose()}})));try{const t=d.codec?d.codec.encode(n):n;G(this,T)&&o(t),G(this,E).send({kind:"subscribe",timestamp:s(),clientId:G(this,A),subscriptionId:p,key:u,retain:{kind:e,value:t}})}catch(e){null==(r=null==t?void 0:t.error)||r.call(t,e instanceof Error?e:new Error(String(e)))}return i.defer((()=>{var e;G(this,N).unregister(h),G(this,E).send({kind:"unsubscribe",subscriptionId:p}),null==(e=null==t?void 0:t.complete)||e.call(t)})),{unsubscribe:()=>i.dispose()}}},m="read"===e?G(this,O).call(this,{subscribable:f,initialValue:n,releaseReference:()=>null==g?void 0:g[Symbol.dispose]()}):G(this,P).call(this,{subscribable:f,initialValue:n,publishChangeToRemote:e=>{if(!g)return void(0,j.P)("State has been disposed, ignoring state update.");const t=d.codec?d.codec.encode(e):e;G(this,T)&&o(t),G(this,E).send({kind:"publish",timestamp:s(),clientId:G(this,A),key:u,value:t})},releaseReference:()=>null==g?void 0:g[Symbol.dispose]()});return G(this,N).register(m,p,h),m};var W=n(57206),$=Object.defineProperty,X=Object.defineProperties,K=Object.getOwnPropertyDescriptors,Y=Object.getOwnPropertySymbols,Z=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable,Q=(e,t,n)=>t in e?$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const ee=e=>{const t=new DisposableStack,{subscribe:n,get:r,set:i}=t.use(ne(e));return{subscribe:n,get:r,set:i,[Symbol.dispose]:()=>t.dispose()}},te=e=>{const t=new DisposableStack,{subscribe:n,get:r}=t.use(ne(((e,t)=>X(e,K(t)))(((e,t)=>{for(var n in t||(t={}))Z.call(t,n)&&Q(e,n,t[n]);if(Y)for(var n of Y(t))J.call(t,n)&&Q(e,n,t[n]);return e})({},e),{publishChangeToRemote:()=>{}})));return{subscribe:n,get:r,[Symbol.dispose]:()=>t.dispose()}},ne=e=>{let t=e.initialValue;const n=new W.x,r=new DisposableStack;return r.defer((()=>e.releaseReference())),r.adopt(e.subscribable.subscribe({next:e=>{t=e,n.next()},error:e=>(0,j.P)("Error in SubscribableState subscribable",e),complete:()=>r.dispose()}),(e=>e.unsubscribe())),{subscribe:e=>{var r;null==(r=null==e?void 0:e.next)||r.call(e,t);const i=n.subscribe({next:()=>{var n;return null==(n=null==e?void 0:e.next)?void 0:n.call(e,t)}});return{unsubscribe:()=>i[Symbol.dispose]()}},get:()=>t,set:r=>{t=r,e.publishChangeToRemote(r),n.next()},[Symbol.dispose]:()=>r.dispose()}};const re={"provider/:serviceInstanceName":(0,n(70512).x)()};function ie(e){return H({port:e.port,clientId:e.clientId,keyPrefix:r("@@rpc",e.keyPrefix),schema:re,writableStateFactory:ee,readableStateFactory:te})}var oe=n(1933);var se,ae,ce,le,ue,de,he,pe,ge,fe,me=e=>{throw TypeError(e)},be=(e,t,n)=>t.has(e)||me("Cannot "+n),ye=(e,t,n)=>(be(e,t,"read from private field"),n?n.call(e):t.get(e)),_e=(e,t,n)=>t.has(e)?me("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),ve=(e,t,n,r)=>(be(e,t,"write to private field"),t.set(e,n),n),we=(e,t,n)=>(be(e,t,"access private method"),n);class Se{constructor(e){var t;_e(this,pe),_e(this,se,new DisposableStack),_e(this,ae),_e(this,ce),_e(this,le),_e(this,ue),_e(this,de,!1),_e(this,he),ve(this,ae,e.port),ve(this,ce,e.clientId),ve(this,le,e.serviceName),ve(this,ue,e.keyPrefix),ve(this,de,null!=(t=e.ensureSerializableInDevMode)&&t),ve(this,he,ye(this,se).use(ie(e))),we(this,pe,ge).call(this,e.service,e.schema)}[Symbol.dispose](){return ye(this,se).dispose()}}function ke(e){return e&&"object"==typeof e&&"id"in e&&"string"==typeof e.id?e.id:null}function Ie(e){return"Internal error: Failed to encode result: "+(e instanceof Error?e.message:String(e))}se=new WeakMap,ae=new WeakMap,ce=new WeakMap,le=new WeakMap,ue=new WeakMap,de=new WeakMap,he=new WeakMap,pe=new WeakSet,ge=function(e,t){const n=r(`rpc:request/${ye(this,le)}`,ye(this,ue)),i=`${(0,y.v)()}(${n})`,o=ye(this,se).adopt(new AbortController,(e=>e.abort()));ye(this,se).defer((()=>{ye(this,ae).send({kind:"unsubscribe",subscriptionId:i})})),ye(this,se).use(ye(this,ae).subscribe((a=>{if(c(a,ye(this,ce),i,n)){const n=r(`rpc:response/${ye(this,le)}`,ye(this,ue));we(this,pe,fe).call(this,a.value,e,o.signal,t,ye(this,de),(e=>{ye(this,ae).send({kind:"publish",clientId:ye(this,ce),timestamp:s(),key:n,toClientId:a.clientId,value:e})}))}}))),ye(this,ae).send({kind:"subscribe",clientId:ye(this,ce),timestamp:s(),key:n,subscriptionId:i}),ye(this,se).use(ye(this,he).provider.create(ye(this,le),{clientId:ye(this,ce)}))},fe=function(e,t,n,r,i,s){return((e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(e){i(e)}},s=e=>{try{a(n.throw(e))}catch(e){i(e)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())})))(this,null,(function*(){var a,c;const l=function(e){return"object"==typeof e&&null!==e&&"kind"in e&&"request"===e.kind&&"id"in e&&"string"==typeof e.id&&"method"in e&&"string"==typeof e.method?e:null}(e);if(null===l)return s({kind:"response",id:null!=(a=ke(e))?a:"<unknown_request_id>",error:{message:"Invalid request"},done:!0});const u=function(e){return new Promise((t=>{e.aborted?t():e.addEventListener("abort",(()=>t()),{once:!0})}))}(n),d=new DisposableStack,h=()=>{s({kind:"response",id:l.id,error:{message:`Request aborted: ${l.method}`},done:!0}),d.dispose()};n.addEventListener("abort",h,{once:!0}),d.defer((()=>n.removeEventListener("abort",h)));try{const e=yield Promise.race([t,u.then((()=>null))]);if(null===e)return;if("function"!=typeof e[l.method])return s({kind:"response",id:l.id,error:{message:`Method not found: ${l.method}`},done:!0});const n=r[l.method].result.codec,a=(null!=(c=l.params)?c:[]).map(((e,t)=>{var n;const i=null==(n=r[l.method].params[t])?void 0:n.codec;try{return i?i.decode(e):e}catch(e){throw new Error(function(e,t){return`Failed to decode parameter at index ${e}: `+(t instanceof Error?t.message:String(t))}(t,e))}})),h=e[l.method](...a),p=yield Promise.race([Promise.resolve(h).then((e=>({status:"ok",response:e}))),u.then((()=>({status:"aborted"})))]);if("aborted"===p.status)return;if("pushStream"===r[l.method].result.kind){if(!p.response||"object"!=typeof p.response||!("subscribe"in p.response)||"function"!=typeof p.response.subscribe)return d.dispose(),s({kind:"response",id:l.id,error:{message:`Method ${l.method} did not return a Subscribable`},done:!0});d.adopt(p.response.subscribe({next:e=>{try{const t=n?n.encode(e):e;i&&o(t),s({kind:"response",id:l.id,result:t,done:!1})}catch(e){s({kind:"response",id:l.id,error:{message:Ie(e)},done:!0}),d.dispose()}},error:e=>{s({kind:"response",id:l.id,error:{message:e instanceof Error?e.message:String(e)},done:!0})},complete:()=>{s({kind:"response",id:l.id,done:!0})}}),(e=>e.unsubscribe()))}else try{const e=n?n.encode(p.response):p.response;return s({kind:"response",id:l.id,result:e,done:!0})}catch(e){return s({kind:"response",id:l.id,error:{message:Ie(e)},done:!0})}finally{d.dispose()}}catch(e){return d.dispose(),s({kind:"response",id:l.id,error:{message:"Internal error: "+(e instanceof Error?e.message:String(e))},done:!0})}}))};var Ce=Object.defineProperty,Ee=Object.defineProperties,Ae=Object.getOwnPropertyDescriptors,xe=Object.getOwnPropertySymbols,Te=Object.prototype.hasOwnProperty,Oe=Object.prototype.propertyIsEnumerable,Pe=(e,t,n)=>t in e?Ce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Re=(e,t)=>{for(var n in t||(t={}))Te.call(t,n)&&Pe(e,n,t[n]);if(xe)for(var n of xe(t))Oe.call(t,n)&&Pe(e,n,t[n]);return e},De=(e,t)=>Ee(e,Ae(t));function Ne(e){const t=new DisposableStack;return new Proxy({},{get:(n,i)=>i===Symbol.dispose?()=>t.dispose():{createClient:(n,u)=>{const d=void 0!==n?l(String(i),e.schema):String(i);return t.use(function(e){const t=new DisposableStack,n=t.use(ie(e)),i=t.use(n.provider.view(e.serviceName,{clientId:null})),a=(0,oe.B)();t.adopt(i.subscribe({next:e=>{null!==e.clientId&&a.resolve()}}),(e=>e.unsubscribe()));const l=r(`rpc:request/${e.serviceName}`,e.keyPrefix),u=r(`rpc:response/${e.serviceName}`,e.keyPrefix),d=`${(0,y.v)()}(${l})`,h=new Map;return t.defer((()=>{var t;e.port.send({kind:"unsubscribe",subscriptionId:d});for(const{observer:e}of h.values())null==(t=null==e?void 0:e.error)||t.call(e,new Error("RPC client disposed"));h.clear()})),t.use(e.port.subscribe((t=>{var n,r,i,o,s,a,l,p;if(c(t,e.clientId,d,u)){const e=function(e){return"object"==typeof e&&null!==e&&"kind"in e&&"response"===e.kind&&"id"in e&&"string"==typeof e.id?e:null}(t.value);if(null===e)return;const c=h.get(e.id);if(c)if((e.done||void 0!==e.error)&&h.delete(e.id),void 0!==e.error)null==(r=null==(n=c.observer)?void 0:n.error)||r.call(n,new Error(e.error.message));else{if("value"===c.resultKind||!e.done)try{const t=c.codec?c.codec.decode(e.result):e.result;null==(o=null==(i=c.observer)?void 0:i.next)||o.call(i,t)}catch(t){const n="Internal error: Failed to decode result: "+(t instanceof Error?t.message:String(t));null==(a=null==(s=c.observer)?void 0:s.error)||a.call(s,new Error(n)),h.delete(e.id)}e.done&&(null==(p=null==(l=c.observer)?void 0:l.complete)||p.call(l))}}}))),e.port.send({kind:"subscribe",clientId:e.clientId,timestamp:s(),key:u,subscriptionId:d}),new Proxy({},{get:(n,r)=>r===Symbol.dispose?()=>t.dispose():(...n)=>{var c;const u=null!=(c=e.schema[r].result.kind)?c:"value",d=e.schema[r].result.codec;if(t.disposed){const e=new Error("RPC client disposed");return"value"===u?Promise.reject(e):function(e){return{subscribe:t=>{var n;return null==(n=null==t?void 0:t.error)||n.call(t,e),{unsubscribe:()=>{}}}}}(e)}const p={subscribe:c=>{var p,g,f,m;const b=(0,y.v)();h.set(b,{resultKind:u,codec:d,observer:c});const _=null!=(p=e.schema[r].params.length)?p:0,v=n.length>_?n[_]:void 0,w="value"===u?null!=(f=null!=(g=null==v?void 0:v.timeoutMs)?g:null==e?void 0:e.timeoutMs)?f:5e3:null!=(m=null==v?void 0:v.timeoutFirstMs)?m:null==e?void 0:e.timeoutFirstMs;void 0!==w&&t.adopt(setTimeout((()=>{var e;h.has(b)&&(h.delete(b),null==(e=null==c?void 0:c.error)||e.call(c,new Error("RPC request timed out")))}),w),(e=>clearTimeout(e)));const S=n.slice(0,_).map(((t,n)=>{var i,s;const a=null==(i=e.schema[r].params[n])?void 0:i.codec;try{const n=a?a.encode(t):t;return e.ensureSerializableInDevMode&&o(n),n}catch(e){return null==(s=null==c?void 0:c.error)||s.call(c,new Error(`Internal error: Failed to encode parameter at index ${n}: ${e instanceof Error?e.message:String(e)}`)),h.delete(b),null}})),k=()=>{h.has(b)&&e.port.send({kind:"publish",clientId:e.clientId,toClientId:e.toClientId,timestamp:s(),key:l,value:{kind:"request",id:b,method:r,params:S}})};return null!==i.get().clientId?k():a.promise.then(k),{unsubscribe:()=>{var e;null==(e=null==c?void 0:c.complete)||e.call(c),h.delete(b)}}}};return"value"===u?new Promise(((e,t)=>p.subscribe({next:t=>e(t),error:e=>t(e),complete:()=>{}}))):e.streamFactory(p)}})}(De(Re(Re({},e),u),{serviceName:a({key:String(i),parameterValue:n}),schema:e.schema[d]})))},register:(...n)=>{const[r,o]=2===n.length?n:[void 0,n[0]],s=void 0!==r?l(String(i),e.schema):String(i);return t.use(function(e){return new Se(e)}(De(Re({},e),{serviceName:a({key:String(i),parameterValue:r}),schema:e.schema[s],service:o})))}}})}var Ue=Object.defineProperty,Me=Object.defineProperties,je=Object.getOwnPropertyDescriptors,Fe=Object.getOwnPropertySymbols,Le=Object.prototype.hasOwnProperty,Ge=Object.prototype.propertyIsEnumerable,Be=(e,t,n)=>t in e?Ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ze=(e,t)=>{for(var n in t||(t={}))Le.call(t,n)&&Be(e,n,t[n]);if(Fe)for(var n of Fe(t))Ge.call(t,n)&&Be(e,n,t[n]);return e},Ve=(e,t)=>Me(e,je(t));function qe(e){var t,n,i,o,s,a;const c=new DisposableStack,l=r("events",e.keyPrefix),u=r("state",e.keyPrefix),d=r("services",e.keyPrefix),h=e,{factories:p}=h,g=((e,t)=>{var n={};for(var r in e)Le.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&Fe)for(var r of Fe(e))t.indexOf(r)<0&&Ge.call(e,r)&&(n[r]=e[r]);return n})(h,["factories"]),f=c.use(function(e){const t=new DisposableStack,n=new I(e);return t.use(n),new Proxy({},{get:(e,r)=>r===Symbol.dispose?()=>t.dispose():{emit:(...e)=>{const[t,i]=2===e.length?e:[void 0,e[0]];return n.emit(String(r),i,t)},view:e=>n.getEvent(String(r),e)}})}(Ve(ze({},g),{keyPrefix:l,schema:null!=(n=null==(t=e.schema)?void 0:t.events)?n:{},eventFactory:e.factories.eventFactory})));return{events:f,state:c.use(H(Ve(ze({},g),{keyPrefix:u,schema:null!=(o=null==(i=e.schema)?void 0:i.state)?o:{},writableStateFactory:e.factories.writableStateFactory,readableStateFactory:e.factories.readableStateFactory}))),services:c.use(Ne(Ve(ze({},g),{keyPrefix:d,schema:null!=(a=null==(s=e.schema)?void 0:s.services)?a:{},streamFactory:e.factories.streamFactory}))),[Symbol.dispose]:()=>c.dispose()}}var He=n(13391);var We=n(8867);const $e={eventFactory:e=>new We.y(e.subscribe.bind(e)),streamFactory:e=>new We.y(e.subscribe.bind(e)),writableStateFactory:e=>{const t=He.h.create(e.initialValue),n=new DisposableStack;return n.defer((()=>e.releaseReference())),n.adopt(e.subscribable.subscribe({next:e=>t.set(e),error:e=>(0,j.P)("Error in DisposableAtom subscribable",e),complete:()=>n.dispose()}),(e=>e.unsubscribe())),new Proxy(t,{get:(t,r,i)=>"set"===r?n=>{t.set(n),e.publishChangeToRemote(n)}:"modify"===r?n=>{const r=n(t.get());t.set(r),e.publishChangeToRemote(r)}:r===Symbol.dispose?()=>n.dispose():Reflect.get(t,r,i)})},readableStateFactory:e=>{const t=He.h.create(e.initialValue),n=new DisposableStack;return n.defer((()=>e.releaseReference())),n.adopt(e.subscribable.subscribe({next:e=>t.set(e),error:e=>(0,j.P)("Error in DisposableAtom subscribable",e),complete:()=>n.dispose()}),(e=>e.unsubscribe())),new Proxy(t.view(),{get:(e,t,r)=>t===Symbol.dispose?()=>n.dispose():Reflect.get(e,t,r)})}};var Xe=Object.defineProperty,Ke=Object.defineProperties,Ye=Object.getOwnPropertyDescriptors,Ze=Object.getOwnPropertySymbols,Je=Object.prototype.hasOwnProperty,Qe=Object.prototype.propertyIsEnumerable,et=(e,t,n)=>t in e?Xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;function tt(e){return qe(((e,t)=>Ke(e,Ye(t)))(((e,t)=>{for(var n in t||(t={}))Je.call(t,n)&&et(e,n,t[n]);if(Ze)for(var n of Ze(t))Qe.call(t,n)&&et(e,n,t[n]);return e})({},e),{schema:e.protocol,factories:$e}))}},71365:(e,t,n)=>{n.d(t,{D:()=>b,T:()=>s});var r,i,o,s,a=n(13391),c=n(28338),l=n(20161),u=n(84714),d=n(59179),h=e=>{throw TypeError(e)},p=(e,t,n)=>t.has(e)||h("Cannot "+n),g=(e,t,n)=>(p(e,t,"read from private field"),n?n.call(e):t.get(e)),f=(e,t,n)=>t.has(e)?h("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),m=(e,t,n,r)=>(p(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);class b{constructor(e){f(this,r),f(this,i),f(this,o),m(this,r,new DisposableStack),m(this,i,g(this,r).adopt(new Map,(e=>{e.forEach((e=>e[Symbol.dispose]())),e.clear()}))),m(this,o,a.h.create({kind:"noActiveSession",session:null})),this.activeSession=g(this,o).view();const t=e.activeDocument.pipe((0,l.w)((t=>{var n;return null!==t&&t.supportsAgents&&e.canCreateSession?null==(n=e.canCreateSession)?void 0:n.call(e,t.id).pipe((0,d.U)((e=>e?t:null))):(0,u.of)(t)})));g(this,r).adopt(t.subscribe((t=>{if(null===t)return void g(this,o).set({kind:"noActiveSession",session:null});if(!t.supportsAgents)return void g(this,o).set({kind:"documentNotSupported",session:null});const n=g(this,i).get(t.id);if(n)g(this,o).set({kind:"activeSession",session:n});else{const n=e.createNewSession(t.id);g(this,i).set(t.id,n),g(this,o).set({kind:"activeSession",session:n})}})),(e=>e.unsubscribe())),g(this,r).adopt(e.documentSessionDisposed.subscribe((e=>this.deleteSession(e))),(e=>e.unsubscribe()))}deleteSession(e){const t=g(this,i).get(e);t&&(g(this,i).delete(e),t===g(this,o).get().session&&g(this,o).set({kind:"noActiveSession",session:null}),t[Symbol.dispose]())}[Symbol.dispose](){g(this,r).dispose()}}r=new WeakMap,i=new WeakMap,o=new WeakMap,(e=>{e.match=function(e){return t=>{switch(t.kind){case"activeSession":return e.activeSession(t.session);case"noActiveSession":return e.noActiveSession();case"documentNotSupported":return e.documentNotSupported();default:(0,c.L0)(t)}}}})(s||(s={}))},7616:(e,t,n)=>{n.d(t,{N:()=>i});var r=n(8867);function i(e){return new r.y((t=>{const n=new DisposableStack,r=n.use(e());return n.adopt(r.subscribe((e=>t.next(e))),(e=>e.unsubscribe())),()=>n.dispose()}))}},27902:(e,t,n)=>{n.d(t,{D8:()=>i.D,N4:()=>o.N,TJ:()=>i.T,kX:()=>r.k});var r=n(20181),i=n(71365),o=n(7616)},11546:(e,t,n)=>{n.d(t,{b6:()=>p,mg:()=>g});var r=n(28338),i=Object.defineProperty,o=Object.defineProperties,s=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,u=(e,t,n)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,d=(e,t)=>{for(var n in t||(t={}))c.call(t,n)&&u(e,n,t[n]);if(a)for(var n of a(t))l.call(t,n)&&u(e,n,t[n]);return e},h=(e,t)=>o(e,s(t));const p={kind:"loading",expertNames:[]},g={encode:function(e){switch(e.kind){case"evaluation":return h(d({},e),{experts:Object.fromEntries(e.experts)});case"chooseExperts":return h(d({},e),{experts:Object.fromEntries(e.experts),newExperts:Array.from(e.newExperts)});case"fatalError":case"notification":case"loading":return e;default:(0,r.L0)(e)}},decode:function(e){switch(e.kind){case"evaluation":return h(d({},e),{experts:new Map(Object.entries(e.experts))});case"chooseExperts":return h(d({},e),{experts:new Map(Object.entries(e.experts)),newExperts:new Set(e.newExperts)});case"fatalError":case"notification":case"loading":return e;default:(0,r.L0)(e)}}}},30349:(e,t,n)=>{n.d(t,{i:()=>i,p:()=>o});var r=n(74059);const i="Expert Panel",o=r.P.Id("expertPanel")},9119:(e,t,n)=>{var r,i;n.d(t,{_:()=>i,d:()=>r}),function(e){e.Txt="txt",e.Rtf="rtf",e.Doc="doc",e.Docx="docx",e.Pdf="pdf",e.Md="md",e.Json="json",e.Xml="xml",e.Html="html",e.Htm="htm",e.Csv="csv",e.Xls="xls",e.Xlsx="xlsx",e.Ppt="ppt",e.Pptx="pptx"}(r||(r={})),function(e){e.Assistant="assistant",e.CustomTone="customTone",e.CustomAudience="customAudience",e.AiGraderRubrics="aiGraderRubrics"}(i||(i={}))},25797:(e,t,n)=>{n.d(t,{I:()=>i,k:()=>r});const r=n(74059).P.Id("humanizer"),i="Humanizer"},74623:(e,t,n)=>{n.d(t,{LY:()=>S,OB:()=>r,Rn:()=>v,ZM:()=>w});var r,i=n(74059),o=n(11633),s=n(90023),a=n(43351),c=n(12518),l=n(59833),u=n(58303),d=n(21147),h=Object.defineProperty,p=Object.defineProperties,g=Object.getOwnPropertyDescriptors,f=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,y=(e,t,n)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_=(e,t)=>{for(var n in t||(t={}))m.call(t,n)&&y(e,n,t[n]);if(f)for(var n of f(t))b.call(t,n)&&y(e,n,t[n]);return e};(e=>{e.ParaphraserModeIO=o.OT(o.dt({id:o.Z_,label:o.Z_,sourceAction:o.Z_,trackingSourceAction:o.Z_,isCustom:o.O7})),e.EvaluationIO=o.OT(o.dt({evaluation:o.Z_,modes:o.IX(e.ParaphraserModeIO)})),e.decode=t=>(0,s.zG)(c.Y3((()=>JSON.parse(t)),l.of),c.tS(e.EvaluationIO.decode),c.Vn(a.Rn),c.Vn((e=>new Error(`Failed to parse evaluation:\n${e.join("\n")}`))))})(r||(r={}));const v=i.P.Id("paraphraser");var w,S;(e=>{(e=>{e.Initial="initial",e.Loading="loading",e.Loaded="loaded",e.Empty="empty",e.Blocked="blocked",e.Error="error",e.Editing="editing",e.Saving="saving"})(e.Kind||(e.Kind={})),(e=>{const t=(0,d.f7)(((e,t)=>e.id===t.id));e.optionalEqById=u.Eh(t)})(e.Mode||(e.Mode={})),(e=>{e.is=e=>"loaded"===e.kind,e.updateMode=(e,t,n)=>((e,t)=>p(e,g(t)))(_({},e),{modes:e.modes.map((e=>e.id===t?_(_({},e),n):e))})})(e.Loaded||(e.Loaded={})),(e=>{e.is=e=>"loading"===e.kind})(e.Loading||(e.Loading={})),(e=>{e.is=e=>"empty"===e.kind})(e.Empty||(e.Empty={})),(e=>{e.is=e=>"initial"===e.kind})(e.Initial||(e.Initial={})),(e=>{e.is=e=>"saving"===e.kind})(e.Saving||(e.Saving={}))})(w||(w={})),(e=>{(e=>{e.Idle="idle",e.Loading="loading",e.Completed="completed",e.IdleNoSuggestions="idleNoSuggestions"})(e.Kind||(e.Kind={})),e.isLoadingAfterReload=e=>"loading"===e.state.kind&&e.state.isAfterReload})(S||(S={}))},25249:(e,t,n)=>{n.d(t,{K_:()=>i,oJ:()=>r,t6:()=>s,tK:()=>o});const r=n(74059).P.Id("readerReactions"),i="Reader Reactions",o=25,s=5},74059:(e,t,n)=>{var r;n.d(t,{P:()=>r}),(e=>{e.Id=e=>e,e.isDecorated=e=>"decorations"in e})(r||(r={}))},95869:(e,t,n)=>{n.d(t,{s:()=>r});var r,i=n(21147),o=n(53186),s=n(58303),a=n(90023),c=n(14527),l=n(39104),u=n(66861),d=n(28642);(e=>{e.isInsert=e=>"insert"in e,e.isInsertString=t=>(0,e.isInsert)(t)&&"string"==typeof t.insert,e.isInsertEmbed=t=>(0,e.isInsert)(t)&&!(0,e.isInsertString)(t),e.isDelete=e=>"delete"in e,e.isRetain=e=>"retain"in e,e.containsInsertsOnly=t=>t.ops.every(e.isInsert),e.getInsertLength=c.i.Op.length,e.getTrimmedInsertLength=t=>(0,e.isInsertString)(t)?t.insert.trim().length:1,e.match=(t,n,r)=>i=>(0,e.isInsert)(i)?t(i):(0,e.isDelete)(i)?n(i):r(i),e.getAttr=function(t,n){return(0,e.isDelete)(t)||!t.attributes?s.YP:"function"==typeof n?(0,a.zG)(s.ij(Object.keys(t.attributes).find(n)),s.UI((e=>t.attributes[e]))):s.ij(t.attributes[n])},e.operationLength=c.i.Op.length;const t=e=>-e.delete;e.getOperationOffset=(0,e.match)(c.i.Op.length,t,c.i.Op.length);const n=e=>t=>t.ops.map(e).reduce(l.Sm,0),r=()=>0;e.calcDiffLength=n((0,e.match)(c.i.Op.length,t,r)),e.calcAmountLength=n((0,e.match)(c.i.Op.length,c.i.Op.length,r)),e.calcAffectedLength=n((0,e.match)(r,c.i.Op.length,c.i.Op.length)),e.rangeOfTheChange=function(t){const n=(0,e.match)(a.W8,a.W8,(e=>Boolean(e.attributes)));return t.ops.reduce((([t,r],i)=>{const o=(0,e.operationLength)(i),c=r+o;return[(0,a.zG)(t,s.g_((()=>n(i)?s.G([r,c]):s.YP),(e=>n(i)?s.G([e[0],c]):s.G(e)))),c]}),[s.YP,0])[0]},e.isEqual=t=>(n,r)=>(0,e.match)((n=>(0,e.isInsert)(r)&&n.insert===r.insert&&t(n.attributes,r.attributes)),(t=>(0,e.isDelete)(r)&&t.delete===r.delete),(n=>(0,e.isRetain)(r)&&n.retain===r.retain&&t(n.attributes,r.attributes)))(n),e.deltaEq=i.f7(((t,n)=>t.ops.length===n.ops.length&&(0,d.Hx)(t.ops,n.ops,(0,e.isEqual)(u.vZ)))),e.normalizeDelta=e=>(new c.i).compose(e);const h=e=>e&&Object.keys(e).reduce(((t,n)=>(t[n]="string"==typeof e[n]?`<${e[n].length}>`:e[n],t)),{});e.anonymizeTextAndStringAttrs=function(t){return t.ops.reduce(((t,n)=>(0,e.match)((n=>t.insert("string"==typeof n.insert?`<${(0,e.getInsertLength)(n)}>`:"<embed>",h(n.attributes))),(e=>t.delete(e.delete)),(e=>t.retain(e.retain,h(e.attributes))))(n)),new c.i)},e.squash=function(e){return e.reduce(((e,t)=>e.compose(new c.i(t))),new c.i)},e.cleanAllAttrs=function(t){return t.reduce(((t,n)=>(0,e.match)((e=>t.insert(e.insert)),(e=>t.delete(e.delete)),(e=>t.retain(e.retain)))(n)),new c.i)};const p=e=>s.ij(e.attributes);e.getAttrs=(0,e.match)(p,(()=>s.YP),p),e.skipAny=a.jv;e.cleanDelta=(t,n)=>r=>{const i=e=>e&&Object.keys(e).filter(((e,t,r)=>n(e,r.slice(0)))).reduce(((t,n)=>(t[n]=e[n],t)),{});return r.reduce(((n,r)=>(0,e.match)((e=>n.insert("string"==typeof e.insert||t(e.insert)?e.insert:" ",i(e.attributes))),(e=>n.delete(e.delete)),(e=>n.retain(e.retain,i(e.attributes))))(r)),new c.i)},e.splitToDeleteThenInsert=t=>t.reduce((([t,n],r)=>e.match((e=>[t,n.push(e)]),(e=>[t.push(e),n]),(e=>[t.push({retain:e.retain}),n.push(e)]))(r)),[new c.i,new c.i]).map((e=>e.chop())),e.nonEmpty=e=>e.ops.length>0,e.findInDelta=function(e,t=r){return n=>{let r=0,i=0;for(;r<n.ops.length;){const o=n.ops[r];if(e(o))return i+=t(o),s.G(i);i+=c.i.Op.length(o),r+=1}return s.YP}},e.getOps=(0,a.ls)((0,u.ei)("ops"),s.ij,s.tS(o.nI))})(r||(r={}))},98921:(e,t,n)=>{n.d(t,{x:()=>r});var r,i,o=n(66861);(i=r||(r={})).compose=function(e={},t={},n){"object"!=typeof e&&(e={}),"object"!=typeof t&&(t={});let r=(0,o.v4)(t);n||(r=Object.keys(r).reduce(((e,t)=>(null!=r[t]&&(e[t]=r[t]),e)),{}));for(const n in e)void 0!==e[n]&&void 0===t[n]&&(r[n]=e[n]);return Object.keys(r).length>0?r:void 0},i.diff=function(e={},t={}){"object"!=typeof e&&(e={}),"object"!=typeof t&&(t={});const n=Object.keys(e).concat(Object.keys(t)).reduce(((n,r)=>((0,o.Xy)(e[r],t[r])||(n[r]=void 0===t[r]?null:t[r]),n)),{});return Object.keys(n).length>0?n:void 0},i.invert=function(e={},t={}){e=null!=e?e:{};const n=Object.keys(t).reduce(((n,r)=>(t[r]!==e[r]&&void 0!==e[r]&&(n[r]=t[r]),n)),{});return Object.keys(e).reduce(((n,r)=>(e[r]!==t[r]&&void 0===t[r]&&(n[r]=null),n)),n)},i.transform=function(e,t,n=!1){if("object"!=typeof e)return t;if("object"!=typeof t)return;if(!n)return t;const r=Object.keys(t).reduce(((n,r)=>(void 0===e[r]&&(n[r]=t[r]),n)),{});return Object.keys(r).length>0?r:void 0}},65674:(e,t,n)=>{n.d(t,{Z:()=>p});var r,i,o=n(93667),s=n.n(o),a=n(66861),c=n(98921);class l{constructor(e){this.ops=e,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(e){e||(e=1/0);const t=this.ops[this.index];if(null==t)return{retain:1/0};const n=this.offset,r=u(t);if(e>=r-n?(e=r-n,this.index+=1,this.offset=0):this.offset+=e,"number"==typeof t.delete)return{delete:e};const i={};return t.attributes&&(i.attributes=t.attributes),"number"==typeof t.retain?i.retain=e:"string"==typeof t.insert?i.insert=t.insert.substr(n,e):i.insert=t.insert,i}peek(){return this.ops[this.index]}peekLength(){return null!=this.ops[this.index]?u(this.ops[this.index])-this.offset:1/0}peekType(){return null==this.ops[this.index]?"retain":"number"==typeof this.ops[this.index].delete?"delete":"number"==typeof this.ops[this.index].retain?"retain":"insert"}rest(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);{const e=this.offset,t=this.index,n=this.next(),r=this.ops.slice(this.index);return this.offset=e,this.index=t,[n].concat(r)}}return[]}}function u(e){return"number"==typeof e.delete?e.delete:"number"==typeof e.retain?e.retain:"string"==typeof e.insert?e.insert.length:1}(i=r||(r={})).iterator=function(e){return new l(e)},i.length=u;const d=String.fromCharCode(0),h=class e{constructor(e){Array.isArray(e)?this.ops=e:null!=e&&Array.isArray(e.ops)?this.ops=e.ops:this.ops=[]}insert(e,t){const n={};return"string"==typeof e&&0===e.length?this:(n.insert=e,null!=t&&"object"==typeof t&&Object.keys(t).length>0&&(n.attributes=t),this.push(n))}delete(e){return e<=0?this:this.push({delete:e})}retain(e,t){if(e<=0)return this;const n={retain:e};return null!=t&&"object"==typeof t&&Object.keys(t).length>0&&(n.attributes=t),this.push(n)}push(e){let t=this.ops.length,n=this.ops[t-1];if(e=(0,a.v4)(e),"object"==typeof n){if("number"==typeof e.delete&&"number"==typeof n.delete)return this.ops[t-1]={delete:n.delete+e.delete},this;if("number"==typeof n.delete&&null!=e.insert&&(t-=1,n=this.ops[t-1],"object"!=typeof n))return this.ops.unshift(e),this;if((0,a.Xy)(e.attributes,n.attributes)){if("string"==typeof e.insert&&"string"==typeof n.insert)return this.ops[t-1]={insert:n.insert+e.insert},"object"==typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this;if("number"==typeof e.retain&&"number"==typeof n.retain)return this.ops[t-1]={retain:n.retain+e.retain},"object"==typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this}}return t===this.ops.length?this.ops.push(e):this.ops.splice(t,0,e),this}chop(){const e=this.ops[this.ops.length-1];return null!=(null==e?void 0:e.retain)&&null==e.attributes&&this.ops.pop(),this}filter(e){return this.ops.filter(e)}forEach(e){this.ops.forEach(e)}map(e){return this.ops.map(e)}partition(e){const t=[],n=[];return this.forEach((r=>{(e(r)?t:n).push(r)})),[t,n]}reduce(e,t){return this.ops.reduce(e,t)}changeLength(){return this.reduce(((e,t)=>null!=t.insert?e+r.length(t):null!=t.delete?e-t.delete:e),0)}length(){return this.reduce(((e,t)=>e+r.length(t)),0)}slice(t=0,n=1/0){const i=[],o=r.iterator(this.ops);let s=0;for(;s<n&&o.hasNext();){let e;s<t?e=o.next(t-s):(e=o.next(n-s),i.push(e)),s+=r.length(e)}return new e(i)}compose(t){const n=r.iterator(this.ops),i=r.iterator(t.ops),o=[],s=i.peek();if(null!=s&&"number"==typeof s.retain&&null==s.attributes){let e=s.retain;for(;"insert"===n.peekType()&&n.peekLength()<=e;)e-=n.peekLength(),o.push(n.next());s.retain-e>0&&i.next(s.retain-e)}const l=new e(o);for(;n.hasNext()||i.hasNext();)if("insert"===i.peekType())l.push(i.next());else if("delete"===n.peekType())l.push(n.next());else{const t=Math.min(n.peekLength(),i.peekLength()),r=n.next(t),o=i.next(t);if("number"==typeof o.retain){const s={};"number"==typeof r.retain?s.retain=t:s.insert=r.insert;const u=c.x.compose(r.attributes,o.attributes,"number"==typeof r.retain);if(u&&(s.attributes=u),l.push(s),!i.hasNext()&&(0,a.Xy)(l.ops[l.ops.length-1],s)){const t=new e(n.rest());return l.concat(t).chop()}}else"number"==typeof o.delete&&"number"==typeof r.retain&&l.push(o)}return l.chop()}concat(t){const n=new e(this.ops.slice());return t.ops.length>0&&(n.push(t.ops[0]),n.ops=n.ops.concat(t.ops.slice(1))),n}diff(t,n){if(this.ops===t.ops)return new e;const i=[this,t].map((e=>e.map((n=>{if(null!=n.insert)return"string"==typeof n.insert?n.insert:d;throw new Error("diff() called "+(e===t?"on":"with")+" non-document")})).join(""))),o=new e,l=s()(i[0],i[1],n),u=r.iterator(this.ops),h=r.iterator(t.ops);return l.forEach((e=>{let t=e[1].length;for(;t>0;){let n=0;switch(e[0]){case s().INSERT:n=Math.min(h.peekLength(),t),o.push(h.next(n));break;case s().DELETE:n=Math.min(t,u.peekLength()),u.next(n),o.delete(n);break;case s().EQUAL:n=Math.min(u.peekLength(),h.peekLength(),t);const e=u.next(n),r=h.next(n);(0,a.Xy)(e.insert,r.insert)?o.retain(n,c.x.diff(e.attributes,r.attributes)):o.push(r).delete(n)}t-=n}})),o.chop()}eachLine(t,n="\n"){const i=r.iterator(this.ops);let o=new e,s=0;for(;i.hasNext();){if("insert"!==i.peekType())return;const a=i.peek(),c=r.length(a)-i.peekLength(),l="string"==typeof a.insert?a.insert.indexOf(n,c)-c:-1;if(l<0)o.push(i.next());else if(l>0)o.push(i.next(l));else{if(!1===t(o,i.next(1).attributes||{},s))return;s+=1,o=new e}}o.length()>0&&t(o,{},s)}invert(t){const n=new e;return this.reduce(((e,i)=>{if(i.insert)n.delete(r.length(i));else{if(Boolean(i.retain)&&null==i.attributes)return n.retain(i.retain),e+i.retain;if(Boolean(i.delete)||Boolean(i.retain)&&null!=i.attributes){const o=i.delete||i.retain;return t.slice(e,e+o).forEach((e=>{i.delete?n.push(e):Boolean(i.retain)&&null!=i.attributes&&n.retain(r.length(e),c.x.invert(i.attributes,e.attributes))})),e+o}}return e}),0),n.chop()}transform(t,n=!1){if(n=!!n,"number"==typeof t)return this.transformPosition(t,n);const i=t,o=r.iterator(this.ops),s=r.iterator(i.ops),a=new e;for(;o.hasNext()||s.hasNext();)if("insert"!==o.peekType()||!n&&"insert"===s.peekType())if("insert"===s.peekType())a.push(s.next());else{const e=Math.min(o.peekLength(),s.peekLength()),t=o.next(e),r=s.next(e);if(null!=t.delete)continue;null!=r.delete?a.push(r):a.retain(e,c.x.transform(t.attributes,r.attributes,n))}else a.retain(r.length(o.next()));return a.chop()}transformPosition(e,t=!1){t=!!t;const n=r.iterator(this.ops);let i=0;for(;n.hasNext()&&i<=e;){const r=n.peekLength(),o=n.peekType();n.next(),"delete"!==o?("insert"===o&&(i<e||!t)&&(e+=r),i+=r):e-=Math.min(r,e-i)}return e}};h.Op=r,h.AttributeMap=c.x;let p=h},14527:(e,t,n)=>{n.d(t,{i:()=>r});const r=n(65674).Z},48109:(e,t,n)=>{n.d(t,{T:()=>l});var r=n(24332),i=n(84210),o=n(28338),s=n(39104),a=n(14944);function c(e){return(t,n)=>r=>(0,a.gt)(e)(r,t)&&(0,a.lt)(e)(r,n)}var l,u,d=n(63068),h=n(12518),p=n(73823);!function(e){var t=i.k4(),n=e.ord=i.pR(a.Mh),o=e.MIN=t.wrap(0),l=e.MAX=t.wrap(1),u=t.wrap(.01),g=t.wrap(.99),f=e.is=function(e){return"number"==typeof e&&!Number.isNaN(e)&&a.vX(n)(o,l)(t.wrap(e))},m=e.prism=i.MS(f),b=(e.isMin=(0,s.WA)(n.equals)(o),e.isMax=(0,s.WA)(n.equals)(l),e.closeToMin=c(n)(o,u),e.closeToMax=c(n)(g,l),e.groupSum=d.B_(d.Kh),e.monoidProduct=i.uZ(r.zt),e.monoidMax=i.uZ({concat:Math.max,empty:0}),e.monoidMin=i.uZ({concat:Math.min,empty:1}),e.fromNumber=function(e){return f(e)?h.F2(t.wrap(e)):"number"!=typeof e||Number.isNaN(e)?h.t$("can not create Ratio from not a number: "+JSON.stringify(e)):e<0||e>1?h.t$("can not convert number: ".concat(e," to ratio")):h.t$("unknown parse error")});e.unsafeFromNumber=function(e){return p.MH(b(e))},e.unwrap=function(e){return t.unwrap(e)},e.create=function(e,t){return m.getOption(t/e)}}(l||(l={})),function(e){var t=e.iso=i.k4(),n=e.ord=i.pR(a.Mh),r=e.MIN=t.wrap(0),c=e.MAX=t.wrap(100),u=e.is=function(e){return Number.isInteger(e)&&a.vX(n)(r,c)(t.wrap(e))};e.prism=i.MS(u),e.isMin=(0,s.WA)(n.equals)(r),e.isMax=(0,s.WA)(n.equals)(c),e.groupSum=d.B_(d.Kh),e.fromNumber=function(e){return(0,o.kG)(u(e),"can not create percent from: ".concat(e)),t.wrap(e)},e.fromRatio=function(e){var n=l.prism.reverseGet(e),r=l.closeToMin(e)?1:l.closeToMax(e)?99:Math.round(100*n);return(0,o.kG)(u(r),"incorrect percent value: ".concat(r," was derived from ratio: ").concat(e)),t.wrap(r)}}(u||(u={}))},52071:(e,t,n)=>{n.d(t,{SV:()=>r,bv:()=>i});var r,i,o,s,a,c,l=n(37159),u=n(96705),d=n(14944),h={equals:d.Mh.equals,compare:d.Mh.compare,top:1/0,bottom:-1/0},p=n(12518),g=n(21147),f=n(24332),m=n(90023),b=n(9615),y=n(2084),_=n(58303),v=n(66861);!function(e){e.monoid=f.JS({start:f.Yg(h),end:f.cT(h),meta:f.JS({})});var t=e.create=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{start:e,end:t,meta:n}},n=(e.empty=t(0,0),e.map=function(e,t){return(0,u._)((0,l._)({},e),{meta:t(e.meta)})}),r=(e.extend=function(e,t){return(0,u._)((0,l._)({},e),{meta:t(e)})},e.copy=function(e){return n(e,m.yR)},e.compose=function(e){return function(t){return n(t,(function(t){return(0,l._)({},t,e)}))}},e.alterLeft=function(e,t){return(0,m.zG)(e,p.DT((function(n){return n.start-t<=e.end}),JSON.stringify),p.UI((function(e){var r=n(e,(0,v.Ov)("increasedLeft")(y.dH((function(e){return e+t}),t)));return r.start-=t,r})))},e.alterRight=function(e,t){return(0,m.zG)(e,p.DT((function(n){return n.start<=e.end+t}),JSON.stringify),p.UI((function(e){var r=n(e,(0,v.Ov)("increasedRight")(y.dH((function(e){return e+t}),t)));return r.end+=t,r})))},e.size=function(e){return e.end-e.start}),i=(e.isEmpty=function(e){return 0===r(e)},e.isValid=function(e){return function(t){return t.start>=0&&t.start<=t.end&&t.end<=e}},e.isOverlap=function(e,t){return e.start<=t.end&&t.start<=e.end}),o=(e.contains=function(e,t){return e.start>=t.start&&e.end<=t.end},e.distanceFrom=function(e,t){return i(e,t)?0:e.start<t.start?t.start-e.end:e.start-t.end},e.join=function(e,n){return t(Math.min(e.start,n.start),Math.max(e.end,n.end))},e.intersection=function(e,n){return i(e,n)?_.G(t(Math.max(e.start,n.start),Math.min(e.end,n.end))):_.YP},e.eq=g.MW({start:b.Eq,end:b.Eq}),e.ordStart=(0,d.Uz)((function(e){return e.start}))(d.Mh)),s=e.ordEnd=(0,d.Uz)((function(e){return e.end}))(d.Mh);e.ord=(0,d.jG)().concat(s,o)}(r||(r={})),(o=i||(i={})).is=function(e){var t=e.meta;return"number"==typeof t.increasedLeft||"number"==typeof t.increasedRight},o.restore=function(e){return i.is(e)?(0,m.zG)(e,(function(e){return e.meta.increasedLeft?r.alterLeft(e,-e.meta.increasedLeft):p.F2(e)}),p.tS((function(e){return e.meta.increasedRight?r.alterRight(e,-e.meta.increasedRight):p.F2(e)}))):p.F2(e)},function(e){e.is=function(e){return r.isEmpty(e)}}(s||(s={})),function(e){e.create=function(e){return r.compose({value:e})};var t=e.ordWord=(0,d.Uz)((function(e){return e.meta.value}))(d.r9);e.ord=(0,d.jG)().concat(t,r.ord)}(a||(a={})),function(e){e.create=function(e){return r.compose({clicks:e})};var t=e.ordClicks=(0,d.Uz)((function(e){return e.meta.clicks}))(d.Mh);e.ord=(0,d.jG)().concat(t,a.ord)}(c||(c={}))},17437:(e,t,n)=>{n.d(t,{R:()=>r});var r,i=n(37159),o=n(96705);!function(e){var t=e.empty={cost:0,critical:0,advanced:0,free:0,freePremium:0,paid:0,unread:0,textLength:0,muted:0,priority:0};e.toUnmutedOnly=function(e){return 0===e.muted?e:(0,o._)((0,i._)({},t),{muted:e.muted})}}(r||(r={}))},91219:(e,t,n)=>{n.d(t,{P:()=>r,x:()=>i});var r,i,o=n(52071);!function(e){e.is=e=>"string"==typeof e.meta.alertId,e.create=e=>o.SV.compose({alertId:e});e.getRangeId=(e,t,n)=>`${e}|${t.btype}%${n}`;e.fromRangeIdToAlertId=function(e){const t=e.indexOf("|");return t<0?e:e.substring(0,t)}}(r||(r={})),function(e){let t;!function(e){let t,n;!function(e){e.REPLACE="r",e.HIGHLIGHT="h",e.HIGHLIGHT_UPDATABLE="hu",e.APPLIED="a",e.CONTEXT="ctx"}(t=e.Behavior||(e.Behavior={})),function(e){e.MAIN="m",e.FOCUS="f",e.ENCLOSING="e",e.MAIN_START="ms"}(n=e.View||(e.View={}))}(t=e.Meta||(e.Meta={}));var n=e.isAbstract=e=>{const n=e.meta.btype;return n===t.Behavior.REPLACE||n===t.Behavior.CONTEXT};e.isApplied=e=>e.meta.btype===t.Behavior.APPLIED,e.isVisible=e=>{const t=e;return"string"==typeof t.meta.btype&&!n(t)&&"string"==typeof t.meta.vtype},e.create=(e,t)=>o.SV.compose({btype:e,vtype:t});e.hasBehavior=function(e){return t=>t.meta.btype===e};const r=e=>t=>i.isVisible(t)&&t.meta.vtype===e;e.isMainView=r(t.View.MAIN),e.isFocusView=r(t.View.FOCUS),e.isEnclosingView=r(t.View.ENCLOSING),e.isMainStartView=r(t.View.MAIN_START)}(i||(i={}))},55812:(e,t,n)=>{n.d(t,{bZ:()=>me,h$:()=>X,eT:()=>B,Np:()=>de,UC:()=>ue,QF:()=>he});var r=n(12533),i=n(37159),o=n(96705),s=n(18117),a=n(59833),c=n(95922),l=n(51505),u=n(14944),d=n(18397),h=n(20232),p=n(90023),g=n(11633),f=n(28642),m=n(95869),b=n(28338),y=n(39104),_=n(55709),v=n(64443),w=n(58303),S=n(12518),k=n(53186),I=n(73823),C=n(2084),E=n(59251),A=n(66861),x=n(2373),T=n(3055),O=n(32004),P=n(52071),R=n(48109),D=n(63786),N=n(18990);class U{static register(e,t,n,r){return new U(e,t,n,r)}registerAlternatives(e){(0,b.kG)(!this._disposed,"Cannot call registerAlternatives method on disposed AlertAlternativeManager"),this.alternatives=(0,p.zG)(e,k.UI((e=>{const t=this._alternativesManager.registerAlternative(e,this._alertId);return this._alternativesMap.set(t.alternativeId,t),t})))}deregisterAlternatives(){return(0,b.kG)(!this._disposed,"Cannot call deregisterAlternatives method on disposed AlertAlternativeManager"),this._alternativesMap.forEach((e=>{this._alternativesMap.delete(e.alternativeId)&&this._alternativesManager.deregisterAlternative(e.alternativeId)})),this}registerReversedAlternative(e){return(0,p.zG)(this._disposed,S.DT((e=>!e),(()=>new Error("Cannot call registerReversedAlternative method on disposed AlertAlternativeManager"))),S.UI((()=>{const t=this._alternativesManager.registerAlternative(e,this._alertId);return()=>(0,p.zG)(t.alternativeId,this._alternativesManager.getAlternative,S.UI((e=>e.alternative)))})))}dispose(){(0,b.kG)(!this._disposed,"Cannot dispose already disposed AlertAlternativeManager"),this.deregisterAlternatives(),this._disposed=!0}constructor(e,t,n,i){(0,r._)(this,"_alternativesManager",void 0),(0,r._)(this,"_alertId",void 0),(0,r._)(this,"rev",void 0),(0,r._)(this,"_alternativesMap",void 0),(0,r._)(this,"_disposed",void 0),(0,r._)(this,"alternatives",void 0),this._alternativesManager=e,this._alertId=t,this.rev=n,this._alternativesMap=new Map,this._disposed=!1,this.registerAlternatives(i)}}var M=n(17437),j=n(91219),F=n(24332);class L{static register(e,t,n,r,i){return new L(e,t,n,r,i)}_normalize(e){return 1===P.SV.size(e)?this._positionManager.widen(e):e}_getFirstRange(e){return this._rangesMap.get(this._ranges[e].values().next().value)}_getRanges(e){return Array.from(this._ranges[e]).map((e=>{const t=this._rangesMap.get(e);return Boolean(t)||this._log.warn("Got undefined range",{markId:e}),t})).filter(Boolean)}enqueueRanges(e,t,n){this._cleanupPendingRanges();const r=new Map;this._registerRanges(t.map(this._normalizeIfApplicable),(e=>this._pendingRanges.push(["highlight",e])),r,this._alertId),this._registerRanges(e,(e=>this._pendingRanges.push(["replace",e])),r),this._registerRanges(n,(e=>this._pendingRanges.push(["context",e])),r,this._alertId)}get pending(){return this._pendingRanges.length>0}_getPendingRanges(e){return this._pendingRanges.filter((([t])=>t===e)).map((([,e])=>this._rangesMap.get(e)))}hasMatchingPendingRanges(e,t,n){return this._getPendingRanges(t).some((t=>e.some((e=>n(e,t)))))}_deregisterRange(e){this._rangesMap.delete(e)&&this._positionManager.deregisterRange(e)}_cleanupPendingRanges(){this._pendingRanges.forEach((([e,t])=>this._deregisterRange(t))),this._pendingRanges=[]}applyPendingRangesUpdate(){if(!this.pending)return w.YP;const e=this._getRanges("highlight");this._ranges.replace.forEach(this._deregisterByRangeId),this._ranges.context.forEach(this._deregisterByRangeId),this._ranges.replace.clear(),this._ranges.context.clear(),this._ranges.highlight.clear();const t=this._getPendingRanges("highlight");return this._pendingRanges.forEach((([e,t])=>this._ranges[e].add(t))),this._pendingRanges=[],this.highlightRanges=this._getRanges("highlight"),this.contextRanges=this._getRanges("context"),this.replaceRange=this._getFirstRange("replace"),w.G({addedHighlightedRanges:t,removedHighlightedRanges:[e,()=>{e.forEach((e=>this._deregisterRange(e.meta.id)))}]})}_registerRanges(e,t,n,r){e.forEach((e=>{let i;const o=`${e.start},${e.end}`;n&&n.has(o)?i=n.get(o):(i=j.P.getRangeId(this._alertId,e.meta,this._rangesIndex++),this._rangesMap.set(i,this._positionManager.registerRange(i,r?this._rangeCreator(e):e)),n&&n.set(o,i)),t(i)}))}registerJoinedAppliedRanges(){(0,p.zG)(k.nI([...Array.from(this._ranges.highlight),...Array.from(this._ranges.replace)]),w.UI(k.UI((e=>this._rangesMap.get(e)))),w.UI(F.g_(P.SV.monoid)),w.UI((e=>this._registerRanges((0,p.zG)(e,j.x.create(j.x.Meta.Behavior.APPLIED,j.x.Meta.View.MAIN),this._positionManager.widen,a.of),(e=>this._ranges.applied.add(e))))))}registerHighlightRangesAsApplied(){const e=Array.from(this._ranges.highlight).map((e=>this._rangesMap.get(e))).map(j.x.create(j.x.Meta.Behavior.APPLIED,j.x.Meta.View.MAIN)).map(this._positionManager.widen);this._registerRanges(e,(e=>this._ranges.applied.add(e)))}get appliedRanges(){return(0,p.zG)(this._getRanges("applied"),a.UI((e=>()=>(0,p.zG)(this._positionManager.narrow(e),w.fS((()=>P.SV.create(e.start,e.start,e.meta)))))))}dispose(){this._rangesMap.forEach(((e,t)=>this._positionManager.deregisterRange(t))),this._rangesMap.clear()}constructor(e,t,n,i,o){(0,r._)(this,"_positionManager",void 0),(0,r._)(this,"_alertId",void 0),(0,r._)(this,"_log",void 0),(0,r._)(this,"_normalizeIfApplicable",void 0),(0,r._)(this,"_rangeCreator",void 0),(0,r._)(this,"_rangesMap",void 0),(0,r._)(this,"_ranges",void 0),(0,r._)(this,"_pendingRanges",void 0),(0,r._)(this,"_deregisterByRangeId",void 0),(0,r._)(this,"_rangesIndex",void 0),(0,r._)(this,"highlightRanges",void 0),(0,r._)(this,"contextRanges",void 0),(0,r._)(this,"replaceRange",void 0),this._positionManager=e,this._alertId=t,this._log=v.C8.Logging.getLogger("AlertRangeManager",v.zW.i.DEBUG),this._normalizeIfApplicable=e=>j.x.isFocusView(e)?e:this._normalize(e),this._rangeCreator=j.P.create(this._alertId),this._rangesMap=new Map,this._ranges={highlight:new Set,replace:new Set,applied:new Set,context:new Set},this._pendingRanges=[],this._deregisterByRangeId=e=>!this._ranges.highlight.has(e)&&this._deregisterRange(e),this._rangesIndex=0,this._log.trace("register ranges for alert",t);const s=new Map;this._registerRanges(i.map(this._normalizeIfApplicable),(e=>this._ranges.highlight.add(e)),s,this._alertId),this._registerRanges(o,(e=>this._ranges.context.add(e)),s,this._alertId),this._registerRanges(n,(e=>this._ranges.replace.add(e)),s),this.highlightRanges=this._getRanges("highlight"),this.replaceRange=this._getFirstRange("replace"),this.contextRanges=this._getRanges("context")}}var G,B,z,V,q,H,W,$,X,K,Y,Z,J=n(76786),Q=n(6083),ee=n(48148);!function(e){e.api="api",e.sidebar="sidebar",e.text="text"}(G||(G={})),function(e){e.FullSentence="FullSentence",e.Simple="Simple",e.Regular="Regular",e.OneGap="OneGap",e.Takeaway="Takeaway",e.Synfony="Synfony",e.ShortenIt="shortenIt",e.ToneAI="ToneAI",e.EthicalAI="EthicalAI",e.SuggestedSnippet="SuggestedSnippet",e.Citation="Citation",e.CitationDetection="CitationDetection",e.WritingExpert="WritingExpert"}(B||(B={})),function(e){e.correctlyDetected="correctlyDetected",e.incorrectlyDetected="incorrectlyDetected"}(z||(z={})),(V=B||(B={})).parse=function(e){return x.wQ.isFullSentence(e)?B.FullSentence:"true"===e.underline_with_teaser?B.WritingExpert:"true"===e.citation?B.Citation:void 0!==e.citation_detection?B.CitationDetection:"true"===e.transform_with_button?B.Simple:"true"===e.gap_transform?B.OneGap:void 0!==e.takeawayScore?B.Takeaway:void 0!==e.drilldownTree?B.Synfony:"true"===e.shorten_it?B.ShortenIt:void 0!==e.tone_slider?B.ToneAI:void 0!==e.ethical_ai_external_link?B.EthicalAI:void 0!==e.suggested_snippet_text&&void 0!==e.suggested_snippet_lib_link?B.SuggestedSnippet:B.Regular},V.isFullSentence=function(e){return e===B.FullSentence},V.isSimple=function(e){return e===B.Simple},V.isOneGap=function(e){return e===B.OneGap},V.isSynfony=function(e){return e===B.Synfony},V.isShortenIt=function(e){return e===B.ShortenIt},V.isToneAI=function(e){return e===B.ToneAI},V.isEthicalAI=function(e){return e===B.EthicalAI},V.isCitation=function(e){return e===B.Citation},V.isCitationDetection=function(e){return e===B.CitationDetection},V.isSuggestedSnippet=function(e){return e===B.SuggestedSnippet},V.isWritingExpert=function(e){return e===B.WritingExpert},function(e){const t=(0,p.ls)(a.DY(u.Uz((e=>e.order))(u.Mh)),a.UI((e=>({key:e.key,text:e.reason}))));e.parse=(0,p.ls)(w.ij,w.UI((e=>({question:e.question,options:t(e.options)}))))}(q||(q={})),function(e){e.parse=w.ij,e.isVox=e=>"Vox"===e.categoryTitle}(H||(H={})),function(e){e.fromCapiExtraProperties=function(e){return{reactivationYellowUnderlines:"true"===e.reactivation_yellow_underlines,hasAddToDictionary:"true"===e.add_to_dict,didYouMean:"true"===e.did_you_mean,showTitle:"true"===e.show_title,isEnhancement:"true"===e.enhancement,isBeta:"true"===e.beta,priority:parseInt(Boolean(e.priority)?e.priority:"0",10),tone:s.Yt(w.Kw)({emojiId:w.ij(e.emoji_id),name:w.ij(e.tone)}),vox:(0,p.zG)(w.ij(e.voxCompanyName),w.UI((t=>({companyName:t,logoUrl:w.ij(e.voxLogoUrl)})))),fluencyMessage:w.ij(e.fluency_message),cardType:B.parse(e),isInQuotes:"true"===e.in_quotes,bulkAcceptable:"true"===e.bulk_acceptable,takeaway:w.Uo(ue.parseExtraProps(e)),takeawayBundleId:(0,p.zG)(w.ij(e.takeaway_bundle_id),w.hX(y.Dw)),shortenIt:(0,p.zG)(w.Uo(de.parseExtraProps(e)),w.UI((t=>(0,o._)((0,i._)({},t),{alertState:e.shorten_it_alert_state?{summaryState:K.SummaryState.fromString(e.shorten_it_alert_state.summaryState)}:void 0})))),toneAI:he.parseExtraProps(e),ethicalAI:pe.parseExtraProps(e),freePremium:w.ij(e.free_premium),premiumYellowFooterVariant:w.ij(e.premium_yellow_footer_variant),occasionalPromotion:w.ij(e.occasional_promotion),drilldownTree:w.ij(e.drilldownTree),suggestedSnippet:(0,p.zG)(s.Yt(w.Kw)({snippetText:w.ij(e.suggested_snippet_text),libLink:w.ij(e.suggested_snippet_lib_link)}),w.UI((t=>(0,o._)((0,i._)({},t),{snippetsTrigger:w.ij(e.snippet_trigger)})))),citationDetection:(0,p.zG)(e.citation_detection,_.R$.citationType.decode,w.Uo),citationGap:(0,p.zG)(e.citation_gap,w.ij,w.UI((e=>"true"===e))),citationItalicization:(0,p.zG)(e.citation_italicization,w.ij,w.UI((e=>"true"===e))),autoapply:(0,p.zG)(w.ij(e.autoapply),w.UI((e=>"true"===e))),knowledgeHubTermCreationUrl:w.ij(e.knowledgeHubTermCreationUrl),vbar:"true"===e.vbar,underlineWithTeaser:"true"===e.underline_with_teaser}}}(W||(W={})),function(e){e.isWithAlternative=function(e){return void 0!==e.reversedAlternative};e.mock={action:x.PZ.LOOKED,commit:p.Q1,undo:p.Q1}}($||($={})),function(e){var t=e.ordId=u.Uz((e=>e.id))(u.r9),n=e.ordHRange=u.Uz((e=>e.getHighlightRanges()[0]))(P.SV.ord);e.ord=u.jG().concat(n,t)}(X||(X={})),function(e){let t;!function(e){e.notRequested="notRequested",e.requestSent="requestSent",e.received="received",e.invalidated="invalidated",e.notFound="notFound"}(t=e.SummaryState||(e.SummaryState={})),(t=e.SummaryState||(e.SummaryState={})).fromString=function(e){switch(e){case t.notRequested:return t.notRequested;case t.requestSent:return t.requestSent;case t.received:return t.received;case t.notFound:return t.notFound;case t.invalidated:return t.invalidated;default:return}}}(K||(K={})),function(e){e.ToneSlider=g.IX(g.dt({emoji_id:g.Z_,name:g.Z_}))}(Y||(Y={})),function(e){const t=(0,p.a9)(l.F2(void 0));e.mock={_applyAlert:t,_applyTransformJson:t,_alertFeedback:t,_alertBatchFeedback:(0,p.a9)(p.Q1),_dismissBatch:t,_releaseRef:t,_notifyAlertUpdated:t,_changeMuteState:(0,p.a9)(l.F2(S.F2([]))),_changeGapValue:t,_confirmApplied:t,_changeTakeawayFeedback:e=>me.isTakeaway(e)?l.F2(e):l.t$(new Error("Not a Takeaway alert")),_shortenItSummaryNotFound:e=>me.isShortenIt(e)?l.F2(e):l.t$(new Error("Not a ShortenIt alert")),_commitShortenItSummaryRequest:e=>me.isShortenIt(e)?l.F2(e):l.t$(new Error("Not a ShortenIt alert")),_dismissShortenItTransformGroup:(e,t)=>me.isShortenIt(e)?l.F2(e):l.t$(new Error("Not a ShortenIt alert")),_changeToneAIToneAlternative:e=>me.isToneAI(e)?l.F2(e):l.t$(new Error("Not a ToneAI alert"))}}(Z||(Z={}));const te=(0,p.ls)(Number,R.T.prism.getOption,w.fS((()=>R.T.MIN)));class ne{static _createId(e){return`${e}_${(this.idCounter++).toString()}`}get rawId(){return ee.I.isKnown(this._raw)?w.G(this._raw.id):w.YP}get state(){return this._state}get patternName(){return this._raw.pname}get patternNameQualifier(){return this._raw.pnameQualifier}get inline(){return this._raw.inline}get freePremium(){return this.extraProperties.freePremium}get disposed(){return this._disposed}get isRead(){return this._isRead}set isRead(e){this._log.trace("isRead#"+this.version,String(e)),this.bumpVersion(),this._isRead=e}get version(){return this._version}get mute(){return this._mute}set mute(e){this._log.trace("mute#"+this.version,String(e)),this.bumpVersion(),this._mute=e}get todoAction(){return this._raw.todo}get miniCardTitle(){return this._raw.minicardTitle}_registerAll(e,t,n,r,i=!0){(0,p.zG)(t,S.g_((e=>this._registerRanges(w.G(e),n,r)),(t=>{this._registerRanges(w.YP,n,r),i&&(0,p.zG)(t,w.g_(p.Q1,(t=>this._registerAlternatives(e,t))))})))}_deregisterAllAlternatives(){this._alertAlternativeManager=(0,p.zG)(this._alertAlternativeManager,ne._disposeAltManager),this._pendingAlertAlternativeManager=(0,p.zG)(this._pendingAlertAlternativeManager,ne._disposeAltManager)}_deregisterRanges(){this._alertRangeManager.dispose()}bumpVersion(){this._version++}copy(e=!0){(0,b.kG)(me.isNotDisposed(this),"Cannot copy disposed alert!",(()=>this.toString()));const t=new this.constructor(this._raw,this._ops,this._positionManager,this._alternativeManager,(0,p.zG)(this._replaceEither,S.Pd(P.SV.copy,w.UI(T.r3.Group.copy))),this.getHighlightRanges().map(P.SV.copy),(0,p.zG)(this.getContextRanges(),k.nI,w.UI(k.UI(P.SV.copy))),this.isRead,this.version+1,e);return this.isValid||t.invalidate(),t.from=w.G(this.id),t}get isValid(){return this._isValid}validate(){(0,b.kG)(w.pC(this.rawId),"Cannot validate local alert",(()=>this.toString())),this._isValid=!0}invalidate(){return this._isValid=!1,this}clearCapiId(){ee.I.isKnown(this._raw)&&(this._raw=this.toLocalRawAlert())}silentPatchWithRawAlert(e){this._raw=e,this._mute=me.MuteStateType.fromMutedByType(this._raw.muted),this.progress=te(e.extra_properties.progress),this.extraProperties=W.fromCapiExtraProperties(e.extra_properties)}patchWithRawAlert(e){this._log.trace("patchWithRawAlert#"+this.version,e),this.bumpVersion(),this.silentPatchWithRawAlert(e)}updateAlertWithManagedData(e){(0,b.kG)(0===this.references,"Cannot update referenced alert, use enqueueRawAlertForUpdate instead"),this._deregisterRanges(),this._deregisterAllAlternatives(),this._registerAll(e.rev,(0,p.zG)(Se(e),S.UI(w.UI((e=>e.alternatives)))),_e(e),we(e)),this.patchWithRawAlert(e)}registerReversedAlternative(e){return(0,p.zG)(this._alertAlternativeManager,w.tS((0,p.ls)((t=>t.registerReversedAlternative(e)),S.Vn((t=>(this._log.error("Could not register reversed alternative",{error:t,reversedAlternative:e}),t))),w.Uo)))}_registerAppliedRanges(){(0,p.zG)(this._replaceEither,S.g_((()=>{this._alertRangeManager.registerJoinedAppliedRanges()}),(()=>{this._alertRangeManager.registerHighlightRangesAsApplied(),(0,p.zG)(this._alertAlternativeManager,w.UI((e=>e.deregisterAlternatives())))})))}switchToBeingAppliedState(e,t){(0,b.kG)(!me.isApplied(this)&&!me.isBeingApplied(this),"can not apply already applied or being applied alert",(()=>JSON.stringify({alert:this,source:e,method:t}))),me.isRemoved(this)&&this._log.warn("Trying to switch removed to applied state",{alert:this,source:e,method:t}),this._registerAppliedRanges();const n=this.changeState(me.State.Applied.createBeingApplied(e,t,N.h.create(this))),r=this.getHighlightRanges().map(P.SV.copy),i=(0,p.zG)(this.getContextRanges(),k.nI,w.UI(k.UI(P.SV.copy)));return{beingAppliedAlert:n,undo:()=>{me.isRemoved(this)||me.isBulkApplied(this)||this._registerAll(this._raw.rev,(0,p.zG)(this.getReplaceEither(),S.UI(w.UI(k.UI((e=>e.alternative))))),r,i)}}}apply(e){const{alternativeIndex:t,feedbackSubtype:n,source:r,reason:i,gbPrompt:o}=e;(0,b.kG)(me.isNotDisposed(this),"Cannot apply already disposed alert",(()=>this.toString())),(0,p.zG)(this._replaceEither,S.g_((()=>this._ops._applyAlert({alert:this,replacementText:(0,p.zG)(me.getReplacementText(this,t)(),I.MH),source:r,method:me.State.Applied.Method.ByCard,feedbackSubtype:n,reason:i,gbPrompt:o})),(()=>this._ops._applyTransformJson({alerts:[{alert:this,alternative:me.getApplicableAlternative(this,t)}],source:r,method:me.State.Applied.Method.ByCard,feedbackSubtype:n,drilldownSuggestionIds:e.drilldownSuggestionIds,reason:i,gbPrompt:o}))),l.fS((e=>()=>{throw e})))()}equals(e){return X.ordId.equals(this,e)}hashCode(){return(0,D.AC)(this.id)}isSameType(e){return this.patternName===e.patternName&&this.patternNameQualifier===e.patternNameQualifier&&this.title===e.title&&this.lensType===e.lensType&&this._raw.free===e._raw.free&&this.lensId===e.lensId}enqueueRawAlertForUpdate(e){(0,b.kG)((0,p.zG)(this.rawId,C.wo((t=>t===e.id))),`Cannot update alert with different id, this: ${(0,p.zG)(this.rawId,w.WG)}, that: ${e.id}`);const t=Se(e);(0,b.kG)(S.nM(t)&&S.nM(this._replaceEither)||S.tO(t)&&S.tO(this._replaceEither),"Cannot change replace type on the go"),this._sanityCheck(e),this.patchWithRawAlert(e),this.highlightTexts=e.highlightText,(0,p.zG)(t,S.g_((t=>{this._alertRangeManager.enqueueRanges([t],_e(e),[])}),(t=>{this._alertRangeManager.enqueueRanges([],_e(e),(0,p.zG)(e,we,w.fS((()=>[])))),(0,p.zG)(this._pendingAlertAlternativeManager,w.UI((e=>e.dispose()))),this._pendingAlertAlternativeManager=(0,p.zG)(t,w.UI((t=>U.register(this._alternativeManager,this.id,e.rev,t.alternatives))))})))}get hasNewRangesForUpdate(){return this._alertRangeManager.pending}applyPendingRangesUpdate(){const e=N.h.create(this);this._log.trace("applyPendingRangesUpdate#"+this.version),this.bumpVersion(),(0,p.zG)(this._pendingAlertAlternativeManager,C.bw((()=>{(0,p.zG)(this._alertAlternativeManager,w.UI((e=>e.dispose()))),this._alertAlternativeManager=this._pendingAlertAlternativeManager,this._pendingAlertAlternativeManager=w.YP})));const t=this._alertRangeManager.applyPendingRangesUpdate(),n=N.h.create(this);return(0,p.zG)(this._ops._notifyAlertUpdated(ke.create(e,n))(),S.Vn(this._log.handler("Could not update alert when applying pending ranges update").error)),t}hasMatchingHighlightsWith(e,t){return this.hasNewRangesForUpdate?this._alertRangeManager.hasMatchingPendingRanges(e.getHighlightRanges(),"highlight",t):this.getHighlightRanges().some((n=>e.getHighlightRanges().some((e=>t(n,e)))))}canBeMergedWith(e){return me.isRemoved(this)?this.allowUpdate&&this.isSameType(e)&&this.hasMatchingHighlightsWith(e,P.SV.isOverlap)&&this.state.reason===me.State.Removed.Reason.capiDone:this.hasMatchingHighlightsWith(e,P.SV.ord.equals)&&(0,f.Hx)(this.highlightTexts,e.highlightTexts,((e,t)=>e===t))&&this.isSameType(e)}changeState(e){return this._log.trace("changeState#"+this.version,e),this.bumpVersion(),this._state=e,this}enqueueRangesRemove(e){const t=t=>!e.has(t);return this._alertRangeManager.enqueueRanges((0,p.zG)(this.getReplaceEither(),S.g_((e=>[e]),(()=>[]))),this.getHighlightRanges().filter(t),this.getContextRanges().filter(t)),this}toString(){return"Alert: "+JSON.stringify(this.toJSON(),void 0,0)}toLiteString(){return`aid:${this.id} rid:${w.WG(this.rawId)}`}toJSON(){return(0,o._)((0,i._)({id:this.id,rawId:(0,p.zG)(this.rawId,w.fS((()=>"unknown"))),hranges:this.getHighlightRanges()},(0,p.zG)(this.getReplaceEither(),S.g_((e=>({rrange:e})),(e=>({alts:(0,p.zG)(e,w.UI(a.UI((e=>e.alternative.ops.map(T.JU.anonymize)))),w.FS)}))))),{arange:(0,p.zG)(this.getAppliedRanges(),w.DT(y.Dw),w.WG),lensId:this.lensId,lensType:this.lensType,category:this._raw.category,patternName:this._raw.pname,patternNameQualifier:this._raw.pnameQualifier,impact:this._raw.impact,isValid:this._isValid,state:this.state.type,references:this._refNames,disposed:this._disposed,view:this._raw.view})}toLocalRawAlert(){return ee.I.toLocal(this.toRawAlert())}toRawAlert(){const e=this.getHighlightRanges().map((e=>S.fS((t=>(this._log.info("Alert cannot be restored",t),P.SV.copy(e))))(P.bv.restore(e)))),t=(0,A.Vx)(this._raw,(0,i._)({isRead:this.isRead,muted:this._mute===me.MuteStateType.Muted?x.JW.MutedByType.MUTED_BY_USER:void 0},(0,p.zG)(this.getReplaceEither(),S.g_((e=>({begin:e.start,end:e.end})),(()=>({}))))));return(0,A.Vx)(t,x.wQ.match(this._raw,(()=>({highlightBegin:e[0].start,highlightEnd:e[0].end})),(t=>({transformJson:x.lB.create({alternatives:(0,p.zG)(t.transformJson.alternatives,w.tS((()=>(0,p.zG)(k.nI(this.getContextRanges())))),w.UI(k.UI((e=>({s:e.start,e:e.end})))),w.tS((e=>(0,p.zG)(this.getReplaceEither(),I.MH,w.UI((t=>({context:e,alternatives:(0,p.zG)(t,k.UI((e=>e.alternative)))}))))))),highlights:e.map((e=>({s:e.start,e:e.end,type:e.meta.vtype===j.x.Meta.View.FOCUS?"focus":e.meta.vtype===j.x.Meta.View.ENCLOSING?"enclosing":e.meta.vtype===j.x.Meta.View.MAIN_START?"main_start":"main"})))})})),(()=>({}))))}toLiteAlert(){return{group:this._raw.group,category:this._raw.category,categoryHuman:this._raw.categoryHuman,bundleInfo:(0,p.zG)(this.bundleInfo,w.UI((e=>e.title))),lensName:this.lensName,cost:1}}toLensAlert(){return{lensName:this._raw.cardLayout.group,isFree:this._raw.free,cost:1}}takeReference(e){return this._disposed?S.t$(new b.ej("Can not take reference for already disposed",this.id)):-1!==this._refNames.indexOf(e)?S.t$(new b.ej("can not take ref for same from twice",e)):(this._refNames.push(e),S.F2({dispose:(0,p.zG)((()=>(0,f.QK)(e,this._refNames)),c.a1(this._ops._releaseRef(e,this)),l.g_((e=>()=>this._log.error("Could not release ref",e)),p.a9),h.tD,h.gw(0))}))}dispose(){return this._log.isEnabled(v.zW.i.TRACE)&&this._log.trace("dispose alert call",new Error(`Alert(${this.toLiteString()})`).stack),(0,b.kG)(me.isNotDisposed(this),"Cannot dispose already disposed",this.id),(0,b.kG)(0===this.references,"Cannot dispose alert in use",this.id),this._disposed=!0,this._deregisterAllAlternatives(),this._deregisterRanges(),this}switchToApplied(e){return(0,b.kG)(me.State.Type.BEING_APPLIED===this.state.type,"Only being applied alert can be transitioned to applied"),this.changeState(me.State.Applied.fromBeingApplied(this.state,e))}onRangeChange(e){(0,b.kG)(me.isNotDisposed(this),"Cannot change range on disposed alert!",(()=>this.toString()));return me.isApplied(this)&&e.some(j.x.hasBehavior(j.x.Meta.Behavior.APPLIED))||(()=>(e.some(j.x.hasBehavior(j.x.Meta.Behavior.HIGHLIGHT))||e.some(j.x.hasBehavior(j.x.Meta.Behavior.HIGHLIGHT_UPDATABLE))&&me.highlightsCollapsed(this))&&!me.isBulkApplied(this))()?w.G({state:me.Transition.State.Dispose}):me.isRegistered(this)&&e.some(j.x.hasBehavior(j.x.Meta.Behavior.CONTEXT))?w.G({state:me.Transition.State.Pending,removedRanges:new Set}):w.YP}_registerRanges(e,t,n){Boolean(this._alertRangeManager)&&this._alertRangeManager.dispose(),this._alertRangeManager=L.register(this._positionManager,this.id,(0,p.zG)(e,w.g_((()=>[]),(e=>[e]))),t,(0,p.zG)(n,w.fS((()=>[]))))}get references(){return this._refNames.length}static castApplied(e){return(0,b.kG)(me.isApplied(e),"can not cast not applied alert",(()=>e.toString())),e}constructor(e,t,n,i,o=Se(e),a=_e(e),c=we(e),l=!0===e.isRead,u=0,d=!0){var h,g,f;(0,r._)(this,"_raw",void 0),(0,r._)(this,"_ops",void 0),(0,r._)(this,"_positionManager",void 0),(0,r._)(this,"_alternativeManager",void 0),(0,r._)(this,"_replaceEither",void 0),(0,r._)(this,"_isRead",void 0),(0,r._)(this,"_version",void 0),(0,r._)(this,"_log",void 0),(0,r._)(this,"_disposed",void 0),(0,r._)(this,"id",void 0),(0,r._)(this,"priority",void 0),(0,r._)(this,"progress",void 0),(0,r._)(this,"extraProperties",void 0),(0,r._)(this,"dismissSurvey",void 0),(0,r._)(this,"acceptSurvey",void 0),(0,r._)(this,"gbPrompt",void 0),(0,r._)(this,"result",void 0),(0,r._)(this,"_state",void 0),(0,r._)(this,"belongsToAllAlerts",void 0),(0,r._)(this,"lensType",void 0),(0,r._)(this,"lensName",void 0),(0,r._)(this,"isFree",void 0),(0,r._)(this,"lensPriority",void 0),(0,r._)(this,"from",void 0),(0,r._)(this,"highlightTexts",void 0),(0,r._)(this,"replaceText",void 0),(0,r._)(this,"bundleInfo",void 0),(0,r._)(this,"prediction",void 0),(0,r._)(this,"allowUpdate",void 0),(0,r._)(this,"_mute",void 0),(0,r._)(this,"muteCategory",void 0),(0,r._)(this,"_isValid",void 0),(0,r._)(this,"_sanityCheck",void 0),(0,r._)(this,"_alertRangeManager",void 0),(0,r._)(this,"_alertAlternativeManager",void 0),(0,r._)(this,"_pendingAlertAlternativeManager",void 0),(0,r._)(this,"view",void 0),(0,r._)(this,"getHighlightRanges",void 0),(0,r._)(this,"getNotEnclosingHighlightRanges",void 0),(0,r._)(this,"getContextRanges",void 0),(0,r._)(this,"getReplaceEither",void 0),(0,r._)(this,"getAppliedRanges",void 0),(0,r._)(this,"_registerAlternatives",void 0),(0,r._)(this,"_refNames",void 0),this._raw=e,this._ops=t,this._positionManager=n,this._alternativeManager=i,this._replaceEither=o,this._isRead=l,this._version=u,this._log=Ie("BaseAlert.impl",v.zW.i.DEBUG),this._disposed=!1,this.id=ne._createId((0,p.zG)(this.rawId,w.fS((()=>"local")))),this.priority=0,this.progress=te(this._raw.extra_properties.progress),this.extraProperties=W.fromCapiExtraProperties(this._raw.extra_properties),this.dismissSurvey=q.parse((null===(h=this._raw.userReasonSurveys)||void 0===h?void 0:h.find((e=>"dismiss"===e.action)))||this._raw.userReasons),this.acceptSurvey=q.parse(null===(g=this._raw.userReasonSurveys)||void 0===g?void 0:g.find((e=>"accept"===e.action))),this.gbPrompt=H.parse(this._raw.gbPrompt),this.result=w.ij(this._raw.result),this._state=me.State.init,this.belongsToAllAlerts=!1,this.lensType=Q.R.Type.fromRawAlert(this._raw),this.lensName=this._raw.cardLayout.group,this.isFree=this._raw.free,this.lensPriority=Boolean(this._raw.cardLayout)&&this._raw.cardLayout.rank||0,this.from=w.YP,this.highlightTexts=this._raw.highlightText,this.replaceText=this._raw.text,this.bundleInfo=(0,p.zG)(w.ij(this._raw.cardLayout.bundle),w.UI((e=>({title:e,rank:Boolean(this._raw.cardLayout.bundleRank)?this._raw.cardLayout.bundleRank:Number.MAX_SAFE_INTEGER})))),this.prediction=w.ij(this._raw.cardLayout.prediction),this.allowUpdate=!0===this._raw.updatable,this._mute=me.MuteStateType.fromMutedByType(this._raw.muted),this.muteCategory=s.Yt(w.Kw)({id:(0,p.zG)(w.ij(this._raw.cardLayout.userMuteCategory),w.UI((e=>e))),description:w.ij(this._raw.cardLayout.userMuteCategoryDescription)}),this._isValid=!1,this._sanityCheck=(f=this._raw,x.wQ.match(f,(()=>e=>{(0,b.kG)(x.wQ.withPosition(e),"raw alert should be withPosition"),void 0!==e.transforms&&(0,b.kG)(e.transforms.length===e.replacements.length,`Every transform should have replacement, bro, tr: ${e.transforms}, rep: ${e.replacements}. AlertId: ${e.id}`)}),(()=>e=>(0,b.kG)(x.wQ.withTransformJson(e),"raw alert should be withTransform")),(()=>e=>{(0,b.kG)(x.wQ.withSubalerts(e),"raw alert should be withSubalerts"),(0,b.kG)((0,p.zG)(e.subalerts.alternatives,C.wo((t=>t.alternatives.length===e.labels.length))),"SuperAlert doesnt have any labels OR transformJson alternatives length is not equal to the number of labels",(()=>e.toString()))}))),this._alertAlternativeManager=w.YP,this._pendingAlertAlternativeManager=w.YP,this.view=Boolean(this._raw.view)?this._raw.view:x.wQ.View.all,this.getHighlightRanges=()=>this._alertRangeManager.highlightRanges,this.getNotEnclosingHighlightRanges=()=>this._alertRangeManager.highlightRanges.filter((0,y.ff)(j.x.isEnclosingView)),this.getContextRanges=()=>this._alertRangeManager.contextRanges,this.getReplaceEither=()=>(0,p.zG)(this._replaceEither,S.Pd((()=>this._alertRangeManager.replaceRange),(()=>(0,p.zG)(this._alertAlternativeManager,w.UI((e=>e.alternatives)))))),this.getAppliedRanges=()=>this._alertRangeManager.appliedRanges,this._registerAlternatives=(e,t)=>{this._deregisterAllAlternatives(),this._alertAlternativeManager=w.G(U.register(this._alternativeManager,this.id,e,t))},this._refNames=[],this._sanityCheck(e),this._registerAll(e.rev,(0,p.zG)(o,S.UI(w.UI((e=>e.alternatives)))),a,c,d)}}(0,r._)(ne,"idCounter",0),(0,r._)(ne,"_disposeAltManager",w.tS((e=>(e.dispose(),w.YP))));class re extends ne{get counters(){return{cost:1,critical:0,advanced:1,priority:0,free:0,freePremium:0,paid:1,unread:0,muted:0,textLength:0}}constructor(...e){super(...e),(0,r._)(this,"title",""),(0,r._)(this,"lensId",Q.R.SpecialId.Premium),(0,r._)(this,"alertType",me.Type.Premium),(0,r._)(this,"group",this._raw.group),(0,r._)(this,"category",this._raw.category),(0,r._)(this,"isFree",this._raw.free),(0,r._)(this,"categoryHuman",this._raw.categoryHuman),(0,r._)(this,"allowDuplicates",!0),(0,r._)(this,"hasNestedHighlights",!1),(0,r._)(this,"_isRead",!0),(0,r._)(this,"labels",[]),(0,r._)(this,"transform",w.YP)}}class ie extends ne{_parsePlagiarismExtraProps(e){var t,n,r;return"PUBLICATION"===e.source?{source:"publication",authors:w.ij(e.authors),citationStyle:{apa:null!==(t=e.reference_apa)&&void 0!==t?t:"",chicago:null!==(n=e.reference_chicago)&&void 0!==n?n:"",mla:null!==(r=e.reference_mla)&&void 0!==r?r:""},paraphrased:"true"===e.paraphrased}:{source:"web",url:w.ij(e.url),paraphrased:"true"===e.paraphrased}}constructor(...e){var t;super(...e),(0,r._)(this,"lensType",Q.R.Type.Plagiarism),(0,r._)(this,"lensId",Q.R.SpecialId.Plagiarism),(0,r._)(this,"alertType",me.Type.Plagiarism),(0,r._)(this,"allowDuplicates",!0),(0,r._)(this,"hasNestedHighlights",!1),(0,r._)(this,"counters",{cost:1,priority:0,critical:0,advanced:0,free:0,freePremium:0,paid:0,unread:0,muted:me.isMuted(this)?1:0,textLength:this._raw.highlightText.map((e=>e.length)).reduce(y.Sm,0)}),(0,r._)(this,"plagiarismType",this._parsePlagiarismExtraProps(this._raw.extra_properties)),(0,r._)(this,"title",null!==(t=this._raw.extra_properties.title)&&void 0!==t?t:""),(0,r._)(this,"labels",[]),(0,r._)(this,"cardId",JSON.stringify({title:this.title,source:this.plagiarismType.source})),(0,r._)(this,"_isRead",!0),(0,r._)(this,"transform",w.YP)}}class oe extends ne{get title(){return this._raw.title}get details(){return(0,p.zG)(w.ij(this._raw.details),w.hX(y.Dw))}get counters(){if(me.isBulkApplied(this))return M.R.empty;const e=this._raw.impact===x.wQ.Impact.Critical?1:0,t=this._raw.impact===x.wQ.Impact.Advanced?1:0,n=this._raw.free?1:0,r="unlocked"===this._raw.extra_properties.free_premium?1:0,i=this._raw.free?0:1;return{cost:1,priority:me.isPriority(this)?1:0,critical:e,advanced:t,free:n,freePremium:r,paid:i,unread:Number(!this.isRead),textLength:0,muted:me.isMuted(this)?1:0}}get transform(){return(0,p.zG)(this.getReplaceEither(),S.g_((()=>(0,p.zG)(this._raw.replacements,E.kP,w.UI((e=>(0,p.zG)(this._raw.transforms,E.kP,w.g_((()=>({kind:"replacement",content:e})),(e=>({kind:"transform",content:e}))),S.t$))))),(0,p.ls)(w.UI(k.UI((e=>e.alternative))),w.UI((e=>S.F2({cardType:this.extraProperties.cardType,drilldown:this.extraProperties.drilldownTree,alternatives:e}))))),w.UI((e=>({id:this.id,revision:(0,p.zG)(this._alertAlternativeManager,w.g_((()=>this._raw.rev),(e=>e.rev))),todo:this._raw.todo,content:e}))))}onRangeChange(e){(0,b.kG)(me.isNotDisposed(this),"Cannot change range on disposed alert!",(()=>this.toString()));const t=e.filter(j.x.hasBehavior(j.x.Meta.Behavior.HIGHLIGHT_UPDATABLE));return t.length>0&&!me.highlightsCollapsed(this)?w.G({state:me.Transition.State.Pending,removedRanges:new Set(t.filter(j.x.isFocusView))}):super.onRangeChange(e)}enqueueRawAlertForUpdate(e){super.enqueueRawAlertForUpdate(e),this.explanation=e.explanation}copy(e=!0){const t=super.copy(e);return t.explanation=this.explanation,t}constructor(...e){super(...e),(0,r._)(this,"lensId",I.MH(Q.R.OutcomeId.toOutcomeId(this._raw.cardLayout.outcome))),(0,r._)(this,"allowDuplicates",!1),(0,r._)(this,"hasNestedHighlights",me.hasNestedHighlights(this)),(0,r._)(this,"isFree",this._raw.free),(0,r._)(this,"explanation",this._raw.explanation),(0,r._)(this,"examples",J.J.parse(this._raw.examples,this._raw.point.includes("Italicization"))),(0,r._)(this,"priority",this.extraProperties.priority),(0,r._)(this,"belongsToAllAlerts",!0),(0,r._)(this,"labels",this._raw.replacements.map((e=>({label:e,replacementTexts:[e],matches:1}))))}}class se extends oe{constructor(...e){super(...e),(0,r._)(this,"alertType",me.Type.Default)}}class ae extends oe{constructor(...e){super(...e),(0,r._)(this,"alertType",me.Type.Synfony)}}class ce extends oe{enqueueRawAlertForUpdate(e){super.enqueueRawAlertForUpdate(e),this.labels=e.labels}updateAlertWithManagedData(e){super.updateAlertWithManagedData(e),this.labels=e.labels}constructor(...e){super(...e),(0,r._)(this,"labels",this._raw.labels),(0,r._)(this,"alertType",me.Type.Super)}}class le extends se{get gapValue(){return this._gapValue}changeGapValue(e){return this.bumpVersion(),this._gapValue=e,this}copy(e=!0){const t=super.copy(e);return t._gapValue=this._gapValue,t}constructor(...e){super(...e),(0,r._)(this,"_gapValue","")}}class ue extends oe{setFeedback(e){return this.bumpVersion(),this._takeawayFeedback=w.G(e),this}get takeawayScore(){return this._takeawayScore}get takeawayIsLikelyToBeRead(){return this._takeawayIsLikelyToBeRead}get takeawayFeedback(){return this._takeawayFeedback}get miniCardTitle(){return this._miniCardTitle}get title(){return this._title}get details(){return this._details}enqueueRawAlertForUpdate(e){super.enqueueRawAlertForUpdate(e),this._miniCardTitle=e.minicardTitle,this._title=e.title,this._details=(0,p.zG)(w.ij(e.details),w.hX(y.Dw)),(0,p.zG)(ue.parseExtraProps(e.extra_properties),S.g_((e=>{throw new Error(`Cannot update Takeaway alert: ${e}`)}),(e=>{this._takeawayScore=e.score,this._takeawayIsLikelyToBeRead=e.isLikelyToBeRead,this._takeawayFeedback=e.feedbackState})))}copy(e=!0){const t=super.copy(e);return t._takeawayScore=this._takeawayScore,t._takeawayIsLikelyToBeRead=this._takeawayIsLikelyToBeRead,t._takeawayFeedback=this._takeawayFeedback,t._miniCardTitle=this._miniCardTitle,t._title=this._title,t._details=this._details,t}static parseExtraProps(e){return(0,p.zG)(S.ij("takeawayScore is missing")(e.takeawayScore),S.UI((t=>({score:parseFloat(t),isLikelyToBeRead:(0,p.zG)(w.ij(e.isLikelyToReadTakeaway),w.g_(p.jv,(e=>"true"===e))),feedbackState:(0,p.zG)(w.ij(e.takeawayFeedback),w.tS((e=>e===z.correctlyDetected?w.G(z.correctlyDetected):e===z.incorrectlyDetected?w.G(z.incorrectlyDetected):(0,b.vE)(e))))}))))}static calculateHashCode(e){return(0,D.AC)(`${e.id}-${w.ZN(d._3).show(e.takeawayFeedback)}-${e.takeawayIsLikelyToBeRead}-${e.title}-${e.miniCardTitle}-${e.explanation}-${e.details}`)}constructor(e,t,n,i){super(e,t,n,i),(0,r._)(this,"_raw",void 0),(0,r._)(this,"_ops",void 0),(0,r._)(this,"_positionManager",void 0),(0,r._)(this,"_alternativeManager",void 0),(0,r._)(this,"alertType",void 0),(0,r._)(this,"_takeawayScore",void 0),(0,r._)(this,"_takeawayIsLikelyToBeRead",void 0),(0,r._)(this,"_takeawayFeedback",void 0),(0,r._)(this,"_miniCardTitle",void 0),(0,r._)(this,"_title",void 0),(0,r._)(this,"_details",void 0),this._raw=e,this._ops=t,this._positionManager=n,this._alternativeManager=i,this.alertType=me.Type.Takeaway,this._takeawayScore=0,this._takeawayIsLikelyToBeRead=!1,this._takeawayFeedback=w.YP,this._miniCardTitle="",this._title="",this._details=w.YP,(0,p.zG)(this.extraProperties.takeaway,C.bw((e=>{this._takeawayScore=e.score,this._takeawayIsLikelyToBeRead=e.isLikelyToBeRead,this._takeawayFeedback=e.feedbackState}))),this._miniCardTitle=e.minicardTitle,this._title=e.title,this._details=(0,p.zG)(w.ij(e.details),w.hX(y.Dw))}}class de extends oe{get todoAction(){return this._todoAction}get sentenceCount(){return this._sentenceCount}get wordCount(){return this._wordCount}get compressionRatio(){return this._compressionRatio}get summaryState(){return this._summaryState}get dismissedTransformGroups(){return this._dismissedTransformGroups}get transformGroups(){return(0,p.zG)(this.transform,w.tS((e=>w.Uo(e.content))),w.UI((e=>(0,p.zG)(e.alternatives,k.YM))),w.UI((e=>T.r3.getTransformGroups(e))),w.fS((()=>new Set)))}changeSummaryState(e){const t=(0,p.zG)(e,(e=>{switch(e){case"requestSent":return K.SummaryState.requestSent;case"notFound":return K.SummaryState.notFound;default:(0,b.vE)(e)}}));return this.bumpVersion(),this._summaryState=t,this}dismissTransformGroup(e){if(!this._dismissedTransformGroups.has(e)){this._dismissedTransformGroups.add(e);const t=this._deleteRangesGroups.findIndex((t=>t===e));if(t>=0){this._deleteRangesGroups.splice(t,1);const e=t+1,n=this.getHighlightRanges();(0,b.kG)(e<n.length,"range to remove is out of bounds"),this.enqueueRangesRemove(new Set([n[e]]))}this.bumpVersion()}return this}_enqueueRawAlertTransformForUpdate(e){const t=Se(e);(0,b.kG)(S.tO(t)&&S.tO(this._replaceEither),"Cannot change replace type on the go"),this._replaceEither=t,this.highlightTexts=e.highlightText,this._deleteRangesGroups=(0,p.zG)(this._replaceEither,S.g_((()=>[]),w.g_((()=>[]),(e=>T.r3.getDeleteOpsGroupsList(e.alternatives[0]))))),(0,p.zG)(this._replaceEither,S.UI((t=>{this._alertRangeManager.enqueueRanges([],_e(e),(0,p.zG)(e,we,w.fS((()=>[])))),(0,p.zG)(this._pendingAlertAlternativeManager,w.UI((e=>e.dispose()))),this._pendingAlertAlternativeManager=(0,p.zG)(t,w.UI((t=>U.register(this._alternativeManager,this.id,e.rev,t.alternatives))))})))}enqueueRawAlertForUpdate(e){(0,b.kG)((0,p.zG)(this.rawId,C.wo((t=>t===e.id))),`Cannot update alert with different id, this: ${(0,p.zG)(this.rawId,w.WG)}, that: ${e.id}`),this._sanityCheck(e),this.patchWithRawAlert(e),(0,p.zG)(this.extraProperties.shortenIt,C.bw((e=>{this._sentenceCount=e.sentenceCount,this._wordCount=e.wordCount,this._compressionRatio=e.compressionRatio})));let t=!1;switch(this._summaryState){case K.SummaryState.notRequested:break;case K.SummaryState.requestSent:x.wQ.withAlternatives(e)?(this._summaryState=K.SummaryState.received,this._dismissedTransformGroups=new Set):t=!0;break;case K.SummaryState.received:x.wQ.withAlternatives(e)||(this._summaryState=K.SummaryState.invalidated,t=!0);break;case K.SummaryState.invalidated:t=!0;break;case K.SummaryState.notFound:break;default:(0,b.vE)(this._summaryState)}t||(this.explanation=e.explanation,this._todoAction=e.todo,this._enqueueRawAlertTransformForUpdate(e))}copy(e=!0){const t=super.copy(e);return t._sentenceCount=this._sentenceCount,t._wordCount=this._wordCount,t._compressionRatio=this._compressionRatio,t._todoAction=this._todoAction,t._summaryState=this._summaryState,t._dismissedTransformGroups=new Set(this._dismissedTransformGroups),t._deleteRangesGroups=this._deleteRangesGroups,t}static parseExtraProps(e){var t,n;return(0,p.zG)(e.shorten_it,S.DT((e=>"true"===e),(0,p.a9)("not a ShortenIt alert")),S.tS((()=>s.Yt(S.wE)({sentenceCount:(0,p.zG)(I.Xn(null!==(t=e.sentence_count)&&void 0!==t?t:""),S.Vn((0,p.a9)(`invalid sentence_count: got ${e.sentence_count}`))),wordCount:(0,p.zG)(I.Xn(null!==(n=e.word_count)&&void 0!==n?n:""),S.Vn((0,p.a9)(`invalid word_count: got ${e.word_count}`))),compressionRatio:void 0===e.shorten_it_compression_ratio?S.F2(R.T.unsafeFromNumber(0)):(0,p.zG)(I.Iz(e.shorten_it_compression_ratio),S.Vn((0,p.a9)(`invalid shorten_it_compression_ratio: got ${e.shorten_it_compression_ratio}`)),S.tS(R.T.fromNumber))}))))}static calculateHashCode(e){return(0,D.NO)({dismissedTransformGroups:Array.from(e.dismissedTransformGroups.values()).sort().join("|"),id:e.id,patternName:e.patternName,sentenceCount:e.sentenceCount,wordCount:e.wordCount,compressionRatio:R.T.unwrap(e.compressionRatio),summaryState:e.summaryState})}constructor(e,t,n,i){super(e,t,n,i),(0,r._)(this,"_raw",void 0),(0,r._)(this,"_ops",void 0),(0,r._)(this,"_positionManager",void 0),(0,r._)(this,"_alternativeManager",void 0),(0,r._)(this,"alertType",void 0),(0,r._)(this,"_todoAction",void 0),(0,r._)(this,"_sentenceCount",void 0),(0,r._)(this,"_wordCount",void 0),(0,r._)(this,"_compressionRatio",void 0),(0,r._)(this,"_summaryState",void 0),(0,r._)(this,"_dismissedTransformGroups",void 0),(0,r._)(this,"_deleteRangesGroups",void 0),this._raw=e,this._ops=t,this._positionManager=n,this._alternativeManager=i,this.alertType=me.Type.ShortenIt,this._todoAction="",this._sentenceCount=0,this._wordCount=0,this._compressionRatio=R.T.unsafeFromNumber(0),this._summaryState=K.SummaryState.notRequested,this._dismissedTransformGroups=new Set,this._deleteRangesGroups=[],(0,p.zG)(this.extraProperties.shortenIt,C.bw((t=>{var n,r;this._sentenceCount=t.sentenceCount,this._wordCount=t.wordCount,this._compressionRatio=t.compressionRatio,this._summaryState=null!==(r=null===(n=t.alertState)||void 0===n?void 0:n.summaryState)&&void 0!==r?r:x.wQ.withAlternatives(e)?K.SummaryState.received:K.SummaryState.notRequested}))),this._todoAction=e.todo,this._deleteRangesGroups=(0,p.zG)(this._replaceEither,S.g_((()=>[]),w.g_((()=>[]),(e=>T.r3.getDeleteOpsGroupsList(e.alternatives[0])))))}}class he extends oe{get toneAlternatives(){return this._toneAlternatives}get selectedToneAlternativeIdx(){return this._selectedToneAlternativeIdx}setSelectedToneAlternativeIdx(e){return this.bumpVersion(),this._selectedToneAlternativeIdx=e,this}copy(e=!0){const t=super.copy(e);return t._toneAlternatives=this._toneAlternatives,t._selectedToneAlternativeIdx=this._selectedToneAlternativeIdx,t}static parseExtraProps(e){const t=Ie("ToneAIAlertImpl.parseExtraProps",v.zW.i.DEBUG);return(0,p.zG)(w.ij(e.tone_slider),w.tS((e=>(0,p.zG)(S.Y3((()=>JSON.parse(e)),(()=>"invalid extra_properties.tone_slider JSON")),S.tS((e=>(0,p.zG)(Y.ToneSlider.decode(e),S.Vn((e=>`cannot decode extra_properties.tone_slider ${JSON.stringify(e)}`))))),S.UI((e=>e.map((e=>({emojiID:e.emoji_id,name:e.name}))))),S.Y$((e=>e.length>1),(e=>`expected extra_properties.tone_slider length to be greater than 1, but found ${e.length}`)),S.Pd((e=>t.error(`Cannot parse extra_properties for ToneAI alert: ${e}`)),(e=>({toneAlternatives:e}))),w.Uo))))}static calculateHashCode(e){return(0,D.NO)({id:e.id,selectedToneAlternativeIdx:e.selectedToneAlternativeIdx})}constructor(e,t,n,i){super(e,t,n,i),(0,r._)(this,"_raw",void 0),(0,r._)(this,"_ops",void 0),(0,r._)(this,"_positionManager",void 0),(0,r._)(this,"_alternativeManager",void 0),(0,r._)(this,"alertType",void 0),(0,r._)(this,"_toneAlternatives",void 0),(0,r._)(this,"_selectedToneAlternativeIdx",void 0),this._raw=e,this._ops=t,this._positionManager=n,this._alternativeManager=i,this.alertType=me.Type.ToneAI;const o=C.MH(this.extraProperties.toneAI);this._toneAlternatives=o.toneAlternatives,this._selectedToneAlternativeIdx=1}}class pe extends oe{get externalLink(){return this._externalLink}get emojiID(){return this._emojiID}get bannerColors(){return this._bannerColors}get isFlaggable(){return this._isFlaggable}get shouldDismissAfterOpeningLink(){return this._shouldDismissAfterOpeningLink}get highlightBackgroundColor(){return this._highlightBackgroundColor}get highlightUnderlineColor(){return this._highlightUnderlineColor}copy(e=!0){const t=super.copy(e);return t._externalLink=this._externalLink,t._emojiID=this._emojiID,t._bannerColors=this._bannerColors,t._isFlaggable=this._isFlaggable,t}static parseExtraProps(e){return(0,p.zG)(e,w.DT((e=>Boolean(e.ethical_ai_external_link))),w.UI((e=>{let t,n;if(void 0!==e.ethical_ai_is_flaggable)try{t=JSON.parse(e.ethical_ai_is_flaggable)}catch(e){t=!0}else t=!0;if(void 0!==e.ethical_ai_should_dismiss_after_opening_link)try{n=JSON.parse(e.ethical_ai_should_dismiss_after_opening_link)}catch(e){n=!1}else n=!1;return{externalLink:e.ethical_ai_external_link,emojiID:e.ethical_ai_emoji_id,bannerColors:void 0!==e.ethical_ai_banner_colors&&""!==e.ethical_ai_banner_colors.trim()?e.ethical_ai_banner_colors.split(","):void 0,isFlaggable:t,shouldDismissAfterOpeningLink:n,highlightBackgroundColor:e.ethical_ai_highlight_background_color,highlightUnderlineColor:e.ethical_ai_highlight_underline_color}})))}constructor(e,t,n,i){super(e,t,n,i),(0,r._)(this,"_raw",void 0),(0,r._)(this,"_ops",void 0),(0,r._)(this,"_positionManager",void 0),(0,r._)(this,"_alternativeManager",void 0),(0,r._)(this,"alertType",void 0),(0,r._)(this,"_externalLink",void 0),(0,r._)(this,"_emojiID",void 0),(0,r._)(this,"_bannerColors",void 0),(0,r._)(this,"_isFlaggable",void 0),(0,r._)(this,"_shouldDismissAfterOpeningLink",void 0),(0,r._)(this,"_highlightBackgroundColor",void 0),(0,r._)(this,"_highlightUnderlineColor",void 0),this._raw=e,this._ops=t,this._positionManager=n,this._alternativeManager=i,this.alertType=me.Type.EthicalAI;const o=C.MH(this.extraProperties.ethicalAI);this._externalLink=o.externalLink,this._emojiID=o.emojiID,this._bannerColors=o.bannerColors,this._isFlaggable=o.isFlaggable,this._shouldDismissAfterOpeningLink=o.shouldDismissAfterOpeningLink,this._highlightBackgroundColor=o.highlightBackgroundColor,this._highlightUnderlineColor=o.highlightUnderlineColor}}class ge extends oe{get snippetText(){return this._snippetText}get libLink(){return this._libLink}get snippetsTrigger(){return this._snippetsTrigger}copy(e=!0){const t=super.copy(e);return t._snippetText=this._snippetText,t._snippetText=this._libLink,t}static calculateHashCode(e){return(0,D.AC)(e)}hashCode(){return 31*super.hashCode()+ge.calculateHashCode(this._snippetText)}constructor(e,t,n,i){super(e,t,n,i),(0,r._)(this,"_raw",void 0),(0,r._)(this,"_ops",void 0),(0,r._)(this,"_positionManager",void 0),(0,r._)(this,"_alternativeManager",void 0),(0,r._)(this,"alertType",void 0),(0,r._)(this,"_snippetText",void 0),(0,r._)(this,"_libLink",void 0),(0,r._)(this,"_snippetsTrigger",void 0),this._raw=e,this._ops=t,this._positionManager=n,this._alternativeManager=i,this.alertType=me.Type.SuggestedSnippet,(0,b.kG)(w.pC(this.extraProperties.suggestedSnippet),"Tried to create SuggestedSnippetAlert without providing a snippet text."),this._snippetText=this.extraProperties.suggestedSnippet.value.snippetText,this._libLink=this.extraProperties.suggestedSnippet.value.libLink,this._snippetsTrigger=this.extraProperties.suggestedSnippet.value.snippetsTrigger}}class fe extends oe{get knowledgeHubTermCreationUrl(){return this._knowledgeHubTermCreationUrl}constructor(e,t,n,i){super(e,t,n,i),(0,r._)(this,"_raw",void 0),(0,r._)(this,"_ops",void 0),(0,r._)(this,"_positionManager",void 0),(0,r._)(this,"_alternativeManager",void 0),(0,r._)(this,"alertType",void 0),(0,r._)(this,"_knowledgeHubTermCreationUrl",void 0),this._raw=e,this._ops=t,this._positionManager=n,this._alternativeManager=i,this.alertType=me.Type.KnowledgeHubSuggestedTerm,(0,b.kG)(w.pC(this.extraProperties.knowledgeHubTermCreationUrl),"Tried to create KnowledgeHubSuggestedTermAlert without providing a term creation url."),this._knowledgeHubTermCreationUrl=this.extraProperties.knowledgeHubTermCreationUrl.value}}var me;!function(e){let t;!function(e){e.Default="default",e.Plagiarism="plagiarism",e.Super="super",e.Premium="premium",e.Takeaway="takeaway",e.Synfony="synfony",e.ShortenIt="shortenIt",e.ToneAI="toneAI",e.EthicalAI="ethicalAI",e.SuggestedSnippet="suggestedSnippet",e.KnowledgeHubSuggestedTerm="knowledgeHubSuggestedTerm"}(t=e.Type||(e.Type={})),e.fromAlertModel=function(e){return e.alert};e.getReplacementText=(e,t)=>()=>I.vM((()=>{const n=e._raw.replacements[t];return(0,b.kG)(void 0!==n,"Unknown alternativeIndex",(()=>`alternativeIndex(${t}) `+e.toString())),n})),e.getApplicableAlternative=(e,t)=>()=>I.vM((()=>{(0,b.kG)((0,p.zG)(e.getReplaceEither(),S.Gg(w.pC)),"Alert doesn't have any deltas to be applied",e.toString());const{alternative:r}=(0,p.zG)(e.getReplaceEither(),I.MH,C.MH)[t];return(0,b.kG)(void 0!==r,"Unknown alternativeIndex",(()=>`alternativeIndex(${t}) `+e.toString())),{alternative:n(e,r),alternativeIndex:t}}));const n=(e,t)=>E(e)?T.r3.fillGaps(t,e.gapValue):v(e)?T.r3.dismissTransformGroups(t,e.dismissedTransformGroups):t;let r,s,c,l,d;function h(e){return me.State.isBulkApplied(e.state)}function g(e){return e.state.type===me.State.Type.REGISTERED}function f(e){return e.state.type===me.State.Type.REMOVED}function _(e){return f(e)&&e.state.reason===me.State.Removed.Reason.duplicated}function v(e){return e.alertType===me.Type.ShortenIt}function E(e){return B.isOneGap(e.extraProperties.cardType)}function A(e){return(0,p.zG)(e.extraProperties.freePremium,C.FX("unlocked"))}function D(e){return(0,p.zG)(e.extraProperties.freePremium,C.FX("locked"))}function N(e){return(0,p.zG)(e.extraProperties.freePremium,C.FX("uphook"))}function U(e){return e.lensId===Q.R.SpecialId.Premium}function M(e){return e.alertType===me.Type.Default||e.alertType===me.Type.Super||e.alertType===me.Type.Takeaway||e.alertType===me.Type.Synfony||e.alertType===me.Type.ShortenIt||e.alertType===me.Type.ToneAI||e.alertType===me.Type.EthicalAI||e.alertType===me.Type.SuggestedSnippet||e.alertType===me.Type.KnowledgeHubSuggestedTerm}!function(e){let t;!function(e){e[e.Pending=0]="Pending",e[e.Dispose=1]="Dispose"}(t=e.State||(e.State={}))}(r=e.Transition||(e.Transition={})),function(e){e.IDLE="idle",e.CHECKING="checking"}(s=e.CheckingState||(e.CheckingState={})),function(e){let t,n,r,a;!function(e){e.REGISTERED="REGISTERED",e.BEING_APPLIED="BEING_APPLIED",e.APPLIED="APPLIED",e.REMOVED="REMOVED"}(t=e.Type||(e.Type={})),e.isIdle=function(e){return e.type===me.State.Type.REGISTERED&&e.checkingState===s.IDLE},function(e){e.create=e=>({type:t.REGISTERED,checkingState:e})}(n=e.Registered||(e.Registered={})),function(e){e.create=(e,n,r,i)=>({type:t.APPLIED,from:i,undoable:e,source:n,method:r}),e.fromBeingApplied=(e,n)=>(0,o._)((0,i._)({},e),{type:t.APPLIED,undoable:n}),e.createBeingApplied=(e,n,r)=>({type:t.BEING_APPLIED,from:r,source:e,method:n});let n;!function(e){e.ByCard="ByCard",e.Bulk="Bulk"}(n=e.Method||(e.Method={}))}(r=e.Applied||(e.Applied={})),function(e){let n;!function(e){e.textChange="textChange",e.capiDone="capiDone",e.capiDismiss="capiDismiss",e.duplicated="duplicated",e.canceled="canceled",e.bulkAcceptUserResponse="bulkAcceptUserResponse"}(n=e.Reason||(e.Reason={}));e.create=e=>({type:t.REMOVED,reason:e})}(a=e.Removed||(e.Removed={}));e.init=n.create(s.IDLE);function c(e){return me.State.Type.REGISTERED===e.type}e.isBulkApplied=function(e){return me.State.Type.APPLIED===e.type&&e.method===me.State.Applied.Method.Bulk},e.isRegistered=c,e.isRemoved=function(e){return me.State.Type.REMOVED===e.type},e.isBeingApplied=function(e){return me.State.Type.BEING_APPLIED===e.type},e.getCheckingState=function(e){return c(e)?e.checkingState:s.IDLE}}(c=e.State||(e.State={})),function(e){e.Muted="Muted",e.Unmuted="Unmuted"}(l=e.MuteStateType||(e.MuteStateType={})),function(e){e.fromMutedByType=e=>e===x.JW.MutedByType.MUTED_BY_USER?me.MuteStateType.Muted:me.MuteStateType.Unmuted}(l=e.MuteStateType||(e.MuteStateType={})),e.hasNestedHighlights=function(e){const t=e.getHighlightRanges();if(t.length<2)return!1;if(t.some(j.x.isEnclosingView))return!0;const{left:n,right:r}=a.uK(j.x.isMainView)(t);return 0!==n.length&&r.some((e=>n.some((t=>P.SV.contains(t,e)))))},e.hasEnclosingHighlight=function(e){return e.getHighlightRanges().some(j.x.isEnclosingView)},e.isApplied=function(e){return e.state.type===me.State.Type.APPLIED},e.isBeingApplied=function(e){return e.state.type===me.State.Type.BEING_APPLIED},e.isBeingAppliedinBulk=function(e){return e.state.type===me.State.Type.BEING_APPLIED&&e.state.method===me.State.Applied.Method.Bulk},e.isInteractable=function(e){return g(e)||h(e)},e.isBulkApplied=h,e.isAccepted=function(e){return me.isApplied(e)&&e.state.undoable.action===x.PZ.ACCEPTED},e.isRegistered=g,e.isNotRegistered=function(e){return e.state.type!==me.State.Type.REGISTERED},e.isRemoved=f,e.isRemovedByTextChange=function(e){return f(e)&&e.state.reason===me.State.Removed.Reason.textChange},e.isNotRemoved=function(e){return e.state.type!==me.State.Type.REMOVED},e.isCapiDone=function(e){return f(e)&&e.state.reason===me.State.Removed.Reason.capiDone},e.isDuplicated=function(e){return _(e)},e.isInDuplicatedState=_,e.isCritical=function(e){return e.lensType===Q.R.Type.Critical||e.lensType===Q.R.Type.Correctness},e.isCriticalImpact=function(e){return e._raw.impact===x.wQ.Impact.Critical},e.isHidden=function(e){return e._raw.hidden},e.getRawId=function(e){return e.rawId},e.isPlagiarism=function(e){return e.lensId===Q.R.SpecialId.Plagiarism},e.isVox=function(e){return M(e)&&w.pC(e.extraProperties.vox)},e.isTakeaway=function(e){return e.alertType===me.Type.Takeaway},e.isShortenIt=v,e.isToneAI=function(e){return e.alertType===me.Type.ToneAI},e.isEthicalAI=function(e){return e.alertType===me.Type.EthicalAI},e.isCitationDetection=function(e){return w.pC(e.extraProperties.citationDetection)},e.isOneGap=E,e.isRated=function(e){return u.gt(R.T.ord)(e.progress,R.T.MIN)},e.isPremium=function(e){return U(e)},e.isFreePremium=A,e.isLocked=D,e.isLockedUIUphook=N,e.isLockedUIAlert=function(e){return D(e)||A(e)||N(e)},e.isPriority=function(e){return e.view===x.wQ.View.priority},e.isInPremiumLens=U,e.isApplicableAlert=M,e.isRegisteredApplicableAlert=function(e){return g(e)&&M(e)},e.isSuperAlert=function(e){return e.alertType===me.Type.Super},e.isSuggestedSnippet=function(e){return e.alertType===me.Type.SuggestedSnippet},e.isKnowledgeHubSuggestedTerm=function(e){return e.alertType===me.Type.KnowledgeHubSuggestedTerm},e.isCacheable=function(e){return me.isRegistered(e)&&(0,y.Kg)(me.isVbar,me.isWithTeaser)(e)&&!me.isPlagiarism(e)&&!me.isRated(e)&&!me.isSuperAlert(e)},e.isVbar=function(e){return e.extraProperties.vbar},e.isWithTeaser=function(e){return e.extraProperties.underlineWithTeaser},e.belongsToAllAlerts=function(e){return e.belongsToAllAlerts},e.belongsToPriorityLens=function(e){return me.belongsToAllAlerts(e)&&me.isPriority(e)},e.belongsToPredictionTakeaways=function(e){return me.belongsToAllAlerts(e)&&(0,p.zG)(w.ij(e.prediction),w.xH,w.Gg((e=>"takeaways"===e)))},e.belongsToPredictionEmogenie=function(e){return me.belongsToAllAlerts(e)&&(0,p.zG)(w.ij(e.prediction),w.xH,w.Gg((e=>"emogenie"===e)))},e.belongsToAnySpecialCategory=function(e){return x.wQ.belongsToAnySpecialCategory(e._raw)},e.belongsToSpecialCategory=function(e){return x.wQ.belongsToSpecialCategory(e._raw)},e.getCheckingState=function(e){return me.State.getCheckingState(e.state)},e.inUse=function(e){return e.references>0},e.isMuted=function(e){return!me.isPlagiarism(e)&&e.mute===me.MuteStateType.Muted},e.isBulkAcceptable=function(e){return me.isRegistered(e)&&e.extraProperties.bulkAcceptable&&e.alertType===me.Type.Default},e.isInline=function(e){return e.inline===x.wQ.Inline.inline},e.hasDrilldownTree=function(e){return M(e)&&w.pC(e.extraProperties.drilldownTree)},e.shouldBeRemoved=function(e){return!me.inUse(e)&&me.isNotRegistered(e)},function(e){e.snapshot=e=>({cardType:e.cardType,alternatives:e.alternatives.map((e=>({type:e.type,lengthAffected:e.lengthAffected,delta:m.s.anonymizeTextAndStringAttrs(e.delta)})))})}(d=e.Alternatives||(e.Alternatives={}));let F=1;function L(e){return Math.trunc(Math.random()*e)}let G=0;e.generate=function(e,t,n,r,s){G+=30;const a=n&&"number"==typeof n.start?n.start:G,c=n&&"number"==typeof n.end?n.end:a+1,l=r?r.start:a,u=r?r.end:c,d=function(e,t){const n=x.wQ.Id.create("alert#"+String(F++)),r=t&&t.cardLayout||x.JG.mock,s=e===Q.R.SpecialId.Plagiarism?{outcome:"Originality"}:Q.R.isMainOutcomeId(e)?{outcome:Q.R.OutcomeId.toRawOutcome(e)}:{},a=!!Q.R.isPremiumId(e)||t&&t.hidden;return(0,i._)((0,o._)((0,i._)({},x.wQ.mock),{id:n,cardLayout:(0,i._)({},r,s),hidden:a}),t)}(e,t),h={begin:l,end:u,highlightBegin:a,highlightEnd:c,transformJson:s?(0,p.zG)(s,w.FS):x.lB.create({highlights:[{s:a,e:c}],alternatives:w.YP})};return Object.assign(d,h),d},e.generateWithSubAlerts=function(e,t){const n=e?x.lB.create({highlights:e.map((e=>({s:e.start,e:e.end}))),alternatives:(0,p.zG)(k.nI(e),w.UI(k.UI((e=>({s:e.start,e:e.end})))),w.UI((e=>T.r3.Group.fromSubalerts(e,[O.e.AbsAlternative.unsafeFromDelta({ops:[{insert:"Alternative 1_1",attributes:{type:O.e.Edit.Type.MAIN}}]}),O.e.AbsAlternative.unsafeFromDelta({ops:[{insert:"Alternative 2_1",attributes:{type:O.e.Edit.Type.MAIN}}]})]))))}):x.wQ.mockWithSubalerts.subalerts,r=e?e.map(((e,t)=>"Highlight_"+t)):x.wQ.mockWithSubalerts.highlightText;return(0,i._)((0,o._)((0,i._)({},x.wQ.mockWithSubalerts),{labels:x.wQ.mockWithSubalerts.labels,highlightText:r,subalerts:n}),t)};let z=1;e.generatePlagiarism=function(e,t,n){const r=n&&n.start||L(G+=1),o=(0,i._)({},x.wQ.mockPlagiarism,t),s=n&&n.end||r+1+L(20),a={id:x.wQ.Id.create("plagiarismAlert#"+String(z++)),begin:r,end:s,highlightBegin:r,highlightEnd:s,highlightText:[e],transformJson:x.lB.create({highlights:[{s:r,e:s}],alternatives:w.YP})};return Object.assign(o,a),o},e.isPlagiarismSourceEqual=function(e,t){return e.title===t.title&&function(e,t){return e.source===t.source&&("web"===e.source&&(0,p.zG)(C.vB(((e,t)=>e===t))(e.url,t.url),w.Gg(p.yR))||"publication"===e.source&&(0,p.zG)(C.vB(((e,t)=>e===t))(e.authors,t.authors),w.Gg(p.yR)))}(e.plagiarismType,t.plagiarismType)},e.create=function(e,t,n,r){let i;return i=x.wQ.isHidden(e)?new re(e,t,n,r):x.wQ.isPlagiarism(e)?new ie(e,t,n,r):x.wQ.isOneGap(e)?new le(e,t,n,r):!x.wQ.withSubalerts(e)||x.wQ.isEthicalAI(e)||x.wQ.isCitationDetection(e)?x.wQ.isTakeaway(e)?new ue(e,t,n,r):x.wQ.hasDrilldownTree(e)?new ae(e,t,n,r):x.wQ.isShortenIt(e)?new de(e,t,n,r):x.wQ.isToneAI(e)?new he(e,t,n,r):x.wQ.isEthicalAI(e)?new pe(e,t,n,r):x.wQ.isSuggestedSnippet(e)?new ge(e,t,n,r):x.wQ.isKnowledgeHubSuggestedTerm(e)?new fe(e,t,n,r):new se(e,t,n,r):new ce(e,t,n,r),i};var V=e.CRITICAL_GROUPS=new Set(["Spelling","Grammar","Punctuation","Fluency","Conventions"]);e.isCriticalGroup=function(e){return V.has(e)},e.highlightsCollapsed=function(e){return e.getHighlightRanges().every(P.SV.isEmpty)},e.isDuplicateCandidate=function(e,t=!1){return(t||e.isValid)&&!e.allowDuplicates&&me.isRegistered(e)},e.isDuplicatedBy=function(e,t){if(!t.hasMatchingHighlightsWith(e,P.SV.ord.equals))return!1;const n=e.toRawAlert(),r=t.toRawAlert();return n.group===r.group&&"Spelling"===n.group||n.category===r.category&&n.point===r.point},e.isNotDisposed=function(e){return!e.disposed}}(me||(me={}));const be=x.wQ.matchBy((e=>P.SV.create(e.begin,e.end,{btype:j.x.Meta.Behavior.REPLACE})),(()=>P.SV.empty),(()=>P.SV.empty));function ye(e,t){return t.highlights.map((t=>P.SV.create(t.s,t.e,{vtype:"focus"===t.type?j.x.Meta.View.FOCUS:"enclosing"===t.type?j.x.Meta.View.ENCLOSING:"main_start"===t.type?j.x.Meta.View.MAIN_START:j.x.Meta.View.MAIN,btype:e})))}function _e(e){const t=!0===e.updatable?j.x.Meta.Behavior.HIGHLIGHT_UPDATABLE:j.x.Meta.Behavior.HIGHLIGHT;return x.wQ.match(e,(e=>[P.SV.create(e.highlightBegin,e.highlightEnd,{vtype:j.x.Meta.View.MAIN,btype:t})]),(e=>ye(t,e.transformJson)),(e=>ye(t,e.subalerts)))}const ve=w.UI((e=>(0,p.zG)(e.context,k.UI((e=>P.SV.create(e.s,e.e,{btype:j.x.Meta.Behavior.CONTEXT}))))));function we(e){return x.wQ.match(e,(()=>w.YP),(e=>ve(e.transformJson.alternatives)),(e=>ve(e.subalerts.alternatives)))}const Se=x.wQ.matchBy((e=>S.t$(be(e))),(e=>S.F2(e.transformJson.alternatives)),(e=>S.F2(e.subalerts.alternatives)));var ke;!function(e){e.create=function(e,t){return(0,b.kG)(e.id===t.id,"can not create UpdatedAlertWithOldAlert from alerts with different ids",(()=>JSON.stringify({olda:N.h.show.show(e),newa:N.h.show.show(t)}))),(0,b.kG)(e.version<t.version,"old alert should have different revision than new alert",(()=>JSON.stringify({olda:N.h.show.show(e),newa:N.h.show.show(t)}))),(0,b.kG)(me.isNotDisposed(t.alert),"new alert can not be disposed",(()=>JSON.stringify({olda:e.alert.toString(),newa:t.alert.toString()}))),[e,t]};e.show=(0,d.p_)(N.h.show,N.h.show)}(ke||(ke={}));const Ie=(0,y.HP)(v.C8.Logging.getLogger)},76786:(e,t,n)=>{n.d(t,{J:()=>r});var r,i=n(59833),o=n(53186),s=n(58303),a=n(90023),c=n(83816);!function(e){let t;!function(e){e[e.red=0]="red",e[e.green=1]="green",e[e.yellow=2]="yellow",e[e.grey=3]="grey"}(t=e.Color||(e.Color={}));const n=/<span.*?<\/span><br\/>/g,r=/^<span.*?class="(.+?)".*?>/,l=/^<span.*?>(.+?): /,u=/^<span.*?>(?:.+?: )?(.+?)<\/span><br\/>/;e.parse=(e,d=!1)=>(0,a.zG)(s.ij(e),s.UI((e=>e.replace(/^<p>/,"").split("<p>").map((e=>{const o=e.match(n);return!o||i.xb(o)?[]:o.map((e=>{var n;const i=function(e){switch(e){case"red":return t.red;case"green":return t.green;case"yellow":return t.yellow;default:return t.grey}}((0,c.gr)(null!==(n=(0,c.BP)(e,r))&&void 0!==n?n:"")),o=s.ij((0,c.BP)(e,l)),a=(0,c.BP)(e,u);return Boolean(a)?{color:i,title:o,text:a,hasItalic:d}:null})).filter(Boolean)})))),s.tS(o.nI));e.colorMatch=function(e){return n=>{switch(e){case t.red:return n.red;case t.green:return n.green;case t.yellow:return n.yellow;default:return n.fallback}}}}(r||(r={}))},6083:(e,t,n)=>{n.d(t,{R:()=>r});var r,i=n(12533),o=n(37159),s=n(96705),a=n(12518),c=n(21147),l=n(14944),u=n(81141),d=n(90023),h=n(9615),p=n(28338),g=n(63068),f=n(66861),m=n(48109),b=n(63786),y=n(17437);!function(e){let t,n,_,v,w,S,k;function I(e){return e===r.SpecialId.PredictionTakeaways}function C(e){return e===r.SpecialId.PredictionEmogenie}function E(e){return r.isOutcomeId(e)||r.isPremiumId(e)||r.isPlagiarismId(e)||r.isAllAlerts(e)||r.isPredictionTakeaways(e)||r.isPredictionEmogenie(e)||r.isRealtimeProofitId(e)||r.isFreePremiumId(e)}function A(e){return e===_.Correctness||e===_.Clarity||e===_.Engagement||e===_.Delivery||e===_.Vox||e===_.KnowledgeHub}function x(e){return r.SpecialId.AllAlerts===e}var T;let O,P;!function(e){e.empty=d.W8}(t=e.Filter||(e.Filter={})),function(e){function t(e){return t=>{const n=t;return new N(n.info,e(n.meta),t.filter)}}e.modifyMeta=t,e.setMeta=function(e){return n=>t((()=>e))(n)}}(n=e.WithAlerts||(e.WithAlerts={})),function(e){e.Plagiarism="Originality",e.DraftAI="Draft AI",e.Cheetah="Cheetah",e.Premium="Hidden",e.Closed="Closed",e.AllAlerts="All alerts",e.PredictionEmogenie="PredictionEmogenie",e.PredictionTakeaways="PredictionTakeaways",e.RealTimeProofit="RealTimeProofit",e.Clarity="ClarityOutcome",e.Correctness="CorrectnessOutcome",e.Engagement="EngagementOutcome",e.Delivery="DeliveryOutcome",e.Vox="Style guide",e.FreePremiumAlerts="FreePremiumAlerts",e.KnowledgeHub="KnowledgeHub"}(_=e.SpecialId||(e.SpecialId={})),e.isRelevantForOggy=function(e){return[r.SpecialId.Premium,r.SpecialId.FreePremiumAlerts,r.SpecialId.Cheetah,r.SpecialId.AllAlerts,r.SpecialId.Plagiarism,r.SpecialId.Closed].includes(e)},e.isClosedId=function(e){return e===_.Closed},e.isPremiumId=function(e){return e===r.SpecialId.Premium},e.isPredictionTakeaways=I,e.isPredictionEmogenie=C,e.isPrediction=function(e){return I(e)||C(e)},e.isWithAlertsId=E,e.isWithSuccessId=function(e){return r.isAllAlerts(e)||r.isPrediction(e)||r.isOutcomeId(e)||r.isRealtimeProofitId(e)||r.isFreePremiumId(e)},function(e){e.toOutcomeId=function(e){switch(e){case"Correctness":return a.F2(r.SpecialId.Correctness);case"Clarity":return a.F2(r.SpecialId.Clarity);case"Engagement":return a.F2(r.SpecialId.Engagement);case"Tone":return a.F2(r.SpecialId.Delivery);case"Style guide":return a.F2(r.SpecialId.Vox);case"Knowledge Hub":return a.F2(r.SpecialId.KnowledgeHub);default:return a.t$("Unknown outcome id")}},e.fromOutcomeId=function(e){switch(e){case r.SpecialId.Correctness:case r.SpecialId.Clarity:case r.SpecialId.Engagement:case r.SpecialId.Delivery:return e.slice(0,-"Outcome".length);default:return e}},e.toRawOutcome=function(e){switch(e){case r.SpecialId.Correctness:case r.SpecialId.Clarity:case r.SpecialId.Engagement:return e.slice(0,-"Outcome".length);case r.SpecialId.Delivery:return"Tone";case r.SpecialId.Vox:return"Style guide";case r.SpecialId.KnowledgeHub:return"Knowledge Hub";default:return(0,p.vE)(e)}}}(v=e.OutcomeId||(e.OutcomeId={})),function(e){e.toCapiId=function(e){return e===r.SpecialId.Plagiarism?a.F2(r.SpecialId.Plagiarism):r.OutcomeId.toOutcomeId(e)}}(w=e.CapiId||(e.CapiId={})),function(e){e.ord=l.r9}(S=e.Id||(e.Id={})),e.isPlagiarismId=function(e){return e===_.Plagiarism},e.isDraftAIId=function(e){return e===_.DraftAI},e.isCheetah=function(e){return e===_.Cheetah},e.isOutcomeId=function(e){return A(e)},e.isMainOutcomeId=A,e.isRealtimeProofitId=function(e){return e===_.RealTimeProofit},e.isAllAlerts=x,e.isFreePremiumId=function(e){return r.SpecialId.FreePremiumAlerts===e},e.isMainLens=function(e){return x(e)},e.isCorrectness=function(e){return e===r.SpecialId.Correctness},e.isClarity=function(e){return e===r.SpecialId.Clarity},e.isDelivery=function(e){return e===r.SpecialId.Delivery},e.isEngagement=function(e){return e===r.SpecialId.Engagement},e.isVox=function(e){return e===r.SpecialId.Vox},e.isKnowledgeHub=function(e){return e===r.SpecialId.KnowledgeHub},function(e){e.Critical="critical",e.Advanced="advanced",e.Plagiarism="plagiarism",e.Correctness="correctness",e.Clarity="clarity",e.Engagement="engagement",e.Delivery="delivery",e.Vox="vox",e.KnowledgeHub="knowledgeHub",e.Other="other"}(k=e.Type||(e.Type={})),(T=k=e.Type||(e.Type={})).fromRawAlert=function(e){switch(e.cardLayout.outcome){case"Correctness":return k.Correctness;case"Clarity":return k.Clarity;case"Engagement":return k.Engagement;case"Tone":return k.Delivery;case"Style guide":return k.Vox;case"Originality":return k.Plagiarism;case"Knowledge Hub":return k.KnowledgeHub;default:return k.Other}},T.fromOutcomeId=function(e){switch(e){case r.SpecialId.Correctness:return r.Type.Correctness;case r.SpecialId.Clarity:return r.Type.Clarity;case r.SpecialId.Engagement:return r.Type.Engagement;case r.SpecialId.Delivery:return r.Type.Delivery;case r.SpecialId.KnowledgeHub:return r.Type.KnowledgeHub;default:return r.Type.Other}},function(e){e.Accuracy="Accuracy",e.Clarity="Clarity",e.Effectiveness="Effectiveness",e.Originality="Originality",e.Hidden="Hidden"}(O=e.Category||(e.Category={})),function(e){e.group=g.kT({count:g.Kh,mutedCount:g.Kh,unreadCount:g.Kh,priorityCount:g.Kh,percentile:m.T.groupSum}),e.eq=(0,c.MW)({count:h.Eq,unreadCount:h.Eq,percentile:m.T.ord}),e.fromAlertCounters=e=>{const t=y.R.toUnmutedOnly(e);return{count:t.cost,priorityCount:e.priority,mutedCount:e.muted,unreadCount:t.unread,percentile:m.T.MIN}},e.fromPercentile=e=>({count:0,mutedCount:0,unreadCount:0,priorityCount:0,percentile:e}),e.ratioToPercentile=e=>t=>(0,s._)((0,o._)({},t),{percentile:e}),e.isEmpty=e=>0===e.count&&0===e.mutedCount}(P=e.Meta||(e.Meta={})),e.outcomeTypeMatch=function(e){return t=>{switch(t){case r.Type.Correctness:return e.correctness;case r.Type.Clarity:return e.clarity;case r.Type.Engagement:return e.engagement;case r.Type.Delivery:return e.delivery;case r.Type.Vox:return e.vox;case r.Type.KnowledgeHub:return e.knowledgeHub;case r.Type.Advanced:return e.premium;case r.Type.Critical:case r.Type.Plagiarism:case r.Type.Other:throw new p.ej(`Don't use this function for ${t} type`);default:return(0,p.vE)(t)}}},e.outcomeFullTypeMatch=function(e){return t=>{switch(e){case r.Type.Correctness:return t.correctness;case r.Type.Clarity:return t.clarity;case r.Type.Engagement:return t.engagement;case r.Type.Delivery:return t.delivery;case r.Type.Plagiarism:return t.plagiarism;case r.Type.Vox:return t.vox;case r.Type.KnowledgeHub:return t.knowledgeHub;case r.Type.Advanced:return t.premium;case r.Type.Critical:case r.Type.Other:throw new p.ej(`Don't use this function for ${e} type`);default:return(0,p.vE)(e)}}};const R={vox:0,critical:10,correctness:10,advanced:20,clarity:20,engagement:30,delivery:40,plagiarism:50,knowledgeHub:60,other:70};e.getSortOrder=e=>R[e],e.ord=l.Zt(((e,t)=>(0,u.Xx)(R[e.type]-R[t.type]||t.priority-e.priority)));class D{get title(){return this.info.title}get type(){return this.info.type}get category(){return this.info.category}get description(){return this.info.description}get priority(){return this.info.priority}get count(){return this.meta.count}get mutedCount(){return this.meta.mutedCount}get unreadCount(){return this.meta.unreadCount}get priorityCount(){return this.meta.priorityCount}get percentile(){return this.meta.percentile}get id(){return this.info.id}get exclusiveHighlights(){return this.info.exclusiveHighlights}appendMeta(e){return new D(this.info,P.group.concat(this.meta,e),this.filter)}updateMeta(e){return new D(this.info,e(this.meta),this.filter)}equals(e){return this.id===e.id&&this.count===e.count&&this.unreadCount===e.unreadCount&&this.percentile===e.percentile&&this.priority===e.priority}hashCode(){let e=7;return e=31*e+(0,b.AC)(this.id),e=31*e+this.count,e=31*e+this.unreadCount,e=31*e+m.T.prism.reverseGet(this.percentile),e=31*e+this.priority,e}toString(){return JSON.stringify(this,void 0,2)}toJSON(){return{id:this.id,type:this.type,count:this.count,percentile:this.percentile,unreadCount:this.unreadCount,priority:this.priority}}constructor(e,t,n){(0,i._)(this,"info",void 0),(0,i._)(this,"meta",void 0),(0,i._)(this,"filter",void 0),this.info=e,this.meta=t,this.filter=n}}e.StaticLensImpl=D;class N extends D{get id(){return this.info.id}appendMeta(e){return new N(this.info,P.group.concat(this.meta,e),this.filter)}updateMeta(e){return new N(this.info,e(this.meta),this.filter)}constructor(e,t,n){super(e,t,n),(0,p.kG)(E(e.id),"can not create WithAlerts lens for static lens id",e.id)}}let U;e.LensImpl=N,function(e){var t=e.base={id:r.SpecialId.Correctness,type:r.Type.Other,category:r.Category.Hidden,title:"Base Lens",description:"",priority:0,exclusiveHighlights:!1};function n(e){return(0,f.Vx)(t,e)}e.create=n,e.createOutcome=function(e){return n({id:e,title:r.OutcomeId.fromOutcomeId(e),type:r.Type.fromOutcomeId(e),exclusiveHighlights:!0})};e.plagiarism=n({id:r.SpecialId.Plagiarism,type:r.Type.Plagiarism,category:r.Category.Originality,title:"Plagiarism",exclusiveHighlights:!0}),e.draftAI=n({id:r.SpecialId.DraftAI,type:r.Type.Critical,title:"Draft AI"}),e.cheetah=n({id:r.SpecialId.Cheetah,type:r.Type.Critical,title:"Grammarly Ideate"}),e.premium=n({id:r.SpecialId.Premium,type:r.Type.Advanced,title:"Premium"}),e.freePremium=n({id:r.SpecialId.FreePremiumAlerts,title:"Premium"}),e.allAlerts=n({id:r.SpecialId.AllAlerts,type:r.Type.Critical,title:"All suggestions"}),e.predictionTakeaways=n({id:r.SpecialId.PredictionTakeaways,type:r.Type.Critical,title:"Reader's attention"}),e.predictionEmogenie=n({id:r.SpecialId.PredictionEmogenie,type:r.Type.Critical,title:"How it sounds"}),e.realTimeProofit=n({id:r.SpecialId.RealTimeProofit,type:r.Type.Critical,title:"Proofreading"})}(U=e.Info||(e.Info={})),e.createStaticLens=function(e,t,n){const r=(0,f.Vx)(U.base,e);return new D(r,t,n)}}(r||(r={}))},48148:(e,t,n)=>{n.d(t,{I:()=>r});var r,i=n(15488),o=n(66861),s=n(2373);!function(e){var t=e.isKnown=e=>"id"in e;e.splitById=e=>{if(t(e)){const{id:t}=e;return{id:t,local:(0,i._)(e,["id"])}}return{local:e}},e.toLocal=e=>{if(t(e)){const{id:t}=e;return(0,i._)(e,["id"])}return e};let n;!function(e){e.identity=e=>e,e.forcePositionOverTransformJson=e=>(e=>void 0!==e.extra_properties&&void 0!==e.extra_properties.progress)(e)?e:s.wQ.withTransformJson(e)&&s.wQ.hasPosition(e)&&!s.wQ.withSubalerts(e)?(0,o.Vx)(e,{transformJson:void 0}):e}(n=e.Transform||(e.Transform={})),e.isHighlightValid=function(e,t){return s.wQ.match(e,(e=>t.substring(e.highlightBegin,e.highlightEnd)===e.highlightText[0]),(e=>!!s.wQ.hasPosition(e)&&t.substring(e.highlightBegin,e.highlightEnd)===e.highlightText[0]),(()=>!1))}}(r||(r={}))},18990:(e,t,n)=>{n.d(t,{h:()=>r});var r,i=n(37159),o=n(14944),s=n(14911),a=n(18397),c=n(52071);!function(e){let t;!function(e){e.ord=o.r9,e.show=a._3}(t=e.Id||(e.Id={}));var n=e.ordId=o.Uz((e=>e.id))(o.r9),r=e.ordHRange=o.Uz((e=>e.alert.getHighlightRanges()[0]))(c.SV.ord),l=e.ordVersion=o.Uz((e=>e.version))(o.Mh),u=e.ord=(0,s.g_)(o.jG())(r,[n,l]),d=e.show={show:e=>`Alert #(${e.id}, version:${e.version}, state:${e.state.type}, mute:${e.mute})`};e.ordShow=(0,i._)({},u,d);e.create=function(e){return{alert:e,id:e.id,state:e.state,counters:e.counters,version:e.version,mute:e.mute,extraProperties:e.extraProperties}};e.isRegistered=e=>"REGISTERED"===e.state.type}(r||(r={}))},63786:(e,t,n)=>{n.d(t,{AC:()=>h,NO:()=>p});var r=n(56),i=n(84714),o=n(18827),s=n(64271),a=n(59179),c=n(14969),l=n(73823),u=n(12518);d=(0,r._)((function*(e,t=i.of(new Error("Timeout error")).pipe(o.g(1e4))){return l.MH(yield s.T(e.pipe(a.U(u.F2)),t.pipe(a.U(u.t$))).pipe(c.P()).toPromise().then((e=>null==e?u.t$(new Error("Timeout error")):e)))}));var d;function h(e){let t=0;if(null==e||0===e.length)return t;for(let n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t}const p=e=>h(Object.keys(e).sort().map((t=>t+":"+JSON.stringify(e[t]))).join(""))},11042:(e,t,n)=>{n.d(t,{$:()=>r});var r,i=n(37159),o=n(96705),s=n(12518),a=n(21147),c=n(90023),l=n(28338),u=n(39104),d=n(2084),h=n(58303),p=n(66861),g=n(6083),f=n(55812);!function(e){let t;function n(e){return e.type===t.default}function m(e){return e.type===t.super}function b(e){return e.type===t.takeaway}function y(e){return e.type===t.shortenIt}function _(e){return e.type===t.toneAI}function v(e){return e.type===t.ethicalAI}function w(e){return e.type===t.writingExpertVbar}function S(e){return e.type===t.writingExpertWithTeaser}function k(e){return e.type===t.writingExpertWithTeaser||e.type===t.writingExpertVbar}function I(e){return(0,c.zG)(e.freePremium,d.FX("unlocked"))}function C(e){return(0,c.zG)(e.freePremium,d.FX("locked"))}function E(e){return(0,c.zG)(e.freePremium,d.FX("uphook"))}!function(e){e.default="default",e.super="super",e.plagiarism="plagiarism",e.premium="premium",e.takeaway="takeaway",e.synfony="synfony",e.shortenIt="shortenIt",e.toneAI="toneAI",e.ethicalAI="ethicalAI",e.suggestedSnippet="suggestedSnippet",e.knowledgeHubSuggestedTerm="knowledgeHubSuggestedTerm",e.writingExpertVbar="writingExpertVbar",e.writingExpertWithTeaser="writingExpertWithTeaser"}(t=e.Type||(e.Type={})),e.isApplicableAlert=function(e){return(0,u.Kg)(n,m,b,y,_,v,w,k,I)(e)},e.isDefault=n,e.isSuper=m,e.isPlagiarism=function(e){return e.type===t.plagiarism},e.isPremium=function(e){return e.type===t.premium},e.isPremiumPreviewPlagiarism=function(e){return(e.type===t.premium&&e.lensName)===g.R.SpecialId.Plagiarism},e.isFree=function(e){return e.isFree},e.isPriority=function(e){return"priority"===e.view},e.isTakeaway=b,e.isShortenIt=y,e.isToneAI=_,e.isEthicalAI=v,e.isSuggestedSnippet=function(e){return e.type===t.suggestedSnippet},e.isKnowledgeHubSuggestedTerm=function(e){return"KnowledgeHub/SuggestedTerm/SuggestedTerm"===e.patternName},e.isVBar=w,e.isWritingExpertWithTeaser=S,e.isWritingExpert=k,e.isWritingExpertDebug=function(e){return"WritingExpert/Rewrite/TextEvaluation"===e.patternName&&!w(e)&&!S(e)},e.isHoverableInline=function(e){return!w(e)},e.isFullSentence=function(e){return n(e)&&f.eT.isFullSentence(e.extraProperties.cardType)},e.isSynfony=function(e){return n(e)&&f.eT.isSynfony(e.extraProperties.cardType)},e.isOneGap=function(e){return n(e)&&f.eT.isOneGap(e.extraProperties.cardType)},e.isInQuotes=function(e){return n(e)&&e.extraProperties.isInQuotes},e.isBulkApplied=function(e){return f.bZ.State.isBulkApplied(e.state)},e.isBeingApplied=function(e){return f.bZ.State.isBeingApplied(e.state)},e.isFreePremium=I,e.isLocked=C,e.isLockedUIUphook=E,e.isLockedUIAlert=function(e){return C(e)||I(e)||E(e)};var A=e.eq=a.f7(((e,t)=>e.type===t.type&&f.h$.ordId.equals(e,t)));e.snapshot=e=>({id:e.id,type:e.type,state:e.state,title:e.title,view:e.view,lensId:e.lensId,allowUpdate:e.allowUpdate,belongsToAllAlerts:e.belongsToAllAlerts,alternatives:(0,c.zG)(e,h.DT(r.isApplicableAlert),h.tS((e=>e.getTransform())),h.tS((0,c.ls)((0,p.ei)("content"),s.UI(f.bZ.Alternatives.snapshot),h.Uo)),h.WG)});function x(e){return f.bZ.isVbar(e)?t.writingExpertVbar:f.bZ.isWithTeaser(e)?t.writingExpertWithTeaser:t.default}e.fromModel=function(e){const n={id:e.id,state:e.state,title:e.title,progress:e.progress,lensId:e.lensId,lensType:e.lensType,lensName:e.toLensAlert().lensName,alertType:e.alertType,lensPriority:e.lensPriority,getHighlightRanges:e.getHighlightRanges,hasNestedHighlights:e.hasNestedHighlights,highlightTexts:e.highlightTexts,allowUpdate:e.allowUpdate,miniCardTitle:e.miniCardTitle,todoAction:e.todoAction,patternName:e.patternName,patternNameQualifier:e.patternNameQualifier,belongsToAllAlerts:e.belongsToAllAlerts,hashCode:()=>e.hashCode(),equals:function(e){return A.equals(this,e)},toJSON:function(){return r.snapshot(this)},toString:function(){return JSON.stringify(this)},isFree:e.isFree,view:e.view,bundleInfo:e.bundleInfo,prediction:e.prediction,dismissSurvey:e.dismissSurvey,acceptSurvey:e.acceptSurvey,gbPrompt:e.gbPrompt,freePremium:e.extraProperties.freePremium,result:e.result};if(f.bZ.isTakeaway(e)){const r=(0,o._)((0,i._)({},n),{type:t.takeaway,examples:e.examples,explanation:e.explanation,details:e.details,extraProperties:e.extraProperties,getTransform:()=>e.transform,takeawayScore:e.takeawayScore,takeawayIsLikelyToBeRead:e.takeawayIsLikelyToBeRead,takeawayFeedback:e.takeawayFeedback});return(0,c.MZ)(r)}if(f.bZ.isSuperAlert(e))return(0,c.MZ)((0,o._)((0,i._)({},n),{type:t.super,examples:e.examples,explanation:e.explanation,details:e.details,extraProperties:e.extraProperties,getTransform:()=>e.transform,labels:e.labels}));if(f.bZ.isShortenIt(e)){const r=(0,o._)((0,i._)({},n),{type:t.shortenIt,examples:e.examples,explanation:e.explanation,details:e.details,extraProperties:e.extraProperties,getTransform:()=>e.transform,sentenceCount:e.sentenceCount,wordCount:e.wordCount,compressionRatio:e.compressionRatio,summaryState:e.summaryState,dismissedTransformGroups:new Set(e.dismissedTransformGroups),transformGroups:new Set(e.transformGroups)});return(0,c.MZ)(r)}if(f.bZ.isToneAI(e))return(0,c.MZ)((0,o._)((0,i._)({},n),{type:t.toneAI,examples:e.examples,explanation:e.explanation,details:e.details,extraProperties:e.extraProperties,getTransform:()=>e.transform,toneAlternatives:e.toneAlternatives,selectedToneAlternativeIdx:e.selectedToneAlternativeIdx}));if(f.bZ.isEthicalAI(e))return(0,c.MZ)((0,o._)((0,i._)({},n),{type:t.ethicalAI,examples:e.examples,explanation:e.explanation,details:e.details,extraProperties:e.extraProperties,getTransform:()=>e.transform,externalLink:e.externalLink,emojiID:e.emojiID,bannerColors:e.bannerColors,isFlaggable:e.isFlaggable,shouldDismissAfterOpeningLink:e.shouldDismissAfterOpeningLink,highlightBackgroundColor:e.highlightBackgroundColor,highlightUnderlineColor:e.highlightUnderlineColor}));if(f.bZ.isSuggestedSnippet(e))return(0,c.MZ)((0,o._)((0,i._)({},n),{type:t.suggestedSnippet,examples:e.examples,explanation:e.explanation,details:e.details,extraProperties:e.extraProperties,getTransform:()=>e.transform,snippetText:e.snippetText,libLink:e.libLink,snippetsTrigger:e.snippetsTrigger}));if(f.bZ.isKnowledgeHubSuggestedTerm(e))return(0,c.MZ)((0,o._)((0,i._)({},n),{type:t.knowledgeHubSuggestedTerm,examples:e.examples,explanation:e.explanation,details:e.details,extraProperties:e.extraProperties,getTransform:()=>e.transform,knowledgeHubTermCreationUrl:e.knowledgeHubTermCreationUrl}));if(f.bZ.isPlagiarism(e))return(0,c.MZ)((0,o._)((0,i._)({},n),{type:t.plagiarism,cardId:e.cardId,plagiarismType:e.plagiarismType}));if(f.bZ.isApplicableAlert(e))return(0,c.MZ)((0,o._)((0,i._)({},n),{type:x(e),examples:e.examples,explanation:e.explanation,details:e.details,extraProperties:e.extraProperties,getTransform:()=>e.transform}));if(f.bZ.isPremium(e))return(0,c.MZ)((0,o._)((0,i._)({},n),{categoryHuman:e.categoryHuman,type:t.premium}));throw new l.ej(`Not supported type of alert, must be either Alert, SuperAlert or PlagiarismAlert, was: ${e.constructor.name}(${e.lensType})`)}}(r||(r={}))},27947:(e,t,n)=>{n.d(t,{eI:()=>a,lY:()=>i});var r,i,o,s,a,c,l,u=n(28338),d=n(39104),h=n(11042);!function(e){let t;!function(e){e.collapseButtonClick="collapseButtonClick"}(t=e.Type||(e.Type={}))}(r||(r={})),function(e){let t,n;function o(e){return e.type===i.Type.takeawayCorrectlyDetected||e.type===i.Type.takeawayIncorrectlyDetected}function s(e){return e.type===i.Type.bulkApply}function a(e){return e.type===i.Type.bulkDismiss}function c(e){return e.type===i.Type.bulkIgnore}function l(e){return e.type===i.Type.bulkHighlight}function u(e){return e.type===i.Type.bulkUndo}function p(e){return e.type===i.Type.bulkIndividualUndo}function g(e){return e.type===i.Type.bulkLooksGood}!function(e){e.switchToNext="switchToNext",e.switchToClosestByViewport="switchToClosestByViewport",e.alertMinicardButtonClick="alertMinicardButtonClick",e.cardMatchesNavigationButtonClick="cardMatchesNavigationButtonClick",e.openSetGoals="setGoals",e.alertCardShow="alertCardShow",e.moreAlertsButtonShow="moreAlertsButtonShow",e.alternativeReplacementRadioButtonClick="alternativeReplacementRadioButtonClick",e.alertApply="alertApply",e.alertFeedback="alertFeedback",e.hover="hover",e.onboardingClose="onboardingClose",e.muteAlertCategory="muteAlertCategory",e.undoMuteAlertCategory="undoMuteAlertCategory",e.premiumTrialFooterCtaClick="premiumTrialFooterCtaClick",e.toSignIn="toSignIn",e.moreActionsButtonToggle="moreActionsButtonToggle",e.openPreferences="preferences",e.dismissMuteQuotedAdvice="dismissMuteQuotedAdvice",e.fullSentenceHighlightChangesToggle="fullSentenceHighlightChangesToggle",e.muteQuotedAdviceShow="muteQuotedAdviceShow",e.alertIgnore="alertIgnore",e.alertResolve="alertResolve",e.alertIgnoreFormSubmit="alertIgnoreFormSubmit",e.alertApplyFormSubmit="alertApplyFormSubmit",e.alertIgnoreFeedbackFormShow="alertIgnoreFeedbackFormShow",e.gbPromptApply="gbPromptApply",e.gbPromptCreateRule="gbPromptCreateRule",e.gbPromptDismiss="gbPromptDismiss",e.gbPromptShow="gbPromptShow",e.takeawayCorrectlyDetected="takeawayCorrectlyDetected",e.takeawayIncorrectlyDetected="takeawayIncorrectlyDetected",e.takeawayDismiss="takeawayDismiss",e.takeawayResolve="takeawayResolve",e.changeUserInput="changeUserInput",e.focusUserInput="focusUserInput",e.miniItemClick="miniItemClick",e.bulkApply="bulkApply",e.bulkDismiss="bulkDismiss",e.bulkIgnore="bulkIgnore",e.bulkHighlight="bulkHighlight",e.bulkIndividualUndo="bulkIndividualUndo",e.bulkUndo="bulkUndo",e.bulkAcceptItemShow="bulkAcceptItemShow",e.bulkLooksGood="bulkLooksGood",e.mutedAlertSuccessShow="mutedAlertSuccessShow",e.mutedAlertSuccessDismissed="mutedAlertSuccessDismissed",e.mutedAlertSuggestionManagementClick="mutedAlertSuggestionManagementClick",e.toneAIChangeToneAlternative="toneAIChangeToneAlternative",e.shortenItReviewEdit="shortenItReviewEdit",e.shortenItDismissEdit="shortenItDismissEdit",e.shortenItKeepEdit="shortenItKeepEdit",e.sduiCardAction="sduiCardAction",e.openIdeasGallery="openIdeasGallery",e.ethicalAIOpenExternalLink="ethicalAIOpenExternalLink",e.createSnippet="createSnippet",e.snippetsOpenExternalLink="manageSnippetsOpenExternalLink",e.suggestedSnippetSuccessDismissed="suggestedSnippetSuccessDismissed",e.listItemClick="listItemClick"}(t=e.Type||(e.Type={})),function(e){e.defaultCard="defaultCard",e.superCard="superCard"}(n=e.CardType||(e.CardType={})),e.getCardType=function(e){switch(e.activeAlert.type){case h.$.Type.super:return n.superCard;case h.$.Type.default:default:return n.defaultCard}},e.isAlertApplyAction=function(e){return e.type===i.Type.alertApply},e.isAlertFeedbackAction=function(e){return e.type===i.Type.alertFeedback},e.isTakeawayCorrectlyDetectedAction=function(e){return e.type===i.Type.takeawayCorrectlyDetected},e.isTakeawayIncorrectlyDetectedAction=function(e){return e.type===i.Type.takeawayIncorrectlyDetected},e.isTakeawayDismissAction=function(e){return e.type===i.Type.takeawayDismiss},e.isTakeawayResolveAction=function(e){return e.type===i.Type.takeawayResolve},e.isTakeawayDetectionFeedbackAction=o,e.isTakeawayAction=function(e){return o(e)||e.type===i.Type.takeawayDismiss||e.type===i.Type.takeawayResolve},e.isToneAIChangeToneAlternativeAction=function(e){return e.type===i.Type.toneAIChangeToneAlternative},e.isEthicalAIOpenExternalLinkAction=function(e){return e.type===i.Type.ethicalAIOpenExternalLink},e.isSnippetsOpenExternalLink=function(e){return e.type===i.Type.snippetsOpenExternalLink},e.isAlertIgnoreAction=function(e){return e.type===i.Type.alertIgnore},e.isAlertResolveAction=function(e){return e.type===i.Type.alertResolve},e.isAlertIgnoreFeedbackFormSubmit=function(e){return e.type===i.Type.alertIgnoreFormSubmit},e.isAlertApplyFeedbackFormSubmit=function(e){return e.type===i.Type.alertApplyFormSubmit},e.isGbPromptApply=function(e){return e.type===i.Type.gbPromptApply},e.isGbPromptCreateRule=function(e){return e.type===i.Type.gbPromptCreateRule},e.isGbPromptDismiss=function(e){return e.type===i.Type.gbPromptDismiss},e.isGbPromptShow=function(e){return e.type===i.Type.gbPromptShow},e.isMuteCategoryAction=function(e){return e.type===i.Type.muteAlertCategory},e.isUndoMuteCategoryAction=function(e){return e.type===i.Type.undoMuteAlertCategory},e.isMutedAlertCardDismissedAction=function(e){return e.type===i.Type.mutedAlertSuccessDismissed},e.isCreateSnippetAction=function(e){return e.type===i.Type.createSnippet},e.isSuggestedSnippetSuccessDismissed=function(e){return e.type===i.Type.suggestedSnippetSuccessDismissed},e.isHoverAction=function(e){return e.type===i.Type.hover},e.isAlertCardShow=function(e){return e.type===i.Type.alertCardShow},e.isBulkAcceptItemShow=function(e){return e.type===i.Type.bulkAcceptItemShow},e.isSwitchToClosestByViewport=function(e){return e.type===i.Type.switchToClosestByViewport},e.isAlertMinicardButtonClick=function(e){return e.type===i.Type.alertMinicardButtonClick},e.isMiniItemClick=function(e){return e.type===i.Type.miniItemClick},e.isChecklistItemCollapseButtonClick=function(e){return e.type===r.Type.collapseButtonClick},e.isOnboardingClose=function(e){return e.type===i.Type.onboardingClose},e.isNavigation=function(e){return e.type===i.Type.openSetGoals||e.type===i.Type.openPreferences},e.isDismissMuteQuotedAdvice=function(e){return e.type===i.Type.dismissMuteQuotedAdvice},e.isMuteQuotedAdviceShow=function(e){return e.type===i.Type.muteQuotedAdviceShow},e.isChangeUserInput=function(e){return e.type===i.Type.changeUserInput},e.isFocusUserInput=function(e){return e.type===i.Type.focusUserInput},e.isBulkApply=s,e.isBulkDismiss=a,e.isBulkIgnore=c,e.isBulkHighlight=l,e.isBulkUndo=u,e.isBulkIndividualUndo=p,e.isBulkLooksGood=g;e.isBulkAction=(0,d.Kg)(s,a,c,l,p,g,u);let f;e.isMutedAlertSuggestionsManagementClick=function(e){return e.type===i.Type.mutedAlertSuggestionManagementClick},e.isSDUICardAction=function(e){return e.type===i.Type.sduiCardAction},function(e){e.hasAction=function(e,t){return e.actions.some((e=>e.type===t))}}(f=e.ProxySduiCardAction||(e.ProxySduiCardAction={})),e.isOpenIdeasGallery=function(e){return e.type===i.Type.openIdeasGallery},e.isListItemClick=function(e){return e.type===i.Type.listItemClick};e.hasClickPoint=(0,d.Kg)(i.isBulkHighlight,i.isAlertMinicardButtonClick,i.isListItemClick)}(i||(i={})),function(e){let t;!function(e){e.drilldown="synfonyDrilldownSelect",e.back="synfonyDrilldownBack"}(t=e.Kind||(e.Kind={})),e.isDrilldown=function(e){return e.type===t.drilldown},e.isBack=function(e){return e.type===t.back}}(o||(o={})),function(e){e.isReviewEdit=function(e){return e.type===i.Type.shortenItReviewEdit},e.isDismissEdit=function(e){return e.type===i.Type.shortenItDismissEdit},e.isKeepEdit=function(e){return e.type===i.Type.shortenItKeepEdit}}(s||(s={})),function(e){let t;function n(e){return e.type===t.startTransitionTo}!function(e){e.startTransitionTo="startTransitionTo",e.completeTransitionTo="completeTransitionTo"}(t=e.Kind||(e.Kind={})),e.isStartTransitionTo=n,e.isCardExpand=function(e){return n(e)&&"expanded"===e.transition.type},e.isCompleteTransitionTo=function(e){return e.type===t.completeTransitionTo}}(a||(a={})),function(e){let t;!function(e){e.dismissBatch="dismissBatch"}(t=e.Kind||(e.Kind={})),e.isDismissAlertsBatchAction=function(e){return e.type===t.dismissBatch}}(c||(c={})),function(e){let t;!function(e){e.setAcademicDomainAndCitationStyle="setAcademicDomainAndCitationStyle"}(t=e.Kind||(e.Kind={})),e.isSetAcademicDomainAndCitationStyleAction=function(e){return e.type===t.setAcademicDomainAndCitationStyle}}(l||(l={})),(0,u.L0)(void 0)},3313:(e,t,n)=>{n.d(t,{Z:()=>r});var r,i=n(21147),o=n(64332),s=n(90023),a=n(9615),c=n(66861);!function(e){e.eq=i.MW({absTop:a.Eq,height:a.Eq,animationInProgress:o.Eq,visible:o.Eq,isHeightValid:o.Eq,watched:o.Eq,inert:o.Eq}),e.verticalEq=i.MW({absTop:a.Eq,height:a.Eq}),e.empty={absTop:0,height:0,animationInProgress:!1,visible:!1,isHeightValid:!1,watched:!1,inert:!1},e.create=s.yR;e.dimensionEquals=function(e,t){return e.absTop===t.absTop&&e.height===t.height},e.changeTop=function(e,t){return(0,c.Vx)(e,{absTop:t})},e.changeHeight=function(e,t){return(0,c.Vx)(e,{height:t,isHeightValid:!0})},e.changeAnimationInProgress=function(e,t){return(0,c.Vx)(e,{animationInProgress:t})},e.changeVisible=function(e,t){return(0,c.Vx)(e,{visible:t})},e.invalidateHeight=function(e){return(0,c.Vx)(e,{isHeightValid:!1})},e.changeWatched=function(e,t){return(0,c.Vx)(e,{watched:t})},e.changeInert=function(e,t){return(0,c.Vx)(e,{inert:t})}}(r||(r={}))},67064:(e,t,n)=>{n.d(t,{t:()=>i});var r,i,o=n(64332),s=n(21147),a=n(58303),c=n(9141),l=n(28338),u=n(66861);!function(e){e.eq=s.MW({type:c.Eq,clockwise:o.Eq});let t;t=e.nominal||(e.nominal={})}(r||(r={})),function(e){e.initial=(e,t=!0)=>({from:a.YP,transitionId:0,transition:e,incomplete:t}),e.eq=s.MW({from:a.Eh(s.w4),transitionId:s.w4,transition:r.eq,incomplete:s.w4}),e.to=(e,t)=>({from:a.G(e.transition.type),transitionId:e.transitionId+1,transition:t,incomplete:!0}),e.complete=(e,t)=>((0,l.kG)(t===e.transitionId,"unexpected transitionId"),(0,u.Vx)(e,{incomplete:!1}))}(i||(i={}))},12505:(e,t,n)=>{n.d(t,{i:()=>r});var r,i,o=n(37159),s=n(96705),a=n(12518),c=n(21147),l=n(58303),u=n(86399),d=n(18397),h=n(28338),p=n(39104),g=n(55812),f=n(63786),m=n(11042),b=n(3313),y=n(67064);!function(e){let t;e.isWithAlertsItem=function(e){return"alerts"in e&&"activeAlertIndex"in e&&"removedAlertsIds"in e},function(e){e.show=l.ZN(d._3)}(t=e.UserInput||(e.UserInput={}));e.hashCode=e=>(0,f.NO)({id:e.id,activeAlertId:e.activeAlert.id,metaHashCode:e.meta.hashCode(),alertsCount:e.alerts.length,removedAlertsIdsCount:e.removedAlertsIds.size,activeHighlightIndex:e.activeHighlightIndex,userInput:t.show.show(e.userInput),takeawayAlertsHashCode:e.alerts.reduce(((e,t)=>m.$.isTakeaway(t)?31*e+g.UC.calculateHashCode(t):e),0),shortenItAlertsHashCode:e.alerts.reduce(((e,t)=>m.$.isShortenIt(t)?31*e+g.Np.calculateHashCode(t):e),0),toneAIAlertsHashCode:e.alerts.reduce(((e,t)=>m.$.isToneAI(t)?31*e+g.QF.calculateHashCode(t):e),0)}),e.eq=c.f7(((e,t)=>e.hashCode()===t.hashCode()&&b.Z.eq.equals(e.positionState,t.positionState)&&y.t.eq.equals(e.visualState,t.visualState)&&e.meta.equals(t.meta)&&u.Eh(m.$.eq).equals(e.alerts,t.alerts)&&(0,p.As)(e.removedAlertsIds,t.removedAlertsIds))),e.hasAlert=e=>t=>void 0!==t.alerts.find((t=>t.id===e)),e.hasActiveAlert=e=>l.G({alert:e.activeAlert,highlightIndex:e.activeHighlightIndex}),e.hasAnyOfAlerts=e=>t=>t.alerts.some((t=>e.has(t.id))),e.willBeDisposed=(e,t)=>e.alerts.every((e=>t.has(e.id))),e.activeAlertRemoved=e=>e.removedAlertsIds.has(e.activeAlert.id);var n=e.getAlertByIndex=(e,t)=>{const n=t[e];return(0,h.kG)(Boolean(n),"Active alert index should point to an alert",(()=>JSON.stringify({alerts:t,alertIndex:e||"undefined"}))),n};e.getIndexByAlert=(e,t)=>{const n=t.findIndex((t=>t.id===e));return(0,h.kG)(-1!==n,"Alert must exist"),n},e.getActiveAlert=e=>n(e.activeAlertIndex,e.alerts);function r(e){return e.activeAlert.type===m.$.Type.super}function i(e){return m.$.isTakeaway(e.activeAlert)}function _(e){return e.activeAlert.alertType===g.bZ.Type.Synfony}function v(e){return m.$.isShortenIt(e.activeAlert)}function w(e){return m.$.isToneAI(e.activeAlert)}function S(e){return m.$.isEthicalAI(e.activeAlert)}function k(e){return m.$.isSuggestedSnippet(e.activeAlert)}function I(e){return m.$.isKnowledgeHubSuggestedTerm(e.activeAlert)}function C(e){return e.activeAlert.type===m.$.Type.default||E(e)}function E(e){return e.activeAlert.type===m.$.Type.writingExpertVbar||e.activeAlert.type===m.$.Type.writingExpertWithTeaser}let A;e.isSuperItem=r,e.isTakeawayItem=i,e.isSynfonyItem=_,e.isShortenItItem=v,e.isToneAIItem=w,e.isEthicalAIItem=S,e.isSuggestedSnippetItem=k,e.isKnowledgeHubSuggestedTermItem=I,e.isIndependentBundleItem=function(e){return S(e)},e.isDefaultItem=C,e.isWritingExpert=E,e.match=function(e){return t=>{if(r(t))return a.F2(e.super(t));if(i(t))return a.F2(e.takeaway(t));if(_(t))return a.F2(e.synfony(t));if(v(t))return a.F2(e.shortenIt(t));if(w(t))return a.F2(e.toneAI(t));if(S(t))return a.F2(e.ethicalAI(t));if(k(t))return a.F2(e.suggestedSnippet(t));if(I(t))return a.F2(e.knowledgeHubSuggestedTerm(t));if(C(t))return a.F2(e.default(t));const n={lensId:t.activeAlert.lensId,lensType:t.activeAlert.lensType};return a.t$(new Error(`Cannot render unknown card type with alert: [${JSON.stringify(n,null,2)}]`))}},function(e){e.getPojoUpdates=()=>({setAlerts:(e,t)=>n=>(0,s._)((0,o._)({},n),{groupedAlerts:t,alerts:e})})}(A=e.Capabilities||(e.Capabilities={}))}(r||(r={})),function(e){e.is=e=>"activeAlert"in e&&"activeHighlightIndex"in e}(i||(i={}))},70880:(e,t,n)=>{n.d(t,{nL:()=>C});var r,i,o,s,a,c,l,u=n(12533),d=n(37159),h=n(96705),p=n(75236),g=n(24332),f=n(58303),m=n(61179),b=n(90023),y=n(28338),_=n(2844),v=n(39104),w=n(66861),S=n(6083),k=n(81933),I=n(63786);!function(e){e.forceText="forceText",e.forceSidebar="forceSidebar"}(r||(r={})),function(e){e.lensview="lensview",e.advanced="advanced",e.plagiarism="plagiarism",e.draftAI="draftAI",e.cheetah="cheetah",e.closed="closed"}(i||(i={})),(i||(i={})).fromLensId=e=>{switch(e){case S.R.SpecialId.Cheetah:return i.cheetah;case S.R.SpecialId.DraftAI:return i.draftAI;case S.R.SpecialId.Plagiarism:return i.plagiarism;case S.R.SpecialId.Premium:case S.R.SpecialId.FreePremiumAlerts:return i.advanced;case S.R.SpecialId.Closed:return i.closed;default:return i.lensview}},function(e){e.active="active",e.persistent="persistent",e.abstract="abstract"}(o||(o={})),function(e){function t(e){return(0,b.zG)(e.cardIndex,f.tS((t=>e.items.getAt(t))))}e.getActiveItem=t;e.getActiveItemIndex=e=>(0,b.ls)(s.getActiveItem,f.tS((t=>e.get(t.id))),f.UI((e=>e.index)));e.getActiveItemOfType=function(e){return(0,b.ls)(t,f.hX(e))}}(s||(s={})),function(e){e.withFilter=e=>t=>(n,r)=>t(n,(0,v.W9)(e,r));e.compose=function(e){return(t,n)=>(0,g.ur)((0,p.uZ)())(e.map((e=>e(t,n))))}}(a||(a={})),function(e){e.hasItems=function(e){return e.kind===o.active||e.kind===o.persistent}}(c||(c={}));class C{static create(e){return new C(e)}get alertSource(){return this._data.alertSource}get switchOrder(){return this._data.switchOrder}get currentLens(){return this._data.currentLens}patch(e){return new C((0,d._)({},this._data,e))}hashCode(){let e=7;return e=31*e+(0,I.AC)(this.alertSource),e=31*e+(0,I.AC)(this.switchOrder),e=31*e+this.currentLens.hashCode(),e}equals(e){return this.alertSource===e.alertSource&&this.switchOrder===e.switchOrder&&this.currentLens.equals(e.currentLens)}constructor(e){(0,u._)(this,"_data",void 0),this._data=e}}!function(e){var t=e.withCardLensSnapshot=(e,t)=>n=>{const r=n.currentLens.items.size>50,i=(0,b.zG)(n.currentLens.cardIndex,f.fS((()=>0))),[o,s]=r?[Math.max(i-25,0),i+25]:[0,50];return{alertSource:n.alertSource,switchOrder:n.switchOrder,lens:{id:n.currentLens.id,card:(0,b.zG)(t(n.currentLens),f.UI(e)),items:n.currentLens.items.values().slice(o,s).map(e),sample:r}}};e.snapshot=(e,r)=>n(t(e,r),t(e,r),(e=>({alertSource:e.alertSource,switchOrder:e.switchOrder,lens:{id:e.currentLens.id,kind:e.currentLens.kind}})));function n(e,t,n){return r=>{switch(r.currentLens.kind){case o.active:return e(r);case o.persistent:return t(r);case o.abstract:return n(r);default:return(0,y.vE)(r.currentLens)}}}e.genericMapper=n;var s=e.mapper=e=>n(e,e,(()=>f.YP)),a=e.getActiveItem=e=>s((({currentLens:t})=>e(t)));e.getActiveAlertHighlight=e=>(0,b.ls)(a(e),f.UI((e=>({alert:e.activeAlert,highlightIndex:e.activeHighlightIndex})))),e.getActiveAlert=e=>(0,b.ls)(a(e),f.UI((e=>e.activeAlert))),e.getLens=s((({currentLens:e})=>f.G(e)));let c;function l(e){return e.currentLens.kind===o.persistent}!function(e){e.mapper=function(e,t){return n=>t[e(n)](n)}}(c=e.Items||(e.Items={})),e.is=function(e){return t=>t.currentLens.id===e},e.isLensview=function(e){return e.currentLens.type===i.lensview},e.isPersistent=l,e.hasCards=function(e){return e.currentLens.kind===o.active||l(e)},e.hasItems=function(e){return e.currentLens.kind===o.active||e.currentLens.kind===o.persistent},e.hasSuccess=function(e){return S.R.isOutcomeId(e.currentLens.id)||S.R.isMainLens(e.currentLens.id)||e.currentLens.id===S.R.SpecialId.PredictionTakeaways||e.currentLens.id===S.R.SpecialId.PredictionEmogenie};e.isForceSidebar=e=>(C.isLensview(e)||e.currentLens.type===i.plagiarism)&&e.alertSource===r.forceSidebar,e.isSidebarOpened=e=>!C.is(S.R.SpecialId.Closed)(e);let u,p,g;!function(e){e.defaultFilter=(0,w.ei)("alertHighlight")}(u=e.FocusFirstFilter||(e.FocusFirstFilter={})),function(e){e.getLens=()=>_.Ue((e=>e.currentLens),((e,t)=>t.patch({currentLens:e}))),e.getLensWithItems=()=>_.Ue((e=>e.currentLens),((e,t)=>t.patch({currentLens:e})))}(p=e.Prism||(e.Prism={})),function(e){let t,n,r,i,o,s,a,c,l;!function(e){e.SwitchLens="SwitchLens",e.SwitchAlert="SwitchAlert",e.Applicator="Applicator",e.ItemsApplicator="ItemsApplicator"}(t=e.Type||(e.Type={})),function(e){let n;e.create=function(e){return{type:t.Applicator,source:e}},function(e){e.identity=e=>e,e.override=e=>()=>e,e.empty=k.EMPTY}(n=e.Source||(e.Source={}))}(n=e.Applicator||(e.Applicator={})),function(e){let n;e.create=function(e){return{type:t.ItemsApplicator,source:e}},function(e){e.identity=()=>e=>e,e.override=e=>()=>e,e.empty=k.EMPTY}(n=e.Source||(e.Source={}))}(r=e.ItemsApplicator||(e.ItemsApplicator={})),function(e){e.create=function(e){return{type:t.SwitchAlert,source:e}}}(i=e.SwitchAlert||(e.SwitchAlert={})),function(e){e.create=function(e){return{type:t.SwitchLens,source:e}}}(o=e.SwitchLens||(e.SwitchLens={})),function(e){function t(e){return e===S.R.SpecialId.Closed}e.isSidebarClosed=t;e.isSidebarOpen=(0,m.ff)(t),e.always=b.W8}(s=e.When||(e.When={})),function(e){e.delayed=e=>t=>{const n=k.delayWhen((()=>k.of(void 0)),e),r=(0,h._)((0,d._)({},t.what),{source:n(t.what.source)});return(0,h._)((0,d._)({},t),{what:r})}}(a=e.Producer||(e.Producer={})),function(e){e.noFocus="noFocus",e.unFocus="unFocus",e.focusFirst="focusFirst",e.focusNext="focusNext",e.focusAlert="focusAlert"}(c=e.FocusBehaviorType||(e.FocusBehaviorType={})),function(e){e.noFocus={kind:c.noFocus},e.unFocus={kind:c.unFocus},e.focusNext={kind:c.focusNext},e.focusFirst={kind:c.focusFirst},e.focusAlert=e=>({kind:c.focusAlert,alertHighlight:e})}(l=e.FocusBehavior||(e.FocusBehavior={}))}(g=e.Effect||(e.Effect={}))}(C||(C={})),function(e){e.defaultOptions={focusBehavior:C.Effect.FocusBehavior.focusFirst}}(l||(l={}));var E,A,x;!function(e){e[e.allAlerts=0]="allAlerts",e[e.priorityAlertsOnly=1]="priorityAlertsOnly"}(E||(E={})),function(e){e.getDefault=()=>E.allAlerts}(A||(A={})),function(e){e.skip=b.jv,e.force=b.W8,e.proceed=e=>e.positionState.animationInProgress}(x||(x={}))},55709:(e,t,n)=>{n.d(t,{R$:()=>I});var r=n(12518),i=n(21147),o=n(9141),s=n(90023),a=n(58303),c=n(11633),l=n(43351),u=n(39104),d=n(93769),h=n(64443),p=Object.defineProperty,g=Object.defineProperties,f=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,_=(e,t,n)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,v=(e,t)=>{for(var n in t||(t={}))b.call(t,n)&&_(e,n,t[n]);if(m)for(var n of m(t))y.call(t,n)&&_(e,n,t[n]);return e},w=(e,t)=>g(e,f(t));const S=a.Eh(i.w4),k=i.f7(u.As);var I;(e=>{let t;var n;(n=t=e.OutcomeContext||(e.OutcomeContext={})).eq=i.n_({type:o.Eq,citation:o.Eq}),n.defaultAcademic={citation:"apa",type:"essay"},n.withCitationStyle=e=>t=>w(v({},t),{domain:a.G("academic"),outcomeContext:a.G(w(v({},n.defaultAcademic),{citation:e}))}),e.eq=i.n_({domain:a.Eh(i.w4),goals:a.Eh(k),audience:S,style:S,outcomeContext:a.Eh(t.eq)}),(e.Default||(e.Default={})).eq=i.n_({domain:i.w4,goals:k,audience:o.Eq,style:o.Eq}),e.goals=d.Dy.literalArray(["inform","describe","convince","tell_a_story","sell"]),e.goalsLabels=["Inform","Describe","Convince","Tell A Story"],e.audiences=d.Dy.literalArray(["general","knowledgeable","expert"]),e.formalityLevels=d.Dy.literalArray(["informal","neutral","formal"]),e.tone=d.Dy.literalArray(["neutral","confident","joyful","optimistic","friendly","urgent","analytical","respectful"]),e.domains=d.Dy.literalArray(["academic","business","general","mail","casual","creative"]),e.dialects=d.Dy.literalArray(["american","british","canadian","australian","indian"]),e.writingIntents=d.Dy.literalArray(["DEFAULT","ASSIGNMENT_WRITING"]),e.academicTypes=d.Dy.literalArray(["essay","report","other"]),e.citation=d.Dy.literalArray(["apa","mla","chicago","other"]),e.fromDomain=function(t){return w(v({},e.unset),{domain:a.G(t)})},e.fromGoals=function(t){return w(v({},e.unset),{goals:a.G(new Set(t))})},e.unset={goals:a.YP,domain:a.YP,audience:a.YP,style:a.YP,dialect:a.YP,outcomeContext:a.YP,writingIntent:a.YP},e.defaultContextFallback={goals:new Set,domain:"general",audience:"knowledgeable",style:"neutral",dialect:a.YP,writingIntent:a.YP},e.isStyleValidWithDomain=function(e,t){return"neutral"===t||("formal"===t?"creative"!==e&&"casual"!==e:"academic"!==e)};const u=d.Dy.literalUnionWithReplace("goal",e.goals,{tellStory:"tell_a_story"}),p=d.Dy.set(u),g=d.Dy.literalUnion("audience",e.audiences),f=d.Dy.literalUnion("formality",e.formalityLevels);d.Dy.literalUnion("tone",e.tone);const m=d.Dy.literalUnion("domain",e.domains),b=d.Dy.literalUnion("dialect",e.dialects),y=d.Dy.literalUnion("writingIntent",e.writingIntents),_=d.Dy.literalUnion("academicType",e.academicTypes);e.citationType=d.Dy.literalUnion("citation",e.citation);const I=c.w3({type:_,citation:e.citationType});e.IOType=c.dt({goals:d.Dy.option(p),domain:d.Dy.option(m),audience:d.Dy.option(g),style:d.Dy.option(f),dialect:d.Dy.optionStrict(b),writingIntent:d.Dy.option(y),outcomeContext:d.Dy.option(I)}),e.IOTypeDefault=c.dt({goals:p,domain:m,audience:g,style:f,dialect:d.Dy.option(b),writingIntent:d.Dy.option(y)}),e.tryParse=e=>t=>(0,s.zG)(e(t),r.Vn(l.Rn),r.Vn((e=>(h.C8.Logging.getLogger("coreclients.dox.context").warn("failed to parse document context",e),e)))),e.parse=(0,s.ls)(a.ij,a.tS((t=>(0,s.zG)(t,(0,e.tryParse)(e.IOType.decode),a.Uo)))),e.parseDefault=(0,s.ls)(a.ij,a.tS((0,s.ls)((0,e.tryParse)((t=>e.IOTypeDefault.decode(t))),a.Uo))),e.serialize=function(t){return e.IOType.encode(t)},e.serializeDefault=function(t){return e.IOTypeDefault.encode(t)}})(I||(I={}))},28338:(e,t,n)=>{n.d(t,{CE:()=>a,L0:()=>l,ej:()=>i,kG:()=>s,sH:()=>r,vE:()=>c});const r=function(e="(nomessage)"){Error.call(this,e),"captureStackTrace"in Error?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name=this.constructor.name};r.prototype=Object.create(Error.prototype);class i extends r{constructor(e,t="empty"){super("Invariant condition failed: "+(e||"(unnamed)")),this.input=t}toString(){return`${this.message} on input[${this.input}]`}}class o extends r{constructor(e){super("Matching not exhaustive"+(e?`: unexpected value ${JSON.stringify(e)}`:""))}}function s(e,t,n){var r;if(!e){const e=new i("string"==typeof t?t:t&&t(),void 0!==n&&"string"!=typeof n?n():n);throw e.stack=null==(r=e.stack)?void 0:r.split("\n").filter((e=>-1===e.indexOf("errors."))).join("\n"),e}}function a(e,t){if(null==e)throw new i("string"==typeof t?t:t&&t());return e}function c(e,t){throw new o(null!=t?t:e)}function l(e){return e}},48730:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;var n={prod:"grammarly.com",preprod:"ppgr.io",qa:"qagr.io"};t.config=function(e){var t=n[e];return{url:{properties:"https://properties."+t,treatment:"https://treatment."+t,gates:"https://gates."+t}}}},33201:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NOT_ASSIGNED=t.Experiment=void 0;var n=function(){function e(e,t){void 0===t&&(t=[]),this.name=e,this._experiences=t}return Object.defineProperty(e.prototype,"experiences",{get:function(){return Object.fromEntries(this._experiences.map((function(e){return[e,e]})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"experiencesArray",{get:function(){return this._experiences},enumerable:!1,configurable:!0}),e}();t.Experiment=n,t.NOT_ASSIGNED="NOT_ASSIGNED"},7366:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExperimentClient=void 0;var o=n(33201),s=n(60267),a=n(14676),c=n(33827),l=function(e,t,n,l,u){var d=this;void 0===u&&(u={}),this._treatmentService=e,this._experiments=t,this._gatesService=n,this._gates=l,this._config=u,this._experimentTreatments=new Map,this._gateTreatments=new Map,this._initialFetched=!1,this.setPrefetchedTreatments=function(e){if(d._startRefreshIfNeeded(),!c.validateTreatmentsWithType(e))throw new Error("Not valid treatments");d._updateTreatmentForExpAndGates(e)},this._updateTreatmentForExpAndGates=function(e){d._treatmentService.refresh&&d._treatmentService.refresh(),d._experimentTreatments=new Map(e.filter((function(e){return e.type===s.ExperimentType.experiment})).map((function(e){return[e.experimentName,e]}))),d._gateTreatments=new Map(e.filter((function(e){return e.type===s.ExperimentType.gate})).map((function(e){return[e.experimentName,e]})))},this.fetchTreatments=function(e){return void 0===e&&(e={}),r(d,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return this._startRefreshIfNeeded(),[4,this._fetchTreatments(e.clearCacheOnError)];case 1:return t.sent(),[2]}}))}))},this._fetchTreatments=function(e){return r(d,void 0,void 0,(function(){var t,n,r,o,s,a,c;return i(this,(function(i){switch(i.label){case 0:t=null,n=null,i.label=1;case 1:return i.trys.push([1,3,,4]),r=this._experiments.concat(this._gates),[4,this._treatmentService.getTreatment(r.map((function(e){return e.name})))];case 2:return t=i.sent(),[3,4];case 3:return o=i.sent(),n=o,e&&this._experimentTreatments.clear(),[3,4];case 4:if(t)return this._updateTreatmentForExpAndGates(t),[2];s=null,a=null,i.label=5;case 5:return i.trys.push([5,7,,8]),[4,this._gatesService.getTreatment(this._gates.map((function(e){return e.name})))];case 6:return s=i.sent(),[3,8];case 7:return c=i.sent(),a=c,e&&this._gateTreatments.clear(),[3,8];case 8:if(s&&(this._gateTreatments=new Map(s.map((function(e){return[e.experimentName,e]})))),a||n)throw a||n;return[2]}}))}))},this._startRefreshIfNeeded=function(){d._initialFetched||(d._config.ttl&&(d._refreshTreatment=setInterval((function(){return r(d,void 0,void 0,(function(){var e,t=this;return i(this,(function(n){switch(n.label){case 0:return e=function(){return r(t,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this._fetchTreatments()];case 1:case 2:return e.sent(),[3,3];case 3:return[2]}}))}))},this._config.ttl&&this._config.useRefreshJitter?(this._delayedRefreshTreatment=setTimeout(e,.1*this._config.ttl*Math.random()),[3,3]):[3,1];case 1:return[4,e()];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}),d._config.ttl)),d._initialFetched=!0)},this.dispose=function(){d._refreshTreatment&&clearInterval(d._refreshTreatment),d._delayedRefreshTreatment&&clearTimeout(d._delayedRefreshTreatment)},this.getTreatment=function(e){var t=d.peekTreatment(e);return null!==t&&d.logTreatment(e,t).catch((function(){})),t},this.getTreatmentManakin=function(e){var t=d.getTreatment(e);return t===o.NOT_ASSIGNED?null:t},this.peekTreatment=function(e){var t=d._experimentTreatments.get(e.name)||d._gateTreatments.get(e.name),n=null==t?void 0:t.groupName;if(0===e.experiencesArray.length||a.getExperienceName(null!=n?n:"")===o.NOT_ASSIGNED)return a.getExperienceName(null!=n?n:"");if(n){var r=e.experiencesArray.find((function(e){return a.getGroupNames(e).includes(n)}));if(r)return r}return null},this.peekTreatmentManakin=function(e){var t=d.peekTreatment(e);return t===o.NOT_ASSIGNED?null:t},this.logTreatment=function(e,t){if(d._config.ssrDisableLogging)return Promise.resolve();var n=d._experimentTreatments.get(e.name)||d._gateTreatments.get(e.name);if(!n||a.getExperienceName(n.groupName)!==t)throw new Error("Cannot find associated treatment");return(void 0!==n.needLog?n.needLog:n.type!==s.ExperimentType.gate)?d._treatmentService.logTreatment(n):Promise.resolve()},this.isGateEnabled=function(e){return d._getExperienceOfEnabledGate(e.name)===e.experience},this._getExperienceOfEnabledGate=function(e){var t=d._gateTreatments.get(e);return t?a.getExperienceName(t.groupName):null},this.getDynamicConfiguration=function(e){var t=d._experimentTreatments.get(e.name)||d._gateTreatments.get(e.name);return t&&t.dynamicConfiguration?t.dynamicConfiguration:null}};t.ExperimentClient=l},60267:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExperimentType=void 0,function(e){e.experiment="experiment",e.gate="gate"}(t.ExperimentType||(t.ExperimentType={}))},93390:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Gate=void 0;var n=function(e,t){void 0===t&&(t="enabled"),this.name=e,this.experience=t};t.Gate=n},54572:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.GatesService=void 0;var o=n(48730),s=n(34542),a=n(33827),c=function(){function e(e,t,n){this.type="gate",this._httpClient=new s.HttpClient(e,t),this._gatesUrl=o.config(n).url.gates+"/gates/get"}return e.prototype.getTreatment=function(e){return r(this,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:return[4,this._httpClient.post(this._gatesUrl,e)];case 1:if(t=n.sent(),a.validateTreatmentsWithType(t))return[2,t];throw new Error("Did not get valid gate treatments")}}))}))},e}();t.GatesService=c},34542:function(e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)},r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.HttpClient=void 0;var o=function(){function e(e,t){var n=this;this._fetch=e,this._config=t,this._fetchWithTimeout=this._config.timeout?function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Promise.race([n._fetch.apply(n,e),new Promise((function(e,t){return setTimeout((function(){return t(new Error("Timeout"))}),n._config.timeout)}))])}:this._fetch}return e.prototype.get=function(e){return r(this,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:return[4,this._getHeaders()];case 1:return t=r.sent(),[4,this._fetchWithTimeout(e,{credentials:"include",mode:"cors",headers:t})];case 2:return n=r.sent(),[2,this._parseResponse(n)]}}))}))},e.prototype.post=function(e,t){return r(this,void 0,void 0,(function(){var r,o;return i(this,(function(i){switch(i.label){case 0:return[4,this._getHeaders()];case 1:return r=i.sent(),[4,this._fetchWithTimeout(e,{method:"POST",credentials:"include",mode:"cors",headers:n(n({},r),{"Content-Type":"application/json"}),body:JSON.stringify(t)})];case 2:return o=i.sent(),[2,this._parseResponse(o)]}}))}))},e.prototype._filterHeaders=function(e){var t={};return Object.entries(e).forEach((function(e){var n=e[0],r=e[1];r&&(t[n]=r)})),t},e.prototype._getHeaders=function(){return r(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return this._config.getApplicationHeaders?(e=this._filterHeaders,[4,this._config.getApplicationHeaders()]):[3,2];case 1:return[2,e.apply(this,[t.sent()])];case 2:throw new Error("Cannot get application headers")}}))}))},e.prototype._parseResponse=function(e){if(!e.ok)throw new Error("Network response was not ok, status "+e.status);return"application/json"===e.headers.get("Content-Type")?e.json():e.text()},e}();t.HttpClient=o},80891:(e,t,n)=>{t.Cc=t.q4=t.KS=t.s=t.JB=t.XJ=void 0;var r=n(7366);Object.defineProperty(t,"XJ",{enumerable:!0,get:function(){return r.ExperimentClient}});var i=n(18306);Object.defineProperty(t,"JB",{enumerable:!0,get:function(){return i.TreatmentService}});var o=n(54572);Object.defineProperty(t,"s",{enumerable:!0,get:function(){return o.GatesService}});var s=n(61774);var a=n(33201);Object.defineProperty(t,"KS",{enumerable:!0,get:function(){return a.Experiment}}),Object.defineProperty(t,"q4",{enumerable:!0,get:function(){return a.NOT_ASSIGNED}});var c=n(93390);Object.defineProperty(t,"Cc",{enumerable:!0,get:function(){return c.Gate}});var l=n(60267)},61774:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PropertiesClient=void 0;var r=n(48730),i=n(34542),o=function(){function e(e,t,n){this._propertiesUrl=r.config(t).url.properties+"/properties",this._httpClient=new i.HttpClient(e,n)}return e.prototype.getAll=function(){return this._httpClient.get(this._propertiesUrl)},e.prototype.getOne=function(e){var t=this._propertiesUrl+"/"+e;return this._httpClient.get(t)},e.prototype.set=function(e){return this._httpClient.post(this._propertiesUrl,e)},e}();t.PropertiesClient=o},14676:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getGroupNames=t.getExperienceName=void 0;t.getExperienceName=function(e){return e.endsWith("_1")||e.endsWith("_2")?e.slice(0,-2):null};t.getGroupNames=function(e){return[e+"_1",e+"_2"]}},33827:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateTreatmentsWithType=void 0;var n=function(e){return"string"==typeof e};t.validateTreatmentsWithType=function(e){return Array.isArray(e)&&e.reduce((function(e,t){return e&&(n((r=t).experimentName)&&n(r.groupName)&&n(r.experimentId)&&n(r.type));var r}),!0)}},18306:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.TreatmentService=void 0;var o=n(48730),s=n(34542),a=n(33827),c=function(e){var t=function(e){return e.holdoutTreatment?":"+e.holdoutTreatment.experimentId+t(e.holdoutTreatment):""};return""+(e.groupName+":"+e.userId+":"+e.experimentId)+t(e)},l=function(){function e(e,t,n,r){this._persistentStorageOpts=r,this.type="experiment",this._throttleLogs=new Map,this._sentLogs={},this._httpClient=new s.HttpClient(e,t),this._treatmentUrl=o.config(n).url.treatment+"/treatment"}return e.prototype.getTreatment=function(e){return r(this,void 0,void 0,(function(){var t,n,r;return i(this,(function(i){switch(i.label){case 0:return t=this._treatmentUrl+"/get",n=e,[4,this._httpClient.post(t,n)];case 1:if(r=i.sent(),a.validateTreatmentsWithType(r))return[2,r];throw new Error("Did not get valid treatments")}}))}))},e.prototype.logTreatment=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return this._checkShouldThrottle(e)||this._checkSent(e)?[2]:[4,this._sendLogTreatment(e)];case 1:return t.sent(),this._setSentLogs(e),[2]}}))}))},e.prototype.refresh=function(){this._throttleLogs.clear()},e.prototype.initSentLogsStorage=function(){return r(this,void 0,void 0,(function(){var e,t,n=this;return i(this,(function(r){switch(r.label){case 0:if(!this._persistentStorageOpts)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this._persistentStorageOpts.get(this._sentLogsStorageKey)];case 2:return e=r.sent()||{},t=new Set(this._persistentStorageOpts.experimentNames),Object.entries(e).forEach((function(e){var r=e[0],i=e[1];t.has(r)&&n._updateSentLogs(r,i)})),[3,4];case 3:return r.sent(),[3,4];case 4:return[2]}}))}))},Object.defineProperty(e.prototype,"_sentLogsStorageKey",{get:function(){var t;return e.STORAGE_KEY_PREFIX+(null===(t=this._persistentStorageOpts)||void 0===t?void 0:t.clientName)},enumerable:!1,configurable:!0}),e.prototype._checkShouldThrottle=function(e){var t=c(e),n=this._throttleLogs.get(e.experimentName)===t;return n||this._throttleLogs.set(e.experimentName,t),n},e.prototype._checkSent=function(e){var t=c(e);return this._sentLogs[e.experimentName]===t},e.prototype._setSentLogs=function(e){var t=c(e);this._updateSentLogs(e.experimentName,t,!0)},e.prototype._updateSentLogs=function(e,t,n){void 0===n&&(n=!1),(n||void 0===this._sentLogs[e])&&(this._sentLogs[e]=t),n&&this._persistSentLogs()},e.prototype._persistSentLogs=function(){return r(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),this._persistentStorageOpts?[4,this._persistentStorageOpts.set(this._sentLogsStorageKey,this._sentLogs)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[3,4];case 3:return e.sent(),[3,4];case 4:return[2]}}))}))},e.prototype._sendLogTreatment=function(e){var t=this._treatmentUrl+"/log";return this._httpClient.post(t,e)},e.STORAGE_KEY_PREFIX="TreatmentServiceStorage_",e}();t.TreatmentService=l},50806:(e,t,n)=>{n.d(t,{cc:()=>d,cn:()=>g});var r=n(2844),i=n(18946),o=n(9662),s=n(62552),a=n(32073),c=n(84308);class l extends s.X{view(...e){return void 0!==e[0]?"function"==typeof e[0]?new p(this,e[0]):"string"==typeof e[0]?new p(this,r.qC(...e.map(i.Jy())).get):new p(this,(t=>e[0].get(t))):this}}class u extends l{set(e){this.modify((()=>e))}lens(e,...t){return new h(this,"function"==typeof e?i.vg(e):"string"==typeof e?r.qC(i.Jy(e),...t.map((e=>i.Jy(e)))):e,o.q)}}class d extends u{constructor(e){super(e)}get(){return this.getValue()}modify(e){const t=this.getValue(),n=e(t);(0,o.q)(t,n)||this.next(n)}set(e){const t=this.getValue();(0,o.q)(t,e)||this.next(e)}}class h extends u{_source;_lens;_eq;constructor(e,t,n=o.q){super(void 0),this._source=e,this._lens=t,this._eq=n}get(){return this._subscription?this.getValue():this._lens.get(this._source.get())}modify(e){this._source.modify((t=>this._lens.modify(e,t)))}set(e){this._source.modify((t=>this._lens.set(e,t)))}_onSourceValue(e){const t=this.getValue(),n=this._lens.get(e);this._eq(t,n)||this.next(n)}_subscription=null;_refCount=0;subscribe(...e){this._subscription||(this._subscription=this._source.subscribe((e=>this._onSourceValue(e)))),this._refCount++;const t=new a.w0((()=>{--this._refCount<=0&&this._subscription&&(this._subscription.unsubscribe(),this._subscription=null)}));return t.add(super.subscribe(...e)),t}unsubscribe(){this._subscription&&(this._subscription.unsubscribe(),this._subscription=null),this._refCount=0,super.unsubscribe()}}class p extends l{_source;_getter;_eq;constructor(e,t,n=o.q){super(void 0),this._source=e,this._getter=t,this._eq=n}get(){return this._subscription?this.getValue():this._getter(this._source.get())}_onSourceValue(e){const t=this.getValue(),n=this._getter(e);this._eq(t,n)||this.next(n)}_subscription=null;_refCount=0;subscribe(...e){this._subscription||(this._subscription=this._source.subscribe((e=>this._onSourceValue(e)))),this._refCount++;const t=new a.w0((()=>{--this._refCount<=0&&this._subscription&&(this._subscription.unsubscribe(),this._subscription=null)}));return t.add(super.subscribe(...e)),t}unsubscribe(){this._subscription&&(this._subscription.unsubscribe(),this._subscription=null),this._refCount=0,super.unsubscribe()}}class g extends l{_sources;_combineFn;_eq;constructor(e,t,n=o.q){super(void 0),this._sources=e,this._combineFn=t,this._eq=n}get(){return this._subscription?this.getValue():this._combineFn(this._sources.map((e=>e.get())))}_onSourceValues(e){const t=this.getValue(),n=this._combineFn(e);this._eq(t,n)||this.next(n)}_subscription=null;_refCount=0;subscribe(...e){this._subscription||(this._subscription=(0,c.a)(this._sources).subscribe((e=>this._onSourceValues(e)))),this._refCount++;const t=new a.w0((()=>{--this._refCount<=0&&this._subscription&&(this._subscription.unsubscribe(),this._subscription=null)}));return t.add(super.subscribe(...e)),t}unsubscribe(){this._subscription&&(this._subscription.unsubscribe(),this._subscription=null),this._refCount=0,super.unsubscribe()}}},13391:(e,t,n)=>{n.d(t,{h:()=>r});var r,i=n(62552),o=n(8867),s=n(32073),a=n(63532),c=n(32734),l=n(90572),u=n(50806);!function(e){e.create=function(e){return new u.cc(e)},e.log=function(e,t){const n=(e,t,n)=>console.log("%c"+e,`color: ${t}; font-weight: bold`,n);let r=e.get();return e.subscribe((e=>{"function"==typeof t?t(r,e):(console.group(`UPDATE ${t?`TYPE: ${t} `:""}@ ${(new Date).toTimeString()}`),n("prev state","#9E9E9E",r),n("next state","#4CAF50",e),console.groupEnd()),r=e})),e},e.combine=function(...e){return new u.cn(e.slice(void 0,-1),(t=>e[e.length-1](...t)))},e.fromObservable=function(t){const n=new i.X(null),r=t.pipe((0,a.b)((t=>{const r=n.value;null===r?n.next(e.create(t)):r.set(t)})),(0,c.B)());return new o.y((e=>{const t=new s.w0;return t.add(n.pipe((0,l.h)((e=>!!e))).subscribe(e)),t.add(r.subscribe(void 0,(t=>e.error(t)),(()=>e.complete()))),t}))}}(r||(r={}))},9662:(e,t,n)=>{function r(e){const t=[];let n;for(;!(n=e.next()).done;)t.push(n.value);return t}function i(e,t){return Object.prototype.hasOwnProperty.call(t,e)}function o(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}n.d(t,{q:()=>l});const s=function(){const e=Object.prototype.toString;return"[object Arguments]"===e.call(arguments)?function(t){return"[object Arguments]"===e.call(t)}:function(e){return i("callee",e)}}(),a=function(){const e=!{toString:null}.propertyIsEnumerable("toString"),t=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],n=function(){return arguments.propertyIsEnumerable("length")}(),r=function(e,t){for(var n=0;n<e.length;){if(e[n]===t)return!0;n+=1}return!1};return"function"!=typeof Object.keys||n?function(o){if(Object(o)!==o)return[];let a,c;const l=[],u=n&&s(o);for(a in o)!i(a,o)||u&&"length"===a||(l[l.length]=a);if(e)for(c=t.length-1;c>=0;)a=t[c],i(a,o)&&!r(l,a)&&(l[l.length]=a),c-=1;return l}:function(e){return Object(e)!==e?[]:Object.keys(e)}}();function c(e){return null===e?"Null":void 0===e?"Undefined":Object.prototype.toString.call(e).slice(8,-1)}function l(e,t,n=[],s=[]){if(o(e,t))return!0;if(c(e)!==c(t))return!1;if(null==e||null==t)return!1;if("function"==typeof e.equals||"function"==typeof t.equals)return"function"==typeof e.equals&&e.equals(t)&&"function"==typeof t.equals&&t.equals(e);switch(c(e)){case"Arguments":case"Array":case"Object":if(null!=(u=e)&&"function"==typeof u.then)return e===t;break;case"Boolean":case"Number":case"String":if(typeof e!=typeof t||!o(e.valueOf(),t.valueOf()))return!1;break;case"Date":if(!o(e.valueOf(),t.valueOf()))return!1;break;case"Error":return e.name===t.name&&e.message===t.message;case"RegExp":if(e.source!==t.source||e.global!==t.global||e.ignoreCase!==t.ignoreCase||e.multiline!==t.multiline||e.sticky!==t.sticky||e.unicode!==t.unicode)return!1;break;case"Map":case"Set":if(!l(r(e.entries()),r(t.entries()),n,s))return!1;break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var u;const d=a(e);if(d.length!==a(t).length)return!1;let h=n.length-1;for(;h>=0;){if(n[h]===e)return s[h]===t;h-=1}for(n.push(e),s.push(t),h=d.length-1;h>=0;){const r=d[h];if(!i(r,t)||!l(t[r],e[r],n,s))return!1;h-=1}return n.pop(),s.pop(),!0}},79713:(e,t,n)=>{function r(e,t){return function(n,r){return t(n(e(r)),r)}}n.d(t,{K:()=>r})},18946:(e,t,n)=>{n.d(t,{Jy:()=>a,vg:()=>l});var r=n(68437),i=n(2844);const o=new RegExp(["^","function","\\(","[^), ]+","\\)","\\{",'("use strict";)?',"return\\s","[^\\.]+\\.(\\S+?);?","\\}","$"].join("\\s*"));new RegExp(["^","function","\\(","[^), ]+","\\)","\\{",'("use strict";)?',"(\\$_\\$wf\\(\\d+\\);)?","return\\s","(\\$_\\$w\\(\\d+, \\d+\\),\\s)?","[^\\.]+\\.(\\S+?);?","\\}","$"].join("\\s*"));function s(e){return function(e){const t=o,n=e.match(t);if(n&&n[2])return n[2].split(".");throw new TypeError(`Expected a property expression, got "${e}".\n\n      A property expression should be a referentially transparent (no side-effects),\n      single-expression "getter" function.\n\n      Correct example: "function (x) { return x.some }" or "x => x.some".\n      Incorrect example: "function (x) { var y = x.some; return y }" or "({some}) => some"`)}(e.toString())}function a(e){return void 0===e?e=>i.Ue((t=>t[e]),((t,n)=>(0,r.Dt)(e,t,n))):i.Ue((t=>t[e]),((t,n)=>(0,r.Dt)(e,t,n)))}let c=0;function l(e){const t=s(e);return r.z3&&function(e){if(c<10){c++;const t=`x.${e.join(".")}`,n=`'${e.join("', '")}'`;(0,r.Kp)(`The property expression overload of Atom.lens and Lens.prop are deprecated and will be removed in next versions of Focal. Please use the key name overload for Atom.lens and Lens.key instead. You can convert your code by changing the calls:\n  a.lens(x => ${t}) to a.lens(${n}),\n  Lens.prop((x: T) => ${t}) to Lens.key<T>()(${n}).`)}}(t),i.qC(...t.map(a()))}},2844:(e,t,n)=>{n.d(t,{Ue:()=>o,qC:()=>s});var r=n(79713),i=n(99525);function o(e,t){return{get:e,set:t,modify:(0,r.K)(e,t),compose:n=>o((t=>n.get(e(t))),((r,i)=>t(n.set(r,e(i)),i)))}}function s(...e){if(0===e.length)throw new TypeError("Can not compose zero lenses. You probably want `Lens.identity`.");if(1===e.length)return e[0];{let t=e[0];return e.slice(1).forEach((e=>{t=t.compose(e)})),t}}o((e=>e),((e,t)=>e));(0,i.U)((e=>{}),((e,t)=>t))},99525:(e,t,n)=>{n.d(t,{U:()=>i});var r=n(79713);function i(e,t){return{get:e,set:t,modify:(0,r.K)(e,t),compose:n=>i((t=>{const r=e(t);return void 0!==r?n.get(r):void 0}),((r,i)=>{const o=e(i);return void 0!==o?t(n.set(r,o),i):i}))}}},68437:(e,t,n)=>{n.d(t,{Dt:()=>o,Kp:()=>s,z3:()=>i});var r=n(9662);const i=void 0!==n(9780)&&!1;function o(e,t,n){if(e in n&&(0,r.q)(t,n[e]))return n;{const r={};for(const e in n)r[e]=n[e];return r[e]=t,r}}function s(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error("[Focal]: "+e);try{throw new Error(e)}catch(e){}}},93769:(e,t,n)=>{n.d(t,{E:()=>p.E,Dy:()=>r});var r={};n.r(r),n.d(r,{combineProperties:()=>U,createNonStrictStringUnion:()=>j,createStringEnum:()=>M,date:()=>C,emptyValue:()=>x,fallback:()=>O,fromProperties:()=>G,getIsNEA:()=>v,getIsOption:()=>m,literalArray:()=>S,literalUnion:()=>k,literalUnionWithReplace:()=>I,nonEmptyArray:()=>w,opaque:()=>_,option:()=>b,optionStrict:()=>y,properties:()=>N,property:()=>L,set:()=>f,stringFromNumber:()=>A,withDefault:()=>T});var i=n(90023),o=n(38538),s=n(53186),a=n(11633),c=n(28338),l=n(12518),u=n(2084),d=n(58303),h=n(73823),p=n(58839);const g=["{","}",";","="];function f(e){return new a.Dy(`Set<${e.name}>`,(e=>e instanceof Set),((t,n)=>l.wE.map(a.IX(e).validate(null!=t?Array.from(t):t,n),(e=>new Set(e)))),(e=>Array.from(e)))}function m(e){return t=>u.is(t)&&(0,i.zG)(t,d.g_((()=>!0),e.is))}function b(e){return new a.Dy(`option:${e.name}`,m(e),((t,n)=>null==t?l.F2(d.YP):l.wE.map(e.validate(t,n),d.G)),d.g_((()=>{}),F(e)))}function y(e){return new a.Dy(`option:${e.name}`,m(e),((t,n)=>x(t)?l.F2(d.YP):l.wE.map(e.validate(t,n),d.G)),d.g_((()=>{}),F(e)))}const _=e=>new a.Dy("Opaque",(e=>"string"==typeof e),((t,n)=>l.wE.chain(e.validate(t,n),(e=>a.Vp(e)))),(e=>e));function v(e){return t=>Array.isArray(t)&&t.length>0&&t.every(e.is)}const w=e=>new a.Dy("NEA",v(e),((t,n)=>l.wE.chain(a.IX(e).validate(t,n),(e=>e.length>0?a.Vp(e):a.Rn(e,n,"Array is empty")))),(e=>u.MH(s.nI(e))));function S(e){return e}function k(e,t){return a.G0(t.map((e=>a.i0(e))),`${e}:string`)}function I(e,t,n){const r=a.G0(t.map((e=>a.i0(e))),`${e}:string`),o=a.G0([...t,...Object.keys(n)].map((e=>a.i0(e))),`${e}:string`);return new a.Dy(`${e}:string`,o.is,((e,t)=>(0,i.zG)(a.Z_.validate(e,t),l.tS((e=>o.validate(e,t))),l.UI((e=>{var t;return null!=(t=n[e])?t:e})),l.tS((e=>r.validate(e,t))))),(e=>{var t;return null!=(t=n[e])?t:e}))}function C(){return new a.Dy("Date",(e=>e instanceof Date),((e,t)=>{const n=Date.parse(null==e?void 0:e.toString()),r=isNaN(n)?e:n;return l.wE.map(a.pk.validate(r,t),(e=>new Date(e)))}),(e=>e.getTime()))}const E=e=>a.Z_.is(e)&&!Number.isNaN(Number(e)),A=new a.Dy("stringFromNumber",E,((e,t)=>E(e)?a.Vp(e):"number"!=typeof e||Number.isNaN(e)?a.Rn(e,t):a.Vp(e.toString())),(e=>Number(e)));function x(e){return"null"===e||"undefined"===e||null==e}function T(e,t){return new a.Dy(`withDefault(${JSON.stringify(t)}):${e.name}`,e.is,((n,r)=>e.validate(x(n)?t:n,r)),F(e))}function O(e,t){return new a.Dy(`fallback(${JSON.stringify(t)}):${e.name}`,e.is,((n,r)=>{const i=e.validate(n,r);return l.nM(i)?l.F2(t):i}),F(e))}const P=(e,t)=>{Array.prototype.push.apply(e,t)},R=["boolean","string","Date","number","Array","Set","object","Dictionary","StringEnum","Partial"],D=(e,t)=>{const n=(e=>{const t=e.replace(/\w+\(.*?\):/,"");if("{"===t[0]&&"}"===t[t.length-1])return"object";const n=t.split(":").pop();return 0===n.indexOf("Date")?"Date":0===n.indexOf("Array<")?"Array":0===n.indexOf("Set<")?"Set":0===n.indexOf("StringEnum<")?"StringEnum":0===t.indexOf("Partial<")?"Partial":0===t.indexOf("UpstreamOnboarding")?"object":((0,c.kG)(R.indexOf(n)>-1,`unsupported prop type ${e}`),n)})(e);switch(n){case"boolean":return t.getBool();case"string":case"StringEnum":return t.getStr();case"Date":return null===t.getNum()?t.getStr():t.getNum();case"number":return t.getNum();case"Array":return t.getArray();case"Set":return t.getSet();case"object":case"Partial":case"Dictionary":return t.getObject();default:return(0,c.vE)(n)}},N=(e,t="",n=(e=>`{ ${Object.keys(e).map((t=>`${t}: ${e[t].name}`)).join(", ")} }`)(e))=>new a.X1(n,(t=>{if(!p.E.is(t))return!1;for(const n in e)if(!e[n].is(t[n]))return!1;return!0}),((n,r)=>{if(!Array.isArray(n)||n.some((e=>!p.E.is(e))))return a.Rn(n,r);const o={},s=[];for(const c in e){const u=""!==t?`${t}:${c}`:c,d=p.E.find(u,...n),h=e[c],g=D(h.name,d),f=h.validate(g,a.JS(r,c,h));(0,i.zG)(f,l.g_((e=>P(s,e)),(e=>{o[c]=e})))}return s.length?a.mq(s):a.Vp(o)}),(n=>{const r={};for(const i in e){const o=""!==t?`${t}:${i}`:i,s=e[i],a=n[i];if(s.is(a)){const e=F(s)(a);null!=e&&(r[o]=e)}}return p.E.of(r)}),e);function U(e,t=`(${e.map((e=>e.name)).join(" & ")})`){const n=e.length;return new a.Ii(t,(t=>e.every((e=>e.is(t)))),((t,r)=>{const o={},s=[];for(let a=0;a<n;a++){const n=e[a].validate(t,r);(0,i.zG)(n,l.g_((e=>P(s,e)),(e=>Object.assign(o,e))))}return s.length?a.mq(s):a.Vp(o)}),(t=>p.E.of(...e.map((e=>F(e)(t))))),e)}function M(e,t){return a.mM(Object.values(e).reduce(((e,t)=>(e[t]=null,e)),{}),`StringEnum<${t}>`)}function j(e){return new a.Dy(e,(e=>"string"==typeof e),((e,t)=>"string"==typeof e?a.Vp(e):a.Rn(e,t,`Unexpected type: ${e}`)),a.yR)}const F=e=>t=>(0,i.zG)(h.vM((()=>e.encode(t))),l.g_((e=>{console.warn(e)}),i.yR)),L=new a.Dy("property",(e=>!0),((e,t)=>{const n=t[1].key,r=String(e);return r.length>1024?a.Rn(e,t,`Property ${n} is too long (max length is 1024)`):g.some((e=>r.indexOf(e)>=0))?a.Rn(e,t,`Property ${n} has forbidden characters (${g.join(", ")})`):a.Vp(e)}),a.yR);function G(e){return a.dt((0,i.zG)(e,o.hX((e=>"function"!=typeof e)),o.UI((()=>L))))}},58839:(e,t,n)=>{n.d(t,{E:()=>d});var r=n(39953);function i(e){return"null"===e||"undefined"===e||null==e}function o(e){if(null===e||"null"===e||"boolean"==typeof e)return null;const t=Number(e);return Number.isNaN(t)?null:t}function s(e){return i(e)?null:"true"===e||"false"!==e&&"0"!==e&&Boolean(e)}function a(e){try{return JSON.parse(decodeURIComponent(String(e)))}catch(e){return null}}function c(e){try{return new Set(a(e))}catch(e){return null}}function l(e){try{return Object.entries(a(e)).reduce(((e,[t,n])=>(e.set(t,n),e)),new Map)}catch(e){return null}}class u{constructor(e){this._value=e}getStr(){return i(this._value)?null:String(this._value)}getNum(){return o(this._value)}getBool(){return s(this._value)}getBoolOrDefault(e){return function(e,t){return i(e)?t:"true"===e||"false"!==e&&"0"!==e&&Boolean(e)}(this._value,e)}getObject(){return a(this._value)}getArray(){return a(this._value)}getSet(){return c(this._value)}getMap(){return l(this._value)}getObjProp(e){return"object"==typeof this._value&&e in this._value?this._value[e]:null}}class d{getStr(e){return e in this?String(this[e]):null}getNum(e){return e in this?o(this[e]):null}getBool(e){return e in this?s(this[e]):null}getObject(e){return e in this?a(this[e]):null}getSet(e){return e in this?c(this[e]):null}getMap(e){return e in this?l(this[e]):null}has(e){return e in this}ifPresent(e,t){this[e]&&t(this[e])}entries(){return Object.keys(this).map((e=>[e,new u(this[e])]))}static find(e,...t){const n=t.find((t=>t.has(e)));return new u(n&&n[e])}static of(...e){const t=new d;for(const i of e)for(const e in i){const o=i[e];t[e]="object"==typeof(n=o)?(0,r.zG)(JSON.stringify(n,((e,t)=>t instanceof Set?Array.from(t):t instanceof Map?Object.fromEntries(t.entries()):t)),encodeURI):n}var n;return t}static is(e){return e instanceof d}}},89662:(e,t,n)=>{function r(e){return{codec:null==e?void 0:e.codec}}n.d(t,{d:()=>r})},70512:(e,t,n)=>{function r(e){return{codec:null==e?void 0:e.codec}}n.d(t,{x:()=>r})},57206:(e,t,n)=>{n.d(t,{x:()=>s});var r,i=e=>{throw TypeError(e)},o=(e,t,n)=>(((e,t,n)=>{t.has(e)||i("Cannot "+n)})(e,t,"read from private field"),n?n.call(e):t.get(e));class s{constructor(){((e,t,n)=>{t.has(e)?i("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n)})(this,r,new Set)}next(e){var t;for(const n of o(this,r))null==(t=n.next)||t.call(n,e)}subscribe(e){return o(this,r).add(e),{[Symbol.dispose]:()=>o(this,r).delete(e)}}[Symbol.dispose](){var e;for(const t of o(this,r))null==(e=t.complete)||e.call(t);o(this,r).clear()}}r=new WeakMap},83535:(e,t,n)=>{n.d(t,{v:()=>i});var r=n(45585);function i(e=(0,r.r)()){const t=crypto.randomUUID().replace(/-/g,"");const n=function(e){let t="",n=BigInt(0);for(e.forEach((e=>{n=n<<BigInt(8)|BigInt(e)}));n>0;){const e=n%BigInt(62);t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Number(e)]+t,n/=BigInt(62)}return t.padStart(22,"0")}(new Uint8Array(t.match(/.{1,2}/g).map((e=>parseInt(e,16)))));return e?n.slice(0,8):n}},45585:(e,t,n)=>{function r(){return!1}n.d(t,{r:()=>r})},1933:(e,t,n)=>{function r(){let e,t;return{promise:new Promise(((n,r)=>{e=n,t=r})),resolve:e,reject:t}}n.d(t,{B:()=>r})},23537:(e,t,n)=>{n.d(t,{P:()=>i});var r=n(45585);function i(...e){(0,r.r)()&&console.warn(...e)}},22768:(e,t,n)=>{var r,i,o,s,a,c;n.d(t,{G1:()=>le,T0:()=>oe,r2:()=>ge,JC:()=>ae,D:()=>ue}),function(e){e.Frequent="Frequent",e.Often="Often",e.Sometimes="Sometimes"}(r||(r={})),function(e){e.Academic="academic",e.NonAcademic="non-academic"}(i||(i={})),function(e){e.Supported="Supported",e.Contradicted="Contradicted",e.Debated="Debated"}(o||(o={})),function(e){e.Contradicted="Contradicted",e.Debated="Debated"}(s||(s={})),function(e){e.Contradicted="Contradicted",e.Confirmed="Confirmed"}(a||(a={})),function(e){e.Top="top",e.Cursor="cursor"}(c||(c={}));var l=n(24961),u=n(36661),d=(0,u.S)((function(e){return e.intersect(e.partial({accessibilityLabel:e.string}))(e.intersect(e.partial({backendBlob:e.string}))(e.intersect(e.partial({requireAxTree:e.boolean}))(e.struct({actionId:e.string,label:e.string}))))})),h=(0,u.S)((function(e){return e.intersect(e.partial({accessibilityLabel:e.string}))(e.struct({label:e.string}))})),p=(0,u.S)((function(e){return(0,l.wf)(m(e),e.struct({}))(e)})),g=(0,u.S)((function(e){return e.intersect(e.partial({expertPanel:Q(e)}))(e.intersect(e.partial({aiGrader:O(e)}))(e.intersect(e.partial({plagiarism:Ee(e)}))(e.intersect(e.partial({factChecker:te(e)}))(e.intersect(e.partial({percentageProgressBar:Ce(e)}))(e.struct({}))))))})),f=(0,u.S)((function(e){return e.intersect(e.partial({additionalElements:g(e)}))(e.intersect(e.partial({rewrite:e.string}))(e.intersect(e.partial({hasFinalRewrite:e.boolean}))(e.struct({availableActions:e.readonly(e.array(P(e)))}))))})),m=(0,u.S)((function(e){return e.struct({id:e.number,contentId:e.string})})),b=(0,u.S)((function(e){return(0,l.wf)(m(e),e.struct({}))(e)})),y=(0,u.S)((function(e){return e.intersect(e.partial({defaultAction:P(e)}))(e.intersect(e.partial({expandedTabs:e.readonly(e.array(P(e)))}))(e.struct({extraSettings:e.readonly(e.record(Te(e)))})))})),_=(0,u.S)((function(e){return e.intersect(e.partial({title:e.string}))(e.intersect(e.partial({explanation:e.string}))(e.struct({text:e.string,range:xe(e),sourceAgent:e.string,sourceAction:e.string,trackingSourceAction:e.string})))})),v=(0,u.S)((function(e){return e.intersect(e.partial({subTitle:e.string}))(e.struct({title:e.string,ctaCopy:e.string,ctaUrl:e.string,dismissCopy:e.string}))})),w=(0,u.S)((function(e){return e.struct({upgradeHookName:e.string,upgradeHookSlot:e.string,upgradeHookVariant:e.string,upgradeHookSubVariant:e.string})})),S=(0,u.S)((function(e){return e.struct({uphookComment:v(e),uphookConfig:w(e)})})),k=((0,u.S)((function(e){return ie(e)})),(0,l.Dd)(r)),I=(0,u.S)((function(e){return e.struct({kind:k(e),suggestions:e.readonly(e.array(e.string))})})),C=(0,u.S)((function(e){var t;return e.sum("action")(((t={})["factChecker:rewrite"]=A(e),t))})),E=(0,l.Dd)(i),A=(0,u.S)((function(e){return e.struct({action:e.literal("factChecker:rewrite"),sourceId:e.string,targetAudience:E(e),inTextCitation:e.string})})),x=(0,u.S)((function(e){return e.intersect(e.partial({mode:e.string}))(e.struct({}))})),T=(0,u.S)((function(e){return e.intersect(e.partial({extraInfo:x(e)}))(e.struct({agentId:e.string,message:e.string}))})),O=(0,u.S)((function(e){return e.struct({rubricCriterionId:e.string,rubricCriterionName:e.string})})),P=(0,u.S)((function(e){var t;return e.sum("type")(((t={}).simpleContentAction=R(e),t.textActionsAction=D(e),t.launchAgentAction=N(e),t))})),R=(0,u.S)((function(e){return(0,l.wf)(d(e),e.struct({type:e.literal("simpleContentAction")}))(e)})),D=(0,u.S)((function(e){return(0,l.wf)(d(e),e.intersect(e.partial({actionParameters:Te(e)}))(e.struct({type:e.literal("textActionsAction"),displaySetting:J(e)})))(e)})),N=(0,u.S)((function(e){return(0,l.wf)(h(e),e.struct({type:e.literal("launchAgentAction"),agentId:e.string}))(e)})),U=(0,u.S)((function(e){var t;return e.sum("kind")(((t={}).book=M(e),t.article=j(e),t.website=F(e),t.report=L(e),t.other=G(e),t))})),M=(0,u.S)((function(e){return e.intersect(e.partial({authorsList:e.readonly(e.array(e.string))}))(e.intersect(e.partial({publisher:e.string}))(e.intersect(e.partial({edition:e.string}))(e.intersect(e.partial({year:e.number}))(e.struct({kind:e.literal("book"),title:e.string})))))})),j=(0,u.S)((function(e){return e.intersect(e.partial({authorsList:e.readonly(e.array(e.string))}))(e.intersect(e.partial({journal:e.string}))(e.intersect(e.partial({volume:e.string}))(e.intersect(e.partial({issue:e.string}))(e.intersect(e.partial({pages:e.string}))(e.intersect(e.partial({year:e.number}))(e.intersect(e.partial({doi:e.string}))(e.struct({kind:e.literal("article"),title:e.string}))))))))})),F=(0,u.S)((function(e){return e.intersect(e.partial({domain:e.string}))(e.intersect(e.partial({authorsList:e.readonly(e.array(e.string))}))(e.intersect(e.partial({publisher:e.string}))(e.intersect(e.partial({year:e.number}))(e.struct({kind:e.literal("website"),title:e.string})))))})),L=(0,u.S)((function(e){return e.intersect(e.partial({authorsList:e.readonly(e.array(e.string))}))(e.intersect(e.partial({organization:e.string}))(e.intersect(e.partial({year:e.number}))(e.intersect(e.partial({publishedOn:e.string}))(e.struct({kind:e.literal("report"),title:e.string})))))})),G=(0,u.S)((function(e){return e.intersect(e.partial({authorsList:e.readonly(e.array(e.string))}))(e.intersect(e.partial({publisher:e.string}))(e.struct({kind:e.literal("other"),title:e.string})))})),B=(0,u.S)((function(e){var t;return e.sum("kind")(((t={}).book=z(e),t.article=V(e),t.website=q(e),t.report=H(e),t.other=W(e),t))})),z=(0,u.S)((function(e){return e.intersect(e.partial({authors:e.string}))(e.intersect(e.partial({authorsList:e.readonly(e.array(e.string))}))(e.intersect(e.partial({publisher:e.string}))(e.intersect(e.partial({edition:e.string}))(e.intersect(e.partial({year:e.number}))(e.struct({kind:e.literal("book")}))))))})),V=(0,u.S)((function(e){return e.intersect(e.partial({authors:e.string}))(e.intersect(e.partial({authorsList:e.readonly(e.array(e.string))}))(e.intersect(e.partial({journal:e.string}))(e.intersect(e.partial({volume:e.string}))(e.intersect(e.partial({issue:e.string}))(e.intersect(e.partial({pages:e.string}))(e.intersect(e.partial({year:e.number}))(e.intersect(e.partial({doi:e.string}))(e.struct({kind:e.literal("article")})))))))))})),q=(0,u.S)((function(e){return e.intersect(e.partial({domain:e.string}))(e.intersect(e.partial({authors:e.string}))(e.intersect(e.partial({authorsList:e.readonly(e.array(e.string))}))(e.intersect(e.partial({publisher:e.string}))(e.intersect(e.partial({year:e.number}))(e.struct({kind:e.literal("website")}))))))})),H=(0,u.S)((function(e){return e.intersect(e.partial({authors:e.string}))(e.intersect(e.partial({authorsList:e.readonly(e.array(e.string))}))(e.intersect(e.partial({organization:e.string}))(e.intersect(e.partial({year:e.number}))(e.intersect(e.partial({publishedOn:e.string}))(e.struct({kind:e.literal("report")}))))))})),W=(0,u.S)((function(e){return e.intersect(e.partial({authors:e.string}))(e.intersect(e.partial({authorsList:e.readonly(e.array(e.string))}))(e.intersect(e.partial({publisher:e.string}))(e.struct({kind:e.literal("other")}))))})),$=(0,u.S)((function(e){return e.struct({kind:K(e),sources:e.readonly(e.array(X(e)))})})),X=(0,u.S)((function(e){return e.intersect(e.partial({description:e.string}))(e.intersect(e.partial({url:e.string}))(e.intersect(e.partial({citation:B(e)}))(e.struct({id:e.string,kind:K(e),title:e.string}))))})),K=(0,l.Dd)(o),Y=(0,u.S)((function(e){return e.struct({claim:$(e)})})),Z=(0,u.S)((function(e){return e.intersect(e.partial({axTree:e.string}))(e.struct({}))})),J=(0,u.S)((function(e){return e.struct({enableUserPrompt:e.boolean,rewriteShowAsPlainText:e.boolean,disableTextIsWellWritten:e.boolean,showTitle:e.boolean})})),Q=(0,u.S)((function(e){return e.struct({expertName:e.string,expertInitials:e.string,expertDescription:e.string,sourceTitle:e.string,sourceType:e.string,sourceDescription:e.string,sourceUrl:e.string})})),ee=(0,u.S)((function(e){return e.intersect(e.partial({kind:re(e)}))(e.intersect(e.partial({description:e.string}))(e.intersect(e.partial({citation:U(e)}))(e.struct({id:e.string,title:e.string,url:e.string}))))})),te=(0,u.S)((function(e){return e.struct({kind:ne(e),context:e.string,sources:e.readonly(e.array(ee(e)))})})),ne=(0,l.Dd)(s),re=(0,l.Dd)(a),ie=(0,u.S)((function(e){var t;return e.sum("action")(((t={})["pushed_content:pushedContent"]=oe(e),t["pushed_content:dismissContent"]=se(e),t["pushed_content:removeContent"]=ae(e),t["pushed_content:executeAction"]=ce(e),t["pushed_content:ack"]=le(e),t["pushed_content:settingsMessage"]=ue(e),t["pushed_content:getSettings"]=de(e),t["pushed_content:updateSettings"]=he(e),t["pushed_content:rebaseContent"]=pe(e),t["pushed_content:rebaseContentCompleted"]=ge(e),t))})),oe=(0,u.S)((function(e){return(0,l.wf)(m(e),b(e),e.intersect(e.partial({metadata:fe(e)}))(e.struct({action:e.literal("pushed_content:pushedContent"),notification:me(e),surface:Oe(e)})))(e)})),se=(0,u.S)((function(e){return(0,l.wf)(p(e),m(e),e.struct({action:e.literal("pushed_content:dismissContent")}))(e)})),ae=(0,u.S)((function(e){return(0,l.wf)(m(e),b(e),e.struct({action:e.literal("pushed_content:removeContent")}))(e)})),ce=(0,u.S)((function(e){return(0,l.wf)(p(e),m(e),e.intersect(e.partial({requestParameters:C(e)}))(e.struct({action:e.literal("pushed_content:executeAction"),clientContext:Z(e),request:P(e)})))(e)})),le=(0,u.S)((function(e){return(0,l.wf)(m(e),e.struct({action:e.literal("pushed_content:ack")}))(e)})),ue=(0,u.S)((function(e){return(0,l.wf)(m(e),b(e),y(e),e.struct({action:e.literal("pushed_content:settingsMessage")}))(e)})),de=(0,u.S)((function(e){return(0,l.wf)(p(e),m(e),e.struct({action:e.literal("pushed_content:getSettings")}))(e)})),he=(0,u.S)((function(e){return(0,l.wf)(p(e),m(e),y(e),e.struct({action:e.literal("pushed_content:updateSettings")}))(e)})),pe=(0,u.S)((function(e){return(0,l.wf)(p(e),m(e),e.struct({action:e.literal("pushed_content:rebaseContent"),newRange:xe(e)}))(e)})),ge=(0,u.S)((function(e){return(0,l.wf)(m(e),b(e),e.struct({action:e.literal("pushed_content:rebaseContentCompleted")}))(e)})),fe=(0,u.S)((function(e){return e.intersect(e.partial({textRevision:e.number}))(e.intersect(e.partial({correlationId:e.string}))(e.struct({})))})),me=(0,u.S)((function(e){return e.struct({notificationElement:be(e),layer:e.number,suppressMask:e.number,timestamp:e.string})})),be=(0,u.S)((function(e){var t;return e.sum("kind")(((t={}).vBar=ye(e),t.superUnderline=_e(e),t.loadingVBar=ve(e),t.agentEntrypoint=Se(e),t.benchPopUp=ke(e),t.agentPanelFooter=Ie(e),t))})),ye=(0,u.S)((function(e){return e.intersect(e.partial({explanation:e.string}))(e.struct({kind:e.literal("vBar"),range:xe(e),vBarType:e.string,colorHex:e.string}))})),_e=(0,u.S)((function(e){return e.intersect(e.partial({explanation:e.string}))(e.struct({kind:e.literal("superUnderline"),range:xe(e),vBarType:e.string,colorHex:e.string}))})),ve=(0,u.S)((function(e){return e.struct({kind:e.literal("loadingVBar")})})),we=(0,l.Dd)(c),Se=(0,u.S)((function(e){return e.struct({kind:e.literal("agentEntrypoint"),position:we(e)})})),ke=(0,u.S)((function(e){return e.intersect(e.partial({promotion:T(e)}))(e.struct({kind:e.literal("benchPopUp")}))})),Ie=(0,u.S)((function(e){return e.intersect(e.partial({promotion:T(e)}))(e.struct({kind:e.literal("agentPanelFooter")}))})),Ce=(0,u.S)((function(e){return e.intersect(e.partial({subTitle:e.string}))(e.struct({title:e.string,percent:e.number}))})),Ee=(0,u.S)((function(e){return e.struct({similarity:e.number,referenceMla:e.string,referenceApa:e.string,referenceChicago:e.string})})),Ae=(0,u.S)((function(e){return e.struct({similarity:e.number,referenceMla:e.string,referenceApa:e.string,referenceChicago:e.string})})),xe=(0,u.S)((function(e){return e.struct({start:e.number,end:e.number})})),Te=(0,u.S)((function(e){return e.intersect(e.partial({supportedValues:e.readonly(e.record(e.string))}))(e.struct({value:e.string}))})),Oe=(0,u.S)((function(e){var t;return e.sum("kind")(((t={}).rewriteCard=Re(e),t.lazyRewriteCard=De(e),t.lockedRewrite=Ne(e),t.lockedRewriteCard=je(e),t.unlockedRewriteCard=Ge(e),t.uphookRewriteCard=qe(e),t.loadingCard=He(e),t.comment=$e(e),t.lockedComment=Ke(e),t.unlockedComment=Ze(e),t.uphookComment=Je(e),t.rewritePlaceholderCard=Qe(e),t.expertPanelCard=et(e),t.plagiarismCard=tt(e),t.empty=nt(e),t))})),Pe=(0,u.S)((function(e){return e.intersect(e.partial({citationFinder:Y(e)}))(e.intersect(e.partial({plagiarism:Ae(e)}))(e.intersect(e.partial({aiRewriter:I(e)}))(e.struct({}))))})),Re=(0,u.S)((function(e){return(0,l.wf)(_(e),e.intersect(e.partial({allowPresetTabs:e.boolean}))(e.intersect(e.partial({enableUserPrompt:e.boolean}))(e.intersect(e.partial({allowFollowUpAIActions:e.boolean}))(e.intersect(e.partial({additionalElements:Pe(e)}))(e.intersect(e.partial({promotion:T(e)}))(e.struct({kind:e.literal("rewriteCard")})))))))(e)})),De=(0,u.S)((function(e){return(0,l.wf)(_(e),e.intersect(e.partial({onShowAction:P(e)}))(e.struct({kind:e.literal("lazyRewriteCard"),isLoading:e.boolean})))(e)})),Ne=(0,u.S)((function(e){return e.struct({kind:e.literal("lockedRewrite")})})),Ue=(0,u.S)((function(e){return e.intersect(e.partial({subTitle:e.string}))(e.struct({title:e.string}))})),Me=(0,u.S)((function(e){return e.intersect(e.partial({citationFinder:Y(e)}))(e.intersect(e.partial({plagiarism:Ae(e)}))(e.intersect(e.partial({aiRewriter:I(e)}))(e.struct({}))))})),je=(0,u.S)((function(e){return(0,l.wf)(_(e),e.intersect(e.partial({additionalElements:Me(e)}))(e.struct({kind:e.literal("lockedRewriteCard"),availableActions:e.readonly(e.array(P(e))),lockedRewrite:Ue(e)})))(e)})),Fe=(0,u.S)((function(e){return e.intersect(e.partial({subTitle:e.string}))(e.struct({title:e.string}))})),Le=(0,u.S)((function(e){return e.intersect(e.partial({citationFinder:Y(e)}))(e.intersect(e.partial({plagiarism:Ae(e)}))(e.intersect(e.partial({aiRewriter:I(e)}))(e.struct({}))))})),Ge=(0,u.S)((function(e){return(0,l.wf)(_(e),e.intersect(e.partial({additionalElements:Le(e)}))(e.intersect(e.partial({promotion:T(e)}))(e.struct({kind:e.literal("unlockedRewriteCard"),unlockedRewrite:Fe(e)}))))(e)})),Be=(0,u.S)((function(e){return e.intersect(e.partial({subTitle:e.string}))(e.struct({title:e.string,ctaCopy:e.string,ctaUrl:e.string,dismissCopy:e.string}))})),ze=(0,u.S)((function(e){return e.struct({upgradeHookName:e.string,upgradeHookSlot:e.string,upgradeHookVariant:e.string,upgradeHookSubVariant:e.string})})),Ve=(0,u.S)((function(e){return e.intersect(e.partial({citationFinder:Y(e)}))(e.intersect(e.partial({plagiarism:Ae(e)}))(e.intersect(e.partial({aiRewriter:I(e)}))(e.struct({}))))})),qe=(0,u.S)((function(e){return(0,l.wf)(_(e),e.intersect(e.partial({additionalElements:Ve(e)}))(e.struct({kind:e.literal("uphookRewriteCard"),uphookRewrite:Be(e),uphookConfig:ze(e)})))(e)})),He=(0,u.S)((function(e){return e.struct({kind:e.literal("loadingCard")})})),We=(0,u.S)((function(e){return e.intersect(e.partial({expertPanel:Q(e)}))(e.intersect(e.partial({aiGrader:O(e)}))(e.intersect(e.partial({plagiarism:Ee(e)}))(e.intersect(e.partial({factChecker:te(e)}))(e.intersect(e.partial({percentageProgressBar:Ce(e)}))(e.struct({}))))))})),$e=(0,u.S)((function(e){return(0,l.wf)(_(e),e.intersect(e.partial({additionalElements:We(e)}))(e.intersect(e.partial({rewrite:e.string}))(e.intersect(e.partial({hasFinalRewrite:e.boolean}))(e.intersect(e.partial({promotion:T(e)}))(e.struct({kind:e.literal("comment"),availableActions:e.readonly(e.array(P(e)))}))))))(e)})),Xe=(0,u.S)((function(e){return e.intersect(e.partial({subTitle:e.string}))(e.struct({title:e.string}))})),Ke=(0,u.S)((function(e){return(0,l.wf)(f(e),_(e),e.struct({kind:e.literal("lockedComment"),lockedComment:Xe(e)}))(e)})),Ye=(0,u.S)((function(e){return e.intersect(e.partial({subTitle:e.string}))(e.struct({title:e.string}))})),Ze=(0,u.S)((function(e){return(0,l.wf)(f(e),_(e),e.intersect(e.partial({promotion:T(e)}))(e.struct({kind:e.literal("unlockedComment"),unlockedComment:Ye(e)})))(e)})),Je=(0,u.S)((function(e){return(0,l.wf)(f(e),_(e),S(e),e.struct({kind:e.literal("uphookComment")}))(e)})),Qe=(0,u.S)((function(e){return(0,l.wf)(_(e),e.intersect(e.partial({showPostActionLoading:e.boolean}))(e.intersect(e.partial({isLoading:e.boolean}))(e.struct({kind:e.literal("rewritePlaceholderCard"),availableActions:e.readonly(e.array(P(e)))}))))(e)})),et=(0,u.S)((function(e){return(0,l.wf)(_(e),e.intersect(e.partial({rewrite:e.string}))(e.struct({kind:e.literal("expertPanelCard"),availableActions:e.readonly(e.array(P(e))),expertName:e.string,expertInitials:e.string,expertDescription:e.string,sourceTitle:e.string,sourceType:e.string,sourceDescription:e.string,sourceUrl:e.string})))(e)})),tt=(0,u.S)((function(e){return(0,l.wf)(_(e),e.struct({kind:e.literal("plagiarismCard"),availableActions:e.readonly(e.array(P(e))),similarity:e.number,reference:e.string}))(e)})),nt=(0,u.S)((function(e){return e.struct({kind:e.literal("empty")})}));(0,u.S)((function(e){return(0,l.wf)(y(e),e.struct({}))(e)})),(0,u.S)((function(e){var t;return e.sum("type")(((t={}).simpleContentAction=R(e),t.textActionsAction=D(e),t))})),(0,u.S)((function(e){var t;return e.sum("type")(((t={}).launchAgentAction=N(e),t))})),(0,u.S)((function(e){var t;return e.sum("action")(((t={})["pushed_content:dismissContent"]=se(e),t["pushed_content:executeAction"]=ce(e),t["pushed_content:getSettings"]=de(e),t["pushed_content:updateSettings"]=he(e),t["pushed_content:rebaseContent"]=pe(e),t))})),(0,u.S)((function(e){var t;return e.sum("kind")(((t={}).lockedComment=Ke(e),t.unlockedComment=Ze(e),t.uphookComment=Je(e),t))})),(0,u.S)((function(e){var t;return e.sum("action")(((t={})["pushed_content:pushedContent"]=oe(e),t["pushed_content:dismissContent"]=se(e),t["pushed_content:removeContent"]=ae(e),t["pushed_content:executeAction"]=ce(e),t["pushed_content:ack"]=le(e),t["pushed_content:settingsMessage"]=ue(e),t["pushed_content:getSettings"]=de(e),t["pushed_content:updateSettings"]=he(e),t["pushed_content:rebaseContent"]=pe(e),t["pushed_content:rebaseContentCompleted"]=ge(e),t))})),(0,u.S)((function(e){var t;return e.sum("action")(((t={})["pushed_content:pushedContent"]=oe(e),t["pushed_content:removeContent"]=ae(e),t["pushed_content:settingsMessage"]=ue(e),t["pushed_content:rebaseContentCompleted"]=ge(e),t))})),(0,u.S)((function(e){var t;return e.sum("action")(((t={})["pushed_content:settingsMessage"]=ue(e),t["pushed_content:updateSettings"]=he(e),t))})),(0,u.S)((function(e){var t;return e.sum("kind")(((t={}).rewriteCard=Re(e),t.lazyRewriteCard=De(e),t.lockedRewriteCard=je(e),t.unlockedRewriteCard=Ge(e),t.uphookRewriteCard=qe(e),t.comment=$e(e),t.lockedComment=Ke(e),t.unlockedComment=Ze(e),t.uphookComment=Je(e),t.rewritePlaceholderCard=Qe(e),t.expertPanelCard=et(e),t.plagiarismCard=tt(e),t))})),(0,u.S)((function(e){var t;return e.sum("kind")(((t={}).uphookComment=Je(e),t))}))},2187:(e,t,n)=>{n.d(t,{Tq:()=>c,wW:()=>s,yY:()=>a});var r=n(8867),i=n(84714),o=n(20161);function s(e){return t=>e.set(t)}function a(e){return()=>e.toPromise()}var c,l,u;(c||(c={})).toObservable=function(e){return e instanceof r.y?e:(0,i.of)(e)},(u=l||(l={})).ricScheduler=function(e){return"requestIdleCallback"in self?t=>{const n=self;return r.y.create((r=>{const i=n.requestIdleCallback((e=>{(e.timeRemaining()>0||e.didTimeout)&&r.next(t)}),{timeout:e});return()=>n.cancelIdleCallback(i)}))}:u.rafScheduler},u.rafScheduler=function(e){return r.y.create((t=>{const n=requestAnimationFrame((()=>t.next(e)));return()=>cancelAnimationFrame(n)}))},u.syncScheduler=function(e){return(0,i.of)(e)},u.inRaf=function(e){return e.pipe((0,o.w)(u.rafScheduler))},u.inRic=function(e,t){return e.pipe((0,o.w)(u.ricScheduler(t)))}},81933:(e,t,n)=>{n.d(t,{EMPTY:()=>s.E,Observable:()=>r.y,Subscription:()=>a.w0,debounceTime:()=>p.b,delayWhen:()=>g.j,filter:()=>f.h,map:()=>d.U,of:()=>c.of,timer:()=>b,withLatestFrom:()=>m.M});var r=n(8867),i=n(84766),o=n(93440),s=n(36344),a=n(32073),c=n(84714),l=n(39256),u=n(86599),d=n(59179),h=n(20161),p=n(29416),g=n(97654),f=n(90572),m=n(10883);Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;function b(e=0,t,n){const s="number"==typeof e?e:null==e?void 0:e.getTime();return null!=s&&s>=2147483647?new r.y((e=>{const r=Date.now(),o=(0,i.F)(1e3,n).pipe((0,l.o)((()=>Date.now()-r<s)),(0,u.h)(1),null==t?(0,d.U)((()=>0)):(0,h.w)((()=>(0,i.F)(t,n)))).subscribe(e);return()=>o.unsubscribe()})):null!=t?(0,o.H)(e,t,n):(0,o.H)(e,n)}},83816:(e,t,n)=>{n.d(t,{BP:()=>i,_6:()=>a,fg:()=>l,gr:()=>o,iD:()=>s});n(72314),Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;String.fromCharCode(160);var r;function i(e,t){const n=e.match(t);return n&&n[1]}function o(e){return e.split(/\s+/)[0]}function s(e){if(!e)return 0;return e.split(/\s+/).filter((e=>e.length>0)).length}function a(e,t,n){return 1===e?t:n}(r||(r={})).URI_REGEXP=/^(?:(?:(?:f|ht)tps?|mailto|tel):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i;const c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function l(e){if(e<0)throw new TypeError(`Length should not be negative: ${e}`);return Array.from({length:e},(()=>c.charAt(Math.random()*c.length))).join("")}},64443:(e,t,n)=>{n.d(t,{zW:()=>r,C8:()=>W});var r={};n.r(r),n.d(r,{T:()=>i,i:()=>h});var i,o=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,d=(e,t,n)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,h=(e=>(e[e.TRACE=0]="TRACE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.FATAL=5]="FATAL",e[e.OFF=6]="OFF",e))(h||{});(h||(h={})).fromString=function(e){switch(e){case"TRACE":return 0;case"DEBUG":return 1;case"INFO":return 2;case"WARN":return 3;case"ERROR":return 4;case"FATAL":return 5;case"OFF":return 6;default:throw new TypeError(`Unrecognized log level string '${e}'`)}},(e=>{function t(e){return t=>{let n=0;if(null==t||0===t.length)return e;for(let e=0;e<t.length;e++)n=t.charCodeAt(e)+((n<<5)-n),n&=n;return n=(n%50+50)%50,((e,t)=>s(e,a(t)))(((e,t)=>{for(var n in t||(t={}))l.call(t,n)&&d(e,n,t[n]);if(c)for(var n of c(t))u.call(t,n)&&d(e,n,t[n]);return e})({},e),{lightness:e.lightness-n})}}(e=>{e.getContrastTextColor=e=>({hue:0,saturation:0,lightness:e.lightness>50?0:100}),e.toString=e=>`hsl(${e.hue}, ${e.saturation}%, ${e.lightness}%)`})(e.HSL||(e.HSL={})),(e=>{e.base={hue:43,saturation:74,lightness:66},e.getColor=t(e.base)})(e.Model||(e.Model={})),(e=>{e.base={hue:12,saturation:76,lightness:61},e.getColor=t(e.base)})(e.ViewModel||(e.ViewModel={})),(e=>{e.base={hue:173,saturation:58,lightness:39},e.getColor=t(e.base)})(e.Manager||(e.Manager={}))})(i||(i={}));var p,g,f=Object.defineProperty,m=Object.defineProperties,b=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,_=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,w=(e,t,n)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;(e=>{e.isErrorLike=function(e){const t=e;return null!=t&&(void 0!==t.message&&void 0!==t.name||void 0!==t.stack)}})(p||(p={})),(e=>{function t(e,r){if(null==e||"number"==typeof e||"string"==typeof e||"boolean"==typeof e)return e;if("object"==typeof e){if(e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e.toString();if(e instanceof Set)return Array.from(e,(e=>t(e,r)));if(e instanceof Map)return Array.from(e).reduce(((e,[n,i])=>((e,t)=>m(e,b(t)))(((e,t)=>{for(var n in t||(t={}))_.call(t,n)&&w(e,n,t[n]);if(y)for(var n of y(t))v.call(t,n)&&w(e,n,t[n]);return e})({},e),{[n]:t(i,r)})),{});if(-1===r.indexOf(e)){r.push(e);const t=n(e,r,p.isErrorLike(e));return Object.keys(t).length>0?t:e}}}function n(e,n,r){if(!e)return{};const i={};return(r?Object.getOwnPropertyNames:Object.keys)(e).forEach((r=>{const o=e[r];i[r]=t(o,n)})),i}e.fromAny=function(e){return n(e,[e],p.isErrorLike(e))}})(g||(g={}));const S=/^(?!\.[\w])[\w.]*\w$/;function k(e){if(""===e)throw new Error("Empty name");if(!S.test(e))throw new Error(`Invalid name: ${e}. Should be hierarchical dot separated string and may contain only word characters)`)}const I=function(e="(nomessage)"){Error.call(this,e),this.stack=(new Error).stack,this.message=e,this.name=this.constructor.name};I.prototype=Object.create(Error.prototype);class C extends I{}class E{constructor(e,t){if(this.messageCount=e,this.timeframe=t,e<1)throw new C("messagesCount should be > 1");if(t<=0)throw new C("timeframe should be > 0");this._allowance=e,this._lastChecked=Date.now()}hit(){const e=Date.now(),t=e-this._lastChecked;return this._lastChecked=e,this._allowance+=t*(this.messageCount/this.timeframe),this._allowance>this.messageCount&&(this._allowance=this.messageCount),!(this._allowance<1)&&(this._allowance-=1,!0)}toString(){return`[ messageCount: ${this.messageCount}, timeframe: ${this.timeframe}, allowance: ${Math.trunc(1e3*this._allowance)/1e3}, _lastCheck: ${this._lastChecked}]`}}(e=>{e.RateLimitIndicator=class{constructor(e,t){if(this._limiter=e,this._cooldownTime=t,this._lastLimiting=0,this._aboveThreshold=!1,t<0)throw new C("cooldownTime should be non-negative")}hit(){const e=this._limiter.hit();let t=!1;return e?this._aboveThreshold&&Date.now()-this._cooldownTime>this._lastLimiting&&(this._aboveThreshold=!1,t=!0):(this._lastLimiting=Date.now(),this._aboveThreshold||(this._aboveThreshold=!0,t=!0)),{allow:e,aboveThreshold:this._aboveThreshold,wasTriggered:t}}}})(E||(E={}));class A{constructor(e){this.capacity=e,this.size=0,this._keymap={}}put(e,t){var n;const r={key:e,value:t};if(this._keymap[e]=r,this._tail?(this._tail.newer=r,r.older=this._tail):this._head=r,this._tail=r,this.size===this.capacity)return null==(n=this.shift())?void 0:n.value;++this.size}get(e){const t=this._getImpl(e);return t&&t.value}peek(e){const t=this._keymap[e];return null==t?void 0:t.value}set(e,t){const n=this._getImpl(e),r=t(n&&n.value);return null!=r?n?n.value=r:this.put(e,r):n&&this.remove(e),r}getRef(e){return this._getImpl(e)}remove(e){const t=this._keymap[e];if(null!=t)return delete this._keymap[e],t.newer&&t.older?(t.older.newer=t.newer,t.newer.older=t.older):t.newer?(t.newer.older=void 0,this._head=t.newer):t.older?(t.older.newer=void 0,this._tail=t.older):this._head=this._tail=void 0,--this.size,t.value}forEach(e){for(const t in this._keymap)e(t,this._keymap[t].value)}shift(){const e=this._head;return this._head&&(this._head.newer?(this._head=this._head.newer,this._head.older=void 0):this._head=void 0,e.newer=e.older=void 0,delete this._keymap[e.key]),e}_getImpl(e){const t=this._keymap[e];if(null!=t)return t===this._tail||(t.newer&&(t===this._head&&(this._head=t.newer),t.newer.older=t.older),t.older&&(t.older.newer=t.newer),t.newer=void 0,t.older=this._tail,this._tail&&(this._tail.newer=t),this._tail=t),t}}class x{constructor(e,t,n,r="."){this.name=e,this.timersSink=t,this.countersSink=n,this._nameSeparator=r,k(e)}getMetric(e){return this.createChild(e)}getTimer(e){return this.createChild(e)}getCounter(e){return this.createChild(e)}get parent(){const e=this.name.lastIndexOf(this._nameSeparator),t=this.name.substring(0,-1===e?0:e);return""===t?void 0:new x(t,this.timersSink,this.countersSink,this._nameSeparator)}get root(){const e=this.name.indexOf(this._nameSeparator),t=this.name.substring(0,-1===e?0:e);return""===t?this:new x(t,this.timersSink,this.countersSink,this._nameSeparator)}createName(e){return this.name+this._nameSeparator+e}start(){const e=Date.now(),t=this;return{stop(){t.recordTime(Date.now()-e)}}}recordTime(e){this.timersSink(this.name,e)}timing(e){const t=this.start();try{return e()}finally{try{t.stop()}catch(e){}}}increment(e=1){this.countersSink(this.name,e)}decrement(e=1){this.increment(-e)}createChild(e){return new x(this.createName(e),this.timersSink,this.countersSink,this._nameSeparator)}}class T extends x{constructor(e){super("MP",((t,n)=>e("TIMER: "+t+" = "+n)),((t,n)=>e("COUNTER: "+t+" = "+n)),".")}}class O{static getRootMetric(){return null==O._metricsRoot&&(console.warn("[WARNING] Using default timeseries implementation."),O._metricsRoot=new T(console.log)),O._metricsRoot}static configure(e){O._metricsRoot=e}}class P{constructor(e,t,n,r,i,o,s,a){this.level=e,this.message=t,this.logger=n,this.timestamp=r,this.exception=i,this.extra=o,this.context=s,this.logColor=a}dropContext(){return new P(this.level,this.message,this.logger,this.timestamp,this.exception,this.extra,this.logColor)}addContext(e){return new P(this.level,this.message,this.logger,this.timestamp,this.exception,this.extra,e,this.logColor)}changeLogger(e){return new P(this.level,this.message,e,this.timestamp,this.exception,this.extra,this.context)}}(e=>{e.show=e=>`[${e.logger}]: ${h[e.level]} : ${e.message} ${e.extra?JSON.stringify(e.extra):""} ${e.exception?JSON.stringify(e.exception):""}`})(P||(P={}));Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;function R(e){return O.getRootMetric().getCounter(e)}const D=class e{constructor(e){this._sink=e,this._throttled=[],this._shortRateReporter={name:"short",indicator:new E.RateLimitIndicator(new E(30,2e3),1e4),counter:R("logRates.short")},this._longRateReporter={name:"long",indicator:new E.RateLimitIndicator(new E(120,24e4),3e4),counter:R("logRates.long")},this._counting=R("logRates.either"),this._countingStarted=0,this._droppingLimiter=new E(2,6e4),this._dropped=0}append(t){var n;const r=this._shortRateReporter.indicator.hit(),i=this._longRateReporter.indicator.hit();if((r.wasTriggered||i.wasTriggered)&&(r.wasTriggered&&r.aboveThreshold&&this._shortRateReporter.counter.increment(),i.wasTriggered&&i.aboveThreshold&&this._longRateReporter.counter.increment(),r.aboveThreshold||i.aboveThreshold?this._counts||(this._counting.increment(),this._counts=new A(50),this._countingStarted=Date.now(),this._sink.append(this._createTriggeredEvent(t,"Logging rate is above threshold",{short:r,long:i})).catch(console.warn)):(this._counts=void 0,this._throttled=[],this._sink.append(this._createTriggeredEvent(t,"Logging rate is back to normal",{dropped:this._dropped})).catch(console.warn))),this._counts){const r=this._eventToString(t),i=null!=(n=this._counts.set(r,(e=>(null!=e?e:0)+1)))?n:0;return i/((Date.now()-this._countingStarted)/1e3)>e.DROP_RATE&&i>e.DROP_COUNT&&!this._droppingLimiter.hit()?(this._throttled.some((e=>e===t.message))||(this._throttled.push(t.message),this._sink.append(this._createTriggeredEvent(t,"Started throttling logs",{throttledLogs:t.message})).catch(console.warn)),this._drop(),Promise.reject("Log message discarded due to rate limiting: "+t.message)):this._sink.append(t)}return this._sink.append(t)}_drop(){++this._dropped}_createTriggeredEvent(e,t,n){return new P(h.ERROR,t,"editor.logging.rate",Date.now(),e.exception,n,e.context)}_eventToString(e){return e.level+e.logger+e.message}};D.DROP_RATE=.5,D.DROP_COUNT=15;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;const N="_";class U extends x{constructor(e,t){super(e,((e,n)=>t("TIMER: "+e+" = "+n)),((e,n)=>t("COUNTER: "+e+" = "+n)),N),this.name=e,this._fn=t}setContext(e){return console.log(this.name,e),this}getMetric(e){return this.createChild(e)}getCounter(e){return this.createChild(e)}getTimer(e){return this.createChild(e)}createChild(e){return new U(this.createName(e),this._fn)}createName(e){return this.name+N+e}}class M{static getRootMetric(){return null==M._femetricsRoot&&(console.warn("[WARNING] Using default femetrics timeseries implementation."),M._femetricsRoot=new U("FM",console.log)),M._femetricsRoot}static configure(e){M._femetricsRoot=e}}function j(e){return M.getRootMetric().getCounter(e)}const F=class e{constructor(e){this._sink=e,this._throttled=[],this._shortRateReporter={name:"short",indicator:new E.RateLimitIndicator(new E(30,2e3),1e4),counter:j("logRates.short")},this._longRateReporter={name:"long",indicator:new E.RateLimitIndicator(new E(120,24e4),3e4),counter:j("logRates.long")},this._counting=j("logRates.either"),this._countingStarted=0,this._droppingLimiter=new E(2,6e4),this._dropped=0}append(t){var n;const r=this._shortRateReporter.indicator.hit(),i=this._longRateReporter.indicator.hit();if((r.wasTriggered||i.wasTriggered)&&(r.wasTriggered&&r.aboveThreshold&&this._shortRateReporter.counter.increment(),i.wasTriggered&&i.aboveThreshold&&this._longRateReporter.counter.increment(),r.aboveThreshold||i.aboveThreshold?this._counts||(this._counting.increment(),this._counts=new A(50),this._countingStarted=Date.now(),this._sink.append(this._createTriggeredEvent(t,"Logging rate is above threshold",{short:r,long:i})).catch(console.warn)):(this._counts=void 0,this._throttled=[],this._sink.append(this._createTriggeredEvent(t,"Logging rate is back to normal",{dropped:this._dropped})).catch(console.warn))),this._counts){const r=this._eventToString(t),i=null!=(n=this._counts.set(r,(e=>(null!=e?e:0)+1)))?n:0;return i/((Date.now()-this._countingStarted)/1e3)>e.DROP_RATE&&i>e.DROP_COUNT&&!this._droppingLimiter.hit()?(this._throttled.some((e=>e===t.message))||(this._throttled.push(t.message),this._sink.append(this._createTriggeredEvent(t,"Started throttling logs",{throttledLogs:t.message})).catch(console.warn)),this._drop(),Promise.reject("Log message discarded due to rate limiting: "+t.message)):this._sink.append(t)}return this._sink.append(t)}_drop(){++this._dropped}_createTriggeredEvent(e,t,n){return new P(h.ERROR,t,"editor.logging.rate",Date.now(),e.exception,n,e.context)}_eventToString(e){return e.level+e.logger+e.message}};F.DROP_RATE=.5,F.DROP_COUNT=15;class L{constructor(e,t,n,r){this.name=e,this.level=t,this.context=n,this.logColor=r,k(e)}isEnabled(e){return e>=this.level}handler(e,t){return{trace:n=>{throw this.trace(e,n,t),n},debug:n=>{throw this.debug(e,n,t),n},info:n=>{throw this.info(e,n,t),n},warn:n=>{throw this.warn(e,n,t),n},error:n=>{throw this.error(e,n,t),n},fatal:n=>{throw this.fatal(e,n,t),n}}}trace(e,t,n){this.log(h.TRACE,e,t,n)}debug(e,t,n){this.log(h.DEBUG,e,t,n)}info(e,t,n){this.log(h.INFO,e,t,n)}warn(e,t,n){this.log(h.WARN,e,t,n)}error(e,t,n){this.log(h.ERROR,e,t,n)}fatal(e,t,n){this.log(h.FATAL,e,t,n)}log(e,t,n,r){this.isEnabled(e)&&(n&&r||p.isErrorLike(n)?this.logImpl(e,t,n,r):this.logImpl(e,t,void 0,null!=r?r:n))}}var G=n(90023),B=n(47150);class z extends L{constructor(e,t,n,r,i){super(e,t,r||new B.k,i),this.appender=n,this.logColor=i}getLogger(e,t,n){return new z(this.name+"."+e,null!=t?t:this.level,this.appender,new B.k(this.context),n)}logImpl(e,t,n,r){const i=new P(e,t,this.name,Date.now(),n,r,this.context.get());try{this.appender(i)}catch(e){console.trace("Failed processing log event",e);try{V.printToConsole(i)}catch(e){console.error("No luck. Can't print the event",e)}}}}class V extends z{constructor(e,t,n){super(e,t,(e=>e.level>=t&&V.printToConsole(e)),n)}static printToConsole(e){let t=console.log;t=e.level<=h.TRACE||e.level<=h.DEBUG?"function"==typeof console.debug?console.debug:console.log:e.level<=h.INFO?console.log:e.level<=h.WARN?console.warn:console.error,t.apply(console,(e.logColor?[...V._getStyledLoggerName(e),`${h[e.level]} : ${e.message}`,e.exception,e.extra]:[`[${e.logger}]: ${h[e.level]} : ${e.message}`,e.exception,e.extra]).filter((e=>!!e)))}static _getStyledLoggerName(e){const t=(0,G.zG)(i.HSL.getContrastTextColor(e.logColor),i.HSL.toString),n=i.HSL.toString(e.logColor);return[`%c${e.logger}`,`color:${t};padding:4px;background:${n};border-radius:4px`]}}class q{static getRootLogger(){return null==q._rootLogger&&(q._rootLogger=q._createDefaultRootLogger(),q._rootLogger.warn("Using DEFAULT root logger")),q._rootLogger}static configure(e){q._rootLogger=e,q._rootLogger.debug("ROOT logger changed",e)}static _createDefaultRootLogger(){return new V("DEFAULT",h.DEBUG)}}const H=h;var W;(e=>{const t=class e{static configureLogLevelGetter(t){e._getLogLevel=t}static get root(){return q.getRootLogger()}static getLogger(t,n,r){const i=e._getLogLevel(t,n),o=e.root.getLogger(t,e._getLogLevel(t,n),r);return n!==i&&o.debug(`Logger "${t}" initialized with level "${null!=i&&H[i]}" instead of "${null!=n&&H[n]}"`),o}};t._getLogLevel=(e,t)=>t;let n=t;e.Logging=n;e.TimeSeries=class{static get root(){return O.getRootMetric()}static get rootFemetrics(){return M.getRootMetric()}}})(W||(W={}));Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable},47150:(e,t,n)=>{n.d(t,{k:()=>r});class r{constructor(e){this.parent=e,this._context=void 0}get(){const e=this.parent&&this.parent.get(),t=this._context;return e||t?Object.assign({},e,t):void 0}add(e){this._context=Object.assign({},this._context,e)}remove(e){this._context&&e.forEach((e=>{e in this._context&&delete this._context[e]}))}clear(){this._context=void 0}}},58781:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MintClient=void 0;const r=n(63693),i=n(67813);t.MintClient=class{constructor(e){this.config=e,this.offlineQueue=[],this.authPendingQueue=[],this.isInitialized=!1,this.isAnonymous=!1,this.queueProcessingInProgress=!1,this.authQueueProcessingInProgress=!1,this.initializationInProgress=!1,this.MAX_EVENT_AGE_MS=864e5,this.validateConfig()}async sendEvent(e,t,n=!1){const r=Date.now();this.isAnonymous=n;try{this.queueEventForAuth(e,t),await this.processAuthPendingQueue()}catch(n){if(await this.handleFinalError(n,e,t,!0),!this.config.options.gracefulDegradation)throw n}finally{const t=Date.now()-r;this.config.metrics?.recordLatency("mint_sdk_event_send_duration",t,{event_name:e.event_name,sdk_version:(0,i.getSdkVersion)(),environment:(0,i.getEnvironment)()})}}async sendEventWithRetry(e,t,n,o=!0){try{let n=e;for(const t of this.config.transformers)try{n=await t.transform(n)}catch(n){const i=new r.TransformationError(`Transformation failed: ${n.message}`,t.constructor.name||"unknown");throw this.config.options.errorPolicy.onTransformationError?.(i,e),i}for(const t of this.config.validators)try{await t.validate(n)}catch(t){if(t instanceof r.ValidationError)throw this.config.options.errorPolicy.onValidationError?.(t,e),t;const n=new r.ValidationError(`Validation error: ${t.message}`);throw this.config.options.errorPolicy.onValidationError?.(n,e),n}const i=this.encodeEventAsJson(n),o=await this.prepareHeadersWithErrorHandling(n);await this.sendHttpWithErrorHandling(i,o,t,n)}catch(r){const s=this.wrapError(r);if(this.config.options.retryStrategy.shouldRetry(s,n)){const r=this.config.options.retryStrategy.getDelayMs(n);return this.config.metrics?.recordEvent("mint_sdk_event_retry",{event_name:e.event_name,sdk_version:(0,i.getSdkVersion)(),environment:(0,i.getEnvironment)(),attempt:n.toString(),delay_ms:r.toString(),error_type:s.constructor.name},n),await new Promise((e=>setTimeout(e,r))),this.sendEventWithRetry(e,t,n+1,o)}throw s}}encodeEventAsJson(e){const t=JSON.stringify(e);return(new TextEncoder).encode(t)}async prepareHeadersWithErrorHandling(e){const t={"Content-Type":"application/json",Accept:"application/json"};try{if(this.config.authTokenProvider){const e=await this.config.authTokenProvider();e&&(t.Authorization=`Bearer ${e}`)}}catch(t){const n=new r.AuthenticationError(`Failed to get auth token: ${t.message}`);this.config.options.errorPolicy.onAuthError?.(n,e)}return t}async sendHttpWithErrorHandling(e,t,n,i){try{const o=await this.config.httpSender.send(e,t,n,this.isAnonymous);if(o.status>=400){const e=new r.HttpError(`HTTP ${o.status}: ${o.statusText}`,o.status,o);throw this.config.options.errorPolicy.onHttpError?.(e,i),e}}catch(e){if(e instanceof r.HttpError)throw e;const t=new r.NetworkError(`Network error: ${e.message}`,e);throw this.config.options.errorPolicy.onNetworkError?.(t,i),t}}wrapError(e){if(e instanceof r.MintClientError)return e;return new class extends r.MintClientError{constructor(){super(e.message,"UNKNOWN_ERROR",!1),this.stack=e.stack}}}async sendEventWithoutQueue(e,t){const n=Date.now();try{await this.sendEventWithRetry(e,t,1,!1),this.config.metrics?.recordEvent("mint_sdk_event_sent_success",{event_name:e.event_name,sdk_version:(0,i.getSdkVersion)(),environment:(0,i.getEnvironment)()},1)}finally{const t=Date.now()-n;this.config.metrics?.recordLatency("mint_sdk_event_send_duration",t,{event_name:e.event_name,sdk_version:(0,i.getSdkVersion)(),environment:(0,i.getEnvironment)()})}}async handleFinalError(e,t,n,i=!0){e instanceof r.ValidationError?this.config.options.errorPolicy.onValidationError?.(e,t):e instanceof r.AuthenticationError?this.config.options.errorPolicy.onAuthError?.(e,t):e instanceof r.NetworkError?this.config.options.errorPolicy.onNetworkError?.(e,t):e instanceof r.HttpError?this.config.options.errorPolicy.onHttpError?.(e,t):e instanceof r.TransformationError?this.config.options.errorPolicy.onTransformationError?.(e,t):this.config.options.errorPolicy.onUnknownError?.(e,t),i&&e instanceof r.NetworkError&&this.isOffline()&&this.queueEventForRetry(t,n)}queueEventForRetry(e,t){this.config.options.enableOfflineQueue&&(this.cleanupStaleEvents(),this.offlineQueue.length>=this.config.options.maxQueueSize&&this.offlineQueue.shift(),this.offlineQueue.push({event:this.deepCloneEvent(e),datasetName:t,timestamp:Date.now(),retryCount:0}))}cleanupStaleEvents(){const e=Date.now();this.offlineQueue.splice(0,this.offlineQueue.length,...this.offlineQueue.filter((t=>e-t.timestamp<this.MAX_EVENT_AGE_MS)))}queueEventForAuth(e,t){this.cleanupStaleAuthEvents(),this.authPendingQueue.length>=this.config.options.maxQueueSize&&(this.authPendingQueue.shift(),this.config.metrics?.recordEvent("mint_sdk_auth_queue_overflow",{event_name:e.event_name||"unknown",sdk_version:(0,i.getSdkVersion)(),environment:(0,i.getEnvironment)()},1)),this.authPendingQueue.push({event:this.deepCloneEvent(e),timestamp:Date.now(),retryCount:0,datasetName:t}),this.config.metrics?.recordEvent("mint_sdk_event_queued_for_auth",{event_name:e.event_name||"unknown",queue_size:this.authPendingQueue.length.toString(),sdk_version:(0,i.getSdkVersion)(),environment:(0,i.getEnvironment)()},1)}cleanupStaleAuthEvents(){const e=Date.now();this.authPendingQueue.splice(0,this.authPendingQueue.length,...this.authPendingQueue.filter((t=>e-t.timestamp<this.MAX_EVENT_AGE_MS)))}deepCloneEvent(e){try{return JSON.parse(JSON.stringify(e))}catch(t){return this.config.metrics?.recordError("mint_sdk_event_clone_error",t,{event_name:e.event_name||"unknown",sdk_version:(0,i.getSdkVersion)(),environment:(0,i.getEnvironment)()}),{...e}}}async processOfflineQueue(){if(!this.queueProcessingInProgress&&0!==this.offlineQueue.length){this.queueProcessingInProgress=!0;try{for(;this.offlineQueue.length>0;){const e=this.offlineQueue.shift();try{await this.sendEventWithoutQueue(e.event,e.datasetName),this.config.metrics?.recordEvent("mint_sdk_offline_event_processed",{event_name:e.event.event_name||"unknown",sdk_version:(0,i.getSdkVersion)(),environment:(0,i.getEnvironment)(),retry_count:e.retryCount.toString()},1)}catch(t){e.retryCount<this.config.options.maxRetries?(this.offlineQueue.unshift({...e,retryCount:e.retryCount+1,timestamp:Date.now()}),this.config.metrics?.recordEvent("mint_sdk_offline_event_requeued",{event_name:e.event.event_name||"unknown",retry_count:e.retryCount.toString()},1)):this.config.metrics?.recordEvent("mint_sdk_offline_event_dropped",{event_name:e.event.event_name||"unknown",retry_count:e.retryCount.toString()},1);break}}}finally{this.queueProcessingInProgress=!1}}}async processAuthPendingQueue(){if(!this.authQueueProcessingInProgress&&0!==this.authPendingQueue.length){this.authQueueProcessingInProgress=!0;try{let e=null;try{this.config.authTokenProvider&&(e=await this.config.authTokenProvider())}catch(e){return void this.config.metrics?.recordEvent("mint_sdk_auth_check_failed",{queue_size:this.authPendingQueue.length.toString(),sdk_version:(0,i.getSdkVersion)(),environment:(0,i.getEnvironment)(),error:e.message},1)}if(!e)return void this.config.metrics?.recordEvent("mint_sdk_event_no_auth",{queue_size:this.authPendingQueue.length.toString(),sdk_version:(0,i.getSdkVersion)(),environment:(0,i.getEnvironment)()},1);for(this.authPendingQueue.length>1&&this.config.metrics?.recordEvent("mint_sdk_auth_queue_processing_started",{queue_size:this.authPendingQueue.length.toString(),sdk_version:(0,i.getSdkVersion)(),environment:(0,i.getEnvironment)()},1);this.authPendingQueue.length>0;){const e=this.authPendingQueue.shift();try{await this.sendEventWithoutQueue(e.event,e.datasetName),this.config.metrics?.recordEvent("mint_sdk_auth_event_processed",{event_name:e.event.event_name||"unknown",sdk_version:(0,i.getSdkVersion)(),environment:(0,i.getEnvironment)(),retry_count:e.retryCount.toString()},1)}catch(t){const n=this.wrapError(t);if(!this.config.options.gracefulDegradation)throw this.authPendingQueue.unshift(e),n;if(await this.handleFinalError(n,e.event,e.datasetName,!1),n instanceof r.NetworkError&&this.isOffline()){this.queueEventForRetry(e.event,e.datasetName),this.config.metrics?.recordEvent("mint_sdk_auth_event_moved_to_offline",{event_name:e.event.event_name||"unknown",retry_count:e.retryCount.toString()},1);continue}e.retryCount<this.config.options.maxRetries?(this.authPendingQueue.unshift({...e,retryCount:e.retryCount+1,timestamp:Date.now()}),this.config.metrics?.recordEvent("mint_sdk_auth_event_requeued",{event_name:e.event.event_name||"unknown",retry_count:e.retryCount.toString()},1)):this.config.metrics?.recordEvent("mint_sdk_auth_event_dropped",{event_name:e.event.event_name||"unknown",retry_count:e.retryCount.toString()},1);break}}}finally{this.authQueueProcessingInProgress=!1}}}isOffline(){return"undefined"!=typeof navigator&&!navigator.onLine}async initialize(){if(!this.isInitialized&&!this.initializationInProgress){this.initializationInProgress=!0;try{this.isInitialized=!0,this.isOffline()||await this.processOfflineQueue(),this.config.metrics?.recordEvent("mint_sdk_client_initialized",{sdk_version:(0,i.getSdkVersion)(),environment:(0,i.getEnvironment)()},1)}finally{this.initializationInProgress=!1}}}validateConfig(){if(!this.config.httpSender)throw new r.ConfigurationError("httpSender is required")}getQueueStatus(){return{offlineQueue:{size:this.offlineQueue.length,enabled:this.config.options.enableOfflineQueue},authPendingQueue:{size:this.authPendingQueue.length}}}}},55473:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MintClientConfig=t.DefaultErrorHandlingPolicy=void 0;const r=n(63693),i=n(67813);class o{constructor(e,t=console){this.metrics=e,this.logger=t}onAuthError(e,t){this.logger.warn("Auth error, continuing without authentication:",e.message),this.metrics?.recordError("auth_error",e,{event_name:t.event_name,sdk_version:(0,i.getSdkVersion)(),environment:(0,i.getEnvironment)()})}onNetworkError(e,t){this.logger.warn("Network error:",e.message),this.metrics?.recordError("network_error",e,{event_name:t.event_name,sdk_version:(0,i.getSdkVersion)(),environment:(0,i.getEnvironment)()})}onValidationError(e,t){this.logger.error("Validation error:",e.message),this.metrics?.recordError("validation_error",e,{event_name:t.event_name,sdk_version:(0,i.getSdkVersion)(),environment:(0,i.getEnvironment)(),field:e.field||"unknown"})}onHttpError(e,t){this.logger.error(`HTTP error ${e.status}:`,e.message),this.metrics?.recordError("http_error",e,{event_name:t.event_name,sdk_version:(0,i.getSdkVersion)(),environment:(0,i.getEnvironment)(),status:e.status.toString()||"unknown"})}onTransformationError(e,t){this.logger.error("Transformation error:",e.message),this.metrics?.recordError("transformation_error",e,{event_name:t.event_name,sdk_version:(0,i.getSdkVersion)(),environment:(0,i.getEnvironment)(),transformer:e.transformerName||"unknown"})}onUnknownError(e,t){this.logger.error("Unexpected error:",e),this.metrics?.recordError("unknown_error",e,{event_name:t.event_name,sdk_version:(0,i.getSdkVersion)(),environment:(0,i.getEnvironment)()})}}t.DefaultErrorHandlingPolicy=o;class s{constructor(e,t,n=[],i=[],s,a={}){this.httpSender=e,this.authTokenProvider=t,this.transformers=n,this.validators=i,this.metrics=s,this.options={maxRetries:a.maxRetries??3,retryDelayMs:a.retryDelayMs??1e3,enableOfflineQueue:a.enableOfflineQueue??!0,maxQueueSize:a.maxQueueSize??1e3,serviceName:a.serviceName??"ingestion_front_end",gracefulDegradation:a.gracefulDegradation??!0,retryStrategy:a.retryStrategy??new r.ExponentialBackoffRetry(a.maxRetries??3,a.retryDelayMs??1e3,6e4,.2),errorPolicy:a.errorPolicy??new o(s,console)}}withOptions(e){return new s(this.httpSender,this.authTokenProvider,this.transformers,this.validators,this.metrics,{...this.options,...e})}withTransformers(...e){return new s(this.httpSender,this.authTokenProvider,[...this.transformers,...e],this.validators,this.metrics,this.options)}withValidators(...e){return new s(this.httpSender,this.authTokenProvider,this.transformers,[...this.validators,...e],this.metrics,this.options)}}t.MintClientConfig=s},63693:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExponentialBackoffRetry=t.ConfigurationError=t.HttpError=t.TransformationError=t.ValidationError=t.AuthenticationError=t.NetworkError=t.MintClientError=void 0;class n extends Error{constructor(e,t,n=!1){super(e),this.code=t,this.recoverable=n,this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}}t.MintClientError=n;t.NetworkError=class extends n{constructor(e,t){super(e,"NETWORK_ERROR",!0),this.originalError=t}};t.AuthenticationError=class extends n{constructor(e){super(e,"AUTH_ERROR",!0)}};class r extends n{constructor(e,t){super(e,"VALIDATION_ERROR",!1),this.field=t}}t.ValidationError=r;class i extends n{constructor(e,t){super(e,"TRANSFORMATION_ERROR",!1),this.transformerName=t}}t.TransformationError=i;class o extends n{constructor(e,t,n){super(e,"HTTP_ERROR",t>=500),this.status=t,this.response=n}}t.HttpError=o;class s extends n{constructor(e){super(e,"CONFIG_ERROR",!1)}}t.ConfigurationError=s;t.ExponentialBackoffRetry=class{constructor(e=3,t=1e3,n=3e4,r=.1){this.maxAttempts=e,this.baseDelayMs=t,this.maxDelayMs=n,this.jitterFactor=r}shouldRetry(e,t){return!(t>=this.maxAttempts)&&(!(e instanceof r)&&(!(e instanceof s)&&(!(e instanceof i)&&!(e instanceof o&&e.status<500))))}getDelayMs(e){const t=this.baseDelayMs*Math.pow(2,e-1),n=t*this.jitterFactor*Math.random();return Math.min(t+n,this.maxDelayMs)}getMaxAttempts(){return this.maxAttempts}}},54551:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CompositeValidator=t.CompositeTransformer=t.BasicEventValidator=t.UserInfoDecorationTransformer=t.SessionDecorationTransformer=t.NoOpMetricsReporter=t.ConsoleMetricsReporter=t.GatewayHttpSender=void 0,t.createGatewayHttpSender=function(e,t="ingestion_front_end",n){return new o({environment:e,serviceName:t,fetchFn:n},n)};const r=n(67813),i=n(63693);class o{constructor(e,t=("undefined"!=typeof self?self.fetch.bind(self):fetch)){this.config=e,this.fetchFn=t,this.gatewayBaseUrls={qa:"https://gateway.qagr.io",preprod:"https://gateway.ppgr.io",prod:"https://gateway.grammarly.com"}}async send(e,t,n,r=!1){const o=this.buildGatewayUrl(n,r);try{const n=await this.fetchFn(o,{method:"POST",headers:t,body:e});let r;if(n.status>=400)try{r=await n.text()}catch(e){console.warn("Failed to read error response body:",e)}return{status:n.status,statusText:n.statusText,headers:this.responseHeadersToRecord(n.headers),body:r}}catch(e){throw new i.NetworkError(`Failed to send HTTP request to ${o}: ${e.message}`,e)}}buildGatewayUrl(e,t){return`${this.gatewayBaseUrls[this.config.environment]}${t?"/ingest-api/anonymous/":"/ingest-api/"}v1/events/${this.config.serviceName}?datasetName=${encodeURIComponent(e)}`}responseHeadersToRecord(e){const t={};return e.forEach(((e,n)=>{t[n]=e})),t}}t.GatewayHttpSender=o;t.ConsoleMetricsReporter=class{constructor(e=console){this.logger=e}recordEvent(e,t,n){this.logger.log(`[METRIC] ${e}`,{tags:t,value:n})}recordLatency(e,t,n){this.logger.log(`[LATENCY] ${e}: ${t}ms`,{tags:n})}recordError(e,t,n){this.logger.error(`[ERROR] ${e}:`,t.message,{tags:n,stack:t.stack})}};t.NoOpMetricsReporter=class{recordEvent(e,t,n){}recordLatency(e,t,n){}recordError(e,t,n){}};t.SessionDecorationTransformer=class{constructor(e,t,n=r.getEventNonce){this.sessionInfo=e,this.containerInfo=t,this.getEventNonceProvider=n}transform(e){const t=this.getEventNonceProvider();return{...e,...this.sessionInfo,...this.containerInfo,...t,event_name:`${this.sessionInfo.client}/${e.event_name}`}}};t.UserInfoDecorationTransformer=class{constructor(e){this.userInfo=e}transform(e){const t=this.userInfo?.()??{};return{...e,user_id:t.user_id??e.user_id,institution_id:t.institution_id??e.institution_id}}updateUserInfo(e){this.userInfo=()=>e}};t.BasicEventValidator=class{validate(e){if(!e.event_name?.trim())throw new i.ValidationError("event_name is required","event_name");if(!/^[a-z][a-zA-Z0-9]*\/([a-zA-Z0-9-]+\/)*[a-zA-Z0-9-]+$/.test(e.event_name.trim()))throw new i.ValidationError(`Invalid event_name "${e.event_name}". Must follow format: <subClient>/<object>[/<action>] where:\n- subClient must be camelCase (start lowercase, no dashes/underscores): webApp, iosApp, chromeExt\n- object/action can use dashes but NO underscores: button-click, page-view, form-submit\n- Examples: webApp/button-click, iosApp/companion/login, chromeExt/install, billing/invoice-fail`,"event_name");if(!e.client_version?.trim())throw new i.ValidationError("client_version is required","client_version");if(!/^\d+\.\d+\.\d+$/.test(e.client_version))throw new i.ValidationError("client_version must follow format: major.minor.patch (e.g., 14.1244.3649324)","client_version")}};t.CompositeTransformer=class{constructor(e){this.transformers=e}async transform(e){let t=e;for(const e of this.transformers)t=await e.transform(t);return t}};t.CompositeValidator=class{constructor(e){this.validators=e}async validate(e){for(const t of this.validators)await t.validate(e)}}},96442:(e,t,n)=>{t.Yq=t.Hd=t.G1=t.Ze=t.fS=void 0;var r=n(58781);Object.defineProperty(t,"fS",{enumerable:!0,get:function(){return r.MintClient}});var i=n(55473);Object.defineProperty(t,"Ze",{enumerable:!0,get:function(){return i.MintClientConfig}});var o=n(63693);var s=n(54551);Object.defineProperty(t,"G1",{enumerable:!0,get:function(){return s.createGatewayHttpSender}}),Object.defineProperty(t,"Hd",{enumerable:!0,get:function(){return s.SessionDecorationTransformer}}),Object.defineProperty(t,"Yq",{enumerable:!0,get:function(){return s.UserInfoDecorationTransformer}})},67813:(e,t,n)=>{var r=n(9780);Object.defineProperty(t,"__esModule",{value:!0}),t.toLong=t.MatchingNotExhaustiveError=void 0,t.assertNever=o,t.getEventNonce=function(){return{client_event_epoch:Date.now(),nonce:Math.round(Math.random()*Math.pow(10,16))}},t.getSdkVersion=function(){try{return Object(function(){var e=new Error("Cannot find module '../package.json'");throw e.code="MODULE_NOT_FOUND",e}())}catch{try{if(void 0!==r&&r.env.npm_package_version)return r.env.npm_package_version}catch{}return"0.0.0-dev"}},t.getEnvironment=function(){if(void 0!==r)return"production";if("undefined"!=typeof self)return"browser";return"unknown"};class i extends Error{constructor(e){super(`Matching not exhaustive: unexpected value ${JSON.stringify(e)}`)}}function o(e){throw new i(e)}t.MatchingNotExhaustiveError=i;t.toLong=(e,t="round")=>{switch(t){case"floor":return Math.floor(e);case"ceil":return Math.ceil(e);case"round":return Math.round(e);default:return o(t)}}},58256:function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return s(t,e),t},c=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},l=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.UphookhubApi=void 0;var u=a(n(61218)),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.configurationGetRaw=function(e,t){return c(this,void 0,void 0,(function(){var n,r,i;return l(this,(function(o){switch(o.label){case 0:if(null==e.uphooks)throw new u.RequiredError("uphooks",'Required parameter "uphooks" was null or undefined when calling configurationGet().');return n={},null!=e.uphooks&&(n.uphooks=e.uphooks),r={},[4,this.request({path:"/configuration",method:"GET",headers:r,query:n},t)];case 1:return i=o.sent(),[2,new u.JSONApiResponse(i)]}}))}))},t.prototype.configurationGet=function(e,t){return c(this,void 0,void 0,(function(){return l(this,(function(n){switch(n.label){case 0:return[4,this.configurationGetRaw(e,t)];case 1:return[4,n.sent().value()];case 2:return[2,n.sent()]}}))}))},t.prototype.eventsPostRaw=function(e,t){return c(this,void 0,void 0,(function(){var n,r,i;return l(this,(function(o){switch(o.label){case 0:if(null==e.eventsPostRequest)throw new u.RequiredError("eventsPostRequest",'Required parameter "eventsPostRequest" was null or undefined when calling eventsPost().');return n={},(r={})["Content-Type"]="application/json",[4,this.request({path:"/events",method:"POST",headers:r,query:n,body:e.eventsPostRequest},t)];case 1:return i=o.sent(),[2,new u.VoidApiResponse(i)]}}))}))},t.prototype.eventsPost=function(e,t){return c(this,void 0,void 0,(function(){return l(this,(function(n){switch(n.label){case 0:return[4,this.eventsPostRaw(e,t)];case 1:return n.sent(),[2]}}))}))},t}(u.BaseAPI);t.UphookhubApi=d},78401:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(58256),t)},75286:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(61218),t),i(n(78401),t),i(n(34093),t)},34093:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurationGet2XXResponseLongFormAssistantAnyOfUpgradeHookVariantEnum=t.ConfigurationGet2XXResponseLongFormAssistantAnyOfUpgradeHookSlotEnum=t.ConfigurationGet2XXResponseLongFormAssistantAnyOfUpgradeHookNameEnum=t.ConfigurationGet2XXResponseLongFormAssistantUpgradeHookVariantEnum=t.ConfigurationGet2XXResponseLongFormAssistantUpgradeHookSlotEnum=t.ConfigurationGet2XXResponseLongFormAssistantUpgradeHookNameEnum=t.ConfigurationGet2XXResponseInlineCardGdocsAnyOf1UpgradeHookVariantEnum=t.ConfigurationGet2XXResponseInlineCardGdocsAnyOf1UpgradeHookSlotEnum=t.ConfigurationGet2XXResponseInlineCardGdocsAnyOf1UpgradeHookNameEnum=t.ConfigurationGet2XXResponseInlineCardGdocsAnyOfUpgradeHookVariantEnum=t.ConfigurationGet2XXResponseInlineCardGdocsAnyOfUpgradeHookSlotEnum=t.ConfigurationGet2XXResponseInlineCardGdocsAnyOfUpgradeHookNameEnum=t.ConfigurationGet2XXResponseInlineCardGdocsUpgradeHookVariantEnum=t.ConfigurationGet2XXResponseInlineCardGdocsUpgradeHookSlotEnum=t.ConfigurationGet2XXResponseInlineCardGdocsUpgradeHookNameEnum=t.ConfigurationGet2XXResponseInlineCardDemoDocUpgradeHookVariantEnum=t.ConfigurationGet2XXResponseInlineCardDemoDocUpgradeHookSlotEnum=t.ConfigurationGet2XXResponseInlineCardDemoDocUpgradeHookNameEnum=t.ConfigurationGet2XXResponseInlineCardAnyOf1UpgradeHookVariantEnum=t.ConfigurationGet2XXResponseInlineCardAnyOf1UpgradeHookSlotEnum=t.ConfigurationGet2XXResponseInlineCardAnyOf1UpgradeHookNameEnum=t.ConfigurationGet2XXResponseInlineCardAnyOfUpgradeHookVariantEnum=t.ConfigurationGet2XXResponseInlineCardAnyOfUpgradeHookSlotEnum=t.ConfigurationGet2XXResponseInlineCardAnyOfUpgradeHookNameEnum=t.ConfigurationGet2XXResponseInlineCardUpgradeHookVariantEnum=t.ConfigurationGet2XXResponseInlineCardUpgradeHookSlotEnum=t.ConfigurationGet2XXResponseInlineCardUpgradeHookNameEnum=t.ConfigurationGet2XXResponseFallbackAnyOfUpgradeHookVariantEnum=t.ConfigurationGet2XXResponseFallbackAnyOfUpgradeHookNameEnum=t.ConfigurationGet2XXResponseFallbackUpgradeHookVariantEnum=t.ConfigurationGet2XXResponseFallbackUpgradeHookSlotEnum=t.ConfigurationGet2XXResponseFallbackUpgradeHookNameEnum=t.ConfigurationGet2XXResponseEmogenieReportUpgradeHookVariantEnum=t.ConfigurationGet2XXResponseEmogenieReportUpgradeHookSlotEnum=t.ConfigurationGet2XXResponseEmogenieReportUpgradeHookNameEnum=t.ConfigurationGet2XXResponseBrowserToolbarUpgradeHookVariantEnum=t.ConfigurationGet2XXResponseBrowserToolbarUpgradeHookSlotEnum=t.ConfigurationGet2XXResponseBrowserToolbarUpgradeHookNameEnum=t.ConfigurationGet2XXResponseAssistantSettingsPopupUpgradeHookVariantEnum=t.ConfigurationGet2XXResponseAssistantSettingsPopupUpgradeHookSlotEnum=t.ConfigurationGet2XXResponseAssistantSettingsPopupUpgradeHookNameEnum=t.ConfigurationGet2XXResponseAiDetectorAgentPanelPaywallUpgradeHookVariantEnum=t.ConfigurationGet2XXResponseAiDetectorAgentPanelPaywallUpgradeHookSlotEnum=t.ConfigurationGet2XXResponseAiDetectorAgentPanelPaywallUpgradeHookNameEnum=t.ConfigurationGet2XXResponseAgentRewriteVBarUpgradeHookVariantEnum=t.ConfigurationGet2XXResponseAgentRewriteVBarUpgradeHookSlotEnum=t.ConfigurationGet2XXResponseAgentRewriteVBarUpgradeHookNameEnum=t.ConfigurationGet2XXResponseAccountPanelUpgradeHookVariantEnum=t.ConfigurationGet2XXResponseAccountPanelUpgradeHookSlotEnum=t.ConfigurationGet2XXResponseAccountPanelUpgradeHookNameEnum=void 0,t.ConfigurationGet2XXResponseSingleCardAssistantAnyOfUpgradeHookSlotEnum=t.ConfigurationGet2XXResponseSingleCardAssistantAnyOfUpgradeHookNameEnum=t.ConfigurationGet2XXResponseSingleCardAssistantUpgradeHookVariantEnum=t.ConfigurationGet2XXResponseSingleCardAssistantUpgradeHookSlotEnum=t.ConfigurationGet2XXResponseSingleCardAssistantUpgradeHookNameEnum=t.ConfigurationGet2XXResponseSidebarAllOfAnyOf9UpgradeHookVariantEnum=t.ConfigurationGet2XXResponseSidebarAllOfAnyOf8UpgradeHookVariantEnum=t.ConfigurationGet2XXResponseSidebarAllOfAnyOf7UpgradeHookVariantEnum=t.ConfigurationGet2XXResponseSidebarAllOfAnyOf6UpgradeHookVariantEnum=t.ConfigurationGet2XXResponseSidebarAllOfAnyOf5UpgradeHookVariantEnum=t.ConfigurationGet2XXResponseSidebarAllOfAnyOf4UpgradeHookVariantEnum=t.ConfigurationGet2XXResponseSidebarAllOfAnyOf3UpgradeHookVariantEnum=t.ConfigurationGet2XXResponseSidebarAllOfAnyOf2UpgradeHookVariantEnum=t.ConfigurationGet2XXResponseSidebarAllOfAnyOf11UpgradeHookVariantEnum=t.ConfigurationGet2XXResponseSidebarAllOfAnyOf10UpgradeHookVariantEnum=t.ConfigurationGet2XXResponseSidebarAllOfAnyOf1UpgradeHookVariantEnum=t.ConfigurationGet2XXResponseSidebarAllOfAnyOfUpgradeHookVariantEnum=t.ConfigurationGet2XXResponseSidebarUpgradeHookVariantEnum=t.ConfigurationGet2XXResponseSidebarUpgradeHookSlotEnum=t.ConfigurationGet2XXResponseSidebarUpgradeHookNameEnum=t.ConfigurationGet2XXResponseSettingsWindowUpgradeHookVariantEnum=t.ConfigurationGet2XXResponseSettingsWindowUpgradeHookSlotEnum=t.ConfigurationGet2XXResponseSettingsWindowUpgradeHookNameEnum=t.ConfigurationGet2XXResponseProofreaderAgentPanelUpgradeHookVariantEnum=t.ConfigurationGet2XXResponseProofreaderAgentPanelUpgradeHookSlotEnum=t.ConfigurationGet2XXResponseProofreaderAgentPanelUpgradeHookNameEnum=t.ConfigurationGet2XXResponsePlagiarismViewUpgradeHookVariantEnum=t.ConfigurationGet2XXResponsePlagiarismViewUpgradeHookSlotEnum=t.ConfigurationGet2XXResponsePlagiarismViewUpgradeHookNameEnum=t.ConfigurationGet2XXResponsePlagiarismAgentPanelPaywallUpgradeHookVariantEnum=t.ConfigurationGet2XXResponsePlagiarismAgentPanelPaywallUpgradeHookSlotEnum=t.ConfigurationGet2XXResponsePlagiarismAgentPanelPaywallUpgradeHookNameEnum=t.ConfigurationGet2XXResponseLongFormAssistantGdocsAnyOf1UpgradeHookVariantEnum=t.ConfigurationGet2XXResponseLongFormAssistantGdocsAnyOf1UpgradeHookSlotEnum=t.ConfigurationGet2XXResponseLongFormAssistantGdocsAnyOf1UpgradeHookNameEnum=t.ConfigurationGet2XXResponseLongFormAssistantGdocsAnyOfUpgradeHookVariantEnum=t.ConfigurationGet2XXResponseLongFormAssistantGdocsAnyOfUpgradeHookSlotEnum=t.ConfigurationGet2XXResponseLongFormAssistantGdocsAnyOfUpgradeHookNameEnum=t.ConfigurationGet2XXResponseLongFormAssistantGdocsUpgradeHookVariantEnum=t.ConfigurationGet2XXResponseLongFormAssistantGdocsUpgradeHookSlotEnum=t.ConfigurationGet2XXResponseLongFormAssistantGdocsUpgradeHookNameEnum=t.ConfigurationGet2XXResponseLongFormAssistantDemoDocUpgradeHookVariantEnum=t.ConfigurationGet2XXResponseLongFormAssistantDemoDocUpgradeHookSlotEnum=t.ConfigurationGet2XXResponseLongFormAssistantDemoDocUpgradeHookNameEnum=t.ConfigurationGet2XXResponseLongFormAssistantAnyOf2UpgradeHookVariantEnum=t.ConfigurationGet2XXResponseLongFormAssistantAnyOf2UpgradeHookSlotEnum=t.ConfigurationGet2XXResponseLongFormAssistantAnyOf2UpgradeHookNameEnum=t.ConfigurationGet2XXResponseLongFormAssistantAnyOf1UpgradeHookVariantEnum=t.ConfigurationGet2XXResponseLongFormAssistantAnyOf1UpgradeHookSlotEnum=t.ConfigurationGet2XXResponseLongFormAssistantAnyOf1UpgradeHookNameEnum=void 0,t.ConfigurationGet2XXResponseVbarSignalingFriendlyUpgradeHookNameEnum=t.ConfigurationGet2XXResponseVbarSignalingFormalUpgradeHookVariantEnum=t.ConfigurationGet2XXResponseVbarSignalingFormalUpgradeHookSlotEnum=t.ConfigurationGet2XXResponseVbarSignalingFormalUpgradeHookNameEnum=t.ConfigurationGet2XXResponseVbarSignalingCustomPromptUpgradeHookVariantEnum=t.ConfigurationGet2XXResponseVbarSignalingCustomPromptUpgradeHookSlotEnum=t.ConfigurationGet2XXResponseVbarSignalingCustomPromptUpgradeHookNameEnum=t.ConfigurationGet2XXResponseVbarSelectionShortenUpgradeHookVariantEnum=t.ConfigurationGet2XXResponseVbarSelectionShortenUpgradeHookSlotEnum=t.ConfigurationGet2XXResponseVbarSelectionShortenUpgradeHookNameEnum=t.ConfigurationGet2XXResponseVbarSelectionRephraseUpgradeHookVariantEnum=t.ConfigurationGet2XXResponseVbarSelectionRephraseUpgradeHookSlotEnum=t.ConfigurationGet2XXResponseVbarSelectionRephraseUpgradeHookNameEnum=t.ConfigurationGet2XXResponseVbarSelectionImproveUpgradeHookVariantEnum=t.ConfigurationGet2XXResponseVbarSelectionImproveUpgradeHookSlotEnum=t.ConfigurationGet2XXResponseVbarSelectionImproveUpgradeHookNameEnum=t.ConfigurationGet2XXResponseVbarSelectionFriendlyUpgradeHookVariantEnum=t.ConfigurationGet2XXResponseVbarSelectionFriendlyUpgradeHookSlotEnum=t.ConfigurationGet2XXResponseVbarSelectionFriendlyUpgradeHookNameEnum=t.ConfigurationGet2XXResponseVbarSelectionFormalUpgradeHookVariantEnum=t.ConfigurationGet2XXResponseVbarSelectionFormalUpgradeHookSlotEnum=t.ConfigurationGet2XXResponseVbarSelectionFormalUpgradeHookNameEnum=t.ConfigurationGet2XXResponseVbarSelectionCustomPromptUpgradeHookVariantEnum=t.ConfigurationGet2XXResponseVbarSelectionCustomPromptUpgradeHookSlotEnum=t.ConfigurationGet2XXResponseVbarSelectionCustomPromptUpgradeHookNameEnum=t.ConfigurationGet2XXResponseVbarIdleShortenUpgradeHookVariantEnum=t.ConfigurationGet2XXResponseVbarIdleShortenUpgradeHookSlotEnum=t.ConfigurationGet2XXResponseVbarIdleShortenUpgradeHookNameEnum=t.ConfigurationGet2XXResponseVbarIdleRephraseUpgradeHookVariantEnum=t.ConfigurationGet2XXResponseVbarIdleRephraseUpgradeHookSlotEnum=t.ConfigurationGet2XXResponseVbarIdleRephraseUpgradeHookNameEnum=t.ConfigurationGet2XXResponseVbarIdleImproveUpgradeHookVariantEnum=t.ConfigurationGet2XXResponseVbarIdleImproveUpgradeHookSlotEnum=t.ConfigurationGet2XXResponseVbarIdleImproveUpgradeHookNameEnum=t.ConfigurationGet2XXResponseVbarIdleFriendlyUpgradeHookVariantEnum=t.ConfigurationGet2XXResponseVbarIdleFriendlyUpgradeHookSlotEnum=t.ConfigurationGet2XXResponseVbarIdleFriendlyUpgradeHookNameEnum=t.ConfigurationGet2XXResponseVbarIdleFormalUpgradeHookVariantEnum=t.ConfigurationGet2XXResponseVbarIdleFormalUpgradeHookSlotEnum=t.ConfigurationGet2XXResponseVbarIdleFormalUpgradeHookNameEnum=t.ConfigurationGet2XXResponseVbarIdleCustomPromptUpgradeHookVariantEnum=t.ConfigurationGet2XXResponseVbarIdleCustomPromptUpgradeHookSlotEnum=t.ConfigurationGet2XXResponseVbarIdleCustomPromptUpgradeHookNameEnum=t.ConfigurationGet2XXResponseTitleBarUpgradeHookVariantEnum=t.ConfigurationGet2XXResponseTitleBarUpgradeHookSlotEnum=t.ConfigurationGet2XXResponseTitleBarUpgradeHookNameEnum=t.ConfigurationGet2XXResponseSingleCardAssistantAnyOf1UpgradeHookVariantEnum=t.ConfigurationGet2XXResponseSingleCardAssistantAnyOf1UpgradeHookSlotEnum=t.ConfigurationGet2XXResponseSingleCardAssistantAnyOf1UpgradeHookNameEnum=t.ConfigurationGet2XXResponseSingleCardAssistantAnyOfUpgradeHookVariantEnum=void 0,t.EventsPostRequestUphookAllOfAnyOfAnyOf19UpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf19UpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf18UpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf18UpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf17UpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf17UpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf16UpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf16UpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf15UpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf15UpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf14UpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf14UpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf13UpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf13UpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf12UpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf12UpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf11AnyOf1UpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf11AnyOf1UpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf11AnyOfUpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf11AnyOfUpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf11UpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf11UpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf10AnyOf2UpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf10AnyOf2UpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf10AnyOf1UpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf10AnyOf1UpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf10AnyOfUpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf10AnyOfUpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf10UpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf10UpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf1UpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf1UpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOfUpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOfUpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOf1UpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfUpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfUpgradeHookNameEnum=t.EventsPostRequestUphookUpgradeHookVariantEnum=t.EventsPostRequestUphookUpgradeHookNameEnum=t.ConfigurationGet2XXResponseVbarSignalingShortenUpgradeHookVariantEnum=t.ConfigurationGet2XXResponseVbarSignalingShortenUpgradeHookSlotEnum=t.ConfigurationGet2XXResponseVbarSignalingShortenUpgradeHookNameEnum=t.ConfigurationGet2XXResponseVbarSignalingRephraseUpgradeHookVariantEnum=t.ConfigurationGet2XXResponseVbarSignalingRephraseUpgradeHookSlotEnum=t.ConfigurationGet2XXResponseVbarSignalingRephraseUpgradeHookNameEnum=t.ConfigurationGet2XXResponseVbarSignalingImproveUpgradeHookVariantEnum=t.ConfigurationGet2XXResponseVbarSignalingImproveUpgradeHookSlotEnum=t.ConfigurationGet2XXResponseVbarSignalingImproveUpgradeHookNameEnum=t.ConfigurationGet2XXResponseVbarSignalingFriendlyUpgradeHookVariantEnum=t.ConfigurationGet2XXResponseVbarSignalingFriendlyUpgradeHookSlotEnum=void 0,t.EventsPostRequestUphookAllOfAnyOfAnyOf5UpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf5UpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf4UpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf4UpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf3AnyOf1UpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf3AnyOf1UpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf3AnyOfUpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf3AnyOfUpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf36UpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf36UpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf35UpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf35UpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf34UpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf34UpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf33UpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf33UpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf32UpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf32UpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf31UpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf31UpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf30UpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf30UpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf3UpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf3UpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf2AnyOf1UpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf2AnyOf1UpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf2AnyOfUpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf2AnyOfUpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf29UpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf29UpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf28UpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf28UpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf27UpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf27UpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf26UpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf26UpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf25UpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf25UpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf24UpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf24UpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf23UpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf23UpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf22UpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf22UpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf21UpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf21UpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf20UpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf20UpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf2UpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf2UpgradeHookNameEnum=void 0,t.EventsPostRequestUphookAllOfAnyOfAnyOf9UpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf9UpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf8UpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf8UpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf7UpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf7UpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf6UpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf6UpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf5AnyOf1UpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf5AnyOf1UpgradeHookNameEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf5AnyOfUpgradeHookSlotEnum=t.EventsPostRequestUphookAllOfAnyOfAnyOf5AnyOfUpgradeHookNameEnum=void 0,t.ConfigurationGet2XXResponseAccountPanelUpgradeHookNameEnum={Badge:"badge"},t.ConfigurationGet2XXResponseAccountPanelUpgradeHookSlotEnum={AccountPanel:"accountPanel"},t.ConfigurationGet2XXResponseAccountPanelUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseAgentRewriteVBarUpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.ConfigurationGet2XXResponseAgentRewriteVBarUpgradeHookSlotEnum={AgentRewriteVBar:"agentRewriteVBar"},t.ConfigurationGet2XXResponseAgentRewriteVBarUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseAiDetectorAgentPanelPaywallUpgradeHookNameEnum={DetectAiText:"detectAiText"},t.ConfigurationGet2XXResponseAiDetectorAgentPanelPaywallUpgradeHookSlotEnum={AiDetectorAgentPanelPaywall:"aiDetectorAgentPanelPaywall"},t.ConfigurationGet2XXResponseAiDetectorAgentPanelPaywallUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseAssistantSettingsPopupUpgradeHookNameEnum={ExtensionSettings:"extensionSettings"},t.ConfigurationGet2XXResponseAssistantSettingsPopupUpgradeHookSlotEnum={AssistantSettingsPopup:"assistantSettingsPopup"},t.ConfigurationGet2XXResponseAssistantSettingsPopupUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseBrowserToolbarUpgradeHookNameEnum={ExtensionSettings:"extensionSettings"},t.ConfigurationGet2XXResponseBrowserToolbarUpgradeHookSlotEnum={BrowserToolbar:"browserToolbar"},t.ConfigurationGet2XXResponseBrowserToolbarUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseEmogenieReportUpgradeHookNameEnum={ToneDetector:"toneDetector"},t.ConfigurationGet2XXResponseEmogenieReportUpgradeHookSlotEnum={EmogenieReport:"emogenieReport"},t.ConfigurationGet2XXResponseEmogenieReportUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseFallbackUpgradeHookNameEnum={ProofreaderAdvancedSuggestions:"proofreaderAdvancedSuggestions"},t.ConfigurationGet2XXResponseFallbackUpgradeHookSlotEnum={ProofreaderAgentPanel:"proofreaderAgentPanel"},t.ConfigurationGet2XXResponseFallbackUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseFallbackAnyOfUpgradeHookNameEnum={Fallback:"fallback"},t.ConfigurationGet2XXResponseFallbackAnyOfUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseInlineCardUpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.ConfigurationGet2XXResponseInlineCardUpgradeHookSlotEnum={InlineCard:"inlineCard"},t.ConfigurationGet2XXResponseInlineCardUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseInlineCardAnyOfUpgradeHookNameEnum={AdvancedIssues:"advancedIssues"},t.ConfigurationGet2XXResponseInlineCardAnyOfUpgradeHookSlotEnum={InlineCard:"inlineCard"},t.ConfigurationGet2XXResponseInlineCardAnyOfUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseInlineCardAnyOf1UpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.ConfigurationGet2XXResponseInlineCardAnyOf1UpgradeHookSlotEnum={InlineCard:"inlineCard"},t.ConfigurationGet2XXResponseInlineCardAnyOf1UpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseInlineCardDemoDocUpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.ConfigurationGet2XXResponseInlineCardDemoDocUpgradeHookSlotEnum={InlineCardDemoDoc:"inlineCardDemoDoc"},t.ConfigurationGet2XXResponseInlineCardDemoDocUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseInlineCardGdocsUpgradeHookNameEnum={AdvancedIssues:"advancedIssues"},t.ConfigurationGet2XXResponseInlineCardGdocsUpgradeHookSlotEnum={InlineCardGdocs:"inlineCardGdocs"},t.ConfigurationGet2XXResponseInlineCardGdocsUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseInlineCardGdocsAnyOfUpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.ConfigurationGet2XXResponseInlineCardGdocsAnyOfUpgradeHookSlotEnum={InlineCardGdocs:"inlineCardGdocs"},t.ConfigurationGet2XXResponseInlineCardGdocsAnyOfUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseInlineCardGdocsAnyOf1UpgradeHookNameEnum={AdvancedIssues:"advancedIssues"},t.ConfigurationGet2XXResponseInlineCardGdocsAnyOf1UpgradeHookSlotEnum={InlineCardGdocs:"inlineCardGdocs"},t.ConfigurationGet2XXResponseInlineCardGdocsAnyOf1UpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseLongFormAssistantUpgradeHookNameEnum={AdvancedIssues:"advancedIssues"},t.ConfigurationGet2XXResponseLongFormAssistantUpgradeHookSlotEnum={LongFormAssistantDemoDoc:"longFormAssistantDemoDoc"},t.ConfigurationGet2XXResponseLongFormAssistantUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseLongFormAssistantAnyOfUpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.ConfigurationGet2XXResponseLongFormAssistantAnyOfUpgradeHookSlotEnum={LongFormAssistant:"longFormAssistant"},t.ConfigurationGet2XXResponseLongFormAssistantAnyOfUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseLongFormAssistantAnyOf1UpgradeHookNameEnum={AdvancedIssues:"advancedIssues"},t.ConfigurationGet2XXResponseLongFormAssistantAnyOf1UpgradeHookSlotEnum={LongFormAssistant:"longFormAssistant"},t.ConfigurationGet2XXResponseLongFormAssistantAnyOf1UpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseLongFormAssistantAnyOf2UpgradeHookNameEnum={AdvancedIssues:"advancedIssues"},t.ConfigurationGet2XXResponseLongFormAssistantAnyOf2UpgradeHookSlotEnum={LongFormAssistantDemoDoc:"longFormAssistantDemoDoc"},t.ConfigurationGet2XXResponseLongFormAssistantAnyOf2UpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseLongFormAssistantDemoDocUpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.ConfigurationGet2XXResponseLongFormAssistantDemoDocUpgradeHookSlotEnum={LongFormAssistantDemoDoc:"longFormAssistantDemoDoc"},t.ConfigurationGet2XXResponseLongFormAssistantDemoDocUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseLongFormAssistantGdocsUpgradeHookNameEnum={AdvancedIssues:"advancedIssues"},t.ConfigurationGet2XXResponseLongFormAssistantGdocsUpgradeHookSlotEnum={LongFormAssistantGdocs:"longFormAssistantGdocs"},t.ConfigurationGet2XXResponseLongFormAssistantGdocsUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseLongFormAssistantGdocsAnyOfUpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.ConfigurationGet2XXResponseLongFormAssistantGdocsAnyOfUpgradeHookSlotEnum={LongFormAssistantGdocs:"longFormAssistantGdocs"},t.ConfigurationGet2XXResponseLongFormAssistantGdocsAnyOfUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseLongFormAssistantGdocsAnyOf1UpgradeHookNameEnum={AdvancedIssues:"advancedIssues"},t.ConfigurationGet2XXResponseLongFormAssistantGdocsAnyOf1UpgradeHookSlotEnum={LongFormAssistantGdocs:"longFormAssistantGdocs"},t.ConfigurationGet2XXResponseLongFormAssistantGdocsAnyOf1UpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponsePlagiarismAgentPanelPaywallUpgradeHookNameEnum={PlagiarismPaywall:"plagiarismPaywall"},t.ConfigurationGet2XXResponsePlagiarismAgentPanelPaywallUpgradeHookSlotEnum={PlagiarismAgentPanelPaywall:"plagiarismAgentPanelPaywall"},t.ConfigurationGet2XXResponsePlagiarismAgentPanelPaywallUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponsePlagiarismViewUpgradeHookNameEnum={Plagiarism:"plagiarism"},t.ConfigurationGet2XXResponsePlagiarismViewUpgradeHookSlotEnum={PlagiarismView:"plagiarismView"},t.ConfigurationGet2XXResponsePlagiarismViewUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseProofreaderAgentPanelUpgradeHookNameEnum={ProofreaderAdvancedSuggestions:"proofreaderAdvancedSuggestions"},t.ConfigurationGet2XXResponseProofreaderAgentPanelUpgradeHookSlotEnum={ProofreaderAgentPanel:"proofreaderAgentPanel"},t.ConfigurationGet2XXResponseProofreaderAgentPanelUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseSettingsWindowUpgradeHookNameEnum={ExtensionSettings:"extensionSettings"},t.ConfigurationGet2XXResponseSettingsWindowUpgradeHookSlotEnum={SettingsWindow:"settingsWindow"},t.ConfigurationGet2XXResponseSettingsWindowUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseSidebarUpgradeHookNameEnum={Navigation:"navigation"},t.ConfigurationGet2XXResponseSidebarUpgradeHookSlotEnum={Sidebar:"sidebar"},t.ConfigurationGet2XXResponseSidebarUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseSidebarAllOfAnyOfUpgradeHookVariantEnum={SageScore:"sageScore"},t.ConfigurationGet2XXResponseSidebarAllOfAnyOf1UpgradeHookVariantEnum={JoinInstitution:"joinInstitution"},t.ConfigurationGet2XXResponseSidebarAllOfAnyOf10UpgradeHookVariantEnum={WinBack7DayPremium:"winBack7DayPremium"},t.ConfigurationGet2XXResponseSidebarAllOfAnyOf11UpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseSidebarAllOfAnyOf2UpgradeHookVariantEnum={DiscountPro15:"discountPro15"},t.ConfigurationGet2XXResponseSidebarAllOfAnyOf3UpgradeHookVariantEnum={DiscountPro30:"discountPro30"},t.ConfigurationGet2XXResponseSidebarAllOfAnyOf4UpgradeHookVariantEnum={DiscountPro50:"discountPro50"},t.ConfigurationGet2XXResponseSidebarAllOfAnyOf5UpgradeHookVariantEnum={ProFreeTrialQ12025:"proFreeTrialQ12025"},t.ConfigurationGet2XXResponseSidebarAllOfAnyOf6UpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseSidebarAllOfAnyOf7UpgradeHookVariantEnum={DiscountPro:"discountPro"},t.ConfigurationGet2XXResponseSidebarAllOfAnyOf8UpgradeHookVariantEnum={Pro:"pro"},t.ConfigurationGet2XXResponseSidebarAllOfAnyOf9UpgradeHookVariantEnum={WinBack7DayPro:"winBack7DayPro"},t.ConfigurationGet2XXResponseSingleCardAssistantUpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.ConfigurationGet2XXResponseSingleCardAssistantUpgradeHookSlotEnum={SingleCardAssistant:"singleCardAssistant"},t.ConfigurationGet2XXResponseSingleCardAssistantUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseSingleCardAssistantAnyOfUpgradeHookNameEnum={AdvancedIssues:"advancedIssues"},t.ConfigurationGet2XXResponseSingleCardAssistantAnyOfUpgradeHookSlotEnum={SingleCardAssistant:"singleCardAssistant"},t.ConfigurationGet2XXResponseSingleCardAssistantAnyOfUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseSingleCardAssistantAnyOf1UpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.ConfigurationGet2XXResponseSingleCardAssistantAnyOf1UpgradeHookSlotEnum={SingleCardAssistant:"singleCardAssistant"},t.ConfigurationGet2XXResponseSingleCardAssistantAnyOf1UpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseTitleBarUpgradeHookNameEnum={Badge:"badge"},t.ConfigurationGet2XXResponseTitleBarUpgradeHookSlotEnum={TitleBar:"titleBar"},t.ConfigurationGet2XXResponseTitleBarUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseVbarIdleCustomPromptUpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.ConfigurationGet2XXResponseVbarIdleCustomPromptUpgradeHookSlotEnum={VbarIdleCustomPrompt:"vbarIdleCustomPrompt"},t.ConfigurationGet2XXResponseVbarIdleCustomPromptUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseVbarIdleFormalUpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.ConfigurationGet2XXResponseVbarIdleFormalUpgradeHookSlotEnum={VbarIdleFormal:"vbarIdleFormal"},t.ConfigurationGet2XXResponseVbarIdleFormalUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseVbarIdleFriendlyUpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.ConfigurationGet2XXResponseVbarIdleFriendlyUpgradeHookSlotEnum={VbarIdleFriendly:"vbarIdleFriendly"},t.ConfigurationGet2XXResponseVbarIdleFriendlyUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseVbarIdleImproveUpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.ConfigurationGet2XXResponseVbarIdleImproveUpgradeHookSlotEnum={VbarIdleImprove:"vbarIdleImprove"},t.ConfigurationGet2XXResponseVbarIdleImproveUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseVbarIdleRephraseUpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.ConfigurationGet2XXResponseVbarIdleRephraseUpgradeHookSlotEnum={VbarIdleRephrase:"vbarIdleRephrase"},t.ConfigurationGet2XXResponseVbarIdleRephraseUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseVbarIdleShortenUpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.ConfigurationGet2XXResponseVbarIdleShortenUpgradeHookSlotEnum={VbarIdleShorten:"vbarIdleShorten"},t.ConfigurationGet2XXResponseVbarIdleShortenUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseVbarSelectionCustomPromptUpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.ConfigurationGet2XXResponseVbarSelectionCustomPromptUpgradeHookSlotEnum={VbarSelectionCustomPrompt:"vbarSelectionCustomPrompt"},t.ConfigurationGet2XXResponseVbarSelectionCustomPromptUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseVbarSelectionFormalUpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.ConfigurationGet2XXResponseVbarSelectionFormalUpgradeHookSlotEnum={VbarSelectionFormal:"vbarSelectionFormal"},t.ConfigurationGet2XXResponseVbarSelectionFormalUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseVbarSelectionFriendlyUpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.ConfigurationGet2XXResponseVbarSelectionFriendlyUpgradeHookSlotEnum={VbarSelectionFriendly:"vbarSelectionFriendly"},t.ConfigurationGet2XXResponseVbarSelectionFriendlyUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseVbarSelectionImproveUpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.ConfigurationGet2XXResponseVbarSelectionImproveUpgradeHookSlotEnum={VbarSelectionImprove:"vbarSelectionImprove"},t.ConfigurationGet2XXResponseVbarSelectionImproveUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseVbarSelectionRephraseUpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.ConfigurationGet2XXResponseVbarSelectionRephraseUpgradeHookSlotEnum={VbarSelectionRephrase:"vbarSelectionRephrase"},t.ConfigurationGet2XXResponseVbarSelectionRephraseUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseVbarSelectionShortenUpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.ConfigurationGet2XXResponseVbarSelectionShortenUpgradeHookSlotEnum={VbarSelectionShorten:"vbarSelectionShorten"},t.ConfigurationGet2XXResponseVbarSelectionShortenUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseVbarSignalingCustomPromptUpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.ConfigurationGet2XXResponseVbarSignalingCustomPromptUpgradeHookSlotEnum={VbarSignalingCustomPrompt:"vbarSignalingCustomPrompt"},t.ConfigurationGet2XXResponseVbarSignalingCustomPromptUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseVbarSignalingFormalUpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.ConfigurationGet2XXResponseVbarSignalingFormalUpgradeHookSlotEnum={VbarSignalingFormal:"vbarSignalingFormal"},t.ConfigurationGet2XXResponseVbarSignalingFormalUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseVbarSignalingFriendlyUpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.ConfigurationGet2XXResponseVbarSignalingFriendlyUpgradeHookSlotEnum={VbarSignalingFriendly:"vbarSignalingFriendly"},t.ConfigurationGet2XXResponseVbarSignalingFriendlyUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseVbarSignalingImproveUpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.ConfigurationGet2XXResponseVbarSignalingImproveUpgradeHookSlotEnum={VbarSignalingImprove:"vbarSignalingImprove"},t.ConfigurationGet2XXResponseVbarSignalingImproveUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseVbarSignalingRephraseUpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.ConfigurationGet2XXResponseVbarSignalingRephraseUpgradeHookSlotEnum={VbarSignalingRephrase:"vbarSignalingRephrase"},t.ConfigurationGet2XXResponseVbarSignalingRephraseUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.ConfigurationGet2XXResponseVbarSignalingShortenUpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.ConfigurationGet2XXResponseVbarSignalingShortenUpgradeHookSlotEnum={VbarSignalingShorten:"vbarSignalingShorten"},t.ConfigurationGet2XXResponseVbarSignalingShortenUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.EventsPostRequestUphookUpgradeHookNameEnum={Fallback:"fallback"},t.EventsPostRequestUphookUpgradeHookVariantEnum={PremiumTrial:"premiumTrial"},t.EventsPostRequestUphookAllOfAnyOfUpgradeHookNameEnum={ProofreaderAdvancedSuggestions:"proofreaderAdvancedSuggestions"},t.EventsPostRequestUphookAllOfAnyOfUpgradeHookSlotEnum={ProofreaderAgentPanel:"proofreaderAgentPanel"},t.EventsPostRequestUphookAllOfAnyOf1UpgradeHookNameEnum={Fallback:"fallback"},t.EventsPostRequestUphookAllOfAnyOfAnyOfUpgradeHookNameEnum={Navigation:"navigation"},t.EventsPostRequestUphookAllOfAnyOfAnyOfUpgradeHookSlotEnum={Sidebar:"sidebar"},t.EventsPostRequestUphookAllOfAnyOfAnyOf1UpgradeHookNameEnum={ExtensionSettings:"extensionSettings"},t.EventsPostRequestUphookAllOfAnyOfAnyOf1UpgradeHookSlotEnum={SettingsWindow:"settingsWindow"},t.EventsPostRequestUphookAllOfAnyOfAnyOf10UpgradeHookNameEnum={AdvancedIssues:"advancedIssues"},t.EventsPostRequestUphookAllOfAnyOfAnyOf10UpgradeHookSlotEnum={LongFormAssistantDemoDoc:"longFormAssistantDemoDoc"},t.EventsPostRequestUphookAllOfAnyOfAnyOf10AnyOfUpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.EventsPostRequestUphookAllOfAnyOfAnyOf10AnyOfUpgradeHookSlotEnum={LongFormAssistant:"longFormAssistant"},t.EventsPostRequestUphookAllOfAnyOfAnyOf10AnyOf1UpgradeHookNameEnum={AdvancedIssues:"advancedIssues"},t.EventsPostRequestUphookAllOfAnyOfAnyOf10AnyOf1UpgradeHookSlotEnum={LongFormAssistant:"longFormAssistant"},t.EventsPostRequestUphookAllOfAnyOfAnyOf10AnyOf2UpgradeHookNameEnum={AdvancedIssues:"advancedIssues"},t.EventsPostRequestUphookAllOfAnyOfAnyOf10AnyOf2UpgradeHookSlotEnum={LongFormAssistantDemoDoc:"longFormAssistantDemoDoc"},t.EventsPostRequestUphookAllOfAnyOfAnyOf11UpgradeHookNameEnum={AdvancedIssues:"advancedIssues"},t.EventsPostRequestUphookAllOfAnyOfAnyOf11UpgradeHookSlotEnum={LongFormAssistantGdocs:"longFormAssistantGdocs"},t.EventsPostRequestUphookAllOfAnyOfAnyOf11AnyOfUpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.EventsPostRequestUphookAllOfAnyOfAnyOf11AnyOfUpgradeHookSlotEnum={LongFormAssistantGdocs:"longFormAssistantGdocs"},t.EventsPostRequestUphookAllOfAnyOfAnyOf11AnyOf1UpgradeHookNameEnum={AdvancedIssues:"advancedIssues"},t.EventsPostRequestUphookAllOfAnyOfAnyOf11AnyOf1UpgradeHookSlotEnum={LongFormAssistantGdocs:"longFormAssistantGdocs"},t.EventsPostRequestUphookAllOfAnyOfAnyOf12UpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.EventsPostRequestUphookAllOfAnyOfAnyOf12UpgradeHookSlotEnum={LongFormAssistantDemoDoc:"longFormAssistantDemoDoc"},t.EventsPostRequestUphookAllOfAnyOfAnyOf13UpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.EventsPostRequestUphookAllOfAnyOfAnyOf13UpgradeHookSlotEnum={VbarIdleFormal:"vbarIdleFormal"},t.EventsPostRequestUphookAllOfAnyOfAnyOf14UpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.EventsPostRequestUphookAllOfAnyOfAnyOf14UpgradeHookSlotEnum={VbarIdleFriendly:"vbarIdleFriendly"},t.EventsPostRequestUphookAllOfAnyOfAnyOf15UpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.EventsPostRequestUphookAllOfAnyOfAnyOf15UpgradeHookSlotEnum={VbarIdleImprove:"vbarIdleImprove"},t.EventsPostRequestUphookAllOfAnyOfAnyOf16UpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.EventsPostRequestUphookAllOfAnyOfAnyOf16UpgradeHookSlotEnum={VbarIdleRephrase:"vbarIdleRephrase"},t.EventsPostRequestUphookAllOfAnyOfAnyOf17UpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.EventsPostRequestUphookAllOfAnyOfAnyOf17UpgradeHookSlotEnum={VbarIdleShorten:"vbarIdleShorten"},t.EventsPostRequestUphookAllOfAnyOfAnyOf18UpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.EventsPostRequestUphookAllOfAnyOfAnyOf18UpgradeHookSlotEnum={VbarIdleCustomPrompt:"vbarIdleCustomPrompt"},t.EventsPostRequestUphookAllOfAnyOfAnyOf19UpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.EventsPostRequestUphookAllOfAnyOfAnyOf19UpgradeHookSlotEnum={VbarSelectionFormal:"vbarSelectionFormal"},t.EventsPostRequestUphookAllOfAnyOfAnyOf2UpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.EventsPostRequestUphookAllOfAnyOfAnyOf2UpgradeHookSlotEnum={InlineCard:"inlineCard"},t.EventsPostRequestUphookAllOfAnyOfAnyOf20UpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.EventsPostRequestUphookAllOfAnyOfAnyOf20UpgradeHookSlotEnum={VbarSelectionFriendly:"vbarSelectionFriendly"},t.EventsPostRequestUphookAllOfAnyOfAnyOf21UpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.EventsPostRequestUphookAllOfAnyOfAnyOf21UpgradeHookSlotEnum={VbarSelectionImprove:"vbarSelectionImprove"},t.EventsPostRequestUphookAllOfAnyOfAnyOf22UpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.EventsPostRequestUphookAllOfAnyOfAnyOf22UpgradeHookSlotEnum={VbarSelectionRephrase:"vbarSelectionRephrase"},t.EventsPostRequestUphookAllOfAnyOfAnyOf23UpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.EventsPostRequestUphookAllOfAnyOfAnyOf23UpgradeHookSlotEnum={VbarSelectionShorten:"vbarSelectionShorten"},t.EventsPostRequestUphookAllOfAnyOfAnyOf24UpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.EventsPostRequestUphookAllOfAnyOfAnyOf24UpgradeHookSlotEnum={VbarSelectionCustomPrompt:"vbarSelectionCustomPrompt"},t.EventsPostRequestUphookAllOfAnyOfAnyOf25UpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.EventsPostRequestUphookAllOfAnyOfAnyOf25UpgradeHookSlotEnum={VbarSignalingFormal:"vbarSignalingFormal"},t.EventsPostRequestUphookAllOfAnyOfAnyOf26UpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.EventsPostRequestUphookAllOfAnyOfAnyOf26UpgradeHookSlotEnum={VbarSignalingFriendly:"vbarSignalingFriendly"},t.EventsPostRequestUphookAllOfAnyOfAnyOf27UpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.EventsPostRequestUphookAllOfAnyOfAnyOf27UpgradeHookSlotEnum={VbarSignalingImprove:"vbarSignalingImprove"},t.EventsPostRequestUphookAllOfAnyOfAnyOf28UpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.EventsPostRequestUphookAllOfAnyOfAnyOf28UpgradeHookSlotEnum={VbarSignalingRephrase:"vbarSignalingRephrase"},t.EventsPostRequestUphookAllOfAnyOfAnyOf29UpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.EventsPostRequestUphookAllOfAnyOfAnyOf29UpgradeHookSlotEnum={VbarSignalingShorten:"vbarSignalingShorten"},t.EventsPostRequestUphookAllOfAnyOfAnyOf2AnyOfUpgradeHookNameEnum={AdvancedIssues:"advancedIssues"},t.EventsPostRequestUphookAllOfAnyOfAnyOf2AnyOfUpgradeHookSlotEnum={InlineCard:"inlineCard"},t.EventsPostRequestUphookAllOfAnyOfAnyOf2AnyOf1UpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.EventsPostRequestUphookAllOfAnyOfAnyOf2AnyOf1UpgradeHookSlotEnum={InlineCard:"inlineCard"},t.EventsPostRequestUphookAllOfAnyOfAnyOf3UpgradeHookNameEnum={AdvancedIssues:"advancedIssues"},t.EventsPostRequestUphookAllOfAnyOfAnyOf3UpgradeHookSlotEnum={InlineCardGdocs:"inlineCardGdocs"},t.EventsPostRequestUphookAllOfAnyOfAnyOf30UpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.EventsPostRequestUphookAllOfAnyOfAnyOf30UpgradeHookSlotEnum={VbarSignalingCustomPrompt:"vbarSignalingCustomPrompt"},t.EventsPostRequestUphookAllOfAnyOfAnyOf31UpgradeHookNameEnum={Badge:"badge"},t.EventsPostRequestUphookAllOfAnyOfAnyOf31UpgradeHookSlotEnum={TitleBar:"titleBar"},t.EventsPostRequestUphookAllOfAnyOfAnyOf32UpgradeHookNameEnum={Badge:"badge"},t.EventsPostRequestUphookAllOfAnyOfAnyOf32UpgradeHookSlotEnum={AccountPanel:"accountPanel"},t.EventsPostRequestUphookAllOfAnyOfAnyOf33UpgradeHookNameEnum={PlagiarismPaywall:"plagiarismPaywall"},t.EventsPostRequestUphookAllOfAnyOfAnyOf33UpgradeHookSlotEnum={PlagiarismAgentPanelPaywall:"plagiarismAgentPanelPaywall"},t.EventsPostRequestUphookAllOfAnyOfAnyOf34UpgradeHookNameEnum={DetectAiText:"detectAiText"},t.EventsPostRequestUphookAllOfAnyOfAnyOf34UpgradeHookSlotEnum={AiDetectorAgentPanelPaywall:"aiDetectorAgentPanelPaywall"},t.EventsPostRequestUphookAllOfAnyOfAnyOf35UpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.EventsPostRequestUphookAllOfAnyOfAnyOf35UpgradeHookSlotEnum={AgentRewriteVBar:"agentRewriteVBar"},t.EventsPostRequestUphookAllOfAnyOfAnyOf36UpgradeHookNameEnum={ProofreaderAdvancedSuggestions:"proofreaderAdvancedSuggestions"},t.EventsPostRequestUphookAllOfAnyOfAnyOf36UpgradeHookSlotEnum={ProofreaderAgentPanel:"proofreaderAgentPanel"},t.EventsPostRequestUphookAllOfAnyOfAnyOf3AnyOfUpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.EventsPostRequestUphookAllOfAnyOfAnyOf3AnyOfUpgradeHookSlotEnum={InlineCardGdocs:"inlineCardGdocs"},t.EventsPostRequestUphookAllOfAnyOfAnyOf3AnyOf1UpgradeHookNameEnum={AdvancedIssues:"advancedIssues"},t.EventsPostRequestUphookAllOfAnyOfAnyOf3AnyOf1UpgradeHookSlotEnum={InlineCardGdocs:"inlineCardGdocs"},t.EventsPostRequestUphookAllOfAnyOfAnyOf4UpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.EventsPostRequestUphookAllOfAnyOfAnyOf4UpgradeHookSlotEnum={InlineCardDemoDoc:"inlineCardDemoDoc"},t.EventsPostRequestUphookAllOfAnyOfAnyOf5UpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.EventsPostRequestUphookAllOfAnyOfAnyOf5UpgradeHookSlotEnum={SingleCardAssistant:"singleCardAssistant"},t.EventsPostRequestUphookAllOfAnyOfAnyOf5AnyOfUpgradeHookNameEnum={AdvancedIssues:"advancedIssues"},t.EventsPostRequestUphookAllOfAnyOfAnyOf5AnyOfUpgradeHookSlotEnum={SingleCardAssistant:"singleCardAssistant"},t.EventsPostRequestUphookAllOfAnyOfAnyOf5AnyOf1UpgradeHookNameEnum={BlurredSuggestion:"blurredSuggestion"},t.EventsPostRequestUphookAllOfAnyOfAnyOf5AnyOf1UpgradeHookSlotEnum={SingleCardAssistant:"singleCardAssistant"},t.EventsPostRequestUphookAllOfAnyOfAnyOf6UpgradeHookNameEnum={ExtensionSettings:"extensionSettings"},t.EventsPostRequestUphookAllOfAnyOfAnyOf6UpgradeHookSlotEnum={BrowserToolbar:"browserToolbar"},t.EventsPostRequestUphookAllOfAnyOfAnyOf7UpgradeHookNameEnum={ExtensionSettings:"extensionSettings"},t.EventsPostRequestUphookAllOfAnyOfAnyOf7UpgradeHookSlotEnum={AssistantSettingsPopup:"assistantSettingsPopup"},t.EventsPostRequestUphookAllOfAnyOfAnyOf8UpgradeHookNameEnum={Plagiarism:"plagiarism"},t.EventsPostRequestUphookAllOfAnyOfAnyOf8UpgradeHookSlotEnum={PlagiarismView:"plagiarismView"},t.EventsPostRequestUphookAllOfAnyOfAnyOf9UpgradeHookNameEnum={ToneDetector:"toneDetector"},t.EventsPostRequestUphookAllOfAnyOfAnyOf9UpgradeHookSlotEnum={EmogenieReport:"emogenieReport"}},61218:function(e,t){var n,r=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.TextApiResponse=t.BlobApiResponse=t.VoidApiResponse=t.JSONApiResponse=t.canConsumeForm=t.exists=t.querystring=t.COLLECTION_FORMATS=t.RequiredError=t.FetchError=t.ResponseError=t.BaseAPI=t.DefaultConfig=t.Configuration=t.BASE_PATH=void 0,t.BASE_PATH="http://localhost".replace(/\/+$/,"");var a=function(){function e(e){void 0===e&&(e={}),this.configuration=e}return Object.defineProperty(e.prototype,"config",{set:function(e){this.configuration=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"basePath",{get:function(){return null!=this.configuration.basePath?this.configuration.basePath:t.BASE_PATH},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fetchApi",{get:function(){return this.configuration.fetchApi},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"middleware",{get:function(){return this.configuration.middleware||[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"queryParamsStringify",{get:function(){return this.configuration.queryParamsStringify||d},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"username",{get:function(){return this.configuration.username},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"password",{get:function(){return this.configuration.password},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"apiKey",{get:function(){var e=this.configuration.apiKey;if(e)return"function"==typeof e?e:function(){return e}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"accessToken",{get:function(){var e=this,t=this.configuration.accessToken;if(t)return"function"==typeof t?t:function(){return o(e,void 0,void 0,(function(){return s(this,(function(e){return[2,t]}))}))}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"headers",{get:function(){return this.configuration.headers},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"credentials",{get:function(){return this.configuration.credentials},enumerable:!1,configurable:!0}),e}();t.Configuration=a,t.DefaultConfig=new a;t.BaseAPI=function(){function e(e){void 0===e&&(e=t.DefaultConfig);var n=this;this.configuration=e,this.fetchApi=function(e,t){return o(n,void 0,void 0,(function(){var n,r,o,a,c,u,d,h,p,g;return s(this,(function(s){switch(s.label){case 0:n={url:e,init:t},r=0,o=this.middleware,s.label=1;case 1:return r<o.length?(g=o[r]).pre?[4,g.pre(i({fetch:this.fetchApi},n))]:[3,3]:[3,4];case 2:n=s.sent()||n,s.label=3;case 3:return r++,[3,1];case 4:a=void 0,s.label=5;case 5:return s.trys.push([5,7,,12]),[4,(this.configuration.fetchApi||fetch)(n.url,n.init)];case 6:return a=s.sent(),[3,12];case 7:c=s.sent(),u=0,d=this.middleware,s.label=8;case 8:return u<d.length?(g=d[u]).onError?[4,g.onError({fetch:this.fetchApi,url:n.url,init:n.init,error:c,response:a?a.clone():void 0})]:[3,10]:[3,11];case 9:a=s.sent()||a,s.label=10;case 10:return u++,[3,8];case 11:if(void 0===a)throw c instanceof Error?new l(c,"The request failed and the interceptors did not return an alternative response"):c;return[3,12];case 12:h=0,p=this.middleware,s.label=13;case 13:return h<p.length?(g=p[h]).post?[4,g.post({fetch:this.fetchApi,url:n.url,init:n.init,response:a.clone()})]:[3,15]:[3,16];case 14:a=s.sent()||a,s.label=15;case 15:return h++,[3,13];case 16:return[2,a]}}))}))},this.middleware=e.middleware}return e.prototype.withMiddleware=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this.clone();return r.middleware=(e=r.middleware).concat.apply(e,t),r},e.prototype.withPreMiddleware=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.map((function(e){return{pre:e}}));return this.withMiddleware.apply(this,n)},e.prototype.withPostMiddleware=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.map((function(e){return{post:e}}));return this.withMiddleware.apply(this,n)},e.prototype.isJsonMime=function(t){return!!t&&e.jsonRegex.test(t)},e.prototype.request=function(e,t){return o(this,void 0,void 0,(function(){var n,r,i,o;return s(this,(function(s){switch(s.label){case 0:return[4,this.createFetchParams(e,t)];case 1:return o=s.sent(),n=o.url,r=o.init,[4,this.fetchApi(n,r)];case 2:if((i=s.sent())&&i.status>=200&&i.status<300)return[2,i];throw new c(i,"Response returned an error code")}}))}))},e.prototype.createFetchParams=function(e,t){return o(this,void 0,void 0,(function(){var n,r,a,c,l,u,d,h,p=this;return s(this,(function(g){switch(g.label){case 0:return n=this.configuration.basePath+e.path,void 0!==e.query&&0!==Object.keys(e.query).length&&(n+="?"+this.configuration.queryParamsStringify(e.query)),r=Object.assign({},this.configuration.headers,e.headers),Object.keys(r).forEach((function(e){return void 0===r[e]?delete r[e]:{}})),a="function"==typeof t?t:function(){return o(p,void 0,void 0,(function(){return s(this,(function(e){return[2,t]}))}))},c={method:e.method,headers:r,body:e.body,credentials:this.configuration.credentials},u=[i({},c)],[4,a({init:c,context:e})];case 1:return l=i.apply(void 0,u.concat([g.sent()])),f=l.body,d="undefined"!=typeof FormData&&f instanceof FormData||l.body instanceof URLSearchParams||function(e){return"undefined"!=typeof Blob&&e instanceof Blob}(l.body)?l.body:this.isJsonMime(r["Content-Type"])?JSON.stringify(l.body):l.body,h=i(i({},l),{body:d}),[2,{url:n,init:h}]}var f}))}))},e.prototype.clone=function(){var e=new(0,this.constructor)(this.configuration);return e.middleware=this.middleware.slice(),e},e.jsonRegex=new RegExp("^(:?application/json|[^;/ \t]+/[^;/ \t]+[+]json)[ \t]*(:?;.*)?$","i"),e}();var c=function(e){function t(t,n){var r=e.call(this,n)||this;return r.response=t,r.name="ResponseError",r}return r(t,e),t}(Error);t.ResponseError=c;var l=function(e){function t(t,n){var r=e.call(this,n)||this;return r.cause=t,r.name="FetchError",r}return r(t,e),t}(Error);t.FetchError=l;var u=function(e){function t(t,n){var r=e.call(this,n)||this;return r.field=t,r.name="RequiredError",r}return r(t,e),t}(Error);function d(e,t){return void 0===t&&(t=""),Object.keys(e).map((function(n){return h(n,e[n],t)})).filter((function(e){return e.length>0})).join("&")}function h(e,t,n){void 0===n&&(n="");var r=n+(n.length?"[".concat(e,"]"):e);if(t instanceof Array){var i=t.map((function(e){return encodeURIComponent(String(e))})).join("&".concat(encodeURIComponent(r),"="));return"".concat(encodeURIComponent(r),"=").concat(i)}return t instanceof Set?h(e,Array.from(t),n):t instanceof Date?"".concat(encodeURIComponent(r),"=").concat(encodeURIComponent(t.toISOString())):t instanceof Object?d(t,r):"".concat(encodeURIComponent(r),"=").concat(encodeURIComponent(String(t)))}t.RequiredError=u,t.COLLECTION_FORMATS={csv:",",ssv:" ",tsv:"\t",pipes:"|"},t.querystring=d,t.exists=function(e,t){var n=e[t];return null!=n},t.canConsumeForm=function(e){for(var t=0,n=e;t<n.length;t++){if("multipart/form-data"===n[t].contentType)return!0}return!1};var p=function(){function e(e,t){void 0===t&&(t=function(e){return e}),this.raw=e,this.transformer=t}return e.prototype.value=function(){return o(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return e=this.transformer,[4,this.raw.json()];case 1:return[2,e.apply(this,[t.sent()])]}}))}))},e}();t.JSONApiResponse=p;var g=function(){function e(e){this.raw=e}return e.prototype.value=function(){return o(this,void 0,void 0,(function(){return s(this,(function(e){return[2,void 0]}))}))},e}();t.VoidApiResponse=g;var f=function(){function e(e){this.raw=e}return e.prototype.value=function(){return o(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.raw.blob()];case 1:return[2,e.sent()]}}))}))},e}();t.BlobApiResponse=f;var m=function(){function e(e){this.raw=e}return e.prototype.value=function(){return o(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.raw.text()];case 1:return[2,e.sent()]}}))}))},e}();t.TextApiResponse=m},76161:function(e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.getFallback=t.setFallback=t.fallbackData=void 0,t.fallbackData={fallback:{upgradeHookName:"fallback",upgradeHookSlot:"fallback",content:{title:"Upgrade for unlimited access to suggestions",subtitle:"",ctaCopy:"Get Pro",ctaUrl:"https://www.grammarly.com/plans",dismissCopy:"Dismiss"},upgradeHookVariant:"pro",upgradeHookSubVariant:"regular"}};var r=null;t.setFallback=function(e){(null==e?void 0:e.fallback)&&(r={fallback:n({},e.fallback)})},t.getFallback=function(){return null!=r?r:t.fallbackData}},30954:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.UphookHubClient=t.Configuration=void 0;var o=n(75286),s=n(76161),a=n(75286);Object.defineProperty(t,"Configuration",{enumerable:!0,get:function(){return a.Configuration}});var c=function(){function e(e,t){this.fetchApi=new o.UphookhubApi(e),this.beaconApi=new o.UphookhubApi(t)}return e.prototype.getConfiguration=function(e){return r(this,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.fetchApi.configurationGet({uphooks:e})];case 1:return t=n.sent(),(0,s.setFallback)(t),[2,t];case 2:return n.sent(),[2,(0,s.getFallback)()];case 3:return[2]}}))}))},e.prototype.getConfigurationOrFallback=function(e){var t;return r(this,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return[4,this.getConfiguration([e])];case 1:return n=r.sent(),[2,null!==(t=n[e])&&void 0!==t?t:n.fallback]}}))}))},e.prototype.track=function(e,t){return this.beaconApi.eventsPost({eventsPostRequest:{kind:e,uphook:t}})},e}();t.UphookHubClient=c},73823:(e,t,n)=>{n.d(t,{Iz:()=>c,MH:()=>o,VS:()=>a,Xn:()=>l,vM:()=>s});var r=n(12518),i=n(90023);const o=(0,r.g_)((e=>{throw e}),i.yR),s=e=>(0,r.Y3)(e,r.KC),a=(0,i.MZ)(r.tS),c=e=>(0,i.zG)(parseFloat(e),(0,r.DT)((0,i.ff)(isNaN),(0,i.a9)(new Error(`Could not parse float (got "${e}")`)))),l=e=>(0,i.zG)(parseInt(e,10),(0,r.DT)(isFinite,(0,i.a9)(new Error(`Could not parse integer (got "${e}")`))))},63068:(e,t,n)=>{n.d(t,{B_:()=>f,Kh:()=>p,kT:()=>g});var r=n(24332),i=Object.defineProperty,o=Object.defineProperties,s=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,u=(e,t,n)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,d=(e,t)=>{for(var n in t||(t={}))c.call(t,n)&&u(e,n,t[n]);if(a)for(var n of a(t))l.call(t,n)&&u(e,n,t[n]);return e},h=(e,t)=>o(e,s(t));const p=h(d({},r.hw),{inverse:e=>-e});function g(e){return h(d({},r.JS(e)),{inverse:t=>{const n={};for(const r of Object.keys(e))n[r]=e[r].inverse(t[r]);return n}})}const f=e=>e},59251:(e,t,n)=>{n.d(t,{kP:()=>s});var r=n(53186),i=n(90023),o=n(58303);const s=(0,i.ls)(o.ij,(0,o.tS)(r.nI))},2084:(e,t,n)=>{n.d(t,{FX:()=>g,Fc:()=>a,MH:()=>s,bw:()=>p,cS:()=>c,dH:()=>l,is:()=>h,vB:()=>u,wo:()=>d});var r=n(18117),i=n(58303),o=n(90023);const s=(0,i.g_)((()=>{throw new Error("option has empty value")}),o.yR),a=((0,i.fS)(o.gn),(0,i.fS)(o.r5)),c=()=>i.YP;function l(e,t){return(0,i.g_)((()=>t),e)}const u=e=>(t,n)=>(0,i.UI)((([t,n])=>e(t,n)))((0,r.gz)(i.Kw)(t,n));function d(e){return t=>(0,i.Wi)(t)||(0,i.Gg)(e)(t)}function h(e){return"None"===(null==e?void 0:e._tag)||"Some"===(null==e?void 0:e._tag)}function p(e){return(0,i.UI)((t=>(e(t),t)))}function g(e){return(0,o.ls)((0,i.hX)((t=>t===e)),i.pC)}(0,r.gz)(i.Kw)},31851:(e,t,n)=>{n.d(t,{T:()=>r});var r,i=n(59833),o=n(12518),s=n(92748),a=n(90023);(e=>{function t(e){return e.left.length>0?o.t$({rejected:e.left,recovered:e.right}):o.F2(e.right)}e.URI="RecoverableOperation",e.fromArray=n=>r=>(0,a.zG)(r.map((e=>(0,a.zG)(n(e),o.Vn((t=>(0,a.bc)(t,e)))))),i.oh,t,(0,e.mapLeft)((e=>e.map(s.Yg)))),e.map=e=>t=>(0,a.zG)(t,o.Pd((t=>({rejected:t.rejected,recovered:e(t.recovered)})),e)),e.mapLeft=e=>t=>(0,a.zG)(t,o.Vn((t=>({rejected:e(t.rejected),recovered:t.recovered})))),e.flatten=e=>t=>(0,a.zG)(t,o.g_((t=>(0,a.zG)(t.recovered,o.g_((n=>o.t$({rejected:e.concat(t.rejected,n.rejected),recovered:n.recovered})),(e=>o.t$({rejected:t.rejected,recovered:e}))))),a.yR)),e.flatMap=(t,n)=>r=>(0,a.zG)(r,(0,e.map)(n),(0,e.flatten)(t)),e.recover=function(e){return o.g_((t=>(e(t.rejected),t.recovered)),a.yR)},e.tapFailure=function(e){return o.Vn((t=>(e(t),t)))},e.foldSuccess=function(e){return o.g_((t=>e(t.recovered)),e)},e.of=function(e,t){return void 0===t?o.F2(e):o.t$({recovered:e,rejected:t})},e.fromSeparatedArray=t})(r||(r={}))},66861:(e,t,n)=>{n.d(t,{CE:()=>A,H6:()=>I,Ov:()=>_,Qr:()=>y,TS:()=>v,Vx:()=>S,Xy:()=>b,ei:()=>k,v4:()=>f,vZ:()=>C});var r=n(58303),i=Object.defineProperty,o=Object.defineProperties,s=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,u=(e,t,n)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,d=(e,t)=>{for(var n in t||(t={}))c.call(t,n)&&u(e,n,t[n]);if(a)for(var n of a(t))l.call(t,n)&&u(e,n,t[n]);return e},h=(e,t)=>o(e,s(t)),p=e=>"symbol"==typeof e?e:e+"",g=(e,t)=>{var n={};for(var r in e)c.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&a)for(var r of a(e))t.indexOf(r)<0&&l.call(e,r)&&(n[r]=e[r]);return n};const f=function e(t){if("object"!=typeof t)return t;let n,r;const i=Object.prototype.toString.call(t);if("[object Object]"===i){if(t.constructor!==Object&&"function"==typeof t.constructor)for(n in r=new t.constructor,t)t.hasOwnProperty(n)&&r[n]!==t[n]&&(r[n]=e(t[n]));else for(n in r={},t)"__proto__"===n?Object.defineProperty(r,n,{value:e(t[n]),configurable:!0,enumerable:!0,writable:!0}):r[n]=e(t[n]);return r}if("[object Array]"===i){for(n=t.length,r=Array(n);n--;)r[n]=e(t[n]);return r}if("[object Date]"===i)return new Date(+t);if("[object RegExp]"===i)return r=new RegExp(t.source,t.flags),r.lastIndex=t.lastIndex,r;return t};const m=Object.prototype.hasOwnProperty;function b(e,t){let n,r;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&b(e[r],t[r]););return-1===r}if(!n||"object"==typeof e){for(n in r=0,e){if(m.call(e,n)&&++r&&!m.call(t,n))return!1;if(!(n in t)||!b(e[n],t[n]))return!1}return Object.keys(t).length===r}}return e!=e&&t!=t}function y(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}const _=e=>t=>n=>function(e,t,n){const i=n,{[e]:o}=i,s=g(i,[p(e)]);return d({[e]:t((0,r.ij)(o))},s)}(e,t,n);function v(e,t){return w(w({},e),t)}function w(e,t){var n;for(const r in t){const i=null!=(n=e[r])?n:{},o=t[r];null!=o&&null!=i&&o.constructor===Object&&i.constructor===Object?e[r]=w(i,o):e[r]=o}return e}function S(e,t){return Object.assign({},e,t)}function k(e){return t=>t[e]}function I(...e){return t=>e.reduce(((e,n)=>h(d({},e),{[n]:t[n]})),{})}function C(e,t){if(e===t)return!0;if(E(e)||E(t))return e===t;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e){if(!(n in t))return!1;if(!C(e[n],t[n]))return!1}return!0}function E(e){return e!==Object(e)}const A=(e,...t)=>{const n=d({},e);return t.forEach((e=>delete n[e])),n}},52584:function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return s(t,e),t},c=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},l=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.VitoApi=void 0;var u=a(n(60224)),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.plansGetRaw=function(e,t){return c(this,void 0,void 0,(function(){var n,r,i;return l(this,(function(o){switch(o.label){case 0:if(null===e.specialOffers||void 0===e.specialOffers)throw new u.RequiredError("specialOffers","Required parameter requestParameters.specialOffers was null or undefined when calling plansGet.");if(null===e.countryCode||void 0===e.countryCode)throw new u.RequiredError("countryCode","Required parameter requestParameters.countryCode was null or undefined when calling plansGet.");return n={},e.specialOffers&&(n.specialOffers=e.specialOffers),void 0!==e.countryCode&&(n.countryCode=e.countryCode),r={},[4,this.request({path:"/plans",method:"GET",headers:r,query:n},t)];case 1:return i=o.sent(),[2,new u.JSONApiResponse(i)]}}))}))},t.prototype.plansGet=function(e,t){return c(this,void 0,void 0,(function(){return l(this,(function(n){switch(n.label){case 0:return[4,this.plansGetRaw(e,t)];case 1:return[4,n.sent().value()];case 2:return[2,n.sent()]}}))}))},t.prototype.setupTrialPostRaw=function(e,t){return c(this,void 0,void 0,(function(){var n,r,i;return l(this,(function(o){switch(o.label){case 0:if(null===e.setupTrialPostRequest||void 0===e.setupTrialPostRequest)throw new u.RequiredError("setupTrialPostRequest","Required parameter requestParameters.setupTrialPostRequest was null or undefined when calling setupTrialPost.");return n={},(r={})["Content-Type"]="application/json",[4,this.request({path:"/setup-trial",method:"POST",headers:r,query:n,body:e.setupTrialPostRequest},t)];case 1:return i=o.sent(),[2,new u.JSONApiResponse(i)]}}))}))},t.prototype.setupTrialPost=function(e,t){return c(this,void 0,void 0,(function(){return l(this,(function(n){switch(n.label){case 0:return[4,this.setupTrialPostRaw(e,t)];case 1:return[4,n.sent().value()];case 2:return[2,n.sent()]}}))}))},t.prototype.specialOffersGetRaw=function(e,t){return c(this,void 0,void 0,(function(){var n,r,i;return l(this,(function(o){switch(o.label){case 0:return n={},e.names&&(n.names=e.names),r={},[4,this.request({path:"/special-offers",method:"GET",headers:r,query:n},t)];case 1:return i=o.sent(),[2,new u.JSONApiResponse(i)]}}))}))},t.prototype.specialOffersGet=function(e,t){return void 0===e&&(e={}),c(this,void 0,void 0,(function(){return l(this,(function(n){switch(n.label){case 0:return[4,this.specialOffersGetRaw(e,t)];case 1:return[4,n.sent().value()];case 2:return[2,n.sent()]}}))}))},t.prototype.subscribePostRaw=function(e,t){return c(this,void 0,void 0,(function(){var n,r,i;return l(this,(function(o){switch(o.label){case 0:if(null===e.subscribePostRequest||void 0===e.subscribePostRequest)throw new u.RequiredError("subscribePostRequest","Required parameter requestParameters.subscribePostRequest was null or undefined when calling subscribePost.");return n={},(r={})["Content-Type"]="application/json",[4,this.request({path:"/subscribe",method:"POST",headers:r,query:n,body:e.subscribePostRequest},t)];case 1:return i=o.sent(),[2,new u.JSONApiResponse(i)]}}))}))},t.prototype.subscribePost=function(e,t){return c(this,void 0,void 0,(function(){return l(this,(function(n){switch(n.label){case 0:return[4,this.subscribePostRaw(e,t)];case 1:return[4,n.sent().value()];case 2:return[2,n.sent()]}}))}))},t}(u.BaseAPI);t.VitoApi=d},72434:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(52584),t)},33806:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(60224),t),i(n(72434),t),i(n(75895),t)},75895:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},60224:function(e,t){var n,r=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.TextApiResponse=t.BlobApiResponse=t.VoidApiResponse=t.JSONApiResponse=t.canConsumeForm=t.querystring=t.COLLECTION_FORMATS=t.RequiredError=t.FetchError=t.ResponseError=t.BaseAPI=t.DefaultConfig=t.Configuration=t.BASE_PATH=void 0,t.BASE_PATH="http://localhost".replace(/\/+$/,"");var a=function(){function e(e){void 0===e&&(e={}),this.configuration=e}return Object.defineProperty(e.prototype,"config",{set:function(e){this.configuration=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"basePath",{get:function(){return null!=this.configuration.basePath?this.configuration.basePath:t.BASE_PATH},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fetchApi",{get:function(){return this.configuration.fetchApi},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"middleware",{get:function(){return this.configuration.middleware||[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"queryParamsStringify",{get:function(){return this.configuration.queryParamsStringify||d},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"username",{get:function(){return this.configuration.username},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"password",{get:function(){return this.configuration.password},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"apiKey",{get:function(){var e=this.configuration.apiKey;if(e)return"function"==typeof e?e:function(){return e}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"accessToken",{get:function(){var e=this,t=this.configuration.accessToken;if(t)return"function"==typeof t?t:function(){return o(e,void 0,void 0,(function(){return s(this,(function(e){return[2,t]}))}))}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"headers",{get:function(){return this.configuration.headers},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"credentials",{get:function(){return this.configuration.credentials},enumerable:!1,configurable:!0}),e}();t.Configuration=a,t.DefaultConfig=new a;t.BaseAPI=function(){function e(e){void 0===e&&(e=t.DefaultConfig);var n=this;this.configuration=e,this.fetchApi=function(e,t){return o(n,void 0,void 0,(function(){var n,r,o,a,c,u,d,h,p,g;return s(this,(function(s){switch(s.label){case 0:n={url:e,init:t},r=0,o=this.middleware,s.label=1;case 1:return r<o.length?(g=o[r]).pre?[4,g.pre(i({fetch:this.fetchApi},n))]:[3,3]:[3,4];case 2:n=s.sent()||n,s.label=3;case 3:return r++,[3,1];case 4:a=void 0,s.label=5;case 5:return s.trys.push([5,7,,12]),[4,(this.configuration.fetchApi||fetch)(n.url,n.init)];case 6:return a=s.sent(),[3,12];case 7:c=s.sent(),u=0,d=this.middleware,s.label=8;case 8:return u<d.length?(g=d[u]).onError?[4,g.onError({fetch:this.fetchApi,url:n.url,init:n.init,error:c,response:a?a.clone():void 0})]:[3,10]:[3,11];case 9:a=s.sent()||a,s.label=10;case 10:return u++,[3,8];case 11:if(void 0===a)throw c instanceof Error?new l(c,"The request failed and the interceptors did not return an alternative response"):c;return[3,12];case 12:h=0,p=this.middleware,s.label=13;case 13:return h<p.length?(g=p[h]).post?[4,g.post({fetch:this.fetchApi,url:n.url,init:n.init,response:a.clone()})]:[3,15]:[3,16];case 14:a=s.sent()||a,s.label=15;case 15:return h++,[3,13];case 16:return[2,a]}}))}))},this.middleware=e.middleware}return e.prototype.withMiddleware=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this.clone();return r.middleware=(e=r.middleware).concat.apply(e,t),r},e.prototype.withPreMiddleware=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.map((function(e){return{pre:e}}));return this.withMiddleware.apply(this,n)},e.prototype.withPostMiddleware=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.map((function(e){return{post:e}}));return this.withMiddleware.apply(this,n)},e.prototype.isJsonMime=function(t){return!!t&&e.jsonRegex.test(t)},e.prototype.request=function(e,t){return o(this,void 0,void 0,(function(){var n,r,i,o;return s(this,(function(s){switch(s.label){case 0:return[4,this.createFetchParams(e,t)];case 1:return o=s.sent(),n=o.url,r=o.init,[4,this.fetchApi(n,r)];case 2:if((i=s.sent())&&i.status>=200&&i.status<300)return[2,i];throw new c(i,"Response returned an error code")}}))}))},e.prototype.createFetchParams=function(e,t){return o(this,void 0,void 0,(function(){var n,r,a,c,l,u,d,h,p=this;return s(this,(function(g){switch(g.label){case 0:return n=this.configuration.basePath+e.path,void 0!==e.query&&0!==Object.keys(e.query).length&&(n+="?"+this.configuration.queryParamsStringify(e.query)),r=Object.assign({},this.configuration.headers,e.headers),Object.keys(r).forEach((function(e){return void 0===r[e]?delete r[e]:{}})),a="function"==typeof t?t:function(){return o(p,void 0,void 0,(function(){return s(this,(function(e){return[2,t]}))}))},c={method:e.method,headers:r,body:e.body,credentials:this.configuration.credentials},u=[i({},c)],[4,a({init:c,context:e})];case 1:return l=i.apply(void 0,u.concat([g.sent()])),f=l.body,d="undefined"!=typeof FormData&&f instanceof FormData||l.body instanceof URLSearchParams||function(e){return"undefined"!=typeof Blob&&e instanceof Blob}(l.body)?l.body:this.isJsonMime(r["Content-Type"])?JSON.stringify(l.body):l.body,h=i(i({},l),{body:d}),[2,{url:n,init:h}]}var f}))}))},e.prototype.clone=function(){var e=new(0,this.constructor)(this.configuration);return e.middleware=this.middleware.slice(),e},e.jsonRegex=new RegExp("^(:?application/json|[^;/ \t]+/[^;/ \t]+[+]json)[ \t]*(:?;.*)?$","i"),e}();var c=function(e){function t(t,n){var r=e.call(this,n)||this;return r.response=t,r.name="ResponseError",r}return r(t,e),t}(Error);t.ResponseError=c;var l=function(e){function t(t,n){var r=e.call(this,n)||this;return r.cause=t,r.name="FetchError",r}return r(t,e),t}(Error);t.FetchError=l;var u=function(e){function t(t,n){var r=e.call(this,n)||this;return r.field=t,r.name="RequiredError",r}return r(t,e),t}(Error);function d(e,t){return void 0===t&&(t=""),Object.keys(e).map((function(n){return h(n,e[n],t)})).filter((function(e){return e.length>0})).join("&")}function h(e,t,n){void 0===n&&(n="");var r=n+(n.length?"[".concat(e,"]"):e);if(t instanceof Array){var i=t.map((function(e){return encodeURIComponent(String(e))})).join("&".concat(encodeURIComponent(r),"="));return"".concat(encodeURIComponent(r),"=").concat(i)}return t instanceof Set?h(e,Array.from(t),n):t instanceof Date?"".concat(encodeURIComponent(r),"=").concat(encodeURIComponent(t.toISOString())):t instanceof Object?d(t,r):"".concat(encodeURIComponent(r),"=").concat(encodeURIComponent(String(t)))}t.RequiredError=u,t.COLLECTION_FORMATS={csv:",",ssv:" ",tsv:"\t",pipes:"|"},t.querystring=d,t.canConsumeForm=function(e){for(var t=0,n=e;t<n.length;t++){if("multipart/form-data"===n[t].contentType)return!0}return!1};var p=function(){function e(e,t){void 0===t&&(t=function(e){return e}),this.raw=e,this.transformer=t}return e.prototype.value=function(){return o(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return e=this.transformer,[4,this.raw.json()];case 1:return[2,e.apply(this,[t.sent()])]}}))}))},e}();t.JSONApiResponse=p;var g=function(){function e(e){this.raw=e}return e.prototype.value=function(){return o(this,void 0,void 0,(function(){return s(this,(function(e){return[2,void 0]}))}))},e}();t.VoidApiResponse=g;var f=function(){function e(e){this.raw=e}return e.prototype.value=function(){return o(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.raw.blob()];case 1:return[2,e.sent()]}}))}))},e}();t.BlobApiResponse=f;var m=function(){function e(e){this.raw=e}return e.prototype.value=function(){return o(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.raw.text()];case 1:return[2,e.sent()]}}))}))},e}();t.TextApiResponse=m},3055:(e,t,n)=>{n.d(t,{JU:()=>r,r3:()=>s});var r,i,o,s,a=n(59833),c=n(21147),l=n(53186),u=n(38538),d=n(90023),h=n(64443),p=n(14527),g=n(58303),f=n(2084),m=n(12518),b=n(73823),y=n(31851),_=n(28338),v=n(95869),w=n(32004),S=n(28642),k=Object.defineProperty,I=Object.defineProperties,C=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertySymbols,A=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,T=(e,t,n)=>t in e?k(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,O=(e,t)=>{for(var n in t||(t={}))A.call(t,n)&&T(e,n,t[n]);if(E)for(var n of E(t))x.call(t,n)&&T(e,n,t[n]);return e},P=(e,t)=>I(e,C(t));(e=>{var t;(t=e.Type||(e.Type={})).Important="important",t.Main="main",t.Optional="optional",(e.TypeExt||(e.TypeExt={})).OptionalContext="optional_context";const n=e=>"object"==typeof e&&null!==e;e.eqAttributes=u.Eh(c.f7(((t,r)=>n(t)&&n(r)?e.eqAttributes.equals(t,r):c.w4.equals(t,r)))),e.eq=c.MW({type:c.w4,group:g.Eh(c.yv),insert:c.yv,delete:c.lr,retain:c.lr,attributes:e.eqAttributes}),e.isInsert=e=>"insert"in e,e.isInsertString=t=>(0,e.isInsert)(t)&&r(t.insert),e.isInsertGap=t=>(0,e.isInsert)(t)&&i(t.insert),e.isDelete=e=>"delete"in e,e.isRetain=e=>"retain"in e,e.isOptionalContextRetain=t=>"retain"in t&&e.isOptionalContextType(t.type);const r=e=>"string"==typeof e,i=e=>"object"==typeof e&&null!==e&&"gap"in e;e.isMain=e=>"main"===e.type,e.isOptionalType=e=>"optional"===e,e.isOptionalContextType=e=>"optional_context"===e,e.isSignificant=function(e){switch(e.type){case"main":case"important":return!0;case"optional":return!1;default:return(0,_.vE)(e.type)}},e.fromRawAbsAlternative=function(e){if(function(e){const t=e[0];return Boolean(t)&&"retain"in t&&Boolean(t.attributes)&&"optional_context"===t.attributes.type}(e.ops)){const[t,...n]=e.ops;return[{retain:t.retain,type:"optional_context",group:g.YP},...n.map(s)]}return e.ops.map(s)},e.length=p.i.Op.length,e.anonymize=t=>(0,e.isInsert)(t)?P(O({},t),{insert:"string"==typeof t.insert?`<${(0,e.length)(t)}>`:"<embed>"}):t;e.Iterator=class{constructor(e){this.ops=e,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(t){Boolean(t)||(t=1/0);const n=this.ops[this.index];if(Boolean(n)){const r=n.type,i=this.offset,o=(0,e.length)(n);return t>=o-i?(t=o-i,this.index+=1,this.offset=0):this.offset+=t,e.isDelete(n)?{delete:t,type:r,group:n.group}:e.isRetain(n)?{retain:t,type:r,group:n.group,attributes:!e.isOptionalContextType(r)&&n.attributes}:e.isInsertString(n)?{insert:n.insert.substr(i,t),type:r,group:n.group,attributes:n.attributes}:n}return{retain:1/0,type:"optional",group:g.YP,attributes:{}}}peekLength(){return Boolean(this.ops[this.index])?(0,e.length)(this.ops[this.index])-this.offset:1/0}peekType(){return Boolean(this.ops[this.index])?e.isDelete(this.ops[this.index])?"delete":e.isRetain(this.ops[this.index])?"retain":"insert":"retain"}};const o=(0,d.ls)(g.ij,g.UI(u.EG("type")),g.UI(u.EG("group")),g.fS((()=>({})))),s=e=>{const t=function(e){if(null!=(null==e?void 0:e.type))switch(e.type){case"main":return"main";case"important":return"important";default:return(0,_.vE)(e.type)}return"optional"}(e.attributes),n=(r=e.attributes,(0,d.zG)(g.ij(r),g.tS((e=>g.ij(e.group)))));var r;return"insert"in e?{insert:e.insert,type:t,group:n,attributes:o(e.attributes)}:"delete"in e?{delete:e.delete,type:t,group:n}:{retain:e.retain,type:t,group:n,attributes:o(e.attributes)}}})(r||(r={})),(o=i||(i={})).fromAlternative=({alternative:e,fullText:t})=>(0,d.zG)(e.delta.invert(t),s.fromRawDelta),o.fromAlternativeBoldified=({alternative:e,fullText:t})=>{const n=(0,d.zG)(e.delta.map(v.s.match((e=>(0,d.zG)(e,g.DT(v.s.isInsertString),g.tS((e=>(0,d.zG)(g.ij(e.attributes),g.UI((t=>({attributes:t,retain:e.insert.length})))))),g.hX((({attributes:e})=>Boolean(e.bold))),g.UI((({retain:e})=>({retain:e,attributes:{bold:!1}}))))),(e=>g.YP),(e=>g.G({retain:e.retain})))),a.oA,(e=>new p.i(e)),(e=>t.compose(e)));return(0,o.fromAlternative)({alternative:e,fullText:n})},o.fromAlternativeListified=({alternative:e,fullText:t})=>(0,d.zG)((0,o.fromAlternative)({alternative:e,fullText:t}),(e=>(0,d.zG)(e.delta.ops,a.qr((e=>v.s.isInsertString(e)&&"\n"===e.insert&&Boolean(!e.attributes||!Boolean(e.attributes.list)))),g.UI((t=>{const n=e.delta.ops,r=n[t];return new p.i([...n.slice(0,t),P(O({},r),{attributes:P(O({},r.attributes),{list:!1})}),...n.slice(t+1)])})),g.fS((()=>e.delta)))),s.fromRawDelta),(e=>{let t;var n,i;function o(e){return t=>r.isInsertGap(t)?P(O({},t),{insert:e}):t}function s(e){return new u(e)}e.hasOptionalContext=function(e){return Boolean(e[0])&&r.isOptionalContextRetain(e[0])},(n=t=e.Type||(e.Type={})).Insert="insert",n.Remove="remove",n.Substitution="substitution",(e=>{function t(e){return"main"===e.type?g.G(r.isInsert(e)?"insert":"remove"):g.YP}e.eq=c.yv,e.fromOperation=t,e.semigroup={concat(e,t){switch(e){case"insert":return"remove"===t?"substitution":t;case"remove":return"insert"===t?"substitution":t;case"substitution":return"substitution";default:return(0,_.vE)(e)}}},e.monoid=g.uZ(e.semigroup),e.parse=(0,a.Lx)(e.monoid)(t)})(t=e.Type||(e.Type={})),e.eq=c.MW({lengthAffected:c.lr,type:g.Eh(t.eq),ops:(0,a.Eh)(r.eq)}),e.fromRawDelta=(0,d.ls)(w.e.AbsAlternative.unsafeFromDelta,r.fromRawAbsAlternative,s),e.fillGaps=(t,n)=>e.hasOptionalContext(t.ops)?s([t.ops[0],...t.ops.slice(1).map(o(n))]):s(t.ops.map(o(n))),e.dismissTransformGroups=function(t,n){const i=a.DZ((e=>(0,d.zG)(e.group,g.hX((e=>n.has(e))),g.g_((()=>g.G(e)),(()=>function(e){return r.isDelete(e)?g.G({type:e.type,group:e.group,retain:e.delete,attributes:{}}):r.isInsert(e)?g.YP:g.G(e)}(e))))));if(e.hasOptionalContext(t.ops)){const[e,...n]=t.ops;return s([e,...(0,d.zG)(n,i)])}return s((0,d.zG)(t.ops,i))},e.getTransformGroups=function(e){const t=new Set;return e.ops.forEach((e=>(0,d.zG)(e.group,f.bw((e=>t.add(e)))))),t},e.getDeleteOpsGroupsList=function(e){return(0,d.zG)(e.ops.filter(r.isDelete),a.UI((e=>e.group)),a.oA)},e.create=s,e.validate=(0,d.ls)((e=>e.ops),m.DT((0,S.sq)(r.isOptionalContextRetain),(e=>"Optional_context operations exist not only at the beginning or at the end of Delta"))),(i=e.Group||(e.Group={})).fromSerialized=function(t){return{context:t.context,alternatives:(0,d.zG)(t.alternatives,l.UI((e=>e.ops)),l.UI(e.create))}},i.fromSubalerts=(e,t)=>({context:e,alternatives:l.UI((0,d.ls)(r.fromRawAbsAlternative,s))(t)}),i.fromRawTransform=function(e){return{context:l.of(e.context),alternatives:l.UI((0,d.ls)(r.fromRawAbsAlternative,s))(e.alternatives)}},i.rebase=e=>t=>({context:(0,d.zG)(t.context,l.UI((t=>({s:e.transformPosition(t.s,!0),e:e.transformPosition(t.e,!0)})))),alternatives:(0,d.zG)(t.alternatives,l.UI((t=>(0,d.zG)(t.rebase(e),g.g_((()=>t),d.yR)))))}),i.copy=e=>({context:l.JG(e.context),alternatives:l.JG(e.alternatives)});class u{constructor(e){this.ops=e,this.type=t.parse(this.ops),this.lengthAffected=v.s.calcAffectedLength(this)}rebase(e){const t=e.ops[0];if(!Boolean(t)||v.s.isRetain(t)&&(void 0===t.attributes||0===Object.keys(t.attributes).length)&&p.i.Op.length(t)>this.lengthAffected)return g.G(this);const n=this.ops.length>=2&&v.s.isDelete(this.ops[this.ops.length-2])&&v.s.isInsert(this.ops[this.ops.length-1]);return!Boolean(t)||n&&v.s.isRetain(t)&&(void 0===t.attributes||0===Object.keys(t.attributes).length)&&p.i.Op.length(t)===this.lengthAffected?g.G(this):this._internalRebase(e)}_internalRebase(t){const n=p.i.Op.iterator(t.ops),i=new r.Iterator(this.ops);let o=g.G(new u([])),s=!1;for(;i.hasNext();)if("insert"===n.peekType()){if(s&&(0,d.zG)(o,f.wo((e=>"main"===e.ops[e.ops.length-1].type))))return g.YP;{const e=p.i.Op.length(n.next()),t=(0,d.zG)(o,g.UI((e=>e.ops[e.ops.length-1])),f.MH);if(s&&f.wo((e=>e.lengthAffected>0))(o)){const n={retain:e,type:t.type,group:t.group,attributes:"attributes"in t&&!r.isOptionalContextType(t.type)?t.attributes:{}};o=u._pushOp(o,n)}else o=u._pushOp(o,{retain:e,type:"optional",group:g.YP,attributes:{}})}}else if("insert"===i.peekType()){const e=i.next();if("main"===e.type&&"delete"===n.peekType()&&n.offset>0)return g.YP;o=u._pushOp(o,e)}else{const e=Math.min(n.peekLength(),i.peekLength()),t=n.next(e),a=i.next(e);v.s.isDelete(t)||(s=i.offset>0,o=u._pushOp(o,r.isDelete(a)?a:r.isOptionalContextType(a.type)?{retain:e,type:"optional_context",group:g.YP}:{retain:e,type:a.type,group:a.group,attributes:a.attributes}))}return(0,d.zG)(o,g.UI((t=>(t.type=e.Type.parse(this.ops),t))))}static _pushOp(e,t){return(0,d.zG)(e,g.tS((e=>(0,d.zG)(b.vM((()=>e._push(t))),m.Vn((e=>(h.C8.Logging.getLogger("Alternative").error("Alternative push error",e),e))),g.Uo))))}_push(e){const t=this.ops.length,n=this.ops[t-1];if(Boolean(n)){if(r.isOptionalContextRetain(e))return r.isOptionalContextRetain(n)?n.retain+=e.retain:r.isRetain(n)&&t<=2?2===t?((0,_.kG)(r.isOptionalContextRetain(this.ops[0]),"OptionalContext is expected in the beginning of alternative but not found",JSON.stringify({ops:this.ops,newOp:e,index:t})),this.ops[0].retain+=e.retain):(this.ops[t]=n,this.ops[t-1]=e):(0,_.kG)(r.isOptionalContextRetain(n)||r.isRetain(n)&&1===t,"Attempted to push optional_context in the middle of alternative ops",JSON.stringify({ops:this.ops,newOp:e,index:t})),this.lengthAffected+=e.retain,this;if(r.isDelete(e)&&r.isDelete(n))return e.type===n.type?n.delete+=e.delete:this.ops.push(e),this.lengthAffected+=e.delete,this;if(r.isInsert(e)&&r.isInsert(n))return e.type===n.type&&"string"==typeof e.insert&&"string"==typeof n.insert&&r.eqAttributes.equals(e.attributes,n.attributes)?n.insert+=e.insert:this.ops.push(e),this;if(r.isRetain(e)&&r.isRetain(n))return e.type===n.type?n.retain+=e.retain:this.ops.push(e),this.lengthAffected+=e.retain,this;this.ops.push(e)}else this.ops=[e];return r.isInsert(e)||(this.lengthAffected+=r.length(e)),this}get delta(){return v.s.normalizeDelta(new p.i(this))}toJSON(){return{ops:this.ops}}}e.compose=(e,t)=>{const n={composedDelta:new p.i,currentFullText:t,reversedAlternatives:[]},r=e.reduce(((e,[t,n],r)=>((0,d.zG)(t.rebase(e.composedDelta),g.g_((()=>{e.reversedAlternatives.push(m.t$({error:new Error("Could not rebase alternative to composed delta"),delta:t.delta,alternativeIndex:r}))}),(t=>{const i=n({alternative:t,fullText:e.currentFullText});e.composedDelta=e.composedDelta.compose(t.delta),e.currentFullText=e.currentFullText.compose(t.delta),function(e,t){e.forEach(((n,r)=>(0,d.zG)(n,m.g_(d.Q1,(n=>{e[r]=(0,d.zG)(n.reversedAlternative.rebase(t.delta),m.Yo((()=>({error:new Error("Could not rebase reversed alternative to some alternative"),delta:n.reversedAlternative.delta,alternativeIndex:n.alternativeIndex}))),m.UI((e=>P(O({},n),{reversedAlternative:e}))))})))))}(e.reversedAlternatives,t),e.reversedAlternatives.push(m.F2({reversedAlternative:i,alternativeIndex:r}))}))),e)),n),i=(0,d.zG)(r.reversedAlternatives,a.oh,y.T.fromSeparatedArray);return P(O({},r),{reversedAlternatives:i})},e.withoutOptionalOps=function(t){return e.create(t.filter((e=>!r.isOptionalType(e.type))))}})(s||(s={}))},2373:(e,t,n)=>{n.d(t,{A1:()=>y,DI:()=>te,Fj:()=>ie,H5:()=>o,JE:()=>fe,JG:()=>b,JW:()=>u,KI:()=>le,KX:()=>ne,Mw:()=>de,P2:()=>ee,PZ:()=>Q,Q1:()=>ge,VD:()=>he,Vm:()=>_,XN:()=>ae,_Y:()=>pe,_l:()=>me,at:()=>ue,dt:()=>oe,e3:()=>be,fA:()=>ce,hD:()=>_e,jK:()=>J,lB:()=>v,r0:()=>se,rP:()=>ye,t_:()=>we,wQ:()=>w,y_:()=>re});var r,i,o,s,a,c,l,u,d,h,p,g,f,m,b,y,_,v,w,S=n(59833),k=n(90023),I=n(11633),C=n(64443),E=n(58303),A=n(53186),x=n(73823),T=n(12518),O=n(59251),P=n(2084),R=n(39104),D=n(28338),N=n(95869),U=n(14527),M=n(3055),j=n(26495),F=n(32004),L=n(66861),G=n(28642),B=Object.defineProperty,z=Object.defineProperties,V=Object.getOwnPropertyDescriptors,q=Object.getOwnPropertySymbols,H=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable,$=(e,t,n)=>t in e?B(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,X=(e,t)=>{for(var n in t||(t={}))H.call(t,n)&&$(e,n,t[n]);if(q)for(var n of q(t))W.call(t,n)&&$(e,n,t[n]);return e},K=(e,t)=>z(e,V(t)),Y=(e,t)=>{var n={};for(var r in e)H.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&q)for(var r of q(e))t.indexOf(r)<0&&W.call(e,r)&&(n[r]=e[r]);return n};(i=r||(r={})).RelatedMaterial=I.dt({iconUrl:I.OT(I.Z_),title:I.OT(I.Z_),link:I.OT(I.Z_)}),i.RelatedMaterials=I.Bk(i.RelatedMaterial),i.CommunicationMethod=I.dt({iconUrl:I.OT(I.Z_),title:I.OT(I.Z_),link:I.OT(I.Z_)}),i.PointPerson=I.dt({firstName:I.OT(I.Z_),lastName:I.OT(I.Z_),displayName:I.OT(I.Z_),jobTitle:I.OT(I.G0([I.Z_,I.S1])),avatarUrl:I.OT(I.G0([I.Z_,I.S1])),communicationMethods:I.Bk(i.CommunicationMethod)}),i.PointPeople=I.Bk(i.PointPerson),i.Aliases=I.Bk(I.dt({name:I.OT(I.Z_)})),(s=o||(o={})).empty=[],s.isLeaf=function(e){return 0===e.length},s.Tree=I.sH("Tree",(()=>I.IX(I.bc([I.pk,s.Tree])))),c=a||(a={}),(l=c.DomainCategory||(c.DomainCategory={})).sales_crm="sales_crm",l.sales_engagement="sales_engagement",l.sales_enablement="sales_enablement",l.marketing_email_automation="marketing_email_automation",l.marketing_content="marketing_content",l.customer_service="customer_service",l.customer_surveys_surveys="customer_surveys_surveys",l.recruiting="recruiting",l.training_learning="training_learning",l.project_management="project_management",l.legal="legal",l.contractors="contractors",l.human_resources="human_resources",l.email="email",l.business_chat="business_chat",((d=u||(u={})).SpecialCategory||(d.SpecialCategory={})).InQuotes="InQuotes",(h=d.ScopeType||(d.ScopeType={})).GLOBAL="GLOBAL",h.SESSION="SESSION",h.DOCUMENT="DOCUMENT",(p=d.MutedByType||(d.MutedByType={})).MUTED_BY_USER="MUTED_BY_USER",p.NOT_ELIGIBLE_FOR_INLINE="NOT_ELIGIBLE_FOR_INLINE",p.NOT_MUTED="NOT_MUTED",f=g||(g={}),(m=f.SuggestionRejectionReason||(f.SuggestionRejectionReason={})).NOT_RELEVANT="NOT_RELEVANT",m.WRONG_TONE="WRONG_TONE",m.INCORRECT="INCORRECT",m.WRONG_GRAMMAR="WRONG_GRAMMAR",m.OFFENSIVE="OFFENSIVE",m.OTHER="OTHER",(b||(b={})).mock={bundle:"Test bundle",bundleRank:10,group:"Test Group",rank:1,outcome:"Correctness"},(e=>{function t(e){return t=>({s:e.s+t.s,e:e.s+t.e,type:t.type})}function n(e,t=!1){return 0===e.s?k.MZ:n=>(0,k.MZ)({ops:[{retain:e.s,attributes:t?void 0:{type:F.e.Edit.TypeExt.OPTIONAL_CONTEXT}},...n.ops]})}e.prependContextToHighlight=t,e.prependContext=n,e.toAbs=function(e){return v.create({highlights:e.highlights.map(t(e.context)),alternatives:(0,k.zG)(e,E.DT((e=>void 0!==e.alternatives&&e.alternatives.length>0)),E.UI((e=>K(X({},e),{alternatives:A.UI(n(e.context))(e.alternatives)}))),E.UI(M.r3.Group.fromRawTransform))})}})(y||(y={})),(e=>{let t;let n;var r;(t=e.Id||(e.Id={})).create=e=>e.toString(),(r=n=e.Range||(e.Range={})).rebase=function(e,t){const n=t.transformPosition(e.begin,!0),r=t.transformPosition(e.end,!0),i=(new U.i).insert(e.text).compose(t.slice(e.begin)).reduce(((e,t)=>N.s.isInsert(t)?`${e}${t.insert}`:e),"").slice(0,r-n);return K(X({},e),{begin:n,end:r,text:i})},r.isSquashed=function(e){return e.begin>=e.end},r.fromAttentionHeatmapMessage=function(e){return K(X({},e),{id:t.create(e.id)})},e.fromAttentionHeatmapMessage=function(e){return K(X({},e),{add:e.add.map(n.fromAttentionHeatmapMessage),update:e.update.map(n.fromAttentionHeatmapMessage),remove:e.remove.map(t.create),attentionScore:(0,k.zG)(e,E.DT(j.v0.AttentionHeatmap.hasAttentionInfo),E.UI((0,L.ei)("attentionScore"))),showAttentionCard:(0,k.zG)(e,E.DT(j.v0.AttentionHeatmap.hasAttentionInfo),E.UI((0,L.ei)("showAttentionCard")))})}})(_||(_={})),(e=>{e.create=e=>e,e.isSquashed=function(e){return e.highlights.some(F.e.Range.isEmpty)},e.isValidAfterTransform=function(e,n){const r=t(e),i=t(n);return Boolean((0,G.Hx)(r.highlights,i.highlights,((e,t)=>e.e-e.s==t.e-t.s)))&&(0,G.Hx)(r.alternatives,i.alternatives,((e,t)=>(0,G.Hx)(e.ops.filter((0,R.ff)(N.s.isRetain)),t.ops.filter((0,R.ff)(N.s.isRetain)),N.s.isEqual((()=>!0)))))},e.rebase=function(t,n){return(0,e.create)({highlights:t.highlights.map((e=>({s:n.transformPosition(e.s,!0),e:n.transformPosition(e.e,!0),type:e.type}))),alternatives:(0,k.zG)(t.alternatives,E.UI(M.r3.Group.rebase(n)))})};const t=e=>({highlights:e.highlights,alternatives:(0,k.zG)(e.alternatives,E.g_((()=>[]),(e=>e.alternatives.map((e=>e.delta)))))})})(v||(v={})),(e=>{var t,n,i;function s(e){return void 0===e.drilldownTree&&void 0===e.knowledgeHubSuggestCorrectionUrl&&void 0===e.knowledgeHubRelatedMaterials&&void 0===e.knowledgeHubPointPeople&&void 0===e.knowledgeHubAliases?e:K(X({},e),{drilldownTree:void 0===e.drilldownTree?void 0:(0,k.zG)(e.drilldownTree,(e=>"object"==typeof e?e:JSON.parse(e)),o.Tree.decode,x.MH),knowledgeHubRelatedMaterials:(0,k.zG)(e.knowledgeHubRelatedMaterials,E.ij,E.tS((e=>(0,k.zG)(T.Rx(e,T.KC),T.tS((0,k.ls)(r.RelatedMaterials.decode,T.Vn(T.KC))),T.g_((e=>(C.C8.Logging.getLogger("coreclients.capi.data").error("Error decoding knowledgeHubRelatedMaterials",e),E.YP)),E.G)))),E.FS),knowledgeHubPointPeople:(0,k.zG)(e.knowledgeHubPointPeople,E.ij,E.tS((e=>(0,k.zG)(T.Rx(e,T.KC),T.tS((0,k.ls)(r.PointPeople.decode,T.Vn(T.KC))),T.g_((e=>(C.C8.Logging.getLogger("coreclients.capi.data").error("Error decoding knowledgeHubPointPeople",e),E.YP)),E.G)))),E.FS),knowledgeHubAliases:(0,k.zG)(e.knowledgeHubAliases,E.ij,E.tS((e=>(0,k.zG)(T.Rx(e,T.KC),T.tS((0,k.ls)(r.Aliases.decode,T.Vn(T.KC))),T.g_((e=>(C.C8.Logging.getLogger("coreclients.capi.data").error("Error decoding knowledgeHubAliases",e),E.YP)),E.G)))),E.FS)})}function a(e,t){(0,k.zG)(e.ops,S.Ew((e=>N.s.isInsert(e)&&(0,k.zG)(N.s.getAttr(e,"type"),E.Gg((e=>e===F.e.Edit.Type.MAIN)))&&"string"==typeof e.insert)),E.UI((({insert:e})=>t(e))))}function c(e){return t=>"InQuotes"===t&&"true"===e.extra_properties.in_quotes}function l(e){return!h(e)&&!p(e)}function d(e){return void 0!==e.begin&&void 0!==e.end&&void 0!==e.highlightBegin&&void 0!==e.highlightEnd}function h(e){return void 0!==e.cardLayout&&void 0!==e.transformJson}function p(e){return"labels"in e&&"subalerts"in e}function g(e,t,n,r){return l(e)?t(e):h(e)?n(e):r(e)}(e.Id||(e.Id={})).create=e=>e.toString(),(t=e.Impact||(e.Impact={})).Critical="critical",t.Advanced="advanced",(n=e.View||(e.View={})).all="all",n.priority="priority",(i=e.Inline||(e.Inline={})).inline="inline",i.not_inline="not_inline",e.parseExtraProperties=s,e.fromAlertMessage=function(t){return Object.assign({},t,X({id:e.Id.create(t.id),cost:Boolean(t.cost)?t.cost:1,extra_properties:s(t.extra_properties)},t.transformJson?{transformJson:y.toAbs(t.transformJson),highlightText:[t.highlightText]}:(0,k.zG)(O.kP(t.subalerts),E.g_((()=>({highlightText:[t.highlightText]})),(e=>(0,k.zG)(function(e,t){return(0,k.zG)(t,E.g_((()=>T.t$(new Error("Got corrupted superalert  the labels are missing"))),(t=>function(e,t){if(e.length<2)return T.t$(new Error("There should be more than one subalert, got "+e.length));const n=t.map((e=>({matches:0,replacements:new Set,label:e}))),r=n.reduce(((e,t)=>(e[t.label]=t,e)),{}),i=O.kP(e[0].transformJson.alternatives);if(n.length>0&&Boolean(E.Wi(i))||!Boolean((0,k.zG)(i,P.wo((e=>n.length===e.length)))))return T.t$(new Error("Alternatives array length must match labels array length"));let o=(0,k.zG)(i,E.UI(A.Su(((t,r)=>(a(r,(e=>n[t].replacements.add(e))),y.prependContext(e[0].transformJson.context)(r))))),E.UI((t=>(r[e[0].label].matches+=1,[A.of(e[0].transformJson.context),t]))));const s=e[0].transformJson.highlights.map(y.prependContextToHighlight(e[0].transformJson.context)),c=[e[0].highlightText];for(let t=1;t<e.length;t++){const i=e[t];if(n.length>0){if(void 0===i.transformJson.alternatives)return T.t$(new Error(`The alternatives are missing from subalert, expected length: ${n.length}`));if(i.transformJson.alternatives.length!==n.length)return T.t$(new Error(`Subalert has incorrect alternatives length: expected ${n.length}, got ${i.transformJson.alternatives.length}`))}o=(0,k.zG)(o,E.UI((([e,t])=>{r[i.label].matches+=1,e.push(i.transformJson.context);for(let e=0;e<t.length;e++){const r=i.transformJson.alternatives[e];a(r,(t=>n[e].replacements.add(t))),t[e]=(0,k.zG)(new U.i(t[e]),(e=>e.compose(e.transform(new U.i(y.prependContext(i.transformJson.context,!0)(r)),!0))),F.e.AbsAlternative.unsafeFromDelta)}return[e,t]}))),s.push(...i.transformJson.highlights.map(y.prependContextToHighlight(i.transformJson.context))),c.push(i.highlightText)}return T.F2({subalerts:v.create({alternatives:(0,k.zG)(o,E.UI((([e,t])=>M.r3.Group.fromSubalerts(e,t)))),highlights:s}),labels:n.map((e=>{var t=e,{replacements:n}=t,r=Y(t,["replacements"]);return K(X({},r),{replacementTexts:Array.from(n)})})),highlightText:c})}(e,t))))}(e,E.ij(t.labels)),T.fS((e=>(C.C8.Logging.getLogger("coreclients.capi.data").error("Error repacking superalert",e),{highlightText:[]})))))))))},e.isFullSentence=function(e){return"true"===e.full_sentence_rewrite||"true"===e.full_sentence_fluency_rewrite},e.belongsToAnySpecialCategory=function(e){const t=c(e);return-1!==Object.values(u.SpecialCategory).findIndex(t)},e.belongsToSpecialCategory=c,e.withPosition=l,e.hasPosition=d,e.withTransformJson=h,e.withAlternatives=function(e){return h(e)&&E.pC(e.transformJson.alternatives)},e.withSubalerts=p,e.match=g,e.matchBy=function(e,t,n){return r=>g(r,e,t,n)},(e=>{function t(e){return e.end-e.begin}function n(e){return e.highlightEnd-e.highlightBegin}e.shift=function(e,t){return{begin:e.begin+t,end:e.end+t,highlightBegin:e.highlightBegin+t,highlightEnd:e.highlightEnd+t}},e.rebase=function(e,t){return{begin:t.transformPosition(e.begin,!0),end:t.transformPosition(e.end,!0),highlightBegin:t.transformPosition(e.highlightBegin,!0),highlightEnd:t.transformPosition(e.highlightEnd,!0)}},e.getReplacementLength=t,e.getHighlightLength=n,e.isSquashed=function(e){return 0===t(e)||0===n(e)},e.hasEqualLength=function(e,r){return t(e)===t(r)&&n(e)===n(r)}})(e.Position||(e.Position={})),e.isPlagiarism=function(e){return void 0!==e.cardLayout&&"Originality"===e.cardLayout.outcome},e.isOneGap=function(e){return void 0!==e.extra_properties&&"gap_transform"in e.extra_properties},e.isTakeaway=function(e){return void 0!==e.extra_properties&&"takeawayScore"in e.extra_properties},e.hasDrilldownTree=function(e){return void 0!==e.extra_properties&&"drilldownTree"in e.extra_properties},e.isShortenIt=function(e){return void 0!==e.extra_properties&&"shorten_it"in e.extra_properties},e.isToneAI=function(e){return void 0!==e.extra_properties&&"tone_slider"in e.extra_properties},e.isEthicalAI=function(e){return void 0!==e.extra_properties&&"ethical_ai_external_link"in e.extra_properties},e.isCitationDetection=function(e){return void 0!==e.extra_properties&&"citation_detection"in e.extra_properties},e.isSuggestedSnippet=function(e){return void 0!==e.extra_properties&&"suggested_snippet_text"in e.extra_properties&&"suggested_snippet_lib_link"in e.extra_properties},e.isKnowledgeHubSuggestedTerm=function(e){return"KnowledgeHub/SuggestedTerm/SuggestedTerm"===e.pname},e.isHidden=function(e){return!0===e.hidden},e.isRawAlert=function(e){if(!Boolean(e))return!1;const t=e;return Number.isInteger(t.rev)&&g(t,(e=>Number.isInteger(e.begin)&&Number.isInteger(e.end)&&Number.isInteger(e.highlightBegin)&&Number.isInteger(e.highlightEnd)),(e=>e.transformJson.highlights.length>0),(e=>e.labels.length>0))},e.mock={id:e.Id.create(""),rev:0,pname:"Spelling/BritishVsAmerican/BrInstOfAm/BrInstOfAm",group:"ContextualSpelling",point:"BrInstOfAm",category:"BritishVsAmerican",categoryHuman:"British vs American",hidden:!1,text:"centralise",todo:"correct",minicardTitle:"correct",title:"Inconsistent spelling",cost:1,transforms:["<span class='gr_grammar_del'>centralise</span><span class='gr_grammar_ins'>centralize</span>"],details:"<p>One of&nbsp;the most obvious differences between American and British English is&nbsp;the spelling of&nbsp;certain words such as&nbsp;<b>color/colour, learned/learnt,</b> and <b>toward/towards</b>. Typically, the spelling of&nbsp;words like these only varies by&nbsp;one or&nbsp;two letters. In&nbsp;the interest of&nbsp;consistency and clarity, you should use the spelling that will be&nbsp;more familiar to&nbsp;your intended audience.\n",explanation:"<p>The word <b>centralise</b> is&nbsp;a&nbsp;British English spelling. In&nbsp;the interest of&nbsp;consistency, consider replacing it&nbsp;with the American English spelling.\n",examples:'<p><span class="grey">British: I&nbsp;wish you success in&nbsp;all your endeavours.</span><br/><span class="grey">American: I&nbsp;wish you success in&nbsp;all your endeavors.</span><br/><p><span class="grey">British: Sweet yoghurts contain a&nbsp;lot of&nbsp;sugar.</span><br/><span class="grey">American: Sweet yogurts contain a&nbsp;lot of&nbsp;sugar.</span><br/><p><span class="grey">British: Serena moved towards the blinking light.</span><br/><span class="grey">American: Serena moved toward the blinking light.</span><br/>',free:!0,impact:"critical",highlightBegin:5092,highlightEnd:5102,highlightText:[""],begin:5092,end:5102,replacements:["centralize"],extra_properties:{priority:"2"},cardLayout:{bundle:"Fix spelling and grammar",bundleRank:10,group:"Spelling",rank:10,outcome:"Correctness"},transformJson:v.create({highlights:[{s:5092,e:5102}],alternatives:E.YP}),view:"all",inline:"inline"},e.mockPlagiarism={id:e.Id.create(""),rev:0,transforms:[],title:"Citation audit",cost:1,details:"",explanation:"",examples:"",free:!1,impact:"advanced",hidden:!1,todo:"",minicardTitle:"",cardLayout:{bundle:"Plagiarism",bundleRank:10,group:"Unoriginal content",rank:0,outcome:"Originality"},category:"Plagiarism",categoryHuman:"Unoriginal content",begin:156,end:697,text:"",group:"Plagiarism",pname:"Plagiarism/Plagiarism/UnoriginalContent",point:"UnoriginalContent",highlightBegin:156,highlightEnd:697,highlightText:[""],replacements:[],extra_properties:{},transformJson:v.create({highlights:[{s:1,e:40}],alternatives:E.YP}),view:"all",inline:"not_inline"},e.mockWithSubalerts={id:e.Id.create(""),point:"Capitalization",title:"Inconsistent capitalization",details:"<p>For certain words, capitalization preferences can vary between style guides. <i>Internet</i> was once routinely capitalized, for example. However, in recent years many style guides have begun advising writers to lowercase the word: <i>internet</i>. Whether you choose to capitalize a particular term or not, its best to choose one style and use it consistently throughout the same document.\n",explanation:"<p>You wrote <b>Country</b> once and <b>country</b> twice. Both spellings are acceptable, but its best not to switch back and forth. Choose whether or not to capitalize this word throughout your text.\n",examples:'<p><span class="grey">Inconsistent: Office life was different before the <b>Internet</b>. Education has changed because of the <b>internet</b>, too.</span><br/><span class="grey">Consistent: Office life was different before the <b>internet</b>. Education has changed because of the <b>internet</b>, too.</span><br/><span class="grey">Consistent: Office life was different before the <b>Internet</b>. Education has changed because of the <b>Internet</b>, too.</span><br/>',todo:"capitalize consistently",minicardTitle:"capitalize consistently",free:!1,hidden:!1,labels:[{label:"Country",matches:1,replacementTexts:["Country"]},{label:"country",matches:2,replacementTexts:["country"]}],highlightText:["Country","country"],cost:1,subalerts:v.create({highlights:[{s:144,e:162},{s:755,e:778},{s:1458,e:1481}],alternatives:E.G(M.r3.Group.fromSubalerts([{s:144,e:162},{s:755,e:778},{s:1458,e:1481}],[F.e.AbsAlternative.unsafeFromDelta({ops:[{retain:144,attributes:{type:F.e.Edit.TypeExt.OPTIONAL_CONTEXT}},{delete:7,attributes:{type:F.e.Edit.Type.MAIN}},{insert:"Country",attributes:{type:F.e.Edit.Type.MAIN}}]}),F.e.AbsAlternative.unsafeFromDelta({ops:[{retain:144,attributes:{type:F.e.Edit.TypeExt.OPTIONAL_CONTEXT}},{delete:7,attributes:{type:F.e.Edit.Type.MAIN}},{insert:"country",attributes:{type:F.e.Edit.Type.MAIN}}]})]))}),category:"Inconsistency",text:"",group:"Style",pname:"Style/Inconsistency/Capitalization/Capitalization",rev:0,replacements:[],impact:"advanced",extra_properties:{priority:"4"},cardLayout:{bundle:"Keep your style consistent",bundleRank:10,group:"Consistency",rank:160,outcome:"Correctness"},categoryHuman:"Text Inconsistencies",updatable:!0,view:"all",inline:"not_inline"},e.clearUserTextFields=function(e){const t=e,{text:n,replacements:r,highlightText:i,transformJson:o,transforms:s,details:a,explanation:c,examples:l}=t;return Y(t,["text","replacements","highlightText","transformJson","transforms","details","explanation","examples"])},e.unsafeGetPosition=function(e){return(0,D.kG)(d(e),"raw alert should have a position"),e},e.unsafeGetTransformJson=function(e){return(0,D.kG)(h(e),"raw alert should have transformJson"),e}})(w||(w={}));var Z,J=(e=>(e.NOT_AUTHORIZED="not_authorized",e.SESSION_NOT_INITIALIZED="session_not_initialized",e.BAD_REQUEST="bad_request",e.BACKEND_ERROR="backend_error",e.AUTH_ERROR="auth_error",e.RUNTIME_ERROR="runtime_error",e.ILLEGAL_DICT_WORD="illegal_dict_word",e.TIMEOUT="timeout",e.CANNOT_FIND_SYNONYM="cannot_find_synonym",e.CANNOT_GET_TEXT_STATS="cannot_get_text_stats",e.GB_RULE_ERROR="gb_rule_error",e))(J||{}),Q=(e=>(e.RENDERED="RENDERED",e.IGNORE="IGNORE",e.ADD_TO_DICTIONARY="ADD_TO_DICTIONARY",e.LOOKED="LOOKED",e.ACCEPTED="ACCEPTED",e.CLOSED="CLOSED",e.ACKNOWLEDGED="ACKNOWLEDGED",e.HIDE="HIDE",e.UNLOCK="UNLOCK",e.LIKE="LIKE",e.DISLIKE="DISLIKE",e.WRONG_SUGGESTION="WRONG_SUGGESTION",e.OFFENSIVE_CONTENT="OFFENSIVE_CONTENT",e.EXPANDED="EXPANDED",e.IGNORE_BULK_ACCEPTED="IGNORE_BULK_ACCEPTED",e.USER_SATISFACTION_FEEDBACK="USER_SATISFACTION_FEEDBACK",e))(Q||{}),ee=(e=>(e.DRILLDOWN="DRILLDOWN",e))(ee||{}),te=(e=>(e.BULK_ACCEPTED="BULK_ACCEPTED",e))(te||{}),ne=(e=>(e.LENS_CLOSE="LENS_CLOSE",e.LENS_OPEN="LENS_OPEN",e.DISMISS_BY_LENS="DISMISS_BY_LENS",e))(ne||{}),re=(e=>(e.EMOTION_LIKE="EMOTION_LIKE",e.EMOTION_DISLIKE="EMOTION_DISLIKE",e.EMOTION_OFFENSIVE="EMOTION_OFFENSIVE",e))(re||{}),ie=(e=>(e.WritingExpert="WRITING_EXPERT",e))(ie||{}),oe=(e=>(e.AiStudio="AI_STUDIO",e))(oe||{}),se=(e=>(e.G2_UI="G2_UI",e))(se||{}),ae=(e=>(e.Apply="APPLY",e.Revert="REVERT",e.RevertLook="REVERT_LOOK",e.CardPreviewLooked="CARD_PREVIEW_LOOKED",e.Appeared="APPEARED",e.IndividualPreviewLook="INDIVIDUAL_PREVIEW_LOOK",e.IndividualPreviewApply="INDIVIDUAL_PREVIEW_APPLY",e.IndividualPreviewDismiss="INDIVIDUAL_PREVIEW_DISMISS",e.Skipped="SKIPPED",e))(ae||{}),ce=(e=>(e.EMOTION_SENTENCE_LIKE="EMOTION_SENTENCE_LIKE",e.EMOTION_SENTENCE_DISLIKE="EMOTION_SENTENCE_DISLIKE",e))(ce||{}),le=(e=>(e.RECHECK_SHOWN="RECHECK_SHOWN",e))(le||{}),ue=(e=>(e.SYNONYM_ACCEPTED="SYNONYM_ACCEPTED",e.SYNONYM_DISMISSED="SYNONYM_DISMISSED",e))(ue||{}),de=(e=>(e.MUTE="MUTE",e.UNMUTE="UNMUTE",e))(de||{}),he=(e=>(e.AUTOCORRECT_ACCEPT="AUTOCORRECT_ACCEPT",e.AUTOCORRECT_DISMISS="AUTOCORRECT_DISMISS",e.AUTOCORRECT_REPLACE="AUTOCORRECT_REPLACE",e))(he||{}),pe=(e=>(e.COMPLETION_SHOWN="COMPLETION_SHOWN",e.COMPLETION_IGNORED="COMPLETION_IGNORED",e.COMPLETION_ACCEPTED="COMPLETION_ACCEPTED",e.COMPLETION_REJECTED="COMPLETION_REJECTED",e))(pe||{}),ge=(e=>(e.AUTOAPPLY_TRIGGERED="AUTOAPPLY_TRIGGERED",e.AUTOAPPLY_LOOKED="AUTOAPPLY_LOOKED",e.AUTOAPPLY_REVERTED="AUTOAPPLY_REVERTED",e.AUTOAPPLY_ACCEPT="AUTOAPPLY_ACCEPT",e.AUTOAPPLY_AFFECTED_BY_TEXTCHANGE="AUTOAPPLY_AFFECTED_BY_TEXTCHANGE",e))(ge||{}),fe=(e=>(e.SNIPPET_ACCEPTED="SNIPPET_ACCEPTED",e))(fe||{}),me=(e=>(e.ASSISTANT_OPENED="ASSISTANT_OPENED",e))(me||{});(Z||(Z={})).willRemoveAlert=function(e){return"IGNORE"===e||"OFFENSIVE_CONTENT"===e||"WRONG_SUGGESTION"===e||"ADD_TO_DICTIONARY"===e||"LIKE"===e||"DISLIKE"===e||"ACKNOWLEDGED"===e||"HIDE"===e};var be=(e=>(e.Inline="inline",e.Hover="hover",e.Click="click",e.SidebarPriority="sidebar-priority",e.Sidebar="sidebar",e.Vbar="vbar",e.UnderlineWithTeaser="underline_with_teaser",e))(be||{}),ye=(e=>(e.Context="context",e.GnarContainerId="gnar_containerId",e))(ye||{});const _e=300;var ve,we,Se;(ve||(ve={})).generatePoints=function(e,t,n){const r=(e,t)=>Math.max(Math.trunc(e/t),(0,R.TN)(e));return(0,G.j6)(r(e,2),(e=>(0,G.j6)(r(t,3),(t=>({value:Math.random()*n,alertIds:[],footprint:`${100*e+t}`})))))},((Se=we||(we={})).Id||(Se.Id={})).create=e=>e.toString()},72847:(e,t,n)=>{n.d(t,{AF:()=>s,hX:()=>i});var r,i,o,s=(e=>(e.NotFixed="NOT_FIXED",e))(s||{});(r||(r={})).is=e=>t=>t.check===e,(o=i||(i={})).is=function(...e){return t=>e.some((e=>e===t.kind))},o.isUserFeedbackWithGeneralScore=function(e){var t;return Boolean(null==(t=e.outcomeScores)?void 0:t.GeneralScore)},o.isUserFeedbackWithScoreStatus=function(e){return Boolean(e.scoreStatus)}},26495:(e,t,n)=>{n.d(t,{d1:()=>l,v0:()=>u,zV:()=>v});var r=Object.defineProperty,i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,a=(e,t,n)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,c=(e,t)=>{for(var n in t||(t={}))o.call(t,n)&&a(e,n,t[n]);if(i)for(var n of i(t))s.call(t,n)&&a(e,n,t[n]);return e};const l=Math.pow(2,32)/2;var u,d,h,p,g,f,m,b,y,_,v=(e=>(e.alertsUpdate="alerts_update",e.textInfo="text_info",e.freeAdvancedChecks="free_inline_advanced_alerts",e.readability="readability_check",e.sentenceVariety="sentence_variety_check",e.fillerWords="filler_words_check",e.alertsChanges="alerts_changes",e.freeClarityChecks="free_clarity_alerts",e.superAlerts="super_alerts",e.consistency="consistency_check",e.setGoalsLink="set_goals_link",e.emogenieCheck="emogenie_check",e.toneCards="tone_cards",e.alternativeDeletesCard="alternative_deletes_card",e.voxCheck="vox_check",e.plagiarismAlertsUpdate="plagiarism_alerts_update",e.fullSentenceRewrite="full_sentence_rewrite_card",e.listCard="turn_to_list_card",e.userMutes="user_mutes",e.completions="completions",e.muteQuotedAlerts="mute_quoted_alerts",e.keyTakeaways="key_takeaways_v4",e.supportsFormatting="formatting",e.supportsButtonTransformCards="transform_with_button_card",e.priorityAlertsView="priority_alerts_view",e.proofit="realtime_proofit",e.freeOccasionalPremiumAlerts="free_occasional_premium_alerts",e.gapTransformCard="gap_transform_card",e.toneAI="tone_slider_card",e.ethicalAI="ethical_ai_card",e.enclosingHighlight="enclosing_highlight",e.mainStartHighlight="main_start_highlight",e.drilldownCard="drilldown_card",e.shortenIt="shorten_it",e.ideasGalleryLink="ideas_gallery_link",e.citations="citations",e.citation_detection_card="citation_detection_card",e.citation_gap="citation_gap",e.reconnect="reconnect",e.suggestedSnippets="suggested_snippets",e.knowledgeHubSuggestedTerms="knowledge_hub_suggested_terms",e.knowledgeHub="knowledge_hub",e.autoapply="autoapply",e.cheetah="cheetah",e.gbContext="gb_context",e.vbarAlerts="vbar_alerts",e.gDebugger="g_debugger",e.g2UI="g2_ui",e.individualPreviewReverts="INDIVIDUAL_PREVIEW_REVERTS",e.individualPreviewImportantRetains="INDIVIDUAL_PREVIEW_IMPORTANT_RETAINS",e.lockedUIDelayedUnlock="locked_ui_debounced_unlock_on_focus",e.touchtypist="touchtypist",e.lazyVbarRewriteCard="lazy_vbar_rewrite_card",e.superUnderlines="super_underlines",e))(v||{});d=u||(u={}),(h=d.SessionMode||(d.SessionMode={})).READ_ONLY="READ_ONLY",h.AI_STUDIO_PREVIEW="AI_STUDIO_PREVIEW",(p=d.ScoresStatus||(d.ScoresStatus={})).OK="OK",p.TOO_SMALL="TOO_SMALL",p.SENSITIVE="SENSITIVE",p.ERROR="ERROR",(e=>{const t={Clarity:0,Correctness:0,Engagement:0,Tone:0,"Style guide":0,GeneralScore:0};e.normalize=e=>c(c({},t),e)})(d.OutcomeScores||(d.OutcomeScores={})),(d.AttentionHeatmap||(d.AttentionHeatmap={})).hasAttentionInfo=function(e){return"attentionScore"in e&&"showAttentionCard"in e},g=d.Survey||(d.Survey={}),f=g.Data||(g.Data={}),m=f.BaseSurvey||(f.BaseSurvey={}),(b=m.Placement||(m.Placement={})).gmail="gmail",b.gdocs="gdocs",b.vbar="vbar",b.ggo="ggo",b.writing_expert_accept_card="writing_expert_accept_card",b.writing_expert_dismiss_card="writing_expert_dismiss_card",b.writing_expert_widget="writing_expert_widget",b.ai_studio_feed="ai_studio_feed",(y=f.ScoreSurvey||(f.ScoreSurvey={})).type="score",(y.Score||(y.Score={})).declined="declined",(_=f.OpenAnswerScoreSurvey||(f.OpenAnswerScoreSurvey={})).type="open_answer_score",_.scoreStage="score",_.submitStage="submit"},32004:(e,t,n)=>{n.d(t,{e:()=>r});var r,i,o,s,a=n(12518),c=n(58303),l=n(90023),u=n(95869),d=Object.defineProperty,h=Object.defineProperties,p=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,b=(e,t,n)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;((i=r||(r={})).Range||(i.Range={})).isEmpty=function(e){return e.e-e.s==0},o=i.Edit||(i.Edit={}),(s=o.Type||(o.Type={})).MAIN="main",s.IMPORTANT="important",(o.TypeExt||(o.TypeExt={})).OPTIONAL_CONTEXT="optional_context",(e=>{function t(e){return(0,l.zG)(e.ops,c.DT((e=>-1===e.findIndex(t))),c.g_((()=>{return a.t$({ops:(n=e.ops,n.reduce(((e,n,r)=>{if(t(n,r)){const t=n.attributes,{type:r}=t,i=((e,t)=>{var n={};for(var r in e)f.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&g)for(var r of g(e))t.indexOf(r)<0&&m.call(e,r)&&(n[r]=e[r]);return n})(t,["type"]);e.push(((e,t)=>h(e,p(t)))(((e,t)=>{for(var n in t||(t={}))f.call(t,n)&&b(e,n,t[n]);if(g)for(var n of g(t))m.call(t,n)&&b(e,n,t[n]);return e})({},n),{attributes:i}))}else e.push(n);return e}),[]))});var n}),(e=>a.F2({ops:e}))));function t(e,t){return t>0&&u.s.isRetain(e)&&void 0!==e.attributes&&"optional_context"===e.attributes.type}}e.unsafeFromDelta=function(e){return(0,l.zG)(e,t,a.g_(l.yR,l.yR))},e.fromDelta=t})(i.AbsAlternative||(i.AbsAlternative={}))},24961:(e,t,n)=>{n.d(t,{Dd:()=>u,HQ:()=>h,wf:()=>d});var r=n(36661),i=n(63332);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function a(e){return function(e){if(Array.isArray(e))return e}(e)||s(e)||l(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e){return function(e){if(Array.isArray(e))return o(e)}(e)||s(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function u(e){var t,n=a(Object.keys(e).map((function(t){return e[t]}))),i=n[0],o=n.slice(1);return(0,r.S)((function(e){return(t=e).literal.apply(t,[i].concat(c(o)))}))}function d(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.S)((function(e){return t.reduce((function(t,n){return e.intersect(n)(t)}))}))}var h={URI:i.ov,literal:function(){return i.id()},string:i.id(),number:i.id(),boolean:i.id(),nullable:i.AG,type:i.dt,struct:i.n_,partial:i.r$,record:i.IM,array:i.IX,tuple:i.bc,intersect:i.wf,sum:i.Sm,lazy:function(e,t){return i.Vo(t)},readonly:i.OT}},82096:(e,t,n)=>{var r;n.d(t,{K:()=>r}),function(e){e[e.initial=0]="initial",e[e.applied=1]="applied"}(r||(r={}))},33442:(e,t,n)=>{n.d(t,{Yz:()=>o});var r=n(58303),i=n(48758);const o=e=>i.S.isCapiAlert(e)&&r.pC(e.knowledgeHubCardType)},48758:(e,t,n)=>{n.d(t,{S:()=>i});var r,i,o=n(28642),s=n(82096),a=n(33442),c=n(78767),l=n(43389),u=n(67385);!function(e){e.capi="capiAlert",e.autocorrect="autocorrectAlert",e.touchTypist="touchTypistAlert",e.revertAutoApply="revertAutoAppliedAlert",e.snippetsTemplate="snippetsTemplateAlert"}(r||(r={})),function(e){function t(e){return Object.values(r).includes(e._tag)}function n(e){return e._tag===r.capi}function i(e){return e._tag===r.autocorrect}function d(e){return e._tag===r.touchTypist}function h(e){return e._tag===r.revertAutoApply}function p(e){return e._tag===r.snippetsTemplate}function g(e){return n(e)&&!u.DD.isMuted(e)}function f(e){return g(e)&&!u.DD.isHidden(e)}function m(e){return n(e)&&u.DD.isRegular(e)}function b(e){return n(e)&&u.DD.isWithSubAlerts(e)}function y(e){return n(e)&&u.DD.isWithTransformJson(e)}e.isCommonAlert=t,e.isCapiAlert=n,e.isNotCapiAlert=function(e){return!n(e)},e.isAutocorrectAlert=i,e.isTouchTypistAlert=d,e.isCapiAlertToAutoApply=function(e){return n(e)&&!0===e.autoapply},e.isRevertAutoApplyAlert=h,e.isSnippetsTemplatingAlert=p,e.isUnmutedCapiAlert=g,e.isHiddenCapiAlert=function(e){return g(e)&&u.DD.isHidden(e)},e.isFreePremiumLockedCapiAlert=function(e){return g(e)&&u.DD.isFreePremiumLockedDeprecated(e)},e.isInlineLockedUICapiAlert=function(e){return g(e)&&u.DD.isInline(e)&&(u.DD.isFreePremiumLocked(e)||u.DD.isFreePremiumUphook(e))},e.isFreePremiumUnlockedCapiAlert=function(e){return g(e)&&u.DD.isFreePremiumUnlocked(e)},e.isVisibleCapiAlert=f,e.isVisibleInlineCapiAlert=function(e){return f(e)&&u.DD.isInline(e)},e.isVisibleNotInlineCapiAlert=function(e){return f(e)&&!u.DD.isInline(e)},e.isRegularCapiAlert=m,e.isSuperCapiAlert=b,e.isTransformJsonCapiAlert=y,e.isSuggestedSnippetAlert=function(e){return y(e)&&e.isSuggestedSnippet},e.isToneAIAlert=function(e){return y(e)&&e.isToneAI},e.isEthicalAIAlert=function(e){return(y(e)||b(e))&&e.isEthicalAI},e.isSuggestionAlert=function(e){return!(0,a.Yz)(e)},e.isVbarAlert=function(e){return"true"===e.extraProperties.vbar},e.isWeTeaserAlert=function(e){return"true"===e.extraProperties.underline_with_teaser},e.canResizeAlert=function(t){return Boolean(e.isCapiAlert(t)&&t.updatable)},e.isCorrectnessAlert=function(e){return t(e)&&n(e)&&e.cardLayout.outcome===u.TC.correctness},e.isFullSentenceRewriteAlert=function(e){return t(e)&&n(e)&&"true"===e.extraProperties.full_sentence_rewrite},e.ordering={greaterThanOrEqual:(e,t)=>{if(p(e)||p(t))return p(e);if(d(e)||d(t))return d(e);if(n(e)){if(n(t))return u.DD.ordering.greaterThanOrEqual(e,t);if(i(t))return t.state===s.K.applied;if(h(t))return!1;(0,c.vE)(t)}else{if(!n(t))return i(e)?!!h(t)||e.state===s.K.applied:!!i(t)&&t.state!==s.K.applied;if(i(e))return e.state===s.K.initial;if(h(e))return!1;(0,c.vE)(e)}},areConflicting:(e,t)=>n(e)&&n(t)?u.DD.ordering.areConflicting(e,t):e._tag===t._tag&&(m(e)&&m(t)&&l.SV.equals(e.transformRange,t.transformRange)||(0,o.Hx)(e.highlightRanges,t.highlightRanges,l.SV.equals)),areSame:(e,t)=>{if(n(e)&&n(t))return u.DD.ordering.areSame(e,t);if(e._tag===t._tag){const n=e=>{const{id:t,revision:n,...r}=e;return r};return(0,c.fS)(n(e),n(t))}return!1}},e.alertMapToCapiAlerts=t=>Object.values(t).filter((t=>!!t&&e.isCapiAlert(t)))}(i||(i={}))},43389:(e,t,n)=>{n.d(t,{$:()=>s,SV:()=>i});var r,i,o,s,a,c,l,u=n(28338),d=n(21147),h=n(948);!function(e){e.isNoop=function(e){return 0===e.startOffset&&0===e.endOffset}}(r||(r={})),function(e){function t(e){return{start:Math.min(e.start,e.end),end:Math.max(e.start,e.end)}}e.eq=d.MW({start:d.lr,end:d.lr}),e.normalize=t,e.mergeAdjacent=function(e){return t=>{if(0===t.length)return[];const n=[t[0]];for(let r=1;r<t.length;++r){const i=n[n.length-1];e(i,t[r])?n[n.length-1]={start:i.start,end:t[r].end}:n.push(t[r])}return n}},e.create=function(e,n){return t({start:e,end:null!=n?n:e})},e.translate=function(e,t){return 0===t?e:{start:e.start+t,end:e.end+t}},e.transform=function(e,t){return r.isNoop(t)?e:{start:e.start+t.startOffset,end:e.end+t.endOffset}},e.rebase=function(e,t){return t.reduce(((e,t)=>{const n=h.q.getTransformOffset(t);return{start:t.pos<=e.start?Math.max(t.pos,e.start+n):e.start,end:t.pos<e.end?Math.max(t.pos,e.end+n):e.end}}),e)},e.contains=function(e,t,n){const r=n?t.start<=e.end:t.start<e.end;return t.start>=e.start&&r&&t.end>=e.start&&t.end<=e.end},e.isAdjacent=function(e,t){return e.end===t.start||t.end===e.start},e.intersects=function(e,t){return e.start>=t.start&&e.start<t.end||t.start>=e.start&&t.start<e.end},e.equals=function(t,n){return e.eq.equals(t,n)},e.toString=function(e){return`[${e.start}, ${e.end}]`},e.isCollapsed=function(e){return e.start===e.end},e.convertFromRawTransform=function(e){return{start:e.s,end:e.e}},e.length=function(e){return e.end-e.start}}(i||(i={})),function(e){e.hasTransformJSON=function(e){return"transformJSON"in e}}(o||(o={})),function(e){function t(e,t,n){return e.slice(t.start,t.end)===n}function n(e){return"transformJSON"in e&&Boolean(e.transformJSON)}function r(e){return"subalerts"in e&&e.subalerts&&"labels"in e&&Boolean(e.labels)}function o(e){return!n(e)&&!r(e)}function s({withPosition:e,withTransformJSON:t,withSubAlerts:i}){return s=>o(s)?e(s):n(s)?t(s):r(s)?i(s):void(0,u.vE)(s)}e.convertHighlightRangeFromRawTransform=e=>({...i.convertFromRawTransform(e),type:e.type}),e.isConsistentWithText=function(n,r){let i;if(e.isWithSubAlerts(n))i=n.highlightRanges.every(((e,i)=>t(r,e,n.highlightTexts[i])));else{const e=n.highlightRanges.find((e=>"enclosing"===e.type))||n.highlightRanges[0];i=t(r,e,n.highlightTexts[0])}return i&&(!e.isRegular(n)||t(r,n.transformRange,n.transformText))},e.isWithTransformJson=n,e.isWithSubAlerts=r,e.isWithPosition=o,e.isRegular=function(e){return o(e)||n(e)},e.match=s,e.map=function({withPosition:e,withTransformJSON:t,withSubAlerts:n}){return s({withPosition:e,withTransformJSON:t,withSubAlerts:n})}}(s||(s={})),function(e){e.waitingForConnection="waitingForConnection",e.waitingForReconnection="waitingForReconnection",e.startingConnection="startingConnection",e.newSessionStarted="newSessionStarted",e.existingSessionStarted="existingSessionStarted"}(a||(a={})),function(e){e.ready="ready",e.inProgress="inProgress",e.reconnectRequired="reconnectRequired"}(c||(c={})),function(e){e.unknown="unknown",e.clientQueueNonEmpty="clientQueueNonEmpty",e.noSuchSession="noSuchSession",e.cannotReconnectToSelf="cannotReconnectToSelf",e.differentUsers="differentUsers",e.sessionClosed="sessionClosed",e.messageCountIncorrect="messageCountIncorrect"}(l||(l={}))},67385:(e,t,n)=>{n.d(t,{DD:()=>m,TC:()=>o});var r,i,o,s=n(39953),a=n(28642),c=n(28338),l=n(55709),u=n(94173),d=n(58303),h=n(2373),p=n(26495),g=n(78767),f=n(43389);!function(e){e.synonym="Synonym",e.plagiarism="Plagiarism",e.grammar="Grammar",e.contextualSpelling="ContextualSpelling",e.sentenceStructure="SentenceStructure",e.punctuation="Punctuation",e.style="Style",e.enhancement="Enhancement",e.spelling="Spelling",e.voxStyle="VoxStyle",e.snippets="Snippets",e.correctness="Correctness",e.other="Other"}(r||(r={})),function(e){e.sales_crm="sales_crm",e.sales_engagement="sales_engagement",e.sales_enablement="sales_enablement",e.marketing_email_automation="marketing_email_automation",e.marketing_content="marketing_content",e.customer_service="customer_service",e.customer_surveys_surveys="customer_surveys_surveys",e.recruiting="recruiting",e.training_learning="training_learning",e.project_management="project_management",e.legal="legal",e.contractors="contractors",e.human_resources="human_resources",e.email="email",e.business_chat="business_chat"}(i||(i={})),function(e){e.correctness="correctness",e.clarity="clarity",e.engagement="engagement",e.tone="tone",e.vox="vox",e.knowledgeHub="knowledgeHub",e.other="other"}(o||(o={}));o.clarity,o.correctness,o.engagement,o.tone;var m,b,y,_;!function(e){function t({withPosition:t,withTransformJSON:n,withSubAlerts:r}){return i=>e.isWithPosition(i)?t(i):e.isWithTransformJson(i)?n(i):e.isWithSubAlerts(i)?r(i):void(0,c.vE)(i)}e.isWithTransformJson=e=>f.$.isWithTransformJson(e),e.isWithSubAlerts=e=>f.$.isWithSubAlerts(e),e.isWithPosition=e=>f.$.isWithPosition(e),e.isRegular=e=>f.$.isRegular(e),e.match=t;const n={Correctness:o.correctness,Clarity:o.clarity,Engagement:o.engagement,Tone:o.tone,"Style guide":o.vox,"Knowledge Hub":o.knowledgeHub};e.createOutcomeType=function(e){return e&&n[e]||o.other},e.ordering={greaterThanOrEqual:(e,t)=>e.isEthicalAIStandWithUkraine||t.isEthicalAIStandWithUkraine?e.isEthicalAIStandWithUkraine:e.isSuggestedSnippet||t.isSuggestedSnippet?e.priority>=t.priority:!e.isFree&&t.isFree||e.isFree&&!t.isFree?e.isVox||t.isVox?e.isVox:e.isFree:e.group===r.spelling&&t.group===r.spelling||e.group===r.contextualSpelling&&t.group===r.contextualSpelling||e.isVox&&t.isVox?e.priority>=t.priority:e.group===r.spelling||t.group!==r.spelling&&e.priority<=t.priority,areConflicting:(t,n)=>(!t.isFree&&!n.isFree||t.isFree&&n.isFree||t.isVox||n.isVox)&&!e.isMuted(t)&&!e.isMuted(n)&&(e.isRegular(t)&&e.isRegular(n)&&f.SV.equals(t.transformRange,n.transformRange)||(0,a.Hx)(t.highlightRanges,n.highlightRanges,f.SV.equals)),areSame:(e,n)=>{const r=e=>{const n=e=>({highlights:e.highlights,alternatives:(0,s.zG)(e.alternatives,d.UI((e=>({alternatives:e.alternatives}))))}),r=(0,s.zG)(e,t({withPosition:e=>({highlightTexts:e.highlightTexts,highlightRanges:e.highlightRanges,transformText:e.transformText,transformRange:e.transformRange,replacements:e.replacements}),withTransformJSON:e=>n(e.transformJSON),withSubAlerts:e=>n(e.subalerts)}));return Object.assign(r,{priority:e.priority,isFree:e.isFree,group:e.group,outcome:e.outcome,category:e.category}),r};return(0,g.fS)(r(e),r(n))}},e.isInline=e=>e.inline===h.wQ.Inline.inline,e.isMuted=e=>void 0!==e.muted&&e.muted!==h.JW.MutedByType.NOT_MUTED,e.isFreePremiumLockedDeprecated=e=>"locked_transform"===e.freePremium,e.isFreePremiumLocked=e=>"locked"===e.freePremium,e.isFreePremiumUnlocked=e=>"unlocked"===e.freePremium,e.isFreePremiumUphook=e=>"uphook"===e.freePremium,e.isHidden=e=>{var t;return null!==(t=e.isHidden)&&void 0!==t&&t}}(m||(m={})),function(e){let t;!function(e){e.start="start",e.add="add",e.changed="changed",e.remove="remove",e.finished="finished",e.emogenie="emogenie",e.textInfo="text_info",e.submitOtAck="submit_ot_ack",e.proofitAvailability="realtime_proofit_availability",e.proofitCancelResponse="realtime_proofit_cancel_resp",e.proofitCompleted="realtime_proofit_completed",e.proofitProgress="realtime_proofit_in_progress",e.proofitProgressError="realtime_proofit_progress_error",e.proofitProgressRejected="realtime_proofit_progress_rejected",e.proofitSubmitResponse="realtime_proofit_submit_resp",e.feedback="feedback",e.error="error",e.publishedAck="published_ack",e.submitSurveyResultAck="submit_survey_result_ack",e.showSurvey="show_survey",e.sduiAdd="sdui_add",e.sduiUpdate="sdui_update",e.sduiRemove="sdui_remove",e.asyncCheckFinished="async_check_finished",e.toggleChecksAck="toggle_checks_ack",e.setContextAck="set_context_ack",e.touchTypistTriggerResponse="trigger_touch_typist"}(t=e.Type||(e.Type={})),e.start=function(e){return{_tag:t.start,domainName:e.domainName,domainCategory:e.domainCategory,userMutedCategories:e.userMutedCategories,defaultDocumentContext:(0,s.zG)(l.R$.serializeDefault((0,s.zG)(e.defaultDocumentContext,d.g_((()=>l.R$.defaultContextFallback),u.y))),(e=>e)),sessionUuid:e.sessionUuid,isNewSession:e.isNewSession,allowedFeatures:e.allowedFeatures,cheetahState:e.cheetahState,maxWsMessageSize:e.maxWsMessageSize}},e.add=function(e){return{_tag:t.add,alert:e}},e.change=function(e){return{_tag:t.changed,changed:e}},e.remove=function(e){return{_tag:t.remove,removedId:e}},e.finished=function(e){return{_tag:t.finished,finished:e}},e.emogenie=function(e){return{_tag:t.emogenie,emogenieReport:{emotions:e.emotions,hidden:e.hidden,institutionLogo:e.institutionLogo,brandTonesEnabled:e.brandTonesEnabled,brandTonesConfigured:e.brandTonesConfigured}}},e.textInfo=function(e){return{_tag:t.textInfo,...e}},e.submitOtAck=function(e){return{_tag:t.submitOtAck,data:e}},e.feedbackAck=function({scores:e,scoreStatus:n}){return{_tag:t.feedback,scores:e?p.v0.OutcomeScores.normalize(e):void 0,scoreStatus:n}},e.proofitAvailability=function(e){return{_tag:t.proofitAvailability,info:e}},e.proofitSubmitResponse=function(e){return{_tag:t.proofitSubmitResponse,info:e}},e.proofitProgress=function(e){return{_tag:t.proofitProgress,info:e}},e.proofitCompleted=function(e){return{_tag:t.proofitCompleted,info:e}},e.proofitProgressError=function(e){return{_tag:t.proofitProgressError,info:e}},e.proofitProgressRejected=function(e){return{_tag:t.proofitProgressRejected,info:e}},e.proofitCancelResponse=function(e){return{_tag:t.proofitCancelResponse,info:e}},e.error=function(e){return{_tag:t.error,error:"not_authorized"===e.error?"not_authorized":"unknown",raw_error:e.error,event:e}},e.publishedAck=function(e){return{_tag:t.publishedAck,survey:e.survey}},e.submitSurveyResultAck=function(){return{_tag:t.submitSurveyResultAck}},e.showSurvey=function(e){return{_tag:t.showSurvey,survey:e.survey}},e.sduiAdd=function(e){return{_tag:t.sduiAdd,event:e}},e.sduiUpdate=function(e){return{_tag:t.sduiUpdate,event:e}},e.sduiRemove=function(e){return{_tag:t.sduiRemove,event:e}},e.asyncCheckFinished=function(e){return{_tag:t.asyncCheckFinished,event:e}},e.toggleChecksAck=function(e){return{_tag:t.toggleChecksAck,event:e}},e.setContextAck=function(e){return{_tag:t.setContextAck,event:e}},e.setTouchTypistTriggerResponse=function(e){return{_tag:t.touchTypistTriggerResponse,event:e}},e.isSDUIMessage=function(e){switch(e._tag){case t.sduiAdd:case t.sduiRemove:case t.sduiUpdate:return!0;default:return!1}},e.isPlagiarismRelatedMessage=function(e){switch(e._tag){case t.asyncCheckFinished:case t.setContextAck:case t.toggleChecksAck:return!0;default:return!1}}}(b||(b={})),function(e){e.british="british",e.american="american",e.australian="australian",e.canadian="canadian"}(y||(y={})),function(e){e.notReady="notReady",e.ready="ready",e.firstTextCheckCompleted="firstTextCheckCompleted",e.disconnected="disconnected"}(_||(_={}))},30582:(e,t,n)=>{n.d(t,{n:()=>g});var r=n(90023),i=n(32073),o=n(59179),s=n(84178),a=n(64271),c=n(90572),l=n(20161),u=n(58303),d=n(59833),h=n(3030);class p{constructor(e=[]){this._dynamicFeature=new h._(e)}get feature(){return this._dynamicFeature.instance}get viewFeature(){return this._dynamicFeature.viewInstance}get viewFeatureOption(){return this.viewFeature.view(u.ij)}get featureProxy(){return this._dynamicFeature.instanceProxy}setFeature(e){this._dynamicFeature.set(e)}}class g extends p{constructor(e,t,n,r,o=[]){super(o),this.isSupported=e,this._alertProcessor=t,this._alertFilter=n,this._importFeature=r,this._sub=new i.w0,this._featureImportRequested=!1}initOnFirstAlert(){if(!this._featureImportRequested&&this.isSupported){this._featureImportRequested=!0;const e=this._alertProcessor.alerts.state.pipe(o.U((0,r.ls)(Object.values,Array.from)),s.q(1)),t=this._alertProcessor.alerts.changes.pipe(o.U((e=>e.addedAlerts))),n=a.T(e,t).pipe(c.h((0,r.ls)(d.Ew(this._alertFilter),u.pC)),s.q(1));this._sub.add(n.pipe(l.w((()=>this._importFeature()))).subscribe((e=>{this.setFeature(e)})))}return this.viewFeatureOption}dispose(){this._sub.unsubscribe()}}},3030:(e,t,n)=>{n.d(t,{_:()=>o});var r=n(13391);class i{constructor(e,t){this._deferredCallsQueue=[],this._proxiedMethods=e.reduce(((e,n)=>(e[n]=(...e)=>{const r=t();r?r[n](...e):this._deferredCallsQueue.push((t=>t[n](...e)))},e)),{})}get proxiedMethods(){return this._proxiedMethods}execPostponedMethodCalls(e){this._deferredCallsQueue.forEach((t=>t(e))),this._deferredCallsQueue=[]}}class o{constructor(e=[]){this._instance=null,this._isLoaded=r.h.create(!1),this._instanceProxy=new i(e,(()=>this._instance))}get viewInstance(){return this._isLoaded.view((e=>e&&this._instance?this._instance:null))}get instanceProxy(){return this._instanceProxy.proxiedMethods}get instance(){return this._instance}set(e){this._instance||(this._instance=e,this._instanceProxy.execPostponedMethodCalls(e),this._isLoaded.set(!0))}dispose(){this._instance=null,this._isLoaded.set(!1)}}},53419:(e,t,n)=>{n.r(t),n.d(t,{EthicalAIFeature:()=>f});var r=n(39953),i=n(55812),o=n(81933),s=n(11042),a=n(27947),c=n(12505),l=n(70880),u=n(58303),d=n(2084),h=n(48758),p=n(99562),g=n(78767);class f{constructor(e,t,n){this._alertStateService=e,this._csActions=t,this._gnar=n,this._supportUkraineCardSeenDuringSession=new Set}initCardActionsProcessing(e,t,n,m,b){return new o.Observable((()=>{const y=new o.Subscription;return y.add(this._alertStateService.newlyHighlightedAlerts.pipe(o.filter(h.S.isEthicalAIAlert)).subscribe((e=>{this._gnar.ethicalAIAlertUnderlineShow(f.getSensitivityType(e.patternName))}))),y.add(n.pipe(o.filter(c.i.isEthicalAIItem)).subscribe((e=>{this._gnar.ethicalAIAssistantMiniCardShow(f.getSensitivityType(e.activeAlert.patternName))}))),y.add(e.pipe(o.filter(a.lY.isAlertCardShow),o.map((e=>e.alertId)),o.debounceTime(300)).subscribe((e=>{(0,r.zG)(t.getById(e),u.hX(i.bZ.isEthicalAI),d.bw((e=>{this._gnar.ethicalAIAssistantFullCardShow(f.getSensitivityType(e.patternName)),e.patternName===p.w.STAND_WITH_UKRAINE_ALERT_PNAME&&(0,r.zG)(i.bZ.getRawId(e),u.hX((e=>!this._supportUkraineCardSeenDuringSession.has(e))),d.bw((e=>{this._supportUkraineCardSeenDuringSession.add(e),this._csActions.markSupportUkraineCardSeen()})))})))}))),y.add(e.pipe(o.filter(a.lY.isEthicalAIOpenExternalLinkAction)).subscribe((e=>(0,r.zG)(t.getById(e.alertId),u.hX(i.bZ.isEthicalAI),d.bw((e=>{this._gnar.ethicalAIAssistantFullCardExternalLinkButtonClick(f.getSensitivityType(e.patternName),e.externalLink)})))))),y.add(e.pipe(o.filter(a.eI.isCardExpand),o.withLatestFrom(b),o.map((([e,t])=>l.nL.hasItems(t)?(0,r.zG)(t.currentLens.items.get(e.id),u.g_((()=>null),(e=>e.value))):null)),o.filter(g.fQ),o.filter(c.i.isEthicalAIItem)).subscribe((e=>{this._gnar.ethicalAIAssistantFullCardLearnMoreButtonClick(f.getSensitivityType(e.activeAlert.patternName))}))),y.add(e.pipe(o.filter(a.lY.isAlertIgnoreAction)).subscribe((e=>(0,r.zG)(t.getById(e.alertId),u.hX(i.bZ.isEthicalAI),d.bw((e=>{this._gnar.ethicalAIAssistantFullCardDismissButtonClick(f.getSensitivityType(e.patternName))})))))),y.add(m.pipe(o.filter(s.$.isEthicalAI)).subscribe((e=>{this._gnar.ethicalAIAlertUnderlineClick(f.getSensitivityType(e.patternName))}))),()=>y.unsubscribe()}))}static getSensitivityType(e){return e.split("/").slice(3).join("/")}}},99562:(e,t,n)=>{n.d(t,{w:()=>u});var r=n(59179),i=n(90572),o=n(26495),s=n(48758),a=n(30582),c=n(53419),l=n(78767);class u extends a.n{constructor(e,t,o,a,u){super(e,t,s.S.isEthicalAIAlert,(()=>Promise.resolve().then(n.bind(n,53419)).then((({EthicalAIFeature:e})=>new e(o,a,u))))),this.isSupported&&this._sub.add(this._alertProcessor.alerts.changes.pipe(r.U((e=>e.addedAlerts)),r.U((e=>e.find(s.S.isEthicalAIAlert))),i.h(l.fQ)).subscribe((e=>{u.ethicalAIAlertTriggered(c.EthicalAIFeature.getSensitivityType(e.patternName))})))}}!function(e){e.STAND_WITH_UKRAINE_ALERT_PNAME="Style/Sensitivity/SupportUkraine/WarLanguage",e.shouldCreate=function(e,t){var n,r,i;return null!==(i=null===(r=null===(n=t.ethicalAI)||void 0===n?void 0:n.enableByBrowser)||void 0===r?void 0:r[e])&&void 0!==i&&i},e.getRequiredDenaliSupportedFeatures=function(t,n){return e.shouldCreate(t,n)?[o.zV.ethicalAI]:[]}}(u||(u={}))},948:(e,t,n)=>{n.d(t,{q:()=>r});var r,i,o=n(93667),s=n(78767);!function(e){let t;function n(e){return e._tag===t.ins}function r(e){return e._tag===t.del}!function(e){e.ins="ins",e.del="del"}(t=e.Type||(e.Type={})),e.isIns=n,e.ins=function(e,n){return{_tag:t.ins,pos:e,text:n}},e.isDel=r,e.del=function(e,n){return{_tag:t.del,pos:e,text:n}},e.applyChanges=function(e,t){return t.reduce(((e,t)=>n(t)?e.slice(0,t.pos)+t.text+e.slice(t.pos):r(t)?e.slice(0,t.pos)+e.slice(t.pos+t.text.length):(0,s.vE)(t)),e)},e.applyChangesInverse=function(t,i){return e.applyChanges(t,i.reverse().map((t=>n(t)?e.del(t.pos,t.text):r(t)?e.ins(t.pos,t.text):(0,s.vE)(t))))},e.getTransformOffset=function(e){return n(e)?e.text.length:r(e)?-e.text.length:void(0,s.vE)(e)},e.getRange=function(e){return{start:e.pos,end:e.pos+e.text.length}}}(r||(r={})),function(e){e.fromDiff=function(e,t,n){const i=o(e,t,n);let s=0;const a=[];for(const e of i)e[0]===o.EQUAL?s+=e[1].length:e[0]===o.INSERT?(a.push(r.ins(s,e[1])),s+=e[1].length):(e[0],a.push(r.del(s,e[1])));return a}}(i||(i={}))},78767:(e,t,n)=>{n.d(t,{DV:()=>d,EI:()=>p,HO:()=>b,Nf:()=>f,P2:()=>y,Vo:()=>S,W3:()=>_,_N:()=>v,b9:()=>I,bc:()=>C,cq:()=>a,fQ:()=>g,fS:()=>o,hr:()=>E,hz:()=>m,iy:()=>k,qO:()=>h,vE:()=>l,wU:()=>u,xB:()=>s});var r=n(9662),i=n(44675);const o=r.q;class s{constructor(e){this._getFallbackValue=e}init(e){if(void 0!==this._value)throw new Error("Global value already initialized.");this._value=e}get(){if(void 0===this._value){if(void 0===this._getFallbackValue)throw new Error("Global value not initialized and no fallback value provided.");this._value=this._getFallbackValue()}return this._value}}function a(e,t){return e.some((e=>e===t))?t:void 0}class c extends Error{constructor(e){super(`Matching not exhaustive: unexpected value ${JSON.stringify(e)}`)}}function l(e){throw new c(e)}function u(e){if("string"==typeof e){const t=parseInt(e,10);return isNaN(t)?void 0:t}return"number"==typeof e?e:void 0}function d(e,t){try{return e()}catch(e){return t(e)}}async function h(e,t){try{return await e()}catch(e){return t(e)}}function p(){}function g(e){return!!e}function f(e){return null!=e}function m(e){let t,n=!1;return(...r)=>(n||(n=!0,t=e(...r)),t)}function b(e,t,n){const r=new Set;let i;return(...o)=>{const s=t(...o);return r.has(s)||(r.add(s),i=e(...o)),null==n||n(...o),i}}function y(e,t){let n,r,o=!0;function s(e,n){return o&&(o=!1,r=(0,i.II)(),setTimeout((()=>{try{r.resolve(t(...n))}catch(e){r.reject(e)}finally{o=!0}}),e)),r.promise}return(...t)=>{const r=n;return n=Date.now(),s(void 0===r||n-r>=e?0:e-(n-r),t)}}function _(e,t){let n;return(...r)=>{null!==n&&clearTimeout(n),n=setTimeout((()=>{n=null,e(r)}),t)}}async function v(e,t,n=0,r=(e=>!0)){let o=t;const s=[];for(;o>0;){let t;try{o--,t={val:await e(),hasError:!1}}catch(e){t={hasError:!0,message:e&&e.message||e||""}}if(t.hasError)s.push(t.message);else if(r(t.val))return t.val;o>0&&await(0,i.gw)(n)}throw new Error(`Condition was not met after ${t} tries. Errors: '${s.join(";")}'`)}class w{constructor(e){this._factory=e,this._hasValue=!1}get hasValue(){return this._hasValue}get(){return this._hasValue||(this._value=this._factory(),this._hasValue=!0),this._value}map(e){return new w((()=>e(this.get())))}}function S(e){return new w(e)}var k;function I(e,t){const n={...e};for(const e in t){const r=t[e];void 0!==r&&(n[e]=r)}return n}function C(...e){return e}function E(e){return e.replace(/[.*+?()[\]{}^$\\/|]/g,"\\$&")}!function(e){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}e.create=function(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}}(k||(k={}))},44675:(e,t,n)=>{function r(e,t){return new Promise(((n,r)=>{setTimeout((()=>{void 0!==t?r(t):n()}),e)}))}function i(){let e,t;return{promise:new Promise(((n,r)=>{e=n,t=r})),resolve:e,reject:t}}function o(e){return new Promise(((t,n)=>{e.then(n,t)}))}function s(e){return o(Promise.all([...e].map(o)))}n.d(t,{II:()=>i,Wp:()=>s,ep:()=>c,gw:()=>r});class a extends Error{}function c(){let e={};const t=new Promise(((t,n)=>{e={resolve:t,reject:n}}));return{...e,promise:t}}},72314:function(e){e.exports=function(){const{entries:e,setPrototypeOf:t,isFrozen:n,getPrototypeOf:r,getOwnPropertyDescriptor:i}=Object;let{freeze:o,seal:s,create:a}=Object,{apply:c,construct:l}="undefined"!=typeof Reflect&&Reflect;o||(o=function(e){return e}),s||(s=function(e){return e}),c||(c=function(e,t,n){return e.apply(t,n)}),l||(l=function(e,t){return new e(...t)});const u=S(Array.prototype.forEach),d=S(Array.prototype.pop),h=S(Array.prototype.push),p=S(String.prototype.toLowerCase),g=S(String.prototype.toString),f=S(String.prototype.match),m=S(String.prototype.replace),b=S(String.prototype.indexOf),y=S(String.prototype.trim),_=S(Object.prototype.hasOwnProperty),v=S(RegExp.prototype.test),w=k(TypeError);function S(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return c(e,t,r)}}function k(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return l(e,n)}}function I(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p;t&&t(e,null);let o=r.length;for(;o--;){let t=r[o];if("string"==typeof t){const e=i(t);e!==t&&(n(r)||(r[o]=e),t=e)}e[t]=!0}return e}function C(e){for(let t=0;t<e.length;t++)_(e,t)||(e[t]=null);return e}function E(t){const n=a(null);for(const[r,i]of e(t))_(t,r)&&(Array.isArray(i)?n[r]=C(i):i&&"object"==typeof i&&i.constructor===Object?n[r]=E(i):n[r]=i);return n}function A(e,t){for(;null!==e;){const n=i(e,t);if(n){if(n.get)return S(n.get);if("function"==typeof n.value)return S(n.value)}e=r(e)}function n(){return null}return n}const x=o(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),T=o(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),O=o(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),P=o(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),R=o(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),D=o(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),N=o(["#text"]),U=o(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),M=o(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),j=o(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),F=o(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),L=s(/\{\{[\w\W]*|[\w\W]*\}\}/gm),G=s(/<%[\w\W]*|[\w\W]*%>/gm),B=s(/\${[\w\W]*}/gm),z=s(/^data-[\-\w.\u00B7-\uFFFF]/),V=s(/^aria-[\-\w]+$/),q=s(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),H=s(/^(?:\w+script|data):/i),W=s(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),$=s(/^html$/i),X=s(/^[a-z][.\w]*(-[.\w]+)+$/i);var K=Object.freeze({__proto__:null,MUSTACHE_EXPR:L,ERB_EXPR:G,TMPLIT_EXPR:B,DATA_ATTR:z,ARIA_ATTR:V,IS_ALLOWED_URI:q,IS_SCRIPT_OR_DATA:H,ATTR_WHITESPACE:W,DOCTYPE_NAME:$,CUSTOM_ELEMENT:X});const Y={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},Z=function(){return"undefined"==typeof self?null:self},J=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let n=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(n=t.getAttribute(r));const i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+i+" could not be created."),null}};function Q(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z();const n=e=>Q(e);if(n.version="3.1.6",n.removed=[],!t||!t.document||t.document.nodeType!==Y.document)return n.isSupported=!1,n;let{document:r}=t;const i=r,s=i.currentScript,{DocumentFragment:c,HTMLTemplateElement:l,Node:S,Element:k,NodeFilter:C,NamedNodeMap:L=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:G,DOMParser:B,trustedTypes:z}=t,V=k.prototype,H=A(V,"cloneNode"),W=A(V,"remove"),X=A(V,"nextSibling"),ee=A(V,"childNodes"),te=A(V,"parentNode");if("function"==typeof l){const e=r.createElement("template");e.content&&e.content.ownerDocument&&(r=e.content.ownerDocument)}let ne,re="";const{implementation:ie,createNodeIterator:oe,createDocumentFragment:se,getElementsByTagName:ae}=r,{importNode:ce}=i;let le={};n.isSupported="function"==typeof e&&"function"==typeof te&&ie&&void 0!==ie.createHTMLDocument;const{MUSTACHE_EXPR:ue,ERB_EXPR:de,TMPLIT_EXPR:he,DATA_ATTR:pe,ARIA_ATTR:ge,IS_SCRIPT_OR_DATA:fe,ATTR_WHITESPACE:me,CUSTOM_ELEMENT:be}=K;let{IS_ALLOWED_URI:ye}=K,_e=null;const ve=I({},[...x,...T,...O,...R,...N]);let we=null;const Se=I({},[...U,...M,...j,...F]);let ke=Object.seal(a(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ie=null,Ce=null,Ee=!0,Ae=!0,xe=!1,Te=!0,Oe=!1,Pe=!0,Re=!1,De=!1,Ne=!1,Ue=!1,Me=!1,je=!1,Fe=!0,Le=!1;const Ge="user-content-";let Be=!0,ze=!1,Ve={},qe=null;const He=I({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let We=null;const $e=I({},["audio","video","img","source","image","track"]);let Xe=null;const Ke=I({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ye="http://www.w3.org/1998/Math/MathML",Ze="http://www.w3.org/2000/svg",Je="http://www.w3.org/1999/xhtml";let Qe=Je,et=!1,tt=null;const nt=I({},[Ye,Ze,Je],g);let rt=null;const it=["application/xhtml+xml","text/html"],ot="text/html";let st=null,at=null;const ct=r.createElement("form"),lt=function(e){return e instanceof RegExp||e instanceof Function},ut=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!at||at!==e){if(e&&"object"==typeof e||(e={}),e=E(e),rt=-1===it.indexOf(e.PARSER_MEDIA_TYPE)?ot:e.PARSER_MEDIA_TYPE,st="application/xhtml+xml"===rt?g:p,_e=_(e,"ALLOWED_TAGS")?I({},e.ALLOWED_TAGS,st):ve,we=_(e,"ALLOWED_ATTR")?I({},e.ALLOWED_ATTR,st):Se,tt=_(e,"ALLOWED_NAMESPACES")?I({},e.ALLOWED_NAMESPACES,g):nt,Xe=_(e,"ADD_URI_SAFE_ATTR")?I(E(Ke),e.ADD_URI_SAFE_ATTR,st):Ke,We=_(e,"ADD_DATA_URI_TAGS")?I(E($e),e.ADD_DATA_URI_TAGS,st):$e,qe=_(e,"FORBID_CONTENTS")?I({},e.FORBID_CONTENTS,st):He,Ie=_(e,"FORBID_TAGS")?I({},e.FORBID_TAGS,st):{},Ce=_(e,"FORBID_ATTR")?I({},e.FORBID_ATTR,st):{},Ve=!!_(e,"USE_PROFILES")&&e.USE_PROFILES,Ee=!1!==e.ALLOW_ARIA_ATTR,Ae=!1!==e.ALLOW_DATA_ATTR,xe=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Te=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,Oe=e.SAFE_FOR_TEMPLATES||!1,Pe=!1!==e.SAFE_FOR_XML,Re=e.WHOLE_DOCUMENT||!1,Ue=e.RETURN_DOM||!1,Me=e.RETURN_DOM_FRAGMENT||!1,je=e.RETURN_TRUSTED_TYPE||!1,Ne=e.FORCE_BODY||!1,Fe=!1!==e.SANITIZE_DOM,Le=e.SANITIZE_NAMED_PROPS||!1,Be=!1!==e.KEEP_CONTENT,ze=e.IN_PLACE||!1,ye=e.ALLOWED_URI_REGEXP||q,Qe=e.NAMESPACE||Je,ke=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&lt(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ke.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&lt(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ke.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(ke.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Oe&&(Ae=!1),Me&&(Ue=!0),Ve&&(_e=I({},N),we=[],!0===Ve.html&&(I(_e,x),I(we,U)),!0===Ve.svg&&(I(_e,T),I(we,M),I(we,F)),!0===Ve.svgFilters&&(I(_e,O),I(we,M),I(we,F)),!0===Ve.mathMl&&(I(_e,R),I(we,j),I(we,F))),e.ADD_TAGS&&(_e===ve&&(_e=E(_e)),I(_e,e.ADD_TAGS,st)),e.ADD_ATTR&&(we===Se&&(we=E(we)),I(we,e.ADD_ATTR,st)),e.ADD_URI_SAFE_ATTR&&I(Xe,e.ADD_URI_SAFE_ATTR,st),e.FORBID_CONTENTS&&(qe===He&&(qe=E(qe)),I(qe,e.FORBID_CONTENTS,st)),Be&&(_e["#text"]=!0),Re&&I(_e,["html","head","body"]),_e.table&&(I(_e,["tbody"]),delete Ie.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw w('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw w('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ne=e.TRUSTED_TYPES_POLICY,re=ne.createHTML("")}else void 0===ne&&(ne=J(z,s)),null!==ne&&"string"==typeof re&&(re=ne.createHTML(""));o&&o(e),at=e}},dt=I({},["mi","mo","mn","ms","mtext"]),ht=I({},["foreignobject","annotation-xml"]),pt=I({},["title","style","font","a","script"]),gt=I({},[...T,...O,...P]),ft=I({},[...R,...D]),mt=function(e){let t=te(e);t&&t.tagName||(t={namespaceURI:Qe,tagName:"template"});const n=p(e.tagName),r=p(t.tagName);return!!tt[e.namespaceURI]&&(e.namespaceURI===Ze?t.namespaceURI===Je?"svg"===n:t.namespaceURI===Ye?"svg"===n&&("annotation-xml"===r||dt[r]):Boolean(gt[n]):e.namespaceURI===Ye?t.namespaceURI===Je?"math"===n:t.namespaceURI===Ze?"math"===n&&ht[r]:Boolean(ft[n]):e.namespaceURI===Je?!(t.namespaceURI===Ze&&!ht[r])&&!(t.namespaceURI===Ye&&!dt[r])&&!ft[n]&&(pt[n]||!gt[n]):!("application/xhtml+xml"!==rt||!tt[e.namespaceURI]))},bt=function(e){h(n.removed,{element:e});try{te(e).removeChild(e)}catch(t){W(e)}},yt=function(e,t){try{h(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){h(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!we[e])if(Ue||Me)try{bt(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},_t=function(e){let t=null,n=null;if(Ne)e="<remove></remove>"+e;else{const t=f(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===rt&&Qe===Je&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const i=ne?ne.createHTML(e):e;if(Qe===Je)try{t=(new B).parseFromString(i,rt)}catch(e){}if(!t||!t.documentElement){t=ie.createDocument(Qe,"template",null);try{t.documentElement.innerHTML=et?re:i}catch(e){}}const o=t.body||t.documentElement;return e&&n&&o.insertBefore(r.createTextNode(n),o.childNodes[0]||null),Qe===Je?ae.call(t,Re?"html":"body")[0]:Re?t.documentElement:o},vt=function(e){return oe.call(e.ownerDocument||e,e,C.SHOW_ELEMENT|C.SHOW_COMMENT|C.SHOW_TEXT|C.SHOW_PROCESSING_INSTRUCTION|C.SHOW_CDATA_SECTION,null)},wt=function(e){return e instanceof G&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof L)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},St=function(e){return"function"==typeof S&&e instanceof S},kt=function(e,t,r){le[e]&&u(le[e],(e=>{e.call(n,t,r,at)}))},It=function(e){let t=null;if(kt("beforeSanitizeElements",e,null),wt(e))return bt(e),!0;const r=st(e.nodeName);if(kt("uponSanitizeElement",e,{tagName:r,allowedTags:_e}),e.hasChildNodes()&&!St(e.firstElementChild)&&v(/<[/\w]/g,e.innerHTML)&&v(/<[/\w]/g,e.textContent))return bt(e),!0;if(e.nodeType===Y.progressingInstruction)return bt(e),!0;if(Pe&&e.nodeType===Y.comment&&v(/<[/\w]/g,e.data))return bt(e),!0;if(!_e[r]||Ie[r]){if(!Ie[r]&&Et(r)){if(ke.tagNameCheck instanceof RegExp&&v(ke.tagNameCheck,r))return!1;if(ke.tagNameCheck instanceof Function&&ke.tagNameCheck(r))return!1}if(Be&&!qe[r]){const t=te(e)||e.parentNode,n=ee(e)||e.childNodes;if(n&&t)for(let r=n.length-1;r>=0;--r){const i=H(n[r],!0);i.__removalCount=(e.__removalCount||0)+1,t.insertBefore(i,X(e))}}return bt(e),!0}return e instanceof k&&!mt(e)?(bt(e),!0):"noscript"!==r&&"noembed"!==r&&"noframes"!==r||!v(/<\/no(script|embed|frames)/i,e.innerHTML)?(Oe&&e.nodeType===Y.text&&(t=e.textContent,u([ue,de,he],(e=>{t=m(t,e," ")})),e.textContent!==t&&(h(n.removed,{element:e.cloneNode()}),e.textContent=t)),kt("afterSanitizeElements",e,null),!1):(bt(e),!0)},Ct=function(e,t,n){if(Fe&&("id"===t||"name"===t)&&(n in r||n in ct))return!1;if(Ae&&!Ce[t]&&v(pe,t));else if(Ee&&v(ge,t));else if(!we[t]||Ce[t]){if(!(Et(e)&&(ke.tagNameCheck instanceof RegExp&&v(ke.tagNameCheck,e)||ke.tagNameCheck instanceof Function&&ke.tagNameCheck(e))&&(ke.attributeNameCheck instanceof RegExp&&v(ke.attributeNameCheck,t)||ke.attributeNameCheck instanceof Function&&ke.attributeNameCheck(t))||"is"===t&&ke.allowCustomizedBuiltInElements&&(ke.tagNameCheck instanceof RegExp&&v(ke.tagNameCheck,n)||ke.tagNameCheck instanceof Function&&ke.tagNameCheck(n))))return!1}else if(Xe[t]);else if(v(ye,m(n,me,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==b(n,"data:")||!We[e])if(xe&&!v(fe,m(n,me,"")));else if(n)return!1;return!0},Et=function(e){return"annotation-xml"!==e&&f(e,be)},At=function(e){kt("beforeSanitizeAttributes",e,null);const{attributes:t}=e;if(!t)return;const r={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:we};let i=t.length;for(;i--;){const o=t[i],{name:s,namespaceURI:a,value:c}=o,l=st(s);let h="value"===s?c:y(c);if(r.attrName=l,r.attrValue=h,r.keepAttr=!0,r.forceKeepAttr=void 0,kt("uponSanitizeAttribute",e,r),h=r.attrValue,Pe&&v(/((--!?|])>)|<\/(style|title)/i,h)){yt(s,e);continue}if(r.forceKeepAttr)continue;if(yt(s,e),!r.keepAttr)continue;if(!Te&&v(/\/>/i,h)){yt(s,e);continue}Oe&&u([ue,de,he],(e=>{h=m(h,e," ")}));const p=st(e.nodeName);if(Ct(p,l,h)){if(!Le||"id"!==l&&"name"!==l||(yt(s,e),h=Ge+h),ne&&"object"==typeof z&&"function"==typeof z.getAttributeType)if(a);else switch(z.getAttributeType(p,l)){case"TrustedHTML":h=ne.createHTML(h);break;case"TrustedScriptURL":h=ne.createScriptURL(h)}try{a?e.setAttributeNS(a,s,h):e.setAttribute(s,h),wt(e)?bt(e):d(n.removed)}catch(e){}}}kt("afterSanitizeAttributes",e,null)},xt=function e(t){let n=null;const r=vt(t);for(kt("beforeSanitizeShadowDOM",t,null);n=r.nextNode();)kt("uponSanitizeShadowNode",n,null),It(n)||(n.content instanceof c&&e(n.content),At(n));kt("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,o=null,s=null,a=null;if(et=!e,et&&(e="\x3c!--\x3e"),"string"!=typeof e&&!St(e)){if("function"!=typeof e.toString)throw w("toString is not a function");if("string"!=typeof(e=e.toString()))throw w("dirty is not a string, aborting")}if(!n.isSupported)return e;if(De||ut(t),n.removed=[],"string"==typeof e&&(ze=!1),ze){if(e.nodeName){const t=st(e.nodeName);if(!_e[t]||Ie[t])throw w("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof S)r=_t("\x3c!----\x3e"),o=r.ownerDocument.importNode(e,!0),o.nodeType===Y.element&&"BODY"===o.nodeName||"HTML"===o.nodeName?r=o:r.appendChild(o);else{if(!Ue&&!Oe&&!Re&&-1===e.indexOf("<"))return ne&&je?ne.createHTML(e):e;if(r=_t(e),!r)return Ue?null:je?re:""}r&&Ne&&bt(r.firstChild);const l=vt(ze?e:r);for(;s=l.nextNode();)It(s)||(s.content instanceof c&&xt(s.content),At(s));if(ze)return e;if(Ue){if(Me)for(a=se.call(r.ownerDocument);r.firstChild;)a.appendChild(r.firstChild);else a=r;return(we.shadowroot||we.shadowrootmode)&&(a=ce.call(i,a,!0)),a}let d=Re?r.outerHTML:r.innerHTML;return Re&&_e["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&v($,r.ownerDocument.doctype.name)&&(d="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+d),Oe&&u([ue,de,he],(e=>{d=m(d,e," ")})),ne&&je?ne.createHTML(d):d},n.setConfig=function(){ut(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),De=!0},n.clearConfig=function(){at=null,De=!1},n.isValidAttribute=function(e,t,n){at||ut({});const r=st(e),i=st(t);return Ct(r,i,n)},n.addHook=function(e,t){"function"==typeof t&&(le[e]=le[e]||[],h(le[e],t))},n.removeHook=function(e){if(le[e])return d(le[e])},n.removeHooks=function(e){le[e]&&(le[e]=[])},n.removeAllHooks=function(){le={}},n}return Q()}()},93667:e=>{var t=-1,n=10,r=0;function i(e,n,f,m,b){if(e===n)return e?[[0,e]]:[];if(null!=f){var y=function(e,t,n){var r="number"==typeof n?{index:n,length:0}:n.oldRange,i="number"==typeof n?null:n.newRange,o=e.length,s=t.length;if(0===r.length&&(null===i||0===i.length)){var a=r.index,c=e.slice(0,a),l=e.slice(a),u=i?i.index:null,d=a+s-o;if((null===u||u===d)&&!(d<0||d>s)){var h=t.slice(0,d);if((f=t.slice(d))===l){var p=Math.min(a,d);if((b=c.slice(0,p))===(v=h.slice(0,p)))return _(b,c.slice(p),h.slice(p),l)}}if(null===u||u===a){var g=a,f=(h=t.slice(0,g),t.slice(g));if(h===c){var m=Math.min(o-g,s-g);if((y=l.slice(l.length-m))===(w=f.slice(f.length-m)))return _(c,l.slice(0,l.length-m),f.slice(0,f.length-m),y)}}}if(r.length>0&&i&&0===i.length){var b=e.slice(0,r.index),y=e.slice(r.index+r.length);if(!(s<(p=b.length)+(m=y.length))){var v=t.slice(0,p),w=t.slice(s-m);if(b===v&&y===w)return _(b,e.slice(p,o-m),t.slice(p,s-m),y)}}return null}(e,n,f);if(y)return y}var v=s(e,n),w=e.substring(0,v);v=c(e=e.substring(v),n=n.substring(v));var S=e.substring(e.length-v),k=function(e,n){var a;if(!e)return[[1,n]];if(!n)return[[t,e]];var l=e.length>n.length?e:n,u=e.length>n.length?n:e,d=l.indexOf(u);if(-1!==d)return a=[[1,l.substring(0,d)],[0,u],[1,l.substring(d+u.length)]],e.length>n.length&&(a[0][0]=a[2][0]=t),a;if(1===u.length)return[[t,e],[1,n]];var h=function(e,t){var n=e.length>t.length?e:t,r=e.length>t.length?t:e;if(n.length<4||2*r.length<n.length)return null;function i(e,t,n){for(var r,i,o,a,l=e.substring(n,n+Math.floor(e.length/4)),u=-1,d="";-1!==(u=t.indexOf(l,u+1));){var h=s(e.substring(n),t.substring(u)),p=c(e.substring(0,n),t.substring(0,u));d.length<p+h&&(d=t.substring(u-p,u)+t.substring(u,u+h),r=e.substring(0,n-p),i=e.substring(n+h),o=t.substring(0,u-p),a=t.substring(u+h))}return 2*d.length>=e.length?[r,i,o,a,d]:null}var o,a,l,u,d,h=i(n,r,Math.ceil(n.length/4)),p=i(n,r,Math.ceil(n.length/2));if(!h&&!p)return null;o=p?h&&h[4].length>p[4].length?h:p:h;e.length>t.length?(a=o[0],l=o[1],u=o[2],d=o[3]):(u=o[0],d=o[1],a=o[2],l=o[3]);var g=o[4];return[a,l,u,d,g]}(e,n);if(h){var p=h[0],g=h[1],f=h[2],m=h[3],b=h[4],y=i(p,f),_=i(g,m);return y.concat([[0,b]],_)}return function(e,n){for(var i=e.length,s=n.length,a=Math.ceil((i+s)/2),c=a,l=2*a,u=new Array(l),d=new Array(l),h=0;h<l;h++)u[h]=-1,d[h]=-1;u[c+1]=0,d[c+1]=0;for(var p=i-s,g=p%2!=0,f=0,m=0,b=0,y=0,_=0;_<a&&!(r>0&&performance.now()>r);_++){for(var v=-_+f;v<=_-m;v+=2){for(var w=c+v,S=(A=v===-_||v!==_&&u[w-1]<u[w+1]?u[w+1]:u[w-1]+1)-v;A<i&&S<s&&e.charAt(A)===n.charAt(S);)A++,S++;if(u[w]=A,A>i)m+=2;else if(S>s)f+=2;else if(g){if((C=c+p-v)>=0&&C<l&&-1!==d[C])if(A>=(I=i-d[C]))return o(e,n,A,S)}}for(var k=-_+b;k<=_-y;k+=2){for(var I,C=c+k,E=(I=k===-_||k!==_&&d[C-1]<d[C+1]?d[C+1]:d[C-1]+1)-k;I<i&&E<s&&e.charAt(i-I-1)===n.charAt(s-E-1);)I++,E++;if(d[C]=I,I>i)y+=2;else if(E>s)b+=2;else if(!g){if((w=c+p-k)>=0&&w<l&&-1!==u[w]){var A;S=c+(A=u[w])-w;if(A>=(I=i-I))return o(e,n,A,S)}}}}return[[t,e],[1,n]]}(e,n)}(e=e.substring(0,e.length-v),n=n.substring(0,n.length-v));return w&&k.unshift([0,w]),S&&k.push([0,S]),g(k,b),m&&function(e){var n=!1,r=[],i=0,o=null,s=0,f=0,m=0,b=0,y=0;for(;s<e.length;)0==e[s][0]?(r[i++]=s,f=b,m=y,b=0,y=0,o=e[s][1]):(1==e[s][0]?b+=e[s][1].length:y+=e[s][1].length,o&&o.length<=Math.max(f,m)&&o.length<=Math.max(b,y)&&(e.splice(r[i-1],0,[t,o]),e[r[i-1]+1][0]=1,i--,s=--i>0?r[i-1]:-1,f=0,m=0,b=0,y=0,o=null,n=!0)),s++;n&&g(e);(function(e){function t(e,t){if(!e||!t)return 6;var n=e.charAt(e.length-1),r=t.charAt(0),i=n.match(l),o=r.match(l),s=i&&n.match(u),a=o&&r.match(u),c=s&&n.match(d),g=a&&r.match(d),f=c&&e.match(h),m=g&&t.match(p);return f||m?5:c||g?4:i&&!s&&a?3:s||a?2:i||o?1:0}var n=1;for(;n<e.length-1;){if(0==e[n-1][0]&&0==e[n+1][0]){var r=e[n-1][1],i=e[n][1],o=e[n+1][1],s=c(r,i);if(s){var a=i.substring(i.length-s);r=r.substring(0,r.length-s),i=a+i.substring(0,i.length-s),o=a+o}for(var g=r,f=i,m=o,b=t(r,i)+t(i,o);i.charAt(0)===o.charAt(0);){r+=i.charAt(0),i=i.substring(1)+o.charAt(0),o=o.substring(1);var y=t(r,i)+t(i,o);y>=b&&(b=y,g=r,f=i,m=o)}e[n-1][1]!=g&&(g?e[n-1][1]=g:(e.splice(n-1,1),n--),e[n][1]=f,m?e[n+1][1]=m:(e.splice(n+1,1),n--))}n++}})(e),s=1;for(;s<e.length;){if(e[s-1][0]==t&&1==e[s][0]){var _=e[s-1][1],v=e[s][1],w=a(_,v),S=a(v,_);w>=S?(w>=_.length/2||w>=v.length/2)&&(e.splice(s,0,[0,v.substring(0,w)]),e[s-1][1]=_.substring(0,_.length-w),e[s+1][1]=v.substring(w),s++):(S>=_.length/2||S>=v.length/2)&&(e.splice(s,0,[0,_.substring(0,S)]),e[s-1][0]=1,e[s-1][1]=v.substring(0,v.length-S),e[s+1][0]=t,e[s+1][1]=_.substring(S),s++),s++}s++}}(k),k}function o(e,t,n,r){var o=e.substring(0,n),s=t.substring(0,r),a=e.substring(n),c=t.substring(r),l=i(o,s),u=i(a,c);return l.concat(u)}function s(e,t){if(!e||!t||e.charAt(0)!==t.charAt(0))return 0;for(var n=0,r=Math.min(e.length,t.length),i=r,o=0;n<i;)e.substring(o,i)==t.substring(o,i)?o=n=i:r=i,i=Math.floor((r-n)/2+n);return f(e.charCodeAt(i-1))&&i--,i}function a(e,t){var n=e.length,r=t.length;if(0==n||0==r)return 0;n>r?e=e.substring(n-r):n<r&&(t=t.substring(0,n));var i=Math.min(n,r);if(e==t)return i;for(var o=0,s=1;;){var a=e.substring(i-s),c=t.indexOf(a);if(-1==c)return o;s+=c,0!=c&&e.substring(i-s)!=t.substring(0,s)||(o=s,s++)}}function c(e,t){if(!e||!t||e.slice(-1)!==t.slice(-1))return 0;for(var n=0,r=Math.min(e.length,t.length),i=r,o=0;n<i;)e.substring(e.length-i,e.length-o)==t.substring(t.length-i,t.length-o)?o=n=i:r=i,i=Math.floor((r-n)/2+n);return m(e.charCodeAt(e.length-i))&&i--,i}var l=/[^a-zA-Z0-9]/,u=/\s/,d=/[\r\n]/,h=/\n\r?\n$/,p=/^\r?\n\r?\n/;function g(e,n){e.push([0,""]);for(var r,i=0,o=0,a=0,l="",u="";i<e.length;)if(i<e.length-1&&!e[i][1])e.splice(i,1);else switch(e[i][0]){case 1:a++,u+=e[i][1],i++;break;case t:o++,l+=e[i][1],i++;break;case 0:var d=i-a-o-1;if(n){if(d>=0&&y(e[d][1])){var h=e[d][1].slice(-1);if(e[d][1]=e[d][1].slice(0,-1),l=h+l,u=h+u,!e[d][1]){e.splice(d,1),i--;var p=d-1;e[p]&&1===e[p][0]&&(a++,u=e[p][1]+u,p--),e[p]&&e[p][0]===t&&(o++,l=e[p][1]+l,p--),d=p}}if(b(e[i][1])){h=e[i][1].charAt(0);e[i][1]=e[i][1].slice(1),l+=h,u+=h}}if(i<e.length-1&&!e[i][1]){e.splice(i,1);break}if(l.length>0||u.length>0){l.length>0&&u.length>0&&(0!==(r=s(u,l))&&(d>=0?e[d][1]+=u.substring(0,r):(e.splice(0,0,[0,u.substring(0,r)]),i++),u=u.substring(r),l=l.substring(r)),0!==(r=c(u,l))&&(e[i][1]=u.substring(u.length-r)+e[i][1],u=u.substring(0,u.length-r),l=l.substring(0,l.length-r)));var f=a+o;0===l.length&&0===u.length?(e.splice(i-f,f),i-=f):0===l.length?(e.splice(i-f,f,[1,u]),i=i-f+1):0===u.length?(e.splice(i-f,f,[t,l]),i=i-f+1):(e.splice(i-f,f,[t,l],[1,u]),i=i-f+2)}0!==i&&0===e[i-1][0]?(e[i-1][1]+=e[i][1],e.splice(i,1)):i++,a=0,o=0,l="",u=""}""===e[e.length-1][1]&&e.pop();var m=!1;for(i=1;i<e.length-1;)0===e[i-1][0]&&0===e[i+1][0]&&(e[i][1].substring(e[i][1].length-e[i-1][1].length)===e[i-1][1]?(e[i][1]=e[i-1][1]+e[i][1].substring(0,e[i][1].length-e[i-1][1].length),e[i+1][1]=e[i-1][1]+e[i+1][1],e.splice(i-1,1),m=!0):e[i][1].substring(0,e[i+1][1].length)==e[i+1][1]&&(e[i-1][1]+=e[i+1][1],e[i][1]=e[i][1].substring(e[i+1][1].length)+e[i+1][1],e.splice(i+1,1),m=!0)),i++;m&&g(e,n)}function f(e){return e>=55296&&e<=56319}function m(e){return e>=56320&&e<=57343}function b(e){return m(e.charCodeAt(0))}function y(e){return f(e.charCodeAt(e.length-1))}function _(e,n,r,i){return y(e)||b(i)?null:function(e){for(var t=[],n=0;n<e.length;n++)e[n][1].length>0&&t.push(e[n]);return t}([[0,e],[t,n],[1,r],[0,i]])}function v(e,t,o,s){return r=n>0?performance.now()+n:0,i(e,t,o,s,!0)}v.INSERT=1,v.DELETE=t,v.EQUAL=0,v.getTimeoutMs=function(){return n},v.setTimeoutMs=function(e){n=e},e.exports=v},2841:(e,t,n)=>{n.d(t,{V:()=>i});var r=n(18117);function i(e){var t=(0,r.gM)(e);return function(n){return{concat:t(n).concat,empty:e.of(n.empty)}}}},18117:(e,t,n)=>{n.d(t,{N:()=>s,Yt:()=>p,a1:()=>a,ap:()=>o,gM:()=>c,gz:()=>h});var r=n(90023),i=n(72816);function o(e,t){return function(n){return function(r){return e.ap(e.map(r,(function(e){return function(n){return t.ap(e,n)}})),n)}}}function s(e){return function(t){return function(n){return e.ap(e.map(n,(function(e){return function(){return e}})),t)}}}function a(e){return function(t){return function(n){return e.ap(e.map(n,(function(){return function(e){return e}})),t)}}}function c(e){return function(t){return{concat:function(n,r){return e.ap(e.map(n,(function(e){return function(n){return t.concat(e,n)}})),r)}}}}function l(e,t,n){return function(r){for(var i=Array(n.length+1),o=0;o<n.length;o++)i[o]=n[o];return i[n.length]=r,0===t?e.apply(null,i):l(e,t-1,i)}}var u={1:function(e){return[e]},2:function(e){return function(t){return[e,t]}},3:function(e){return function(t){return function(n){return[e,t,n]}}},4:function(e){return function(t){return function(n){return function(r){return[e,t,n,r]}}}},5:function(e){return function(t){return function(n){return function(r){return function(i){return[e,t,n,r,i]}}}}}};function d(e){return i.e$.call(u,e)||(u[e]=l(r.bc,e-1,[])),u[e]}function h(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=t.length,i=d(r),o=e.map(t[0],i),s=1;s<r;s++)o=e.ap(o,t[s]);return o}}function p(e){return function(t){for(var n=Object.keys(t),r=n.length,i=function(e){var t=e.length;switch(t){case 1:return function(t){var n;return(n={})[e[0]]=t,n};case 2:return function(t){return function(n){var r;return(r={})[e[0]]=t,r[e[1]]=n,r}};case 3:return function(t){return function(n){return function(r){var i;return(i={})[e[0]]=t,i[e[1]]=n,i[e[2]]=r,i}}};case 4:return function(t){return function(n){return function(r){return function(i){var o;return(o={})[e[0]]=t,o[e[1]]=n,o[e[2]]=r,o[e[3]]=i,o}}}};case 5:return function(t){return function(n){return function(r){return function(i){return function(o){var s;return(s={})[e[0]]=t,s[e[1]]=n,s[e[2]]=r,s[e[3]]=i,s[e[4]]=o,s}}}}};default:return l((function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var i={},o=0;o<t;o++)i[e[o]]=n[o];return i}),t-1,[])}}(n),o=e.map(t[n[0]],i),s=1;s<r;s++)o=e.ap(o,t[n[s]]);return o}}},59833:(e,t,n)=>{n.d(t,{DY:()=>g,DZ:()=>v,Eh:()=>O,Ew:()=>u,GY:()=>p,Lx:()=>E,UI:()=>m,Z$:()=>l,ZN:()=>x,hX:()=>k,oA:()=>w,of:()=>f,oh:()=>S,qr:()=>d,u4:()=>A,uK:()=>I,uZ:()=>T,xH:()=>y,xb:()=>c});var r=n(90023),i=(n(50271),n(72816)),o=n(53186),s=n(86399),a=n(25262),c=(n(6609),function(e){return 0===e.length});o.Od,o.Ce,o.ws,o.R3,o.Im;o.dC,s.P5,s.YM;var l=s.Z$;s.cx;function u(e){return s.Ew(e)}s.f2;s.JO;var d=s.qr,h=function(e){return e.slice()},p=function(e){return c(e)?[]:e.slice().reverse()},g=function(e){return function(t){return t.length<=1?h(t):t.slice().sort(e.compare)}};s.t9;s.kp,s.Eq;var f=o.of,m=function(e){return function(t){return t.map((function(t){return e(t)}))}},b=(0,r.OB)(2,(function(e,t){return(0,r.zG)(e,function(e){return function(t){for(var n=[],r=0;r<t.length;r++)n.push.apply(n,e(r,t[r]));return n}}((function(e,n){return t(n,e)})))})),y=b(r.yR),_=function(e){return function(t){for(var n=[],r=0;r<t.length;r++){var o=e(r,t[r]);i.pC(o)&&n.push(o.value)}return n}},v=function(e){return _((function(t,n){return e(n)}))},w=v(r.yR),S=function(e){for(var t=[],n=[],r=0,i=e;r<i.length;r++){var o=i[r];"Left"===o._tag?t.push(o.left):n.push(o.right)}return(0,a.s4)(t,n)},k=function(e){return function(t){return t.filter(e)}},I=function(e){return C((function(t,n){return e(n)}))},C=function(e){return function(t){for(var n=[],r=[],i=0;i<t.length;i++){var o=t[i];e(i,o)?r.push(o):n.push(o)}return(0,a.s4)(n,r)}},E=s.Lx,A=(s.xP,s.u4),x=(s.OE,s.nq,s.iw,s.ZN),T=function(){return{concat:function(e,t){return e.concat(t)},empty:[]}},O=s.Eh;s.pR,s.pJ,s.oR,o.oo,s.yW,s.j0,i.F4,o.w6,o.QI,o.Ss},81346:(e,t,n)=>{function r(e){var t=i(e);return function(e){return function(n){return t(n,e)}}}function i(e){return function(t,n){return e.chain(t,(function(t){return e.map(n(t),(function(){return t}))}))}}n.d(t,{bw:()=>i,mU:()=>r})},67101:(e,t,n)=>{n.d(t,{_:()=>r});var r=function(e,t){for(var n=t(e);"Left"===n._tag;)n=t(n.left);return n.right}},12518:(e,t,n)=>{n.d(t,{DT:()=>B,EQ:()=>$,F2:()=>u,G5:()=>x,Gg:()=>oe,KB:()=>W,KC:()=>ie,LF:()=>Q,Pd:()=>U,Rx:()=>ae,UI:()=>I,VS:()=>d,Vn:()=>M,Y$:()=>J,Y3:()=>ne,Yo:()=>z,bw:()=>Z,dO:()=>C,fS:()=>Y,g_:()=>X,i$:()=>re,ij:()=>te,nM:()=>V,ov:()=>k,pF:()=>K,t$:()=>l,tO:()=>q,tS:()=>se,vx:()=>ee,wE:()=>ce});var r=n(81346),i=n(67101),o=n(10522),s=n(90023),a=n(50271),c=n(72816),l=c.t$,u=c.F2,d=(0,s.OB)(2,(function(e,t){return V(e)?e:t(e.right)})),h=function(e,t){return(0,s.zG)(e,I(t))},p=function(e,t){return(0,s.zG)(e,A(t))},g=function(e,t,n){return(0,s.zG)(e,O(t,n))},f=function(e){return function(t,n){var r=P(e);return(0,s.zG)(t,r(n))}},m=function(e,t,n){return(0,s.zG)(e,R(t,n))},b=function(e){var t=D(e);return function(e,n){return(0,s.zG)(e,t(n))}},y=function(e,t,n){return(0,s.zG)(e,U(t,n))},_=function(e,t){return(0,s.zG)(e,M(t))},v=function(e,t){return(0,s.zG)(e,j(t))},w=function(e,t){return(0,s.zG)(e,F(t))},S=function(e,t){return(0,i._)(t(e),(function(e){return V(e)?u(l(e.left)):V(e.right)?l(t(e.right.left)):u(u(e.right.right))}))},k="Either",I=function(e){return function(t){return V(t)?t:u(e(t.right))}},C={URI:k,map:h},E=((0,s.OB)(2,(0,a.as)(C)),(0,a.Ep)(C),u),A=function(e){return function(t){return V(t)?t:V(e)?e:u(t.right(e.right))}},x={URI:k,map:h,ap:p},T={URI:k,map:h,ap:p,chain:d},O=function(e,t){return function(n){return V(n)?e:t(e,n.right)}},P=function(e){return function(t){return function(n){return V(n)?e.empty:t(n.right)}}},R=function(e,t){return function(n){return V(n)?e:t(n.right,e)}},D=function(e){return function(t){return function(n){return V(n)?e.of(l(n.left)):e.map(t(n.right),u)}}},N=function(e){return function(t){return V(t)?e.of(l(t.left)):e.map(t.right,u)}},U=function(e,t){return function(n){return V(n)?l(e(n.left)):u(t(n.right))}},M=function(e){return function(t){return V(t)?l(e(t.left)):t}},j=function(e){return function(t){return V(t)?e():t}},F=function(e){return function(t){return V(t)?t:u(e(t))}},L=l,G={URI:k,fromEither:s.yR},B=(0,o.DT)(G),z=(0,o.Yo)(G),V=c.nM,q=c.tO,H=function(e,t){return function(n){return V(n)?e(n.left):t(n.right)}},W=H,$=H,X=$,K=function(e){return function(t){return V(t)?e(t.left):t.right}},Y=K,Z=(0,s.OB)(2,r.bw(T)),J=(0,o.Y$)(G,T),Q=function(e){return V(e)?u(e.left):l(e.right)},ee=function(e){return function(t){return V(t)?e(t.left):t}},te=function(e){return function(t){return null==t?l(e):u(t)}},ne=function(e,t){try{return u(e())}catch(e){return l(t(e))}},re=W(s.yR,s.yR);function ie(e){return e instanceof Error?e:new Error(String(e))}var oe=function(e){return function(t){return!V(t)&&e(t.right)}},se=(c.F4,c.Xl,d);function ae(e,t){return ne((function(){return JSON.parse(e)}),t)}var ce={URI:k,map:h,of:E,ap:p,chain:d,reduce:g,foldMap:f,reduceRight:m,traverse:b,sequence:N,bimap:y,mapLeft:_,alt:v,extend:w,chainRec:S,throwError:L}},38136:(e,t,n)=>{n.d(t,{EQ:()=>w,F2:()=>a,KQ:()=>h,LF:()=>A,LU:()=>E,LV:()=>S,NG:()=>p,SA:()=>_,UI:()=>g,VS:()=>b,ap:()=>f,d1:()=>v,fS:()=>k,i$:()=>x,ij:()=>d,m8:()=>l,pk:()=>u,sn:()=>C,t$:()=>c,vx:()=>I,wp:()=>y});var r=n(18117),i=n(12518),o=n(90023),s=n(50271);function a(e){return(0,o.ls)(i.F2,e.of)}function c(e){return(0,o.ls)(i.t$,e.of)}function l(e){return function(t){return e.map(t,i.F2)}}function u(e){return function(t){return e.map(t,i.t$)}}function d(e){return function(t){return(0,o.ls)(i.ij(t),e.of)}}function h(e){var t=d(e);return function(e){var n=t(e);return function(e){return(0,o.ls)(e,n)}}}function p(e){var t=m(e),n=h(e);return function(e){var r=n(e);return function(e){return t(r(e))}}}function g(e){return(0,s.UI)(e,i.dO)}function f(e){return(0,r.ap)(e,i.G5)}function m(e){var t=b(e);return function(e){return function(n){return t(n,e)}}}function b(e){return function(t,n){return e.chain(t,(function(t){return i.nM(t)?e.of(t):n(t.right)}))}}function y(e){return function(t){return function(n){return e.chain(n,(function(n){return i.nM(n)?t():e.of(n)}))}}}function _(e){return function(t,n,r){return e.map(t,i.Pd(n,r))}}function v(e){return function(t,n){return e.map(t,i.Vn(n))}}function w(e){return function(t,n){return function(r){return e.map(r,i.EQ(t,n))}}}function S(e){return function(t,n){return function(r){return e.chain(r,i.EQ(t,n))}}}function k(e){return function(t){return function(n){return e.chain(n,i.EQ(t,e.of))}}}function I(e){return function(t){return function(n){return e.chain(n,(function(n){return i.nM(n)?t(n.left):e.of(n)}))}}}function C(e){var t=I(e);return function(n,r){return(0,o.zG)(n,t((function(t){return e.map(r(t),(function(e){return i.nM(e)?e:i.t$(t)}))})))}}function E(e){return function(t){return function(n){return e.chain(n,i.EQ((function(n){return e.map(t(n),i.t$)}),(function(t){return e.of(i.F2(t))})))}}}function A(e){return function(t){return e.map(t,i.LF)}}function x(e){return function(t){return e.map(t,i.i$)}}},75236:(e,t,n)=>{n.d(t,{uZ:()=>i});var r=n(90023),i=function(){return{concat:function(e,t){return(0,r.ls)(e,t)},empty:r.yR}}},21147:(e,t,n)=>{n.d(t,{IP:()=>c,MW:()=>l,Uz:()=>o,f7:()=>r,lr:()=>h,n_:()=>i,ov:()=>s,vD:()=>u,w4:()=>a,yv:()=>d});n(90023);var r=function(e){return{equals:function(t,n){return t===n||e(t,n)}}},i=function(e){return r((function(t,n){for(var r in e)if(!e[r].equals(t[r],n[r]))return!1;return!0}))},o=function(e){return function(t){return r((function(n,r){return t.equals(e(n),e(r))}))}},s="Eq",a={equals:function(e,t){return e===t}},c=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r((function(t,n){return e.every((function(e,r){return e.equals(t[r],n[r])}))}))},l=i,u=(a.equals,a),d=a,h=a},10522:(e,t,n)=>{n.d(t,{DT:()=>a,WB:()=>u,Y$:()=>l,Yo:()=>s});var r=n(81346),i=n(90023),o=n(72816);function s(e){return function(t){return function(n){return e.fromEither(o.Wi(n)?o.t$(t()):o.F2(n.value))}}}function a(e){return function(t,n){return function(r){return e.fromEither(t(r)?o.F2(r):o.t$(n(r)))}}}function c(e){return function(t){return(0,i.ls)(t,e.fromEither)}}function l(e,t){return function(n,r){return function(i){return t.chain(i,(function(t){return e.fromEither(n(t)?o.F2(t):o.t$(r(t)))}))}}}function u(e,t){var n=c(e),i=(0,r.bw)(t);return function(e,t){return i(e,n(t))}}},47995:(e,t,n)=>{n.d(t,{in:()=>o});var r=n(81346),i=n(90023);function o(e,t){var n=(0,r.bw)(t);return function(t,r){return n(t,(0,i.ls)(r,e.fromIO))}}},50271:(e,t,n)=>{function r(e,t){return function(n){return function(r){return e.map(r,(function(e){return t.map(e,n)}))}}}function i(e){return function(t,n){return function(r){return e.map(r,(function(e){var r;return Object.assign({},e,((r={})[t]=n(e),r))}))}}}function o(e){return function(t,n){return e.map(t,(function(){return n}))}}function s(e){var t=o(e);return function(e){return t(e,void 0)}}n.d(t,{Ep:()=>s,Hr:()=>i,UI:()=>r,as:()=>o})},95922:(e,t,n)=>{n.d(t,{G5:()=>f,PM:()=>g,UA:()=>y,a1:()=>m,dO:()=>p,of:()=>u});var r=n(18117),i=n(81346),o=n(90023),s=n(50271),a=n(72816),c=function(e,t){return function(){return t(e())}},l=function(e,t){return function(){return e()(t())}},u=o.a9,d=(0,o.OB)(2,(function(e,t){return function(){return t(e())()}})),h="IO",p={URI:h,map:c},g=((0,o.OB)(2,(0,s.as)(p)),(0,s.Ep)(p),{URI:h,of:u}),f={URI:h,map:c,ap:l},m=(0,r.a1)(f),b={URI:h,map:c,ap:l,chain:d},y={URI:h,map:c,ap:l,of:u,chain:d};i.bw(b),o.yR,o.yR,a.F4,a.Xl},51505:(e,t,n)=>{n.d(t,{F2:()=>h,fS:()=>y,g_:()=>b,t$:()=>d});var r=n(81346),i=n(38136),o=n(10522),s=n(47995),a=n(90023),c=n(50271),l=n(72816),u=n(95922),d=i.t$(u.PM),h=i.F2(u.PM),p=i.m8(u.dO),g=(u.dO,u.of),f=p,m=(u.dO,i.LV(u.UA)),b=m,y=i.fS(u.UA),_=(u.dO,u.UA,i.sn(u.UA),u.UA,u.dO,function(e,t){return(0,a.zG)(e,w(t))}),v=function(e,t){return(0,a.zG)(e,S(t))},w=i.UI(u.dO),S=(i.SA(u.dO),i.d1(u.dO),i.ap(u.G5)),k=h,I=(0,a.OB)(2,i.VS(u.UA)),C=(u.UA,"IOEither");var E={URI:C,map:_},A=((0,a.OB)(2,(0,c.as)(E)),(0,c.Ep)(E),{URI:C,map:_,ap:v,chain:I}),x={URI:C,fromEither:g},T={URI:C,fromIO:f};r.bw(A),(0,o.WB)(x,A),(0,s.in)(T,A),l.F4,l.Xl},24332:(e,t,n)=>{n.d(t,{JS:()=>a,KK:()=>h,Yg:()=>l,_e:()=>p,cT:()=>c,g_:()=>u,hw:()=>g,iL:()=>d,ur:()=>s,zt:()=>f});var r=n(90023),i=n(72816),o=n(14911),s=function(e){return o.ur(e)(e.empty)},a=(o.xx.concat,function(e){var t={};for(var n in e)i.e$.call(e,n)&&(t[n]=e[n].empty);return{concat:o.n_(e).concat,empty:t}}),c=function(e){return{concat:o.Fp(e).concat,empty:e.bottom}},l=function(e){return{concat:o.VV(e).concat,empty:e.top}},u=s,d={concat:o.lG.concat,empty:!0},h={concat:o.ny.concat,empty:!1},p=r.uZ,g=(o.l7.concat,{concat:o.xk.concat,empty:0}),f={concat:o.D8.concat,empty:1}},53186:(e,t,n)=>{n.d(t,{Ce:()=>u,Im:()=>d,JG:()=>y,Od:()=>a,QI:()=>k,R3:()=>h,Ss:()=>I,Su:()=>w,UI:()=>v,YM:()=>S,dC:()=>c,nI:()=>f,of:()=>_,oo:()=>p,w6:()=>b,ws:()=>l});var r=n(90023),i=(n(50271),n(72816)),o=n(92135),s=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},a=function(e){return e.length>0},c=function(e,t){return e<0||e>=t.length},l=function(e){return function(t){return s([e],t,!0)}},u=l,d=function(e){return function(t){return s(s([],t,!0),[e],!1)}},h=d,p=function(e,t,n){if(a(n)){var r=g(n);return r.splice(e,0,t),r}return[t]},g=i.r1,f=function(e){return a(e)?i.G(e):i.YP},m=function(e){return function(t){for(var n=Math.max(0,Math.floor(t)),r=[e(0)],i=1;i<n;i++)r.push(e(i));return r}},b=function(e,t){return e<=t?m((function(t){return e+t}))(t-e+1):[e]};var y=g,_=function(e){return[e]};o.xP,o.Lx;var v=function(e){return w((function(t,n){return e(n)}))},w=function(e){return function(t){for(var n=[e(0,S(t))],r=1;r<t.length;r++)n.push(e(r,t[r]));return n}},S=(o.u4,o.OE,o.nq,o.iw,o.YM,o.ZN,o.Eh,i.F4,o.YM);o.Z$,o.VV,o.Fp,o.j0;function k(e,t){return void 0===t?u(e):(0,r.zG)(t,u(e))}var I=function(e,t){return(0,r.zG)(e,h(t))};o.ur},58303:(e,t,n)=>{n.d(t,{$4:()=>Ce,DT:()=>f,Eh:()=>P,FS:()=>ye,G:()=>g,Gg:()=>_e,Kw:()=>Ie,RD:()=>Se,UI:()=>D,Uo:()=>ae,WG:()=>be,Wi:()=>ue,YP:()=>p,ZN:()=>O,fS:()=>ge,gW:()=>Ee,g_:()=>pe,hX:()=>Z,ij:()=>me,pC:()=>le,tS:()=>ke,uZ:()=>R,wp:()=>q,xH:()=>fe});var r=n(2841),i=n(81346),o=n(10522),s=n(90023),a=n(50271),c=n(72816),l=n(61179),u=n(14911),d=n(25262),h=n(6609),p=c.YP,g=c.G;function f(e){return function(t){return e(t)?g(t):p}}var m=function(e){return"Left"===e._tag?p:g(e.right)},b=function(e,t){return(0,s.zG)(e,D(t))},y=function(e,t){return(0,s.zG)(e,M(t))},_=function(e,t,n){return(0,s.zG)(e,G(t,n))},v=function(e){var t=B(e);return function(e,n){return(0,s.zG)(e,t(n))}},w=function(e,t,n){return(0,s.zG)(e,z(t,n))},S=function(e){var t=te(e);return function(e,n){return(0,s.zG)(e,t(n))}},k=function(e,t){return(0,s.zG)(e,q(t))},I=function(e,t){return(0,s.zG)(e,Z(t))},C=function(e,t){return(0,s.zG)(e,J(t))},E=function(e,t){return(0,s.zG)(e,W(t))},A=function(e,t){return(0,s.zG)(e,Q(t))},x=function(e,t){return(0,s.zG)(e,ee(t))},T="Option",O=function(e){return{show:function(t){return ue(t)?"none":"some(".concat(e.show(t.value),")")}}},P=function(e){return{equals:function(t,n){return t===n||(ue(t)?ue(n):!ue(n)&&e.equals(t.value,n.value))}}},R=function(e){return{concat:function(t,n){return ue(t)?n:ue(n)?t:g(e.concat(t.value,n.value))},empty:p}},D=function(e){return function(t){return ue(t)?p:g(e(t.value))}},N={URI:T,map:b},U=((0,s.OB)(2,(0,a.as)(N)),(0,a.Ep)(N),g),M=function(e){return function(t){return ue(t)||ue(e)?p:g(t.value(e.value))}},j={URI:T,map:b,ap:y,of:U},F=(0,s.OB)(2,(function(e,t){return ue(e)?p:t(e.value)})),L={URI:T,map:b,ap:y,chain:F},G=function(e,t){return function(n){return ue(n)?e:t(e,n.value)}},B=function(e){return function(t){return function(n){return ue(n)?e.empty:t(n.value)}}},z=function(e,t){return function(n){return ue(n)?e:t(n.value,e)}},V=(0,s.OB)(2,(function(e,t){return ue(e)?t():e})),q=V,H=function(){return p},W=function(e){return function(t){return ue(t)?p:g(e(t))}},$=F(s.yR),X=(0,d.s4)(p,p),K=function(e){return ue(e)?X:(0,d.s4)(function(e){return"Right"===e._tag?p:g(e.left)}(e.value),m(e.value))},Y={URI:T,compact:$,separate:K},Z=function(e){return function(t){return ue(t)?p:e(t.value)?t:p}},J=function(e){return function(t){return ue(t)?p:e(t.value)}},Q=function(e){return function(t){return(0,d.s4)(I(t,(0,l.ff)(e)),I(t,e))}},ee=function(e){return(0,s.ls)(D(e),K)},te=function(e){return function(t){return function(n){return ue(n)?e.of(p):e.map(t(n.value),g)}}},ne=function(e){return function(t){return ue(t)?e.of(p):e.map(t.value,g)}},re={URI:T,map:b,reduce:_,foldMap:v,reduceRight:w,traverse:S,sequence:ne},ie=(0,h.BL)(re,Y),oe=(0,h.Fj)(re,Y),se=function(){return p},ae=m,ce={URI:T,fromEither:ae},le=c.pC,ue=function(e){return"None"===e._tag},de=function(e,t){return function(n){return ue(n)?e():t(n.value)}},he=de,pe=he,ge=function(e){return function(t){return ue(t)?e():t.value}},fe=$,me=(i.bw(L),(0,o.WB)(ce,L),function(e){return null==e?p:g(e)}),be=he(s.gn,s.yR),ye=he(s.r5,s.yR);var _e=function(e){return function(t){return!ue(t)&&e(t.value)}},ve=(c.F4,U(c.Xl)),we=function(e){var t=function(e){return function(t){var n=e(0,c.YM(t));if(ue(n))return p;for(var r=[n.value],i=1;i<t.length;i++){var o=e(i,t[i]);if(ue(o))return p;r.push(o.value)}return g(r)}}(e);return function(e){return c.Od(e)?t(e):ve}},Se=function(e){return we((function(t,n){return e(n)}))}(s.yR),ke=F;var Ie={URI:T,map:b,of:U,ap:y,chain:F,reduce:_,foldMap:v,reduceRight:w,traverse:S,sequence:ne,zero:H,alt:k,extend:E,compact:$,separate:K,filter:I,filterMap:C,partition:A,partitionMap:x,wither:ie,wilt:oe,throwError:se},Ce=(0,r.V)(j),Ee=function(){return R((0,u.Ps)())}},14944:(e,t,n)=>{n.d(t,{Fp:()=>p,Mh:()=>b,Uz:()=>a,VV:()=>h,Zt:()=>s,gt:()=>d,iP:()=>l,jG:()=>c,lt:()=>u,r9:()=>m,vX:()=>g});var r=n(21147),i=n(90023),o=function(e){return function(t,n){return t===n||0===e(t,n)}},s=function(e){return{equals:o(e),compare:function(t,n){return t===n?0:e(t,n)}}},a=function(e){return function(t){return s((function(n,r){return t.compare(e(n),e(r))}))}},c=function(){return{concat:function(e,t){return s((function(n,r){var i=e.compare(n,r);return 0!==i?i:t.compare(n,r)}))}}},l=function(){return{concat:c().concat,empty:s((function(){return 0}))}},u=(i.W8,function(e){return function(t,n){return-1===e.compare(t,n)}}),d=function(e){return function(t,n){return 1===e.compare(t,n)}},h=function(e){return function(t,n){return t===n||e.compare(t,n)<1?t:n}},p=function(e){return function(t,n){return t===n||e.compare(t,n)>-1?t:n}},g=function(e){var t=u(e),n=d(e);return function(e,r){return function(i){return!t(i,e)&&!n(i,r)}}};var f={equals:r.w4.equals,compare:function(e,t){return e<t?-1:e>t?1:0}},m=f,b=f},81141:(e,t,n)=>{n.d(t,{Xx:()=>r});var r=function(e){return e<=-1?-1:e>=1?1:0}},61179:(e,t,n)=>{n.d(t,{ff:()=>r});n(90023);var r=function(e){return function(t){return!e(t)}}},48886:(e,t,n)=>{n.d(t,{I_:()=>a,UI:()=>u,VF:()=>s});var r=n(81346),i=(n(12518),n(90023)),o=(n(50271),n(72816)),s=i.yR,a=function(e){return function(t){return function(n){return t(e(n))}}},c=function(e,t){return(0,i.zG)(e,u(t))},l=function(e,t){return(0,i.zG)(e,d(t))},u=function(e){return function(t){return function(n){return e(t(n))}}},d=function(e){return function(t){return function(n){return t(n)(e(n))}}},h=i.a9,p=(0,i.OB)(2,(function(e,t){return function(n){return t(e(n))(n)}})),g="Reader",f={URI:g,map:c,ap:l,chain:p};r.bw(f),o.F4,o.Xl},86399:(e,t,n)=>{n.d(t,{DY:()=>C,Eh:()=>q,Eq:()=>x,Ew:()=>v,GY:()=>I,JO:()=>S,Lx:()=>L,OE:()=>G,P5:()=>f,Sb:()=>X,UI:()=>R,YM:()=>m,Z$:()=>b,ZN:()=>V,cx:()=>_,f2:()=>w,hX:()=>N,iw:()=>z,j0:()=>Z,ke:()=>y,kp:()=>A,nq:()=>B,oR:()=>$,oh:()=>D,pJ:()=>W,pR:()=>H,qr:()=>k,t9:()=>E,tS:()=>J,u4:()=>F,xH:()=>P,xP:()=>j,xb:()=>d,yW:()=>Y});var r=n(21147),i=n(90023),o=(n(50271),n(72816)),s=n(9615),a=n(14944),c=n(92135),l=n(25262),u=(n(6609),function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}),d=function(e){return 0===e.length},h=c.Od;c.Ce,c.ws,c.R3,c.Im;var p=function(e,t){return function(n){return h(n)?t(n):e()}},g=c.dC;function f(e,t){return void 0===t?function(t){return f(e,t)}:g(e,t)?o.YP:o.G(t[e])}var m=function(e){return h(e)?o.G(c.YM(e)):o.YP},b=function(e){return h(e)?o.G(c.Z$(e)):o.YP},y=function(e){return function(t){return g(e,t)?t:0===e?K:t.slice(0,e)}};var _=function(e){return function(t){for(var n=0;n<t.length;n++)if(e(t[n]))return o.G(n);return o.YP}};function v(e){return function(t){for(var n=0;n<t.length;n++)if(e(t[n]))return o.G(t[n]);return o.YP}}var w=function(e){return function(t){for(var n=0;n<t.length;n++){var r=e(t[n]);if(o.pC(r))return r}return o.YP}};var S=function(e){return function(t){for(var n=t.length-1;n>=0;n--){var r=e(t[n]);if(o.pC(r))return r}return o.YP}},k=function(e){return function(t){for(var n=t.length-1;n>=0;n--)if(e(t[n]))return o.G(n);return o.YP}},I=function(e){return e.length<=1?e:e.slice().reverse()},C=function(e){return function(t){return t.length<=1?t:t.slice().sort(e.compare)}};function E(e){return function(t,n){if(void 0===n){var r=E(e);return function(e){return r(t,e)}}for(var i,o=0;o<n.length;o++)if(i=n[o],e.equals(i,t))return!0;return!1}}var A=function(e,t){return(0,i.zG)(e,W(t))},x=function(e,t){return(0,i.zG)(e,$(t))},T=c.of,O=(0,i.OB)(2,(function(e,t){return(0,i.zG)(e,function(e){return function(t){if(d(t))return K;for(var n=[],r=0;r<t.length;r++)n.push.apply(n,e(r,t[r]));return n}}((function(e,n){return t(n,e)})))})),P=O(i.yR),R=function(e){return function(t){return t.map((function(t){return e(t)}))}},D=function(e){for(var t=[],n=[],r=0,i=e;r<i.length;r++){var o=i[r];"Left"===o._tag?t.push(o.left):n.push(o.right)}return(0,l.s4)(t,n)},N=function(e){return function(t){return t.filter(e)}},U=function(e){return function(t){for(var n=[],r=0;r<t.length;r++){var i=e(r,t[r]);o.pC(i)&&n.push(i.value)}return n}},M=function(e){return U((function(t,n){return e(n)}))},j=(i.yR,function(e){return function(t){return function(n){return n.reduce((function(n,r,i){return e.concat(n,t(i,r))}),e.empty)}}}),F=function(e,t){return G(e,(function(e,n,r){return t(n,r)}))},L=function(e){var t=j(e);return function(e){return t((function(t,n){return e(n)}))}},G=function(e,t){return function(n){for(var r=n.length,i=e,o=0;o<r;o++)i=t(o,i,n[o]);return i}},B=function(e,t){return z(e,(function(e,n,r){return t(n,r)}))},z=function(e,t){return function(n){return n.reduceRight((function(e,n,r){return t(r,n,e)}),e)}},V=function(e){return{show:function(t){return"[".concat(t.map(e.show).join(", "),"]")}}},q=function(e){return(0,r.f7)((function(t,n){return t.length===n.length&&t.every((function(t,r){return e.equals(t,n[r])}))}))},H=function(e){return(0,a.Zt)((function(t,n){for(var r=t.length,i=n.length,o=Math.min(r,i),a=0;a<o;a++){var c=e.compare(t[a],n[a]);if(0!==c)return c}return s.Df.compare(r,i)}))},W=function(e){return function(t){for(var n=u([],e(t),!0),r=[];n.length>0;){var i=n.shift();o.nM(i)?n.unshift.apply(n,e(i.left)):r.push(i.right)}return r}},$=function(e){return function(t){var n=e(t),r=[],i=[];function s(t){o.nM(t)?e(t.left).forEach((function(e){return r.push(e)})):i.push(t.right)}for(var a=0,c=n;a<c.length;a++){s(c[a])}for(;r.length>0;)s(r.shift());return i}},X=(c.oo,function(e){return e.slice()}),K=c.cS;function Y(e){return function(t){return t.every(e)}}var Z=function(e){var t=c.j0(e);return function(n){return p((function(){return e.empty}),t(n))}},J=(o.F4,O);c.w6,c.QI,c.Ss},92135:(e,t,n)=>{n.d(t,{Ce:()=>h,Eh:()=>D,Fp:()=>F,Im:()=>p,Lx:()=>E,OE:()=>x,Od:()=>l,QI:()=>V,R3:()=>g,Ss:()=>q,VV:()=>j,YM:()=>N,Z$:()=>M,ZN:()=>R,c2:()=>m,cS:()=>c,dC:()=>u,hX:()=>B,iw:()=>O,j0:()=>G,nI:()=>_,nq:()=>A,of:()=>S,oo:()=>f,u4:()=>C,ur:()=>L,w6:()=>y,ws:()=>d,xH:()=>I,xP:()=>T});var r=n(21147),i=n(90023),o=(n(50271),n(72816)),s=n(14911),a=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},c=o.Xl,l=o.Od,u=function(e,t){return e<0||e>=t.length},d=function(e){return function(t){return a([e],t,!0)}},h=d,p=function(e){return function(t){return a(a([],t,!0),[e],!1)}},g=p,f=function(e,t,n){if(l(n)){var r=o.r1(n);return r.splice(e,0,t),r}return[t]},m=function(e){return l(e)?o.G(e):o.YP},b=function(e){return function(t){for(var n=Math.max(0,Math.floor(t)),r=[e(0)],i=1;i<n;i++)r.push(e(i));return r}},y=function(e,t){return e<=t?b((function(t){return e+t}))(t-e+1):[e]},_=function(e){return m(e.slice())};function v(e,t){return t?e.concat(t):function(t){return t.concat(e)}}var w=function(e){return function(t){for(var n=[e,t[0]],r=1;r<t.length;r++)n.push(e,t[r]);return n}},S=o.ri,k=(0,i.OB)(2,(function(e,t){return(0,i.zG)(e,function(e){return function(t){for(var n=o.r1(e(0,N(t))),r=1;r<t.length;r++)n.push.apply(n,e(r,t[r]));return n}}((function(e,n){return t(n,e)})))})),I=k(i.yR),C=function(e,t){return x(e,(function(e,n,r){return t(n,r)}))},E=function(e){return function(t){return function(n){return n.slice(1).reduce((function(n,r){return e.concat(n,t(r))}),t(n[0]))}}},A=function(e,t){return O(e,(function(e,n,r){return t(n,r)}))},x=function(e,t){return function(n){return n.reduce((function(e,n,r){return t(r,e,n)}),e)}},T=function(e){return function(t){return function(n){return n.slice(1).reduce((function(n,r,i){return e.concat(n,t(i+1,r))}),t(0,n[0]))}}},O=function(e,t){return function(n){return n.reduceRight((function(e,n,r){return t(r,n,e)}),e)}},P=o.YM,R=function(e){return{show:function(t){return"[".concat(t.map(e.show).join(", "),"]")}}},D=function(e){return(0,r.f7)((function(t,n){return t.length===n.length&&t.every((function(t,r){return e.equals(t,n[r])}))}))},N=(o.F4,P),U=o.Gb,M=function(e){return e[e.length-1]},j=function(e){var t=s.VV(e);return function(e){return e.reduce(t.concat)}},F=function(e){var t=s.Fp(e);return function(e){return e.reduce(t.concat)}},L=function(e){return function(t){return t.reduce(e.concat)}},G=function(e){var t=L(e);return function(e){return(0,i.ls)(function(e){return function(t){var n=U(t);return l(n)?(0,i.zG)(n,w(e),h(N(t))):t}}(e),t)}};function B(e){return z((function(t,n){return e(n)}))}var z=function(e){return function(t){return m(t.filter((function(t,n){return e(n,t)})))}};function V(e,t){return void 0===t?h(e):(0,i.zG)(t,h(e))}var q=function(e,t){return(0,i.zG)(e,v([t]))}},8351:(e,t,n)=>{n.d(t,{Bu:()=>p,CC:()=>D,DZ:()=>Y,EW:()=>G,Eh:()=>oe,G:()=>x,HA:()=>O,I8:()=>U,P5:()=>g,RF:()=>N,RJ:()=>j,SW:()=>z,Su:()=>m,UI:()=>b,Ub:()=>q,V_:()=>L,_Y:()=>F,_r:()=>k,dp:()=>c,dx:()=>d,e$:()=>h,hX:()=>K,jt:()=>C,kp:()=>R,mK:()=>$,mS:()=>M,nn:()=>P,nr:()=>ae,nu:()=>B,oA:()=>ne,oh:()=>re,qS:()=>W,ri:()=>w,t9:()=>T,tV:()=>J,uK:()=>Z,uZ:()=>se,vA:()=>H,vP:()=>S,xb:()=>l,yW:()=>A,zV:()=>V});var r=n(21147),i=n(90023),o=n(72816),s=n(25262),a=n(9141),c=(n(6609),function(e){return Object.keys(e).length}),l=function(e){for(var t in e)if(o.e$.call(e,t))return!1;return!0},u=function(e){return function(t){return Object.keys(t).sort(e.compare)}};a.Df;var d=function(e,t){return function(n){if(o.e$.call(n,e)&&n[e]===t)return n;var r=Object.assign({},n);return r[e]=t,r}},h=function(e,t){return o.e$.call(t,e)};function p(e){return function(t,n){if(void 0===n){var r=p(e);return function(e){return r(e,t)}}for(var i in t)if(!o.e$.call(n,i)||!e.equals(t[i],n[i]))return!1;return!0}}function g(e,t){return void 0===t?function(t){return g(e,t)}:o.e$.call(t,e)?o.G(t[e]):o.YP}var f={};function m(e){return function(t){var n={};for(var r in t)o.e$.call(t,r)&&(n[r]=e(r,t[r]));return n}}function b(e){return m((function(t,n){return e(n)}))}function y(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(2===e.length)return y(a.Df).apply(void 0,e);var n=u(e[0]);return function(e,t){return function(r){for(var i=e,o=n(r),s=o.length,a=0;a<s;a++){var c=o[a];i=t(c,i,r[c])}return i}}}function _(e){if("compare"in e){var t=u(e);return function(e){return function(n){return function(r){for(var i=e.empty,o=t(r),s=o.length,a=0;a<s;a++){var c=o[a];i=e.concat(i,n(c,r[c]))}return i}}}}return _(a.Df)(e)}function v(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(2===e.length)return v(a.Df).apply(void 0,e);var n=u(e[0]);return function(e,t){return function(r){for(var i=e,o=n(r),s=o.length-1;s>=0;s--){var a=o[s];i=t(a,r[a],i)}return i}}}var w=function(e,t){var n;return(n={})[e]=t,n};function S(e){return $(a.Df)(e)}function k(e){return function(t){var n={},r={};for(var i in t)if(o.e$.call(t,i)){var a=e(i,t[i]);switch(a._tag){case"Left":n[i]=a.left;break;case"Right":r[i]=a.right}}return(0,s.s4)(n,r)}}function I(e){return function(t){var n={},r={};for(var i in t)if(o.e$.call(t,i)){var a=t[i];e(i,a)?r[i]=a:n[i]=a}return(0,s.s4)(n,r)}}function C(e){return function(t){var n={};for(var r in t)if(o.e$.call(t,r)){var i=e(r,t[r]);o.pC(i)&&(n[r]=i.value)}return n}}function E(e){return function(t){var n={},r=!1;for(var i in t)if(o.e$.call(t,i)){var s=t[i];e(i,s)?n[i]=s:r=!0}return r?n:t}}function A(e){return function(t){for(var n in t)if(!e(t[n]))return!1;return!0}}function x(e){return function(t){for(var n in t)if(e(t[n]))return!0;return!1}}function T(e){return function(t,n){if(void 0===n){var r=T(e);return function(e){return r(t,e)}}for(var i in n)if(e.equals(n[i],t))return!0;return!1}}var O=function(e,t){return(0,i.zG)(e,b(t))},P=function(e,t){return(0,i.zG)(e,m(t))},R=function(e){var t=Q(e);return function(e,n,r){return(0,i.zG)(e,t(n,r))}},D=function(e){return function(t){var n=ee(e)(t);return function(e,t){return(0,i.zG)(e,n(t))}}},N=function(e){var t=te(e);return function(e,n,r){return(0,i.zG)(e,t(n,r))}},U=function(e,t){return(0,i.zG)(e,K(t))},M=function(e,t){return(0,i.zG)(e,Y(t))},j=function(e,t){return(0,i.zG)(e,Z(t))},F=function(e,t){return(0,i.zG)(e,J(t))},L=function(e){var t=y(e);return function(e,n,r){return(0,i.zG)(e,t(n,r))}},G=function(e){var t=_(e);return function(e){var n=t(e);return function(e,t){return(0,i.zG)(e,n(t))}}},B=function(e){var t=v(e);return function(e,n,r){return(0,i.zG)(e,t(n,r))}},z=function(e,t){return(0,i.zG)(e,k(t))},V=function(e,t){return(0,i.zG)(e,I(t))},q=function(e,t){return(0,i.zG)(e,C(t))},H=function(e,t){return(0,i.zG)(e,E(t))},W=function(e){var t=X(e);return function(e){var n=t(e);return function(e,t){return n(e,(0,i.ls)(i.SK,t))}}},$=function(e){var t=W(e);return function(e){var n=t(e);return function(e){return n(e,i.yR)}}},X=function(e){return function(t){var n=u(e);return function(e,r){var i=n(e);if(0===i.length)return t.of(f);for(var o=t.of({}),s=function(n){o=t.ap(t.map(o,(function(e){return function(t){var r;return Object.assign({},e,((r={})[n]=t,r))}})),r(n,e[n]))},a=0,c=i;a<c.length;a++){s(c[a])}return o}}},K=function(e){return E((function(t,n){return e(n)}))},Y=function(e){return C((function(t,n){return e(n)}))},Z=function(e){return I((function(t,n){return e(n)}))},J=function(e){return k((function(t,n){return e(n)}))};function Q(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=y(e[0]);return function(e,t){return n(e,(function(e,n,r){return t(n,r)}))}}return Q(a.Df).apply(void 0,e)}function ee(e){if("compare"in e){var t=_(e);return function(e){var n=t(e);return function(e){return n((function(t,n){return e(n)}))}}}return ee(a.Df)(e)}function te(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=v(e[0]);return function(e,t){return n(e,(function(e,n,r){return t(n,r)}))}}return te(a.Df).apply(void 0,e)}var ne=function(e){var t={};for(var n in e)if(o.e$.call(e,n)){var r=e[n];o.pC(r)&&(t[n]=r.value)}return t},re=function(e){var t={},n={};for(var r in e)if(o.e$.call(e,r)){var i=e[r];o.nM(i)?t[r]=i.left:n[r]=i.right}return(0,s.s4)(t,n)},ie="ReadonlyRecord";function oe(e){var t=p(e);return(0,r.f7)((function(e,n){return t(e)(n)&&t(n)(e)}))}function se(e){return{concat:function(t,n){if(l(t))return n;if(l(n))return t;var r=Object.assign({},t);for(var i in n)o.e$.call(n,i)&&(r[i]=o.e$.call(t,i)?e.concat(t[i],n[i]):n[i]);return r},empty:f}}a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df;function ae(e,t){return o.e$.call(void 0===t?this:t,e)}a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df},4370:(e,t,n)=>{n.d(t,{Kl:()=>o,Lx:()=>a,Yg:()=>i,li:()=>r,nq:()=>c,u4:()=>s});n(90023);function r(e){return e[0]}function i(e){return e[1]}var o=r,s=function(e,t){return function(n){return t(e,r(n))}},a=function(){return function(e){return function(t){return e(r(t))}}},c=function(e,t){return function(n){return t(r(n),e)}}},38538:(e,t,n)=>{n.d(t,{EG:()=>c,Eh:()=>S,KM:()=>a,UI:()=>l,hX:()=>v});var r=n(72816),i=n(8351),o=n(9141),s=(n(6609),i.dp,i.xb,function(e){return function(t){return Object.keys(t).sort(e.compare)}});o.Df;function a(e){if("function"==typeof e)return a(o.Df)(e);var t=s(e);return function(e){return function(n){for(var r=[],i=0,o=t(n);i<o.length;i++){var s=o[i];r.push(e(s,n[s]))}return r}}}i.dx,i.e$;function c(e){return function(t){if(!r.e$.call(t,e))return t;var n=Object.assign({},t);return delete n[e],n}}i.Bu,i.P5,i.Su;var l=i.UI;i.ri;function u(e){return i.vP(e)}i._r;i.jt;i.yW,i.G,i.t9;var d=i.HA,h=(i.nn,i.kp),p=i.CC,g=i.RF,f=(i.I8,i.mS,i.RJ,i._Y,i.V_),m=i.EW,b=i.nu,y=(i.SW,i.zV,i.Ub,i.vA,i.qS),_=(i.mK,function(e){return function(t){var n=s(e);return function(e,r){var i=n(e);if(0===i.length)return t.of({});for(var o=t.of({}),s=function(n){o=t.ap(t.map(o,(function(e){return function(t){return e[n]=t,e}})),r(n,e[n]))},a=0,c=i;a<c.length;a++){s(c[a])}return o}}}),v=i.hX;i.DZ,i.uK,i.tV;i.oA,i.oh;var w="Record";var S=i.Eh;i.uZ,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,i.nr,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df},14911:(e,t,n)=>{n.d(t,{ur:()=>u,Ps:()=>l,g_:()=>p,oQ:()=>h,Fp:()=>a,VV:()=>s,lG:()=>g,ny:()=>f,D8:()=>y,l7:()=>m,xk:()=>b,xx:()=>d,n_:()=>c});var r=n(90023),i=n(72816),o=n(14944),s=function(e){return{concat:o.VV(e)}},a=function(e){return{concat:o.Fp(e)}},c=function(e){return{concat:function(t,n){var r={};for(var o in e)i.e$.call(e,o)&&(r[o]=e[o].concat(t[o],n[o]));return r}}},l=function(){return{concat:r.yR}},u=function(e){return function(t){return function(n){return n.reduce((function(t,n){return e.concat(t,n)}),t)}}},d=function(e){return{concat:function(){return e}}}(void 0),h=a;function p(e){var t=u(e);return function(e,n){return void 0===n?t(e):t(e)(n)}}var g={concat:function(e,t){return e&&t}},f={concat:function(e,t){return e||t}},m={concat:function(e,t){return e+t}},b={concat:function(e,t){return e+t}},y={concat:function(e,t){return e*t}}},25262:(e,t,n)=>{n.d(t,{s4:()=>r});n(90023);var r=function(e,t){return{left:e,right:t}}},18397:(e,t,n)=>{n.d(t,{_3:()=>s,aM:()=>o,p_:()=>i});var r=n(72816),i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return{show:function(t){return"[".concat(t.map((function(t,n){return e[n].show(t)})).join(", "),"]")}}},o=function(e){return{show:function(t){var n="{";for(var i in e)r.e$.call(e,i)&&(n+=" ".concat(i,": ").concat(e[i].show(t[i]),","));return n.length>1&&(n=n.slice(0,-1)+" "),n+="}"}}},s={show:function(e){return JSON.stringify(e)}}},20232:(e,t,n)=>{n.d(t,{Hi:()=>v,PM:()=>_,UA:()=>S,UI:()=>h,W2:()=>b,dO:()=>y,gw:()=>l,oE:()=>T,of:()=>g,tD:()=>c,tS:()=>x});var r=n(81346),i=n(47995),o=n(90023),s=n(50271),a=n(72816),c=function(e){return function(){return Promise.resolve().then(e)}};function l(e){return function(t){return function(){return new Promise((function(n){setTimeout((function(){Promise.resolve().then(t).then(n)}),e)}))}}}var u=function(e,t){return(0,o.zG)(e,h(t))},d=function(e,t){return(0,o.zG)(e,p(t))},h=function(e){return function(t){return function(){return Promise.resolve().then(t).then(e)}}},p=function(e){return function(t){return function(){return Promise.all([Promise.resolve().then(t),Promise.resolve().then(e)]).then((function(e){return(0,e[0])(e[1])}))}}},g=function(e){return function(){return Promise.resolve(e)}},f=(0,o.OB)(2,(function(e,t){return function(){return Promise.resolve().then(e).then((function(e){return t(e)()}))}})),m="Task";function b(){return{concat:function(e,t){return function(){return Promise.race([Promise.resolve().then(e),Promise.resolve().then(t)])}},empty:A}}var y={URI:m,map:u},_=((0,o.OB)(2,(0,s.as)(y)),(0,s.Ep)(y),{URI:m,of:g}),v={URI:m,map:u,ap:d},w={URI:m,map:u,ap:d,chain:f},S={URI:m,map:u,of:g,ap:d,chain:f},k=o.yR,I={URI:m,fromIO:c},C={flatMap:f},E={fromIO:I.fromIO},A=(a.we(E,C),r.bw(w),(0,i.in)(I,w),function(){return new Promise((function(e){}))}),x=(a.F4,a.Xl,f),T={URI:m,map:u,of:g,ap:d,chain:f,fromIO:c,fromTask:k}},67177:(e,t,n)=>{n.d(t,{a1:()=>W,Pd:()=>U,tS:()=>Q,mU:()=>te,Zl:()=>ee,VS:()=>L,g_:()=>I,Uo:()=>S,DT:()=>J,fS:()=>C,t$:()=>f,lk:()=>y,UI:()=>D,SA:()=>N,Vn:()=>j,of:()=>B,vx:()=>x,F2:()=>m,dk:()=>_,QM:()=>b,Ij:()=>ne,dg:()=>re,Y3:()=>E,it:()=>A});var r=n(18117),i=n(81346),o=n(38136),s=n(10522),a=n(47995),c=n(90023);function l(e,t){var n=(0,i.bw)(t);return function(t,r){return n(t,(0,c.ls)(r,e.fromTask))}}var u=n(50271),d=n(72816),h=n(20232),p=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},g=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},f=o.t$(h.PM),m=o.F2(h.PM),b=o.m8(h.dO),y=o.pk(h.dO),_=(0,c.ls)(h.tD,b),v=(h.tD,_),w=b,S=h.of,k=(h.tD,h.dO,o.LV(h.UA)),I=k,C=o.fS(h.UA),E=function(e,t){return function(){return p(void 0,void 0,void 0,(function(){var n;return g(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e().then(d.F2)];case 1:return[2,r.sent()];case 2:return n=r.sent(),[2,d.t$(t(n))];case 3:return[2]}}))}))}},A=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return E((function(){return e.apply(void 0,n)}),t)}},x=(h.dO,h.PM,h.PM,h.UA,o.vx(h.UA)),T=(o.sn(h.UA),h.UA,h.dO,function(e,t){return(0,c.zG)(e,D(t))}),O=function(e,t){return(0,c.zG)(e,F(t))},P=function(e,t){return L(e,(function(e){return(0,c.zG)(t,D(e))}))},R=function(e,t){return(0,c.zG)(e,G(t))},D=o.UI(h.dO),N=(0,c.OB)(3,o.SA(h.dO)),U=N,M=(0,c.OB)(2,o.d1(h.dO)),j=M,F=o.ap(h.Hi),L=(0,c.OB)(2,o.VS(h.UA)),G=o.wp(h.UA),B=m,z=f,V="TaskEither";var q={URI:V,map:T},H=((0,c.OB)(2,(0,u.as)(q)),(0,u.Ep)(q),{URI:V,map:T,ap:O}),W=(0,r.a1)(H),$={URI:V,map:T,ap:O,chain:L},X={URI:V,fromEither:S},K={URI:V,fromIO:v},Y={URI:V,fromIO:v,fromTask:w},Z=(0,c.OB)(2,i.bw($)),J=((0,s.WB)(X,$),(0,a.in)(K,$),l(Y,$),(0,s.DT)(X));d.F4,d.Xl;var Q=L,ee=L,te=Z,ne={URI:V,bimap:N,mapLeft:M,map:T,of:B,ap:O,chain:L,alt:R,fromIO:v,fromTask:w,throwError:z},re={URI:V,bimap:N,mapLeft:M,map:T,of:B,ap:P,chain:L,alt:R,fromIO:v,fromTask:w,throwError:z}},97225:(e,t,n)=>{n.d(t,{Eh:()=>b,F2:()=>u,Hk:()=>d,LF:()=>f,Pd:()=>y,WP:()=>c,ZN:()=>m,g_:()=>g,nM:()=>s,t$:()=>l,tO:()=>a});var r=n(21147),i=n(90023),o=n(72816),s=function(e){return"Left"===e._tag},a=function(e){return"Right"===e._tag};function c(e){return"Both"===e._tag}function l(e){return{_tag:"Left",left:e}}function u(e){return{_tag:"Right",right:e}}function d(e,t){return{_tag:"Both",left:e,right:t}}var h=function(e,t,n){return function(r){switch(r._tag){case"Left":return e(r.left);case"Right":return t(r.right);case"Both":return n(r.left,r.right)}}},p=h,g=p,f=p(u,l,(function(e,t){return d(t,e)}));function m(e,t){return{show:p((function(t){return"left(".concat(e.show(t),")")}),(function(e){return"right(".concat(t.show(e),")")}),(function(n,r){return"both(".concat(e.show(n),", ").concat(t.show(r),")")}))}}function b(e,t){return(0,r.f7)((function(n,r){return s(n)?s(r)&&e.equals(n.left,r.left):a(n)?a(r)&&t.equals(n.right,r.right):c(r)&&e.equals(n.left,r.left)&&t.equals(n.right,r.right)}))}var y=function(e,t){return function(n){return s(n)?l(e(n.left)):a(n)?u(t(n.right)):d(e(n.left),t(n.right))}},_=u,v="These";i.yR,i.yR,o.Xl},92748:(e,t,n)=>{n.d(t,{Yg:()=>o,li:()=>i});n(90023);var r=n(4370),i=r.li,o=r.Yg;r.Kl,r.Lx,r.u4,r.nq},6609:(e,t,n)=>{function r(e,t){return function(n){var r=e.traverse(n);return function(e,i){return n.map(r(e,i),t.separate)}}}function i(e,t){return function(n){var r=e.traverse(n);return function(e,i){return n.map(r(e,i),t.compact)}}}n.d(t,{BL:()=>i,Fj:()=>r})},64332:(e,t,n)=>{n.d(t,{Df:()=>i,Eq:()=>r});var r={equals:function(e,t){return e===t}},i={equals:r.equals,compare:function(e,t){return e<t?-1:e>t?1:0}}},90023:(e,t,n)=>{n.d(t,{MZ:()=>s,OB:()=>v,Q1:()=>h,Rz:()=>f,SK:()=>y,W8:()=>c,a9:()=>a,bc:()=>g,ff:()=>_,gn:()=>u,jv:()=>l,ls:()=>p,og:()=>m,r5:()=>d,uZ:()=>i,yR:()=>o,zG:()=>b});var r=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},i=function(e){var t=function(e){return function(){return{concat:function(t,n){return function(r){return e.concat(t(r),n(r))}}}}}(e);return function(){return{concat:t().concat,empty:function(){return e.empty}}}};function o(e){return e}var s=o;function a(e){return function(){return e}}var c=a(!0),l=a(!1),u=a(null),d=a(void 0),h=d;function p(e,t,n,r,i,o,s,a,c){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return n(t(e.apply(this,arguments)))};case 4:return function(){return r(n(t(e.apply(this,arguments))))};case 5:return function(){return i(r(n(t(e.apply(this,arguments)))))};case 6:return function(){return o(i(r(n(t(e.apply(this,arguments))))))};case 7:return function(){return s(o(i(r(n(t(e.apply(this,arguments)))))))};case 8:return function(){return a(s(o(i(r(n(t(e.apply(this,arguments))))))))};case 9:return function(){return c(a(s(o(i(r(n(t(e.apply(this,arguments)))))))))}}}function g(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e}function f(e){throw new Error("Called `absurd` function which should be uncallable")}function m(e){return function(t){return e.apply(void 0,t)}}function b(e,t,n,r,i,o,s,a,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return i(r(n(t(e))));case 6:return o(i(r(n(t(e)))));case 7:return s(o(i(r(n(t(e))))));case 8:return a(s(o(i(r(n(t(e)))))));case 9:return c(a(s(o(i(r(n(t(e))))))));default:for(var l=arguments[0],u=1;u<arguments.length;u++)l=arguments[u](l);return l}}var y=function(e,t){return t};function _(e){return function(t){return!e(t)}}var v=function(e,t){var n="number"==typeof e?function(t){return t.length>=e}:e;return function(){var e=Array.from(arguments);return n(arguments)?t.apply(this,e):function(n){return t.apply(void 0,r([n],e,!1))}}}},72816:(e,t,n)=>{n.d(t,{F2:()=>h,F4:()=>y,G:()=>c,Gb:()=>m,Od:()=>g,Wi:()=>o,Xl:()=>b,YM:()=>f,YP:()=>a,e$:()=>_,nM:()=>l,pC:()=>s,r1:()=>v,ri:()=>p,t$:()=>d,tO:()=>u,we:()=>w});var r=n(90023),i=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},o=function(e){return"None"===e._tag},s=function(e){return"Some"===e._tag},a={_tag:"None"},c=function(e){return{_tag:"Some",value:e}},l=function(e){return"Left"===e._tag},u=function(e){return"Right"===e._tag},d=function(e){return{_tag:"Left",left:e}},h=function(e){return{_tag:"Right",right:e}},p=function(e){return[e]},g=function(e){return e.length>0},f=function(e){return e[0]},m=function(e){return e.slice(1)},b=[],y={},_=Object.prototype.hasOwnProperty,v=function(e){return i([e[0]],e.slice(1),!0)},w=function(e,t){return(0,r.OB)(2,(function(n,r){return t.flatMap(n,(function(t){return e.fromIO(r(t))}))}))}},9615:(e,t,n)=>{n.d(t,{Df:()=>i,Eq:()=>r,di:()=>o});var r={equals:function(e,t){return e===t}},i={equals:r.equals,compare:function(e,t){return e<t?-1:e>t?1:0}},o=(r.equals,i.compare,{show:function(e){return JSON.stringify(e)}})},39953:(e,t,n)=>{n.d(t,{iz:()=>s,zG:()=>a});var r=n(18117),i=n(81346),o=n(90023);function s(e){var t={};if(function(e){return"function"==typeof e.map}(e)&&(t.map=function(e){return function(t){return function(n){return e.map(n,t)}}}(e)),function(e){return"function"==typeof e.contramap}(e)&&(t.contramap=function(e){return function(t){return function(n){return e.contramap(n,t)}}}(e)),function(e){return"function"==typeof e.mapWithIndex}(e)&&(t.mapWithIndex=function(e){return function(t){return function(n){return e.mapWithIndex(n,t)}}}(e)),function(e){return"function"==typeof e.ap}(e)&&(t.ap=function(e){return function(t){return function(n){return e.ap(n,t)}}}(e),t.apFirst=(0,r.N)(e),t.apSecond=(0,r.a1)(e)),function(e){return"function"==typeof e.chain}(e)&&(t.chain=function(e){return function(t){return function(n){return e.chain(n,t)}}}(e),t.chainFirst=(0,i.mU)(e),t.flatten=t.chain(o.yR)),function(e){return"function"==typeof e.bimap}(e)&&(t.bimap=function(e){return function(t,n){return function(r){return e.bimap(r,t,n)}}}(e),t.mapLeft=function(e){return function(t){return function(n){return e.mapLeft(n,t)}}}(e)),function(e){return"function"==typeof e.extend}(e)&&(t.extend=function(e){return function(t){return function(n){return e.extend(n,t)}}}(e),t.duplicate=t.extend(o.yR)),function(e){return"function"==typeof e.reduce}(e)&&(t.reduce=function(e){return function(t,n){return function(r){return e.reduce(r,t,n)}}}(e),t.foldMap=function(e){return function(t){var n=e.foldMap(t);return function(e){return function(t){return n(t,e)}}}}(e),t.reduceRight=function(e){return function(t,n){return function(r){return e.reduceRight(r,t,n)}}}(e)),function(e){return"function"==typeof e.reduceWithIndex}(e)&&(t.reduceWithIndex=function(e){return function(t,n){return function(r){return e.reduceWithIndex(r,t,n)}}}(e),t.foldMapWithIndex=function(e){return function(t){var n=e.foldMapWithIndex(t);return function(e){return function(t){return n(t,e)}}}}(e),t.reduceRightWithIndex=function(e){return function(t,n){return function(r){return e.reduceRightWithIndex(r,t,n)}}}(e)),function(e){return"function"==typeof e.alt}(e)&&(t.alt=function(e){return function(t){return function(n){return e.alt(n,t)}}}(e)),function(e){return"function"==typeof e.compact}(e)&&(t.compact=e.compact,t.separate=e.separate),function(e){return"function"==typeof e.filter}(e)&&(t.filter=function(e){return function(t){return function(n){return e.filter(n,t)}}}(e),t.filterMap=function(e){return function(t){return function(n){return e.filterMap(n,t)}}}(e),t.partition=function(e){return function(t){return function(n){return e.partition(n,t)}}}(e),t.partitionMap=function(e){return function(t){return function(n){return e.partitionMap(n,t)}}}(e)),function(e){return"function"==typeof e.filterWithIndex}(e)&&(t.filterWithIndex=function(e){return function(t){return function(n){return e.filterWithIndex(n,t)}}}(e),t.filterMapWithIndex=function(e){return function(t){return function(n){return e.filterMapWithIndex(n,t)}}}(e),t.partitionWithIndex=function(e){return function(t){return function(n){return e.partitionWithIndex(n,t)}}}(e),t.partitionMapWithIndex=function(e){return function(t){return function(n){return e.partitionMapWithIndex(n,t)}}}(e)),function(e){return"function"==typeof e.promap}(e)&&(t.promap=function(e){return function(t,n){return function(r){return e.promap(r,t,n)}}}(e)),function(e){return"function"==typeof e.compose}(e)&&(t.compose=function(e){return function(t){return function(n){return e.compose(n,t)}}}(e)),function(e){return"function"==typeof e.throwError}(e)){t.fromOption=function(t){return function(n){return"None"===n._tag?e.throwError(t()):e.of(n.value)}},t.fromEither=function(t){return"Left"===t._tag?e.throwError(t.left):e.of(t.right)},t.fromPredicate=function(t,n){return function(r){return t(r)?e.of(r):e.throwError(n(r))}},t.filterOrElse=function(t,n){return function(r){return e.chain(r,(function(r){return t(r)?e.of(r):e.throwError(n(r))}))}}}return t}var a=o.zG},9141:(e,t,n)=>{n.d(t,{Df:()=>i,Eq:()=>r,di:()=>o});var r={equals:function(e,t){return e===t}},i={equals:r.equals,compare:function(e,t){return e<t?-1:e>t?1:0}},o={show:function(e){return JSON.stringify(e)}}},63332:(e,t,n)=>{n.d(t,{AG:()=>o,IM:()=>l,IX:()=>u,OT:()=>f,Sm:()=>p,Vo:()=>g,bc:()=>d,dt:()=>a,id:()=>m,n_:()=>s,ov:()=>b,r$:()=>c,wf:()=>h});var r=n(21622),i=n(90023);function o(e){return{encode:function(t){return null===t?null:e.encode(t)}}}function s(e){return{encode:function(t){var n={};for(var r in e)n[r]=e[r].encode(t[r]);return n}}}var a=s;function c(e){return{encode:function(t){var n={};for(var r in e){var i=t[r];r in t&&(n[r]=void 0===i?void 0:e[r].encode(i))}return n}}}function l(e){return{encode:function(t){var n={};for(var r in t)n[r]=e.encode(t[r]);return n}}}function u(e){return{encode:function(t){return t.map(e.encode)}}}function d(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return{encode:function(t){return e.map((function(e,n){return e.encode(t[n])}))}}}var h=function(e){return function(t){return{encode:function(n){return(0,r.U)(t.encode(n),e.encode(n))}}}};function p(e){return function(t){return{encode:function(n){return t[n[e]].encode(n)}}}}function g(e){var t=(0,r.H)(e);return{encode:function(e){return t().encode(e)}}}var f=i.yR;function m(){return{encode:i.yR}}var b="io-ts/Encoder"},6824:(e,t,n)=>{n.r(t),n.d(t,{Schemable:()=>O,URI:()=>T,UnknownArray:()=>u,UnknownRecord:()=>d,WithRefine:()=>D,WithUnion:()=>R,WithUnknownContainers:()=>P,alt:()=>C,array:()=>b,boolean:()=>l,compose:()=>A,id:()=>x,intersect:()=>v,lazy:()=>k,literal:()=>s,nullable:()=>p,number:()=>c,partial:()=>m,readonly:()=>I,record:()=>y,refine:()=>h,string:()=>a,struct:()=>g,sum:()=>S,tuple:()=>_,type:()=>f,union:()=>w,zero:()=>E});var r=n(90023),i=n(39953),o=n(21622),s=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return{is:function(t){return-1!==e.findIndex((function(e){return e===t}))}}},a={is:function(e){return"string"==typeof e}},c={is:function(e){return"number"==typeof e&&!isNaN(e)}},l={is:function(e){return"boolean"==typeof e}},u={is:Array.isArray},d={is:function(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)}},h=function(e){return function(t){return{is:function(n){return t.is(n)&&e(n)}}}},p=function(e){return{is:function(t){return null===t||e.is(t)}}},g=function(e){return(0,i.zG)(d,h((function(t){for(var n in e)if(!(n in t)||!e[n].is(t[n]))return!1;return!0})))},f=g,m=function(e){return(0,i.zG)(d,h((function(t){for(var n in e){var r=t[n];if(void 0!==r&&!e[n].is(r))return!1}return!0})))},b=function(e){return(0,i.zG)(u,h((function(t){return t.every(e.is)})))},y=function(e){return(0,i.zG)(d,h((function(t){for(var n in t)if(!e.is(t[n]))return!1;return!0})))},_=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return{is:function(t){return Array.isArray(t)&&t.length===e.length&&e.every((function(e,n){return e.is(t[n])}))}}},v=function(e){return function(t){return{is:function(n){return t.is(n)&&e.is(n)}}}},w=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return{is:function(t){return e.some((function(e){return e.is(t)}))}}},S=function(e){return function(t){return(0,i.zG)(d,h((function(n){var r=n[e];return r in t&&t[r].is(n)})))}},k=function(e){var t=o.H(e);return{is:function(e){return t().is(e)}}},I=r.yR,C=function(e){return function(t){return{is:function(n){return t.is(n)||e().is(n)}}}},E=function(){return{is:function(e){return!1}}},A=function(e){return function(t){return{is:function(n){return t.is(n)&&e.is(n)}}}},x=function(){return{is:function(e){return!0}}},T="io-ts/Guard",O={URI:T,literal:s,string:a,number:c,boolean:l,nullable:p,type:f,struct:g,partial:m,record:y,array:b,tuple:_,intersect:v,sum:S,lazy:function(e,t){return k(t)},readonly:I},P={UnknownArray:u,UnknownRecord:d},R={union:w},D={refine:h}},43351:(e,t,n)=>{n.d(t,{Rn:()=>o,qq:()=>s});var r=n(11633);function i(e){return void 0!==e.message?e.message:"Invalid value ".concat((t=e.value,"function"==typeof t?(0,r.$P)(t):"number"!=typeof t||isFinite(t)?JSON.stringify(t):isNaN(t)?"NaN":t>0?"Infinity":"-Infinity")," supplied to ").concat(e.context.map((function(e){var t=e.key,n=e.type;return"".concat(t,": ").concat(n.name)})).join("/"));var t}function o(e){return e.map(i)}var s={report:(0,n(12518).g_)(o,(function(){return["No errors!"]}))}},36661:(e,t,n)=>{n.d(t,{S:()=>i,n:()=>o});var r=n(21622);function i(e){return(0,r.H)(e)}function o(e){return function(t){return t(e)}}},21622:(e,t,n)=>{function r(e){var t=new Map;return function(n){if(!t.has(n)){var r=e(n);return t.set(n,r),r}return t.get(n)}}n.d(t,{H:()=>r,U:()=>o});var i=function(e){return null===e?"null":typeof e},o=function(e,t){if(void 0!==e&&void 0!==t){var n=i(e),r=i(t);if("object"===n||"object"===r)return Object.assign({},e,t)}return t}},11633:(e,t,n)=>{n.d(t,{$P:()=>p,Bk:()=>pe,Dy:()=>d,G0:()=>oe,IM:()=>re,IX:()=>Z,Ii:()=>se,JS:()=>g,MQ:()=>N,O7:()=>L,OT:()=>de,Rn:()=>l,S1:()=>U,UQ:()=>$,Vp:()=>u,X1:()=>J,Z_:()=>j,_4:()=>M,bc:()=>le,dt:()=>Q,gc:()=>ee,i0:()=>V,iG:()=>me,jV:()=>ae,lB:()=>N,mI:()=>B,mM:()=>H,mq:()=>c,pk:()=>F,r$:()=>te,sH:()=>K,w3:()=>Q,wY:()=>ge,yR:()=>h});var r,i=n(12518),o=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)},a=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},c=i.t$,l=function(e,t,n){return c([{value:e,context:t,message:n}])},u=i.F2,d=function(){function e(e,t,n,r){this.name=e,this.is=t,this.validate=n,this.encode=r,this.decode=this.decode.bind(this)}return e.prototype.pipe=function(t,n){var r=this;return void 0===n&&(n="pipe(".concat(this.name,", ").concat(t.name,")")),new e(n,t.is,(function(e,n){var o=r.validate(e,n);return(0,i.nM)(o)?o:t.validate(o.right,n)}),this.encode===h&&t.encode===h?h:function(e){return r.encode(t.encode(e))})},e.prototype.asDecoder=function(){return this},e.prototype.asEncoder=function(){return this},e.prototype.decode=function(e){return this.validate(e,[{key:"",type:this,actual:e}])},e}(),h=function(e){return e};function p(e){return e.displayName||e.name||"<function".concat(e.length,">")}function g(e,t,n,r){for(var i=e.length,o=Array(i+1),s=0;s<i;s++)o[s]=e[s];return o[i]={key:t,type:n,actual:r},o}function f(e,t){for(var n=t.length,r=0;r<n;r++)e.push(t[r])}var m=Object.prototype.hasOwnProperty;function b(e){return Object.keys(e).map((function(t){return"".concat(t,": ").concat(e[t].name)})).join(", ")}function y(e){for(var t=0;t<e.length;t++)if(e[t].encode!==h)return!1;return!0}function _(e){return"{ ".concat(b(e)," }")}function v(e){return"Partial<".concat(e,">")}function w(e){var t;if(T(e)){var n=e.value;if(j.is(n))return(t={})[n]=null,t}else{if("KeyofType"===e._tag)return e.keys;if(P(e)){var r=e.types.map((function(e){return w(e)}));return r.some(U.is)?void 0:Object.assign.apply(Object,a([{}],r,!1))}}}function S(e){return"("+e.map((function(e){return e.name})).join(" | ")+")"}function k(e,t){for(var n=!0,r=!0,i=!B.is(e),o=0,s=t;o<s.length;o++){(u=s[o])!==e&&(n=!1),B.is(u)&&(r=!1)}if(n)return e;if(r)return t[t.length-1];for(var a={},c=0,l=t;c<l.length;c++){var u=l[c];for(var d in u)m.call(a,d)&&!i&&u[d]===e[d]||(a[d]=u[d])}return a}function I(e){switch(e._tag){case"RefinementType":case"ReadonlyType":return I(e.type);case"InterfaceType":case"StrictType":case"PartialType":return e.props;case"IntersectionType":return e.types.reduce((function(e,t){return Object.assign(e,I(t))}),{})}}function C(e,t){for(var n=Object.getOwnPropertyNames(e),r=!1,i={},o=0;o<n.length;o++){var s=n[o];m.call(t,s)?i[s]=e[s]:r=!0}return r?i:e}var E={};function A(e,t){for(var n=[],r=0,i=e;r<i.length;r++){var o=i[r];-1!==t.indexOf(o)&&n.push(o)}return n}function x(e){return"AnyType"===e._tag}function T(e){return"LiteralType"===e._tag}function O(e){return"InterfaceType"===e._tag}function P(e){return"UnionType"===e._tag}var R=[];function D(e){if(-1!==R.indexOf(e))return E;if(O(e)||function(e){return"StrictType"===e._tag}(e)){var t=E;for(var n in e.props){var r=e.props[n];T(r)&&(t===E&&(t={}),t[n]=[r.value])}return t}if(function(e){return"ExactType"===e._tag}(e)||function(e){return"RefinementType"===e._tag}(e))return D(e.type);if(function(e){return"IntersectionType"===e._tag}(e))return e.types.reduce((function(e,t){return function(e,t){if(e===E)return t;if(t===E)return e;var n=Object.assign({},e);for(var r in t)if(m.call(e,r)){var i=A(e[r],t[r]);if(!(i.length>0)){n=E;break}n[r]=i}else n[r]=t[r];return n}(e,D(t))}),E);if(P(e))return e.types.slice(1).reduce((function(e,t){return function(e,t){if(e===E||t===E)return E;var n=E;for(var r in e)m.call(t,r)&&0===A(e[r],t[r]).length&&(n===E&&(n={}),n[r]=e[r].concat(t[r]));return n}(e,D(t))}),D(e.types[0]));if(function(e){return"RecursiveType"===e._tag}(e)){R.push(e);var i=D(e.type);return R.pop(),i}return E}var N=new(function(e){function t(){var t=e.call(this,"null",(function(e){return null===e}),(function(e,n){return t.is(e)?u(e):l(e,n)}),h)||this;return t._tag="NullType",t}return o(t,e),t}(d)),U=new(function(e){function t(){var t=e.call(this,"undefined",(function(e){return void 0===e}),(function(e,n){return t.is(e)?u(e):l(e,n)}),h)||this;return t._tag="UndefinedType",t}return o(t,e),t}(d)),M=(new(function(e){function t(){var t=e.call(this,"void",U.is,U.validate,h)||this;return t._tag="VoidType",t}return o(t,e),t}(d)),new(function(e){function t(){var t=e.call(this,"unknown",(function(e){return!0}),u,h)||this;return t._tag="UnknownType",t}return o(t,e),t}(d))),j=new(function(e){function t(){var t=e.call(this,"string",(function(e){return"string"==typeof e}),(function(e,n){return t.is(e)?u(e):l(e,n)}),h)||this;return t._tag="StringType",t}return o(t,e),t}(d)),F=new(function(e){function t(){var t=e.call(this,"number",(function(e){return"number"==typeof e}),(function(e,n){return t.is(e)?u(e):l(e,n)}),h)||this;return t._tag="NumberType",t}return o(t,e),t}(d)),L=(new(function(e){function t(){var t=e.call(this,"bigint",(function(e){return"bigint"==typeof e}),(function(e,n){return t.is(e)?u(e):l(e,n)}),h)||this;return t._tag="BigIntType",t}return o(t,e),t}(d)),new(function(e){function t(){var t=e.call(this,"boolean",(function(e){return"boolean"==typeof e}),(function(e,n){return t.is(e)?u(e):l(e,n)}),h)||this;return t._tag="BooleanType",t}return o(t,e),t}(d))),G=new(function(e){function t(){var t=e.call(this,"UnknownArray",Array.isArray,(function(e,n){return t.is(e)?u(e):l(e,n)}),h)||this;return t._tag="AnyArrayType",t}return o(t,e),t}(d)),B=new(function(e){function t(){var t=e.call(this,"UnknownRecord",(function(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)}),(function(e,n){return t.is(e)?u(e):l(e,n)}),h)||this;return t._tag="AnyDictionaryType",t}return o(t,e),t}(d)),z=function(e){function t(t,n,r,i,o){var s=e.call(this,t,n,r,i)||this;return s.value=o,s._tag="LiteralType",s}return o(t,e),t}(d);function V(e,t){void 0===t&&(t=JSON.stringify(e));var n=function(t){return t===e};return new z(t,n,(function(t,r){return n(t)?u(e):l(t,r)}),h,e)}var q=function(e){function t(t,n,r,i,o){var s=e.call(this,t,n,r,i)||this;return s.keys=o,s._tag="KeyofType",s}return o(t,e),t}(d);function H(e,t){void 0===t&&(t=Object.keys(e).map((function(e){return JSON.stringify(e)})).join(" | "));var n=function(t){return j.is(t)&&m.call(e,t)};return new q(t,n,(function(e,t){return n(e)?u(e):l(e,t)}),h,e)}var W=function(e){function t(t,n,r,i,o,s){var a=e.call(this,t,n,r,i)||this;return a.type=o,a.predicate=s,a._tag="RefinementType",a}return o(t,e),t}(d);function $(e,t,n){return ye(e,t,n)}$(F,(function(e){return Number.isInteger(e)}),"Int");var X=function(e){function t(t,n,r,i,o){var s=e.call(this,t,n,r,i)||this;return s.runDefinition=o,s._tag="RecursiveType",s}return o(t,e),t}(d);function K(e,t){var n,r=function(){return n||((n=t(i)).name=e),n},i=new X(e,(function(e){return r().is(e)}),(function(e,t){return r().validate(e,t)}),(function(e){return r().encode(e)}),r);return i}Object.defineProperty(X.prototype,"type",{get:function(){return this.runDefinition()},enumerable:!0,configurable:!0});var Y=function(e){function t(t,n,r,i,o){var s=e.call(this,t,n,r,i)||this;return s.type=o,s._tag="ArrayType",s}return o(t,e),t}(d);function Z(e,t){return void 0===t&&(t="Array<".concat(e.name,">")),new Y(t,(function(t){return G.is(t)&&t.every(e.is)}),(function(t,n){var r=G.validate(t,n);if((0,i.nM)(r))return r;for(var o=r.right,s=o.length,a=o,l=[],d=0;d<s;d++){var h=o[d],p=e.validate(h,g(n,String(d),e,h));if((0,i.nM)(p))f(l,p.left);else{var m=p.right;m!==h&&(a===o&&(a=o.slice()),a[d]=m)}}return l.length>0?c(l):u(a)}),e.encode===h?h:function(t){return t.map(e.encode)},e)}var J=function(e){function t(t,n,r,i,o){var s=e.call(this,t,n,r,i)||this;return s.props=o,s._tag="InterfaceType",s}return o(t,e),t}(d);function Q(e,t){void 0===t&&(t=_(e));var n=Object.keys(e),r=n.map((function(t){return e[t]})),o=n.length;return new J(t,(function(e){if(B.is(e)){for(var t=0;t<o;t++){var i=n[t],s=e[i];if(void 0===s&&!m.call(e,i)||!r[t].is(s))return!1}return!0}return!1}),(function(e,t){var a=B.validate(e,t);if((0,i.nM)(a))return a;for(var l=a.right,d=l,h=[],p=0;p<o;p++){var b=n[p],y=d[b],_=r[p],v=_.validate(y,g(t,b,_,y));if((0,i.nM)(v))f(h,v.left);else{var w=v.right;(w!==y||void 0===w&&!m.call(d,b))&&(d===l&&(d=s({},l)),d[b]=w)}}return h.length>0?c(h):u(d)}),y(r)?h:function(e){for(var t=s({},e),i=0;i<o;i++){var a=n[i],c=r[i].encode;c!==h&&(t[a]=c(e[a]))}return t},e)}var ee=function(e){function t(t,n,r,i,o){var s=e.call(this,t,n,r,i)||this;return s.props=o,s._tag="PartialType",s}return o(t,e),t}(d);function te(e,t){void 0===t&&(t=v(_(e)));var n=Object.keys(e),r=n.map((function(t){return e[t]})),o=n.length;return new ee(t,(function(t){if(B.is(t)){for(var r=0;r<o;r++){var i=n[r],s=t[i];if(void 0!==s&&!e[i].is(s))return!1}return!0}return!1}),(function(t,r){var a=B.validate(t,r);if((0,i.nM)(a))return a;for(var l=a.right,d=l,h=[],p=0;p<o;p++){var m=n[p],b=d[m],y=e[m],_=y.validate(b,g(r,m,y,b));if((0,i.nM)(_))void 0!==b&&f(h,_.left);else{var v=_.right;v!==b&&(d===l&&(d=s({},l)),d[m]=v)}}return h.length>0?c(h):u(d)}),y(r)?h:function(e){for(var t=s({},e),i=0;i<o;i++){var a=n[i],c=e[a];void 0!==c&&(t[a]=r[i].encode(c))}return t},e)}var ne=function(e){function t(t,n,r,i,o,s){var a=e.call(this,t,n,r,i)||this;return a.domain=o,a.codomain=s,a._tag="DictionaryType",a}return o(t,e),t}(d);function re(e,t,n){var r=w(e);return r?function(e,t,n,r){void 0===r&&(r="{ [K in ".concat(t.name,"]: ").concat(n.name," }"));var o=e.length;return new ne(r,(function(t){return B.is(t)&&e.every((function(e){return n.is(t[e])}))}),(function(t,r){var s=B.validate(t,r);if((0,i.nM)(s))return s;for(var a=s.right,l={},d=[],h=!1,p=0;p<o;p++){var m=e[p],b=a[m],y=n.validate(b,g(r,m,n,b));if((0,i.nM)(y))f(d,y.left);else{var _=y.right;h=h||_!==b,l[m]=_}}return d.length>0?c(d):u(h||Object.keys(a).length!==o?l:a)}),n.encode===h?h:function(t){for(var r={},i=0;i<o;i++){var s=e[i];r[s]=n.encode(t[s])}return r},t,n)}(Object.keys(r),e,t,n):function(e,t,n){return void 0===n&&(n="{ [K in ".concat(e.name,"]: ").concat(t.name," }")),new ne(n,(function(n){return B.is(n)?Object.keys(n).every((function(r){return e.is(r)&&t.is(n[r])})):x(t)&&Array.isArray(n)}),(function(n,r){if(B.is(n)){for(var o={},s=[],a=Object.keys(n),d=a.length,h=!1,p=0;p<d;p++){var m=a[p],b=n[m],y=e.validate(m,g(r,m,e,m));if((0,i.nM)(y))f(s,y.left);else{var _=y.right;h=h||_!==m,m=_;var v=t.validate(b,g(r,m,t,b));if((0,i.nM)(v))f(s,v.left);else{var w=v.right;h=h||w!==b,o[m]=w}}}return s.length>0?c(s):u(h?o:n)}return x(t)&&Array.isArray(n)?u(n):l(n,r)}),e.encode===h&&t.encode===h?h:function(n){for(var r={},i=Object.keys(n),o=i.length,s=0;s<o;s++){var a=i[s];r[String(e.encode(a))]=t.encode(n[a])}return r},e,t)}(e,t,n)}var ie=function(e){function t(t,n,r,i,o){var s=e.call(this,t,n,r,i)||this;return s.types=o,s._tag="UnionType",s}return o(t,e),t}(d);function oe(e,t){void 0===t&&(t=S(e));var n=function(e){for(var t=D(e[0]),n=Object.keys(t),r=e.length,i=function(n){for(var i=t[n].slice(),o=[t[n]],s=1;s<r;s++){var a=D(e[s])[n];if(void 0===a)return"continue-keys";if(a.some((function(e){return-1!==i.indexOf(e)})))return"continue-keys";i.push.apply(i,a),o.push(a)}return{value:[n,o]}},o=0,s=n;o<s.length;o++){var a=i(s[o]);if("object"==typeof a)return a.value}}(e);if(void 0!==n&&e.length>0){var r=n[0],o=n[1],s=o.length,a=function(e){for(var t=0;t<s;t++)if(-1!==o[t].indexOf(e))return t};return new be(t,(function(t){if(B.is(t)){var n=a(t[r]);return void 0!==n&&e[n].is(t)}return!1}),(function(t,n){var o=B.validate(t,n);if((0,i.nM)(o))return o;var s=o.right,c=a(s[r]);if(void 0===c)return l(t,n);var u=e[c];return u.validate(s,g(n,String(c),u,s))}),y(e)?h:function(n){var i=a(n[r]);if(void 0===i)throw new Error("no codec found to encode value in union codec ".concat(t));return e[i].encode(n)},e,r)}return new ie(t,(function(t){return e.some((function(e){return e.is(t)}))}),(function(t,n){for(var r=[],o=0;o<e.length;o++){var s=e[o],a=s.validate(t,g(n,String(o),s,t));if(!(0,i.nM)(a))return u(a.right);f(r,a.left)}return c(r)}),y(e)?h:function(n){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.is(n))return o.encode(n)}throw new Error("no codec found to encode value in union type ".concat(t))},e)}var se=function(e){function t(t,n,r,i,o){var s=e.call(this,t,n,r,i)||this;return s.types=o,s._tag="IntersectionType",s}return o(t,e),t}(d);function ae(e,t){void 0===t&&(t="(".concat(e.map((function(e){return e.name})).join(" & "),")"));var n=e.length;return new se(t,(function(t){return e.every((function(e){return e.is(t)}))}),0===e.length?u:function(t,r){for(var o=[],s=[],a=0;a<n;a++){var l=e[a],d=l.validate(t,g(r,String(a),l,t));(0,i.nM)(d)?f(s,d.left):o.push(d.right)}return s.length>0?c(s):u(k(t,o))},0===e.length?h:function(t){return k(t,e.map((function(e){return e.encode(t)})))},e)}var ce=function(e){function t(t,n,r,i,o){var s=e.call(this,t,n,r,i)||this;return s.types=o,s._tag="TupleType",s}return o(t,e),t}(d);function le(e,t){void 0===t&&(t="[".concat(e.map((function(e){return e.name})).join(", "),"]"));var n=e.length;return new ce(t,(function(t){return G.is(t)&&t.length===n&&e.every((function(e,n){return e.is(t[n])}))}),(function(t,r){var o=G.validate(t,r);if((0,i.nM)(o))return o;for(var s=o.right,a=s.length>n?s.slice(0,n):s,l=[],d=0;d<n;d++){var h=s[d],p=e[d],m=p.validate(h,g(r,String(d),p,h));if((0,i.nM)(m))f(l,m.left);else{var b=m.right;b!==h&&(a===s&&(a=s.slice()),a[d]=b)}}return l.length>0?c(l):u(a)}),y(e)?h:function(t){return e.map((function(e,n){return e.encode(t[n])}))},e)}var ue=function(e){function t(t,n,r,i,o){var s=e.call(this,t,n,r,i)||this;return s.type=o,s._tag="ReadonlyType",s}return o(t,e),t}(d);function de(e,t){return void 0===t&&(t="Readonly<".concat(e.name,">")),new ue(t,e.is,e.validate,e.encode,e)}var he=function(e){function t(t,n,r,i,o){var s=e.call(this,t,n,r,i)||this;return s.type=o,s._tag="ReadonlyArrayType",s}return o(t,e),t}(d);function pe(e,t){void 0===t&&(t="ReadonlyArray<".concat(e.name,">"));var n=Z(e);return new he(t,n.is,n.validate,n.encode,e)}var ge=function(e,t){return me(Q(e),t)},fe=function(e){function t(t,n,r,i,o){var s=e.call(this,t,n,r,i)||this;return s.type=o,s._tag="ExactType",s}return o(t,e),t}(d);function me(e,t){void 0===t&&(t=function(e){return O(e)?"{| ".concat(b(e.props)," |}"):function(e){return"PartialType"===e._tag}(e)?v("{| ".concat(b(e.props)," |}")):"Exact<".concat(e.name,">")}(e));var n=I(e);return new fe(t,e.is,(function(t,r){var o=B.validate(t,r);if((0,i.nM)(o))return o;var s=e.validate(t,r);return(0,i.nM)(s)?s:(0,i.F2)(C(s.right,n))}),(function(t){return e.encode(C(t,n))}),e)}new(function(e){function t(){var t=e.call(this,"Function",(function(e){return"function"==typeof e}),(function(e,n){return t.is(e)?u(e):l(e,n)}),h)||this;return t._tag="FunctionType",t}return o(t,e),t}(d));var be=function(e){function t(t,n,r,i,o,s){var a=e.call(this,t,n,r,i,o)||this;return a.tag=s,a}return o(t,e),t}(ie);new(function(e){function t(){var t=e.call(this,"never",(function(e){return!1}),(function(e,t){return l(e,t)}),(function(){throw new Error("cannot encode never")}))||this;return t._tag="NeverType",t}return o(t,e),t}(d)),new(function(e){function t(){var t=e.call(this,"any",(function(e){return!0}),u,h)||this;return t._tag="AnyType",t}return o(t,e),t}(d)),new(function(e){function t(){var t=e.call(this,"object",(function(e){return null!==e&&"object"==typeof e}),(function(e,n){return t.is(e)?u(e):l(e,n)}),h)||this;return t._tag="ObjectType",t}return o(t,e),t}(d));function ye(e,t,n){return void 0===n&&(n="(".concat(e.name," | ").concat(p(t),")")),new W(n,(function(n){return e.is(n)&&t(n)}),(function(n,r){var o=e.validate(n,r);if((0,i.nM)(o))return o;var s=o.right;return t(s)?u(s):l(s,r)}),e.encode,e,t)}ye(F,Number.isInteger,"Integer"),function(e){function t(t,n,r,i,o){var s=e.call(this,t,n,r,i)||this;return s.props=o,s._tag="StrictType",s}o(t,e)}(d)},72138:e=>{e.exports=function(){function e(e,t,n,r,i){return e<t||n<t?e>n?n+1:e+1:r===i?t:t+1}return function(t,n){if(t===n)return 0;if(t.length>n.length){var r=t;t=n,n=r}for(var i=t.length,o=n.length;i>0&&t.charCodeAt(i-1)===n.charCodeAt(o-1);)i--,o--;for(var s=0;s<i&&t.charCodeAt(s)===n.charCodeAt(s);)s++;if(o-=s,0===(i-=s)||o<3)return o;var a,c,l,u,d,h,p,g,f,m,b,y,_=0,v=[];for(a=0;a<i;a++)v.push(a+1),v.push(t.charCodeAt(s+a));for(var w=v.length-1;_<o-3;)for(f=n.charCodeAt(s+(c=_)),m=n.charCodeAt(s+(l=_+1)),b=n.charCodeAt(s+(u=_+2)),y=n.charCodeAt(s+(d=_+3)),h=_+=4,a=0;a<w;a+=2)c=e(p=v[a],c,l,f,g=v[a+1]),l=e(c,l,u,m,g),u=e(l,u,d,b,g),h=e(u,d,h,y,g),v[a]=h,d=u,u=l,l=c,c=p;for(;_<o;)for(f=n.charCodeAt(s+(c=_)),h=++_,a=0;a<w;a+=2)p=v[a],v[a]=h=e(p,c,h,f,v[a+1]),c=p;return h}}()},76399:(e,t,n)=>{n.d(t,{CG:()=>F,p1:()=>G});var r=n(24332),i=n(58303),o=n(90023),s=n(67101),a=(n(50271),n(72816)),c=function(e,t){return(0,o.zG)(e,b(t))},l=function(e,t){return(0,o.zG)(e,y(t))},u=function(e,t,n){return(0,o.zG)(e,k(t,n))},d=function(e){return function(t,n){return(0,o.zG)(t,I(e)(n))}},h=function(e,t,n){return(0,o.zG)(e,C(t,n))},p=function(e,t){return(0,o.zG)(e,x(t))},g=function(e,t){return(0,o.zG)(e,w(t))},f=function(e){var t=E(e);return function(e,n){return(0,o.zG)(e,t(n))}},m=s._,b=function(e){return function(t){return e(t)}},y=function(e){return function(t){return t(e)}},_=o.yR,v=(0,o.OB)(2,(function(e,t){return t(e)})),w=function(e){return function(t){return e(t)}},S=o.yR,k=function(e,t){return function(n){return t(e,n)}},I=function(){return function(e){return function(t){return e(t)}}},C=function(e,t){return function(n){return t(n,e)}},E=function(e){return function(t){return function(n){return e.map(t(n),o.yR)}}},A=function(e){return function(t){return e.map(t,o.yR)}},x=function(){return o.yR},T="Identity",O=(a.F4,{URI:T,map:c,ap:l,of:_,chain:v,reduce:u,foldMap:d,reduceRight:h,traverse:f,sequence:A,alt:p,extract:S,extend:g,chainRec:m}),P=o.MZ;function R(e){var t=function(e){return{URI:U,_E:void 0,map:D,ap:function(t,n){return P(e.concat(t,n))}}}(e);return{URI:U,_E:void 0,map:t.map,ap:t.ap,of:function(){return P(e.empty)}}}var D=function(e,t){return(0,o.zG)(e,N(t))},N=function(){return o.MZ},U="Const",M=n(59833),j=function(e,t,n){var r;return n===e[t]?e:Object.assign({},e,((r={})[t]=n,r))},F=function(){function e(e,t){this.get=e,this.reverseGet=t,this._tag="Iso",this.unwrap=this.get,this.to=this.get,this.wrap=this.reverseGet,this.from=this.reverseGet}return e.prototype.reverse=function(){return new e(this.reverseGet,this.get)},e.prototype.modify=function(e){var t=this;return function(n){return t.reverseGet(e(t.get(n)))}},e.prototype.asLens=function(){var e=this;return new L(this.get,(function(t){return function(n){return e.reverseGet(t)}}))},e.prototype.asPrism=function(){var e=this;return new G((function(t){return(0,i.G)(e.get(t))}),this.reverseGet)},e.prototype.asOptional=function(){var e=this;return new z((function(t){return(0,i.G)(e.get(t))}),(function(t){return function(n){return e.reverseGet(t)}}))},e.prototype.asTraversal=function(){var e=this;return new V((function(t){return function(n){return function(r){return t.map(n(e.get(r)),(function(t){return e.reverseGet(t)}))}}}))},e.prototype.asFold=function(){var e=this;return new H((function(t){return function(t){return function(n){return t(e.get(n))}}}))},e.prototype.asGetter=function(){var e=this;return new q((function(t){return e.get(t)}))},e.prototype.asSetter=function(){var e=this;return new W((function(t){return e.modify(t)}))},e.prototype.compose=function(t){var n=this;return new e((function(e){return t.get(n.get(e))}),(function(e){return n.reverseGet(t.reverseGet(e))}))},e.prototype.composeIso=function(e){return this.compose(e)},e.prototype.composeLens=function(e){return this.asLens().compose(e)},e.prototype.composePrism=function(e){return this.asPrism().compose(e)},e.prototype.composeOptional=function(e){return this.asOptional().compose(e)},e.prototype.composeTraversal=function(e){return this.asTraversal().compose(e)},e.prototype.composeFold=function(e){return this.asFold().compose(e)},e.prototype.composeGetter=function(e){return this.asGetter().compose(e)},e.prototype.composeSetter=function(e){return this.asSetter().compose(e)},e}(),L=function(){function e(e,t){this.get=e,this.set=t,this._tag="Lens"}return e.fromPath=function(){var t=e.fromProp();return function(e){var n=t(e[0]);return e.slice(1).reduce((function(e,n){return e.compose(t(n))}),n)}},e.fromProp=function(){return function(t){return new e((function(e){return e[t]}),(function(e){return function(n){return j(n,t,e)}}))}},e.fromProps=function(){return function(t){var n=t.length;return new e((function(e){for(var r={},i=0;i<n;i++){var o=t[i];r[o]=e[o]}return r}),(function(e){return function(r){for(var i=0;i<n;i++){var o=t[i];if(e[o]!==r[o])return Object.assign({},r,e)}return r}}))}},e.fromNullableProp=function(){return function(t,n){return new e((function(e){var r=(0,i.ij)(e[t]);return(0,i.Wi)(r)?n:r.value}),(function(e){return function(n){return j(n,t,e)}}))}},e.prototype.modify=function(e){var t=this;return function(n){var r=t.get(n),i=e(r);return r===i?n:t.set(i)(n)}},e.prototype.asOptional=function(){var e=this;return new z((function(t){return(0,i.G)(e.get(t))}),this.set)},e.prototype.asTraversal=function(){var e=this;return new V((function(t){return function(n){return function(r){return t.map(n(e.get(r)),(function(t){return e.set(t)(r)}))}}}))},e.prototype.asSetter=function(){var e=this;return new W((function(t){return e.modify(t)}))},e.prototype.asGetter=function(){var e=this;return new q((function(t){return e.get(t)}))},e.prototype.asFold=function(){var e=this;return new H((function(t){return function(t){return function(n){return t(e.get(n))}}}))},e.prototype.compose=function(t){var n=this;return new e((function(e){return t.get(n.get(e))}),(function(e){return function(r){return n.set(t.set(e)(n.get(r)))(r)}}))},e.prototype.composeLens=function(e){return this.compose(e)},e.prototype.composeGetter=function(e){return this.asGetter().compose(e)},e.prototype.composeFold=function(e){return this.asFold().compose(e)},e.prototype.composeOptional=function(e){return this.asOptional().compose(e)},e.prototype.composeTraversal=function(e){return this.asTraversal().compose(e)},e.prototype.composeSetter=function(e){return this.asSetter().compose(e)},e.prototype.composeIso=function(e){return this.compose(e.asLens())},e.prototype.composePrism=function(e){return this.asOptional().compose(e.asOptional())},e}(),G=function(){function e(e,t){this.getOption=e,this.reverseGet=t,this._tag="Prism"}return e.fromPredicate=function(t){return new e((function(e){return t(e)?(0,i.G)(e):i.YP}),o.yR)},e.some=function(){return B},e.prototype.modify=function(e){var t=this;return function(n){var r=t.modifyOption(e)(n);return(0,i.Wi)(r)?n:r.value}},e.prototype.modifyOption=function(e){var t=this;return function(n){return i.Kw.map(t.getOption(n),(function(r){var i=e(r);return i===r?n:t.reverseGet(i)}))}},e.prototype.set=function(e){return this.modify((function(){return e}))},e.prototype.asOptional=function(){var e=this;return new z(this.getOption,(function(t){return e.set(t)}))},e.prototype.asTraversal=function(){var e=this;return new V((function(t){return function(n){return function(r){var o=e.getOption(r);return(0,i.Wi)(o)?t.of(r):t.map(n(o.value),(function(t){return e.set(t)(r)}))}}}))},e.prototype.asSetter=function(){var e=this;return new W((function(t){return e.modify(t)}))},e.prototype.asFold=function(){var e=this;return new H((function(t){return function(n){return function(r){var o=e.getOption(r);return(0,i.Wi)(o)?t.empty:n(o.value)}}}))},e.prototype.compose=function(t){var n=this;return new e((function(e){return i.Kw.chain(n.getOption(e),(function(e){return t.getOption(e)}))}),(function(e){return n.reverseGet(t.reverseGet(e))}))},e.prototype.composePrism=function(e){return this.compose(e)},e.prototype.composeOptional=function(e){return this.asOptional().compose(e)},e.prototype.composeTraversal=function(e){return this.asTraversal().compose(e)},e.prototype.composeFold=function(e){return this.asFold().compose(e)},e.prototype.composeSetter=function(e){return this.asSetter().compose(e)},e.prototype.composeIso=function(e){return this.compose(e.asPrism())},e.prototype.composeLens=function(e){return this.asOptional().compose(e.asOptional())},e.prototype.composeGetter=function(e){return this.asFold().compose(e.asFold())},e}(),B=new G(o.yR,i.G),z=function(){function e(e,t){this.getOption=e,this.set=t,this._tag="Optional"}return e.fromNullableProp=function(){return function(t){return new e((function(e){return(0,i.ij)(e[t])}),(function(e){return function(n){return j(n,t,e)}}))}},e.fromOptionProp=function(){var e=L.fromProp();return function(t){return e(t).composePrism(B)}},e.prototype.modify=function(e){var t=this;return function(n){var r=t.modifyOption(e)(n);return(0,i.Wi)(r)?n:r.value}},e.prototype.modifyOption=function(e){var t=this;return function(n){return i.Kw.map(t.getOption(n),(function(r){var i=e(r);return i===r?n:t.set(i)(n)}))}},e.prototype.asTraversal=function(){var e=this;return new V((function(t){return function(n){return function(r){var o=e.getOption(r);return(0,i.Wi)(o)?t.of(r):t.map(n(o.value),(function(t){return e.set(t)(r)}))}}}))},e.prototype.asFold=function(){var e=this;return new H((function(t){return function(n){return function(r){var o=e.getOption(r);return(0,i.Wi)(o)?t.empty:n(o.value)}}}))},e.prototype.asSetter=function(){var e=this;return new W((function(t){return e.modify(t)}))},e.prototype.compose=function(t){var n=this;return new e((function(e){return i.Kw.chain(n.getOption(e),(function(e){return t.getOption(e)}))}),(function(e){return n.modify(t.set(e))}))},e.prototype.composeOptional=function(e){return this.compose(e)},e.prototype.composeTraversal=function(e){return this.asTraversal().compose(e)},e.prototype.composeFold=function(e){return this.asFold().compose(e)},e.prototype.composeSetter=function(e){return this.asSetter().compose(e)},e.prototype.composeLens=function(e){return this.compose(e.asOptional())},e.prototype.composePrism=function(e){return this.compose(e.asOptional())},e.prototype.composeIso=function(e){return this.compose(e.asOptional())},e.prototype.composeGetter=function(e){return this.asFold().compose(e.asFold())},e}(),V=function(){function e(e){this.modifyF=e,this._tag="Traversal"}return e.prototype.modify=function(e){var t=this;return function(n){return t.modifyF(O)(e)(n)}},e.prototype.set=function(e){return this.modify((0,o.a9)(e))},e.prototype.filter=function(e){return this.composePrism(G.fromPredicate(e))},e.prototype.asFold=function(){var e=this;return new H((function(t){return function(n){return function(r){return e.modifyF(R(t))((function(e){return P(n(e))}))(r)}}}))},e.prototype.asSetter=function(){var e=this;return new W((function(t){return e.modify(t)}))},e.prototype.compose=function(t){var n=this;return new e((function(e){return function(r){return n.modifyF(e)(t.modifyF(e)(r))}}))},e.prototype.composeTraversal=function(e){return this.compose(e)},e.prototype.composeFold=function(e){return this.asFold().compose(e)},e.prototype.composeSetter=function(e){return this.asSetter().compose(e)},e.prototype.composeOptional=function(e){return this.compose(e.asTraversal())},e.prototype.composeLens=function(e){return this.compose(e.asTraversal())},e.prototype.composePrism=function(e){return this.compose(e.asTraversal())},e.prototype.composeIso=function(e){return this.compose(e.asTraversal())},e.prototype.composeGetter=function(e){return this.asFold().compose(e.asFold())},e}(),q=(function(){function e(e){this.at=e,this._tag="At"}e.prototype.fromIso=function(t){var n=this;return new e((function(e){return t.composeLens(n.at(e))}))}}(),function(){function e(e){this.index=e,this._tag="Index"}e.fromAt=function(t){return new e((function(e){return t.at(e).composePrism(G.some())}))},e.prototype.fromIso=function(t){var n=this;return new e((function(e){return t.composeOptional(n.index(e))}))}}(),function(){function e(e){this.get=e,this._tag="Getter"}return e.prototype.asFold=function(){var e=this;return new H((function(t){return function(t){return function(n){return t(e.get(n))}}}))},e.prototype.compose=function(t){var n=this;return new e((function(e){return t.get(n.get(e))}))},e.prototype.composeGetter=function(e){return this.compose(e)},e.prototype.composeFold=function(e){return this.asFold().compose(e)},e.prototype.composeLens=function(e){return this.compose(e.asGetter())},e.prototype.composeIso=function(e){return this.compose(e.asGetter())},e.prototype.composeTraversal=function(e){return this.asFold().compose(e.asFold())},e.prototype.composeOptional=function(e){return this.asFold().compose(e.asFold())},e.prototype.composePrism=function(e){return this.asFold().compose(e.asFold())},e}()),H=function(){function e(e){this.foldMap=e,this._tag="Fold",this.getAll=e((0,M.uZ)())((function(e){return[e]})),this.exist=e(r.KK),this.all=e(r.iL),this.foldMapFirst=e((0,i.gW)())}return e.prototype.compose=function(t){var n=this;return new e((function(e){return function(r){return n.foldMap(e)(t.foldMap(e)(r))}}))},e.prototype.composeFold=function(e){return this.compose(e)},e.prototype.composeGetter=function(e){return this.compose(e.asFold())},e.prototype.composeTraversal=function(e){return this.compose(e.asFold())},e.prototype.composeOptional=function(e){return this.compose(e.asFold())},e.prototype.composeLens=function(e){return this.compose(e.asFold())},e.prototype.composePrism=function(e){return this.compose(e.asFold())},e.prototype.composeIso=function(e){return this.compose(e.asFold())},e.prototype.find=function(e){return this.foldMapFirst((0,i.DT)(e))},e.prototype.headOption=function(e){return this.find((function(){return!0}))(e)},e}(),W=function(){function e(e){this.modify=e,this._tag="Setter"}return e.prototype.set=function(e){return this.modify((0,o.a9)(e))},e.prototype.compose=function(t){var n=this;return new e((function(e){return n.modify(t.modify(e))}))},e.prototype.composeSetter=function(e){return this.compose(e)},e.prototype.composeTraversal=function(e){return this.compose(e.asSetter())},e.prototype.composeOptional=function(e){return this.compose(e.asSetter())},e.prototype.composeLens=function(e){return this.compose(e.asSetter())},e.prototype.composePrism=function(e){return this.compose(e.asSetter())},e.prototype.composeIso=function(e){return this.compose(e.asSetter())},e}()},84210:(e,t,n)=>{n.d(t,{Eh:()=>s,MS:()=>d,k4:()=>u,pR:()=>a,uZ:()=>c});var r=n(90023),i=n(58303),o=n(76399);const s=e=>e,a=e=>e,c=e=>e,l=new o.CG(r.MZ,r.MZ);function u(){return l}function d(e){return new o.p1((t=>e(t)?(0,i.G)(t):i.YP),r.yR)}},51255:module=>{var e;self,e=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=26)}([function(e,t,n){var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PoolConvUtil=t.ReduceUtil=t.SplitUtil=t.MathUtil=t.ShapeUtil=t.LongUtil=t.ProtoUtil=t.GemmUtil=t.arrayCopyHelper=t.BroadcastUtil=t.MatMulUtil=t.checkInputsShape=void 0;var s=o(n(13)),a=n(9),c=n(1);t.checkInputsShape=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!e||e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!e[r].dims||e[r].dims.length!==t[r])return!1;return!0};var l=function(){function e(){}return e.preprocessInputShapes=function(e,t){return[1===e.length?[1,e[0]]:e,1===t.length?[t[0],1]:t]},e.postprocessOutputShape=function(e,t,n){1===t&&e.splice(e.length-2,1),1===n&&e.pop()},e.calcMatMulShape=function(e,t){return e[1]!==t[0]?void 0:[e[0],t[1]]},e}();t.MatMulUtil=l;var u=function(){function e(){}return e.calcShape=function(e,t,n){var i;void 0===n&&(n=!1);var o=e.length,s=t.length;if(0===o)return t;if(0===s)return e;var a=Math.max(e.length,t.length),c=new Array(a);if(n){if(o<2||s<2)return;var u=l.calcMatMulShape([e[o-2],e[o-1]],[t[s-2],t[s-1]]);if(void 0===u)return;i=r(u,2),c[a-2]=i[0],c[a-1]=i[1]}for(var d=n?3:1;d<=a;d++){var h=o-d<0?1:e[o-d],p=s-d<0?1:t[s-d];if(h!==p&&h>1&&p>1)return;c[a-d]=Math.max(h,p)}return c},e.index=function(t,n){var r=new Array(n.length);return e.fillIndex(t,n,r),r},e.fillIndex=function(e,t,n){for(var r=e.length-t.length,i=0;i<t.length;i++)n[i]=e[r+i]%t[i]},e.calc=function(t,n,r,i,o){var s=e.calcShape(t.dims,n.dims);if(s){if(i&&!g.areEqual(s,t.dims))return;var a=g.size(s),l=i?t:new c.Tensor(s,o||t.type);if(0===s.length)l.set([],r(t.get([]),n.get([])));else{var u=new Array(s.length),d=new Array(t.dims.length),h=new Array(n.dims.length),p=0,f=0,m=!1,b=!1;0===t.dims.length&&(p=t.get([]),m=!0),0===n.dims.length&&(f=n.get([]),b=!0);for(var y=void 0,_=0;_<a;_++){y=_;for(var v=s.length-1;v>=0;v--)u[v]=y%s[v],y=Math.floor(y/s[v]);m||(e.fillIndex(u,t.dims,d),p=t.get(d)),b||(e.fillIndex(u,n.dims,h),f=n.get(h)),l.set(u,r(p,f))}}return l}},e.isValidBroadcast=function(e,t){var n=e.length,r=t.length;if(n>r)return!1;for(var i=1;i<=n;i++)if(1!==e[n-i]&&e[n-i]!==t[r-i])return!1;return!0},e}();t.BroadcastUtil=u,t.arrayCopyHelper=function(e,t,n,r,i){if(r<0||r>=t.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=e.length)throw new Error("targetIndex out of bounds");if(r+i>t.length)throw new Error("source indices to be copied are outside bounds");if(n+i>e.length)throw new Error("target array is too small to hold result");for(var o=0;o<i;o++)e[n+o]=t[r+o]};var d=function(){function e(){}return e.getShapeOfGemmResult=function(e,t,n,r,i){if(2!==e.length||2!==n.length)throw new Error("shape need to be of size 2");var o,s,a;t?(o=e[1],s=e[0]):(o=e[0],s=e[1]);var c=-1;if(r?(a=n[0],c=1):(a=n[1],c=0),n[c]!==s)throw new Error("dimension mismatch");if(o<=0||a<=0||s<=0)throw new Error("invalid shape specified");if(i&&!u.isValidBroadcast(i,[o,a]))throw new Error("gemm: invalid bias shape for broadcast");return[o,a,s]},e}();t.GemmUtil=d;var h=function(){function e(){}return e.tensorDataTypeFromProto=function(e){switch(e){case a.onnx.TensorProto.DataType.INT8:return"int8";case a.onnx.TensorProto.DataType.UINT8:return"uint8";case a.onnx.TensorProto.DataType.BOOL:return"bool";case a.onnx.TensorProto.DataType.INT16:return"int16";case a.onnx.TensorProto.DataType.UINT16:return"uint16";case a.onnx.TensorProto.DataType.INT32:return"int32";case a.onnx.TensorProto.DataType.UINT32:return"uint32";case a.onnx.TensorProto.DataType.FLOAT:return"float32";case a.onnx.TensorProto.DataType.DOUBLE:return"float64";case a.onnx.TensorProto.DataType.STRING:return"string";case a.onnx.TensorProto.DataType.INT64:return"int32";case a.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error("unsupported data type: "+a.onnx.TensorProto.DataType[e])}},e.tensorDimsFromProto=function(e){return e.map((function(e){return s.default.isLong(e)?e.toNumber():e}))},e.tensorValueTypeFromProto=function(t){return{tensorType:e.tensorDataTypeFromProto(t.elemType),shape:{dims:e.tensorDimsFromProto(t.shape.dim.map((function(e){return e.dimValue})))}}},e}();t.ProtoUtil=h;var p=function(){function e(){}return e.longToNumber=function(e){return s.default.isLong(e)?e.toNumber():e},e}();t.LongUtil=p;var g=function(){function e(){}return e.size=function(t){return e.getSizeFromDimensionRange(t,0,t.length)},e.sizeFromDimension=function(t,n){if(n<0||n>t.length)throw new Error("invalid dimension of "+n+" for sizeFromDimension as Tensor has "+t.length+" dimensions.");return e.getSizeFromDimensionRange(t,n,t.length)},e.sizeToDimension=function(t,n){if(n<0||n>t.length)throw new Error("invalid dimension of "+n+" for sizeToDimension as Tensor has "+t.length+" dimensions.");return e.getSizeFromDimensionRange(t,0,n)},e.getSizeFromDimensionRange=function(e,t,n){for(var r=1,i=t;i<n;i++){if(e[i]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");r*=e[i]}return r},e.computeStrides=function(e){var t=e.length;if(0===t)return[];if(1===t)return[1];var n=new Array(t);n[t-1]=1,n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n},e.transpose=function(e){return e.slice().reverse()},e.indicesToOffset=function(e,t,n){void 0===n&&(n=e.length);for(var r=0,i=0;i<n;++i)r+=t[i]*e[i];return r},e.offsetToIndices=function(e,t){var n=t.length;if(0===n)return[];if(1===n)return[e*t[0]];for(var r=new Array(t.length),i=0;i<r.length-1;++i)r[i]=Math.floor(e/t[i]),e-=r[i]*t[i];return r[r.length-1]=e,r},e.normalizeAxis=function(e,t){if(e<-t&&e>=t)throw new Error("unsupported axis for this operation.");return e<0?e+t:e},e.normalizeAxes=function(e,t){var n=this;return e.map((function(e){return n.normalizeAxis(e,t)}))},e.incrementIndex=function(e,t,n){if(0===t.length||0===e.length)throw new Error("Index incrementing unsupported for scalar Tensor");if(void 0===n)n=t.length;else if(n<=0||n>t.length)throw new Error("Incorrect axis to increment on");for(var r=n-1;r>=0&&(e[r]++,!(e[r]<t[r]));--r)e[r]=0},e.calculateReshapedDims=function(t,n){if(0===n.length){if(0===t.length||1===e.size(t))return[];throw new Error("cannot reshape to a scalar Tensor")}for(var r=n.length,i=new Array(r),o=-1,s=1,a=0;a<r;a++){if(n[a]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(-1===n[a]){if(-1!==o)throw new Error("at most one dimension in shape hints can be -1");o=a}else{if(0===n[a]){if(a>=t.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");i[a]=t[a]}else i[a]=n[a];s*=i[a]}}var c=e.size(t);if(-1!==o){if(c%s!=0)throw new Error("the input tensor cannot be reshaped to the requested shape. Input shape: ["+t+"] Output shape: ["+n+"]");i[o]=c/s}else if(s!==c)throw new Error("reshapedDims and originalDims don't have matching sizes");return i},e.sortBasedOnPerm=function(e,t){return t?t.map((function(t){return e[t]})):e.slice().reverse()},e.padShape=function(e,t){var n=e.length;return e.map((function(e,r){return e+t[r]+t[r+n]}))},e.areEqual=function(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))},e.validateDimsAndCalcSize=function(e){var t,n;if(e.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");var r=1;try{for(var o=i(e),s=o.next();!s.done;s=o.next()){var a=s.value;if(!Number.isInteger(a))throw new TypeError("Invalid shape: "+a+" is not an integer");if(a<0||a>2147483647)throw new TypeError("Invalid shape: length "+a+" is not allowed");r*=a}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r},e.flattenShape=function(e,t){t<0&&(t+=e.length);var n=e.reduce((function(e,t){return e*t}),1),r=e.slice(t).reduce((function(e,t){return e*t}),1);return[n/r,r]},e.squeezeShape=function(t,n){var r=new Array;n=e.normalizeAxes(n,t.length);for(var i=0;i<t.length;i++){var o=n.indexOf(i)>=0;if(o&&1!==t[i])throw new Error("squeeze an axis of size different than 1");(0===n.length&&t[i]>1||n.length>0&&!o)&&r.push(t[i])}return r},e.unsqueezeShape=function(t,n){var r=new Array(t.length+n.length);r.fill(0);for(var i=0;i<n.length;i++){var o=e.normalizeAxis(n[i],t.length);if(o>=r.length)throw new Error("'axes' has an out of range axis");if(0!==r[o])throw new Error("'axes' has a duplicate axis");r[o]=1}var s=0;for(i=0;i<r.length;i++)0===r[i]&&(r[i]=t[s++]);if(s!==t.length)throw new Error("the unsqueezed dimension could not be established");return r},e}();t.ShapeUtil=g;var f=function(){function e(){}return e.sqr=function(e,t,n,r,i){if(r<0||r>=t.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=e.length)throw new Error("targetIndex out of bounds");if(r+i>t.length)throw new Error("source indices to be copied are outside bounds");if(n+i>e.length)throw new Error("target array is too small to hold result");for(var o=0;o<i;o++)e[n+o]+=Math.pow(t[r+o],2)},e.axpy=function(e,t,n,r,i,o){if(r<0||r>=t.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=e.length)throw new Error("targetIndex out of bounds");if(r+i>t.length)throw new Error("source indices to be copied are outside bounds");if(n+i>e.length)throw new Error("target array is too small to hold result");for(var s=0;s<i;s++)e[n+s]+=o*t[r+s]},e.powx=function(e,t,n,r,i,o){if(r<0||r>=t.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=e.length)throw new Error("targetIndex out of bounds");if(r+i>t.length)throw new Error("source indices to be copied are outside bounds");if(n+i>e.length)throw new Error("target array is too small to hold result");for(var s=0;s<i;s++)e[n+s]=Math.pow(t[r+s],o)},e.mul=function(e,t,n,r,i){if(r<0||r>=t.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=e.length)throw new Error("targetIndex out of bounds");if(r+i>t.length)throw new Error("source indices to be copied are outside bounds");if(n+i>e.length)throw new Error("target array is too small to hold result");for(var o=0;o<i;o++)e[n+o]=t[r+o]*e[n+o]},e}();t.MathUtil=f;var m=function(){function e(){}return e.splitShape=function(t,n,r,i){if(0===r.length){if(!i)throw new Error("need to know number of outputs when the 'split' attribute is not specified");e.determineSplit(t[n],i,r)}for(var o=[],s=[0],a=0;a<r.length;++a){0!==a&&s.push(s[a-1]+r[a-1]);var c=t.slice();c[n]=r[a],o.push(c)}return[o,s]},e.determineSplit=function(e,t,n){if(e%t!=0)throw new Error("cannot split tensor to equal sized parts");for(var r=0;r<t;++r)n.push(e/t)},e}();t.SplitUtil=m;var b=function(){function e(){}return e.calcReduce=function(t,n,r,i,o){var s=t.dims.slice(0);0===n.length&&s.forEach((function(e,t){return n.push(t)}));for(var a=e.calcReduceShape(s,n,!0),l=g.size(a),d=new c.Tensor(a,t.type),h=g.computeStrides(a),p=g.computeStrides(s),f=new Array(s.length),m=0;m<l;m++){var b=g.offsetToIndices(m,h);u.fillIndex(b,s,f),d.set(b,e.calcReduceByAxis(t.numberData,n,s,0,g.indicesToOffset(f,p),i,o))}return r?d:new c.Tensor(e.calcReduceShape(s,n,r),d.type,void 0,void 0,d.data,d.dataId)},e.calcReduceByAxis=function(t,n,r,i,o,s,a){var c=0;if(i>=n.length)return s(t[o]);for(var l=n[i],u=l>=r.length?1:g.size(r.slice(l+1)),d=0;d<r[l];d++)c=0===d?e.calcReduceByAxis(t,n,r,i+1,o,s,a):a(c,e.calcReduceByAxis(t,n,r,i+1,o,s,a)),o+=u;return c},e.calcReduceShape=function(e,t,n){for(var r=e.slice(),i=0;i<t.length;i++)r[t[i]]=n?1:0;return r.filter((function(e){return 0!==e}))},e}();t.ReduceUtil=b;var y=function(){function e(){}return e.adjustPoolAttributes=function(e,t,n,r,i){if(!e&&n.length!==t.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(e)for(var o=0;o<t.length-2;o++)o>=n.length?n.push(t[o+2]):n[o]=t[o+2];for(o=0;o<n.length;o++)if(o<r.length){if(r[o]<0)throw new Error("strides should be greater than or equal to 1")}else r.push(1);for(o=0;o<2*n.length;o++)if(o<i.length){if(i[o]<0)throw new Error("pad should be greater than or equal to 1")}else i.push(0);for(o=0;o<n.length;o++){if(n[o]<=0)throw new Error("kernel shapes need to be greater than 0");if(i[o]>=n[o]||i[o+n.length]>=n[o])throw new Error("pads should be smaller than kernel")}},e.adjustPadsBasedOnAutoPad=function(t,n,r,i,o,s){if(s){if(o.length!==2*(t.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(n.length!==t.length-2)throw new Error("length of strides should be the length of data dimensions");if(i.length!==t.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(var a=0;a<t.length-2;a++)e.adjustPadAndReturnShape(t[a+2],n[a],r[a],i[a],o,a,a+t.length-2,s)}},e.computePoolOutputShape=function(t,n,r,i,o,s){if(n.length<=0)throw new Error("input shape must be of size greater than 0");var a=[n[0],n[1]],c=new Array(i.length).fill(1);return e.computeShapeHelper(t,n,a,r,c,i,o,s),a},e.computeConvOutputShape=function(t,n,r,i,o,s,a){if(t.length<=0||n.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");var c=[t[0],n[0]];return e.computeShapeHelper(!1,t,c,r,i,o,s,a),c},e.computeShapeHelper=function(t,n,r,i,o,s,a,c){if(t)for(var l=0;l<n.length-2;l++)r.push(1);else for(l=0;l<n.length-2;l++)r.push(e.adjustPadAndReturnShape(n[l+2],i[l],o[l],s[l],a,l,l+n.length-2,c))},e.adjustPadAndReturnShape=function(e,t,n,r,i,o,s,a){var c=n*(r-1)+1;if(!a||"NOTSET"===a)return Math.floor((e+i[o]+i[s]-c)/t+1);switch(a){case"VALID":return i[o]=0,i[s]=0,Math.floor((e-c)/t+1);case"SAME_LOWER":case"SAME_UPPER":if(1!==n)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");var l=((e+t-1)/t-1)*t+r-e;return i[o]="SAME_LOWER"===a?Math.floor((l+1)/2):Math.floor(l/2),i[s]=l-i[o],Math.floor((e+l-r)/t+1);default:throw new Error("Unsupported AutoPad type")}},e}();t.PoolConvUtil=y},function(e,t,n){(function(e){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Tensor=void 0;var s=o(n(13)),a=n(9),c=n(0),l=function(){function t(e,t,n,r,i,o){void 0===o&&(o={}),this.dims=e,this.type=t,this.dataProvider=n,this.asyncDataProvider=r,this.cache=i,this.dataId=o,this.size=c.ShapeUtil.validateDimsAndCalcSize(e);var s=this.size,a=void 0===n&&void 0===r&&void 0===i;if(void 0!==i&&i.length!==s)throw new RangeError("Input dims doesn't match data length.");if("string"===t){if(!(void 0===i||Array.isArray(i)&&i.every((function(e){return"string"==typeof e}))))throw new TypeError("cache should be a string array");a&&(i=new Array(s))}else{if(void 0!==i){var l=u(t);if(!(i instanceof l))throw new TypeError("cache should be type "+l.name)}if(a){var d=new ArrayBuffer(s*function(e){switch(e){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error("cannot calculate sizeof() on type "+e)}}(t));this.cache=function(e,t){return new(u(t))(e)}(d,t)}}}return Object.defineProperty(t.prototype,"data",{get:function(){if(void 0===this.cache){var e=this.dataProvider(this.dataId);if(e.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=e}return this.cache},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stringData",{get:function(){if("string"!==this.type)throw new TypeError("data type is not string");return this.data},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"integerData",{get:function(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"floatData",{get:function(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"numberData",{get:function(){if("string"!==this.type)return this.data;throw new TypeError("type cannot be non-number (string)")},enumerable:!1,configurable:!0}),t.prototype.get=function(e){return this.data[c.ShapeUtil.indicesToOffset(e,this.strides)]},t.prototype.set=function(e,t){this.data[c.ShapeUtil.indicesToOffset(e,this.strides)]=t},t.prototype.getData=function(){return r(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return void 0!==this.cache?[3,2]:(e=this,[4,this.asyncDataProvider(this.dataId)]);case 1:e.cache=t.sent(),t.label=2;case 2:return[2,this.cache]}}))}))},Object.defineProperty(t.prototype,"strides",{get:function(){return this._strides||(this._strides=c.ShapeUtil.computeStrides(this.dims)),this._strides},enumerable:!1,configurable:!0}),t.fromProto=function(n){if(!n)throw new Error("cannot construct Value from an empty tensor");var r=c.ProtoUtil.tensorDataTypeFromProto(n.dataType),i=new t(c.ProtoUtil.tensorDimsFromProto(n.dims),r);if("string"===r)n.stringData.forEach((function(t,n){var r=e.from(t.buffer,t.byteOffset,t.byteLength);i.data[n]=r.toString()}));else if(n.rawData&&"number"==typeof n.rawData.byteLength&&n.rawData.byteLength>0){var o=i.data,l=new DataView(n.rawData.buffer,n.rawData.byteOffset,n.rawData.byteLength),u=function(e){switch(e){case a.onnx.TensorProto.DataType.UINT8:case a.onnx.TensorProto.DataType.INT8:case a.onnx.TensorProto.DataType.BOOL:return 1;case a.onnx.TensorProto.DataType.UINT16:case a.onnx.TensorProto.DataType.INT16:return 2;case a.onnx.TensorProto.DataType.FLOAT:case a.onnx.TensorProto.DataType.INT32:case a.onnx.TensorProto.DataType.UINT32:return 4;case a.onnx.TensorProto.DataType.INT64:case a.onnx.TensorProto.DataType.DOUBLE:case a.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error("cannot calculate sizeof() on type "+a.onnx.TensorProto.DataType[e])}}(n.dataType),p=n.rawData.byteLength/u;if(n.rawData.byteLength%u!=0)throw new Error("invalid buffer length");if(o.length!==p)throw new Error("buffer length mismatch");for(var g=0;g<p;g++){var f=h(l,n.dataType,g*u);o[g]=f}}else{var m=void 0;switch(n.dataType){case a.onnx.TensorProto.DataType.FLOAT:m=n.floatData;break;case a.onnx.TensorProto.DataType.INT32:case a.onnx.TensorProto.DataType.INT16:case a.onnx.TensorProto.DataType.UINT16:case a.onnx.TensorProto.DataType.INT8:case a.onnx.TensorProto.DataType.UINT8:case a.onnx.TensorProto.DataType.BOOL:m=n.int32Data;break;case a.onnx.TensorProto.DataType.INT64:m=n.int64Data;break;case a.onnx.TensorProto.DataType.DOUBLE:m=n.doubleData;break;case a.onnx.TensorProto.DataType.UINT32:case a.onnx.TensorProto.DataType.UINT64:m=n.uint64Data;break;default:throw new Error("unspecific error")}if(null==m)throw new Error("failed to populate data from a tensorproto value");var b=i.data;if(b.length!==m.length)throw new Error("array length mismatch");for(g=0;g<m.length;g++){var y=m[g];s.default.isLong(y)?b[g]=d(y,n.dataType):b[g]=y}}return i},t.fromData=function(e,n,r){return new t(n,r,void 0,void 0,e)},t}();function u(e){switch(e){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function d(e,t){if(t===a.onnx.TensorProto.DataType.INT64){if(e.greaterThanOrEqual(2147483648)||e.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else{if(t!==a.onnx.TensorProto.DataType.UINT32&&t!==a.onnx.TensorProto.DataType.UINT64)throw new TypeError("not a LONG type: "+a.onnx.TensorProto.DataType[t]);if(e.greaterThanOrEqual(4294967296)||e.lessThan(0))throw new TypeError("uint64 is not supported")}return e.toNumber()}function h(e,t,n){switch(t){case a.onnx.TensorProto.DataType.BOOL:case a.onnx.TensorProto.DataType.UINT8:return e.getUint8(n);case a.onnx.TensorProto.DataType.INT8:return e.getInt8(n);case a.onnx.TensorProto.DataType.UINT16:return e.getUint16(n,!0);case a.onnx.TensorProto.DataType.INT16:return e.getInt16(n,!0);case a.onnx.TensorProto.DataType.FLOAT:return e.getFloat32(n,!0);case a.onnx.TensorProto.DataType.INT32:return e.getInt32(n,!0);case a.onnx.TensorProto.DataType.UINT32:return e.getUint32(n,!0);case a.onnx.TensorProto.DataType.INT64:return d(s.default.fromBits(e.getUint32(n,!0),e.getUint32(n+4,!0),!1),t);case a.onnx.TensorProto.DataType.DOUBLE:return e.getFloat64(n,!0);case a.onnx.TensorProto.DataType.UINT64:return d(s.default.fromBits(e.getUint32(n,!0),e.getUint32(n+4,!0),!0),t);default:throw new Error("cannot read from DataView for type "+a.onnx.TensorProto.DataType[t])}}t.Tensor=l}).call(this,n(12).Buffer)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultFragShaderMain=t.getFragShaderPreamble=t.getVertexShaderSource=t.getGlsl=void 0;var r={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},i={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"};function o(e){return 1===e?r:i}t.getGlsl=o,t.getVertexShaderSource=function(e){var t=o(e);return t.version+"\n      precision highp float;\n      "+t.attribute+" vec3 position;\n      "+t.attribute+" vec2 textureCoord;\n\n      "+t.varyingVertex+" vec2 TexCoords;\n\n      void main()\n      {\n          gl_Position = vec4(position, 1.0);\n          TexCoords = textureCoord;\n      }"},t.getFragShaderPreamble=function(e){var t=o(e);return t.version+"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    "+t.varyingFrag+" vec2 TexCoords;\n    "+t.outputDeclaration+"\n\n    "},t.getDefaultFragShaderMain=function(e,t){return"\n  void main() {\n    int indices["+t+"];\n    toVec(TexCoords, indices);\n    vec4 result = vec4(process(indices));\n    "+o(e).output+" = result;\n  }\n  "}},function(e,t,n){var r,i;Object.defineProperty(t,"__esModule",{value:!0}),t.now=t.Profiler=t.Logger=void 0;var o=function(){function e(){}return e.prototype.log=function(e,t,n){},e}(),s=function(){function e(){}return e.prototype.log=function(e,t,n){console.log(this.color(e)+" "+(n?"[35m"+n+"[0m ":"")+t)},e.prototype.color=function(e){switch(e){case"verbose":return"[34;40mv[0m";case"info":return"[32mi[0m";case"warning":return"[30;43mw[0m";case"error":return"[31;40me[0m";default:throw new Error("unsupported severity: "+e)}},e}(),a={verbose:1e3,info:2e3,warning:4e3,error:5e3},c=((r={}).none=new o,r.console=new s,r),l={provider:"console",minimalSeverity:"info",logDateTime:!0,logSourceLocation:!1},u=((i={})[""]=l,i);function d(e,t,n,r){if(void 0===t)return i=e,{verbose:d.verbose.bind(null,i),info:d.info.bind(null,i),warning:d.warning.bind(null,i),error:d.error.bind(null,i)};if(void 0===n)h(e,t);else if("number"==typeof n&&void 0===r)h(e,t);else if("string"==typeof n&&void 0===r)h(e,n,0,t);else{if("string"!=typeof n||"number"!=typeof r)throw new TypeError("input is valid");h(e,n,0,t)}var i}function h(e,t,n,r){var i=u[r||""]||u[""];a[e]<a[i.minimalSeverity]||(i.logDateTime&&(t=(new Date).toISOString()+"|"+t),i.logSourceLocation,c[i.provider].log(e,t,r))}!function(e){function t(e){u={},n("",e||{})}function n(e,n){if("*"===e)t(n);else{var r=u[e]||l;u[e]={provider:n.provider||r.provider,minimalSeverity:n.minimalSeverity||r.minimalSeverity,logDateTime:void 0===n.logDateTime?r.logDateTime:n.logDateTime,logSourceLocation:void 0===n.logSourceLocation?r.logSourceLocation:n.logSourceLocation}}}e.verbose=function(t,n){e("verbose",t,n)},e.info=function(t,n){e("info",t,n)},e.warning=function(t,n){e("warning",t,n)},e.error=function(t,n){e("error",t,n)},e.reset=t,e.set=n}(d||(d={})),t.Logger=d;var p=function(){function e(e,t,n,r){this.category=e,this.name=t,this.startTime=n,this.endCallback=r}return e.prototype.end=function(){this.endCallback(this)},e}(),g=function(e,t,n,r){this.category=e,this.name=t,this.startTime=n,this.endTime=r},f=function(){function e(e,t,n){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=void 0===e?1e4:e,this._flushBatchSize=void 0===t?10:t,this._flushIntervalInMilliseconds=void 0===n?5e3:n}return e.create=function(e){return void 0===e?new this:new this(e.maxNumberEvents,e.flushBatchSize,e.flushIntervalInMilliseconds)},e.prototype.start=function(){this._started=!0,this._timingEvents=[],this._flushTime=t.now(),this._flushPointer=0},e.prototype.stop=function(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])},e.prototype.event=function(e,t,n){var r=this._started?this.begin(e,t):void 0,i=!1;try{var o=n();return o&&"function"==typeof o.then?(i=!0,new Promise((function(e,t){o.then((function(t){e(t),r&&r.end()}),(function(e){t(e),r&&r.end()}))}))):o}finally{!i&&r&&r.end()}},e.prototype.begin=function(e,n){var r=this;if(!this._started)throw new Error("profiler is not started yet");var i=t.now();return this.flush(i),new p(e,n,i,(function(e){return r.end(e)}))},e.prototype.end=function(e){if(this._timingEvents.length<this._maxNumberEvents){var n=t.now();this._timingEvents.push(new g(e.category,e.name,e.startTime,n)),this.flush(n)}},e.prototype.logOneEvent=function(e){t.Logger.verbose("Profiler."+e.category,(e.endTime-e.startTime).toFixed(2)+"ms on event '"+e.name+"' at "+e.endTime.toFixed(2))},e.prototype.flush=function(e){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||e-this._flushTime>=this._flushIntervalInMilliseconds){for(var n=this._flushPointer;this._flushPointer<n+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=t.now()}},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!1,configurable:!0}),e}();t.Profiler=f,t.now="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:Date.now},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&o(t,e,n);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.WasmBinding=t.init=void 0;var c,l,u,d=n(3),h=a(n(103)),p=!1,g=!1;t.init=function(e,t){if(p)return Promise.resolve();if(g)throw new Error("multiple calls to 'init()' detected.");return g=!0,new Promise((function(r,i){var o,s=function(){void 0!==o&&(clearTimeout(o),o=void 0)},a=function(){s(),r(),g=!1,p=!0},f=h.init(),m=new Promise((function(e,n){o=setTimeout((function(){n("Wasm init promise failed to be resolved within set timeout")}),t)}));e>0?(d.Logger.verbose("WebAssembly-Workers","User has requested "+e+" Workers."),"undefined"==typeof self||void 0===self.Worker?(d.Logger.error("WebAssembly-Workers","Environment does not support usage of Workers. Will not spawn workers."),l=0):(d.Logger.verbose("WebAssembly-Workers","Environment supports usage of Workers. Will spawn "+e+" Workers"),l=e)):(d.Logger.verbose("WebAssembly-Workers","User has disabled usage of Workers. Will not spawn workers."),l=0);var b=new Array(l);c=new Array(l),u=new Array(l);for(var y=function(e){var t=new Promise((function(t,r){var i=n(105).default();c[e]=i,u[e]=[],i.onerror=function(t){d.Logger.error("WebAssembly-Workers","worker-"+e+" ERR: "+t),p||r()},i.onmessage=function(n){if(!(n&&n.data&&n.data.type))throw new Error("missing message type from worker");if("init-success"===n.data.type)t();else{if("ccall"!==n.data.type)throw new Error("unknown message type from worker: "+n.data.type);var r=n.data.perfData;u[e].shift()(n.data.buffer,r)}}}));b[e]=t},_=0;_<l;_++)y(_);Promise.race([f,m]).then((function(){Promise.all(b).then(a,(function(e){d.Logger.warning("WebAssembly-Workers","Unable to get all requested workers initialized. Will use Wasm backend with 0 workers. ERR: "+e),l=0,a()}))}),(function(e){s(),i(e),g=!1}))}))};var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},Object.defineProperty(t,"workerNumber",{get:function(){return l},enumerable:!1,configurable:!0}),t.prototype.ccallRemote=function(e,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(!p)throw new Error("wasm not initialized. please ensure 'init()' is called.");if(e<0||e>=l)throw new Error("invalid worker ID "+e+". should be in range [0, "+l+")");var o=[],s=t.calculateOffsets(o,r),a=new ArrayBuffer(s);t.ccallSerialize(new Uint8Array(a),o,r);var d=h.now();return c[e].postMessage({type:"ccall",func:n,buffer:a},[a]),new Promise((function(n,i){u[e].push((function(e,i){i.startTimeWorker=i.startTime,i.endTimeWorker=i.endTime,i.startTime=d,i.endTime=h.now(),t.ccallDeserialize(new Uint8Array(e),o,r),n(i)}))}))},t}(h.WasmBinding);t.WasmBinding=f},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TopologicalSortGlslRoutines=t.GlslLibRoutineNode=t.GlslLibRoutine=t.GlslLib=t.GlslContext=t.FunctionType=void 0,function(e){e[e.ValueBased=0]="ValueBased",e[e.Positional=1]="Positional"}(t.FunctionType||(t.FunctionType={})),t.GlslContext=function(e,t){this.glContext=e,this.programInfo=t},t.GlslLib=function(e){this.context=e},t.GlslLibRoutine=function(e,t){this.routineBody=e,this.dependencies=t};var r=function(){function e(e,t,n){this.name=e,this.dependencies=n||[],t&&(this.routineBody=t)}return e.prototype.addDependency=function(e){e&&this.dependencies.push(e)},e}();t.GlslLibRoutineNode=r;var i=function(){function e(){}return e.returnOrderedNodes=function(e){if(!e||0===e.length)return[];if(1===e.length)return e;var t=new Set,n=new Set,r=new Array;return this.createOrderedNodes(e,t,n,r),r},e.createOrderedNodes=function(e,t,n,r){for(var i=0;i<e.length;++i)this.dfsTraverse(e[i],t,n,r)},e.dfsTraverse=function(e,t,n,r){if(e&&!n.has(e.name)){if(t.has(e.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");t.add(e.name);var i=e.dependencies;if(i&&i.length>0)for(var o=0;o<i.length;++o)this.dfsTraverse(i[o],t,n,r);r.push(e),n.add(e.name),t.delete(e.name)}},e}();t.TopologicalSortGlslRoutines=i},function(e,t,n){(function(e){var r=t;function i(e,t,n){for(var r=Object.keys(t),i=0;i<r.length;++i)void 0!==e[r[i]]&&n||(e[r[i]]=t[r[i]]);return e}function o(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&i(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}r.asPromise=n(64),r.base64=n(65),r.EventEmitter=n(66),r.float=n(67),r.inquire=n(68),r.utf8=n(69),r.pool=n(70),r.LongBits=n(71),r.global="undefined"!=typeof self&&self||void 0!==e&&e||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isNode=Boolean(r.global.process&&r.global.process.versions&&r.global.process.versions.node),r.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},r.isString=function(e){return"string"==typeof e||e instanceof String},r.isObject=function(e){return e&&"object"==typeof e},r.isset=r.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},r.Buffer=function(){try{var e=r.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(e){return"number"==typeof e?r.Buffer?r._Buffer_allocUnsafe(e):new r.Array(e):r.Buffer?r._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(e){return e?r.LongBits.from(e).toHash():r.LongBits.zeroHash},r.longFromHash=function(e,t){var n=r.LongBits.fromHash(e);return r.Long?r.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))},r.merge=i,r.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},r.newError=o,r.ProtocolError=o("ProtocolError"),r.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;n>-1;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},r.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var e=r.Buffer;e?(r._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},r._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):r._Buffer_from=r._Buffer_allocUnsafe=null}}).call(this,n(8))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FLOAT_TYPES=t.INT_TYPES=t.NUMBER_TYPES=void 0,t.NUMBER_TYPES=["float32","float64","int32","int16","int8","uint16","uint32","uint8"],t.INT_TYPES=["int32","int16","int8","uint16","uint32","uint8"],t.FLOAT_TYPES=["float32","float64"]},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof self&&(n=self)}e.exports=n},function(e,t,n){var r=n(62),i=r.Reader,o=r.Writer,s=r.util,a=r.roots.default||(r.roots.default={});a.onnx=function(){var e,t,n={};return n.Version=(e={},(t=Object.create(e))[e[0]="_START_VERSION"]=0,t[e[1]="IR_VERSION_2017_10_10"]=1,t[e[2]="IR_VERSION_2017_10_30"]=2,t[e[3]="IR_VERSION_2017_11_3"]=3,t[e[4]="IR_VERSION_2019_1_22"]=4,t[e[5]="IR_VERSION"]=5,t),n.AttributeProto=function(){function e(e){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.name="",e.prototype.refAttrName="",e.prototype.docString="",e.prototype.type=0,e.prototype.f=0,e.prototype.i=s.Long?s.Long.fromBits(0,0,!1):0,e.prototype.s=s.newBuffer([]),e.prototype.t=null,e.prototype.g=null,e.prototype.floats=s.emptyArray,e.prototype.ints=s.emptyArray,e.prototype.strings=s.emptyArray,e.prototype.tensors=s.emptyArray,e.prototype.graphs=s.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=o.create()),null!=e.name&&e.hasOwnProperty("name")&&t.uint32(10).string(e.name),null!=e.f&&e.hasOwnProperty("f")&&t.uint32(21).float(e.f),null!=e.i&&e.hasOwnProperty("i")&&t.uint32(24).int64(e.i),null!=e.s&&e.hasOwnProperty("s")&&t.uint32(34).bytes(e.s),null!=e.t&&e.hasOwnProperty("t")&&a.onnx.TensorProto.encode(e.t,t.uint32(42).fork()).ldelim(),null!=e.g&&e.hasOwnProperty("g")&&a.onnx.GraphProto.encode(e.g,t.uint32(50).fork()).ldelim(),null!=e.floats&&e.floats.length){t.uint32(58).fork();for(var n=0;n<e.floats.length;++n)t.float(e.floats[n]);t.ldelim()}if(null!=e.ints&&e.ints.length){for(t.uint32(66).fork(),n=0;n<e.ints.length;++n)t.int64(e.ints[n]);t.ldelim()}if(null!=e.strings&&e.strings.length)for(n=0;n<e.strings.length;++n)t.uint32(74).bytes(e.strings[n]);if(null!=e.tensors&&e.tensors.length)for(n=0;n<e.tensors.length;++n)a.onnx.TensorProto.encode(e.tensors[n],t.uint32(82).fork()).ldelim();if(null!=e.graphs&&e.graphs.length)for(n=0;n<e.graphs.length;++n)a.onnx.GraphProto.encode(e.graphs[n],t.uint32(90).fork()).ldelim();return null!=e.docString&&e.hasOwnProperty("docString")&&t.uint32(106).string(e.docString),null!=e.type&&e.hasOwnProperty("type")&&t.uint32(160).int32(e.type),null!=e.refAttrName&&e.hasOwnProperty("refAttrName")&&t.uint32(170).string(e.refAttrName),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.onnx.AttributeProto;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.name=e.string();break;case 21:r.refAttrName=e.string();break;case 13:r.docString=e.string();break;case 20:r.type=e.int32();break;case 2:r.f=e.float();break;case 3:r.i=e.int64();break;case 4:r.s=e.bytes();break;case 5:r.t=a.onnx.TensorProto.decode(e,e.uint32());break;case 6:r.g=a.onnx.GraphProto.decode(e,e.uint32());break;case 7:if(r.floats&&r.floats.length||(r.floats=[]),2==(7&o))for(var s=e.uint32()+e.pos;e.pos<s;)r.floats.push(e.float());else r.floats.push(e.float());break;case 8:if(r.ints&&r.ints.length||(r.ints=[]),2==(7&o))for(s=e.uint32()+e.pos;e.pos<s;)r.ints.push(e.int64());else r.ints.push(e.int64());break;case 9:r.strings&&r.strings.length||(r.strings=[]),r.strings.push(e.bytes());break;case 10:r.tensors&&r.tensors.length||(r.tensors=[]),r.tensors.push(a.onnx.TensorProto.decode(e,e.uint32()));break;case 11:r.graphs&&r.graphs.length||(r.graphs=[]),r.graphs.push(a.onnx.GraphProto.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof i||(e=new i(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.name&&e.hasOwnProperty("name")&&!s.isString(e.name))return"name: string expected";if(null!=e.refAttrName&&e.hasOwnProperty("refAttrName")&&!s.isString(e.refAttrName))return"refAttrName: string expected";if(null!=e.docString&&e.hasOwnProperty("docString")&&!s.isString(e.docString))return"docString: string expected";if(null!=e.type&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:}if(null!=e.f&&e.hasOwnProperty("f")&&"number"!=typeof e.f)return"f: number expected";if(null!=e.i&&e.hasOwnProperty("i")&&!(s.isInteger(e.i)||e.i&&s.isInteger(e.i.low)&&s.isInteger(e.i.high)))return"i: integer|Long expected";if(null!=e.s&&e.hasOwnProperty("s")&&!(e.s&&"number"==typeof e.s.length||s.isString(e.s)))return"s: buffer expected";if(null!=e.t&&e.hasOwnProperty("t")&&(n=a.onnx.TensorProto.verify(e.t)))return"t."+n;if(null!=e.g&&e.hasOwnProperty("g")&&(n=a.onnx.GraphProto.verify(e.g)))return"g."+n;if(null!=e.floats&&e.hasOwnProperty("floats")){if(!Array.isArray(e.floats))return"floats: array expected";for(var t=0;t<e.floats.length;++t)if("number"!=typeof e.floats[t])return"floats: number[] expected"}if(null!=e.ints&&e.hasOwnProperty("ints")){if(!Array.isArray(e.ints))return"ints: array expected";for(t=0;t<e.ints.length;++t)if(!(s.isInteger(e.ints[t])||e.ints[t]&&s.isInteger(e.ints[t].low)&&s.isInteger(e.ints[t].high)))return"ints: integer|Long[] expected"}if(null!=e.strings&&e.hasOwnProperty("strings")){if(!Array.isArray(e.strings))return"strings: array expected";for(t=0;t<e.strings.length;++t)if(!(e.strings[t]&&"number"==typeof e.strings[t].length||s.isString(e.strings[t])))return"strings: buffer[] expected"}if(null!=e.tensors&&e.hasOwnProperty("tensors")){if(!Array.isArray(e.tensors))return"tensors: array expected";for(t=0;t<e.tensors.length;++t)if(n=a.onnx.TensorProto.verify(e.tensors[t]))return"tensors."+n}if(null!=e.graphs&&e.hasOwnProperty("graphs")){if(!Array.isArray(e.graphs))return"graphs: array expected";for(t=0;t<e.graphs.length;++t){var n;if(n=a.onnx.GraphProto.verify(e.graphs[t]))return"graphs."+n}}return null},e.fromObject=function(e){if(e instanceof a.onnx.AttributeProto)return e;var t=new a.onnx.AttributeProto;switch(null!=e.name&&(t.name=String(e.name)),null!=e.refAttrName&&(t.refAttrName=String(e.refAttrName)),null!=e.docString&&(t.docString=String(e.docString)),e.type){case"UNDEFINED":case 0:t.type=0;break;case"FLOAT":case 1:t.type=1;break;case"INT":case 2:t.type=2;break;case"STRING":case 3:t.type=3;break;case"TENSOR":case 4:t.type=4;break;case"GRAPH":case 5:t.type=5;break;case"FLOATS":case 6:t.type=6;break;case"INTS":case 7:t.type=7;break;case"STRINGS":case 8:t.type=8;break;case"TENSORS":case 9:t.type=9;break;case"GRAPHS":case 10:t.type=10}if(null!=e.f&&(t.f=Number(e.f)),null!=e.i&&(s.Long?(t.i=s.Long.fromValue(e.i)).unsigned=!1:"string"==typeof e.i?t.i=parseInt(e.i,10):"number"==typeof e.i?t.i=e.i:"object"==typeof e.i&&(t.i=new s.LongBits(e.i.low>>>0,e.i.high>>>0).toNumber())),null!=e.s&&("string"==typeof e.s?s.base64.decode(e.s,t.s=s.newBuffer(s.base64.length(e.s)),0):e.s.length&&(t.s=e.s)),null!=e.t){if("object"!=typeof e.t)throw TypeError(".onnx.AttributeProto.t: object expected");t.t=a.onnx.TensorProto.fromObject(e.t)}if(null!=e.g){if("object"!=typeof e.g)throw TypeError(".onnx.AttributeProto.g: object expected");t.g=a.onnx.GraphProto.fromObject(e.g)}if(e.floats){if(!Array.isArray(e.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");t.floats=[];for(var n=0;n<e.floats.length;++n)t.floats[n]=Number(e.floats[n])}if(e.ints){if(!Array.isArray(e.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");for(t.ints=[],n=0;n<e.ints.length;++n)s.Long?(t.ints[n]=s.Long.fromValue(e.ints[n])).unsigned=!1:"string"==typeof e.ints[n]?t.ints[n]=parseInt(e.ints[n],10):"number"==typeof e.ints[n]?t.ints[n]=e.ints[n]:"object"==typeof e.ints[n]&&(t.ints[n]=new s.LongBits(e.ints[n].low>>>0,e.ints[n].high>>>0).toNumber())}if(e.strings){if(!Array.isArray(e.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");for(t.strings=[],n=0;n<e.strings.length;++n)"string"==typeof e.strings[n]?s.base64.decode(e.strings[n],t.strings[n]=s.newBuffer(s.base64.length(e.strings[n])),0):e.strings[n].length&&(t.strings[n]=e.strings[n])}if(e.tensors){if(!Array.isArray(e.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");for(t.tensors=[],n=0;n<e.tensors.length;++n){if("object"!=typeof e.tensors[n])throw TypeError(".onnx.AttributeProto.tensors: object expected");t.tensors[n]=a.onnx.TensorProto.fromObject(e.tensors[n])}}if(e.graphs){if(!Array.isArray(e.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");for(t.graphs=[],n=0;n<e.graphs.length;++n){if("object"!=typeof e.graphs[n])throw TypeError(".onnx.AttributeProto.graphs: object expected");t.graphs[n]=a.onnx.GraphProto.fromObject(e.graphs[n])}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.floats=[],n.ints=[],n.strings=[],n.tensors=[],n.graphs=[]),t.defaults){if(n.name="",n.f=0,s.Long){var r=new s.Long(0,0,!1);n.i=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.i=t.longs===String?"0":0;t.bytes===String?n.s="":(n.s=[],t.bytes!==Array&&(n.s=s.newBuffer(n.s))),n.t=null,n.g=null,n.docString="",n.type=t.enums===String?"UNDEFINED":0,n.refAttrName=""}if(null!=e.name&&e.hasOwnProperty("name")&&(n.name=e.name),null!=e.f&&e.hasOwnProperty("f")&&(n.f=t.json&&!isFinite(e.f)?String(e.f):e.f),null!=e.i&&e.hasOwnProperty("i")&&("number"==typeof e.i?n.i=t.longs===String?String(e.i):e.i:n.i=t.longs===String?s.Long.prototype.toString.call(e.i):t.longs===Number?new s.LongBits(e.i.low>>>0,e.i.high>>>0).toNumber():e.i),null!=e.s&&e.hasOwnProperty("s")&&(n.s=t.bytes===String?s.base64.encode(e.s,0,e.s.length):t.bytes===Array?Array.prototype.slice.call(e.s):e.s),null!=e.t&&e.hasOwnProperty("t")&&(n.t=a.onnx.TensorProto.toObject(e.t,t)),null!=e.g&&e.hasOwnProperty("g")&&(n.g=a.onnx.GraphProto.toObject(e.g,t)),e.floats&&e.floats.length){n.floats=[];for(var i=0;i<e.floats.length;++i)n.floats[i]=t.json&&!isFinite(e.floats[i])?String(e.floats[i]):e.floats[i]}if(e.ints&&e.ints.length)for(n.ints=[],i=0;i<e.ints.length;++i)"number"==typeof e.ints[i]?n.ints[i]=t.longs===String?String(e.ints[i]):e.ints[i]:n.ints[i]=t.longs===String?s.Long.prototype.toString.call(e.ints[i]):t.longs===Number?new s.LongBits(e.ints[i].low>>>0,e.ints[i].high>>>0).toNumber():e.ints[i];if(e.strings&&e.strings.length)for(n.strings=[],i=0;i<e.strings.length;++i)n.strings[i]=t.bytes===String?s.base64.encode(e.strings[i],0,e.strings[i].length):t.bytes===Array?Array.prototype.slice.call(e.strings[i]):e.strings[i];if(e.tensors&&e.tensors.length)for(n.tensors=[],i=0;i<e.tensors.length;++i)n.tensors[i]=a.onnx.TensorProto.toObject(e.tensors[i],t);if(e.graphs&&e.graphs.length)for(n.graphs=[],i=0;i<e.graphs.length;++i)n.graphs[i]=a.onnx.GraphProto.toObject(e.graphs[i],t);return null!=e.docString&&e.hasOwnProperty("docString")&&(n.docString=e.docString),null!=e.type&&e.hasOwnProperty("type")&&(n.type=t.enums===String?a.onnx.AttributeProto.AttributeType[e.type]:e.type),null!=e.refAttrName&&e.hasOwnProperty("refAttrName")&&(n.refAttrName=e.refAttrName),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e.AttributeType=function(){var e={},t=Object.create(e);return t[e[0]="UNDEFINED"]=0,t[e[1]="FLOAT"]=1,t[e[2]="INT"]=2,t[e[3]="STRING"]=3,t[e[4]="TENSOR"]=4,t[e[5]="GRAPH"]=5,t[e[6]="FLOATS"]=6,t[e[7]="INTS"]=7,t[e[8]="STRINGS"]=8,t[e[9]="TENSORS"]=9,t[e[10]="GRAPHS"]=10,t}(),e}(),n.ValueInfoProto=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.name="",e.prototype.type=null,e.prototype.docString="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.name&&e.hasOwnProperty("name")&&t.uint32(10).string(e.name),null!=e.type&&e.hasOwnProperty("type")&&a.onnx.TypeProto.encode(e.type,t.uint32(18).fork()).ldelim(),null!=e.docString&&e.hasOwnProperty("docString")&&t.uint32(26).string(e.docString),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.onnx.ValueInfoProto;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.name=e.string();break;case 2:r.type=a.onnx.TypeProto.decode(e,e.uint32());break;case 3:r.docString=e.string();break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof i||(e=new i(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.name&&e.hasOwnProperty("name")&&!s.isString(e.name))return"name: string expected";if(null!=e.type&&e.hasOwnProperty("type")){var t=a.onnx.TypeProto.verify(e.type);if(t)return"type."+t}return null!=e.docString&&e.hasOwnProperty("docString")&&!s.isString(e.docString)?"docString: string expected":null},e.fromObject=function(e){if(e instanceof a.onnx.ValueInfoProto)return e;var t=new a.onnx.ValueInfoProto;if(null!=e.name&&(t.name=String(e.name)),null!=e.type){if("object"!=typeof e.type)throw TypeError(".onnx.ValueInfoProto.type: object expected");t.type=a.onnx.TypeProto.fromObject(e.type)}return null!=e.docString&&(t.docString=String(e.docString)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.name="",n.type=null,n.docString=""),null!=e.name&&e.hasOwnProperty("name")&&(n.name=e.name),null!=e.type&&e.hasOwnProperty("type")&&(n.type=a.onnx.TypeProto.toObject(e.type,t)),null!=e.docString&&e.hasOwnProperty("docString")&&(n.docString=e.docString),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),n.NodeProto=function(){function e(e){if(this.input=[],this.output=[],this.attribute=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.input=s.emptyArray,e.prototype.output=s.emptyArray,e.prototype.name="",e.prototype.opType="",e.prototype.domain="",e.prototype.attribute=s.emptyArray,e.prototype.docString="",e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=o.create()),null!=e.input&&e.input.length)for(var n=0;n<e.input.length;++n)t.uint32(10).string(e.input[n]);if(null!=e.output&&e.output.length)for(n=0;n<e.output.length;++n)t.uint32(18).string(e.output[n]);if(null!=e.name&&e.hasOwnProperty("name")&&t.uint32(26).string(e.name),null!=e.opType&&e.hasOwnProperty("opType")&&t.uint32(34).string(e.opType),null!=e.attribute&&e.attribute.length)for(n=0;n<e.attribute.length;++n)a.onnx.AttributeProto.encode(e.attribute[n],t.uint32(42).fork()).ldelim();return null!=e.docString&&e.hasOwnProperty("docString")&&t.uint32(50).string(e.docString),null!=e.domain&&e.hasOwnProperty("domain")&&t.uint32(58).string(e.domain),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.onnx.NodeProto;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.input&&r.input.length||(r.input=[]),r.input.push(e.string());break;case 2:r.output&&r.output.length||(r.output=[]),r.output.push(e.string());break;case 3:r.name=e.string();break;case 4:r.opType=e.string();break;case 7:r.domain=e.string();break;case 5:r.attribute&&r.attribute.length||(r.attribute=[]),r.attribute.push(a.onnx.AttributeProto.decode(e,e.uint32()));break;case 6:r.docString=e.string();break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof i||(e=new i(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.input&&e.hasOwnProperty("input")){if(!Array.isArray(e.input))return"input: array expected";for(var t=0;t<e.input.length;++t)if(!s.isString(e.input[t]))return"input: string[] expected"}if(null!=e.output&&e.hasOwnProperty("output")){if(!Array.isArray(e.output))return"output: array expected";for(t=0;t<e.output.length;++t)if(!s.isString(e.output[t]))return"output: string[] expected"}if(null!=e.name&&e.hasOwnProperty("name")&&!s.isString(e.name))return"name: string expected";if(null!=e.opType&&e.hasOwnProperty("opType")&&!s.isString(e.opType))return"opType: string expected";if(null!=e.domain&&e.hasOwnProperty("domain")&&!s.isString(e.domain))return"domain: string expected";if(null!=e.attribute&&e.hasOwnProperty("attribute")){if(!Array.isArray(e.attribute))return"attribute: array expected";for(t=0;t<e.attribute.length;++t){var n=a.onnx.AttributeProto.verify(e.attribute[t]);if(n)return"attribute."+n}}return null!=e.docString&&e.hasOwnProperty("docString")&&!s.isString(e.docString)?"docString: string expected":null},e.fromObject=function(e){if(e instanceof a.onnx.NodeProto)return e;var t=new a.onnx.NodeProto;if(e.input){if(!Array.isArray(e.input))throw TypeError(".onnx.NodeProto.input: array expected");t.input=[];for(var n=0;n<e.input.length;++n)t.input[n]=String(e.input[n])}if(e.output){if(!Array.isArray(e.output))throw TypeError(".onnx.NodeProto.output: array expected");for(t.output=[],n=0;n<e.output.length;++n)t.output[n]=String(e.output[n])}if(null!=e.name&&(t.name=String(e.name)),null!=e.opType&&(t.opType=String(e.opType)),null!=e.domain&&(t.domain=String(e.domain)),e.attribute){if(!Array.isArray(e.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");for(t.attribute=[],n=0;n<e.attribute.length;++n){if("object"!=typeof e.attribute[n])throw TypeError(".onnx.NodeProto.attribute: object expected");t.attribute[n]=a.onnx.AttributeProto.fromObject(e.attribute[n])}}return null!=e.docString&&(t.docString=String(e.docString)),t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.input=[],n.output=[],n.attribute=[]),t.defaults&&(n.name="",n.opType="",n.docString="",n.domain=""),e.input&&e.input.length){n.input=[];for(var r=0;r<e.input.length;++r)n.input[r]=e.input[r]}if(e.output&&e.output.length)for(n.output=[],r=0;r<e.output.length;++r)n.output[r]=e.output[r];if(null!=e.name&&e.hasOwnProperty("name")&&(n.name=e.name),null!=e.opType&&e.hasOwnProperty("opType")&&(n.opType=e.opType),e.attribute&&e.attribute.length)for(n.attribute=[],r=0;r<e.attribute.length;++r)n.attribute[r]=a.onnx.AttributeProto.toObject(e.attribute[r],t);return null!=e.docString&&e.hasOwnProperty("docString")&&(n.docString=e.docString),null!=e.domain&&e.hasOwnProperty("domain")&&(n.domain=e.domain),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),n.ModelProto=function(){function e(e){if(this.opsetImport=[],this.metadataProps=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.irVersion=s.Long?s.Long.fromBits(0,0,!1):0,e.prototype.opsetImport=s.emptyArray,e.prototype.producerName="",e.prototype.producerVersion="",e.prototype.domain="",e.prototype.modelVersion=s.Long?s.Long.fromBits(0,0,!1):0,e.prototype.docString="",e.prototype.graph=null,e.prototype.metadataProps=s.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=o.create()),null!=e.irVersion&&e.hasOwnProperty("irVersion")&&t.uint32(8).int64(e.irVersion),null!=e.producerName&&e.hasOwnProperty("producerName")&&t.uint32(18).string(e.producerName),null!=e.producerVersion&&e.hasOwnProperty("producerVersion")&&t.uint32(26).string(e.producerVersion),null!=e.domain&&e.hasOwnProperty("domain")&&t.uint32(34).string(e.domain),null!=e.modelVersion&&e.hasOwnProperty("modelVersion")&&t.uint32(40).int64(e.modelVersion),null!=e.docString&&e.hasOwnProperty("docString")&&t.uint32(50).string(e.docString),null!=e.graph&&e.hasOwnProperty("graph")&&a.onnx.GraphProto.encode(e.graph,t.uint32(58).fork()).ldelim(),null!=e.opsetImport&&e.opsetImport.length)for(var n=0;n<e.opsetImport.length;++n)a.onnx.OperatorSetIdProto.encode(e.opsetImport[n],t.uint32(66).fork()).ldelim();if(null!=e.metadataProps&&e.metadataProps.length)for(n=0;n<e.metadataProps.length;++n)a.onnx.StringStringEntryProto.encode(e.metadataProps[n],t.uint32(114).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.onnx.ModelProto;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.irVersion=e.int64();break;case 8:r.opsetImport&&r.opsetImport.length||(r.opsetImport=[]),r.opsetImport.push(a.onnx.OperatorSetIdProto.decode(e,e.uint32()));break;case 2:r.producerName=e.string();break;case 3:r.producerVersion=e.string();break;case 4:r.domain=e.string();break;case 5:r.modelVersion=e.int64();break;case 6:r.docString=e.string();break;case 7:r.graph=a.onnx.GraphProto.decode(e,e.uint32());break;case 14:r.metadataProps&&r.metadataProps.length||(r.metadataProps=[]),r.metadataProps.push(a.onnx.StringStringEntryProto.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof i||(e=new i(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.irVersion&&e.hasOwnProperty("irVersion")&&!(s.isInteger(e.irVersion)||e.irVersion&&s.isInteger(e.irVersion.low)&&s.isInteger(e.irVersion.high)))return"irVersion: integer|Long expected";if(null!=e.opsetImport&&e.hasOwnProperty("opsetImport")){if(!Array.isArray(e.opsetImport))return"opsetImport: array expected";for(var t=0;t<e.opsetImport.length;++t)if(n=a.onnx.OperatorSetIdProto.verify(e.opsetImport[t]))return"opsetImport."+n}if(null!=e.producerName&&e.hasOwnProperty("producerName")&&!s.isString(e.producerName))return"producerName: string expected";if(null!=e.producerVersion&&e.hasOwnProperty("producerVersion")&&!s.isString(e.producerVersion))return"producerVersion: string expected";if(null!=e.domain&&e.hasOwnProperty("domain")&&!s.isString(e.domain))return"domain: string expected";if(null!=e.modelVersion&&e.hasOwnProperty("modelVersion")&&!(s.isInteger(e.modelVersion)||e.modelVersion&&s.isInteger(e.modelVersion.low)&&s.isInteger(e.modelVersion.high)))return"modelVersion: integer|Long expected";if(null!=e.docString&&e.hasOwnProperty("docString")&&!s.isString(e.docString))return"docString: string expected";if(null!=e.graph&&e.hasOwnProperty("graph")&&(n=a.onnx.GraphProto.verify(e.graph)))return"graph."+n;if(null!=e.metadataProps&&e.hasOwnProperty("metadataProps")){if(!Array.isArray(e.metadataProps))return"metadataProps: array expected";for(t=0;t<e.metadataProps.length;++t){var n;if(n=a.onnx.StringStringEntryProto.verify(e.metadataProps[t]))return"metadataProps."+n}}return null},e.fromObject=function(e){if(e instanceof a.onnx.ModelProto)return e;var t=new a.onnx.ModelProto;if(null!=e.irVersion&&(s.Long?(t.irVersion=s.Long.fromValue(e.irVersion)).unsigned=!1:"string"==typeof e.irVersion?t.irVersion=parseInt(e.irVersion,10):"number"==typeof e.irVersion?t.irVersion=e.irVersion:"object"==typeof e.irVersion&&(t.irVersion=new s.LongBits(e.irVersion.low>>>0,e.irVersion.high>>>0).toNumber())),e.opsetImport){if(!Array.isArray(e.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");t.opsetImport=[];for(var n=0;n<e.opsetImport.length;++n){if("object"!=typeof e.opsetImport[n])throw TypeError(".onnx.ModelProto.opsetImport: object expected");t.opsetImport[n]=a.onnx.OperatorSetIdProto.fromObject(e.opsetImport[n])}}if(null!=e.producerName&&(t.producerName=String(e.producerName)),null!=e.producerVersion&&(t.producerVersion=String(e.producerVersion)),null!=e.domain&&(t.domain=String(e.domain)),null!=e.modelVersion&&(s.Long?(t.modelVersion=s.Long.fromValue(e.modelVersion)).unsigned=!1:"string"==typeof e.modelVersion?t.modelVersion=parseInt(e.modelVersion,10):"number"==typeof e.modelVersion?t.modelVersion=e.modelVersion:"object"==typeof e.modelVersion&&(t.modelVersion=new s.LongBits(e.modelVersion.low>>>0,e.modelVersion.high>>>0).toNumber())),null!=e.docString&&(t.docString=String(e.docString)),null!=e.graph){if("object"!=typeof e.graph)throw TypeError(".onnx.ModelProto.graph: object expected");t.graph=a.onnx.GraphProto.fromObject(e.graph)}if(e.metadataProps){if(!Array.isArray(e.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");for(t.metadataProps=[],n=0;n<e.metadataProps.length;++n){if("object"!=typeof e.metadataProps[n])throw TypeError(".onnx.ModelProto.metadataProps: object expected");t.metadataProps[n]=a.onnx.StringStringEntryProto.fromObject(e.metadataProps[n])}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.opsetImport=[],n.metadataProps=[]),t.defaults){if(s.Long){var r=new s.Long(0,0,!1);n.irVersion=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.irVersion=t.longs===String?"0":0;n.producerName="",n.producerVersion="",n.domain="",s.Long?(r=new s.Long(0,0,!1),n.modelVersion=t.longs===String?r.toString():t.longs===Number?r.toNumber():r):n.modelVersion=t.longs===String?"0":0,n.docString="",n.graph=null}if(null!=e.irVersion&&e.hasOwnProperty("irVersion")&&("number"==typeof e.irVersion?n.irVersion=t.longs===String?String(e.irVersion):e.irVersion:n.irVersion=t.longs===String?s.Long.prototype.toString.call(e.irVersion):t.longs===Number?new s.LongBits(e.irVersion.low>>>0,e.irVersion.high>>>0).toNumber():e.irVersion),null!=e.producerName&&e.hasOwnProperty("producerName")&&(n.producerName=e.producerName),null!=e.producerVersion&&e.hasOwnProperty("producerVersion")&&(n.producerVersion=e.producerVersion),null!=e.domain&&e.hasOwnProperty("domain")&&(n.domain=e.domain),null!=e.modelVersion&&e.hasOwnProperty("modelVersion")&&("number"==typeof e.modelVersion?n.modelVersion=t.longs===String?String(e.modelVersion):e.modelVersion:n.modelVersion=t.longs===String?s.Long.prototype.toString.call(e.modelVersion):t.longs===Number?new s.LongBits(e.modelVersion.low>>>0,e.modelVersion.high>>>0).toNumber():e.modelVersion),null!=e.docString&&e.hasOwnProperty("docString")&&(n.docString=e.docString),null!=e.graph&&e.hasOwnProperty("graph")&&(n.graph=a.onnx.GraphProto.toObject(e.graph,t)),e.opsetImport&&e.opsetImport.length){n.opsetImport=[];for(var i=0;i<e.opsetImport.length;++i)n.opsetImport[i]=a.onnx.OperatorSetIdProto.toObject(e.opsetImport[i],t)}if(e.metadataProps&&e.metadataProps.length)for(n.metadataProps=[],i=0;i<e.metadataProps.length;++i)n.metadataProps[i]=a.onnx.StringStringEntryProto.toObject(e.metadataProps[i],t);return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),n.StringStringEntryProto=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.key&&e.hasOwnProperty("key")&&t.uint32(10).string(e.key),null!=e.value&&e.hasOwnProperty("value")&&t.uint32(18).string(e.value),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.onnx.StringStringEntryProto;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.key=e.string();break;case 2:r.value=e.string();break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof i||(e=new i(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.key&&e.hasOwnProperty("key")&&!s.isString(e.key)?"key: string expected":null!=e.value&&e.hasOwnProperty("value")&&!s.isString(e.value)?"value: string expected":null},e.fromObject=function(e){if(e instanceof a.onnx.StringStringEntryProto)return e;var t=new a.onnx.StringStringEntryProto;return null!=e.key&&(t.key=String(e.key)),null!=e.value&&(t.value=String(e.value)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.key="",n.value=""),null!=e.key&&e.hasOwnProperty("key")&&(n.key=e.key),null!=e.value&&e.hasOwnProperty("value")&&(n.value=e.value),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),n.TensorAnnotation=function(){function e(e){if(this.quantParameterTensorNames=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.tensorName="",e.prototype.quantParameterTensorNames=s.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=o.create()),null!=e.tensorName&&e.hasOwnProperty("tensorName")&&t.uint32(10).string(e.tensorName),null!=e.quantParameterTensorNames&&e.quantParameterTensorNames.length)for(var n=0;n<e.quantParameterTensorNames.length;++n)a.onnx.StringStringEntryProto.encode(e.quantParameterTensorNames[n],t.uint32(18).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.onnx.TensorAnnotation;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.tensorName=e.string();break;case 2:r.quantParameterTensorNames&&r.quantParameterTensorNames.length||(r.quantParameterTensorNames=[]),r.quantParameterTensorNames.push(a.onnx.StringStringEntryProto.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof i||(e=new i(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.tensorName&&e.hasOwnProperty("tensorName")&&!s.isString(e.tensorName))return"tensorName: string expected";if(null!=e.quantParameterTensorNames&&e.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(e.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var t=0;t<e.quantParameterTensorNames.length;++t){var n=a.onnx.StringStringEntryProto.verify(e.quantParameterTensorNames[t]);if(n)return"quantParameterTensorNames."+n}}return null},e.fromObject=function(e){if(e instanceof a.onnx.TensorAnnotation)return e;var t=new a.onnx.TensorAnnotation;if(null!=e.tensorName&&(t.tensorName=String(e.tensorName)),e.quantParameterTensorNames){if(!Array.isArray(e.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");t.quantParameterTensorNames=[];for(var n=0;n<e.quantParameterTensorNames.length;++n){if("object"!=typeof e.quantParameterTensorNames[n])throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");t.quantParameterTensorNames[n]=a.onnx.StringStringEntryProto.fromObject(e.quantParameterTensorNames[n])}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.quantParameterTensorNames=[]),t.defaults&&(n.tensorName=""),null!=e.tensorName&&e.hasOwnProperty("tensorName")&&(n.tensorName=e.tensorName),e.quantParameterTensorNames&&e.quantParameterTensorNames.length){n.quantParameterTensorNames=[];for(var r=0;r<e.quantParameterTensorNames.length;++r)n.quantParameterTensorNames[r]=a.onnx.StringStringEntryProto.toObject(e.quantParameterTensorNames[r],t)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),n.GraphProto=function(){function e(e){if(this.node=[],this.initializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.node=s.emptyArray,e.prototype.name="",e.prototype.initializer=s.emptyArray,e.prototype.docString="",e.prototype.input=s.emptyArray,e.prototype.output=s.emptyArray,e.prototype.valueInfo=s.emptyArray,e.prototype.quantizationAnnotation=s.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=o.create()),null!=e.node&&e.node.length)for(var n=0;n<e.node.length;++n)a.onnx.NodeProto.encode(e.node[n],t.uint32(10).fork()).ldelim();if(null!=e.name&&e.hasOwnProperty("name")&&t.uint32(18).string(e.name),null!=e.initializer&&e.initializer.length)for(n=0;n<e.initializer.length;++n)a.onnx.TensorProto.encode(e.initializer[n],t.uint32(42).fork()).ldelim();if(null!=e.docString&&e.hasOwnProperty("docString")&&t.uint32(82).string(e.docString),null!=e.input&&e.input.length)for(n=0;n<e.input.length;++n)a.onnx.ValueInfoProto.encode(e.input[n],t.uint32(90).fork()).ldelim();if(null!=e.output&&e.output.length)for(n=0;n<e.output.length;++n)a.onnx.ValueInfoProto.encode(e.output[n],t.uint32(98).fork()).ldelim();if(null!=e.valueInfo&&e.valueInfo.length)for(n=0;n<e.valueInfo.length;++n)a.onnx.ValueInfoProto.encode(e.valueInfo[n],t.uint32(106).fork()).ldelim();if(null!=e.quantizationAnnotation&&e.quantizationAnnotation.length)for(n=0;n<e.quantizationAnnotation.length;++n)a.onnx.TensorAnnotation.encode(e.quantizationAnnotation[n],t.uint32(114).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.onnx.GraphProto;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.node&&r.node.length||(r.node=[]),r.node.push(a.onnx.NodeProto.decode(e,e.uint32()));break;case 2:r.name=e.string();break;case 5:r.initializer&&r.initializer.length||(r.initializer=[]),r.initializer.push(a.onnx.TensorProto.decode(e,e.uint32()));break;case 10:r.docString=e.string();break;case 11:r.input&&r.input.length||(r.input=[]),r.input.push(a.onnx.ValueInfoProto.decode(e,e.uint32()));break;case 12:r.output&&r.output.length||(r.output=[]),r.output.push(a.onnx.ValueInfoProto.decode(e,e.uint32()));break;case 13:r.valueInfo&&r.valueInfo.length||(r.valueInfo=[]),r.valueInfo.push(a.onnx.ValueInfoProto.decode(e,e.uint32()));break;case 14:r.quantizationAnnotation&&r.quantizationAnnotation.length||(r.quantizationAnnotation=[]),r.quantizationAnnotation.push(a.onnx.TensorAnnotation.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof i||(e=new i(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.node&&e.hasOwnProperty("node")){if(!Array.isArray(e.node))return"node: array expected";for(var t=0;t<e.node.length;++t)if(n=a.onnx.NodeProto.verify(e.node[t]))return"node."+n}if(null!=e.name&&e.hasOwnProperty("name")&&!s.isString(e.name))return"name: string expected";if(null!=e.initializer&&e.hasOwnProperty("initializer")){if(!Array.isArray(e.initializer))return"initializer: array expected";for(t=0;t<e.initializer.length;++t)if(n=a.onnx.TensorProto.verify(e.initializer[t]))return"initializer."+n}if(null!=e.docString&&e.hasOwnProperty("docString")&&!s.isString(e.docString))return"docString: string expected";if(null!=e.input&&e.hasOwnProperty("input")){if(!Array.isArray(e.input))return"input: array expected";for(t=0;t<e.input.length;++t)if(n=a.onnx.ValueInfoProto.verify(e.input[t]))return"input."+n}if(null!=e.output&&e.hasOwnProperty("output")){if(!Array.isArray(e.output))return"output: array expected";for(t=0;t<e.output.length;++t)if(n=a.onnx.ValueInfoProto.verify(e.output[t]))return"output."+n}if(null!=e.valueInfo&&e.hasOwnProperty("valueInfo")){if(!Array.isArray(e.valueInfo))return"valueInfo: array expected";for(t=0;t<e.valueInfo.length;++t)if(n=a.onnx.ValueInfoProto.verify(e.valueInfo[t]))return"valueInfo."+n}if(null!=e.quantizationAnnotation&&e.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(e.quantizationAnnotation))return"quantizationAnnotation: array expected";for(t=0;t<e.quantizationAnnotation.length;++t){var n;if(n=a.onnx.TensorAnnotation.verify(e.quantizationAnnotation[t]))return"quantizationAnnotation."+n}}return null},e.fromObject=function(e){if(e instanceof a.onnx.GraphProto)return e;var t=new a.onnx.GraphProto;if(e.node){if(!Array.isArray(e.node))throw TypeError(".onnx.GraphProto.node: array expected");t.node=[];for(var n=0;n<e.node.length;++n){if("object"!=typeof e.node[n])throw TypeError(".onnx.GraphProto.node: object expected");t.node[n]=a.onnx.NodeProto.fromObject(e.node[n])}}if(null!=e.name&&(t.name=String(e.name)),e.initializer){if(!Array.isArray(e.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");for(t.initializer=[],n=0;n<e.initializer.length;++n){if("object"!=typeof e.initializer[n])throw TypeError(".onnx.GraphProto.initializer: object expected");t.initializer[n]=a.onnx.TensorProto.fromObject(e.initializer[n])}}if(null!=e.docString&&(t.docString=String(e.docString)),e.input){if(!Array.isArray(e.input))throw TypeError(".onnx.GraphProto.input: array expected");for(t.input=[],n=0;n<e.input.length;++n){if("object"!=typeof e.input[n])throw TypeError(".onnx.GraphProto.input: object expected");t.input[n]=a.onnx.ValueInfoProto.fromObject(e.input[n])}}if(e.output){if(!Array.isArray(e.output))throw TypeError(".onnx.GraphProto.output: array expected");for(t.output=[],n=0;n<e.output.length;++n){if("object"!=typeof e.output[n])throw TypeError(".onnx.GraphProto.output: object expected");t.output[n]=a.onnx.ValueInfoProto.fromObject(e.output[n])}}if(e.valueInfo){if(!Array.isArray(e.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");for(t.valueInfo=[],n=0;n<e.valueInfo.length;++n){if("object"!=typeof e.valueInfo[n])throw TypeError(".onnx.GraphProto.valueInfo: object expected");t.valueInfo[n]=a.onnx.ValueInfoProto.fromObject(e.valueInfo[n])}}if(e.quantizationAnnotation){if(!Array.isArray(e.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");for(t.quantizationAnnotation=[],n=0;n<e.quantizationAnnotation.length;++n){if("object"!=typeof e.quantizationAnnotation[n])throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");t.quantizationAnnotation[n]=a.onnx.TensorAnnotation.fromObject(e.quantizationAnnotation[n])}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.node=[],n.initializer=[],n.input=[],n.output=[],n.valueInfo=[],n.quantizationAnnotation=[]),t.defaults&&(n.name="",n.docString=""),e.node&&e.node.length){n.node=[];for(var r=0;r<e.node.length;++r)n.node[r]=a.onnx.NodeProto.toObject(e.node[r],t)}if(null!=e.name&&e.hasOwnProperty("name")&&(n.name=e.name),e.initializer&&e.initializer.length)for(n.initializer=[],r=0;r<e.initializer.length;++r)n.initializer[r]=a.onnx.TensorProto.toObject(e.initializer[r],t);if(null!=e.docString&&e.hasOwnProperty("docString")&&(n.docString=e.docString),e.input&&e.input.length)for(n.input=[],r=0;r<e.input.length;++r)n.input[r]=a.onnx.ValueInfoProto.toObject(e.input[r],t);if(e.output&&e.output.length)for(n.output=[],r=0;r<e.output.length;++r)n.output[r]=a.onnx.ValueInfoProto.toObject(e.output[r],t);if(e.valueInfo&&e.valueInfo.length)for(n.valueInfo=[],r=0;r<e.valueInfo.length;++r)n.valueInfo[r]=a.onnx.ValueInfoProto.toObject(e.valueInfo[r],t);if(e.quantizationAnnotation&&e.quantizationAnnotation.length)for(n.quantizationAnnotation=[],r=0;r<e.quantizationAnnotation.length;++r)n.quantizationAnnotation[r]=a.onnx.TensorAnnotation.toObject(e.quantizationAnnotation[r],t);return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),n.TensorProto=function(){function e(e){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.dims=s.emptyArray,e.prototype.dataType=0,e.prototype.segment=null,e.prototype.floatData=s.emptyArray,e.prototype.int32Data=s.emptyArray,e.prototype.stringData=s.emptyArray,e.prototype.int64Data=s.emptyArray,e.prototype.name="",e.prototype.docString="",e.prototype.rawData=s.newBuffer([]),e.prototype.externalData=s.emptyArray,e.prototype.dataLocation=0,e.prototype.doubleData=s.emptyArray,e.prototype.uint64Data=s.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=o.create()),null!=e.dims&&e.dims.length){t.uint32(10).fork();for(var n=0;n<e.dims.length;++n)t.int64(e.dims[n]);t.ldelim()}if(null!=e.dataType&&e.hasOwnProperty("dataType")&&t.uint32(16).int32(e.dataType),null!=e.segment&&e.hasOwnProperty("segment")&&a.onnx.TensorProto.Segment.encode(e.segment,t.uint32(26).fork()).ldelim(),null!=e.floatData&&e.floatData.length){for(t.uint32(34).fork(),n=0;n<e.floatData.length;++n)t.float(e.floatData[n]);t.ldelim()}if(null!=e.int32Data&&e.int32Data.length){for(t.uint32(42).fork(),n=0;n<e.int32Data.length;++n)t.int32(e.int32Data[n]);t.ldelim()}if(null!=e.stringData&&e.stringData.length)for(n=0;n<e.stringData.length;++n)t.uint32(50).bytes(e.stringData[n]);if(null!=e.int64Data&&e.int64Data.length){for(t.uint32(58).fork(),n=0;n<e.int64Data.length;++n)t.int64(e.int64Data[n]);t.ldelim()}if(null!=e.name&&e.hasOwnProperty("name")&&t.uint32(66).string(e.name),null!=e.rawData&&e.hasOwnProperty("rawData")&&t.uint32(74).bytes(e.rawData),null!=e.doubleData&&e.doubleData.length){for(t.uint32(82).fork(),n=0;n<e.doubleData.length;++n)t.double(e.doubleData[n]);t.ldelim()}if(null!=e.uint64Data&&e.uint64Data.length){for(t.uint32(90).fork(),n=0;n<e.uint64Data.length;++n)t.uint64(e.uint64Data[n]);t.ldelim()}if(null!=e.docString&&e.hasOwnProperty("docString")&&t.uint32(98).string(e.docString),null!=e.externalData&&e.externalData.length)for(n=0;n<e.externalData.length;++n)a.onnx.StringStringEntryProto.encode(e.externalData[n],t.uint32(106).fork()).ldelim();return null!=e.dataLocation&&e.hasOwnProperty("dataLocation")&&t.uint32(112).int32(e.dataLocation),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.onnx.TensorProto;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:if(r.dims&&r.dims.length||(r.dims=[]),2==(7&o))for(var s=e.uint32()+e.pos;e.pos<s;)r.dims.push(e.int64());else r.dims.push(e.int64());break;case 2:r.dataType=e.int32();break;case 3:r.segment=a.onnx.TensorProto.Segment.decode(e,e.uint32());break;case 4:if(r.floatData&&r.floatData.length||(r.floatData=[]),2==(7&o))for(s=e.uint32()+e.pos;e.pos<s;)r.floatData.push(e.float());else r.floatData.push(e.float());break;case 5:if(r.int32Data&&r.int32Data.length||(r.int32Data=[]),2==(7&o))for(s=e.uint32()+e.pos;e.pos<s;)r.int32Data.push(e.int32());else r.int32Data.push(e.int32());break;case 6:r.stringData&&r.stringData.length||(r.stringData=[]),r.stringData.push(e.bytes());break;case 7:if(r.int64Data&&r.int64Data.length||(r.int64Data=[]),2==(7&o))for(s=e.uint32()+e.pos;e.pos<s;)r.int64Data.push(e.int64());else r.int64Data.push(e.int64());break;case 8:r.name=e.string();break;case 12:r.docString=e.string();break;case 9:r.rawData=e.bytes();break;case 13:r.externalData&&r.externalData.length||(r.externalData=[]),r.externalData.push(a.onnx.StringStringEntryProto.decode(e,e.uint32()));break;case 14:r.dataLocation=e.int32();break;case 10:if(r.doubleData&&r.doubleData.length||(r.doubleData=[]),2==(7&o))for(s=e.uint32()+e.pos;e.pos<s;)r.doubleData.push(e.double());else r.doubleData.push(e.double());break;case 11:if(r.uint64Data&&r.uint64Data.length||(r.uint64Data=[]),2==(7&o))for(s=e.uint32()+e.pos;e.pos<s;)r.uint64Data.push(e.uint64());else r.uint64Data.push(e.uint64());break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof i||(e=new i(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.dims&&e.hasOwnProperty("dims")){if(!Array.isArray(e.dims))return"dims: array expected";for(var t=0;t<e.dims.length;++t)if(!(s.isInteger(e.dims[t])||e.dims[t]&&s.isInteger(e.dims[t].low)&&s.isInteger(e.dims[t].high)))return"dims: integer|Long[] expected"}if(null!=e.dataType&&e.hasOwnProperty("dataType")&&!s.isInteger(e.dataType))return"dataType: integer expected";if(null!=e.segment&&e.hasOwnProperty("segment")&&(n=a.onnx.TensorProto.Segment.verify(e.segment)))return"segment."+n;if(null!=e.floatData&&e.hasOwnProperty("floatData")){if(!Array.isArray(e.floatData))return"floatData: array expected";for(t=0;t<e.floatData.length;++t)if("number"!=typeof e.floatData[t])return"floatData: number[] expected"}if(null!=e.int32Data&&e.hasOwnProperty("int32Data")){if(!Array.isArray(e.int32Data))return"int32Data: array expected";for(t=0;t<e.int32Data.length;++t)if(!s.isInteger(e.int32Data[t]))return"int32Data: integer[] expected"}if(null!=e.stringData&&e.hasOwnProperty("stringData")){if(!Array.isArray(e.stringData))return"stringData: array expected";for(t=0;t<e.stringData.length;++t)if(!(e.stringData[t]&&"number"==typeof e.stringData[t].length||s.isString(e.stringData[t])))return"stringData: buffer[] expected"}if(null!=e.int64Data&&e.hasOwnProperty("int64Data")){if(!Array.isArray(e.int64Data))return"int64Data: array expected";for(t=0;t<e.int64Data.length;++t)if(!(s.isInteger(e.int64Data[t])||e.int64Data[t]&&s.isInteger(e.int64Data[t].low)&&s.isInteger(e.int64Data[t].high)))return"int64Data: integer|Long[] expected"}if(null!=e.name&&e.hasOwnProperty("name")&&!s.isString(e.name))return"name: string expected";if(null!=e.docString&&e.hasOwnProperty("docString")&&!s.isString(e.docString))return"docString: string expected";if(null!=e.rawData&&e.hasOwnProperty("rawData")&&!(e.rawData&&"number"==typeof e.rawData.length||s.isString(e.rawData)))return"rawData: buffer expected";if(null!=e.externalData&&e.hasOwnProperty("externalData")){if(!Array.isArray(e.externalData))return"externalData: array expected";for(t=0;t<e.externalData.length;++t){var n;if(n=a.onnx.StringStringEntryProto.verify(e.externalData[t]))return"externalData."+n}}if(null!=e.dataLocation&&e.hasOwnProperty("dataLocation"))switch(e.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:}if(null!=e.doubleData&&e.hasOwnProperty("doubleData")){if(!Array.isArray(e.doubleData))return"doubleData: array expected";for(t=0;t<e.doubleData.length;++t)if("number"!=typeof e.doubleData[t])return"doubleData: number[] expected"}if(null!=e.uint64Data&&e.hasOwnProperty("uint64Data")){if(!Array.isArray(e.uint64Data))return"uint64Data: array expected";for(t=0;t<e.uint64Data.length;++t)if(!(s.isInteger(e.uint64Data[t])||e.uint64Data[t]&&s.isInteger(e.uint64Data[t].low)&&s.isInteger(e.uint64Data[t].high)))return"uint64Data: integer|Long[] expected"}return null},e.fromObject=function(e){if(e instanceof a.onnx.TensorProto)return e;var t=new a.onnx.TensorProto;if(e.dims){if(!Array.isArray(e.dims))throw TypeError(".onnx.TensorProto.dims: array expected");t.dims=[];for(var n=0;n<e.dims.length;++n)s.Long?(t.dims[n]=s.Long.fromValue(e.dims[n])).unsigned=!1:"string"==typeof e.dims[n]?t.dims[n]=parseInt(e.dims[n],10):"number"==typeof e.dims[n]?t.dims[n]=e.dims[n]:"object"==typeof e.dims[n]&&(t.dims[n]=new s.LongBits(e.dims[n].low>>>0,e.dims[n].high>>>0).toNumber())}if(null!=e.dataType&&(t.dataType=0|e.dataType),null!=e.segment){if("object"!=typeof e.segment)throw TypeError(".onnx.TensorProto.segment: object expected");t.segment=a.onnx.TensorProto.Segment.fromObject(e.segment)}if(e.floatData){if(!Array.isArray(e.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");for(t.floatData=[],n=0;n<e.floatData.length;++n)t.floatData[n]=Number(e.floatData[n])}if(e.int32Data){if(!Array.isArray(e.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");for(t.int32Data=[],n=0;n<e.int32Data.length;++n)t.int32Data[n]=0|e.int32Data[n]}if(e.stringData){if(!Array.isArray(e.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");for(t.stringData=[],n=0;n<e.stringData.length;++n)"string"==typeof e.stringData[n]?s.base64.decode(e.stringData[n],t.stringData[n]=s.newBuffer(s.base64.length(e.stringData[n])),0):e.stringData[n].length&&(t.stringData[n]=e.stringData[n])}if(e.int64Data){if(!Array.isArray(e.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");for(t.int64Data=[],n=0;n<e.int64Data.length;++n)s.Long?(t.int64Data[n]=s.Long.fromValue(e.int64Data[n])).unsigned=!1:"string"==typeof e.int64Data[n]?t.int64Data[n]=parseInt(e.int64Data[n],10):"number"==typeof e.int64Data[n]?t.int64Data[n]=e.int64Data[n]:"object"==typeof e.int64Data[n]&&(t.int64Data[n]=new s.LongBits(e.int64Data[n].low>>>0,e.int64Data[n].high>>>0).toNumber())}if(null!=e.name&&(t.name=String(e.name)),null!=e.docString&&(t.docString=String(e.docString)),null!=e.rawData&&("string"==typeof e.rawData?s.base64.decode(e.rawData,t.rawData=s.newBuffer(s.base64.length(e.rawData)),0):e.rawData.length&&(t.rawData=e.rawData)),e.externalData){if(!Array.isArray(e.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");for(t.externalData=[],n=0;n<e.externalData.length;++n){if("object"!=typeof e.externalData[n])throw TypeError(".onnx.TensorProto.externalData: object expected");t.externalData[n]=a.onnx.StringStringEntryProto.fromObject(e.externalData[n])}}switch(e.dataLocation){case"DEFAULT":case 0:t.dataLocation=0;break;case"EXTERNAL":case 1:t.dataLocation=1}if(e.doubleData){if(!Array.isArray(e.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");for(t.doubleData=[],n=0;n<e.doubleData.length;++n)t.doubleData[n]=Number(e.doubleData[n])}if(e.uint64Data){if(!Array.isArray(e.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");for(t.uint64Data=[],n=0;n<e.uint64Data.length;++n)s.Long?(t.uint64Data[n]=s.Long.fromValue(e.uint64Data[n])).unsigned=!0:"string"==typeof e.uint64Data[n]?t.uint64Data[n]=parseInt(e.uint64Data[n],10):"number"==typeof e.uint64Data[n]?t.uint64Data[n]=e.uint64Data[n]:"object"==typeof e.uint64Data[n]&&(t.uint64Data[n]=new s.LongBits(e.uint64Data[n].low>>>0,e.uint64Data[n].high>>>0).toNumber(!0))}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.dims=[],n.floatData=[],n.int32Data=[],n.stringData=[],n.int64Data=[],n.doubleData=[],n.uint64Data=[],n.externalData=[]),t.defaults&&(n.dataType=0,n.segment=null,n.name="",t.bytes===String?n.rawData="":(n.rawData=[],t.bytes!==Array&&(n.rawData=s.newBuffer(n.rawData))),n.docString="",n.dataLocation=t.enums===String?"DEFAULT":0),e.dims&&e.dims.length){n.dims=[];for(var r=0;r<e.dims.length;++r)"number"==typeof e.dims[r]?n.dims[r]=t.longs===String?String(e.dims[r]):e.dims[r]:n.dims[r]=t.longs===String?s.Long.prototype.toString.call(e.dims[r]):t.longs===Number?new s.LongBits(e.dims[r].low>>>0,e.dims[r].high>>>0).toNumber():e.dims[r]}if(null!=e.dataType&&e.hasOwnProperty("dataType")&&(n.dataType=e.dataType),null!=e.segment&&e.hasOwnProperty("segment")&&(n.segment=a.onnx.TensorProto.Segment.toObject(e.segment,t)),e.floatData&&e.floatData.length)for(n.floatData=[],r=0;r<e.floatData.length;++r)n.floatData[r]=t.json&&!isFinite(e.floatData[r])?String(e.floatData[r]):e.floatData[r];if(e.int32Data&&e.int32Data.length)for(n.int32Data=[],r=0;r<e.int32Data.length;++r)n.int32Data[r]=e.int32Data[r];if(e.stringData&&e.stringData.length)for(n.stringData=[],r=0;r<e.stringData.length;++r)n.stringData[r]=t.bytes===String?s.base64.encode(e.stringData[r],0,e.stringData[r].length):t.bytes===Array?Array.prototype.slice.call(e.stringData[r]):e.stringData[r];if(e.int64Data&&e.int64Data.length)for(n.int64Data=[],r=0;r<e.int64Data.length;++r)"number"==typeof e.int64Data[r]?n.int64Data[r]=t.longs===String?String(e.int64Data[r]):e.int64Data[r]:n.int64Data[r]=t.longs===String?s.Long.prototype.toString.call(e.int64Data[r]):t.longs===Number?new s.LongBits(e.int64Data[r].low>>>0,e.int64Data[r].high>>>0).toNumber():e.int64Data[r];if(null!=e.name&&e.hasOwnProperty("name")&&(n.name=e.name),null!=e.rawData&&e.hasOwnProperty("rawData")&&(n.rawData=t.bytes===String?s.base64.encode(e.rawData,0,e.rawData.length):t.bytes===Array?Array.prototype.slice.call(e.rawData):e.rawData),e.doubleData&&e.doubleData.length)for(n.doubleData=[],r=0;r<e.doubleData.length;++r)n.doubleData[r]=t.json&&!isFinite(e.doubleData[r])?String(e.doubleData[r]):e.doubleData[r];if(e.uint64Data&&e.uint64Data.length)for(n.uint64Data=[],r=0;r<e.uint64Data.length;++r)"number"==typeof e.uint64Data[r]?n.uint64Data[r]=t.longs===String?String(e.uint64Data[r]):e.uint64Data[r]:n.uint64Data[r]=t.longs===String?s.Long.prototype.toString.call(e.uint64Data[r]):t.longs===Number?new s.LongBits(e.uint64Data[r].low>>>0,e.uint64Data[r].high>>>0).toNumber(!0):e.uint64Data[r];if(null!=e.docString&&e.hasOwnProperty("docString")&&(n.docString=e.docString),e.externalData&&e.externalData.length)for(n.externalData=[],r=0;r<e.externalData.length;++r)n.externalData[r]=a.onnx.StringStringEntryProto.toObject(e.externalData[r],t);return null!=e.dataLocation&&e.hasOwnProperty("dataLocation")&&(n.dataLocation=t.enums===String?a.onnx.TensorProto.DataLocation[e.dataLocation]:e.dataLocation),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e.DataType=function(){var e={},t=Object.create(e);return t[e[0]="UNDEFINED"]=0,t[e[1]="FLOAT"]=1,t[e[2]="UINT8"]=2,t[e[3]="INT8"]=3,t[e[4]="UINT16"]=4,t[e[5]="INT16"]=5,t[e[6]="INT32"]=6,t[e[7]="INT64"]=7,t[e[8]="STRING"]=8,t[e[9]="BOOL"]=9,t[e[10]="FLOAT16"]=10,t[e[11]="DOUBLE"]=11,t[e[12]="UINT32"]=12,t[e[13]="UINT64"]=13,t[e[14]="COMPLEX64"]=14,t[e[15]="COMPLEX128"]=15,t[e[16]="BFLOAT16"]=16,t}(),e.Segment=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.begin=s.Long?s.Long.fromBits(0,0,!1):0,e.prototype.end=s.Long?s.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.begin&&e.hasOwnProperty("begin")&&t.uint32(8).int64(e.begin),null!=e.end&&e.hasOwnProperty("end")&&t.uint32(16).int64(e.end),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.onnx.TensorProto.Segment;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.begin=e.int64();break;case 2:r.end=e.int64();break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof i||(e=new i(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.begin&&e.hasOwnProperty("begin")&&!(s.isInteger(e.begin)||e.begin&&s.isInteger(e.begin.low)&&s.isInteger(e.begin.high))?"begin: integer|Long expected":null!=e.end&&e.hasOwnProperty("end")&&!(s.isInteger(e.end)||e.end&&s.isInteger(e.end.low)&&s.isInteger(e.end.high))?"end: integer|Long expected":null},e.fromObject=function(e){if(e instanceof a.onnx.TensorProto.Segment)return e;var t=new a.onnx.TensorProto.Segment;return null!=e.begin&&(s.Long?(t.begin=s.Long.fromValue(e.begin)).unsigned=!1:"string"==typeof e.begin?t.begin=parseInt(e.begin,10):"number"==typeof e.begin?t.begin=e.begin:"object"==typeof e.begin&&(t.begin=new s.LongBits(e.begin.low>>>0,e.begin.high>>>0).toNumber())),null!=e.end&&(s.Long?(t.end=s.Long.fromValue(e.end)).unsigned=!1:"string"==typeof e.end?t.end=parseInt(e.end,10):"number"==typeof e.end?t.end=e.end:"object"==typeof e.end&&(t.end=new s.LongBits(e.end.low>>>0,e.end.high>>>0).toNumber())),t},e.toObject=function(e,t){t||(t={});var n={};if(t.defaults){if(s.Long){var r=new s.Long(0,0,!1);n.begin=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.begin=t.longs===String?"0":0;s.Long?(r=new s.Long(0,0,!1),n.end=t.longs===String?r.toString():t.longs===Number?r.toNumber():r):n.end=t.longs===String?"0":0}return null!=e.begin&&e.hasOwnProperty("begin")&&("number"==typeof e.begin?n.begin=t.longs===String?String(e.begin):e.begin:n.begin=t.longs===String?s.Long.prototype.toString.call(e.begin):t.longs===Number?new s.LongBits(e.begin.low>>>0,e.begin.high>>>0).toNumber():e.begin),null!=e.end&&e.hasOwnProperty("end")&&("number"==typeof e.end?n.end=t.longs===String?String(e.end):e.end:n.end=t.longs===String?s.Long.prototype.toString.call(e.end):t.longs===Number?new s.LongBits(e.end.low>>>0,e.end.high>>>0).toNumber():e.end),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),e.DataLocation=function(){var e={},t=Object.create(e);return t[e[0]="DEFAULT"]=0,t[e[1]="EXTERNAL"]=1,t}(),e}(),n.TensorShapeProto=function(){function e(e){if(this.dim=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.dim=s.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=o.create()),null!=e.dim&&e.dim.length)for(var n=0;n<e.dim.length;++n)a.onnx.TensorShapeProto.Dimension.encode(e.dim[n],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.onnx.TensorShapeProto;e.pos<n;){var o=e.uint32();o>>>3==1?(r.dim&&r.dim.length||(r.dim=[]),r.dim.push(a.onnx.TensorShapeProto.Dimension.decode(e,e.uint32()))):e.skipType(7&o)}return r},e.decodeDelimited=function(e){return e instanceof i||(e=new i(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.dim&&e.hasOwnProperty("dim")){if(!Array.isArray(e.dim))return"dim: array expected";for(var t=0;t<e.dim.length;++t){var n=a.onnx.TensorShapeProto.Dimension.verify(e.dim[t]);if(n)return"dim."+n}}return null},e.fromObject=function(e){if(e instanceof a.onnx.TensorShapeProto)return e;var t=new a.onnx.TensorShapeProto;if(e.dim){if(!Array.isArray(e.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");t.dim=[];for(var n=0;n<e.dim.length;++n){if("object"!=typeof e.dim[n])throw TypeError(".onnx.TensorShapeProto.dim: object expected");t.dim[n]=a.onnx.TensorShapeProto.Dimension.fromObject(e.dim[n])}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.dim=[]),e.dim&&e.dim.length){n.dim=[];for(var r=0;r<e.dim.length;++r)n.dim[r]=a.onnx.TensorShapeProto.Dimension.toObject(e.dim[r],t)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e.Dimension=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var t;return e.prototype.dimValue=s.Long?s.Long.fromBits(0,0,!1):0,e.prototype.dimParam="",e.prototype.denotation="",Object.defineProperty(e.prototype,"value",{get:s.oneOfGetter(t=["dimValue","dimParam"]),set:s.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.dimValue&&e.hasOwnProperty("dimValue")&&t.uint32(8).int64(e.dimValue),null!=e.dimParam&&e.hasOwnProperty("dimParam")&&t.uint32(18).string(e.dimParam),null!=e.denotation&&e.hasOwnProperty("denotation")&&t.uint32(26).string(e.denotation),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.onnx.TensorShapeProto.Dimension;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.dimValue=e.int64();break;case 2:r.dimParam=e.string();break;case 3:r.denotation=e.string();break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof i||(e=new i(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";var t={};if(null!=e.dimValue&&e.hasOwnProperty("dimValue")&&(t.value=1,!(s.isInteger(e.dimValue)||e.dimValue&&s.isInteger(e.dimValue.low)&&s.isInteger(e.dimValue.high))))return"dimValue: integer|Long expected";if(null!=e.dimParam&&e.hasOwnProperty("dimParam")){if(1===t.value)return"value: multiple values";if(t.value=1,!s.isString(e.dimParam))return"dimParam: string expected"}return null!=e.denotation&&e.hasOwnProperty("denotation")&&!s.isString(e.denotation)?"denotation: string expected":null},e.fromObject=function(e){if(e instanceof a.onnx.TensorShapeProto.Dimension)return e;var t=new a.onnx.TensorShapeProto.Dimension;return null!=e.dimValue&&(s.Long?(t.dimValue=s.Long.fromValue(e.dimValue)).unsigned=!1:"string"==typeof e.dimValue?t.dimValue=parseInt(e.dimValue,10):"number"==typeof e.dimValue?t.dimValue=e.dimValue:"object"==typeof e.dimValue&&(t.dimValue=new s.LongBits(e.dimValue.low>>>0,e.dimValue.high>>>0).toNumber())),null!=e.dimParam&&(t.dimParam=String(e.dimParam)),null!=e.denotation&&(t.denotation=String(e.denotation)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.denotation=""),null!=e.dimValue&&e.hasOwnProperty("dimValue")&&("number"==typeof e.dimValue?n.dimValue=t.longs===String?String(e.dimValue):e.dimValue:n.dimValue=t.longs===String?s.Long.prototype.toString.call(e.dimValue):t.longs===Number?new s.LongBits(e.dimValue.low>>>0,e.dimValue.high>>>0).toNumber():e.dimValue,t.oneofs&&(n.value="dimValue")),null!=e.dimParam&&e.hasOwnProperty("dimParam")&&(n.dimParam=e.dimParam,t.oneofs&&(n.value="dimParam")),null!=e.denotation&&e.hasOwnProperty("denotation")&&(n.denotation=e.denotation),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),e}(),n.TypeProto=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var t;return e.prototype.tensorType=null,e.prototype.denotation="",Object.defineProperty(e.prototype,"value",{get:s.oneOfGetter(t=["tensorType"]),set:s.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.tensorType&&e.hasOwnProperty("tensorType")&&a.onnx.TypeProto.Tensor.encode(e.tensorType,t.uint32(10).fork()).ldelim(),null!=e.denotation&&e.hasOwnProperty("denotation")&&t.uint32(50).string(e.denotation),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.onnx.TypeProto;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.tensorType=a.onnx.TypeProto.Tensor.decode(e,e.uint32());break;case 6:r.denotation=e.string();break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof i||(e=new i(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.tensorType&&e.hasOwnProperty("tensorType")){var t=a.onnx.TypeProto.Tensor.verify(e.tensorType);if(t)return"tensorType."+t}return null!=e.denotation&&e.hasOwnProperty("denotation")&&!s.isString(e.denotation)?"denotation: string expected":null},e.fromObject=function(e){if(e instanceof a.onnx.TypeProto)return e;var t=new a.onnx.TypeProto;if(null!=e.tensorType){if("object"!=typeof e.tensorType)throw TypeError(".onnx.TypeProto.tensorType: object expected");t.tensorType=a.onnx.TypeProto.Tensor.fromObject(e.tensorType)}return null!=e.denotation&&(t.denotation=String(e.denotation)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.denotation=""),null!=e.tensorType&&e.hasOwnProperty("tensorType")&&(n.tensorType=a.onnx.TypeProto.Tensor.toObject(e.tensorType,t),t.oneofs&&(n.value="tensorType")),null!=e.denotation&&e.hasOwnProperty("denotation")&&(n.denotation=e.denotation),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e.Tensor=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.elemType=0,e.prototype.shape=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.elemType&&e.hasOwnProperty("elemType")&&t.uint32(8).int32(e.elemType),null!=e.shape&&e.hasOwnProperty("shape")&&a.onnx.TensorShapeProto.encode(e.shape,t.uint32(18).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.onnx.TypeProto.Tensor;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.elemType=e.int32();break;case 2:r.shape=a.onnx.TensorShapeProto.decode(e,e.uint32());break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof i||(e=new i(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.elemType&&e.hasOwnProperty("elemType")&&!s.isInteger(e.elemType))return"elemType: integer expected";if(null!=e.shape&&e.hasOwnProperty("shape")){var t=a.onnx.TensorShapeProto.verify(e.shape);if(t)return"shape."+t}return null},e.fromObject=function(e){if(e instanceof a.onnx.TypeProto.Tensor)return e;var t=new a.onnx.TypeProto.Tensor;if(null!=e.elemType&&(t.elemType=0|e.elemType),null!=e.shape){if("object"!=typeof e.shape)throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");t.shape=a.onnx.TensorShapeProto.fromObject(e.shape)}return t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.elemType=0,n.shape=null),null!=e.elemType&&e.hasOwnProperty("elemType")&&(n.elemType=e.elemType),null!=e.shape&&e.hasOwnProperty("shape")&&(n.shape=a.onnx.TensorShapeProto.toObject(e.shape,t)),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),e}(),n.OperatorSetIdProto=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.domain="",e.prototype.version=s.Long?s.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.domain&&e.hasOwnProperty("domain")&&t.uint32(10).string(e.domain),null!=e.version&&e.hasOwnProperty("version")&&t.uint32(16).int64(e.version),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.onnx.OperatorSetIdProto;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.domain=e.string();break;case 2:r.version=e.int64();break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof i||(e=new i(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.domain&&e.hasOwnProperty("domain")&&!s.isString(e.domain)?"domain: string expected":null!=e.version&&e.hasOwnProperty("version")&&!(s.isInteger(e.version)||e.version&&s.isInteger(e.version.low)&&s.isInteger(e.version.high))?"version: integer|Long expected":null},e.fromObject=function(e){if(e instanceof a.onnx.OperatorSetIdProto)return e;var t=new a.onnx.OperatorSetIdProto;return null!=e.domain&&(t.domain=String(e.domain)),null!=e.version&&(s.Long?(t.version=s.Long.fromValue(e.version)).unsigned=!1:"string"==typeof e.version?t.version=parseInt(e.version,10):"number"==typeof e.version?t.version=e.version:"object"==typeof e.version&&(t.version=new s.LongBits(e.version.low>>>0,e.version.high>>>0).toNumber())),t},e.toObject=function(e,t){t||(t={});var n={};if(t.defaults)if(n.domain="",s.Long){var r=new s.Long(0,0,!1);n.version=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.version=t.longs===String?"0":0;return null!=e.domain&&e.hasOwnProperty("domain")&&(n.domain=e.domain),null!=e.version&&e.hasOwnProperty("version")&&("number"==typeof e.version?n.version=t.longs===String?String(e.version):e.version:n.version=t.longs===String?s.Long.prototype.toString.call(e.version):t.longs===Number?new s.LongBits(e.version.low>>>0,e.version.high>>>0).toNumber():e.version),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),n}(),e.exports=a},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.reshape=t.WebGLReshape=void 0;var o=n(37),s=n(0),a=n(50),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){var n=s.ShapeUtil.calculateReshapedDims(t[0].dims,t[1].integerData);return[l(e,t[0],n)]},t}(o.Reshape);function l(e,t,n){var r=e.getOrCreateTextureData(t),i=n;4===r.channels&&(i=a.getPackedShape(n));var o={channels:r.channels,height:r.height,width:r.width,shape:0!==i.length?i:[1],strides:s.ShapeUtil.computeStrides(i),unpackedShape:n};return e.createSharedTextureData(o,t.type,r.texture,t.dataId).tensor}t.WebGLReshape=c,t.reshape=l},function(e,t,n){var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function i(e,t){if(t.endsWith("+")){var n=Number.parseInt(t.substring(0,t.length-1),10);return!isNaN(n)&&n<=e}if(2===t.split("-").length){var r=t.split("-"),i=(n=Number.parseInt(r[0],10),Number.parseInt(r[1],10));return!isNaN(n)&&!isNaN(i)&&n<=e&&e<=i}return Number.parseInt(t,10)===e}Object.defineProperty(t,"__esModule",{value:!0}),t.resolveOperator=void 0,t.resolveOperator=function(e,t,n){var o,s,a,c;try{for(var l=r(n),u=l.next();!u.done;u=l.next()){var d=u.value,h=d[0],p=d[1],g=d[2],f=d[3];if(e.opType===h)try{for(var m=(a=void 0,r(t)),b=m.next();!b.done;b=m.next()){var y=b.value;if((y.domain===p||"ai.onnx"===y.domain&&""===p)&&i(y.version,g))return f(e)}}catch(e){a={error:e}}finally{try{b&&!b.done&&(c=m.return)&&c.call(m)}finally{if(a)throw a.error}}}}catch(e){o={error:e}}finally{try{u&&!u.done&&(s=l.return)&&s.call(l)}finally{if(o)throw o.error}}throw new TypeError("cannot resolve operator '"+e.opType+"' with opsets: "+t.map((function(e){return(e.domain||"ai.onnx")+" v"+e.version})).join(", "))}},function(e,t,n){(function(e){var r=n(59),i=n(60),o=n(61);function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return l(this,e,t,n)}function l(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=h(e,t),e}(e,t,n,r):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|g(t,n),i=(e=a(e,r)).write(t,n);return i!==r&&(e=e.slice(0,i)),e}(e,t,n):function(e,t){if(c.isBuffer(t)){var n=0|p(t.length);return 0===(e=a(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?a(e,0):h(e,t);if("Buffer"===t.type&&o(t.data))return h(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(u(t),e=a(e,t<0?0:0|p(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function h(e,t){var n=t.length<0?0:0|p(t.length);e=a(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function p(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function g(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return B(e).length;default:if(r)return G(e).length;t=(""+t).toLowerCase(),r=!0}}function f(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,n);case"utf8":case"utf-8":return E(this,t,n);case"ascii":return A(this,t,n);case"latin1":case"binary":return x(this,t,n);case"base64":return C(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function m(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function b(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:y(e,t,n,r,i);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):y(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,r,i){var o,s=1,a=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,n/=2}function l(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var u=-1;for(o=n;o<a;o++)if(l(e,o)===l(t,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===c)return u*s}else-1!==u&&(o-=o-u),u=-1}else for(n+c>a&&(n=a-c),o=n;o>=0;o--){for(var d=!0,h=0;h<c;h++)if(l(e,o+h)!==l(t,h)){d=!1;break}if(d)return o}return-1}function _(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function v(e,t,n,r){return z(G(t,e.length-n),e,n,r)}function w(e,t,n,r){return z(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function S(e,t,n,r){return w(e,t,n,r)}function k(e,t,n,r){return z(B(t),e,n,r)}function I(e,t,n,r){return z(function(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)r=(n=e.charCodeAt(s))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function C(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function E(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,c,l=e[i],u=null,d=l>239?4:l>223?3:l>191?2:1;if(i+d<=n)switch(d){case 1:l<128&&(u=l);break;case 2:128==(192&(o=e[i+1]))&&(c=(31&l)<<6|63&o)>127&&(u=c);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(c=(15&l)<<12|(63&o)<<6|63&s)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(c=(15&l)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&c<1114112&&(u=c)}null===u?(u=65533,d=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=d}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}function A(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function x(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function T(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=L(e[o]);return i}function O(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function P(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,n,r,i,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function D(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function N(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function U(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function M(e,t,n,r,o){return o||U(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function j(e,t,n,r,o){return o||U(e,0,n,8),i.write(e,t,n,r,52,8),n+8}t.Buffer=c,t.SlowBuffer=function(e){return+e!=e&&(e=0),c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return l(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,n){return function(e,t,n,r){return u(t),t<=0?a(e,t):void 0!==n?"string"==typeof r?a(e,t).fill(n,r):a(e,t).fill(n):a(e,t)}(null,e,t,n)},c.allocUnsafe=function(e){return d(null,e)},c.allocUnsafeSlow=function(e){return d(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=c.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var s=e[n];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},c.byteLength=g,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?E(this,0,e):f.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,r,i){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(o,s),l=this.slice(r,i),u=e.slice(t,n),d=0;d<a;++d)if(l[d]!==u[d]){o=l[d],s=u[d];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return b(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return b(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return _(this,e,t,n);case"utf8":case"utf-8":return v(this,e,t,n);case"ascii":return w(this,e,t,n);case"latin1":case"binary":return S(this,e,t,n);case"base64":return k(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},c.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=c.prototype;else{var i=t-e;n=new c(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},c.prototype.readUInt8=function(e,t){return t||P(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||P(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||P(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||P(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||P(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||P(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||P(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||P(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||P(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||R(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||R(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):N(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):N(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return M(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return M(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return j(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return j(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},c.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=c.isBuffer(e)?e:G(new c(e,r).toString()),a=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%a]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function L(e){return e<16?"0"+e.toString(16):e.toString(16)}function G(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function B(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(F,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function z(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(8))},function(e,t){e.exports=r;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function r(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function i(e){return!0===(e&&e.__isLong__)}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=i;var o={},s={};function a(e,t){var n,r,i;return t?(i=0<=(e>>>=0)&&e<256)&&(r=s[e])?r:(n=l(e,(0|e)<0?-1:0,!0),i&&(s[e]=n),n):(i=-128<=(e|=0)&&e<128)&&(r=o[e])?r:(n=l(e,e<0?-1:0,!1),i&&(o[e]=n),n)}function c(e,t){if(isNaN(e))return t?y:b;if(t){if(e<0)return y;if(e>=g)return k}else{if(e<=-f)return I;if(e+1>=f)return S}return e<0?c(-e,t).neg():l(e%p|0,e/p|0,t)}function l(e,t,n){return new r(e,t,n)}r.fromInt=a,r.fromNumber=c,r.fromBits=l;var u=Math.pow;function d(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return b;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return d(e.substring(1),t,n).neg();for(var i=c(u(n,8)),o=b,s=0;s<e.length;s+=8){var a=Math.min(8,e.length-s),l=parseInt(e.substring(s,s+a),n);if(a<8){var h=c(u(n,a));o=o.mul(h).add(c(l))}else o=(o=o.mul(i)).add(c(l))}return o.unsigned=t,o}function h(e,t){return"number"==typeof e?c(e,t):"string"==typeof e?d(e,t):l(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=d,r.fromValue=h;var p=4294967296,g=p*p,f=g/2,m=a(1<<24),b=a(0);r.ZERO=b;var y=a(0,!0);r.UZERO=y;var _=a(1);r.ONE=_;var v=a(1,!0);r.UONE=v;var w=a(-1);r.NEG_ONE=w;var S=l(-1,2147483647,!1);r.MAX_VALUE=S;var k=l(-1,-1,!0);r.MAX_UNSIGNED_VALUE=k;var I=l(0,-2147483648,!1);r.MIN_VALUE=I;var C=r.prototype;C.toInt=function(){return this.unsigned?this.low>>>0:this.low},C.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},C.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(I)){var t=c(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=c(u(e,6),this.unsigned),o=this,s="";;){var a=o.div(i),l=(o.sub(a.mul(i)).toInt()>>>0).toString(e);if((o=a).isZero())return l+s;for(;l.length<6;)l="0"+l;s=""+l+s}},C.getHighBits=function(){return this.high},C.getHighBitsUnsigned=function(){return this.high>>>0},C.getLowBits=function(){return this.low},C.getLowBitsUnsigned=function(){return this.low>>>0},C.getNumBitsAbs=function(){if(this.isNegative())return this.eq(I)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},C.isZero=function(){return 0===this.high&&0===this.low},C.eqz=C.isZero,C.isNegative=function(){return!this.unsigned&&this.high<0},C.isPositive=function(){return this.unsigned||this.high>=0},C.isOdd=function(){return 1==(1&this.low)},C.isEven=function(){return 0==(1&this.low)},C.equals=function(e){return i(e)||(e=h(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},C.eq=C.equals,C.notEquals=function(e){return!this.eq(e)},C.neq=C.notEquals,C.ne=C.notEquals,C.lessThan=function(e){return this.comp(e)<0},C.lt=C.lessThan,C.lessThanOrEqual=function(e){return this.comp(e)<=0},C.lte=C.lessThanOrEqual,C.le=C.lessThanOrEqual,C.greaterThan=function(e){return this.comp(e)>0},C.gt=C.greaterThan,C.greaterThanOrEqual=function(e){return this.comp(e)>=0},C.gte=C.greaterThanOrEqual,C.ge=C.greaterThanOrEqual,C.compare=function(e){if(i(e)||(e=h(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},C.comp=C.compare,C.negate=function(){return!this.unsigned&&this.eq(I)?I:this.not().add(_)},C.neg=C.negate,C.add=function(e){i(e)||(e=h(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,o=65535&this.low,s=e.high>>>16,a=65535&e.high,c=e.low>>>16,u=0,d=0,p=0,g=0;return p+=(g+=o+(65535&e.low))>>>16,d+=(p+=r+c)>>>16,u+=(d+=n+a)>>>16,u+=t+s,l((p&=65535)<<16|(g&=65535),(u&=65535)<<16|(d&=65535),this.unsigned)},C.subtract=function(e){return i(e)||(e=h(e)),this.add(e.neg())},C.sub=C.subtract,C.multiply=function(e){if(this.isZero())return b;if(i(e)||(e=h(e)),n)return l(n.mul(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned);if(e.isZero())return b;if(this.eq(I))return e.isOdd()?I:b;if(e.eq(I))return this.isOdd()?I:b;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return c(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,r=65535&this.high,o=this.low>>>16,s=65535&this.low,a=e.high>>>16,u=65535&e.high,d=e.low>>>16,p=65535&e.low,g=0,f=0,y=0,_=0;return y+=(_+=s*p)>>>16,f+=(y+=o*p)>>>16,y&=65535,f+=(y+=s*d)>>>16,g+=(f+=r*p)>>>16,f&=65535,g+=(f+=o*d)>>>16,f&=65535,g+=(f+=s*u)>>>16,g+=t*p+r*d+o*u+s*a,l((y&=65535)<<16|(_&=65535),(g&=65535)<<16|(f&=65535),this.unsigned)},C.mul=C.multiply,C.divide=function(e){if(i(e)||(e=h(e)),e.isZero())throw Error("division by zero");var t,r,o;if(n)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?l((this.unsigned?n.div_u:n.div_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:b;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return y;if(e.gt(this.shru(1)))return v;o=y}else{if(this.eq(I))return e.eq(_)||e.eq(w)?I:e.eq(I)?_:(t=this.shr(1).div(e).shl(1)).eq(b)?e.isNegative()?_:w:(r=this.sub(e.mul(t)),o=t.add(r.div(e)));if(e.eq(I))return this.unsigned?y:b;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=b}for(r=this;r.gte(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(t)/Math.LN2),a=s<=48?1:u(2,s-48),d=c(t),p=d.mul(e);p.isNegative()||p.gt(r);)p=(d=c(t-=a,this.unsigned)).mul(e);d.isZero()&&(d=_),o=o.add(d),r=r.sub(p)}return o},C.div=C.divide,C.modulo=function(e){return i(e)||(e=h(e)),n?l((this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},C.mod=C.modulo,C.rem=C.modulo,C.not=function(){return l(~this.low,~this.high,this.unsigned)},C.and=function(e){return i(e)||(e=h(e)),l(this.low&e.low,this.high&e.high,this.unsigned)},C.or=function(e){return i(e)||(e=h(e)),l(this.low|e.low,this.high|e.high,this.unsigned)},C.xor=function(e){return i(e)||(e=h(e)),l(this.low^e.low,this.high^e.high,this.unsigned)},C.shiftLeft=function(e){return i(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?l(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):l(0,this.low<<e-32,this.unsigned)},C.shl=C.shiftLeft,C.shiftRight=function(e){return i(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?l(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):l(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},C.shr=C.shiftRight,C.shiftRightUnsigned=function(e){if(i(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?l(this.low>>>e|t<<32-e,t>>>e,this.unsigned):l(32===e?t:t>>>e-32,0,this.unsigned)},C.shru=C.shiftRightUnsigned,C.shr_u=C.shiftRightUnsigned,C.toSigned=function(){return this.unsigned?l(this.low,this.high,!1):this},C.toUnsigned=function(){return this.unsigned?this:l(this.low,this.high,!0)},C.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},C.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},C.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BatchNormalization=void 0;var r=function(){function e(){}return e.prototype.initialize=function(e){this.epsilon=e.getFloat("epsilon",1e-5),this.momentum=e.getFloat("momentum",.9),this.spatial=e.getInt("spatial",1)},e.prototype.checkInputs=function(e){return!(!e||5!==e.length)&&this.checkInputTypes(e)},e.prototype.checkInputTypes=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4];return!(t.dims.length<3||1!==n.dims.length||1!==r.dims.length||1!==i.dims.length||1!==o.dims.length||n.dims[0]!==t.dims[1]||r.dims[0]!==t.dims[1]||i.dims[0]!==t.dims[1]||o.dims[0]!==t.dims[1]||"float32"!==t.type&&"float64"!==t.type||"float32"!==n.type&&"float64"!==n.type||"float32"!==r.type&&"float64"!==r.type||"float32"!==i.type&&"float64"!==i.type||"float32"!==o.type&&"float64"!==o.type)},e}();t.BatchNormalization=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BinaryOp=void 0;var r=function(){function e(e,t,n){this.typeConstraint=e,this.opType=t,this.resultType=n}return e.prototype.initialize=function(e){},e.prototype.checkInputs=function(e){return!(!e||2!==e.length)&&this.checkInputTypes(e)},e.prototype.checkInputTypes=function(e){return-1!==this.typeConstraint.indexOf(e[0].type)&&e[0].type===e[1].type},e}();t.BinaryOp=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Conv=void 0;var r=function(){function e(){}return e.prototype.initialize=function(e){this.autoPad=e.getString("auto_pad","NOTSET"),this.dilations=e.getInts("dilations",[1,1]),this.group=e.getInt("group",1),this.kernelShape=e.getInts("kernel_shape",[]),this.pads=e.getInts("pads",[0,0,0,0]),this.strides=e.getInts("strides",[1,1])},e.prototype.checkInputs=function(e){if(!e||2!==e.length&&3!==e.length)return!1;if(4!==e[0].dims.length||4!==e[1].dims.length)return!1;if(e[0].dims[1]!==e[1].dims[1]*this.group)return!1;if(3===e.length&&(1!==e[2].dims.length||e[1].dims[0]!==e[2].dims[0]))return!1;var t=e[0].dims.length-2;return this.dilations.length===t&&this.strides.length===t&&this.pads.length===2*t&&(0===this.kernelShape.length||this.kernelShape.length===e[1].dims.length-2)&&this.checkInputTypes(e)},e.prototype.checkInputTypes=function(e){return"float32"===e[0].type&&"float32"===e[1].type&&(3!==e.length||"float32"===e[2].type)},e}();t.Conv=r},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s};Object.defineProperty(t,"__esModule",{value:!0}),t.matMul2d=t.matMul=t.CpuMatMul=void 0;var s=n(18),a=n(1),c=n(0),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return[u(t[0],t[1])]},t}(s.MatMul);function u(e,t){var n=o(c.MatMulUtil.preprocessInputShapes(e.dims,t.dims),2),r=n[0],i=n[1],s=[r[r.length-2],i[i.length-1]],l=c.BroadcastUtil.calcShape(r,i,!0);if(!l)throw new Error("input dimensions do not match the requirement");for(var u=c.ShapeUtil.size(l)/(s[0]*s[1]),h=new a.Tensor(l,"float64"===e.type||"float64"===t.type?"float64":"float32"),p=0,g=new Array(l.length),f=new Array(e.dims.length),m=new Array(t.dims.length),b=0;b<u;b++){g[l.length-2]=0,g[l.length-1]=0;for(var y=b,_=l.length-3;_>=0;_--)g[_]=y%l[_],y=Math.floor(y/l[_]);c.BroadcastUtil.fillIndex(g,e.dims,f),c.BroadcastUtil.fillIndex(g,t.dims,m);var v=f.length<=2?0:c.ShapeUtil.indicesToOffset(f,e.strides,l.length-2),w=m.length<=2?0:c.ShapeUtil.indicesToOffset(m,t.strides,l.length-2);d(e.floatData.subarray(v),t.floatData.subarray(w),h.floatData.subarray(p),!1,!1,1,0,s[0],s[1],r[r.length-1]),p+=s[0]*s[1]}return h}function d(e,t,n,r,i,o,s,a,c,l){return r&&i?function(e,t,n,r,i,o,s,a){for(var c=0,l=0,u=0,d=0;d<o;d++){for(var h=0;h<s;h++){for(var p=0,g=0;g<a;g++)p+=e[c]*t[l],c+=o,l+=1;c-=o*a,l-=a,n[u]=r*p+i*n[u],u++,l+=a}l-=s*a,c++}}(e,t,n,o,s,a,c,l):r?function(e,t,n,r,i,o,s,a){for(var c=0,l=0,u=0,d=0;d<o;d++){for(var h=0;h<s;h++){for(var p=0,g=0;g<a;g++)p+=e[c]*t[l],c+=o,l+=s;c-=o*a,l-=s*a,n[u]=r*p+i*n[u],u++,l++}l-=s,c++}}(e,t,n,o,s,a,c,l):i?function(e,t,n,r,i,o,s,a){for(var c=0,l=0,u=0,d=0;d<o;d++){for(var h=0;h<s;h++){for(var p=0,g=0;g<a;g++)p+=e[c]*t[l],c+=1,l+=1;c-=a,l-=a,n[u]=r*p+i*n[u],u++,l+=a}l-=s*a,c+=a}}(e,t,n,o,s,a,c,l):function(e,t,n,r,i,o,s,a){for(var c=0,l=0,u=0,d=0;d<o;d++){for(var h=0;h<s;h++){for(var p=0,g=0;g<a;g++)p+=e[c]*t[l],c+=1,l+=s;c-=a,l-=s*a,n[u]=r*p+i*n[u],u++,l++}l-=s,c+=a}}(e,t,n,o,s,a,c,l)}t.CpuMatMul=l,t.matMul=u,t.matMul2d=d},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MatMul=void 0;var r=function(){function e(){}return e.prototype.initialize=function(e){},e.prototype.checkInputs=function(e){return!(!e||2!==e.length)&&e[0].dims[e[0].dims.length-1]===e[1].dims[e[1].dims.length-2]&&this.checkInputTypes(e)},e.prototype.checkInputTypes=function(e){return!("float32"!==e[0].type&&"float64"!==e[0].type||"float32"!==e[1].type&&"float64"!==e[1].type||e[0].type!==e[1].type)},e}();t.MatMul=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Gemm=void 0;var r=function(){function e(e){this.isOptionalC=e}return e.prototype.initialize=function(e){this.transA=0!==e.getInt("transA",0),this.transB=0!==e.getInt("transB",0),this.alpha=e.getFloat("alpha",1),this.beta=e.getFloat("beta",1)},e.prototype.checkInputs=function(e){return!!e&&(!this.isOptionalC||!(e.length<2||e.length>3))&&!(!this.isOptionalC&&3!==e.length)&&(3!==e.length||1===e[2].dims.length||2===e[2].dims.length)&&this.checkInputTypes(e)},e.prototype.checkInputTypes=function(e){return!("float32"!==e[0].type&&"float64"!==e[0].type||"float32"!==e[1].type&&"float64"!==e[1].type||3===e.length&&"float32"!==e[2].type&&"float64"!==e[2].type||e[0].type!==e[1].type||3===e.length&&e[0].type!==e[2].type)},e}();t.Gemm=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.InstanceNormalization=void 0;var r=function(){function e(){}return e.prototype.initialize=function(e){this.epsilon=e.getFloat("epsilon",1e-5)},e.prototype.checkInputs=function(e){return!(!e||3!==e.length)&&this.checkInputTypes(e)},e.prototype.checkInputTypes=function(e){var t=e[0],n=e[1],r=e[2];return!(t.dims.length<3||1!==n.dims.length||1!==r.dims.length||n.dims[0]!==t.dims[1]||r.dims[0]!==t.dims[1]||"float32"!==t.type&&"float64"!==t.type||"float32"!==n.type&&"float64"!==n.type||"float32"!==r.type&&"float64"!==r.type)},e}();t.InstanceNormalization=r},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalMaxPool=t.MaxPool=t.GlobalAveragePool=t.AveragePool=void 0;var o=function(){function e(){}return e.prototype.checkInputs=function(e){return!(!e||1!==e.length)&&this.checkInputTypes(e)},e.prototype.checkInputTypes=function(e){return"float32"===e[0].type||"float64"===e[0].type},e}(),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.initialize=function(e){if(this.autoPad=e.getString("auto_pad","NOTSET"),this.kernelShape=e.getInts("kernel_shape"),this.strides=e.getInts("strides",[]),this.pads=e.getInts("pads",[]),this.countIncludePad=0!==e.getInt("count_include_pad",0),this.ceilMode=e.getInt("ceil_mode",0),0!==this.ceilMode)throw new Error("using ceil() in shape computation is not yet supported for AveragePool")},t}(o);t.AveragePool=s;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.initialize=function(e){this.countIncludePad=0!==e.getInt("count_include_pad",0)},t}(o);t.GlobalAveragePool=a;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.initialize=function(e){if(this.autoPad=e.getString("auto_pad","NOTSET"),this.kernelShape=e.getInts("kernel_shape"),this.strides=e.getInts("strides",[]),this.pads=e.getInts("pads",[]),this.ceilMode=e.getInt("ceil_mode",0),this.storageOrder=e.getInt("storage_order",0),0!==this.storageOrder)throw new Error("column major storage order is not yet supported for MaxPool");if(0!==this.ceilMode)throw new Error("using ceil() in shape computation is not yet supported for MaxPool")},t}(o);t.MaxPool=c;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.initialize=function(e){},t}(o);t.GlobalMaxPool=l},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Softmax=void 0;var r=function(){function e(){}return e.prototype.initialize=function(e){this.axis=e.getInt("axis",1)},e.prototype.checkInputs=function(e){return!(!e||1!==e.length)&&this.checkInputTypes(e)},e.prototype.checkInputTypes=function(e){return"float32"===e[0].type||"float64"===e[0].type},e}();t.Softmax=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Sum=void 0;var r=function(){function e(){}return e.prototype.initialize=function(e){},e.prototype.checkInputs=function(e){if(!e||0===e.length)return!1;for(var t=e[0].dims.length,n=1;n<e.length;n++){if(t!==e[n].dims.length)return!1;for(var r=0;r<t;r++)if(e[0].dims[r]!==e[n].dims[r])return!1}return this.checkInputTypes(e)},e.prototype.checkInputTypes=function(e){if("float32"!==e[0].type&&"float64"!==e[0].type)return!1;for(var t=1;t<e.length;t++)if(e[0].type!==e[t].type)return!1;return!0},e}();t.Sum=r},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var c,l=[],u=!1,d=-1;function h(){u&&c&&(u=!1,c.length?l=c.concat(l):d=-1,l.length&&p())}function p(){if(!u){var e=a(h);u=!0;for(var t=l.length;t;){for(c=l,l=[];++d<t;)c&&c[d].run();d=-1,t=l.length}c=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function f(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new g(e,t)),1!==l.length||u||a(p)},g.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=f,i.addListener=f,i.once=f,i.off=f,i.removeListener=f,i.removeAllListeners=f,i.emit=f,i.prependListener=f,i.prependOnceListener=f,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.env=void 0;var s=o(n(46)),a=o(n(26));t.env=new function(){this.onnx=a,this.backend=a.backend,this.platform=s,this.debug=!1}},function(e,t,n){(function(t){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=(this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t})(n(53)),s=o;("undefined"!=typeof self?self:t).onnx=s,e.exports=o}).call(this,n(8))},function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.CPU_OP_RESOLVE_RULES=void 0;var s=n(7),a=n(57),c=n(77),l=n(78),u=n(79),d=n(80),h=n(81),p=n(82),g=n(83),f=n(84),m=n(85),b=n(86),y=n(87),_=n(17),v=n(89),w=n(90),S=o(n(91)),k=n(92),I=n(93),C=n(94),E=n(95),A=n(96),x=n(97),T=n(98),O=o(n(42)),P=n(42),R=n(99),D=n(100);t.CPU_OP_RESOLVE_RULES=[["Abs","","6+",function(){return new P.CpuUnaryOp(s.NUMBER_TYPES,O.abs)}],["Acos","","7+",function(){return new P.CpuUnaryOp(s.FLOAT_TYPES,O.acos)}],["Acosh","","9+",function(){return new P.CpuUnaryOp(s.FLOAT_TYPES,O.acosh)}],["Add","","7+",function(){return new l.CpuBinaryOp(s.NUMBER_TYPES,(function(e,t){return e+t}))}],["And","","7+",function(){return new l.CpuBinaryOp(["bool"],(function(e,t){return e&&t}))}],["ArgMax","","1-11",function(){return new a.CpuArgMax}],["Asin","","7+",function(){return new P.CpuUnaryOp(s.FLOAT_TYPES,O.asin)}],["Asinh","","9+",function(){return new P.CpuUnaryOp(s.FLOAT_TYPES,O.asinh)}],["Atan","","7+",function(){return new P.CpuUnaryOp(s.FLOAT_TYPES,O.atan)}],["Atanh","","9+",function(){return new P.CpuUnaryOp(s.FLOAT_TYPES,O.atanh)}],["AveragePool","","7-10",function(){return new w.CpuAveragePool}],["BatchNormalization","","7+",function(){return new c.CpuBatchNormalization}],["Ceil","","6+",function(){return new P.CpuUnaryOp(s.FLOAT_TYPES,O.ceil)}],["Clip","","6-10",function(){return new P.CpuUnaryOp(s.FLOAT_TYPES,O.clip,O.clipInitializer)}],["Concat","","4+",function(){return new u.CpuConcat}],["Conv","","1+",function(){return new d.CpuConv}],["Cos","","7+",function(){return new P.CpuUnaryOp(s.FLOAT_TYPES,O.cos)}],["Cosh","","9+",function(){return new P.CpuUnaryOp(s.FLOAT_TYPES,O.cosh)}],["Div","","7+",function(){return new l.CpuBinaryOp(s.NUMBER_TYPES,(function(e,t){return e/t}))}],["Dropout","","7+",function(){return new h.CpuDropout}],["Elu","","6+",function(){return new P.CpuUnaryOp(s.FLOAT_TYPES,O.elu,O.eluInitializer)}],["Exp","","6+",function(){return new P.CpuUnaryOp(s.FLOAT_TYPES,O.exp)}],["Flatten","","1+",function(){return new p.CpuFlatten}],["Floor","","6+",function(){return new P.CpuUnaryOp(s.FLOAT_TYPES,O.floor)}],["Gather","","1+",function(){return new g.CpuGather}],["Gemm","","7-10",function(){return new f.CpuGemm(!1)}],["Gemm","","11+",function(){return new f.CpuGemm(!0)}],["GlobalAveragePool","","1+",function(){return new w.CpuGlobalAveragePool}],["GlobalMaxPool","","1+",function(){return new w.CpuGlobalMaxPool}],["ImageScaler","","1+",function(){return new m.CpuImageScaler}],["InstanceNormalization","","6+",function(){return new b.CpuInstanceNormalization}],["IsNaN","","9+",function(){return new P.CpuUnaryOp(s.FLOAT_TYPES,O.isNan,void 0,"bool")}],["LeakyRelu","","6+",function(){return new P.CpuUnaryOp(s.FLOAT_TYPES,O.leakyRelu,O.leakyReluInitializer)}],["Log","","6+",function(){return new P.CpuUnaryOp(s.FLOAT_TYPES,O.log)}],["LRN","","1+",function(){return new y.CpuLrn}],["MatMul","","1+",function(){return new _.CpuMatMul}],["MaxPool","","1-9",function(){return new w.CpuMaxPool}],["Mul","","7+",function(){return new l.CpuBinaryOp(s.NUMBER_TYPES,(function(e,t){return e*t}))}],["Neg","","6+",function(){return new P.CpuUnaryOp(s.NUMBER_TYPES,O.neg)}],["Not","","1+",function(){return new P.CpuUnaryOp(["bool"],O.not,void 0,"bool")}],["Or","","7+",function(){return new l.CpuBinaryOp(["bool"],(function(e,t){return e||t}))}],["PRelu","","7+",function(){return new l.CpuBinaryOp(s.NUMBER_TYPES,(function(e,t){return e>=0?e:e*t}))}],["Pad","","2-10",function(){return new v.CpuPad}],["Reciprocal","","6+",function(){return new P.CpuUnaryOp(s.FLOAT_TYPES,O.reciprocal)}],["ReduceLogSum","","1+",function(){return new S.CpuReduceLogSum}],["ReduceMax","","1+",function(){return new S.CpuReduceMax}],["ReduceMean","","1+",function(){return new S.CpuReduceMean}],["ReduceMin","","1+",function(){return new S.CpuReduceMin}],["ReduceProd","","1+",function(){return new S.CpuReduceProd}],["ReduceSum","","1+",function(){return new S.CpuReduceSum}],["ReduceSumSquare","","1+",function(){return new S.CpuReduceSumSquare}],["Relu","","6+",function(){return new P.CpuUnaryOp(s.FLOAT_TYPES,O.relu)}],["Reshape","","5+",function(){return new k.CpuReshape}],["Sigmoid","","6+",function(){return new P.CpuUnaryOp(s.FLOAT_TYPES,O.sigmoid)}],["Sign","","9+",function(){return new P.CpuUnaryOp(s.NUMBER_TYPES,O.sign)}],["Sin","","7+",function(){return new P.CpuUnaryOp(s.FLOAT_TYPES,O.sin)}],["Sinh","","9+",function(){return new P.CpuUnaryOp(s.FLOAT_TYPES,O.sinh)}],["Slice","","10+",function(){return new I.CpuSliceV10}],["Slice","","1-9",function(){return new I.CpuSlice}],["Softmax","","1+",function(){return new C.CpuSoftmax}],["Sqrt","","6+",function(){return new P.CpuUnaryOp(s.FLOAT_TYPES,O.sqrt)}],["Squeeze","","1+",function(){return new E.CpuSqueeze}],["Sub","","7+",function(){return new l.CpuBinaryOp(s.NUMBER_TYPES,(function(e,t){return e-t}))}],["Sum","","6+",function(){return new A.CpuSum}],["Tan","","7+",function(){return new P.CpuUnaryOp(s.FLOAT_TYPES,O.tan)}],["Tanh","","6+",function(){return new P.CpuUnaryOp(s.FLOAT_TYPES,O.tanh)}],["Tile","","6+",function(){return new x.CpuTile}],["Transpose","","1+",function(){return new T.CpuTranspose}],["Unsqueeze","","1+",function(){return new R.CpuUnsqueeze}],["Upsample","","7-8",function(){return new D.CpuUpsample}],["Xor","","7+",function(){return new l.CpuBinaryOp(["bool"],(function(e,t){return e^t}))}]]},function(e,t,n){e.exports=d;var r,i=n(6),o=i.LongBits,s=i.base64,a=i.utf8;function c(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function l(){}function u(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function d(){this.len=0,this.head=new c(l,0,0),this.tail=this.head,this.states=null}var h=function(){return i.Buffer?function(){return(d.create=function(){return new r})()}:function(){return new d}};function p(e,t,n){t[n]=255&e}function g(e,t){this.len=e,this.next=void 0,this.val=t}function f(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function m(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}d.create=h(),d.alloc=function(e){return new i.Array(e)},i.Array!==Array&&(d.alloc=i.pool(d.alloc,i.Array.prototype.subarray)),d.prototype._push=function(e,t,n){return this.tail=this.tail.next=new c(e,t,n),this.len+=t,this},g.prototype=Object.create(c.prototype),g.prototype.fn=function(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e},d.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new g((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},d.prototype.int32=function(e){return e<0?this._push(f,10,o.fromNumber(e)):this.uint32(e)},d.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},d.prototype.uint64=function(e){var t=o.from(e);return this._push(f,t.length(),t)},d.prototype.int64=d.prototype.uint64,d.prototype.sint64=function(e){var t=o.from(e).zzEncode();return this._push(f,t.length(),t)},d.prototype.bool=function(e){return this._push(p,1,e?1:0)},d.prototype.fixed32=function(e){return this._push(m,4,e>>>0)},d.prototype.sfixed32=d.prototype.fixed32,d.prototype.fixed64=function(e){var t=o.from(e);return this._push(m,4,t.lo)._push(m,4,t.hi)},d.prototype.sfixed64=d.prototype.fixed64,d.prototype.float=function(e){return this._push(i.float.writeFloatLE,4,e)},d.prototype.double=function(e){return this._push(i.float.writeDoubleLE,8,e)};var b=i.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var r=0;r<e.length;++r)t[n+r]=e[r]};d.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(i.isString(e)){var n=d.alloc(t=s.length(e));s.decode(e,n,0),e=n}return this.uint32(t)._push(b,t,e)},d.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(p,1,0)},d.prototype.fork=function(){return this.states=new u(this),this.head=this.tail=new c(l,0,0),this.len=0,this},d.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(l,0,0),this.len=0),this},d.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},d.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},d._configure=function(e){r=e,d.create=h(),r._configure()}},function(e,t,n){e.exports=c;var r,i=n(6),o=i.LongBits,s=i.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var l,u="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},d=function(){return i.Buffer?function(e){return(c.create=function(e){return i.Buffer.isBuffer(e)?new r(e):u(e)})(e)}:u};function h(){var e=new o(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function p(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function g(){if(this.pos+8>this.len)throw a(this,8);return new o(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}c.create=d(),c.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,c.prototype.uint32=(l=4294967295,function(){if(l=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return l;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return l}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return p(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|p(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},c.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},c.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){r=e,c.create=d(),r._configure();var t=i.Long?"toLong":"toNumber";i.merge(c.prototype,{int64:function(){return h.call(this)[t](!1)},uint64:function(){return h.call(this)[t](!0)},sint64:function(){return h.call(this).zzDecode()[t](!1)},fixed64:function(){return g.call(this)[t](!0)},sfixed64:function(){return g.call(this)[t](!1)}})}},function(e,t,n){var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.Concat=void 0;var i=function(){function e(){}return e.prototype.initialize=function(e){this.axis=e.getInt("axis")},e.prototype.checkInputs=function(e){return!(!e||e.length<1)&&this.checkInputTypes(e)},e.prototype.checkInputTypes=function(e){var t,n,i=e[0].type,o=e[0].dims.length;if("string"===i)return!1;try{for(var s=r(e),a=s.next();!a.done;a=s.next()){var c=a.value;if(c.type!==i)return!1;if(c.dims.length!==o)return!1}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return!0},e}();t.Concat=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Dropout=void 0;var r=function(){function e(){}return e.prototype.initialize=function(e){this.ratio=e.getFloat("ratio",.5),this.testMode=!0},e.prototype.checkInputs=function(e){return!(!e||1!==e.length)&&this.checkInputTypes(e)},e.prototype.checkInputTypes=function(e){return"float32"===e[0].type||"float64"===e[0].type},e}();t.Dropout=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Flatten=void 0;var r=function(){function e(){}return e.prototype.initialize=function(e){this.axis=e.getInt("axis",1)},e.prototype.checkInputs=function(e){if(!e||1!==e.length)return!1;var t=e[0].dims.length;return 0!==t&&!(this.axis<-t||this.axis>t)&&this.checkInputTypes(e)},e.prototype.checkInputTypes=function(e){return"string"!==e[0].type},e}();t.Flatten=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Gather=void 0;var r=n(7),i=function(){function e(){}return e.prototype.initialize=function(e){this.axis=e.getInt("axis",0)},e.prototype.checkInputs=function(e){if(!e||2!==e.length)return!1;var t=e[0].dims.length;return!(t<1)&&!(this.axis<-t||this.axis>t-1)&&this.checkInputTypes(e)},e.prototype.checkInputTypes=function(e){return-1!==r.NUMBER_TYPES.indexOf(e[0].type)&&("int32"===e[1].type||"int16"===e[1].type)},e}();t.Gather=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ImageScaler=void 0;var r=function(){function e(){}return e.prototype.initialize=function(e){this.scale=e.getFloat("scale"),this.bias=e.getFloats("bias")},e.prototype.checkInputs=function(e){return!(!e||1!==e.length)&&4===e[0].dims.length&&this.checkInputTypes(e)},e.prototype.checkInputTypes=function(e){return"float32"===e[0].type||"float64"===e[0].type},e}();t.ImageScaler=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Pad=void 0;var r=function(){function e(){}return e.prototype.initialize=function(e){this.mode=e.getString("mode","constant"),this.value=e.getFloat("value",0),this.pads=e.getInts("pads")},e.prototype.checkInputs=function(e){return!(!e||1!==e.length)&&this.checkInputTypes(e)},e.prototype.checkInputTypes=function(e){return"float32"===e[0].type||"float64"===e[0].type},e}();t.Pad=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ReduceBase=void 0;var r=n(7),i=function(){function e(){}return e.prototype.initialize=function(e){this.axes=e.getInts("axes",[]),this.keepDims=1===e.getInt("keepdims",1)},e.prototype.checkInputs=function(e){return!(!e||1!==e.length)&&this.checkInputTypes(e)},e.prototype.checkInputTypes=function(e){return-1!==r.NUMBER_TYPES.indexOf(e[0].type)},e}();t.ReduceBase=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Reshape=void 0;var r=function(){function e(){}return e.prototype.initialize=function(e){},e.prototype.checkInputs=function(e){return!(!e||2!==e.length||1!==e[1].dims.length)&&this.checkInputTypes(e)},e.prototype.checkInputTypes=function(e){return("float32"===e[0].type||"float64"===e[0].type)&&"int32"===e[1].type},e}();t.Reshape=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SliceV10=t.Slice=void 0;var r=function(){function e(){}return e.prototype.initialize=function(e){this.starts=e.getInts("starts"),this.ends=e.getInts("ends"),this.axes=e.getInts("axes",[])},e.prototype.checkInputs=function(e){return!(!e||1!==e.length)&&this.checkInputTypes(e)},e.prototype.checkInputTypes=function(e){return"float32"===e[0].type||"float64"===e[0].type},e}();t.Slice=r;var i=function(){function e(){}return e.prototype.initialize=function(e){},e.prototype.checkInputs=function(e){return!(!e||e.length<3||e.length>5)&&this.checkInputTypes(e)},e.prototype.checkInputTypes=function(e){return!("int32"!==e[1].type||1!==e[1].dims.length||"int32"!==e[2].type||1!==e[2].dims.length||e.length>=4&&("int32"!==e[3].type||1!==e[3].dims.length)||e.length>=5&&("int32"!==e[4].type||1!==e[4].dims.length))},e}();t.SliceV10=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Squeeze=void 0;var r=function(){function e(){}return e.prototype.initialize=function(e){this.axes=e.getInts("axes")},e.prototype.checkInputs=function(e){return!(!e||1!==e.length)&&this.checkInputTypes(e)},e.prototype.checkInputTypes=function(e){return"string"!==e[0].type},e}();t.Squeeze=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Tile=void 0;var r=n(7),i=function(){function e(){}return e.prototype.initialize=function(e){},e.prototype.checkInputs=function(e){return!(!e||2!==e.length)&&1===e[1].dims.length&&e[1].dims[0]===e[0].dims.length&&this.checkInputTypes(e)},e.prototype.checkInputTypes=function(e){return-1!==r.NUMBER_TYPES.indexOf(e[0].type)&&("int32"===e[1].type||"int16"===e[1].type)},e}();t.Tile=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Transpose=void 0;var r=function(){function e(){}return e.prototype.initialize=function(e){this.perm=e.getInts("perm",[])},e.prototype.checkInputs=function(e){return!(!e||1!==e.length)&&this.checkInputTypes(e)},e.prototype.checkInputTypes=function(e){return"float32"===e[0].type||"float64"===e[0].type},e}();t.Transpose=r},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.tanh=t.tan=t.sqrt=t.sinh=t.sin=t.sign=t.sigmoid=t.relu=t.reciprocal=t.not=t.neg=t.log=t.leakyRelu=t.leakyReluInitializer=t.isNan=t.floor=t.exp=t.elu=t.eluInitializer=t.cosh=t.cos=t.clip=t.clipInitializer=t.ceil=t.atanh=t.atan=t.asinh=t.asin=t.acosh=t.acos=t.abs=t.unaryOp=t.CpuUnaryOp=void 0;var o=n(43),s=n(1),a=function(e){function t(t,n,r,i){var o=e.call(this,t,i)||this;return o.func=n,o.attributesInitializer=r,o}return i(t,e),t.prototype.initialize=function(e){this.attributesInitializer&&(this.attributes=this.attributesInitializer(e))},t.prototype.run=function(e,t){return[c(t[0],this.func,this.attributes,this.resultType)]},t}(o.UnaryOp);function c(e,t,n,r){var i=new s.Tensor(e.dims,r||e.type);return t(e.data,i.data,n),i}t.CpuUnaryOp=a,t.unaryOp=c,t.abs=function(e,t){for(var n=0;n<e.length;n++)t[n]=Math.abs(e[n])},t.acos=function(e,t){for(var n=0;n<e.length;n++)t[n]=Math.acos(e[n])},t.acosh=function(e,t){for(var n=0;n<e.length;n++)t[n]=Math.acosh(e[n])},t.asin=function(e,t){for(var n=0;n<e.length;n++)t[n]=Math.asin(e[n])},t.asinh=function(e,t){for(var n=0;n<e.length;n++)t[n]=Math.asinh(e[n])},t.atan=function(e,t){for(var n=0;n<e.length;n++)t[n]=Math.atan(e[n])},t.atanh=function(e,t){for(var n=0;n<e.length;n++)t[n]=Math.atanh(e[n])},t.ceil=function(e,t){for(var n=0;n<e.length;n++)t[n]=Math.ceil(e[n])},t.clipInitializer=function(e){return{min:e.getFloat("min",-34028234663852886e22),max:e.getFloat("max",34028234663852886e22)}},t.clip=function(e,t,n){for(var r=n.min,i=n.max,o=0;o<e.length;o++){var s=e[o];t[o]=s<r?r:s>i?i:s}},t.cos=function(e,t){for(var n=0;n<e.length;n++)t[n]=Math.cos(e[n])},t.cosh=function(e,t){for(var n=0;n<e.length;n++)t[n]=Math.cosh(e[n])},t.eluInitializer=function(e){return e.getFloat("alpha",1)},t.elu=function(e,t,n){for(var r=n,i=0;i<e.length;i++){var o=e[i];t[i]=o>=0?o:r*(Math.exp(o)-1)}},t.exp=function(e,t){for(var n=0;n<e.length;n++)t[n]=Math.exp(e[n])},t.floor=function(e,t){for(var n=0;n<e.length;n++)t[n]=Math.floor(e[n])},t.isNan=function(e,t){for(var n=0;n<e.length;n++)t[n]=Number.isNaN(e[n])?1:0},t.leakyReluInitializer=function(e){return e.getFloat("alpha",.01)},t.leakyRelu=function(e,t,n){for(var r=n,i=0;i<e.length;i++){var o=e[i];t[i]=o>=0?o:r*o}},t.log=function(e,t){for(var n=0;n<e.length;n++)t[n]=Math.log(e[n])},t.neg=function(e,t){for(var n=0;n<e.length;n++)t[n]=-e[n]},t.not=function(e,t){for(var n=0;n<e.length;n++)t[n]=e[n]?0:1},t.reciprocal=function(e,t){for(var n=0;n<e.length;n++)t[n]=1/e[n]},t.relu=function(e,t){for(var n=0;n<e.length;n++)t[n]=Math.max(0,e[n])},t.sigmoid=function(e,t){for(var n=0;n<e.length;n++)t[n]=1/(1+Math.exp(-e[n]))},t.sign=function(e,t){for(var n=0;n<e.length;n++)t[n]=e[n]>0?1:e[n]<0?-1:0},t.sin=function(e,t){for(var n=0;n<e.length;n++)t[n]=Math.sin(e[n])},t.sinh=function(e,t){for(var n=0;n<e.length;n++)t[n]=Math.sinh(e[n])},t.sqrt=function(e,t){for(var n=0;n<e.length;n++)t[n]=Math.sqrt(e[n])},t.tan=function(e,t){for(var n=0;n<e.length;n++)t[n]=Math.tan(e[n])},t.tanh=function(e,t){for(var n=0;n<e.length;n++)t[n]=Math.tanh(e[n])}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.UnaryOp=void 0;var r=function(){function e(e,t){this.typeConstraint=e,this.resultType=t}return e.prototype.initialize=function(e){},e.prototype.checkInputs=function(e){return!(!e||1!==e.length)&&this.checkInputTypes(e)},e.prototype.checkInputTypes=function(e){return-1!==this.typeConstraint.indexOf(e[0].type)},e}();t.UnaryOp=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Unsqueeze=void 0;var r=function(){function e(){}return e.prototype.initialize=function(e){this.axes=e.getInts("axes")},e.prototype.checkInputs=function(e){return!(!e||1!==e.length)&&this.checkInputTypes(e)},e.prototype.checkInputTypes=function(e){return"string"!==e[0].type},e}();t.Unsqueeze=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Upsample=void 0;var r=function(){function e(){}return e.prototype.initialize=function(e){if(this.mode=e.getString("mode","nearest"),this.scales=e.getFloats("scales"),"nearest"!==this.mode&&"linear"!==this.mode)throw new Error("unrecognized mode: "+this.mode);if("linear"===this.mode&&2!==this.scales.length&&4!==this.scales.length)throw new Error("only support 2-D or 4-D upsampling for linear mode");this.roi=new Array(2*this.scales.length).fill(0)},e.prototype.checkInputs=function(e){return!(!e||1!==e.length)&&e[0].dims.length===this.scales.length&&this.checkInputTypes(e)},e.prototype.checkInputTypes=function(e){return"string"!==e[0].type},e}();t.Upsample=r},function(e,t,n){(function(e,r){var i;(function(){var o={function:!0,object:!0},s=o[typeof self]&&self||this,a=o[typeof t]&&t,c=o[typeof e]&&e&&!e.nodeType&&e,l=a&&c&&"object"==typeof r&&r;!l||l.global!==l&&l.window!==l&&l.self!==l||(s=l);var u=Math.pow(2,53)-1,d=/\bOpera/,h=Object.prototype,p=h.hasOwnProperty,g=h.toString;function f(e){return(e=String(e)).charAt(0).toUpperCase()+e.slice(1)}function m(e){return e=w(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:f(e)}function b(e,t){for(var n in e)p.call(e,n)&&t(e[n],n,e)}function y(e){return null==e?f(e):g.call(e).slice(8,-1)}function _(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function v(e,t){var n=null;return function(e,t){var n=-1,r=e?e.length:0;if("number"==typeof r&&r>-1&&r<=u)for(;++n<r;)t(e[n],n);else b(e,t)}(e,(function(r,i){n=t(n,r,i,e)})),n}function w(e){return String(e).replace(/^ +| +$/g,"")}var S=function e(t){var n=s,r=t&&"object"==typeof t&&"String"!=y(t);r&&(n=t,t=null);var i=n.navigator||{},o=i.userAgent||"";t||(t=o);var a,c,l,u,h,p=r?!!i.likeChrome:/\bChrome\b/.test(t)&&!/internal|\n/i.test(g.toString()),f=r?"Object":"ScriptBridgingProxyObject",S=r?"Object":"Environment",k=r&&n.java?"JavaPackage":y(n.java),I=r?"Object":"RuntimeObject",C=/\bJava/.test(k)&&n.java,E=C&&y(n.environment)==S,A=C?"a":"",x=C?"b":"",T=n.document||{},O=n.operamini||n.opera,P=d.test(P=r&&O?O["[[Class]]"]:y(O))?P:O=null,R=t,D=[],N=null,U=t==o,M=U&&O&&"function"==typeof O.version&&O.version(),j=v([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],(function(e,n){return e||RegExp("\\b"+(n.pattern||_(n))+"\\b","i").exec(t)&&(n.label||n)})),F=v(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"],(function(e,n){return e||RegExp("\\b"+(n.pattern||_(n))+"\\b","i").exec(t)&&(n.label||n)})),L=z([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),G=v({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}},(function(e,n,r){return e||(n[L]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(L)]||RegExp("\\b"+_(r)+"(?:\\b|\\w*\\d)","i").exec(t))&&r})),B=v(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "],(function(e,n){var r=n.pattern||_(n);return!e&&(e=RegExp("\\b"+r+"(?:/[\\d.]+|[ \\w.]*)","i").exec(t))&&(e=function(e,t,n){var r={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&n&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(r=r[/[\d.]+$/.exec(e)])&&(e="Windows "+r),e=String(e),t&&n&&(e=e.replace(RegExp(t,"i"),n)),m(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(e,r,n.label||n)),e}));function z(e){return v(e,(function(e,n){var r=n.pattern||_(n);return!e&&(e=RegExp("\\b"+r+" *\\d+[.\\w_]*","i").exec(t)||RegExp("\\b"+r+" *\\w+-[\\w]*","i").exec(t)||RegExp("\\b"+r+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(t))&&((e=String(n.label&&!RegExp(r,"i").test(n.label)?n.label:e).split("/"))[1]&&!/[\d.]+/.test(e[0])&&(e[0]+=" "+e[1]),n=n.label||n,e=m(e[0].replace(RegExp(r,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),e}))}function V(e){return v(e,(function(e,n){return e||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(t)||0)[1]||null}))}if(j&&(j=[j]),/\bAndroid\b/.test(B)&&!L&&(a=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(t))&&(L=w(a[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),G&&!L?L=z([G]):G&&L&&(L=L.replace(RegExp("^("+_(G)+")[-_.\\s]","i"),G+" ").replace(RegExp("^("+_(G)+")[-_.]?(\\w)","i"),G+" $2")),(a=/\bGoogle TV\b/.exec(L))&&(L=a[0]),/\bSimulator\b/i.test(t)&&(L=(L?L+" ":"")+"Simulator"),"Opera Mini"==F&&/\bOPiOS\b/.test(t)&&D.push("running in Turbo/Uncompressed mode"),"IE"==F&&/\blike iPhone OS\b/.test(t)?(G=(a=e(t.replace(/like iPhone OS/,""))).manufacturer,L=a.product):/^iP/.test(L)?(F||(F="Safari"),B="iOS"+((a=/ OS ([\d_]+)/i.exec(t))?" "+a[1].replace(/_/g,"."):"")):"Konqueror"==F&&/^Linux\b/i.test(B)?B="Kubuntu":G&&"Google"!=G&&(/Chrome/.test(F)&&!/\bMobile Safari\b/i.test(t)||/\bVita\b/.test(L))||/\bAndroid\b/.test(B)&&/^Chrome/.test(F)&&/\bVersion\//i.test(t)?(F="Android Browser",B=/\bAndroid\b/.test(B)?B:"Android"):"Silk"==F?(/\bMobi/i.test(t)||(B="Android",D.unshift("desktop mode")),/Accelerated *= *true/i.test(t)&&D.unshift("accelerated")):"UC Browser"==F&&/\bUCWEB\b/.test(t)?D.push("speed mode"):"PaleMoon"==F&&(a=/\bFirefox\/([\d.]+)\b/.exec(t))?D.push("identifying as Firefox "+a[1]):"Firefox"==F&&(a=/\b(Mobile|Tablet|TV)\b/i.exec(t))?(B||(B="Firefox OS"),L||(L=a[1])):!F||(a=!/\bMinefield\b/i.test(t)&&/\b(?:Firefox|Safari)\b/.exec(F))?(F&&!L&&/[\/,]|^[^(]+?\)/.test(t.slice(t.indexOf(a+"/")+8))&&(F=null),(a=L||G||B)&&(L||G||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(B))&&(F=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(B)?B:a)+" Browser")):"Electron"==F&&(a=(/\bChrome\/([\d.]+)\b/.exec(t)||0)[1])&&D.push("Chromium "+a),M||(M=V(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",_(F),"(?:Firefox|Minefield|NetFront)"])),(a=("iCab"==j&&parseFloat(M)>3?"WebKit":/\bOpera\b/.test(F)&&(/\bOPR\b/.test(t)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(t)&&!/^(?:Trident|EdgeHTML)$/.test(j)&&"WebKit"||!j&&/\bMSIE\b/i.test(t)&&("Mac OS"==B?"Tasman":"Trident")||"WebKit"==j&&/\bPlayStation\b(?! Vita\b)/i.test(F)&&"NetFront")&&(j=[a]),"IE"==F&&(a=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(t)||0)[1])?(F+=" Mobile",B="Windows Phone "+(/\+$/.test(a)?a:a+".x"),D.unshift("desktop mode")):/\bWPDesktop\b/i.test(t)?(F="IE Mobile",B="Windows Phone 8.x",D.unshift("desktop mode"),M||(M=(/\brv:([\d.]+)/.exec(t)||0)[1])):"IE"!=F&&"Trident"==j&&(a=/\brv:([\d.]+)/.exec(t))&&(F&&D.push("identifying as "+F+(M?" "+M:"")),F="IE",M=a[1]),U){if(u="global",h=null!=(l=n)?typeof l[u]:"number",/^(?:boolean|number|string|undefined)$/.test(h)||"object"==h&&!l[u])y(a=n.runtime)==f?(F="Adobe AIR",B=a.flash.system.Capabilities.os):y(a=n.phantom)==I?(F="PhantomJS",M=(a=a.version||null)&&a.major+"."+a.minor+"."+a.patch):"number"==typeof T.documentMode&&(a=/\bTrident\/(\d+)/i.exec(t))?(M=[M,T.documentMode],(a=+a[1]+4)!=M[1]&&(D.push("IE "+M[1]+" mode"),j&&(j[1]=""),M[1]=a),M="IE"==F?String(M[1].toFixed(1)):M[0]):"number"==typeof T.documentMode&&/^(?:Chrome|Firefox)\b/.test(F)&&(D.push("masking as "+F+" "+M),F="IE",M="11.0",j=["Trident"],B="Windows");else if(C&&(R=(a=C.lang.System).getProperty("os.arch"),B=B||a.getProperty("os.name")+" "+a.getProperty("os.version")),E){try{M=n.require("ringo/engine").version.join("."),F="RingoJS"}catch(e){(a=n.system)&&a.global.system==n.system&&(F="Narwhal",B||(B=a[0].os||null))}F||(F="Rhino")}else"object"==typeof n.process&&!n.process.browser&&(a=n.process)&&("object"==typeof a.versions&&("string"==typeof a.versions.electron?(D.push("Node "+a.versions.node),F="Electron",M=a.versions.electron):"string"==typeof a.versions.nw&&(D.push("Chromium "+M,"Node "+a.versions.node),F="NW.js",M=a.versions.nw)),F||(F="Node.js",R=a.arch,B=a.platform,M=(M=/[\d.]+/.exec(a.version))?M[0]:null));B=B&&m(B)}if(M&&(a=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(M)||/(?:alpha|beta)(?: ?\d)?/i.exec(t+";"+(U&&i.appMinorVersion))||/\bMinefield\b/i.test(t)&&"a")&&(N=/b/i.test(a)?"beta":"alpha",M=M.replace(RegExp(a+"\\+?$"),"")+("beta"==N?x:A)+(/\d+\+?/.exec(a)||"")),"Fennec"==F||"Firefox"==F&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(B))F="Firefox Mobile";else if("Maxthon"==F&&M)M=M.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(L))"Xbox 360"==L&&(B=null),"Xbox 360"==L&&/\bIEMobile\b/.test(t)&&D.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(F)&&(!F||L||/Browser|Mobi/.test(F))||"Windows CE"!=B&&!/Mobi/i.test(t))if("IE"==F&&U)try{null===n.external&&D.unshift("platform preview")}catch(e){D.unshift("embedded")}else(/\bBlackBerry\b/.test(L)||/\bBB10\b/.test(t))&&(a=(RegExp(L.replace(/ +/g," *")+"/([.\\d]+)","i").exec(t)||0)[1]||M)?(B=((a=[a,/BB10/.test(t)])[1]?(L=null,G="BlackBerry"):"Device Software")+" "+a[0],M=null):this!=b&&"Wii"!=L&&(U&&O||/Opera/.test(F)&&/\b(?:MSIE|Firefox)\b/i.test(t)||"Firefox"==F&&/\bOS X (?:\d+\.){2,}/.test(B)||"IE"==F&&(B&&!/^Win/.test(B)&&M>5.5||/\bWindows XP\b/.test(B)&&M>8||8==M&&!/\bTrident\b/.test(t)))&&!d.test(a=e.call(b,t.replace(d,"")+";"))&&a.name&&(a="ing as "+a.name+((a=a.version)?" "+a:""),d.test(F)?(/\bIE\b/.test(a)&&"Mac OS"==B&&(B=null),a="identify"+a):(a="mask"+a,F=P?m(P.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(a)&&(B=null),U||(M=null)),j=["Presto"],D.push(a));else F+=" Mobile";(a=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(t)||0)[1])&&(a=[parseFloat(a.replace(/\.(\d)$/,".0$1")),a],"Safari"==F&&"+"==a[1].slice(-1)?(F="WebKit Nightly",N="alpha",M=a[1].slice(0,-1)):M!=a[1]&&M!=(a[2]=(/\bSafari\/([\d.]+\+?)/i.exec(t)||0)[1])||(M=null),a[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(t)||0)[1],537.36==a[0]&&537.36==a[2]&&parseFloat(a[1])>=28&&"WebKit"==j&&(j=["Blink"]),U&&(p||a[1])?(j&&(j[1]="like Chrome"),a=a[1]||((a=a[0])<530?1:a<532?2:a<532.05?3:a<533?4:a<534.03?5:a<534.07?6:a<534.1?7:a<534.13?8:a<534.16?9:a<534.24?10:a<534.3?11:a<535.01?12:a<535.02?"13+":a<535.07?15:a<535.11?16:a<535.19?17:a<536.05?18:a<536.1?19:a<537.01?20:a<537.11?"21+":a<537.13?23:a<537.18?24:a<537.24?25:a<537.36?26:"Blink"!=j?"27":"28")):(j&&(j[1]="like Safari"),a=(a=a[0])<400?1:a<500?2:a<526?3:a<533?4:a<534?"4+":a<535?5:a<537?6:a<538?7:a<601?8:a<602?9:a<604?10:a<606?11:a<608?12:"12"),j&&(j[1]+=" "+(a+="number"==typeof a?".x":/[.+]/.test(a)?"":"+")),"Safari"==F&&(!M||parseInt(M)>45)?M=a:"Chrome"==F&&/\bHeadlessChrome/i.test(t)&&D.unshift("headless")),"Opera"==F&&(a=/\bzbov|zvav$/.exec(B))?(F+=" ",D.unshift("desktop mode"),"zvav"==a?(F+="Mini",M=null):F+="Mobile",B=B.replace(RegExp(" *"+a+"$"),"")):"Safari"==F&&/\bChrome\b/.exec(j&&j[1])?(D.unshift("desktop mode"),F="Chrome Mobile",M=null,/\bOS X\b/.test(B)?(G="Apple",B="iOS 4.3+"):B=null):/\bSRWare Iron\b/.test(F)&&!M&&(M=V("Chrome")),M&&0==M.indexOf(a=/[\d.]+$/.exec(B))&&t.indexOf("/"+a+"-")>-1&&(B=w(B.replace(a,""))),B&&-1!=B.indexOf(F)&&!RegExp(F+" OS").test(B)&&(B=B.replace(RegExp(" *"+_(F)+" *"),"")),j&&!/\b(?:Avant|Nook)\b/.test(F)&&(/Browser|Lunascape|Maxthon/.test(F)||"Safari"!=F&&/^iOS/.test(B)&&/\bSafari\b/.test(j[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(F)&&j[1])&&(a=j[j.length-1])&&D.push(a),D.length&&(D=["("+D.join("; ")+")"]),G&&L&&L.indexOf(G)<0&&D.push("on "+G),L&&D.push((/^on /.test(D[D.length-1])?"":"on ")+L),B&&(a=/ ([\d.+]+)$/.exec(B),c=a&&"/"==B.charAt(B.length-a[0].length-1),B={architecture:32,family:a&&!c?B.replace(a[0],""):B,version:a?a[1]:null,toString:function(){var e=this.version;return this.family+(e&&!c?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(a=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(R))&&!/\bi686\b/i.test(R)?(B&&(B.architecture=64,B.family=B.family.replace(RegExp(" *"+a),"")),F&&(/\bWOW64\b/i.test(t)||U&&/\w(?:86|32)$/.test(i.cpuClass||i.platform)&&!/\bWin64; x64\b/i.test(t))&&D.unshift("32-bit")):B&&/^OS X/.test(B.family)&&"Chrome"==F&&parseFloat(M)>=39&&(B.architecture=64),t||(t=null);var q={};return q.description=t,q.layout=j&&j[0],q.manufacturer=G,q.name=F,q.prerelease=N,q.product=L,q.ua=t,q.version=F&&M,q.os=B||{architecture:null,family:null,version:null,toString:function(){return"null"}},q.parse=e,q.toString=function(){return this.description||""},q.version&&D.unshift(M),q.name&&D.unshift(F),B&&F&&(B!=String(B).split(" ")[0]||B!=F.split(" ")[0]&&!L)&&D.push(L?"("+B+")":"on "+B),D.length&&(q.description=D.join(" ")),q}();s.platform=S,void 0===(i=function(){return S}.call(t,n,t,e))||(e.exports=i)}).call(this)}).call(this,n(102)(e),n(8))},function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var s=o>=0?arguments[o]:e.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(t=s+"/"+t,i="/"===s.charAt(0))}return(i?"/":"")+(t=n(r(t.split("/"),(function(e){return!!e})),!i).join("/"))||"."},t.normalize=function(e){var o=t.isAbsolute(e),s="/"===i(e,-1);return(e=n(r(e.split("/"),(function(e){return!!e})),!o).join("/"))||o||(e="."),e&&s&&(e+="/"),(o?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var i=r(e.split("/")),o=r(n.split("/")),s=Math.min(i.length,o.length),a=s,c=0;c<s;c++)if(i[c]!==o[c]){a=c;break}var l=[];for(c=a;c<i.length;c++)l.push("..");return(l=l.concat(o.slice(a))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,i=!0,o=e.length-1;o>=1;--o)if(47===(t=e.charCodeAt(o))){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var n=function(e){"string"!=typeof e&&(e+="");var t,n=0,r=-1,i=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!i){n=t+1;break}}else-1===r&&(i=!1,r=t+1);return-1===r?"":e.slice(n,r)}(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,n=0,r=-1,i=!0,o=0,s=e.length-1;s>=0;--s){var a=e.charCodeAt(s);if(47!==a)-1===r&&(i=!1,r=s+1),46===a?-1===t?t=s:1!==o&&(o=1):-1!==t&&(o=-1);else if(!i){n=s+1;break}}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===n+1?"":e.slice(t,r)};var i=function(e,t,n){return e.substr(t,n)}}).call(this,n(24))},function(e,t){},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Clip=void 0;var r=function(){function e(){}return e.prototype.initialize=function(e){this.min=e.getFloat("min",-34028234663852886e22),this.max=e.getFloat("max",34028234663852886e22)},e.prototype.checkInputs=function(e){return!(!e||1!==e.length)&&this.checkInputTypes(e)},e.prototype.checkInputTypes=function(e){return"float32"===e[0].type||"float64"===e[0].type},e}();t.Clip=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getPackedShape=void 0,t.getPackedShape=function(e){var t=e.length;return e.slice(0,t-1).concat(e[t-1]/4)}},function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0}),t.Tensor=void 0;var c=n(1),l=o(n(52)),u=function(){function e(e,t,n){var r=n||[e.length];if(0===e.length)throw new RangeError("Tensor data should contain at least one element.");Array.isArray(e)&&"string"!==t?"float32"===t?this.data=Float32Array.from(e):"bool"===t?this.data=new Uint8Array(e):"int32"===t&&(this.data=Int32Array.from(e)):this.data=e,this.dims=r,this.type=t,this.internalTensor=new c.Tensor(this.dims,this.type,void 0,void 0,this.data),this.size=this.internalTensor.size}return e.prototype.get=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=[];if("number"==typeof e)i=a([e],n);else{if(!e)throw new Error("Input index array is undefined. ");i=e}if(l.validateIndices(i),i.length!==this.dims.length)throw new RangeError("Input index array dims don't match the tensor dims.");i.forEach((function(e,n){if(e>=t.dims[n])throw new RangeError("Input index array dims don't match the tensor dims.")}));var o=this.internalTensor.get(i);return"bool"===this.type?1===o:o},e.prototype.set=function(e,t){for(var n=this,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];l.matchElementType(this.type,e);var o=[];if("number"==typeof t)o=a([t],r);else{if(!t)throw new Error("Input index array is undefined.");o=t}if(l.validateIndices(o),o.length!==this.dims.length)throw new RangeError("Input index array dims don't match the tensor dims.");o.forEach((function(e,t){if(e>=n.dims[t])throw new RangeError("Input index array dims don't match the tensor dims.")})),"boolean"==typeof e?this.internalTensor.set(o,e?1:0):this.internalTensor.set(o,e)},e}();t.Tensor=u},function(e,t,n){var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.validateIndices=t.matchElementType=t.toInternalTensor=t.fromInternalTensor=void 0;var i=n(1),o=n(51);t.fromInternalTensor=function(e){switch(e.type){case"bool":return new o.Tensor(new Uint8Array(e.integerData),"bool",e.dims);case"float32":return new o.Tensor(e.floatData,"float32",e.dims);case"float64":return new o.Tensor(new Float32Array(e.floatData),"float32",e.dims);case"string":return new o.Tensor(e.stringData,"string",e.dims);case"int8":return new o.Tensor(new Int32Array(e.integerData),"int32",e.dims);case"int32":return new o.Tensor(e.integerData,"int32",e.dims);default:throw new TypeError("Tensor type is not supported. ")}},t.toInternalTensor=function(e){return new i.Tensor(e.dims,e.type,void 0,void 0,e.data)},t.matchElementType=function(e,t){switch(typeof t){case"string":if("string"!==e)throw new TypeError("The new element type doesn't match the tensor data type.");break;case"number":if("float32"!==e&&"int32"!==e)throw new TypeError("The new element type doesn't match the tensor data type.");if("float32"===e&&Number.isInteger(t))throw new TypeError("The new element type doesn't match the tensor data type.");if("int32"===e&&!Number.isInteger(t))throw new TypeError("The new element type doesn't match the tensor data type.");break;case"boolean":if("bool"!==e)throw new TypeError("The new element type doesn't match the tensor data type.");break;default:throw new TypeError("The new element type is not supported.")}},t.validateIndices=function(e){var t,n;if(e.length<0||e.length>6)throw new RangeError("Only rank 0 to 6 is supported for tensor shape.");try{for(var i=r(e),o=i.next();!o.done;o=i.next()){var s=o.value;if(!Number.isInteger(s))throw new TypeError("Invalid index: "+s+" is not an integer");if(s<0||s>2147483647)throw new TypeError("Invalid index: length "+s+" is not allowed")}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}},function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.ENV=t.backend=void 0;var o=n(54),s=n(101),a=n(119),c=n(168);i(n(169),t),i(n(170),t),i(n(171),t),i(n(172),t),t.backend={cpu:new o.CpuBackend,wasm:new s.WasmBackend,webgl:new a.WebGLBackend},t.ENV=c.envImpl},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CpuBackend=void 0;var r=n(55),i=function(){function e(){}return e.prototype.initialize=function(){return!0},e.prototype.createSessionHandler=function(e){return new r.CpuSessionHandler(this,e)},e.prototype.dispose=function(){},e}();t.CpuBackend=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CpuSessionHandler=void 0;var r=n(11),i=n(56),o=n(27),s=function(){function e(e,t){this.backend=e,this.context=t}return e.prototype.createInferenceHandler=function(){return new i.CpuInferenceHandler(this,this.context.profiler)},e.prototype.dispose=function(){},e.prototype.resolve=function(e,t){var n=r.resolveOperator(e,t,o.CPU_OP_RESOLVE_RULES);return n.initialize(e.attributes),n},e}();t.CpuSessionHandler=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CpuInferenceHandler=void 0;var r=function(){function e(e,t){this.session=e,this.profiler=t}return e.prototype.dispose=function(){},e}();t.CpuInferenceHandler=r},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.argMax=t.CpuArgMax=void 0;var o=n(58),s=n(1),a=n(0),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return[l(t[0],this.axis,this.keepDims)]},t}(o.ArgMax);function l(e,t,n){var r=e.dims?e.dims.length:1;t=a.ShapeUtil.normalizeAxis(t,r);for(var i=a.ReduceUtil.calcReduceShape(e.dims,[t],!0),o=e.data,c=new Int32Array(a.ShapeUtil.size(i)),l=a.ShapeUtil.sizeFromDimension(e.dims,t+1),u=a.ShapeUtil.computeStrides(i),d=a.ShapeUtil.computeStrides(e.dims),h=new Array(e.dims.length),p=0;p<c.length;p++){var g=a.ShapeUtil.offsetToIndices(p,u);a.BroadcastUtil.fillIndex(g,e.dims,h);for(var f=a.ShapeUtil.indicesToOffset(h,d),m=e.data[f],b=0,y=0;y<e.dims[t];++y){var _=o[f+y*l];_>m&&(m=_,b=y)}c[p]=b}return new s.Tensor(n?i:a.ReduceUtil.calcReduceShape(e.dims,[t],n),"int32",void 0,void 0,c)}t.CpuArgMax=c,t.argMax=l},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ArgMax=void 0;var r=n(7),i=function(){function e(){}return e.prototype.initialize=function(e){this.axis=e.getInt("axis",0),this.keepDims=1===e.getInt("keepdims",1)},e.prototype.checkInputs=function(e){return!(!e||1!==e.length)&&this.checkInputTypes(e)},e.prototype.checkInputTypes=function(e){return-1!==r.NUMBER_TYPES.indexOf(e[0].type)},e}();t.ArgMax=i},function(e,t,n){t.byteLength=function(e){var t=l(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=l(e),s=r[0],a=r[1],c=new o(function(e,t,n){return 3*(t+n)/4-n}(0,s,a)),u=0,d=a>0?s-4:s;for(n=0;n<d;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;return 2===a&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,c[u++]=255&t),1===a&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t),c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(u(e,s,s+16383>a?a:s+16383));return 1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=s.length;a<c;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function u(e,t,n){for(var i,o,s=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,c=(1<<a)-1,l=c>>1,u=-7,d=n?i-1:0,h=n?-1:1,p=e[t+d];for(d+=h,o=p&(1<<-u)-1,p>>=-u,u+=a;u>0;o=256*o+e[t+d],d+=h,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=r;u>0;s=256*s+e[t+d],d+=h,u-=8);if(0===o)o=1-l;else{if(o===c)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),o-=l}return(p?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,c,l=8*o-i-1,u=(1<<l)-1,d=u>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,g=r?1:-1,f=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+d>=1?h/c:h*Math.pow(2,1-d))*c>=2&&(s++,c/=2),s+d>=u?(a=0,s=u):s+d>=1?(a=(t*c-1)*Math.pow(2,i),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;e[n+p]=255&a,p+=g,a/=256,i-=8);for(s=s<<i|a,l+=i;l>0;e[n+p]=255&s,p+=g,s/=256,l-=8);e[n+p-g]|=128*f}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){e.exports=n(63)},function(e,t,n){var r=t;function i(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=n(28),r.BufferWriter=n(72),r.Reader=n(29),r.BufferReader=n(73),r.util=n(6),r.rpc=n(74),r.roots=n(76),r.configure=i,i()},function(e,t,n){e.exports=function(e,t){for(var n=new Array(arguments.length-1),r=0,i=2,o=!0;i<arguments.length;)n[r++]=arguments[i++];return new Promise((function(i,s){n[r]=function(e){if(o)if(o=!1,e)s(e);else{for(var t=new Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];i.apply(null,t)}};try{e.apply(t||null,n)}catch(e){o&&(o=!1,s(e))}}))}},function(e,t,n){var r=t;r.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var i=new Array(64),o=new Array(123),s=0;s<64;)o[i[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;r.encode=function(e,t,n){for(var r,o=null,s=[],a=0,c=0;t<n;){var l=e[t++];switch(c){case 0:s[a++]=i[l>>2],r=(3&l)<<4,c=1;break;case 1:s[a++]=i[r|l>>4],r=(15&l)<<2,c=2;break;case 2:s[a++]=i[r|l>>6],s[a++]=i[63&l],c=0}a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0)}return c&&(s[a++]=i[r],s[a++]=61,1===c&&(s[a++]=61)),o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))},r.decode=function(e,t,n){for(var r,i=n,s=0,a=0;a<e.length;){var c=e.charCodeAt(a++);if(61===c&&s>1)break;if(void 0===(c=o[c]))throw Error("invalid encoding");switch(s){case 0:r=c,s=1;break;case 1:t[n++]=r<<2|(48&c)>>4,r=c,s=2;break;case 2:t[n++]=(15&r)<<4|(60&c)>>2,r=c,s=3;break;case 3:t[n++]=(3&r)<<6|c,s=0}}if(1===s)throw Error("invalid encoding");return n-i},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},function(e,t,n){function r(){this._listeners={}}e.exports=r,r.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},r.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var n=this._listeners[e],r=0;r<n.length;)n[r].fn===t?n.splice(r,1):++r;return this},r.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,n)}return this}},function(e,t,n){function r(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),r=128===n[3];function i(e,r,i){t[0]=e,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3]}function o(e,r,i){t[0]=e,r[i]=n[3],r[i+1]=n[2],r[i+2]=n[1],r[i+3]=n[0]}function s(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],t[0]}function a(e,r){return n[3]=e[r],n[2]=e[r+1],n[1]=e[r+2],n[0]=e[r+3],t[0]}e.writeFloatLE=r?i:o,e.writeFloatBE=r?o:i,e.readFloatLE=r?s:a,e.readFloatBE=r?a:s}():function(){function t(e,t,n,r){var i=t<0?1:0;if(i&&(t=-t),0===t)e(1/t>0?0:2147483648,n,r);else if(isNaN(t))e(2143289344,n,r);else if(t>34028234663852886e22)e((i<<31|2139095040)>>>0,n,r);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,n,r);else{var o=Math.floor(Math.log(t)/Math.LN2);e((i<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,n,r)}}function n(e,t,n){var r=e(t,n),i=2*(r>>31)+1,o=r>>>23&255,s=8388607&r;return 255===o?s?NaN:i*(1/0):0===o?1401298464324817e-60*i*s:i*Math.pow(2,o-150)*(s+8388608)}e.writeFloatLE=t.bind(null,i),e.writeFloatBE=t.bind(null,o),e.readFloatLE=n.bind(null,s),e.readFloatBE=n.bind(null,a)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),r=128===n[7];function i(e,r,i){t[0]=e,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3],r[i+4]=n[4],r[i+5]=n[5],r[i+6]=n[6],r[i+7]=n[7]}function o(e,r,i){t[0]=e,r[i]=n[7],r[i+1]=n[6],r[i+2]=n[5],r[i+3]=n[4],r[i+4]=n[3],r[i+5]=n[2],r[i+6]=n[1],r[i+7]=n[0]}function s(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],n[4]=e[r+4],n[5]=e[r+5],n[6]=e[r+6],n[7]=e[r+7],t[0]}function a(e,r){return n[7]=e[r],n[6]=e[r+1],n[5]=e[r+2],n[4]=e[r+3],n[3]=e[r+4],n[2]=e[r+5],n[1]=e[r+6],n[0]=e[r+7],t[0]}e.writeDoubleLE=r?i:o,e.writeDoubleBE=r?o:i,e.readDoubleLE=r?s:a,e.readDoubleBE=r?a:s}():function(){function t(e,t,n,r,i,o){var s=r<0?1:0;if(s&&(r=-r),0===r)e(0,i,o+t),e(1/r>0?0:2147483648,i,o+n);else if(isNaN(r))e(0,i,o+t),e(2146959360,i,o+n);else if(r>17976931348623157e292)e(0,i,o+t),e((s<<31|2146435072)>>>0,i,o+n);else{var a;if(r<22250738585072014e-324)e((a=r/5e-324)>>>0,i,o+t),e((s<<31|a/4294967296)>>>0,i,o+n);else{var c=Math.floor(Math.log(r)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(a=r*Math.pow(2,-c))>>>0,i,o+t),e((s<<31|c+1023<<20|1048576*a&1048575)>>>0,i,o+n)}}}function n(e,t,n,r,i){var o=e(r,i+t),s=e(r,i+n),a=2*(s>>31)+1,c=s>>>20&2047,l=4294967296*(1048575&s)+o;return 2047===c?l?NaN:a*(1/0):0===c?5e-324*a*l:a*Math.pow(2,c-1075)*(l+4503599627370496)}e.writeDoubleLE=t.bind(null,i,0,4),e.writeDoubleBE=t.bind(null,o,4,0),e.readDoubleLE=n.bind(null,s,0,4),e.readDoubleBE=n.bind(null,a,4,0)}(),e}function i(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function o(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function s(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function a(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=r(r)},function(module,exports,__webpack_require__){function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},function(e,t,n){var r=t;r.length=function(e){for(var t=0,n=0,r=0;r<e.length;++r)(n=e.charCodeAt(r))<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&e.charCodeAt(r+1))?(++r,t+=4):t+=3;return t},r.read=function(e,t,n){if(n-t<1)return"";for(var r,i=null,o=[],s=0;t<n;)(r=e[t++])<128?o[s++]=r:r>191&&r<224?o[s++]=(31&r)<<6|63&e[t++]:r>239&&r<365?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[s++]=55296+(r>>10),o[s++]=56320+(1023&r)):o[s++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),s=0);return i?(s&&i.push(String.fromCharCode.apply(String,o.slice(0,s))),i.join("")):String.fromCharCode.apply(String,o.slice(0,s))},r.write=function(e,t,n){for(var r,i,o=n,s=0;s<e.length;++s)(r=e.charCodeAt(s))<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&56320==(64512&(i=e.charCodeAt(s+1)))?(r=65536+((1023&r)<<10)+(1023&i),++s,t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128);return n-o}},function(e,t,n){e.exports=function(e,t,n){var r=n||8192,i=r>>>1,o=null,s=r;return function(n){if(n<1||n>i)return e(n);s+n>r&&(o=e(r),s=0);var a=t.call(o,s,s+=n);return 7&s&&(s=1+(7|s)),a}}},function(e,t,n){e.exports=i;var r=n(6);function i(e,t){this.lo=e>>>0,this.hi=t>>>0}var o=i.zero=new i(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var s=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(e){if(0===e)return o;var t=e<0;t&&(e=-e);var n=e>>>0,r=(e-n)/4294967296>>>0;return t&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new i(n,r)},i.from=function(e){if("number"==typeof e)return i.fromNumber(e);if(r.isString(e)){if(!r.Long)return i.fromNumber(parseInt(e,10));e=r.Long.fromString(e)}return e.low||e.high?new i(e.low>>>0,e.high>>>0):o},i.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(e){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;i.fromHash=function(e){return e===s?o:new i((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},i.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},i.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}},function(e,t,n){e.exports=o;var r=n(28);(o.prototype=Object.create(r.prototype)).constructor=o;var i=n(6);function o(){r.call(this)}function s(e,t,n){e.length<40?i.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}o._configure=function(){o.alloc=i._Buffer_allocUnsafe,o.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var r=0;r<e.length;)t[n++]=e[r++]}},o.prototype.bytes=function(e){i.isString(e)&&(e=i._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(o.writeBytesBuffer,t,e),this},o.prototype.string=function(e){var t=i.Buffer.byteLength(e);return this.uint32(t),t&&this._push(s,t,e),this},o._configure()},function(e,t,n){e.exports=o;var r=n(29);(o.prototype=Object.create(r.prototype)).constructor=o;var i=n(6);function o(e){r.call(this,e)}o._configure=function(){i.Buffer&&(o.prototype._slice=i.Buffer.prototype.slice)},o.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},o._configure()},function(e,t,n){t.Service=n(75)},function(e,t,n){e.exports=i;var r=n(6);function i(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(i.prototype=Object.create(r.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function e(t,n,i,o,s){if(!o)throw TypeError("request must be specified");var a=this;if(!s)return r.asPromise(e,a,t,n,i,o);if(a.rpcImpl)try{return a.rpcImpl(t,n[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function(e,n){if(e)return a.emit("error",e,t),s(e);if(null!==n){if(!(n instanceof i))try{n=i[a.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return a.emit("error",e,t),s(e)}return a.emit("data",n,t),s(null,n)}a.end(!0)}))}catch(e){return a.emit("error",e,t),void setTimeout((function(){s(e)}),0)}else setTimeout((function(){s(Error("already ended"))}),0)},i.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(e,t,n){e.exports={}},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.batchNormalization=t.CpuBatchNormalization=void 0;var o=n(14),s=n(1),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return[c(t[0],t[1],t[2],t[3],t[4],this.epsilon,this.momentum,this.spatial)]},t}(o.BatchNormalization);function c(e,t,n,r,i,o,a,c){for(var l=e.dims,u=l[0],d=l[1],h=1,p=2;p<l.length;p++)h*=l[p];for(var g=new s.Tensor(e.dims,e.type),f=e.floatData,m=g.floatData,b=t.numberData,y=n.numberData,_=r.numberData,v=i.numberData,w=0;w<u*d;w++){var S=w*h;for(p=0;p<h;p++)m[S+p]=b[w%d]*((f[S+p]-_[w%d])/Math.sqrt(v[w%d]+o))+y[w%d]}return g}t.CpuBatchNormalization=a,t.batchNormalization=c},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.CpuBinaryOp=void 0;var o=n(15),s=n(0),a=function(e){function t(t,n,r,i){var o=e.call(this,t,r,i)||this;return o.opLambda=n,o}return i(t,e),t.prototype.initialize=function(e){if(!this.opType&&!this.opLambda)throw new Error("Both opType and opLambda cannot be missing for a binary op");if(!this.opLambda)throw this.opType,new Error("Binary op could not be initialized. Missing op lambda.")},t.prototype.run=function(e,t){return[function(e,t,n,r,i){var o=s.BroadcastUtil.calc(e,t,n,!1,i);if(!o)throw new Error("not broadcastable");return o}(t[0],t[1],this.opLambda,0,this.resultType)]},t}(o.BinaryOp);t.CpuBinaryOp=a},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&o(t,e,n);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.concat=t.CpuConcat=void 0;var c=n(30),l=n(1),u=a(n(0)),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return[h(t,this.axis)]},t}(c.Concat);function h(e,t){var n=e[0],r=n.dims;if(t>=r.length||t<-1*r.length)throw new Error("axis specified for concat doesn't match input dimensionality");t<0&&(t=r.length+t);for(var i=r[t],o=new Array(r.length),s=1;s<e.length;s++)for(var a=(m=e[s]).dims,c=0;c<r.length;c++){if(c===t)i+=a[c];else if(r[c]!==a[c])throw new Error("non concat dimensions must match");o[c]=a[c]}o[t]=i;var d=new l.Tensor(o,n.type),h=d.numberData,p=1;for(s=o.length-1;s>=t;s--)p*=o[s];for(var g=0,f=0;f<e.length;f++){var m,b=1;for(s=(m=e[f]).dims.length-1;s>=t;s--)b*=m.dims[s];for(var y=m.numberData,_=u.ShapeUtil.size(m.dims),v=g,w=(s=0,0);s<_;s++)h[v+s]=y[s],++w===b&&(v+=p-b,w=0);g+=b}return d}t.CpuConcat=d,t.concat=h},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.conv2d=t.CpuConv=void 0;var o=n(16),s=n(1),a=n(0),c=n(17),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){var n=t[0],r=t[1],i=3===t.length?t[2]:void 0;if(0===this.kernelShape.length)for(var o=t[1].dims,c=2;c<o.length;++c)this.kernelShape.push(o[c]);var l=a.PoolConvUtil.computeConvOutputShape(n.dims,r.dims,this.strides,this.dilations,this.kernelShape,this.pads,this.autoPad),d=new s.Tensor(l,n.type);return u(d,n,r,i,this.dilations,this.group,this.pads,this.strides),[d]},t}(o.Conv);function u(e,t,n,r,i,o,s,a){for(var l=t.dims[0],u=t.dims[1],h=t.dims[2],p=t.dims[3],g=n.dims[0],f=n.dims[1],m=n.dims[2],b=n.dims[3],y=g*f*m*b,_=[m,b],v=e.dims[0],w=e.dims[1],S=e.dims[2],k=e.dims[3],I=S*k,C=u/o*(h*p),E=v*w*S*k/v/o,A=y/o,x=u/o*(_[0]*_[1]),T=new Float32Array(x*I),O=0;O<l;++O){for(var P=0,R=0,D=0;D<o;++D)d(t.floatData.subarray(P+D*C),T,u/o,h,p,_[0],_[1],i[0],i[1],s[0],s[1],s[2],s[3],a[0],a[1]),c.matMul2d(n.floatData.subarray(D*A),T,e.floatData.subarray(R+D*E),!1,!1,1,0,g/o,I,x);P+=C*o,R+=E*o}if(r)for(var N=r.floatData,U=e.floatData,M=e.dims[0],j=e.dims[1],F=e.dims[2]*e.dims[3],L=j*F,G=0;G<M;++G)for(var B=0;B<j;++B)for(var z=G*L+B*F,V=0;V<F;++V)U[z+V]+=N[B]}function d(e,t,n,r,i,o,s,a,c,l,u,d,h,p,g){var f=1+~~((r+d+l-(a*(o-1)+1))/p),m=1+~~((i+u+h-(c*(s-1)+1))/g);if(1!==a||1!==c||0!==u||0!==h||0!==l||0!==d)for(var b=1+~~((r+l+d-(a*(o-1)+1))/p),y=1+~~((i+u+h-(c*(s-1)+1))/g),_=n*o*s,v=0;v<_;++v)for(var w=v%s,S=~~(v/s)%o,k=~~(v/(o*s)),I=0;I<b;++I)for(var C=0;C<y;++C){var E=I*p-l+S*a,A=C*g-u+w*c;t[(v*b+I)*y+C]=E>=0&&E<r&&A>=0&&A<i?e[(k*r+E)*i+A]:0}else for(var x=0;x<n*o*s;x++)for(var T=~~(x/(o*s)),O=x%(o*s),P=~~(O/s),R=O%s,D=T*(o*s*f*m)+P*(s*f*m)+R*(f*m),N=T*(r*i),U=0;U<f;U++){var M=U*p+P,j=R;if(1===g)t.set(e.subarray(N+M*i+j,N+M*i+j+m),D+U*m);else for(var F=0;F<m;F++)t[D+(U*m+F)]=e[N+(M*i+j+F*g)]}}t.CpuConv=l,t.conv2d=u},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.dropout=t.CpuDropout=void 0;var o=n(31),s=n(1),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return[c(t[0],this.ratio,this.testMode)]},t}(o.Dropout);function c(e,t,n){if(!n)throw new Error("only test mode is supported");var r=new s.Tensor(e.dims,e.type),i=e.floatData;return r.numberData.set(i),r}t.CpuDropout=a,t.dropout=c},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.flatten=t.CpuFlatten=void 0;var o=n(32),s=n(1),a=n(0),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return[l(t[0],this.axis)]},t}(o.Flatten);function l(e,t){var n=a.ShapeUtil.flattenShape(e.dims,t),r=new s.Tensor(n,e.type),i=e.numberData;return r.numberData.set(i),r}t.CpuFlatten=c,t.flatten=l},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.gather=t.CpuGather=void 0;var o=n(33),s=n(1),a=n(0),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return[l(t[0],t[1],this.axis)]},t}(o.Gather);function l(e,t,n){n=a.ShapeUtil.normalizeAxis(n,e.dims.length);var r=e.dims.slice(),i=r.slice(),o=t.data;i[n]=o.length;for(var c=a.ShapeUtil.computeStrides(r),l=a.ShapeUtil.computeStrides(i),u=new s.Tensor(i,e.type).numberData,d=e.data,h=0;h<u.length;++h){var p=a.ShapeUtil.offsetToIndices(h,l),g=p.slice(),f=o[p[n]];g[n]=f<0?f+r[n]:f;var m=a.ShapeUtil.indicesToOffset(g,c);u[h]=d[m]}var b=r.slice(0,n).concat(t.dims).concat(r.slice(n+1));return new s.Tensor(b,e.type,void 0,void 0,u)}t.CpuGather=c,t.gather=l},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&o(t,e,n);return s(t,e),t},c=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s};Object.defineProperty(t,"__esModule",{value:!0}),t.gemm=t.CpuGemm=void 0;var l=n(19),u=n(1),d=a(n(0)),h=n(17),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return[g(t[0],t[1],this.alpha,this.beta,this.transA,this.transB,3===t.length?t[2]:void 0)]},t}(l.Gemm);function g(e,t,n,r,i,o,s){var a=c(d.GemmUtil.getShapeOfGemmResult(e.dims,i,t.dims,o,null==s?void 0:s.dims),3),l=a[0],p=a[1],g=a[2],f=new u.Tensor([l,p],e.type);if(s&&d.BroadcastUtil.calc(f,s,(function(e,t){return t}),!0)!==f)throw new Error("tensor C is not broadcastable to [M,N]");return h.matMul2d(e.floatData,t.floatData,f.floatData,i,o,n,r,l,p,g),f}t.CpuGemm=p,t.gemm=g},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s};Object.defineProperty(t,"__esModule",{value:!0}),t.imageScaler=t.CpuImageScaler=void 0;var s=n(34),a=n(1),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return[l(t[0],this.bias,this.scale)]},t}(s.ImageScaler);function l(e,t,n){for(var r=o(e.dims,4),i=r[0],s=r[1],c=r[2],l=r[3],u=new a.Tensor([i,s,c,l],e.type),d=e.floatData,h=u.floatData,p=0;p<i*s;p++)for(var g=0;g<c*l;g++){var f=p*c*l+g;h[f]=d[f]*n+t[p%s]}return u}t.CpuImageScaler=c,t.imageScaler=l},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.instanceNormalization=t.CpuInstanceNormalization=void 0;var o=n(20),s=n(1),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return[c(t[0],t[1],t[2],this.epsilon)]},t}(o.InstanceNormalization);function c(e,t,n,r){for(var i=e.dims,o=i[0],a=i[1],c=1,l=2;l<i.length;l++)c*=i[l];for(var u,d,h,p,g,f,m=new s.Tensor(e.dims,e.type),b=e.floatData,y=m.floatData,_=t.numberData,v=n.numberData,w=0;w<o*a;w++){for(g=(p=w*c)+c,f=w%a,u=0,l=p;l<g;++l)u+=b[l];for(d=u/c,u=0,l=p;l<g;++l)u+=Math.pow(b[l]-d,2);for(h=u/c,l=p;l<g;++l)y[l]=_[f]*((b[l]-d)/Math.sqrt(h+r))+v[f]}return m}t.CpuInstanceNormalization=a,t.instanceNormalization=c},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&o(t,e,n);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.lrn=t.CpuLrn=void 0;var c=n(88),l=n(1),u=a(n(0)),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return[h(t[0],this.alpha,this.beta,this.bias,this.size)]},t}(c.Lrn);function h(e,t,n,r,i){for(var o=e.dims[0],s=e.dims[1],a=e.floatData,c=1,d=2;d<e.dims.length;++d)c*=e.dims[d];var h=c*s,p=new l.Tensor(e.dims,e.type),g=new Array(u.ShapeUtil.size(e.dims));for(d=0;d<g.length;++d)g[d]=r;for(var f=new Float64Array((s+i-1)*c),m=t/i,b=(i-1)/2,y=0;y<o;++y){u.MathUtil.sqr(f,a,b*c,h*y,h);for(var _=0;_<i;++_)u.MathUtil.axpy(g,f,h*y,_*c,c,m);for(_=1;_<s;++_){var v=y*h+_*c;u.arrayCopyHelper(g,g,v,v-c,c),u.MathUtil.axpy(g,f,v,(_+i-1)*c,c,m),u.MathUtil.axpy(g,f,v,(_-1)*c,c,-m)}}return u.MathUtil.powx(g,g,0,0,u.ShapeUtil.size(e.dims),-n),u.MathUtil.mul(g,a,0,0,u.ShapeUtil.size(e.dims)),p.floatData.set(g),p}t.CpuLrn=d,t.lrn=h},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Lrn=void 0;var r=function(){function e(){}return e.prototype.initialize=function(e){this.alpha=e.getFloat("alpha",1e-4),this.beta=e.getFloat("beta",.75),this.bias=e.getFloat("bias",1),this.size=e.getInt("size")},e.prototype.checkInputs=function(e){return!(!e||1!==e.length)&&!(e[0].dims.length<3)&&this.checkInputTypes(e)},e.prototype.checkInputTypes=function(e){return"float32"===e[0].type||"float64"===e[0].type},e}();t.Lrn=r},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},s=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0}),t.pad=t.CpuPad=void 0;var a=n(35),c=n(1),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return[u(t[0],this.mode,this.value,this.pads)]},t}(a.Pad);function u(e,t,n,r){var i=e.dims,o=function(e,t){var n=Array(e.length);Object.assign(n,e);for(var r=0;r<e.length;r++)n[r]+=t[r]+t[r+n.length];return n}(i,r),s=new c.Tensor(o,e.type);switch(t){case"constant":for(var a=0;a<o.reduce((function(e,t){return e*t}),1);a++){var l=p(a,o);s.set(l,n)}for(a=0;a<i.reduce((function(e,t){return e*t}),1);a++)l=p(a,i),s.set(l.map((function(e,t){return e+r[t]})),e.get(l));break;case"reflect":for(a=0;a<o.reduce((function(e,t){return e*t}),1);a++)l=p(a,o),s.set(l,e.get(l.map((function(e,t){return d(e,r[t],i[t])}))));break;case"edge":for(a=0;a<o.reduce((function(e,t){return e*t}),1);a++)l=p(a,o),s.set(l,e.get(l.map((function(e,t){return h(e,r[t],i[t])}))));break;default:throw Error("Illegal pad mode.")}return s}function d(e,t,n){if(e<t){var r=(t-e-1)%(n-1);return 1==Math.floor((t-e-1)/(n-1))%2?n-r-2:r+1}return e<t+n?e-t:(r=(e-(t+n))%(n-1),0==Math.floor((e-(t+n))/(n-1))%2?n-r-2:r+1)}function h(e,t,n){return e<t?0:e<t+n?e-t:n-1}function p(e,t){if(e<0||t.some((function(e){return e<0})))throw Error("Array index out of range");var n=s(t);return n.reverse(),n.map((function(t,n,r){return Math.floor(e/function(e){return e.reduce((function(e,t){return e*t}),1)}(r.slice(0,n)))%t})).reverse()}t.CpuPad=l,t.pad=u},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.pool=t.globalMaxPool=t.maxPool=t.globalAveragePool=t.averagePool=t.CpuGlobalMaxPool=t.CpuMaxPool=t.CpuGlobalAveragePool=t.CpuAveragePool=void 0;var o=n(21),s=n(1),a=n(0),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return[h(t[0],this.autoPad,this.countIncludePad,this.kernelShape,this.pads,this.strides)]},t}(o.AveragePool);t.CpuAveragePool=c;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return[p(t[0])]},t}(o.GlobalAveragePool);t.CpuGlobalAveragePool=l;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return[g(t[0],this.autoPad,this.kernelShape,this.pads,this.strides)]},t}(o.MaxPool);t.CpuMaxPool=u;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return[f(t[0])]},t}(o.GlobalMaxPool);function h(e,t,n,r,i,o){return m(!1,e,t,n,r,i,o,0,(function(e,t){return e+t}),(function(e,t){return e/t}))}function p(e){return m(!0,e,"NOTSET",!1,[],[],[],0,(function(e,t){return e+t}),(function(e,t){return e/t}))}function g(e,t,n,r,i){return m(!1,e,t,!1,n,r,i,Number.MIN_SAFE_INTEGER,(function(e,t){return Math.max(e,t)}),(function(e,t){return e}))}function f(e){return m(!0,e,"NOTSET",!1,[],[],[],Number.MIN_SAFE_INTEGER,(function(e,t){return Math.max(e,t)}),(function(e,t){return e}))}function m(e,t,n,r,i,o,c,l,u,d){a.PoolConvUtil.adjustPoolAttributes(e,t.dims,i,c,o);for(var h=a.PoolConvUtil.computePoolOutputShape(e,t.dims,c,i,o,n),p=a.ShapeUtil.size(i),g=a.ShapeUtil.computeStrides(i),f=g.length,m=h.length,b=a.ShapeUtil.size(h),y=new s.Tensor(h,t.type),_=a.ShapeUtil.computeStrides(h),v=0;v<b;v++){for(var w=a.ShapeUtil.offsetToIndices(v,_),S=w.slice(0),k=w.slice(0),I=0;I<f;I++)S[m-f+I]=w[m-f+I]*c[I];var C=l,E=0,A=!1;for(I=0;I<p;I++){var x=a.ShapeUtil.offsetToIndices(I,g);A=!1;for(var T=m-f;T<m;T++)if(k[T]=S[T]+x[T-m+f]-o[T-2],k[T]>=t.dims[T]||k[T]<0){E++,A=!0;break}C=A?C:u(C,t.get(k))}C=d(C,r?p:p-E),y.set(w,C)}return y}t.CpuGlobalMaxPool=d,t.averagePool=h,t.globalAveragePool=p,t.maxPool=g,t.globalMaxPool=f,t.pool=m},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.reduceProd=t.reduceMean=t.reduceMin=t.reduceMax=t.reduceLogSum=t.reduceSumSquare=t.reduceSum=t.CpuReduceProd=t.CpuReduceMean=t.CpuReduceMin=t.CpuReduceMax=t.CpuReduceLogSum=t.CpuReduceSumSquare=t.CpuReduceSum=void 0;var o=n(36),s=n(0),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return[g(t[0],s.ShapeUtil.normalizeAxes(this.axes,t[0].dims.length),this.keepDims)]},t}(o.ReduceBase);t.CpuReduceSum=a;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return[f(t[0],s.ShapeUtil.normalizeAxes(this.axes,t[0].dims.length),this.keepDims)]},t}(o.ReduceBase);t.CpuReduceSumSquare=c;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return[m(t[0],s.ShapeUtil.normalizeAxes(this.axes,t[0].dims.length),this.keepDims)]},t}(o.ReduceBase);t.CpuReduceLogSum=l;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return[b(t[0],s.ShapeUtil.normalizeAxes(this.axes,t[0].dims.length),this.keepDims)]},t}(o.ReduceBase);t.CpuReduceMax=u;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return[y(t[0],s.ShapeUtil.normalizeAxes(this.axes,t[0].dims.length),this.keepDims)]},t}(o.ReduceBase);t.CpuReduceMin=d;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return[_(t[0],s.ShapeUtil.normalizeAxes(this.axes,t[0].dims.length),this.keepDims)]},t}(o.ReduceBase);t.CpuReduceMean=h;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return[v(t[0],s.ShapeUtil.normalizeAxes(this.axes,t[0].dims.length),this.keepDims)]},t}(o.ReduceBase);function g(e,t,n){return s.ReduceUtil.calcReduce(e,t,n,(function(e){return e}),(function(e,t){return e+t}))}function f(e,t,n){return s.ReduceUtil.calcReduce(e,t,n,(function(e){return e*e}),(function(e,t){return e+t}))}function m(e,t,n){for(var r=s.ReduceUtil.calcReduce(e,t,n,(function(e){return e}),(function(e,t){return e+t})),i=r.floatData.length,o=0;o<i;o++)r.floatData[o]=Math.log(r.floatData[o]);return r}function b(e,t,n){return s.ReduceUtil.calcReduce(e,t,n,(function(e){return e}),(function(e,t){return Math.max(e,t)}))}function y(e,t,n){return s.ReduceUtil.calcReduce(e,t,n,(function(e){return e}),(function(e,t){return Math.min(e,t)}))}function _(e,t,n){for(var r=s.ReduceUtil.calcReduce(e,t,n,(function(e){return e}),(function(e,t){return e+t})),i=s.ReduceUtil.calcReduceShape(e.dims,t,n),o=s.ShapeUtil.size(e.dims)/s.ShapeUtil.size(i),a=r.floatData.length,c=0;c<a;c++)r.floatData[c]=r.floatData[c]/o;return r}function v(e,t,n){return s.ReduceUtil.calcReduce(e,t,n,(function(e){return e}),(function(e,t){return e*t}))}t.CpuReduceProd=p,t.reduceSum=g,t.reduceSumSquare=f,t.reduceLogSum=m,t.reduceMax=b,t.reduceMin=y,t.reduceMean=_,t.reduceProd=v},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.reshape=t.CpuReshape=void 0;var o=n(37),s=n(1),a=n(0),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return[l(t[0],t[1])]},t}(o.Reshape);function l(e,t){var n=a.ShapeUtil.calculateReshapedDims(e.dims,t.integerData),r=new s.Tensor(n,e.type);return r.floatData.set(e.floatData),r}t.CpuReshape=c,t.reshape=l},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.slice=t.CpuSliceV10=t.CpuSlice=void 0;var o=n(38),s=n(1),a=n(0),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return[u(t[0],this.starts,this.ends,this.axes)]},t}(o.Slice);t.CpuSlice=c;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){if(t.length>=5&&t[4].integerData.some((function(e){return 1!==e})))throw new Error("currently non-1 steps is not supported for Slice");var n=Array.from(t[1].integerData),r=Array.from(t[2].integerData),i=t.length>=4?Array.from(t[3].integerData):[];return[u(t[0],n,r,i)]},t}(o.SliceV10);function u(e,t,n,r){0===r.length&&(r=e.dims.map((function(e,t){return t}))),r=a.ShapeUtil.normalizeAxes(r,e.dims.length),t=t.map((function(t,n){return t>e.dims[r[n]]-1?e.dims[r[n]]:a.ShapeUtil.normalizeAxis(t,e.dims[r[n]])})),n=n.map((function(t,n){return t>e.dims[r[n]]-1?e.dims[r[n]]:a.ShapeUtil.normalizeAxis(t,e.dims[r[n]])}));var i=[],o=[];r.forEach((function(e,r){i[e]=n[r]-t[r],o[e]=t[r]}));for(var c=0;c<e.dims.length;c++)i[c]=i[c]||e.dims[c],o[c]=o[c]||0;var l=a.ShapeUtil.computeStrides(i),u=a.ShapeUtil.computeStrides(e.dims?e.dims:[e.data.length]),d=e.data,h=new s.Tensor(i,e.type),p=h.data;for(c=0;c<p.length;++c){var g=a.ShapeUtil.offsetToIndices(c,l).map((function(e,t){return e+o[t]})),f=a.ShapeUtil.indicesToOffset(g,u);p[c]=d[f]}return h}t.CpuSliceV10=l,t.slice=u},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&o(t,e,n);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.softmax=t.CpuSoftmax=void 0;var c=n(22),l=n(1),u=a(n(0)),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return[h(t[0],this.axis)]},t}(c.Softmax);function h(e,t){var n=e.dims,r=n.length;t=u.ShapeUtil.normalizeAxis(t,r);for(var i=u.ShapeUtil.sizeToDimension(n,t),o=u.ShapeUtil.sizeFromDimension(n,t),s=e.numberData,a=new l.Tensor(e.dims,e.type),c=a.numberData,d=0;d<i;d++){for(var h=d*o,p=Number.MIN_VALUE,g=0;g<o;g++)s[h+g]>p&&(p=s[h+g]);var f=0;for(g=0;g<o;g++){var m=s[h+g]-p;c[h+g]=Math.exp(m),f+=Math.exp(m)}for(g=0;g<o;g++)0===f?c[h+g]=0:c[h+g]/=f}return a}t.CpuSoftmax=d,t.softmax=h},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.squeeze=t.CpuSqueeze=void 0;var o=n(39),s=n(1),a=n(0),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return[l(t[0],this.axes)]},t}(o.Squeeze);function l(e,t){var n=a.ShapeUtil.squeezeShape(e.dims,t),r=new s.Tensor(n,e.type),i=e.numberData;return r.numberData.set(i),r}t.CpuSqueeze=c,t.squeeze=l},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.sum=t.CpuSum=void 0;var o=n(23),s=n(1),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return[c(t)]},t}(o.Sum);function c(e){for(var t=new s.Tensor(e[0].dims,e[0].type),n=e[0].floatData.length,r=t.floatData,i=0;i<e.length;i++)for(var o=e[i].floatData,a=0;a<n;++a)r[a]+=o[a];return t}t.CpuSum=a,t.sum=c},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.tile=t.CpuTile=void 0;var o=n(40),s=n(1),a=n(0),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return[l(t[0],t[1])]},t}(o.Tile);function l(e,t){for(var n=e.dims?e.dims:[e.data.length],r=n.length,i=new Array(r),o=0;o<r;o++)i[o]=n[o]*t.numberData[o];var c=a.ShapeUtil.computeStrides(n),l=a.ShapeUtil.computeStrides(i),u=new s.Tensor(i,e.type),d=u.numberData,h=e.data;for(o=0;o<d.length;++o){for(var p=a.ShapeUtil.offsetToIndices(o,l),g=new Array(r),f=0;f<r;++f)g[f]=p[f]%e.dims[f];var m=a.ShapeUtil.indicesToOffset(g,c);d[o]=h[m]}return u}t.CpuTile=c,t.tile=l},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.transpose=t.CpuTranspose=void 0;var o=n(41),s=n(1),a=n(0),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return[l(t[0],this.perm)]},t}(o.Transpose);function l(e,t){var n=e.dims,r=n.length,i=new Array(r);if(t.length===r)i=t;else for(var o=0;o<r;o++)i[o]=r-o-1;var c=new Array(r),l=new Array(r);for(o=0;o<r;o++){var u=i[o];c[o]=n[u],l[o]=u+1<r?a.ShapeUtil.sizeFromDimension(n,u+1):1}var d,h,p,g=new s.Tensor(c,e.type),f=e.floatData,m=g.floatData,b=0,y=1,_=1,v=!0;for(o=r-1;o>=0;--o){var w=i[o];v&&w===o?y*=n[w]:(v=!1,_*=n[w],++b)}return 1===_?(d=y,h=m,p=f,a.arrayCopyHelper(h,p,0,0,d)):1===y?function(e,t,n,r,i,o){for(var s=new Array(e).fill(0),c=0,l=0;l<n;++l){var u=a.ShapeUtil.indicesToOffset(s,r,e);i[c++]=o[u],a.ShapeUtil.incrementIndex(s,t,e)}}(b,c,_,l,m,f):function(e,t,n,r,i,o,s){for(var c=new Array(e).fill(0),l=0,u=0;u<n;++u){var d=a.ShapeUtil.indicesToOffset(c,i,e);a.arrayCopyHelper(o,s,l,0+d,r),a.ShapeUtil.incrementIndex(c,t,e),l+=r}}(b,c,_,y,l,m,f),g}t.CpuTranspose=c,t.transpose=l},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.unsqueeze=t.CpuUnsqueeze=void 0;var o=n(44),s=n(1),a=n(0),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return[l(t[0],this.axes)]},t}(o.Unsqueeze);function l(e,t){var n=a.ShapeUtil.unsqueezeShape(e.dims,t),r=new s.Tensor(n,e.type),i=e.numberData;return r.numberData.set(i),r}t.CpuUnsqueeze=c,t.unsqueeze=l},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.CpuUpsample=void 0;var o=n(45),s=n(1),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){var n=this,r=t[0].dims,i=r.map((function(e,t){return Math.floor(e*n.scales[t])})),o=new s.Tensor(i,t[0].type);return"nearest"===this.mode?function(e,t,n,r,i){var o=n.length,s=new Array(o);s.fill(0);var a=new Array(o);a[o-1]=1;for(var l=o-2;l>=0;l--)a[l]=a[l+1]*n[l+1];var u=new Array(o);u.fill(0),u[o-1]=-1;for(var d=0,h=0;d<t.length;d++){for(var p=o-1;p>=0;p--){if(++u[p]<r[p]){var g=0,f=c(u[p],i[p]);g=Math.floor(f),(g=Math.max(0,Math.min(g,n[p]-1)))!==s[p]&&(h+=(g-s[p])*a[p],s[p]=g);break}u[p]=0,h+=(0-s[p])*a[p],s[p]=0}t[d]=e[h]}}(t[0].data,o.data,r,i,this.scales):function(e,t,n,r,i){var o=2===n.length;!function(e,t,n,r,i,o,s,a,l,u){for(var d=[],h=[],p=new Array(s),g=new Array(s),f=new Array(a),m=new Array(a),b=new Array(s),y=new Array(s),_=new Array(a),v=new Array(a),w=0;w<s;++w){var S=c(w,l);d.push(S),S=Math.max(0,Math.min(S,i-1));var k=Math.min(Math.floor(S),i-1),I=Math.min(k+1,i-1);k===I?(b[w]=.5,y[w]=.5):(b[w]=Math.abs(S-k),y[w]=Math.abs(S-I)),p[w]=o*k,g[w]=o*I}for(var C=0;C<a;++C){var E=c(C,u);h.push(E),E=Math.max(0,Math.min(E,o-1)),f[C]=Math.min(Math.floor(E),o-1),m[C]=Math.min(f[C]+1,o-1),f[C]===m[C]?(_[C]=.5,v[C]=.5):(_[C]=Math.abs(E-f[C]),v[C]=Math.abs(E-m[C]))}for(var A=0,x=0,T=0;T<n;++T)for(var O=0;O<r;++O){for(w=0;w<s;++w)for(C=0;C<a;++C){var P=e[A+p[w]+f[C]],R=e[A+p[w]+m[C]],D=e[A+g[w]+f[C]],N=e[A+g[w]+m[C]];t[x+a*w+C]=v[C]*y[w]*P+_[C]*y[w]*R+v[C]*b[w]*D+_[C]*b[w]*N}A+=i*o,x+=a*s}}(e,t,o?1:n[0],o?1:n[1],o?n[0]:n[2],o?n[1]:n[3],o?r[0]:r[2],o?r[1]:r[3],o?i[0]:i[2],o?i[1]:i[3])}(t[0].data,o.data,r,i,this.scales),[o]},t}(o.Upsample);function c(e,t){return e/t}t.CpuUpsample=a},function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.WasmBackend=t.bindingInitPromise=void 0;var c=o(n(46)),l=n(3),u=o(n(4)),d=n(106),h=function(){function e(){this.cpuFallback=!0,this.worker=function(){if("undefined"!=typeof navigator&&navigator){if("number"==typeof navigator.hardwareConcurrency)return Math.max(Math.ceil(navigator.hardwareConcurrency/2)-1,0);if("Safari"===c.name&&c.os&&("iOS"===c.os.family||"OS X"===c.os.family))return 1}return 0}(),this.initTimeout=5e3}return e.prototype.initialize=function(){return s(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return function(e){if(!Number.isFinite(e)||Number.isNaN(e))throw new Error(e+" is not valid number of workers");if(!Number.isInteger(e))throw new Error(e+" is not an integer and hence not valid number of workers")}(this.worker),[4,this.isWasmSupported()];case 1:return e.sent()?[2,!0]:[2,!1]}}))}))},e.prototype.createSessionHandler=function(e){return new d.WasmSessionHandler(this,e,this.cpuFallback)},e.prototype.dispose=function(){},e.prototype.isWasmSupported=function(){return s(this,void 0,void 0,(function(){var e;return a(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,u.init(this.worker,this.initTimeout)];case 1:return t.sent(),[2,!0];case 2:return e=t.sent(),l.Logger.warning("WebAssembly","Unable to initialize WebAssembly backend. "+e),[2,!1];case 3:return[2]}}))}))},e}();t.WasmBackend=h},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){var r;Object.defineProperty(t,"__esModule",{value:!0}),t.now=t.WasmBinding=t.init=void 0;var i=!1,o=!1;t.init=function(){if(i)return Promise.resolve();if(o)throw new Error("multiple calls to 'init()' detected.");return o=!0,new Promise((function(e,t){(r=n(104))(r).then((function(){e(),o=!1,i=!0}),(function(e){o=!1,t(e)}))}))};var s=function(){function e(){this.ptr8=0,this.numBytesAllocated=0}return e.prototype.ccall=function(n){for(var o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];if(!i)throw new Error("wasm not initialized. please ensure 'init()' is called.");var a=t.now(),c=[],l=e.calculateOffsets(c,o);l>this.numBytesAllocated&&this.expandMemory(l),e.ccallSerialize(r.HEAPU8.subarray(this.ptr8,this.ptr8+l),c,o);var u=t.now();this.func(n,this.ptr8);var d=t.now();e.ccallDeserialize(r.HEAPU8.subarray(this.ptr8,this.ptr8+l),c,o);var h=t.now();return{startTime:a,endTime:h,startTimeFunc:u,endTimeFunc:d}},e.prototype.ccallRaw=function(e,n){if(!i)throw new Error("wasm not initialized. please ensure 'init()' is called.");var o=t.now(),s=n.byteLength;s>this.numBytesAllocated&&this.expandMemory(s),r.HEAPU8.subarray(this.ptr8,this.ptr8+s).set(n);var a=t.now();this.func(e,this.ptr8);var c=t.now();return n.set(r.HEAPU8.subarray(this.ptr8,this.ptr8+s)),{startTime:o,endTime:t.now(),startTimeFunc:a,endTimeFunc:c}},e.prototype.func=function(e,t){(0,r[e])(t)},e.calculateOffsets=function(e,t){for(var n=4+4*t.length,r=0;r<t.length;r++){var i=t[r],o=i[0],s=i[1],a=i[2],c=0;switch(s){case"bool":case"int32":case"float32":c=4;break;case"float64":c=8;break;case"boolptr":if(!o){e.push(0);continue}if(!Array.isArray(o)&&!ArrayBuffer.isView(o))throw new Error("boolptr requires boolean array or Uint8Array");c=4*Math.ceil(o.length/4);break;case"int32ptr":case"float32ptr":if(!o){e.push(0);continue}if(Array.isArray(o)){if("inout"===a||"out"===a)throw new TypeError("inout/out parameters must be ArrayBufferView for ptr types.");c=4*o.length}else{if(!ArrayBuffer.isView(o))throw new TypeError("unsupported data type in 'ccall()'");c=o.byteLength}break;default:throw new Error("not supported parameter type: "+s)}e.push(n),n+=c}return n},e.ccallSerialize=function(e,t,n){var r=new Int32Array(e.buffer,e.byteOffset),i=new Uint32Array(e.buffer,e.byteOffset),o=new Float32Array(e.buffer,e.byteOffset);i[0]=n.length;for(var s=0;s<n.length;s++){var a=n[s],c=a[0],l=a[1],u=a[2],d=t[s],h=d>>2;if(i[s+1]=d,"out"!==u&&0!==d)switch(l){case"bool":e[d]=!0===c?1:0;break;case"int32":r[h]=c;break;case"float32":o[h]=c;break;case"boolptr":var p=c;e.subarray(d,d+p.length).set(c);break;case"int32ptr":var g=c;r.subarray(h,h+g.length).set(g);break;case"float32ptr":var f=c;o.subarray(h,h+f.length).set(f);break;default:throw new Error("not supported parameter type: "+l)}}},e.ccallDeserialize=function(e,t,n){for(var r=new Float32Array(e.buffer,e.byteOffset),i=new Uint8Array(e.buffer,e.byteOffset),o=0;o<n.length;o++){var s=n[o],a=s[0],c=s[1],l=s[2],u=t[o],d=u>>2;if("out"===l||"inout"===l)switch(c){case"float32ptr":var h=a;h.set(r.subarray(d,d+h.length));break;case"boolptr":var p=a;p.set(i.subarray(u,u+p.length));break;default:throw new Error("not supported parameter type: "+c)}}},e.prototype.expandMemory=function(e){if(0!==this.ptr8&&r._free(this.ptr8),this.numBytesAllocated=2*e,this.ptr8=r._malloc(this.numBytesAllocated),0===this.ptr8)throw new Error("Unable to allocate requested amount of memory. Failing.")},e.prototype.dispose=function(){if(!i)throw new Error("wasm not initialized. please ensure 'init()' is called.");0!==this.ptr8&&r._free(this.ptr8)},e}();t.WasmBinding=s,t.now="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:Date.now},function(e,t,n){(function(t,r,i){var o,s=(o=(o="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||t,function(e){e=void 0!==(e=e||{})?e:{};var t,s={};for(t in e)e.hasOwnProperty(t)&&(s[t]=e[t]);var a=[],c=!1,l=!1,u=!1,d=!1;c="object"==typeof self,l="function"==typeof importScripts,u="object"==typeof r&&"object"==typeof r.versions&&"string"==typeof r.versions.node,d=!c&&!u&&!l;var h,p,g,f,m="";function b(t){return e.locateFile?e.locateFile(t,m):m+t}u?(m=l?n(47).dirname(m)+"/":i+"/",h=function(e,t){return g||(g=n(48)),f||(f=n(47)),e=f.normalize(e),g.readFileSync(e,t?null:"utf8")},p=function(e){var t=h(e,!0);return t.buffer||(t=new Uint8Array(t)),C(t.buffer),t},r.argv.length>1&&r.argv[1].replace(/\\/g,"/"),a=r.argv.slice(2),r.on("uncaughtException",(function(e){if(!(e instanceof Pe))throw e})),r.on("unhandledRejection",te),e.inspect=function(){return"[Emscripten Module object]"}):d?("undefined"!=typeof read&&(h=function(e){return read(e)}),p=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(C("object"==typeof(t=read(e,"binary"))),t)},"undefined"!=typeof scriptArgs?a=scriptArgs:void 0!==arguments&&(a=arguments),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(c||l)&&(l?m=self.location.href:document.currentScript&&(m=document.currentScript.src),o&&(m=o),m=0!==m.indexOf("blob:")?m.substr(0,m.lastIndexOf("/")+1):"",h=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},l&&(p=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}));var y=e.print||console.log.bind(console),_=e.printErr||console.warn.bind(console);for(t in s)s.hasOwnProperty(t)&&(e[t]=s[t]);s=null,e.arguments&&(a=e.arguments),e.thisProgram&&e.thisProgram,e.quit&&e.quit;var v,w,S=function(e){};e.wasmBinary&&(v=e.wasmBinary),e.noExitRuntime&&e.noExitRuntime,"object"!=typeof WebAssembly&&_("no native wasm support detected");var k=new WebAssembly.Table({initial:31,maximum:31,element:"anyfunc"}),I=!1;function C(e,t){e||te("Assertion failed: "+t)}var E="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function A(e,t,n){for(var r=t+n,i=t;e[i]&&!(i>=r);)++i;if(i-t>16&&e.subarray&&E)return E.decode(e.subarray(t,i));for(var o="";t<i;){var s=e[t++];if(128&s){var a=63&e[t++];if(192!=(224&s)){var c=63&e[t++];if((s=224==(240&s)?(15&s)<<12|a<<6|c:(7&s)<<18|a<<12|c<<6|63&e[t++])<65536)o+=String.fromCharCode(s);else{var l=s-65536;o+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else o+=String.fromCharCode((31&s)<<6|a)}else o+=String.fromCharCode(s)}return o}function x(e,t){return e?A(O,e,t):""}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var T,O,P,R=65536;function D(e,t){return e%t>0&&(e+=t-e%t),e}function N(t){T=t,e.HEAP8=new Int8Array(t),e.HEAP16=new Int16Array(t),e.HEAP32=P=new Int32Array(t),e.HEAPU8=O=new Uint8Array(t),e.HEAPU16=new Uint16Array(t),e.HEAPU32=new Uint32Array(t),e.HEAPF32=new Float32Array(t),e.HEAPF64=new Float64Array(t)}var U=5248800,M=5760,j=e.INITIAL_MEMORY||16777216;function F(t){for(;t.length>0;){var n=t.shift();if("function"!=typeof n){var r=n.func;"number"==typeof r?void 0===n.arg?e.dynCall_v(r):e.dynCall_vi(r,n.arg):r(void 0===n.arg?null:n.arg)}else n()}}(w=e.wasmMemory?e.wasmMemory:new WebAssembly.Memory({initial:j/R}))&&(T=w.buffer),j=T.byteLength,N(T),P[M>>2]=U;var L=[],G=[],B=[],z=[],V=[];function q(){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)X(e.preRun.shift());F(L)}function H(){F(G)}function W(){F(B)}function $(){if(e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;)K(e.postRun.shift());F(V)}function X(e){L.unshift(e)}function K(e){V.unshift(e)}Math.abs,Math.ceil,Math.floor,Math.min;var Y=0,Z=null,J=null;function Q(t){Y++,e.monitorRunDependencies&&e.monitorRunDependencies(Y)}function ee(t){if(Y--,e.monitorRunDependencies&&e.monitorRunDependencies(Y),0==Y&&(null!==Z&&(clearInterval(Z),Z=null),J)){var n=J;J=null,n()}}function te(t){throw e.onAbort&&e.onAbort(t),y(t+=""),_(t),I=!0,t="abort("+t+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(t)}e.preloadedImages={},e.preloadedAudios={};var ne="data:application/octet-stream;base64,";function re(e){return String.prototype.startsWith?e.startsWith(ne):0===e.indexOf(ne)}var ie="onnx-wasm.wasm";function oe(){try{if(v)return new Uint8Array(v);if(p)return p(ie);throw"both async and sync fetching of the wasm failed"}catch(e){te(e)}}function se(){return v||!c&&!l||"function"!=typeof fetch?new Promise((function(e,t){e(oe())})):fetch(ie,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+ie+"'";return e.arrayBuffer()})).catch((function(){return oe()}))}function ae(){var t={env:Ce,wasi_snapshot_preview1:Ce};function n(t,n){var r=t.exports;e.asm=r,ee()}function r(e){n(e.instance)}function i(e){return se().then((function(e){return WebAssembly.instantiate(e,t)})).then(e,(function(e){_("failed to asynchronously prepare wasm: "+e),te(e)}))}if(Q(),e.instantiateWasm)try{return e.instantiateWasm(t,n)}catch(e){return _("Module.instantiateWasm callback failed with error: "+e),!1}return function(){if(v||"function"!=typeof WebAssembly.instantiateStreaming||re(ie)||"function"!=typeof fetch)return i(r);fetch(ie,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,t).then(r,(function(e){_("wasm streaming compile failed: "+e),_("falling back to ArrayBuffer instantiation"),i(r)}))}))}(),{}}function ce(e,t,n,r){te("Assertion failed: "+x(e)+", at: "+[t?x(t):"unknown filename",n,r?x(r):"unknown function"])}function le(e){return Te(e)}re(ie)||(ie=b(ie)),G.push({func:function(){xe()}});var ue={};function de(){return de.uncaught_exceptions>0}function he(e,t,n){throw ue[e]={ptr:e,adjusted:[e],type:t,destructor:n,refcount:0,caught:!1,rethrown:!1},"uncaught_exception"in de?de.uncaught_exceptions++:de.uncaught_exceptions=1,e}function pe(){te()}function ge(){return O.length}function fe(){return 5760}function me(e,t,n){O.copyWithin(e,t,t+n)}function be(e){try{return w.grow(e-T.byteLength+65535>>16),N(w.buffer),1}catch(e){}}function ye(e){var t=ge();if(e>2147418112)return!1;for(var n=1;n<=4;n*=2){var r=t*(1+.2/n);if(r=Math.min(r,e+100663296),be(Math.min(2147418112,D(Math.max(16777216,e,r),65536))))return!0}return!1}var _e={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var n=_e.buffers[e];0===t||10===t?((1===e?y:_)(A(n,0)),n.length=0):n.push(t)},varargs:void 0,get:function(){return _e.varargs+=4,P[_e.varargs-4>>2]},getStr:function(e){return x(e)},get64:function(e,t){return e}};function ve(e){return 0}function we(e,t,n,r,i){}function Se(){void 0!==Oe&&Oe(0);var e=_e.buffers;e[1].length&&_e.printChar(1,10),e[2].length&&_e.printChar(2,10)}function ke(e,t,n,r){for(var i=0,o=0;o<n;o++){for(var s=P[t+8*o>>2],a=P[t+(8*o+4)>>2],c=0;c<a;c++)_e.printChar(e,O[s+c]);i+=a}return P[r>>2]=i,0}function Ie(e){S(0|e)}z.push(Se);var Ce={__assert_fail:ce,__cxa_allocate_exception:le,__cxa_throw:he,abort:pe,emscripten_get_sbrk_ptr:fe,emscripten_memcpy_big:me,emscripten_resize_heap:ye,fd_close:ve,fd_seek:we,fd_write:ke,memory:w,setTempRet0:Ie,table:k},Ee=ae();e.asm=Ee;var Ae,xe=e.___wasm_call_ctors=function(){return(xe=e.___wasm_call_ctors=e.asm.__wasm_call_ctors).apply(null,arguments)},Te=(e._batch_normalization_f32=function(){return(e._batch_normalization_f32=e.asm.batch_normalization_f32).apply(null,arguments)},e._add_f32=function(){return(e._add_f32=e.asm.add_f32).apply(null,arguments)},e._sub_f32=function(){return(e._sub_f32=e.asm.sub_f32).apply(null,arguments)},e._mul_f32=function(){return(e._mul_f32=e.asm.mul_f32).apply(null,arguments)},e._div_f32=function(){return(e._div_f32=e.asm.div_f32).apply(null,arguments)},e._prelu_f32=function(){return(e._prelu_f32=e.asm.prelu_f32).apply(null,arguments)},e._xor_u8=function(){return(e._xor_u8=e.asm.xor_u8).apply(null,arguments)},e._or_u8=function(){return(e._or_u8=e.asm.or_u8).apply(null,arguments)},e._and_u8=function(){return(e._and_u8=e.asm.and_u8).apply(null,arguments)},e._clip_f32=function(){return(e._clip_f32=e.asm.clip_f32).apply(null,arguments)},e._conv_f32=function(){return(e._conv_f32=e.asm.conv_f32).apply(null,arguments)},e._gemm_f32=function(){return(e._gemm_f32=e.asm.gemm_f32).apply(null,arguments)},e._free=function(){return(e._free=e.asm.free).apply(null,arguments)},e._malloc=function(){return(Te=e._malloc=e.asm.malloc).apply(null,arguments)}),Oe=(e._instance_normalization_f32=function(){return(e._instance_normalization_f32=e.asm.instance_normalization_f32).apply(null,arguments)},e._matmul_f32=function(){return(e._matmul_f32=e.asm.matmul_f32).apply(null,arguments)},e._average_pool_f32=function(){return(e._average_pool_f32=e.asm.average_pool_f32).apply(null,arguments)},e._max_pool_f32=function(){return(e._max_pool_f32=e.asm.max_pool_f32).apply(null,arguments)},e._softmax_f32=function(){return(e._softmax_f32=e.asm.softmax_f32).apply(null,arguments)},e._sum_f32=function(){return(e._sum_f32=e.asm.sum_f32).apply(null,arguments)},e.___errno_location=function(){return(e.___errno_location=e.asm.__errno_location).apply(null,arguments)},e._fflush=function(){return(Oe=e._fflush=e.asm.fflush).apply(null,arguments)});function Pe(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function Re(t){function n(){Ae||(Ae=!0,e.calledRun=!0,I||(H(),W(),e.onRuntimeInitialized&&e.onRuntimeInitialized(),$()))}t=t||a,Y>0||(q(),Y>0||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),n()}),1)):n()))}if(e._setThrew=function(){return(e._setThrew=e.asm.setThrew).apply(null,arguments)},e.stackSave=function(){return(e.stackSave=e.asm.stackSave).apply(null,arguments)},e.stackAlloc=function(){return(e.stackAlloc=e.asm.stackAlloc).apply(null,arguments)},e.stackRestore=function(){return(e.stackRestore=e.asm.stackRestore).apply(null,arguments)},e.__growWasmMemory=function(){return(e.__growWasmMemory=e.asm.__growWasmMemory).apply(null,arguments)},e.dynCall_ii=function(){return(e.dynCall_ii=e.asm.dynCall_ii).apply(null,arguments)},e.dynCall_iiii=function(){return(e.dynCall_iiii=e.asm.dynCall_iiii).apply(null,arguments)},e.dynCall_jiji=function(){return(e.dynCall_jiji=e.asm.dynCall_jiji).apply(null,arguments)},e.dynCall_iidiiii=function(){return(e.dynCall_iidiiii=e.asm.dynCall_iidiiii).apply(null,arguments)},e.dynCall_vii=function(){return(e.dynCall_vii=e.asm.dynCall_vii).apply(null,arguments)},e.dynCall_vi=function(){return(e.dynCall_vi=e.asm.dynCall_vi).apply(null,arguments)},e.dynCall_viiiiii=function(){return(e.dynCall_viiiiii=e.asm.dynCall_viiiiii).apply(null,arguments)},e.dynCall_viiiii=function(){return(e.dynCall_viiiii=e.asm.dynCall_viiiii).apply(null,arguments)},e.dynCall_viiii=function(){return(e.dynCall_viiii=e.asm.dynCall_viiii).apply(null,arguments)},e.asm=Ee,e.then=function(t){if(Ae)t(e);else{var n=e.onRuntimeInitialized;e.onRuntimeInitialized=function(){n&&n(),t(e)}}return e},J=function e(){Ae||Re(),Ae||(J=e)},e.run=Re,e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();return Re(),e});e.exports=s}).call(this,"/index.js",n(24),"/")},function(e,t,n){n.r(t),t.default=function(){return new Worker(n.p+"onnx-worker.js")}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WasmSessionHandler=void 0;var r=n(11),i=n(27),o=n(107),s=n(108),a=function(){function e(e,t,n){this.backend=e,this.context=t,this.opResolveRules=n?s.WASM_OP_RESOLVE_RULES.concat(i.CPU_OP_RESOLVE_RULES):s.WASM_OP_RESOLVE_RULES}return e.prototype.createInferenceHandler=function(){return new o.WasmInferenceHandler(this,this.context.profiler)},e.prototype.dispose=function(){},e.prototype.resolve=function(e,t){var n=r.resolveOperator(e,t,this.opResolveRules);return n.initialize(e.attributes),n},e}();t.WasmSessionHandler=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WasmInferenceHandler=void 0;var r=function(){function e(e,t){this.session=e,this.profiler=t}return e.prototype.dispose=function(){},e}();t.WasmInferenceHandler=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WASM_OP_RESOLVE_RULES=void 0;var r=n(109),i=n(110),o=n(111),s=n(112),a=n(113),c=n(114),l=n(115),u=n(116),d=n(117),h=n(118);t.WASM_OP_RESOLVE_RULES=[["Add","","7+",function(){return new i.WasmBinaryOp(["float32"],"Add")}],["And","","7+",function(){return new i.WasmBinaryOp(["bool"],"And")}],["AveragePool","","7-10",function(){return new u.WasmAveragePool}],["BatchNormalization","","7+",function(){return new r.WasmBatchNormalization}],["Clip","","6-10",function(){return new o.WasmClip}],["Conv","","1+",function(){return new s.WasmConv}],["Div","","7+",function(){return new i.WasmBinaryOp(["float32"],"Div")}],["Gemm","","7-10",function(){return new a.WasmGemm(!1)}],["Gemm","","11+",function(){return new a.WasmGemm(!0)}],["GlobalAveragePool","","1+",function(){return new u.WasmGlobalAveragePool}],["GlobalMaxPool","","1+",function(){return new u.WasmGlobalMaxPool}],["InstanceNormalization","","6+",function(){return new c.WasmInstanceNormalization}],["MatMul","","1+",function(){return new l.WasmMatMul}],["MaxPool","","1-9",function(){return new u.WasmMaxPool}],["Mul","","7+",function(){return new i.WasmBinaryOp(["float32"],"Mul")}],["Or","","7+",function(){return new i.WasmBinaryOp(["bool"],"Or")}],["PRelu","","7+",function(){return new i.WasmBinaryOp(["float32"],"PRelu")}],["Softmax","","1+",function(){return new d.WasmSoftmax}],["Sub","","7+",function(){return new i.WasmBinaryOp(["float32"],"Sub")}],["Sum","","6+",function(){return new h.WasmSum}],["Xor","","7+",function(){return new i.WasmBinaryOp(["bool"],"Xor")}]]},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.WasmBatchNormalization=void 0;var o=n(14),s=n(1),a=n(4),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){for(var n=t[0],r=t[1],i=t[2],o=t[3],c=t[4],l=1,u=2;u<n.dims.length;u++)l*=n.dims[u];var d=new s.Tensor(n.dims,n.type);return a.WasmBinding.getInstance().ccall("_batch_normalization_f32",[n.floatData,"float32ptr"],[d.floatData,"float32ptr","out"],[n.dims[0],"int32"],[n.dims[1],"int32"],[l,"int32"],[r.floatData,"float32ptr"],[i.floatData,"float32ptr"],[o.floatData,"float32ptr"],[c.floatData,"float32ptr"],[this.epsilon,"float32"]),[d]},t.prototype.checkInputTypes=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4];return!(t.dims.length<3||1!==n.dims.length||1!==r.dims.length||1!==i.dims.length||1!==o.dims.length)&&n.dims[0]===t.dims[1]&&r.dims[0]===t.dims[1]&&i.dims[0]===t.dims[1]&&o.dims[0]===t.dims[1]&&"float32"===t.type&&"float32"===n.type&&"float32"===r.type&&"float32"===i.type&&"float32"===o.type},t}(o.BatchNormalization);t.WasmBatchNormalization=c},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.WasmBinaryOp=void 0;var o=n(15),s=n(1),a=n(0),c=n(4),l=function(e){function t(t,n,r){return e.call(this,t,n,r)||this}return i(t,e),t.prototype.run=function(e,t){var n=a.BroadcastUtil.calcShape(t[0].dims,t[1].dims,!1);if(!n)throw new Error("not broadcastable");var r,i="",o="";switch(this.opType){case"Add":"float32"===t[0].type&&(i="_add_f32",o="float32InFloat32Out");break;case"Sub":"float32"===t[0].type&&(i="_sub_f32",o="float32InFloat32Out");break;case"Mul":"float32"===t[0].type&&(i="_mul_f32",o="float32InFloat32Out");break;case"Div":"float32"===t[0].type&&(i="_div_f32",o="float32InFloat32Out");break;case"PRelu":"float32"===t[0].type&&(i="_prelu_f32",o="float32InFloat32Out");break;case"Xor":i="_xor_u8",o="boolInBoolOut";break;case"Or":i="_or_u8",o="boolInBoolOut";break;case"And":i="_and_u8",o="boolInBoolOut";break;default:throw Error("unsupported binary op by the Wasm backend")}if("float32InFloat32Out"===o)r=new s.Tensor(n,"float32"),c.WasmBinding.getInstance().ccall(i,[t[0].floatData,"float32ptr"],[t[0].dims.length,"int32"],[t[0].dims,"int32ptr"],[t[1].floatData,"float32ptr"],[t[1].dims.length,"int32"],[t[1].dims,"int32ptr"],[r.floatData,"float32ptr","out"],[r.floatData.length,"int32"],[n.length,"int32"],[n,"int32ptr"]);else{if("boolInBoolOut"!==o)throw new Error("Unsupported binary op format. Probably unsupported data types.");r=new s.Tensor(n,"bool"),c.WasmBinding.getInstance().ccall(i,[t[0].integerData,"boolptr"],[t[0].dims.length,"int32"],[t[0].dims,"int32ptr"],[t[1].integerData,"boolptr"],[t[1].dims.length,"int32"],[t[1].dims,"int32ptr"],[r.integerData,"boolptr","out"],[r.integerData.length,"int32"],[n.length,"int32"],[n,"int32ptr"])}return[r]},t}(o.BinaryOp);t.WasmBinaryOp=l},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.WasmClip=void 0;var o=n(49),s=n(1),a=n(4),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){var n=new s.Tensor(t[0].dims,t[0].type),r=n.floatData.length;if("float32"!==t[0].type)throw new Error("Unsupported input type for Clip operator.");return a.WasmBinding.getInstance().ccall("_clip_f32",[t[0].floatData,"float32ptr"],[n.floatData,"float32ptr","out"],[r,"int32"],[this.min,"float32"],[this.max,"float32"]),[n]},t.prototype.checkInputTypes=function(e){return"float32"===e[0].type},t}(o.Clip);t.WasmClip=c},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.WasmConv=void 0;var a=n(16),c=n(1),l=n(0),u=n(4),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return o(this,void 0,void 0,(function(){var e,n,r,i,o,a,d,h,p,g,f,m,b,y,_,v,w,S;return s(this,(function(s){switch(s.label){case 0:if(e=t[0],n=t[1],r=3===t.length?t[2]:void 0,0===this.kernelShape.length)for(i=t[1].dims,S=2;S<i.length;++S)this.kernelShape.push(i[S]);return o=l.PoolConvUtil.computeConvOutputShape(e.dims,n.dims,this.strides,this.dilations,this.kernelShape,this.pads,this.autoPad),a=new c.Tensor(o,e.type),1!==(d=function(e,t,n,r){return 1!==e||1!==t||1===n||r<=0?1:Math.min(n,r+1)}(e.dims[0],this.group,n.dims[0],u.WasmBinding.workerNumber))?[3,1]:(u.WasmBinding.getInstance().ccall("_conv_f32",[e.floatData,"float32ptr"],[e.dims,"int32ptr"],[n.floatData,"float32ptr"],[n.dims,"int32ptr"],[a.floatData,"float32ptr","out"],[a.dims,"int32ptr"],[r?r.floatData:null,"float32ptr"],[this.dilations,"int32ptr"],[this.group,"int32"],[this.pads,"int32ptr"],[this.strides,"int32ptr"]),[2,[a]]);case 1:for((h=n.dims.slice(0))[0]=Math.floor(n.dims[0]/d),p=h[0]*h[1]*h[2]*h[3],(g=n.dims.slice(0))[0]=n.dims[0]-(d-1)*h[0],f=[1,h[0],o[2],o[3]],m=h[0]*o[2]*o[3],b=[1,g[0],o[2],o[3]],y=new Array(d),_=new Array(d),v=new Array(d),w=new Array(d-1),S=0;S<d;++S)S!==d-1?(y[S]=n.floatData.subarray(S*p,(S+1)*p),_[S]=a.floatData.subarray(S*m,(S+1)*m),r&&(v[S]=r.floatData.subarray(S*h[0],(S+1)*h[0])),w[S]=u.WasmBinding.getInstance().ccallRemote(S,"_conv_f32",[e.floatData,"float32ptr"],[e.dims,"int32ptr"],[y[S],"float32ptr"],[h,"int32ptr"],[_[S],"float32ptr","out"],[f,"int32ptr"],[v.length>0?v[S]:null,"float32ptr"],[this.dilations,"int32ptr"],[this.group,"int32"],[this.pads,"int32ptr"],[this.strides,"int32ptr"])):(y[S]=n.floatData.subarray(S*p),_[S]=a.floatData.subarray(S*m),r&&(v[S]=r.floatData.subarray(S*h[0])),u.WasmBinding.getInstance().ccall("_conv_f32",[e.floatData,"float32ptr"],[e.dims,"int32ptr"],[y[S],"float32ptr"],[g,"int32ptr"],[_[S],"float32ptr","out"],[b,"int32ptr"],[v.length>0?v[S]:null,"float32ptr"],[this.dilations,"int32ptr"],[this.group,"int32"],[this.pads,"int32ptr"],[this.strides,"int32ptr"]));return[4,Promise.all(w)];case 2:return s.sent(),[2,[a]]}}))}))},t.prototype.checkInputTypes=function(e){return"float32"===e[0].type&&"float32"===e[1].type&&(3!==e.length||"float32"===e[2].type)},t}(a.Conv);t.WasmConv=d},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s};Object.defineProperty(t,"__esModule",{value:!0}),t.WasmGemm=void 0;var s=n(19),a=n(1),c=n(0),l=n(4),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){var n=t[0],r=t[1],i=t[2],s=o(c.GemmUtil.getShapeOfGemmResult(n.dims,this.transA,r.dims,this.transB,null==i?void 0:i.dims),2),u=s[0],d=s[1],h=new a.Tensor([u,d],n.type);if(i&&!c.BroadcastUtil.calc(h,i,(function(e,t){return t}),!0))throw new Error("c is not broadcastable to the shape of the result of the Gemm operator");return l.WasmBinding.getInstance().ccall("_gemm_f32",[this.transA,"bool"],[this.transB,"bool"],[this.transA?n.dims[1]:n.dims[0],"int32"],[this.transB?r.dims[0]:r.dims[1],"int32"],[this.transA?n.dims[0]:n.dims[1],"int32"],[this.alpha,"float32"],[n.floatData,"float32ptr"],[r.floatData,"float32ptr"],[this.beta,"float32"],[h.floatData,"float32ptr","inout"]),[h]},t.prototype.checkInputTypes=function(e){return"float32"===e[0].type&&"float32"===e[1].type&&"float32"===e[2].type&&e[0].type===e[1].type&&e[0].type===e[2].type},t}(s.Gemm);t.WasmGemm=u},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.WasmInstanceNormalization=void 0;var o=n(20),s=n(1),a=n(4),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){for(var n=t[0],r=t[1],i=t[2],o=1,c=2;c<n.dims.length;c++)o*=n.dims[c];var l=new s.Tensor(n.dims,n.type);return a.WasmBinding.getInstance().ccall("_instance_normalization_f32",[n.floatData,"float32ptr"],[l.floatData,"float32ptr","out"],[n.dims[0],"int32"],[n.dims[1],"int32"],[o,"int32"],[r.floatData,"float32ptr"],[i.floatData,"float32ptr"],[this.epsilon,"float32"]),[l]},t.prototype.checkInputTypes=function(e){var t=e[0],n=e[1],r=e[2];return!(t.dims.length<3||1!==n.dims.length||1!==r.dims.length)&&n.dims[0]===t.dims[1]&&r.dims[0]===t.dims[1]&&"float32"===t.type&&"float32"===n.type&&"float32"===r.type},t}(o.InstanceNormalization);t.WasmInstanceNormalization=c},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s};Object.defineProperty(t,"__esModule",{value:!0}),t.WasmMatMul=void 0;var s=n(18),a=n(1),c=n(0),l=n(4),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){var n=o(c.MatMulUtil.preprocessInputShapes(t[0].dims,t[1].dims),2),r=n[0],i=n[1],s=c.BroadcastUtil.calcShape(r,i,!0);if(!s)throw new Error("input dimensions do not match the requirement");var u=c.ShapeUtil.size(s),d=new Float32Array(u);l.WasmBinding.getInstance().ccall("_matmul_f32",[t[0].floatData,"float32ptr"],[t[0].dims,"int32ptr"],[t[0].dims.length,"int32"],[t[1].floatData,"float32ptr"],[t[1].dims,"int32ptr"],[t[1].dims.length,"int32"],[d,"float32ptr","out"],[d.length,"int32"],[s,"int32ptr"],[s.length,"int32"]),c.MatMulUtil.postprocessOutputShape(s,t[0].dims.length,t[1].dims.length);var h=new a.Tensor(s,t[0].type);return h.floatData.set(d),[h]},t.prototype.checkInputTypes=function(e){return"float32"===e[0].type&&"float32"===e[1].type&&e[0].type===e[1].type},t}(s.MatMul);t.WasmMatMul=u},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.WasmGlobalMaxPool=t.WasmMaxPool=t.WasmGlobalAveragePool=t.WasmAveragePool=void 0;var a=n(21),c=n(1),l=n(0),u=n(4),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.checkInputTypes=function(e){return f(e)},t.prototype.run=function(e,t){return o(this,void 0,void 0,(function(){return s(this,(function(e){return[2,m(t[0],this.autoPad,this.countIncludePad,this.kernelShape,this.pads,this.strides)]}))}))},t}(a.AveragePool);t.WasmAveragePool=d;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.checkInputTypes=function(e){return f(e)},t.prototype.run=function(e,t){return o(this,void 0,void 0,(function(){return s(this,(function(e){return[2,b(t[0])]}))}))},t}(a.GlobalAveragePool);t.WasmGlobalAveragePool=h;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.checkInputTypes=function(e){return f(e)},t.prototype.run=function(e,t){return o(this,void 0,void 0,(function(){return s(this,(function(e){return[2,y(t[0],this.autoPad,this.kernelShape,this.pads,this.strides)]}))}))},t}(a.MaxPool);t.WasmMaxPool=p;var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.checkInputTypes=function(e){return f(e)},t.prototype.run=function(e,t){return o(this,void 0,void 0,(function(){return s(this,(function(e){return[2,_(t[0])]}))}))},t}(a.GlobalMaxPool);function f(e){return"float32"===e[0].type}function m(e,t,n,r,i,a){return o(this,void 0,void 0,(function(){return s(this,(function(o){return[2,v(!1,1,e,t,n,r,i,a)]}))}))}function b(e){return o(this,void 0,void 0,(function(){return s(this,(function(t){return[2,v(!0,1,e,"NOTSET",!1,[],[],[])]}))}))}function y(e,t,n,r,i){return o(this,void 0,void 0,(function(){return s(this,(function(o){return[2,v(!1,2,e,t,!1,n,r,i)]}))}))}function _(e){return o(this,void 0,void 0,(function(){return s(this,(function(t){return[2,v(!0,2,e,"NOTSET",!1,[],[],[])]}))}))}function v(e,t,n,r,i,a,d,h){return o(this,void 0,void 0,(function(){var o,p,g,f,m,b,y,_,v,w,S,k,I,C;return s(this,(function(s){switch(s.label){case 0:switch(o="",t){case 1:o="_average_pool_f32";break;case 2:o="_max_pool_f32";break;default:throw new Error("unknown pool type")}return l.PoolConvUtil.adjustPoolAttributes(e,n.dims,a,h,d),p=l.PoolConvUtil.computePoolOutputShape(e,n.dims,h,a,d,r),g=new c.Tensor(p,n.type),1!==(f=function(e,t,n){return 1!==e||1===t||n<=0?1:Math.min(t,n+1)}(n.dims[0],n.dims[1],u.WasmBinding.workerNumber))?[3,1]:(u.WasmBinding.getInstance().ccall(o,[a.length,"int32"],[e,"bool"],[n.floatData,"float32ptr"],[n.dims,"int32ptr"],[g.floatData,"float32ptr","out"],[g.dims,"int32ptr"],[a,"int32ptr"],[d,"int32ptr"],[h,"int32ptr"],[i,"bool"]),[3,3]);case 1:for((m=n.dims.slice(0))[1]=Math.floor(n.dims[1]/f),b=l.ShapeUtil.size(m),(y=n.dims.slice(0))[1]=n.dims[1]-(f-1)*m[1],(_=p.slice(0))[1]=m[1],v=l.ShapeUtil.size(_),(w=p.slice(0))[1]=y[1],S=new Array(f-1),k=n.floatData,I=g.floatData,C=0;C<f;++C)C!==f-1?S[C]=u.WasmBinding.getInstance().ccallRemote(C,o,[a.length,"int32"],[e,"bool"],[k.subarray(C*b,(C+1)*b),"float32ptr"],[m,"int32ptr"],[I.subarray(C*v,(C+1)*v),"float32ptr","out"],[_,"int32ptr"],[a,"int32ptr"],[d,"int32ptr"],[h,"int32ptr"],[i,"bool"]):u.WasmBinding.getInstance().ccall(o,[a.length,"int32"],[e,"bool"],[k.subarray((f-1)*b),"float32ptr"],[y,"int32ptr"],[I.subarray((f-1)*v),"float32ptr","out"],[w,"int32ptr"],[a,"int32ptr"],[d,"int32ptr"],[h,"int32ptr"],[i,"bool"]);return[4,Promise.all(S)];case 2:s.sent(),s.label=3;case 3:return[2,[g]]}}))}))}t.WasmGlobalMaxPool=g},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.WasmSoftmax=void 0;var o=n(22),s=n(1),a=n(0),c=n(4),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){var n=t[0],r=a.ShapeUtil.normalizeAxis(this.axis,n.dims.length),i=a.ShapeUtil.sizeToDimension(n.dims,r),o=a.ShapeUtil.sizeFromDimension(n.dims,r),l=new s.Tensor(n.dims,n.type);return c.WasmBinding.getInstance().ccall("_softmax_f32",[n.floatData,"float32ptr"],[l.floatData,"float32ptr","out"],[i,"int32"],[o,"int32"]),[l]},t.prototype.checkInputTypes=function(e){return"float32"===e[0].type},t}(o.Softmax);t.WasmSoftmax=l},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},s=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0}),t.WasmSum=void 0;var a=n(23),c=n(1),l=n(4),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){for(var n,r=new c.Tensor(t[0].dims,t[0].type),i=t[0].floatData.length,o=new Array(t.length),a=0;a<t.length;a++)o[a]=[t[a].floatData,"float32ptr"];return(n=l.WasmBinding.getInstance()).ccall.apply(n,s(["_sum_f32",[t.length,"int32"],[i,"int32"],[r.floatData,"float32ptr","inout"]],o)),[r]},t.prototype.checkInputTypes=function(e){if("float32"!==e[0].type)return!1;for(var t=1;t<e.length;t++)if(e[0].type!==e[t].type)return!1;return!0},t}(a.Sum);t.WasmSum=u},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLBackend=void 0;var r=n(3),i=n(120),o=n(165),s=function(){function e(){}return e.prototype.initialize=function(){try{return this.glContext=o.createWebGLContext(this.contextId),"number"!=typeof this.matmulMaxBatchSize&&(this.matmulMaxBatchSize=16),"string"!=typeof this.textureCacheMode&&(this.textureCacheMode="full"),r.Logger.verbose("WebGLBackend","Created WebGLContext: "+typeof this.glContext),!0}catch(e){return r.Logger.warning("WebGLBackend","Unable to initialize WebGLBackend. "+e),!1}},e.prototype.createSessionHandler=function(e){return new i.WebGLSessionHandler(this,e)},e.prototype.dispose=function(){this.glContext.dispose()},e}();t.WebGLBackend=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLSessionHandler=void 0;var r=n(3),i=n(11),o=n(121),s=n(123),a=n(154),c=n(163),l=n(164),u=function(){function e(e,t){this.backend=e,this.context=t,this.programManager=new a.ProgramManager(this.context.profiler,e.glContext),this.layoutStrategy=new c.AlwaysKeepOriginalSizeStrategy(e.glContext.maxTextureSize),this.textureManager=new l.TextureManager(e.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:"full"===e.textureCacheMode}),this.textureDataCache=new Map}return e.prototype.createInferenceHandler=function(){return new o.WebGLInferenceHandler(this)},e.prototype.onGraphInitialized=function(e){var t=e.getValues().filter((function(e){return-1===e.from&&e.tensor})).map((function(e){return e.tensor.dataId}));this.initializers=new Set(t)},e.prototype.isInitializer=function(e){return!!this.initializers&&this.initializers.has(e)},e.prototype.getTextureData=function(e){return this.textureDataCache.get(e)},e.prototype.setTextureData=function(e,t){r.Logger.verbose("WebGLSessionHandler","Storing Texture data in cache"),this.textureDataCache.set(e,t)},e.prototype.dispose=function(){var e=this;this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.textureDataCache.forEach((function(t){return e.textureManager.releaseTexture(t,!0)})),this.textureDataCache=new Map},e.prototype.resolve=function(e,t){var n=i.resolveOperator(e,t,s.WEBGL_OP_RESOLVE_RULES);return n.initialize(e.attributes),n},e}();t.WebGLSessionHandler=u},function(e,t,n){var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s};Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLInferenceHandler=void 0;var o=n(3),s=n(1),a=n(0),c=n(122),l=n(50),u=function(){function e(e){this.session=e,this.textureDataCache=new Map}return e.prototype.run=function(e,t){var n=this.session.programManager.getArtifact(e);if(!n){var r=e.createProgramInfo(this,t);n=this.session.programManager.build(r),this.session.programManager.setArtifact(e,n)}var i=e.createRunData(this,n.programInfo,t);return this.session.programManager.run(n,i),[i.outputTextureData.tensor]},e.prototype.getOrCreateTextureData=function(e,t){var n=this.getTextureData(e.dataId);return n?o.Logger.verbose("InferenceHandler","Retrieving TextureData from cache: ["+e.dims+"]"):(o.Logger.verbose("InferenceHandler","Creating new TextureData for dims: ["+e.dims+"]"),t||(t=this.createTextureLayoutFromShape(e.dims.slice())),n=this.createTextureData(t,e.type,e.numberData,e,1)),n},e.prototype.createTextureDataFromLayout=function(e,t){return this.createTextureData(e,t)},e.prototype.createTextureDataFromLayoutBindTensor=function(e,t,n,r){return this.createTextureData(e,t,n,r,1)},e.prototype.createTextureData=function(e,t,n,r,i){o.Logger.verbose("InferenceHandler","Creating TextureData: layout:["+JSON.stringify(e)+"]");var s=this.session.textureManager.createTextureFromLayout(t,e,n,i);return this.createTextureDataFromTexture(e,t,s,r)},e.prototype.createSharedTextureData=function(e,t,n,r){return this.createTextureDataFromTexture(e,t,n,void 0,r)},e.prototype.createTextureDataFromTexture=function(e,t,n,i,o){var a=this,c=r(r({},e),{tensor:i||new s.Tensor(e.unpackedShape,t,(function(e){return a.readTexture(c)}),void 0,void 0,o),texture:n});return this.setTextureData(c.tensor.dataId,c),c},e.prototype.getTextureData=function(e){return this.session.isInitializer(e)?this.session.getTextureData(e):this.textureDataCache.get(e)},e.prototype.setTextureData=function(e,t){this.session.isInitializer(e)?this.session.setTextureData(e,t):this.textureDataCache.set(e,t)},e.prototype.getOrCreateTextureLayout=function(e,t,n){return void 0===t&&(t=1),this.getTextureData(e.dataId)||this.createTextureLayoutFromShape(1===t?e.dims.slice():l.getPackedShape(e.dims.slice()),t,n)},e.prototype.createTextureLayoutFromShape=function(e,t,n,r){void 0===t&&(t=1);var o=i(this.session.layoutStrategy.computeTextureWH(e,r),2),s=o[0],c=o[1],l=e;if(0===e.length&&(l=[1]),1===t)n=e;else if(!n)throw new Error("Unpacked shape is needed when using channels > 1");return{width:s,height:c,channels:t||1,shape:l,strides:a.ShapeUtil.computeStrides(l),unpackedShape:n}},e.prototype.dispose=function(){var e=this;this.session.textureManager.clearActiveTextures(),this.textureDataCache.forEach((function(t){return e.session.textureManager.releaseTexture(t)})),this.textureDataCache=new Map},e.prototype.readTexture=function(e){if(!this.session.backend.glContext.isFloat32DownloadSupported){var t=(new c.WebGLUint8Encode).runInternal(this,e);return this.session.textureManager.readUint8TextureAsFloat(t)}return this.session.textureManager.readTexture(e,e.tensor.type,e.channels)},e}();t.WebGLInferenceHandler=u},function(e,t,n){var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s};Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLUint8Encode=void 0;var i=n(0),o=n(2),s=function(){function e(){}return e.prototype.runInternal=function(e,t){var n=t.shape,s=r(e.session.layoutStrategy.computeTextureWH(t.shape),2),a={width:s[0],height:s[1],channels:4,shape:n,strides:i.ShapeUtil.computeStrides(n),unpackedShape:n},c=o.getGlsl(e.session.backend.glContext.version),l={inputLayouts:[t],outputLayout:a,samplers:["X"],shaderSource:"\n      const float FLOAT_MAX = 1.70141184e38;\n      const float FLOAT_MIN = 1.17549435e-38;\n\n      bool isNaN(float val) {\n        return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;\n      }\n\n      highp vec4 encodeAsUint8(highp float v) {\n        if (isNaN(v)) {\n          return vec4(255, 255, 255, 255);\n        }\n\n        highp float av = abs(v);\n\n        if(av < FLOAT_MIN) {\n          return vec4(0.0, 0.0, 0.0, 0.0);\n        } else if(v > FLOAT_MAX) {\n          return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n        } else if(v < -FLOAT_MAX) {\n          return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n        }\n\n        highp vec4 c = vec4(0,0,0,0);\n\n        highp float e = floor(log2(av));\n        highp float m = exp2(fract(log2(av))) - 1.0;\n\n        c[2] = floor(128.0 * m);\n        m -= c[2] / 128.0;\n        c[1] = floor(32768.0 * m);\n        m -= c[1] / 32768.0;\n        c[0] = floor(8388608.0 * m);\n\n        highp float ebias = e + 127.0;\n        c[3] = floor(ebias / 2.0);\n        ebias -= c[3] * 2.0;\n        c[2] += floor(ebias) * 128.0;\n\n        c[3] += 128.0 * step(0.0, -v);\n\n        return c / 255.0;\n      }\n\n      void main() {\n        float value = "+c.texture2D+"(X,TexCoords).r;\n        "+c.output+" = encodeAsUint8(value);\n      }",hasMain:!0},u=e.session.programManager.build(l),d=e.session.backend.glContext.getEncoder("byte",4),h=e.session.backend.glContext.allocateTexture(a.width,a.height,d),p={inputTextureDatas:[t],outputTextureData:e.createSharedTextureData(a,"uint8",h,{}),uniformData:{}};return e.session.programManager.run(u,p),p.outputTextureData},e}();t.WebGLUint8Encode=s},function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.WEBGL_OP_RESOLVE_RULES=void 0;var s=n(7),a=n(124),c=o(n(125)),l=n(126),u=n(127),d=n(128),h=n(129),p=n(130),g=n(132),f=n(133),m=n(134),b=n(135),y=n(136),_=n(137),v=n(139),w=n(140),S=n(141),k=o(n(142)),I=n(10),C=n(143),E=n(144),A=n(145),x=n(147),T=n(148),O=n(149),P=n(150),R=o(n(151)),D=n(152),N=n(153);t.WEBGL_OP_RESOLVE_RULES=[["Abs","","6+",function(){return new R.WebGLUnaryOp(s.NUMBER_TYPES,R.glslAbs())}],["Acos","","7+",function(){return new R.WebGLUnaryOp(s.FLOAT_TYPES,R.glslAcos())}],["Add","","7+",function(){return new c.WebGLBinaryOp(s.NUMBER_TYPES,c.glslAdd())}],["And","","7+",function(){return new c.WebGLBinaryOp(["bool"],c.glslAnd())}],["Asin","","7+",function(){return new R.WebGLUnaryOp(s.FLOAT_TYPES,R.glslAsin())}],["Atan","","7+",function(){return new R.WebGLUnaryOp(s.FLOAT_TYPES,R.glslAtan())}],["AveragePool","","7-10",function(){return new S.WebGLAveragePool}],["BatchNormalization","","7+",function(){return new a.WebGLBatchNormalization}],["Ceil","","6+",function(){return new R.WebGLUnaryOp(s.FLOAT_TYPES,R.glslCeil())}],["Clip","","6-10",function(){return new l.WebGLClip}],["Concat","","4+",function(){return new u.WebGLConcat}],["Conv","","1+",function(){return new d.WebGLConv}],["Cos","","7+",function(){return new R.WebGLUnaryOp(s.FLOAT_TYPES,R.glslCos())}],["Div","","7+",function(){return new c.WebGLBinaryOp(s.NUMBER_TYPES,c.glslDiv())}],["Dropout","","7+",function(){return new h.WebGLDropout}],["Equal","","7+",function(){return new c.WebGLBinaryOp(s.NUMBER_TYPES,c.glslEqual(),void 0,"bool")}],["Elu","","6+",function(){return new p.WebGLElu}],["Exp","","6+",function(){return new R.WebGLUnaryOp(s.FLOAT_TYPES,R.glslExp())}],["Flatten","","1+",function(){return new g.WebGLFlatten}],["Floor","","6+",function(){return new R.WebGLUnaryOp(s.FLOAT_TYPES,R.glslFloor())}],["Gather","","1+",function(){return new f.WebGLGather}],["Gemm","","7-10",function(){return new m.WebGLGemm(!1)}],["Gemm","","11+",function(){return new m.WebGLGemm(!0)}],["GlobalAveragePool","","1+",function(){return new S.WebGLGlobalAveragePool}],["GlobalMaxPool","","1+",function(){return new S.WebGLGlobalMaxPool}],["Greater","","7+",function(){return new c.WebGLBinaryOp(s.NUMBER_TYPES,c.glslGreater(),void 0,"bool")}],["Identity","","1+",function(){return new R.WebGLUnaryOp(s.NUMBER_TYPES,R.glslIdentity())}],["ImageScaler","","1+",function(){return new b.WebGLImageScaler}],["InstanceNormalization","","6+",function(){return new y.WebGLInstanceNormalization}],["LeakyRelu","","6+",function(){return new _.WebGLLeakyRelu}],["Less","","7+",function(){return new c.WebGLBinaryOp(s.NUMBER_TYPES,c.glslLess(),void 0,"bool")}],["Log","","6+",function(){return new R.WebGLUnaryOp(s.FLOAT_TYPES,R.glslLog())}],["MatMul","","1+",function(){return new v.WebGLMatMul}],["MaxPool","","1-9",function(){return new S.WebGLMaxPool}],["Mul","","7+",function(){return new c.WebGLBinaryOp(s.NUMBER_TYPES,c.glslMul())}],["Neg","","6+",function(){return new R.WebGLUnaryOp(s.NUMBER_TYPES,R.glslNeg())}],["Not","","1+",function(){return new R.WebGLUnaryOp(["bool"],R.glslNot())}],["Or","","7+",function(){return new c.WebGLBinaryOp(["bool"],c.glslOr())}],["Pad","","2-10",function(){return new w.WebGLPad}],["Pow","","7+",function(){return new c.WebGLBinaryOp(s.FLOAT_TYPES,c.glslPow())}],["PRelu","","7+",function(){return new c.WebGLBinaryOp(s.FLOAT_TYPES,c.glslPRelu())}],["ReduceLogSum","","1+",function(){return new k.WebGLReduceLogSum}],["ReduceMax","","1+",function(){return new k.WebGLReduceMax}],["ReduceMean","","1+",function(){return new k.WebGLReduceMean}],["ReduceMin","","1+",function(){return new k.WebGLReduceMin}],["ReduceProd","","1+",function(){return new k.WebGLReduceProd}],["ReduceSum","","1+",function(){return new k.WebGLReduceSum}],["ReduceSumSquare","","1+",function(){return new k.WebGLReduceSumSquare}],["Relu","","6+",function(){return new R.WebGLUnaryOp(s.FLOAT_TYPES,R.glslRelu())}],["Reshape","","5+",function(){return new I.WebGLReshape}],["Sigmoid","","6+",function(){return new R.WebGLUnaryOp(s.FLOAT_TYPES,R.glslSigmoid())}],["Sin","","7+",function(){return new R.WebGLUnaryOp(s.FLOAT_TYPES,R.glslSin())}],["Slice","","10+",function(){return new C.WebGLSliceV10}],["Slice","","1-9",function(){return new C.WebGLSlice}],["Softmax","","1+",function(){return new E.WebGLSoftmax}],["Split","","2+",function(e){return new A.WebGLSplit(e.outputs.length)}],["Sqrt","","6+",function(){return new R.WebGLUnaryOp(s.FLOAT_TYPES,R.glslSqrt())}],["Squeeze","","1+",function(){return new x.WebGLSqueeze}],["Sub","","7+",function(){return new c.WebGLBinaryOp(s.NUMBER_TYPES,c.glslSub())}],["Sum","","6+",function(){return new T.WebGLSum}],["Tan","","7+",function(){return new R.WebGLUnaryOp(s.FLOAT_TYPES,R.glslTan())}],["Tanh","","6+",function(){return new R.WebGLUnaryOp(s.FLOAT_TYPES,R.glslTanh())}],["Tile","","6+",function(){return new O.WebGLTile}],["Transpose","","1+",function(){return new P.WebGLTranspose}],["Upsample","","7-8",function(){return new N.WebGLUpsample}],["Unsqueeze","","1+",function(){return new D.WebGLUnsqueeze}],["Xor","","7+",function(){return new c.WebGLBinaryOp(["bool"],c.glslXor())}]]},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLBatchNormalization=void 0;var o=n(14),s=n(2),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return e.run(this,t)},t.prototype.createProgramInfo=function(e,t){var n=t.map((function(t){return e.getOrCreateTextureLayout(t)})),r=t[0].dims.slice(),i=r.length,o=n[1],a=s.getGlsl(e.session.backend.glContext.version),c="\n      float process(int["+i+"] indices) {\n        vec2 position = offsetToCoords(indices[1], "+o.width+", "+o.height+");\n        float scale = getColorAsFloat("+a.texture2D+"(Scale, position));\n        float mean = getColorAsFloat("+a.texture2D+"(Mean, position));\n        float variance = getColorAsFloat("+a.texture2D+"(Variance, position));\n        float b = getColorAsFloat("+a.texture2D+"(B, position));\n\n        return scale * ( (_A(indices) - mean) / sqrt(variance + float("+this.epsilon+")) ) + b;\n      }";return{inputLayouts:n,outputLayout:e.createTextureLayoutFromShape(r),samplers:["A","Scale","B","Mean","Variance"],shaderSource:c}},t.prototype.createRunData=function(e,t,n){var r=[e.getOrCreateTextureData(n[0],t.inputLayouts[0])];n.slice(1).forEach((function(t){return r.push(e.getOrCreateTextureData(t))}));var i=e.createTextureDataFromLayout(t.outputLayout,r[0].tensor.type);return{inputTextureDatas:r,outputTextureData:i,uniformData:{}}},t}(o.BatchNormalization);t.WebGLBatchNormalization=a},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.glslPRelu=t.glslPow=t.glslXor=t.glslOr=t.glslAnd=t.glslLess=t.glslGreater=t.glslEqual=t.glslSub=t.glslMul=t.glslDiv=t.glslAdd=t.WebGLBinaryOp=void 0;var o=n(15),s=n(0),a=n(5),c=n(2),l=function(e){function t(t,n,r,i){var o=e.call(this,t,r,i)||this;return o.glslFunc=n,o}return i(t,e),t.prototype.run=function(e,t){return e.run(this,t)},t.prototype.createProgramInfo=function(e,t){var n=t.map((function(t){return e.getOrCreateTextureLayout(t)}));if(!s.ShapeUtil.areEqual(t[0].dims,t[1].dims)){var r=s.BroadcastUtil.calcShape(t[0].dims,t[1].dims,!1);if(!r)throw new Error("Can't perform binary op on the given tensors");var i=r.length,o=0!==t[0].dims.length?t[0].dims.length:1,a=0!==t[1].dims.length?t[1].dims.length:1,l=0!==t[0].dims.length?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",u=0!==t[1].dims.length?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",d="\n      "+this.glslFunc.body+"\n      float process(int indices["+i+"]) {\n        int aindices["+o+"];\n        int bindices["+a+"];\n        "+l+"\n        "+u+"\n        return "+this.glslFunc.name+"(_A(aindices), _B(bindices));\n    }";return{inputLayouts:n,outputLayout:e.createTextureLayoutFromShape(r),samplers:["A","B"],shaderSource:d}}var h=c.getGlsl(e.session.backend.glContext.version),p="\n    "+this.glslFunc.body+"\n    void main() {\n      vec4 v1 = "+h.texture2D+"(A, TexCoords);\n      vec4 v2 = "+h.texture2D+"(B, TexCoords);\n      vec4 result = "+this.glslFunc.name+"(v1, v2);\n      "+h.output+" = result;\n    }\n    ";return{hasMain:!0,inputLayouts:n,outputLayout:e.createTextureLayoutFromShape(t[0].dims),samplers:["A","B"],shaderSource:p}},t.prototype.createRunData=function(e,t,n){return{inputTextureDatas:n.map((function(n,r){return e.getOrCreateTextureData(n,t.inputLayouts[r])})),outputTextureData:e.createTextureDataFromLayout(t.outputLayout,this.resultType?this.resultType:n[0].type),uniformData:{}}},t}(o.BinaryOp);t.WebGLBinaryOp=l,t.glslAdd=function(){return{body:"\n  float add_(float a, float b) {\n    return a + b;\n  }\n  vec4 add_(vec4 v1, vec4 v2) {\n    return v1 + v2;\n  }\n  ",name:"add_",type:a.FunctionType.ValueBased}},t.glslDiv=function(){return{body:"\n  float div_(float a, float b) {\n    return a / b;\n  }\n  vec4 div_(vec4 v1, vec4 v2) {\n    return v1 / v2;\n  }\n  ",name:"div_",type:a.FunctionType.ValueBased}},t.glslMul=function(){return{body:"\n  float mul_(float a, float b) {\n    return a * b;\n  }\n  vec4 mul_(vec4 v1, vec4 v2) {\n    return v1 * v2;\n  }\n  ",name:"mul_",type:a.FunctionType.ValueBased}},t.glslSub=function(){return{body:"\n  float sub_(float a, float b) {\n    return a - b;\n  }\n  vec4 sub_(vec4 v1, vec4 v2) {\n    return v1 - v2;\n  }\n  ",name:"sub_",type:a.FunctionType.ValueBased}},t.glslEqual=function(){return{body:"\n  float equal_(float a, float b) {\n    return float(a == b);\n  }\n  vec4 equal_(vec4 v1, vec4 v2) {\n    return vec4( v1 == v2 );\n  }\n  ",name:"equal_",type:a.FunctionType.ValueBased}},t.glslGreater=function(){return{body:"\n  float greater_(float a, float b) {\n    return float(a > b);\n  }\n  vec4 greater_(vec4 v1, vec4 v2) {\n    return vec4( v1.r > v2.r ,\n      v1.g > v2.g,\n      v1.b > v2.b,\n      v1.a > v2.a );\n  }\n  ",name:"greater_",type:a.FunctionType.ValueBased}},t.glslLess=function(){return{body:"\n  float less_(float a, float b) {\n    return float(a < b);\n  }\n  vec4 less_(vec4 v1, vec4 v2) {\n    return vec4( v1.r < v2.r ,\n                v1.g < v2.g,\n                v1.b < v2.b,\n                v1.a < v2.a );\n  }\n  ",name:"less_",type:a.FunctionType.ValueBased}},t.glslAnd=function(){return{body:"\n  float and_(float a, float b) {\n    return float( bool(a) && bool(b) );\n  }\n  vec4 and_(vec4 v1, vec4 v2) {\n    bvec4 b1 = bvec4(v1);\n    bvec4 b2 = bvec4(v2);\n    return vec4( b1.r && b2.r ,\n                b1.g && b2.g,\n                b1.b && b2.b,\n                b1.a && b2.a );\n  }\n  ",name:"and_",type:a.FunctionType.ValueBased}},t.glslOr=function(){return{body:"\n  float or_(float a, float b) {\n    return float( bool(a) || bool(b) );\n  }\n  vec4 or_(vec4 v1, vec4 v2) {\n    bvec4 b1 = bvec4(v1);\n    bvec4 b2 = bvec4(v2);\n    return vec4( b1.r || b2.r ,\n                b1.g || b2.g,\n                b1.b || b2.b,\n                b1.a || b2.a );\n  }\n  ",name:"or_",type:a.FunctionType.ValueBased}},t.glslXor=function(){return{body:"\n  float xor_(float a, float b) {\n    return float( bool(a) ^^ bool(b) );\n  }\n  vec4 xor_(vec4 v1, vec4 v2) {\n    bvec4 b1 = bvec4(v1);\n    bvec4 b2 = bvec4(v2);\n    return vec4( b1.r ^^ b2.r ,\n                b1.g ^^ b2.g,\n                b1.b ^^ b2.b,\n                b1.a ^^ b2.a );\n  }\n  ",name:"xor_",type:a.FunctionType.ValueBased}},t.glslPow=function(){return function(e){var t=e+"_";return{body:"\n  float pow_(float a, float b) {\n    return pow(a, b);\n  }\n  vec4 pow_(vec4 v1, vec4 v2) {\n    return pow(v1, v2);\n  }\n  ",name:t,type:a.FunctionType.ValueBased}}("pow")},t.glslPRelu=function(){return{body:"\n  float prelu_(float a, float b) {\n    return a < 0.0 ? a * b: a;\n  }\n  vec4 prelu_(vec4 v1, vec4 v2) {\n    return vec4(\n      v1.r < 0.0 ? v1.r * v2.r: v1.r,\n      v1.g < 0.0 ? v1.g * v2.g: v1.g,\n      v1.b < 0.0 ? v1.b * v2.b: v1.b,\n      v1.a < 0.0 ? v1.a * v2.a: v1.a\n      );\n  }\n  ",name:"prelu_",type:a.FunctionType.ValueBased}}},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLClip=void 0;var o=n(49),s=n(2),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return e.run(this,t)},t.prototype.createProgramInfo=function(e,t){var n=t[0].dims.slice(),r=s.getGlsl(e.session.backend.glContext.version),i="\n      const float min = float("+this.min+");\n      const float max = float("+this.max+");\n      void main() {\n        float v = "+r.texture2D+"(A, TexCoords).r;\n        "+r.output+" = vec4(clamp(v, min, max));\n      }\n      ";return{inputLayouts:[e.getOrCreateTextureLayout(t[0])],outputLayout:e.createTextureLayoutFromShape(n),samplers:["A"],shaderSource:i,hasMain:!0}},t.prototype.createRunData=function(e,t,n){var r=[e.getOrCreateTextureData(n[0],t.inputLayouts[0])];return{inputTextureDatas:r,outputTextureData:e.createTextureDataFromLayout(t.outputLayout,r[0].tensor.type),uniformData:{}}},t}(o.Clip);t.WebGLClip=a},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLConcat=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return e.run(this,t)},t.prototype.createProgramInfo=function(e,t){var n=t[0].dims.slice();if(this.axis>=n.length||this.axis<-1*n.length)throw new Error("axis specified for concat doesn't match input dimensionality");this.axis<0&&(this.axis=n.length+this.axis);for(var r=n.slice(0),i=1;i<t.length;i++)for(var o=t[i].dims.slice(),s=0;s<n.length;s++)if(s===this.axis)r[this.axis]+=o[s];else if(n[s]!==o[s])throw new Error("non concat dimensions must match");var a,c=r.length;a=t.length<5?this.getTextureIndexWhereDataResidesLinearSearch(t.length):this.getTextureIndexWhereDataResidesBinarySearch(t.length);var l=this.fetchDataFromCorrectTextureMethod(t.length,c),u=this.getValueFromArrayIndexMethod(t.length),d=t.map((function(e,t){return"X"+t})),h="\n      "+l+"\n      "+u+"\n      "+a+"\n      float process(int indices["+c+"]) {\n        int textureIndex = getTextureWhereDataResides (indices["+this.axis+"]);\n\n        if(textureIndex != 0) {\n          indices["+this.axis+"] = indices["+this.axis+"] - int(getValueFromArrayIndex(sizeInConcatAxis, textureIndex-int(1)));\n        }\n\n        return fetchDataFromCorrectTexture(textureIndex, indices);\n      }";return{inputLayouts:t.map((function(t){return e.getOrCreateTextureLayout(t)})),outputLayout:e.createTextureLayoutFromShape(r),samplers:d,variables:[{name:"sizeInConcatAxis",type:"int",arrayLength:t.length}],shaderSource:h}},t.prototype.createRunData=function(e,t,n){for(var r=n.map((function(n,r){return e.getOrCreateTextureData(n,t.inputLayouts[r])})),i=new Array(t.inputLayouts.length),o=0,s=0;s<t.inputLayouts.length;++s)o+=t.inputLayouts[s].shape[this.axis],i[s]=o;var a={sizeInConcatAxis:i};return{inputTextureDatas:r,outputTextureData:e.createTextureDataFromLayout(t.outputLayout,r[0].tensor.type),uniformData:a}},t.prototype.getTextureIndexWhereDataResidesLinearSearch=function(e){return"int getTextureWhereDataResides(int index) {\n      for(int i=0; i<"+e+"; i++) {\n          if(index < int(sizeInConcatAxis[i])){\n              return i;\n          }\n        }\n      }"},t.prototype.getTextureIndexWhereDataResidesBinarySearch=function(e){return this.getTextureIndexWhereDataResidesLinearSearch(e)},t.prototype.fetchDataFromCorrectTextureMethod=function(e,t){for(var n=["float fetchDataFromCorrectTexture(int textureIndex, int indices["+t+"]) {"],r=0;r<e;++r)0===r?n.push("\tif (textureIndex == "+r+") { return _X"+r+"(indices); }"):r===e-1?n.push("\telse { return _X"+r+"(indices); }"):n.push("\telse if (textureIndex == "+r+") { return _X"+r+"(indices); }");return n.push("\t}"),n.join("\n")},t.prototype.getValueFromArrayIndexMethod=function(e){for(var t=["int getValueFromArrayIndex(int arr["+e+"], int index) {"],n=0;n<e;++n)0===n?t.push("\tif (index == "+n+") { return arr["+n+"]; }"):n===e-1?t.push("\telse { return arr["+n+"]; }"):t.push("\telse if (index == "+n+") { return arr["+n+"]; }");return t.push("\t}"),t.join("\n")},t}(n(30).Concat);t.WebGLConcat=o},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},s=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLConv=void 0;var a=n(3),c=n(16),l=n(0),u=n(2),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.readSize=8,t.blockSize=64,t}return i(t,e),t.prototype.run=function(e,t){var n=e.session.programManager;if(!this.artifacts){this.artifacts=[];for(var r=this.createProgramInfos(e,t),i=0;i<r.length;++i){var o=e.session.programManager.build(r[i]);this.artifacts.push(o)}}var s=this.createRunDatas(e,this.artifacts.map((function(e){return e.programInfo})),t);return n.run(this.artifacts[0],s[0]),n.run(this.artifacts[1],s[1]),[s[1].outputTextureData.tensor]},t.prototype.createProgramInfos=function(e,n){var r=n[0].dims.slice(),i=n[1].dims.slice();if(0===this.kernelShape.length)for(var o=n[1].dims,s=2;s<o.length;++s)this.kernelShape.push(o[s]);l.PoolConvUtil.adjustPadsBasedOnAutoPad(n[0].dims,this.strides,this.dilations,this.kernelShape,this.pads,this.autoPad),a.Logger.verbose("Conv","autpPad:"+this.autoPad+", dilations:"+this.dilations+", group:"+this.group+", kernelShape:"+this.kernelShape+", pads:"+this.pads+", strides:"+this.strides);var c=t.calcOutputShape(r,i,this.dilations,this.pads,this.strides),u=this.createIm2ColProgramInfo(e,n,c);return[u,this.createDotProductProgramInfo(e,u.outputLayout,n,c)]},t.prototype.createRunDatas=function(e,n,r){var i=r[1],o=r.length>=3?r[2]:void 0,s=e.getTextureData(i.dataId);if(!s){a.Logger.verbose("Conv","Did not find the adjustedKernel texture in the cache. Creating rew.");var c=t.prepKernelForDotProduct(i.dims.slice(),this.group,4,i.floatData);s=e.createTextureDataFromLayoutBindTensor(n[1].inputLayouts[1],i.type,c,i)}var l={inputTextureDatas:[e.getOrCreateTextureData(r[0])],outputTextureData:e.createTextureDataFromLayout(n[0].outputLayout,r[0].type),uniformData:{}},u=[l.outputTextureData,s];return o&&u.push(e.getOrCreateTextureData(o)),[l,{inputTextureDatas:u,outputTextureData:e.createTextureDataFromLayout(n[1].outputLayout,r[0].type),uniformData:{},draw:function(e,t){for(var n=e.gl,r=t.programInfo.params.sharedDim,i=t.programInfo.params.sharedDimReadSize,o=t.uniformLocations.find((function(e){return"sharedDimOffset"===e.name})).location,s=!1,c=0;c<r;c+=i)a.Logger.verbose("MatMul2D","k = "+c+", sharedDim: "+r+", readSize = "+i),c===i&&(s=!0,n.enable(n.BLEND),e.checkError(),n.blendEquation(n.FUNC_ADD),e.checkError(),n.blendFunc(n.ONE,n.ONE),e.checkError()),n.uniform1i(o,c),e.checkError(),e.draw();s&&(n.disable(n.BLEND),e.checkError())}}]},t.prototype.createIm2ColProgramInfo=function(e,n,r){var i=n[0].dims.slice(),o=n[1].dims.slice(),s=r.length,a=t.calcIm2ColDims(i,o,r,4),c=e.createTextureLayoutFromShape(a,4,[a[0],a[1],a[2],4*a[3]],{breakAxis:3}),l="\n      const int XC = "+i[1]+";\n      const int XH = "+i[2]+";\n      const int XW = "+i[3]+";\n      const int KH = "+this.kernelShape[0]+";\n      const int KW = "+this.kernelShape[1]+";\n      const int dilationH = "+this.dilations[0]+";\n      const int dilationW = "+this.dilations[1]+";\n      const int strideH = "+this.strides[0]+";\n      const int strideW = "+this.strides[1]+";\n      const int padH = "+this.pads[0]+";\n      const int padW = "+this.pads[1]+";\n      const int KHKW = KH*KW;\n      const int XCKHKW = XC * KHKW;\n      const int outputChannels = 4;\n\n      vec4 process(int indices["+s+"]) {\n        int b  = indices[0]; // batch size\n        int oh = indices[1] * strideH - padH; //output height\n        int ow = indices[2] * strideW - padW; //output width\n        int p = indices[3] * outputChannels; //patch\n        vec4 v = vec4(0.0);\n        for(int i=0; i < outputChannels; ++i) {\n          if(p < XCKHKW) {\n            int patchC = p / KHKW;\n            int patchH = (p - patchC*KHKW) / KW;\n            int patchW = (p - patchC*KHKW) - patchH * KW;\n            int xh2 = oh + patchH * dilationH;\n            int xw2 = ow + patchW * dilationW;\n            int x["+i.length+"];\n            x[0] = b;\n            x[1] = patchC;\n            x[2] = xh2;\n            x[3] = xw2;\n            if(xh2 >= 0 &&\n                xh2 < XH &&\n                xw2 >= 0 &&\n                xw2 < XW) {\n              v[i] = _X(x);\n            }\n          }\n          ++p;\n        }\n        return v;\n      }\n      ";return{inputLayouts:[e.createTextureLayoutFromShape(i)],outputLayout:c,samplers:["X"],shaderSource:l}},t.prototype.createDotProductProgramInfo=function(e,t,n,r){var i,o=n[0].dims.slice(),s=n[1].dims.slice(),a=[s[0],Math.ceil(o[1]*s[2]*s[3]/4)],c=e.createTextureLayoutFromShape(a,4,[a[0],4*a[1]],{breakAxis:1}),l=r.length,d=[t,c];3===n.length&&(i=e.createTextureLayoutFromShape(n[2].dims.slice()),d.push(i));var h=e.createTextureLayoutFromShape(r),p=n.length<3?"0.0":"_B(b)",g=t.shape[3],f=e.session.backend.glContext.isBlendSupported&&e.session.backend.matmulMaxBatchSize?this.calcSharedDimReadSize(e.session.backend.matmulMaxBatchSize,g):g,m=["Im2Col","K"];3===n.length&&m.push("B");var b=u.getGlsl(e.session.backend.glContext.version),y="\n    float process(int indices["+l+"]) {\n      int b[1];\n      b[0] = indices[1];\n      int im2col["+t.shape.length+"];\n      im2col[0] = indices[0];\n      im2col[1] = indices[2];\n      im2col[2] = indices[3];\n      int im2colOffset = im2col[0] * "+t.strides[0]+" + im2col[1] * "+t.strides[1]+" + im2col[2] * "+t.strides[2]+" + sharedDimOffset;\n      int kernelOffset = indices[1] * "+c.strides[0]+" + sharedDimOffset;\n      float sum = sharedDimOffset == 0 ? "+p+" : 0.0;\n      for (int i = 0; i < "+f+"; ++i) {\n        vec2 im2colCoords = offsetToCoords(im2colOffset, "+t.width+", "+t.height+");\n        vec2 kernelCoords = offsetToCoords(kernelOffset, "+c.width+", "+c.height+");\n        sum += dot("+b.texture2D+"(Im2Col, im2colCoords), "+b.texture2D+"(K, kernelCoords));\n        ++im2colOffset;\n        ++kernelOffset;\n      }\n      return sum;\n    }";return{inputLayouts:3===n.length?[t,c,i]:[t,c],outputLayout:h,shaderSource:y,samplers:m,variables:[{name:"sharedDimOffset",type:"int"}],params:{sharedDim:g,sharedDimReadSize:f}}},t.prepKernelForDotProduct=function(e,t,n,r){if(1===t&&(1===n||e[2]*e[3]%n==0))return r;for(var i=e[0],o=e[1]*e[2]*e[3],s=Math.ceil(o*t/n)*n,a=new Float32Array(i*s),c=0;c<i;++c){var l=c*o,u=c*s+c%t*o;a.set(r.subarray(l,l+o),u)}return a},t.calcIm2ColDims=function(e,t,n,r){return void 0===r&&(r=1),[n[0],n[2],n[3],Math.ceil(e[1]*t[2]*t[3]/r)]},t.calcOutputShape=function(e,t,n,r,i){var o,a=e[0],c=e.slice(2),l=c.length,u=t[0],d=t.slice(2).map((function(e,t){return e+(e-1)*(n[t]-1)})),h=c.map((function(e,t){return e+r[t]+r[t+l]})).map((function(e,t){return Math.floor((e-d[t]+i[t])/i[t])}));return(o=[a,u]).concat.apply(o,s(h))},t.prototype.calcSharedDimReadSize=function(e,t){return e<=0||t<e||t%e!=0?t:e},t.prototype.calcBlockSize=function(e){if(!(e.height<64))return[64,64]},t}(c.Conv);t.WebGLConv=d},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLDropout=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){if(this.testMode)return[t[0]];throw new Error("Non test mode Dropout is not implemented yet")},t.prototype.createProgramInfo=function(e,t){throw new Error("Non test mode Dropout is not implemented yet")},t.prototype.createRunData=function(e,t,n){throw new Error("Non test mode Dropout is not implemented yet")},t}(n(31).Dropout);t.WebGLDropout=o},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLElu=void 0;var o=n(131),s=n(2),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return e.run(this,t)},t.prototype.createProgramInfo=function(e,t){var n=t[0].dims.slice(),r=s.getGlsl(e.session.backend.glContext.version),i="\n      void main() {\n        float v = "+r.texture2D+"(A, TexCoords).r;\n        "+r.output+" = vec4(v >= 0.0 ? v: (exp(v) - 1.0) * "+this.alpha.toExponential()+"); /* float number format */\n      }\n      ";return{inputLayouts:[e.getOrCreateTextureLayout(t[0])],outputLayout:e.createTextureLayoutFromShape(n),samplers:["A"],shaderSource:i,hasMain:!0}},t.prototype.createRunData=function(e,t,n){var r=[e.getOrCreateTextureData(n[0],t.inputLayouts[0])];return{inputTextureDatas:r,outputTextureData:e.createTextureDataFromLayout(t.outputLayout,r[0].tensor.type),uniformData:{}}},t}(o.Elu);t.WebGLElu=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Elu=void 0;var r=function(){function e(){}return e.prototype.initialize=function(e){this.alpha=e.getFloat("alpha",1)},e.prototype.checkInputs=function(e){return!(!e||1!==e.length)&&this.checkInputTypes(e)},e.prototype.checkInputTypes=function(e){return"float32"===e[0].type||"float64"===e[0].type},e}();t.Elu=r},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLFlatten=void 0;var o=n(32),s=n(0),a=n(10),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){var n=s.ShapeUtil.flattenShape(t[0].dims,this.axis);return[a.reshape(e,t[0],n)]},t}(o.Flatten);t.WebGLFlatten=c},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLGather=void 0;var o=n(33),s=n(0),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return e.run(this,t)},t.prototype.createProgramInfo=function(e,t){var n=t[0].dims.slice(),r=t[1].dims.slice(),i=new Array(n.length+r.length-1);if(0===i.length)throw Error("A scalar tensor output has not been supported");for(var o=s.ShapeUtil.normalizeAxis(this.axis,n.length),a=[],c=0;c<i.length;c++)c<o?(i[c]=n[c],a.push("inputIdx["+c+"] = outputIdx["+c+"];")):c<o+r.length?(i[c]=r[c-o],a.push("indexDataIdx["+(c-o)+"] = outputIdx["+c+"];")):(i[c]=n[c-r.length+1],a.push("inputIdx["+(c-r.length+1)+"] = outputIdx["+c+"];"));var l="\n      float process(int outputIdx["+i.length+"]) {\n        int inputIdx["+n.length+"];\n        int indexDataIdx["+r.length+"];\n        "+a.join("\n        ")+"\n        int idx = int(_B(indexDataIdx));\n        inputIdx["+o+"] = idx < 0 ? idx + "+n[o]+" : idx;\n        return _A(inputIdx);\n      }";return{inputLayouts:t.map((function(t){return e.getOrCreateTextureLayout(t)})),outputLayout:e.createTextureLayoutFromShape(i),samplers:["A","B"],shaderSource:l}},t.prototype.createRunData=function(e,t,n){var r=n.map((function(n,r){return e.getOrCreateTextureData(n,t.inputLayouts[r])}));return{inputTextureDatas:r,outputTextureData:e.createTextureDataFromLayout(t.outputLayout,r[0].tensor.type),uniformData:{}}},t}(o.Gather);t.WebGLGather=a},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s};Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLGemm=void 0;var s=n(19),a=n(0),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return e.run(this,t)},t.prototype.createProgramInfo=function(e,t){var n=t[0].dims.slice(),r=t[1].dims.slice(),i=o(a.GemmUtil.getShapeOfGemmResult(n,this.transA,r,this.transB,3===t.length?t[2].dims:void 0),2),s=[i[0],i[1]];if(!s)throw new Error("Can't use gemm on the given tensors");var c=n[n.length-1],l="";this.transA&&(c=n[0]),this.transA&&this.transB?l="value += _A_T(a) * _B_T(b);":this.transA&&!this.transB?l="value += _A_T(a) * _B(b);":!this.transA&&this.transB?l="value += _A(a) * _B_T(b);":this.transA||this.transB||(l="value += _A(a) * _B(b);");var u=s.length,d="\n      float process(int indices["+u+"]) {\n          int a["+u+"];\n          int b["+u+"];\n          "+(3===t.length?"int c["+t[2].dims.length+"];":"")+"\n\n          copyVec(indices, a);\n          copyVec(indices, b);\n          "+(3===t.length?"bcastIndices_C(indices, c);":"")+"\n\n          float value = 0.0;\n          for (int k=0; k<"+c+"; ++k) {\n              a["+(u-1)+"] = k;\n              b["+(u-2)+"] = k;\n              "+l+"\n          }\n\n          value = value * alpha;\n          "+(3===t.length?"value += beta * _C(c);":"")+"\n          return value;\n      }";return{inputLayouts:t.map((function(t){return e.getOrCreateTextureLayout(t)})),outputLayout:e.createTextureLayoutFromShape(s),samplers:3===t.length?["A","B","C"]:["A","B"],variables:[{name:"alpha",type:"float"},{name:"beta",type:"float"}],shaderSource:d}},t.prototype.createRunData=function(e,t,n){var r=n.map((function(n,r){return e.getOrCreateTextureData(n,t.inputLayouts[r])}));return{inputTextureDatas:r,outputTextureData:e.createTextureDataFromLayout(t.outputLayout,r[0].tensor.type),uniformData:{alpha:this.alpha,beta:this.beta}}},t}(s.Gemm);t.WebGLGemm=c},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLImageScaler=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return e.run(this,t)},t.prototype.createProgramInfo=function(e,t){var n=t[0].dims.slice(),r=n.length,i="\n      "+this.createGetBiasMethod(this.bias.length)+"\n      float process(int indices["+r+"]) {\n        return _X(indices) * scale + getBias(bias, indices[1]);\n      }";return{inputLayouts:[e.getOrCreateTextureLayout(t[0])],outputLayout:e.createTextureLayoutFromShape(n),samplers:["X"],variables:[{name:"bias",type:"float",arrayLength:this.bias.length},{name:"scale",type:"float"}],shaderSource:i}},t.prototype.createRunData=function(e,t,n){var r=[e.getOrCreateTextureData(n[0],t.inputLayouts[0])];return{inputTextureDatas:r,outputTextureData:e.createTextureDataFromLayout(t.outputLayout,r[0].tensor.type),uniformData:{bias:this.bias,scale:this.scale}}},t.prototype.createGetBiasMethod=function(e){for(var t=["float getBias(float bias["+e+"], int channel) {"],n=0;n<e;++n)0===n?t.push("\tif (channel == "+n+") { return bias["+n+"]; }"):n===e-1?t.push("\telse { return bias["+n+"]; }"):t.push("\telse if (channel == "+n+") { return bias["+n+"]; }");return t.push("\t}"),t.join("\n")},t}(n(34).ImageScaler);t.WebGLImageScaler=o},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLInstanceNormalization=void 0;var o=n(20),s=n(2),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){var n=this;this.artifacts||(this.artifacts=[],this.createProgramInfos(e,t).forEach((function(t,r){var i=e.session.programManager.build(t);n.artifacts.push(i)})));var r=this.createRunDatas(e,this.artifacts.map((function(e){return e.programInfo})),t);return r.forEach((function(t,r){return e.session.programManager.run(n.artifacts[r],t)})),[r[1].outputTextureData.tensor]},t.prototype.checkInputTypes=function(t){return!!e.prototype.checkInputTypes.call(this,t)&&4===t[0].dims.length},t.prototype.createMeanAndVarianceProgramInfo=function(e,t){var n=t.shape,r=n[1],i=n[2]*n[3],o=[n[0],r],s=[n[0],4*r],a="\n    vec4 process(int[2] indices) {\n      vec4 v = vec4(0.0);\n      int a[4];\n      a[0] = indices[0];\n      a[1] = indices[1];\n      float temp = 0.0;\n      for(int a2=0; a2<"+n[2]+"; a2++) {\n        a[2] = a2;\n        for(int a3=0; a3<"+n[3]+"; a3++) {\n          a[3] = a3;\n          float x = _X(a);\n          temp += x;\n        }\n      }\n      float mean = temp / float("+i+");\n      temp = 0.0;\n      for(int a2=0; a2<"+n[2]+"; a2++) {\n        a[2] = a2;\n        for(int a3=0; a3<"+n[3]+"; a3++) {\n          a[3] = a3;\n          float x = _X(a);\n          temp += (x - mean) * (x - mean);\n        }\n      }\n      v.r = mean;\n      v.g = temp / float("+i+");\n\n      return v;\n    }";return{inputLayouts:[t],outputLayout:e.createTextureLayoutFromShape(o,4,s),samplers:["X"],shaderSource:a}},t.prototype.createComputOutputProgramInfo=function(e,t,n,r,i){var o=s.getGlsl(e.session.backend.glContext.version),a="\n    vec4 getMeanAndVariance(int[2] mv) {\n      int offset = indicesToOffset_MeanAndVariance(mv);\n      vec2 coords = offsetToCoords(offset, "+i.width+", "+i.height+");\n      return "+o.texture2D+"(MeanAndVariance, coords);\n    }\n\n    float process(int[4] indices) {\n\n          int mv[2];\n          mv[0] = indices[0];\n          mv[1] = indices[1];\n          vec4 mean_and_variance = getMeanAndVariance(mv);\n          float mean = mean_and_variance.r;\n          float variance = mean_and_variance.g;\n\n          int sb[1];\n          sb[0] = indices[1];\n          float scale = _Scale(sb);\n          float b = _B(sb);\n\n          return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;\n        }";return{inputLayouts:[t,i,n,r],outputLayout:e.createTextureLayoutFromShape(t.shape),samplers:["X","MeanAndVariance","Scale","B"],variables:[{name:"epsilon",type:"float"}],shaderSource:a}},t.prototype.createProgramInfos=function(e,t){var n=e.getOrCreateTextureLayout(t[0]),r=e.getOrCreateTextureLayout(t[1]),i=e.getOrCreateTextureLayout(t[2]),o=this.createMeanAndVarianceProgramInfo(e,n);return[o,this.createComputOutputProgramInfo(e,n,r,i,o.outputLayout)]},t.prototype.createRunDatas=function(e,t,n){var r=n[0].type,i=e.getOrCreateTextureData(n[0],t[0].inputLayouts[0]),o=e.getOrCreateTextureData(n[1],t[1].inputLayouts[2]),s=e.getOrCreateTextureData(n[2],t[1].inputLayouts[3]),a=[];return a.push({inputTextureDatas:[i],outputTextureData:e.createTextureDataFromLayout(t[0].outputLayout,r),uniformData:{}}),a.push({inputTextureDatas:[i,a[0].outputTextureData,o,s],outputTextureData:e.createTextureDataFromLayout(t[1].outputLayout,r),uniformData:{epsilon:this.epsilon}}),a},t}(o.InstanceNormalization);t.WebGLInstanceNormalization=a},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLLeakyRelu=void 0;var o=n(138),s=n(2),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return e.run(this,t)},t.prototype.createProgramInfo=function(e,t){var n=t[0].dims.slice(),r=s.getGlsl(e.session.backend.glContext.version),i="\n      void main() {\n        float v = "+r.texture2D+"(A, TexCoords).r;\n        "+r.output+" = vec4(v < 0.0 ? v * float("+this.alpha+") : v);\n      }\n      ";return{hasMain:!0,inputLayouts:[e.getOrCreateTextureLayout(t[0])],outputLayout:e.createTextureLayoutFromShape(n),samplers:["A"],shaderSource:i}},t.prototype.createRunData=function(e,t,n){var r=[e.getOrCreateTextureData(n[0],t.inputLayouts[0])];return{inputTextureDatas:r,outputTextureData:e.createTextureDataFromLayout(t.outputLayout,r[0].tensor.type),uniformData:{}}},t}(o.LeakyRelu);t.WebGLLeakyRelu=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.LeakyRelu=void 0;var r=function(){function e(){}return e.prototype.initialize=function(e){this.alpha=e.getFloat("alpha",.01)},e.prototype.checkInputs=function(e){return!(!e||1!==e.length)&&this.checkInputTypes(e)},e.prototype.checkInputTypes=function(e){return"float32"===e[0].type||"float64"===e[0].type},e}();t.LeakyRelu=r},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLMatMul=void 0;var o=n(18),s=n(0),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return e.run(this,t)},t.prototype.createProgramInfo=function(e,t){var n=t[0].dims,r=t[1].dims,i=s.BroadcastUtil.calcShape(n,r,!0);if(!i)throw new Error("Can't use matmul on the given tensors");var o=i.length,a=n.length,c=r.length,l="\n      float process(int indices["+o+"]) {\n          int a["+a+"];\n          int b["+c+"];\n          bcastMatmulIndices_A(indices, a);\n          bcastMatmulIndices_B(indices, b);\n\n          float value;\n          for (int k=0; k<"+n[n.length-1]+"; ++k) {\n              a["+(a-1)+"] = k;\n              b["+(c-2)+"] = k;\n              value += _A(a) * _B(b);\n          }\n          return value;\n      }";return{inputLayouts:t.map((function(t){return e.getOrCreateTextureLayout(t)})),outputLayout:e.createTextureLayoutFromShape(i),samplers:["A","B"],shaderSource:l}},t.prototype.createRunData=function(e,t,n){var r=n.map((function(n,r){return e.getOrCreateTextureData(n,t.inputLayouts[r])}));return{inputTextureDatas:r,outputTextureData:e.createTextureDataFromLayout(t.outputLayout,r[0].tensor.type),uniformData:{}}},t}(o.MatMul);t.WebGLMatMul=a},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.getPadFunction=t.WebGLPad=void 0;var o=n(35),s=n(0),a=n(2),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return e.run(this,t)},t.prototype.createProgramInfo=function(e,t){var n=s.ShapeUtil.padShape(t[0].dims.slice(),this.pads),r=n.length,i=e.getOrCreateTextureLayout(t[0]),o="\n      "+l(a.getGlsl(e.session.backend.glContext.version),"A",i,this.mode,this.pads,this.value)+"\n      float process(int["+r+"] indices) {\n          return padA(indices);\n      }";return{inputLayouts:[i],outputLayout:e.createTextureLayoutFromShape(n),samplers:["A"],shaderSource:o}},t.prototype.createRunData=function(e,t,n){var r=[e.getOrCreateTextureData(n[0],t.inputLayouts[0])];return{inputTextureDatas:r,outputTextureData:e.createTextureDataFromLayout(t.outputLayout,r[0].tensor.type),uniformData:{}}},t}(o.Pad);function l(e,t,n,r,i,o){switch(r){case"constant":return function(e,t,n,r,i,o,s,a){for(var c=n.length,l="",u=c-1;u>=0;--u)l+="\n          k = m["+u+"] - "+s[u]+";\n          if (k < 0)  return constant;\n          if (k >= "+n[u]+") return constant;\n          offset += k * "+r[u]+";\n          ";return"\n        float pad"+t+"(int m["+c+"]) {\n          const float constant = float("+a+");\n          int offset = 0;\n          int k = 0;\n          "+l+"\n          vec2 coords = offsetToCoords(offset, "+i+", "+o+");\n          float value = getColorAsFloat("+e.texture2D+"("+t+", coords));\n          return value;\n        }\n        "}(e,t,n.shape,n.strides,n.width,n.height,i,o);case"reflect":return function(e,t,n,r,i,o,s){for(var a=n.length,c="",l=a-1;l>=0;--l)c+="\n        k = m["+l+"] - "+s[l]+";\n        if (k < 0) { k = -k; }\n        {\n          const int _2n_1 = "+2*(n[l]-1)+";\n          k = int( mod( float(k), float(_2n_1) ) ) ;\n          if(k >= "+n[l]+") { k = _2n_1 - k; }\n        }\n        offset += k * "+r[l]+";\n        ";return"\n      float pad"+t+"(int m["+a+"]) {\n        int offset = 0;\n        int k = 0;\n        "+c+"\n        vec2 coords = offsetToCoords(offset, "+i+", "+o+");\n        float value = getColorAsFloat("+e.texture2D+"("+t+", coords));\n        return value;\n      }\n      "}(e,t,n.shape,n.strides,n.width,n.height,i);case"edge":return function(e,t,n,r,i,o,s){for(var a=n.length,c="",l=a-1;l>=0;--l)c+="\n      k = m["+l+"] - "+s[l]+";\n      if (k < 0)  k = 0;\n      if (k >= "+n[l]+") k = "+(n[l]-1)+";\n      offset += k * "+r[l]+";\n      ";return"\n    float pad"+t+"(int m["+a+"]) {\n      int offset = 0;\n      int k = 0;\n      "+c+"\n      vec2 coords = offsetToCoords(offset, "+i+", "+o+");\n      float value = getColorAsFloat("+e.texture2D+"("+t+", coords));\n      return value;\n    }\n    "}(e,t,n.shape,n.strides,n.width,n.height,i);default:throw new Error("Invalid mode")}}t.WebGLPad=c,t.getPadFunction=l},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.offsetToIndices=t.copyArray=t.GeneratePoolingCode=t.WebGLMaxPool=t.WebGLGlobalMaxPool=t.WebGLAveragePool=t.WebGLGlobalAveragePool=void 0;var o=n(21),s=n(0),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return e.run(this,t)},t.prototype.createProgramInfo=function(e,t){return l(e,t,!0,this.kernelShape,this.autoPad,this.strides,this.pads,this.countIncludePad)},t.prototype.createRunData=function(e,t,n){var r=[e.getOrCreateTextureData(n[0],t.inputLayouts[0])];return{inputTextureDatas:r,outputTextureData:e.createTextureDataFromLayout(t.outputLayout,r[0].tensor.type),uniformData:{}}},t}(o.GlobalAveragePool);t.WebGLGlobalAveragePool=a;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return e.run(this,t)},t.prototype.createProgramInfo=function(e,t){return l(e,t,!1,this.kernelShape,this.autoPad,this.strides,this.pads,this.countIncludePad)},t.prototype.createRunData=function(e,t,n){var r=[e.getOrCreateTextureData(n[0],t.inputLayouts[0])];return{inputTextureDatas:r,outputTextureData:e.createTextureDataFromLayout(t.outputLayout,r[0].tensor.type),uniformData:{}}},t}(o.AveragePool);function l(e,t,n,r,i,o,a,c){void 0===r&&(r=[]),void 0===i&&(i=""),void 0===o&&(o=[]),void 0===a&&(a=[]);var l=t[0].dims.slice();s.PoolConvUtil.adjustPoolAttributes(n,l,r,o,a);var u=s.PoolConvUtil.computePoolOutputShape(n,l,o,r,a,i),d=s.ShapeUtil.size(r),h="";h+=c?"value /= float("+d+");":"value /= float("+d+" - pad);";var g=e.getOrCreateTextureLayout(t[0]),f="\n      "+p(g,r,a,o,"value += _X(x);",h,"0.0")+"\n    ";return{inputLayouts:[g],outputLayout:e.createTextureLayoutFromShape(u),samplers:["X"],shaderSource:f}}t.WebGLAveragePool=c;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return e.run(this,t)},t.prototype.createProgramInfo=function(e,t){return h(e,t,!0,this.kernelShape,this.autoPad,this.strides,this.pads)},t.prototype.createRunData=function(e,t,n){var r=[e.getOrCreateTextureData(n[0])];return{inputTextureDatas:r,outputTextureData:e.createTextureDataFromLayout(t.outputLayout,r[0].tensor.type),uniformData:{}}},t}(o.GlobalMaxPool);t.WebGLGlobalMaxPool=u;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return e.run(this,t)},t.prototype.createProgramInfo=function(e,t){return h(e,t,!1,this.kernelShape,this.autoPad,this.strides,this.pads)},t.prototype.createRunData=function(e,t,n){var r=[e.getOrCreateTextureData(n[0])];return{inputTextureDatas:r,outputTextureData:e.createTextureDataFromLayout(t.outputLayout,r[0].tensor.type),uniformData:{}}},t}(o.MaxPool);function h(e,t,n,r,i,o,a){void 0===r&&(r=[]),void 0===i&&(i=""),void 0===o&&(o=[]),void 0===a&&(a=[]);var c=t[0].dims.slice();s.PoolConvUtil.adjustPoolAttributes(n,c,r,o,a);var l=s.PoolConvUtil.computePoolOutputShape(n,c,o,r,a,i),u=e.createTextureLayoutFromShape(c),d="\n    "+p(u,r,a,o,"\n              value = max(_X(x), value);\n      ","","-1e5")+"\n  ";return{inputLayouts:[u],outputLayout:e.createTextureLayoutFromShape(l),samplers:["X"],shaderSource:d}}function p(e,t,n,r,i,o,a){var c=e.shape,l=e.shape.length;if(t.length<=2){var u,d=t[t.length-1],h=r[r.length-1],p=n[n.length/2-1],m=n[n.length-1],b=c[l-1],y="",_="";if(u=p+m!==0?"\n                for (int i = 0; i < "+d+"; i++) {\n                  x["+l+" - 1] = indices["+l+" - 1] * "+h+" - "+p+" + i;\n                  if (x["+l+" - 1] < 0 || x["+l+" - 1] >= "+b+") {\n                    pad++;\n                    continue;\n                  }\n                  "+i+"\n                }":"\n                for (int i = 0; i < "+d+"; i++) {\n                  x["+l+" - 1] = indices["+l+" - 1] * "+h+" - "+p+" + i;\n                  "+i+"\n                }",2===t.length){var v=t[t.length-2],w=r[r.length-2],S=n[n.length/2-2],k=n[n.length-2],I=c[l-2];y=S+k!==0?"\n              for (int j = 0; j < "+v+"; j++) {\n                x["+l+" - 2] = indices["+l+" - 2] * "+w+" - "+S+" + j;\n                if (x["+l+" - 2] < 0 || x["+l+" - 2] >= "+I+") {\n                  pad+= "+d+";\n                  continue;\n                }\n            ":"\n                for (int j = 0; j < "+v+"; j++) {\n                  x["+l+" - 2] = indices["+l+" - 2] * "+w+" - "+S+" + j;\n                ",_="\n              }\n            "}return"\n            float process(int indices["+l+"]) {\n              int x["+l+"];\n              copyVec(indices, x);\n\n              float value = "+a+";\n              int pad = 0;\n              "+y+"\n              "+u+"\n              "+_+"\n              "+o+"\n              return value;\n            }\n          "}var C=s.ShapeUtil.size(t),E=s.ShapeUtil.computeStrides(t),A=E.length,x=n.length,T=f(A),O=g(c,"inputDims"),P=g(n,"pads"),R=g(E,"kernelStrides");return"\n            "+T+"\n            float process(int indices["+l+"]) {\n                int x["+l+"];\n                copyVec(indices, x);\n                int offset["+A+"];\n                int pads["+x+"];\n                int inputDims["+l+"];\n                int kernelStrides["+A+"];\n                int strides["+A+"];\n                "+P+"\n                "+O+"\n                "+g(r,"strides")+"\n                "+R+"\n\n                float value = "+a+";\n                int pad = 0;\n                bool isPad = false;\n                for (int i = 0; i < "+C+"; i++) {\n                    offsetToIndices(i, kernelStrides, offset);\n                    isPad = false;\n                    for (int j = "+l+" - "+A+"; j < "+l+"; j++) {\n                      x[j] = indices[j] * strides[j - "+l+" + "+A+"]\n                        + offset[j - "+l+" + "+A+"] - pads[j - 2];\n                      "+(n.reduce((function(e,t){return e+t}))?"\n                if (x[j] >= inputDims[j] || x[j] < 0) {\n                  pad++;\n                  isPad = true;\n                  break;\n                }\n              }\n              if (!isPad) {\n                "+i+"\n              }":"\n                  }\n                  "+i)+"\n                }\n                "+o+"\n\n                return value;\n            }"}function g(e,t){for(var n="",r=0;r<e.length;r++)n+="\n      "+t+"["+r+"] = "+e[r]+";\n    ";return n}function f(e){return"\n    void offsetToIndices(int offset, int["+e+"] strides, out int["+e+"] indices) {\n      if ("+e+" == 0) {\n        return;\n      }\n      for (int i = 0; i < "+e+" - 1; ++i) {\n        indices[i] = offset / strides[i];\n        offset -= indices[i] * strides[i];\n      }\n      indices["+e+" - 1] = offset;\n    }"}t.WebGLMaxPool=d,t.GeneratePoolingCode=p,t.copyArray=g,t.offsetToIndices=f},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLReduceSumSquare=t.WebGLReduceLogSum=t.WebGLReduceProd=t.WebGLReduceMin=t.WebGLReduceMax=t.WebGLReduceMean=t.WebGLReduceSum=void 0;var o=n(36),s=n(0),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return e.run(this,t)},t.prototype.createProgramInfo=function(e,t){for(var n=[],r=t[0].dims.length||1,i=[],o=s.ShapeUtil.normalizeAxes(this.axes,t[0].dims.length),a=this.getOps(t,o),c=a[1],l=0;l<t[0].dims.length;l++)o.indexOf(l)>=0||0===o.length?(this.keepDims&&n.push(1),c="\n        for(int j"+l+" = 0; j"+l+" < "+t[0].dims[l]+"; j"+l+"++) {\n          inputIdx["+l+"] = j"+l+";\n          "+c+"\n        }\n        "):(i.push("inputIdx["+l+"] = outputIdx["+n.length+"];"),n.push(t[0].dims[l]));var u="\n      float process(int outputIdx["+(n.length||1)+"]) {\n        float value;                 // final result\n        int inputIdx["+r+"];      // addressing input data\n        "+i.join("\n")+"\n        "+a[0]+"       // init ops for reduce max/min\n        "+c+"\n        "+a[2]+"       // final computation for reduce mean\n        return value;\n      }";return{inputLayouts:t.map((function(t){return e.getOrCreateTextureLayout(t)})),outputLayout:e.createTextureLayoutFromShape(n),samplers:["A"],shaderSource:u}},t.prototype.createRunData=function(e,t,n){var r=n.map((function(n,r){return e.getOrCreateTextureData(n,t.inputLayouts[r])}));return{inputTextureDatas:r,outputTextureData:e.createTextureDataFromLayout(t.outputLayout,r[0].tensor.type),uniformData:{}}},t}(o.ReduceBase),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getOps=function(e){return["value = 0.0;","value += _A(inputIdx);",""]},t}(a);t.WebGLReduceSum=c;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getOps=function(e,t){for(var n=1,r=0;r<e[0].dims.length;r++)(t.indexOf(r)>=0||0===t.length)&&(n*=e[0].dims[r]);return["value = 0.0;","value += _A(inputIdx);","value /= "+n+".;"]},t}(a);t.WebGLReduceMean=l;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getOps=function(e,t){for(var n=[],r=0;r<e[0].dims.length;r++)(t.indexOf(r)>=0||0===t.length)&&n.push("inputIdx["+r+"] = 0;");return[n.join("\n")+"\nvalue = _A(inputIdx);","value = max(value, _A(inputIdx));",""]},t}(a);t.WebGLReduceMax=u;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getOps=function(e,t){for(var n=[],r=0;r<e[0].dims.length;r++)(t.indexOf(r)>=0||0===t.length)&&n.push("inputIdx["+r+"] = 0;");return[n.join("\n")+"\nvalue = _A(inputIdx);","value = min(value, _A(inputIdx));",""]},t}(a);t.WebGLReduceMin=d;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getOps=function(e){return["value = 1.0;","value *= _A(inputIdx);",""]},t}(a);t.WebGLReduceProd=h;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getOps=function(e){return["value = 0.0;","value += _A(inputIdx);","value = log(value);"]},t}(a);t.WebGLReduceLogSum=p;var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getOps=function(e){return["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""]},t}(a);t.WebGLReduceSumSquare=g},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLSliceV10=t.WebGLSlice=void 0;var o=n(38),s=n(0),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return e.run(this,t)},t.prototype.createProgramInfo=function(e,t){return l(e,t[0],this.starts,this.ends,this.axes)},t.prototype.createRunData=function(e,t,n){return u(e,t,n)},t}(o.Slice);t.WebGLSlice=a;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return e.run(this,t)},t.prototype.createProgramInfo=function(e,t){if(!e.session.isInitializer(t[1].dataId)||!e.session.isInitializer(t[2].dataId)||t.length>=4&&!e.session.isInitializer(t[3].dataId)||t.length>=5&&!e.session.isInitializer(t[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(t.length>=5&&t[4].integerData.some((function(e){return 1!==e})))throw new Error("currently non-1 steps is not supported for Slice");var n=Array.from(t[1].integerData),r=Array.from(t[2].integerData),i=t.length>=4?Array.from(t[3].integerData):[];return l(e,t[0],n,r,i)},t.prototype.createRunData=function(e,t,n){return u(e,t,n)},t}(o.SliceV10);function l(e,t,n,r,i){0===i.length&&(i=t.dims.slice(0).map((function(e,t){return t}))),i=s.ShapeUtil.normalizeAxes(i,t.dims.length),n=n.map((function(e,n){return e>t.dims[i[n]]-1?t.dims[i[n]]:s.ShapeUtil.normalizeAxis(e,t.dims[i[n]])})),r=r.map((function(e,n){return e>t.dims[i[n]]-1?t.dims[i[n]]:s.ShapeUtil.normalizeAxis(e,t.dims[i[n]])}));for(var o=t.dims.slice(),a=[],c=0;c<i.length;c++)o[i[c]]=r[c]-n[c],n[c]>0&&a.push("outputIdx["+i[c]+"] += "+n[c]+";");var l="\n      float process(int outputIdx["+o.length+"]) {\n        "+a.join("\n      ")+"\n        return _A(outputIdx);\n      }";return{inputLayouts:[e.getOrCreateTextureLayout(t)],outputLayout:e.createTextureLayoutFromShape(o),samplers:["A"],shaderSource:l}}function u(e,t,n){var r=[e.getOrCreateTextureData(n[0],t.inputLayouts[0])];return{inputTextureDatas:r,outputTextureData:e.createTextureDataFromLayout(t.outputLayout,r[0].tensor.type),uniformData:{}}}t.WebGLSliceV10=c},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},s=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLSoftmax=void 0;var a=n(22),c=n(0),l=n(2),u=function(e){function t(){return e.call(this)||this}return i(t,e),t.prototype.run=function(e,t){var n=this;this.artifacts||(this.artifacts=[],this.createProgramInfos(e,t).forEach((function(t,r){var i=e.session.programManager.build(t);n.artifacts.push(i)})));var r=this.createRunDatas(e,this.artifacts.map((function(e){return e.programInfo})),t);return r.forEach((function(t,r){return e.session.programManager.run(n.artifacts[r],t)})),[r[r.length-1].outputTextureData.tensor]},t.prototype.createSoftMaxProgramInfo=function(e,t,n,r,i,o){var s=t.dims.slice(),a=e.createTextureLayoutFromShape(s),c=s,l=c.length,u=a.width,d=a.height;if(n<1||r<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==i.shape.length||1!==o.shape.length)throw new Error("Dimensionality of the intermediate results should be 1");if(i.shape[0]!==n||o.shape[0]!==n)throw new Error("Shape of the intermediate results should be equal to logical row count");var h="\n    float process(int["+l+"] indices) {\n\n      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)\n      int offset = coordsToOffset(TexCoords, "+u+", "+d+");\n\n      //determine the logical row for this index\n      int logical_row_index[1];\n      logical_row_index[0] = offset / "+r+";\n\n      float norm_factor = _Norm(logical_row_index);\n\n      // avoid possible division by 0\n      // if norm_facor is 0, all elements are zero\n      // if so, return 0\n      if(norm_factor == 0.0)\n        return 0.0;\n\n      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;\n    }";return{inputLayouts:[a,i,o],outputLayout:e.createTextureLayoutFromShape(c),samplers:["A","Max","Norm"],shaderSource:h}},t.prototype.createComputScaleProgramInfo=function(e,t,n,r,i,o){var s=e.createTextureLayoutFromShape(t.dims.slice()),a=o.length,c=s.width,u=s.height;if(n<1||r<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==o.length)throw new Error("Dimensionality of the output should be 1");if(o[0]!==n)throw new Error("Shape of the output should be equal to logical row count");if(1!==i.shape.length)throw new Error("Dimensionality of the intermediate results should be 1");if(i.shape[0]!==n)throw new Error("Shape of the intermediate results should be equal to logical row count");var d="\n    float process(int["+a+"] indices) {\n\n      int logical_row_start_offset = indices[0] * "+r+";\n\n      float norm_factor = 0.0;\n      float max = _Max(indices);\n      for(int i=0; i<"+r+"; ++i)\n      {\n        norm_factor += exp(getColorAsFloat("+l.getGlsl(e.session.backend.glContext.version).texture2D+"(A, offsetToCoords(logical_row_start_offset + i, "+c+", "+u+"))) - max);\n      }\n\n      return norm_factor;\n    }";return{inputLayouts:[s,i],outputLayout:e.createTextureLayoutFromShape(o),samplers:["A","Max"],shaderSource:d}},t.prototype.createComputeMaxProgramInfo=function(e,t,n,r,i){var o=e.createTextureLayoutFromShape(t.dims.slice()),s=i.length,a=o.width,c=o.height;if(n<1||r<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==i.length)throw new Error("Dimensionality of the output should be 1");if(i[0]!==n)throw new Error("Shape of the output should be equal to logical row count");var u=l.getGlsl(e.session.backend.glContext.version),d="\n        float process(int["+s+"] indices) {\n\n          int logical_row_start_offset = indices[0] * "+r+";\n\n          float max = getColorAsFloat("+u.texture2D+"(A, offsetToCoords(logical_row_start_offset, "+a+", "+c+" )));\n          for(int i=1; i<"+r+"; ++i)\n          {\n            float current = getColorAsFloat("+u.texture2D+"(A, offsetToCoords(logical_row_start_offset + i, "+a+", "+c+")));\n            if(current > max)\n              max = current;\n          }\n\n          return max;\n        }";return{inputLayouts:[o],outputLayout:e.createTextureLayoutFromShape(i),samplers:["A"],shaderSource:d}},t.prototype.createProgramInfos=function(e,t){var n=t[0].dims.slice(),r=c.ShapeUtil.normalizeAxis(this.axis,n.length),i=c.ShapeUtil.sizeToDimension(n,r),o=c.ShapeUtil.sizeFromDimension(n,r),s=this.createComputeMaxProgramInfo(e,t[0],i,o,[i]),a=this.createComputScaleProgramInfo(e,t[0],i,o,s.outputLayout,[i]);return[s,a,this.createSoftMaxProgramInfo(e,t[0],i,o,s.outputLayout,a.outputLayout)]},t.prototype.createRunDatas=function(e,t,n){var r=n[0].type,i=e.getOrCreateTextureData(n[0],t[0].inputLayouts[0]),o=[];o.push({inputTextureDatas:[i],outputTextureData:e.createTextureDataFromLayout(t[0].outputLayout,r),uniformData:{}});for(var a=1;a<t.length;++a)o.push({inputTextureDatas:s(o[a-1].inputTextureDatas,[o[a-1].outputTextureData]),outputTextureData:e.createTextureDataFromLayout(t[a].outputLayout,r),uniformData:{}});return o},t}(a.Softmax);t.WebGLSoftmax=u},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s};Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLSplit=void 0;var s=n(146),a=n(0),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){var n=this;if(!this.artifacts){this.artifacts=[];for(var r=a.ShapeUtil.normalizeAxis(this.axis,t[0].dims.length),i=this.getProgramCount(e,t,r),o=0;o<i;++o){var s=this.createProgramInfo(e,t[0],r,o),c=e.session.programManager.build(s);this.artifacts.push(c)}}var l=[];return this.artifacts.forEach((function(r){var i=n.createRunData(e,r.programInfo,t);e.session.programManager.run(r,i),l.push(i.outputTextureData.tensor)})),l},t.prototype.getProgramCount=function(e,t,n){return o(a.SplitUtil.splitShape(t[0].dims,n,this.split,this.numOutputs),2)[1].length},t.prototype.createProgramInfo=function(e,t,n,r){var i=o(a.SplitUtil.splitShape(t.dims,n,this.split,this.numOutputs),2),s=i[0],c=i[1][r],l=s[r],u="\n      float process(int indices["+l.length+"]) {\n        indices["+n+"] += "+c+";\n        return _A(indices);\n      }";return{inputLayouts:[e.getOrCreateTextureLayout(t)],outputLayout:e.createTextureLayoutFromShape(l),samplers:["A"],shaderSource:u}},t.prototype.createRunData=function(e,t,n){var r=[e.getOrCreateTextureData(n[0],t.inputLayouts[0])];return{inputTextureDatas:r,outputTextureData:e.createTextureDataFromLayout(t.outputLayout,r[0].tensor.type),uniformData:{}}},t}(s.Split);t.WebGLSplit=c},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Split=void 0;var r=function(){function e(e){this.numOutputs=e}return e.prototype.initialize=function(e){this.axis=e.getInt("axis",0),this.split=e.getInts("split",[])},e.prototype.checkInputs=function(e){return!(!e||1!==e.length)&&this.checkInputTypes(e)},e.prototype.checkInputTypes=function(e){return"int8"===e[0].type||"uint8"===e[0].type||"int16"===e[0].type||"uint16"===e[0].type||"int32"===e[0].type||"uint32"===e[0].type||"float32"===e[0].type||"float64"===e[0].type||"bool"===e[0].type},e}();t.Split=r},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLSqueeze=void 0;var o=n(39),s=n(0),a=n(10),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){var n=s.ShapeUtil.squeezeShape(t[0].dims,this.axes);return[a.reshape(e,t[0],n)]},t}(o.Squeeze);t.WebGLSqueeze=c},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLSum=void 0;var o=n(23),s=n(2),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return e.run(this,t)},t.prototype.createProgramInfo=function(e,t){var n=s.getGlsl(e.session.backend.glContext.version),r=t[0].dims.slice(),i=t.map((function(e,t){return n.texture2D+"(X"+t+",TexCoords)"})).join(" + "),o=t.map((function(e,t){return"X"+t}));return{inputLayouts:t.map((function(t){return e.getOrCreateTextureLayout(t)})),outputLayout:e.createTextureLayoutFromShape(r),samplers:o,shaderSource:"\n      void main() {\n        vec4 result = "+i+";\n        "+n.output+" = result;\n      }",hasMain:!0}},t.prototype.createRunData=function(e,t,n){var r=n.map((function(n,r){return e.getOrCreateTextureData(n,t.inputLayouts[r])}));return{inputTextureDatas:r,outputTextureData:e.createTextureDataFromLayout(t.outputLayout,r[0].tensor.type),uniformData:{}}},t}(o.Sum);t.WebGLSum=a},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLTile=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return e.run(this,t)},t.prototype.createProgramInfo=function(e,t){for(var n=t[0].dims.slice(),r=new Array(n.length),i=[],o=0;o<n.length;o++)r[o]=n[o]*t[1].numberData[o],i.push("inputIdx["+o+"] = int(mod(float(outputIdx["+o+"]), "+n[o]+".));");var s=r.length,a="\n    float process(int outputIdx["+s+"]) {\n      int inputIdx["+s+"];\n      "+i.join("\n")+"\n      return _A(inputIdx);\n    }";return{inputLayouts:t.map((function(t){return e.getOrCreateTextureLayout(t)})),outputLayout:e.createTextureLayoutFromShape(r),samplers:["A"],shaderSource:a}},t.prototype.createRunData=function(e,t,n){var r=n.map((function(n,r){return e.getOrCreateTextureData(n,t.inputLayouts[r])}));return{inputTextureDatas:r,outputTextureData:e.createTextureDataFromLayout(t.outputLayout,r[0].tensor.type),uniformData:{}}},t}(n(40).Tile);t.WebGLTile=o},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},s=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLTranspose=void 0;var a=n(41),c=n(0),l=n(5),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return e.run(this,t)},t.prototype.getOutputShape=function(e){var t=this.getAdjustedPerm(e[0]);return c.ShapeUtil.sortBasedOnPerm(e[0],t)},t.prototype.createProgramInfo=function(e,t){var n=t.map((function(e){return e.dims.slice()})),r=this.getAdjustedPerm(n[0]),i=this.getOutputShape(n),o=t[0].dims.length,s="\n      "+this.getPermFunctionBody("perm",r,o)+"\n      float process(int indices["+o+"]) {\n        int a["+o+"];\n        perm(a, indices);\n        return _A(a);\n      }",a=e.createTextureLayoutFromShape(i,1,i);return{inputLayouts:[e.getOrCreateTextureLayout(t[0])],outputLayout:a,samplers:["A"],shaderSource:s}},t.prototype.createRunData=function(e,t,n){var r=[e.getOrCreateTextureData(n[0],t.inputLayouts[0])];return{inputTextureDatas:r,outputTextureData:e.createTextureDataFromLayout(t.outputLayout,r[0].tensor.type),uniformData:{}}},t.prototype.getPositionalFunction=function(e,t,n){var r=this.getOutputShape([t]);return n||(n="perm"),{name:n,body:this.getPermFunctionBody(n,this.getAdjustedPerm(t),r.length),type:l.FunctionType.Positional,inputShape:t,outputShape:r}},t.prototype.getAdjustedPerm=function(e){var t=this.perm;return t&&t.length!==e.length&&(t=s(e.keys()).reverse()),t},t.prototype.getPermFunctionBody=function(e,t,n){var r=[];r.push("void "+e+"(out int a["+n+"], int src["+n+"]) {");for(var i=0;i<n;++i)r.push("\ta["+t[i]+"]=src["+i+"];");return r.push("\t}"),r.join("\n")},t}(a.Transpose);t.WebGLTranspose=u},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.glslTanh=t.glslTan=t.glslSqrt=t.glslSigmoid=t.glslRelu=t.glslSin=t.glslNot=t.glslNeg=t.glslLog=t.glslIdentity=t.glslFloor=t.glslExp=t.glslCos=t.glslCeil=t.glslAtan=t.glslAsin=t.glslAcos=t.glslAbs=t.WebGLUnaryOp=void 0;var o=n(43),s=n(5),a=n(2),c=function(e){function t(t,n){var r=e.call(this,t)||this;return r.typeConstraint=t,r.glslFunc=n,r}return i(t,e),t.prototype.run=function(e,t){return e.run(this,t)},t.prototype.createProgramInfo=function(e,t){var n=t[0].dims.slice(),r=e.getOrCreateTextureLayout(t[0]),i=a.getGlsl(e.session.backend.glContext.version),o="\n      "+this.glslFunc.body+"\n      void main() {\n        vec4 v = "+i.texture2D+"(A, TexCoords);\n        v = "+this.glslFunc.name+"(v);\n        "+i.output+" = v;\n      }\n      ";return{inputLayouts:[r],outputLayout:e.createTextureLayoutFromShape(n),samplers:["A"],shaderSource:o,hasMain:!0}},t.prototype.createRunData=function(e,t,n){var r=[e.getOrCreateTextureData(n[0],t.inputLayouts[0])];return{inputTextureDatas:r,outputTextureData:e.createTextureDataFromLayout(t.outputLayout,r[0].tensor.type),uniformData:{}}},t}(o.UnaryOp);function l(e){var t=e+"_";return{body:"\n  float "+t+"(float a) {\n    return "+e+"(a);\n  }\n  vec4 "+t+"(vec4 v) {\n    return "+e+"(v);\n  }\n  ",name:t,type:s.FunctionType.ValueBased}}t.WebGLUnaryOp=c,t.glslAbs=function(){return l("abs")},t.glslAcos=function(){return l("acos")},t.glslAsin=function(){return l("asin")},t.glslAtan=function(){return l("atan")},t.glslCeil=function(){return l("ceil")},t.glslCos=function(){return l("cos")},t.glslExp=function(){return l("exp")},t.glslFloor=function(){return l("floor")},t.glslIdentity=function(){return{body:"\n  float indentity_(float a) {\n    return a;\n  }\n  vec4 indentity_(vec4 v) {\n    return v;\n  }\n  ",name:"indentity_",type:s.FunctionType.ValueBased}},t.glslLog=function(){return l("log")},t.glslNeg=function(){return{body:"\n  float neg_(float a) {\n    return -a;\n  }\n  vec4 neg_(vec4 v) {\n    return -v;\n  }\n  ",name:"neg_",type:s.FunctionType.ValueBased}},t.glslNot=function(){return{body:"\n  float not_(float a) {\n    return float( ! bool(a) );\n  }\n  bool not_(bool a) {\n    return !a;\n  }\n  vec4 not_(vec4 v) {\n    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));\n  }\n  bvec4 not_(bvec4 v) {\n    return bvec4(!v.x, !v.y, !v.z, !v.w);\n  }\n  ",name:"not_",type:s.FunctionType.ValueBased}},t.glslSin=function(){return l("sin")},t.glslRelu=function(){return{body:"\n  float relu_(float a) {\n    return max( a, 0.0 );\n  }\n  vec4 relu_(vec4 v) {\n    return max( v, 0.0 );\n  }\n  ",name:"relu_",type:s.FunctionType.ValueBased}},t.glslSigmoid=function(){return{body:"\n  float sigmoid_(float a) {\n    return 1.0 / (1.0 + exp(-a));\n  }\n  vec4 sigmoid_(vec4 v) {\n    return 1.0 / (1.0 + exp(-v));\n  }\n  ",name:"sigmoid_",type:s.FunctionType.ValueBased}},t.glslSqrt=function(){return l("sqrt")},t.glslTan=function(){return l("tan")},t.glslTanh=function(){return{body:"\n  float tanh_(float a) {\n    a = clamp(a, -10., 10.);\n    a = exp(2.*a);\n    return (a - 1.) / (a + 1.);\n  }\n  vec4 tanh_(vec4 v) {\n    v = clamp(v, -10., 10.);\n    v = exp(2.*v);\n    return (v - 1.) / (v + 1.);\n  }\n  ",name:"tanh_",type:s.FunctionType.ValueBased}}},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLUnsqueeze=void 0;var o=n(44),s=n(0),a=n(10),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){var n=s.ShapeUtil.unsqueezeShape(t[0].dims,this.axes);return[a.reshape(e,t[0],n)]},t}(o.Unsqueeze);t.WebGLUnsqueeze=c},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLUpsample=void 0;var o=n(45),s=n(2),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.run=function(e,t){return e.run(this,t)},t.prototype.createProgramInfo=function(e,t){for(var n=this,r=e.getOrCreateTextureLayout(t[0]),i=t[0].dims.map((function(e,t){return Math.floor(e*n.scales[t])})),o=e.createTextureLayoutFromShape(i),a=i.length,c=s.getGlsl(e.session.backend.glContext.version),l=new Array(a),u=new Array(a),d="\n      int output_pitches["+a+"];\n      int input_pitches["+a+"];\n      ",h=a-1;h>=0;h--)l[h]=h===a-1?1:l[h+1]*i[h+1],u[h]=h===a-1?1:u[h+1]*t[0].dims[h+1],d+="\n      output_pitches["+h+"] = "+l[h]+";\n      input_pitches["+h+"] = "+u[h]+";\n      ";var p="\n    float getInputFloat(int index) {\n      vec2 coords = offsetToCoords(index, "+r.width+", "+r.height+");\n      float value = getColorAsFloat("+c.texture2D+"(X, coords));\n      return value;\n    }\n    ";return{inputLayouts:[r],outputLayout:o,samplers:["X"],shaderSource:"nearest"===this.mode?"\n      "+p+"\n      float process(int indices["+a+"]) {\n        int input_index = 0;\n        int output_index = coordsToOffset(TexCoords, "+o.width+", "+o.height+");\n\n        "+d+"\n\n        int d, m;\n        for (int dim = 0; dim < "+a+"; ++dim) {\n          d = output_index / output_pitches[dim];\n          m = output_index - d * output_pitches[dim];\n          output_index = m;\n\n          if (scales[dim] != 1 && d > 0) {\n            int d2 = d / scales[dim];\n            m = d - d2 * scales[dim];\n            d = d2;\n          }\n          input_index += input_pitches[dim] * d;\n        }\n\n        return getInputFloat(input_index);\n      }":4===a?"\n      "+p+"\n      float process(int indices[4]) {\n        int input_index = 0;\n        int output_index = coordsToOffset(TexCoords, "+o.width+", "+o.height+");\n\n        "+d+"\n\n        int m;\n        int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;\n        index_of_dim0 = output_index / output_pitches[0];\n        m = output_index - index_of_dim0 * output_pitches[0];\n        index_of_dim1 = m / output_pitches[1];\n        m = m - index_of_dim1 * output_pitches[1];\n        index_of_dim2 = m / output_pitches[2];\n        m = m - index_of_dim2 * output_pitches[2];\n        index_of_dim3 = m;\n\n        int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;\n        index_of_input_dim2 = index_of_dim2 / scales[2];\n        y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];\n        index_of_input_dim3 = index_of_dim3 / scales[3];\n        x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];\n\n        input_index = index_of_dim0 * input_pitches[0] +\n                      index_of_dim1 * input_pitches[1] +\n                      index_of_input_dim2 * input_pitches[2] +\n                      index_of_input_dim3;\n\n        float x00 = getInputFloat(input_index);\n        float x10, x01, x11;\n\n        bool end_of_dim2 = false;\n        if (index_of_input_dim2 == ("+t[0].dims[2]+" - 1)) {\n          // It's the end in dimension 2\n          x01 = x00;\n          end_of_dim2 = true;\n        } else {\n          x01 = getInputFloat(input_index + input_pitches[2]);\n        }\n\n        if (index_of_input_dim3 == (input_pitches[2] - 1)) {\n          // It's the end in dimension 3\n          x10 = x00;\n          x11 = x01;\n        }\n        else {\n          x10 = getInputFloat(input_index + 1);\n          x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);\n        }\n\n        float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);\n        float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);\n        return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);\n      }":"\n      "+p+"\n      float process(int indices[2]) {\n        int input_index = 0;\n        int output_index = coordsToOffset(TexCoords, "+o.width+", "+o.height+");\n\n        "+d+"\n\n        int m;\n        int index_of_dim0, index_of_dim1;\n        index_of_dim0 = output_index / output_pitches[0];\n        m = output_index - index_of_dim0 * output_pitches[0];\n        index_of_dim1 = m;\n\n        int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;\n        index_of_input_dim0 = index_of_dim0 / scales[0];\n        y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];\n        index_of_input_dim1 = index_of_dim1 / scales[1];\n        x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];\n\n        input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;\n\n        float x00 = getInputFloat(input_index);\n        float x10, x01, x11;\n\n        bool end_of_dim0 = false;\n        if (index_of_input_dim0 == ("+t[0].dims[0]+" - 1)) {\n          // It's the end in dimension 0\n          x01 = x00;\n          end_of_dim0 = true;\n        } else {\n          x01 = getInputFloat(input_index + input_pitches[0]);\n        }\n\n        if (index_of_input_dim1 == (input_pitches[0] - 1)) {\n          // It's the end in dimension 1\n          x10 = x00;\n          x11 = x01;\n        }\n        else {\n          x10 = getInputFloat(input_index + 1);\n          x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);\n        }\n\n        float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);\n        float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);\n        return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);\n      }",variables:[{name:"scales",type:"int",arrayLength:this.scales.length}]}},t.prototype.createRunData=function(e,t,n){var r=n.map((function(n,r){return e.getOrCreateTextureData(n,t.inputLayouts[r])}));return{inputTextureDatas:r,outputTextureData:e.createTextureDataFromLayout(t.outputLayout,r[0].tensor.type),uniformData:{scales:this.scales.map((function(e){return Math.ceil(e)}))}}},t}(o.Upsample);t.WebGLUpsample=a},function(e,t,n){var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.ProgramManager=void 0;var o=n(25),s=n(3),a=n(155),c=n(2),l=function(){function e(e,t){this.profiler=e,this.glContext=t,this.repo=new Map,this.attributesBound=!1}return e.prototype.getArtifact=function(e){return this.repo.get(e)},e.prototype.setArtifact=function(e,t){this.repo.set(e,t)},e.prototype.run=function(e,t){var n=this;this.profiler.event("backend","ProgramManager.run",(function(){var r=n.glContext.gl,i=e.program;r.useProgram(i);try{n.bindOutput(t.outputTextureData),n.attributesBound||n.bindAttributes(e.attribLocations),n.bindUniforms(e.uniformLocations,t.uniformData,t.inputTextureDatas)}catch(t){throw s.Logger.error("ProgramManager",e.programInfo.shaderSource),t}n.profiler.event("backend","GlContext.draw()",(function(){n.doDraw(e,t),r.flush()}))}))},e.prototype.dispose=function(){var e=this;this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach((function(t){return e.glContext.deleteProgram(t.program)}))},e.prototype.build=function(e){var t=this;return this.profiler.event("backend","ProgramManager.build",(function(){var n=new a.GlslPreprocessor(t.glContext,e),r=n.preprocess(),i=t.compile(r);return{programInfo:e,program:i,uniformLocations:t.getUniformLocations(i,n.context.programInfo.samplers,n.context.programInfo.variables),attribLocations:t.getAttribLocations(i)}}))},e.prototype.doDraw=function(e,t){t.draw?(s.Logger.verbose("ProgramManager","Custom draw function"),t.draw(this.glContext,e)):this.glContext.draw()},e.prototype.compile=function(e){if(!this.vertexShader){s.Logger.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");var t=c.getVertexShaderSource(this.glContext.version);this.vertexShader=this.glContext.compileShader(t,this.glContext.gl.VERTEX_SHADER)}o.env.debug&&s.Logger.verbose("ProrgramManager","FragShader:\n"+e+"\n");var n=this.glContext.compileShader(e,this.glContext.gl.FRAGMENT_SHADER),r=this.glContext.createProgram(this.vertexShader,n);return this.glContext.deleteShader(n),r},e.prototype.bindOutput=function(e){s.Logger.verbose("ProrgramManager","Binding output texture to Framebuffer: w/h="+e.width+"/"+e.height+", shape="+e.shape+", type="+e.tensor.type),this.glContext.attachFramebuffer(e.texture,e.width,e.height)},e.prototype.bindAttributes=function(e){var t=e.position,n=e.textureCoord;this.glContext.setVertexAttributes(t,n),this.attributesBound=!0},e.prototype.bindUniforms=function(e,t,n){var r,o,s=this.glContext.gl,a=0;try{for(var c=i(e),l=c.next();!l.done;l=c.next()){var u=l.value,d=u.name,h=u.type,p=u.location,g=u.arrayLength;switch(h){case"sampler2D":this.bindTexture(n[a],p,a),a++;break;case"float":g?s.uniform1fv(p,t[d]):s.uniform1f(p,t[d]);break;case"int":g?s.uniform1iv(p,t[d]):s.uniform1i(p,t[d]);break;default:throw new Error("Uniform not implemented: "+h)}}}catch(e){r={error:e}}finally{try{l&&!l.done&&(o=c.return)&&o.call(c)}finally{if(r)throw r.error}}},e.prototype.bindTexture=function(e,t,n){this.glContext.bindTextureToUniform(e.texture,n,t)},e.prototype.getAttribLocations=function(e){return{position:this.getAttribLocation(e,"position"),textureCoord:this.getAttribLocation(e,"textureCoord")}},e.prototype.getUniformLocations=function(e,t,n){var o,s,a,c,l=[];if(t)try{for(var u=i(t),d=u.next();!d.done;d=u.next()){var h=d.value;l.push({name:h,type:"sampler2D",location:this.getUniformLocation(e,h)})}}catch(e){o={error:e}}finally{try{d&&!d.done&&(s=u.return)&&s.call(u)}finally{if(o)throw o.error}}if(n)try{for(var p=i(n),g=p.next();!g.done;g=p.next()){var f=g.value;l.push(r(r({},f),{location:this.getUniformLocation(e,f.name)}))}}catch(e){a={error:e}}finally{try{g&&!g.done&&(c=p.return)&&c.call(p)}finally{if(a)throw a.error}}return l},e.prototype.getUniformLocation=function(e,t){var n=this.glContext.gl.getUniformLocation(e,t);if(null===n)throw new Error("Uniform "+t+" not found.");return n},e.prototype.getAttribLocation=function(e,t){return this.glContext.gl.getAttribLocation(e,t)},e}();t.ProgramManager=l},function(e,t,n){var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.GlslPreprocessor=void 0;var i=n(5),o=n(156),s=n(157),a=n(2),c=function(){function e(e,t){var n=this;this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new i.GlslContext(e,t),Object.keys(s.glslRegistry).forEach((function(e){var t=new s.glslRegistry[e](n.context);n.libs[e]=t}));var r=this.glslLibRoutineDependencyGraph;for(var o in this.libs){var a=this.libs[o].getFunctions();for(var c in a){var l=o+"."+c,u=void 0;r[l]?(u=r[l]).routineBody=a[c].routineBody:(u=new i.GlslLibRoutineNode(l,a[c].routineBody),r[l]=u);var d=a[c].dependencies;if(d)for(var h=0;h<d.length;++h)if(r[d[h]])u.addDependency(r[d[h]]);else{var p=new i.GlslLibRoutineNode(d[h]);r[d[h]]=p,u.addDependency(p)}}}}return e.prototype.preprocess=function(){var e=this.context.programInfo,t=e.shaderSource;return this.context.programInfo.hasMain||(t=t+"\n      "+a.getDefaultFragShaderMain(this.context.glContext.version,e.outputLayout.shape.length)),t=o.replaceInlines(t),a.getFragShaderPreamble(this.context.glContext.version)+"\n    "+this.getUniforms(e.samplers,e.variables)+"\n    "+this.getImports(t)+"\n    "+t},e.prototype.getImports=function(e){var t=this.selectGlslLibRoutinesToBeIncluded(e);if(0===t.length)return"";for(var n="",r=0;r<t.length;++r){if(!t[r].routineBody)throw new Error("Missing body for the Glsl Library routine: "+t[r].name);n+=t[r].routineBody+"\n"}return n},e.prototype.selectGlslLibRoutinesToBeIncluded=function(e){var t=this,n=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach((function(r){var i=r.split(".")[1];-1!==e.indexOf(i)&&n.push(t.glslLibRoutineDependencyGraph[r])})),i.TopologicalSortGlslRoutines.returnOrderedNodes(n)},e.prototype.getUniforms=function(e,t){var n,i,o,s,a=[];if(e)try{for(var c=r(e),l=c.next();!l.done;l=c.next()){var u=l.value;a.push("uniform sampler2D "+u+";")}}catch(e){n={error:e}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}if(t)try{for(var d=r(t),h=d.next();!h.done;h=d.next()){var p=h.value;a.push("uniform "+p.type+" "+p.name+(p.arrayLength?"["+p.arrayLength+"]":"")+";")}}catch(e){o={error:e}}finally{try{h&&!h.done&&(s=d.return)&&s.call(d)}finally{if(o)throw o.error}}return a.join("\n")},e}();t.GlslPreprocessor=c},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.replaceInlines=void 0;var r=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm;t.replaceInlines=function(e){for(var t,n={};null!==(t=r.exec(e));){var i=t[3].split(",").map((function(e){var t=e.trim().split(" ");return t&&2===t.length?{type:t[0],name:t[1]}:null})).filter((function(e){return null!==e}));n[t[2]]={params:i,body:t[4]}}for(var o in n)for(var s="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;".replace("__FUNC__",o),a=new RegExp(s,"gm"),c=function(){var r=t[1],i=t[2],s=t[3].split(","),a=r?r+" "+i+";":"",c=n[o].body,l="";n[o].params.forEach((function(e,t){e&&(l+=e.type+" "+e.name+" = "+s[t]+";\n")}));var u="\n      "+a+"\n      {\n        "+(c=(c=l+"\n "+c).replace("return",i+" = "))+"\n      }\n      ";e=e.replace(t[0],u)};null!==(t=a.exec(e));)c();return e=e.replace(r,"")}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.glslRegistry=void 0;var r=n(158),i=n(159),o=n(160),s=n(161),a=n(162);t.glslRegistry={encoding:i.EncodingGlslLib,fragcolor:o.FragColorGlslLib,vec:a.VecGlslLib,shapeUtils:s.ShapeUtilsGlslLib,coordinates:r.CoordsGlslLib}},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.CoordsGlslLib=void 0;var s=n(5),a=n(2),c=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t.prototype.getFunctions=function(){return o(o(o(o({},this.offsetToCoords()),this.coordsToOffset()),this.toVec()),this.valueFrom())},t.prototype.getCustomTypes=function(){return{}},t.prototype.offsetToCoords=function(){return{offsetToCoords:new s.GlslLibRoutine("\n      vec2 offsetToCoords(int offset, int width, int height) {\n        int t = offset / width;\n        int s = offset - t*width;\n        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);\n        return coords;\n      }\n      ")}},t.prototype.coordsToOffset=function(){return{coordsToOffset:new s.GlslLibRoutine("\n      int coordsToOffset(vec2 coords, int width, int height) {\n        float s = coords.s * float(width);\n        float t = coords.t * float(height);\n        int offset = int(t) * width + int(s);\n        return offset;\n      }\n      ")}},t.prototype.toVec=function(){for(var e=this.context.programInfo.outputLayout,t=e.shape.length,n=e.strides,r=e.width,i=e.height,o=[],a=0;a<t-1;++a)o.push("\n        c["+a+"] = offset / "+n[a]+";"),o.push("\n        offset -= c["+a+"] * "+n[a]+";");o.push("\n        c["+(t-1)+"] = offset;");var c="\n      void toVec(vec2 texCoords, out int c["+t+"]) {\n        int offset = coordsToOffset(texCoords, "+r+", "+i+");\n        "+o.join("")+"\n      }\n      void toVec(int offset, out int c["+t+"]) {\n        "+o.join("")+"\n      }\n    ";return{toVec:new s.GlslLibRoutine(c,["coordinates.coordsToOffset"])}},t.prototype.valueFrom=function(){var e=this,t=this.context.programInfo,n={};return this.context.programInfo.samplers.forEach((function(r,i){var o=t.inputLayouts[i],a=o.shape.length,c="_"+r;n[c]=new s.GlslLibRoutine(e.getValueFromSingle(r,a,o.width,o.height,!1),["shapeUtils.indicesToOffset"+c,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),n[c+="_T"]=new s.GlslLibRoutine(e.getValueFromSingle(r,a,o.width,o.height,!0),["shapeUtils.indicesToOffset"+c,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])})),n},t.prototype.getValueFromSingle=function(e,t,n,r,i){var o="_"+e;return i&&(o+="_T"),"\n        float "+o+"(int m["+t+"]) {\n          int offset = indicesToOffset"+o+"(m);\n          vec2 coords = offsetToCoords(offset, "+n+", "+r+");\n          float value = getColorAsFloat("+a.getGlsl(this.context.glContext.version).texture2D+"("+e+", coords));\n          return value;\n        }\n        "},t}(s.GlslLib);t.CoordsGlslLib=c},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.EncodingGlslLib=void 0;var s=n(5),a=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t.prototype.getFunctions=function(){return o(o({},this.encodeFloat32()),this.decodeFloat32())},t.prototype.getCustomTypes=function(){return{}},t.prototype.encodeFloat32=function(){return{encode:new s.GlslLibRoutine("highp vec4 encode(highp float f) {\n        return vec4(f, 0.0, 0.0, 0.0);\n      }\n        ")}},t.prototype.decodeFloat32=function(){return{decode:new s.GlslLibRoutine("highp float decode(highp vec4 rgba) {\n        return rgba.r;\n      }\n        ")}},t.prototype.encodeUint8=function(){var e=t.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new s.GlslLibRoutine("\n      highp vec4 encode(highp float f) {\n        highp float F = abs(f);\n        highp float Sign = step(0.0,-f);\n        highp float Exponent = floor(log2(F));\n        highp float Mantissa = (exp2(- Exponent) * F);\n        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));\n        highp vec4 rgba;\n        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));\n        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);\n        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));\n        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));\n        "+e+"\n        rgba = rgba / 255.0; // values need to be normalized to [0,1]\n        return rgba;\n    }\n        ")}},t.prototype.decodeUint8=function(){var e=t.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new s.GlslLibRoutine("\n        highp float decode(highp vec4 rgba) {\n          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]\n          "+e+"\n          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;\n          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;\n          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);\n          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));\n          return Result;\n      }\n        ")}},t.isLittleEndian=function(){var e=new ArrayBuffer(4),t=new Uint32Array(e),n=new Uint8Array(e);if(t[0]=3735928559,239===n[0])return!0;if(222===n[0])return!1;throw new Error("unknown endianness")},t}(s.GlslLib);t.EncodingGlslLib=a},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.FragColorGlslLib=void 0;var s=n(5),a=n(2),c=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t.prototype.getFunctions=function(){return o(o({},this.setFragColor()),this.getColorAsFloat())},t.prototype.getCustomTypes=function(){return{}},t.prototype.setFragColor=function(){var e=a.getGlsl(this.context.glContext.version);return{setFragColor:new s.GlslLibRoutine("\n        void setFragColor(float value) {\n            "+e.output+" = encode(value);\n        }\n        ",["encoding.encode"])}},t.prototype.getColorAsFloat=function(){return{getColorAsFloat:new s.GlslLibRoutine("\n        float getColorAsFloat(vec4 color) {\n            return decode(color);\n        }\n        ",["encoding.decode"])}},t}(s.GlslLib);t.FragColorGlslLib=c},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeUtilsGlslLib=void 0;var s=n(5),a=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t.prototype.getFunctions=function(){return o(o(o(o(o({},this.bcastIndex()),this.bcastMatmulIndex()),this.offsetToIndices()),this.indicesToOffset()),this.incrementIndices())},t.prototype.getCustomTypes=function(){return{}},t.prototype.bcastIndex=function(){var e=this.context.programInfo,t=e.outputLayout.shape.length,n={};return this.context.programInfo.samplers.forEach((function(r,i){var o=e.inputLayouts[i].shape;if(o.length<=t){for(var a=o.length,c=t-a,l="bcastIndices_"+r,u="",d=0;d<a;++d)u+="\n          realIndices["+d+"] = int( mod(float(bcastedIndices["+(c+d)+"]), "+o[d]+".0) );\n          ";var h="\n        void "+l+" (int bcastedIndices["+t+"], out int realIndices["+a+"]) {\n          "+u+"\n        }\n        ";n[l]=new s.GlslLibRoutine(h)}})),n},t.prototype.bcastMatmulIndex=function(){var e=this.context.programInfo,t=e.outputLayout.shape.length,n={};return this.context.programInfo.samplers.forEach((function(r,i){var o=e.inputLayouts[i].shape;if(!(o.length<2||o.length>t)){for(var a=o.length,c=t-a,l="bcastMatmulIndices_"+r,u="",d=0;d<a-2;++d)u+="\n          realIndices["+d+"] = int( mod(float(bcastedIndices["+(c+d)+"]), "+o[d]+".0) );\n          ";var h="\n        void "+l+"(int bcastedIndices["+t+"], out int realIndices["+a+"]) {\n          "+u+"\n          realIndices["+(a-1)+"] = bcastedIndices["+(t-1)+"];\n          realIndices["+(a-2)+"] = bcastedIndices["+(t-2)+"];\n        }\n        ";n[l]=new s.GlslLibRoutine(h)}})),n},t.prototype.indicesToOffset=function(){var e=this.context.programInfo,n={};return this.context.programInfo.samplers.forEach((function(r,i){var o=e.inputLayouts[i].shape,a=e.inputLayouts[i].strides,c=o.length,l="indicesToOffset_"+r;n[l]=new s.GlslLibRoutine(t.indexToOffsetSingle(l,c,a)),n[l="indicesToOffset_"+r+"_T"]=new s.GlslLibRoutine(t.indexToOffsetSingle(l,c,a.slice().reverse()))})),n},t.indexToOffsetSingle=function(e,t,n){for(var r="",i=t-1;i>=0;--i)r+="\n        offset += indices["+i+"] * "+n[i]+";\n        ";return"\n      int "+e+"(int indices["+t+"]) {\n        int offset = 0;\n        "+r+"\n        return offset;\n      }\n      "},t.prototype.offsetToIndices=function(){var e=this.context.programInfo,n={};return this.context.programInfo.samplers.forEach((function(r,i){var o=e.inputLayouts[i].shape,a=e.inputLayouts[i].strides,c=o.length,l="offsetToIndices_"+r;n[l]=new s.GlslLibRoutine(t.offsetToIndicesSingle(l,c,a)),n[l="offsetToIndices_"+r+"_T"]=new s.GlslLibRoutine(t.offsetToIndicesSingle(l,c,a.slice().reverse()))})),n},t.offsetToIndicesSingle=function(e,t,n){for(var r=[],i=0;i<t-1;++i)r.push("\n      indices["+i+"] = offset / "+n[i]+";"),r.push("\n        offset -= indices["+i+"] * "+n[i]+";");return r.push("\n      indices["+(t-1)+"] = offset;"),"\n      void "+e+"(int offset, out int indices["+t+"]) {\n        "+r.join("")+"\n      }\n      "},t.prototype.incrementIndices=function(){var e=this.context.programInfo,t={};return this.context.programInfo.samplers.forEach((function(n,r){for(var i=e.inputLayouts[r].shape,o=i.length,a="incrementIndices_"+n,c="",l=0;l<o;++l)c+="\n        shape["+l+"] = "+i[l]+";";var u="\n        void "+a+"(int axis, out int indices["+o+"]) {\n          int shape["+o+"];\n          "+c+";\n          for(int i = "+o+" -1 ; i >= 0; --i) {\n            if(i > axis) continue;\n            indices[i] += 1;\n            if(indices[i] < shape[i]) {\n              break;\n            }\n            indices[i] = 0;\n          }\n        }\n        ";t[a]=new s.GlslLibRoutine(u)})),t},t}(s.GlslLib);t.ShapeUtilsGlslLib=a},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.VecGlslLib=void 0;var s=n(5),a=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t.prototype.getCustomTypes=function(){return{}},t.prototype.getFunctions=function(){return o(o(o(o({},this.binaryVecFunctions()),this.copyVec()),this.setVecItem()),this.getVecItem())},t.prototype.binaryVecFunctions=function(){var e=this.context.programInfo.outputLayout.shape.length,t={add:"+=",sub:"-=",mul:"*=",div:"/="},n={};for(var r in t){for(var i=r+"Vec",o="",a=0;a<e;++a)o+="\n          dest["+a+"] "+t[r]+" src["+a+"];\n          ";var c="\n        void "+i+"(int src["+e+"], out int dest["+e+"]) {\n          "+o+"\n        }\n        ";n[i]=new s.GlslLibRoutine(c)}return n},t.prototype.copyVec=function(){for(var e=this.context.programInfo.outputLayout.shape.length,t="",n=0;n<e;++n)t+="\n        dest["+n+"] = src["+n+"];\n        ";var r="\n      void copyVec(int src["+e+"], out int dest["+e+"]) {\n        "+t+"\n      }\n      ";return{copyVec:new s.GlslLibRoutine(r)}},t.prototype.setVecItem=function(){for(var e=this.context.programInfo.outputLayout.shape.length,t="\n        if(index < 0)\n            index ="+e+" + index;\n        if (index == 0)\n            m[0] = value;\n        ",n=1;n<e-1;++n)t+="\n        else if (index == "+n+")\n            m["+n+"] = value;\n            ";var r="\n      void setVecItem(out int m["+e+"], int index, int value) {\n        "+(t+="\n        else\n            m["+(e-1)+"] = value;\n        ")+"\n      }\n        ";return{setVecItem:new s.GlslLibRoutine(r)}},t.prototype.getVecItem=function(){for(var e=this.context.programInfo.outputLayout.shape.length,t="\n        if(index < 0)\n            index = "+e+" + index;\n        if (index == 0)\n            return m[0];\n      ",n=1;n<e-1;++n)t+="\n        else if (index == "+n+")\n            return m["+n+"];\n      ";var r="\n      int getVecItem(int m["+e+"], int index) {\n        "+(t+="\n        else\n            return m["+(e-1)+"];\n        ")+"\n      }\n    ";return{getVecItem:new s.GlslLibRoutine(r)}},t}(s.GlslLib);t.VecGlslLib=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AlwaysKeepOriginalSizeStrategy=void 0;var r=n(3),i=function(){function e(e){this.maxTextureSize=e}return e.prototype.computeTextureWH=function(e,t){if(0===e.length)return[1,1];var n=this.maxTextureSize;if(t){var i=t.breakAxis>=e.length?1:e.slice(t.breakAxis).reduce((function(e,t){return e*t})),o=t.breakAxis<=0?1:e.slice(0,t.breakAxis).reduce((function(e,t){return e*t}));if(!(i>n||o>n))return[i,o];r.Logger.verbose("TextureLayout","Given width/height preferences were unattainable: shape:"+e+", breakAxis:"+t.breakAxis)}for(var s=e.reduce((function(e,t){return e*t})),a=Math.floor(Math.sqrt(s));a<n&&a<s&&s%a!=0;a++);if(a>=n||s%a!=0)throw new Error("The given dimensions are outside this GPU's boundaries: "+e);return[a,s/a]},e}();t.AlwaysKeepOriginalSizeStrategy=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TextureManager=void 0;var r=n(3),i=function(){function e(e,t,n,r){this.glContext=e,this.layoutStrategy=t,this.profiler=n,this.config=r,r.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}return e.prototype.createTextureFromLayout=function(e,t,n,i){var o,s,a=this.toEncoderType(e),c=this.glContext.getEncoder(a,t.channels||1,i);if(this.config.reuseTextures){o=t.width+"x"+t.height+"_"+c.format+"_"+c.internalFormat+"_"+c.textureType,(s=this.inUseTextures.get(o))||(s=[],this.inUseTextures.set(o,s));var l=this.idleTextures.get(o);if(l&&l.length>0){var u=l.pop();return s.push(u),1===i&&this.glContext.updateTexture(u,t.width,t.height,c,this.toTextureData(e,n)),u}}r.Logger.verbose("TextureManager","Creating new texture of size "+t.width+"x"+t.height);var d=this.glContext.allocateTexture(t.width,t.height,c,this.toTextureData(e,n));return this.config.reuseTextures&&(s.push(d),this.textureLookup.set(d,o)),d},e.prototype.readTexture=function(e,t,n){var r=this;return n||(n=1),this.profiler.event("backend","TextureManager.readTexture",(function(){var i=e.shape.reduce((function(e,t){return e*t}))*n,o=r.glContext.readTexture(e.texture,e.width,e.height,i,r.toEncoderType(t),n);return r.toTensorData(t,o)}))},e.prototype.readUint8TextureAsFloat=function(e){var t=this;return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",(function(){var n=e.shape.reduce((function(e,t){return e*t})),r=t.glContext.readTexture(e.texture,e.width,e.height,4*n,"byte",4);return new Float32Array(r.buffer,r.byteOffset,n)}))},e.prototype.releaseTexture=function(e,t){var n;if(this.config.reuseTextures&&(n=this.textureLookup.get(e.texture))){t&&this.textureLookup.delete(n);var i=this.inUseTextures.get(n);if(i){var o=i.indexOf(e.texture);if(-1!==o){i.splice(o,1);var s=this.idleTextures.get(n);s||(s=[],this.idleTextures.set(n,s)),s.push(e.texture)}}}n&&!t||(r.Logger.verbose("TextureManager","Deleting texture of size "+e.width+"x"+e.height),this.glContext.deleteTexture(e.texture))},e.prototype.toTensorData=function(e,t){return t instanceof Float32Array?t:new Float32Array(t)},e.prototype.toTextureData=function(e,t){if(t)return t instanceof Float32Array?t:new Float32Array(t)},e.prototype.toEncoderType=function(e){return"float"},e.prototype.clearActiveTextures=function(){this.glContext.clearActiveTextures()},e}();t.TextureManager=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.createNewWebGLContext=t.createWebGLContext=void 0;var r=n(3),i=n(166),o={};function s(e){var t,n=function(){var e=document.createElement("canvas");return e.width=1,e.height=1,e}(),o={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1};if((!e||"webgl2"===e)&&(t=n.getContext("webgl2",o)))try{return new i.WebGLContext(t,2)}catch(e){r.Logger.warning("GlContextFactory","failed to create WebGLContext using contextId 'webgl2'. Error: "+e)}if((!e||"webgl"===e)&&(t=n.getContext("webgl",o)||n.getContext("experimental-webgl",o)))try{return new i.WebGLContext(t,1)}catch(e){r.Logger.warning("GlContextFactory","failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: "+e)}throw new Error("WebGL is not supported")}t.createWebGLContext=function e(t){var n;t&&"webgl2"!==t||!("webgl2"in o)?t&&"webgl"!==t||!("webgl"in o)||(n=o.webgl):n=o.webgl2,n=n||s(t),t=t||1===n.version?"webgl":"webgl2";var r=n.gl;return o[t]=n,r.isContextLost()?(delete o[t],e(t)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),n)},t.createNewWebGLContext=s},function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLContext=void 0;var s=n(25),a=o(n(167)),c=function(){function e(e,t){this.frameBufferBound=!1,this.gl=e,this.version=t,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}return e.prototype.allocateTexture=function(e,t,n,r){var i=this.gl,o=i.createTexture();i.bindTexture(i.TEXTURE_2D,o),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE);var s=r?n.encode(r,e*t):null;return i.texImage2D(i.TEXTURE_2D,0,n.internalFormat,e,t,0,n.format,n.textureType,s),this.checkError(),o},e.prototype.updateTexture=function(e,t,n,r,i){var o=this.gl;o.bindTexture(o.TEXTURE_2D,e);var s=r.encode(i,t*n);o.texSubImage2D(o.TEXTURE_2D,0,0,0,t,n,r.format,r.textureType,s),this.checkError()},e.prototype.attachFramebuffer=function(e,t,n){var r=this.gl;r.bindTexture(r.TEXTURE_2D,e),r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e,0),this.checkError(),r.viewport(0,0,t,n),r.scissor(0,0,t,n)},e.prototype.readTexture=function(e,t,n,r,i,o){var s=this.gl;o||(o=1),this.frameBufferBound||this.attachFramebuffer(e,t,n);var a=this.getEncoder(i,o),c=a.allocate(t*n);return s.bindTexture(s.TEXTURE_2D,e),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,e,0),s.readPixels(0,0,t,n,s.RGBA,a.textureType,c),this.checkError(),a.decode(c,r)},e.prototype.isFramebufferReady=function(){return!0},e.prototype.getActiveTexture=function(){var e=this.gl;return"TEXTURE"+(e.getParameter(this.gl.ACTIVE_TEXTURE)-e.TEXTURE0)},e.prototype.getTextureBinding=function(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)},e.prototype.getFramebufferBinding=function(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)},e.prototype.setVertexAttributes=function(e,t){var n=this.gl;n.vertexAttribPointer(e,3,n.FLOAT,!1,20,0),n.enableVertexAttribArray(e),-1!==t&&(n.vertexAttribPointer(t,2,n.FLOAT,!1,20,12),n.enableVertexAttribArray(t)),this.checkError()},e.prototype.createProgram=function(e,t){var n=this.gl,r=n.createProgram();return n.attachShader(r,e),n.attachShader(r,t),n.linkProgram(r),r},e.prototype.compileShader=function(e,t){var n=this.gl,r=n.createShader(t);if(!r)throw new Error("createShader() returned null with type "+t);if(n.shaderSource(r,e),n.compileShader(r),!1===n.getShaderParameter(r,n.COMPILE_STATUS))throw new Error("Failed to compile shader: "+n.getShaderInfoLog(r));return r},e.prototype.deleteShader=function(e){this.gl.deleteShader(e)},e.prototype.bindTextureToUniform=function(e,t,n){var r=this.gl;r.activeTexture(r.TEXTURE0+t),this.checkError(),r.bindTexture(r.TEXTURE_2D,e),this.checkError(),r.uniform1i(n,t),this.checkError()},e.prototype.draw=function(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()},e.prototype.checkError=function(){if(s.env.debug){var e=this.gl,t=e.getError(),n="";switch(t){case e.NO_ERROR:return;case e.INVALID_ENUM:n="INVALID_ENUM";break;case e.INVALID_VALUE:n="INVALID_VALUE";break;case e.INVALID_OPERATION:n="INVALID_OPERATION";break;case e.INVALID_FRAMEBUFFER_OPERATION:n="INVALID_FRAMEBUFFER_OPERATION";break;case e.OUT_OF_MEMORY:n="OUT_OF_MEMORY";break;case e.CONTEXT_LOST_WEBGL:n="CONTEXT_LOST_WEBGL";break;default:n="Unknown WebGL Error: "+t.toString(16)}throw new Error(n)}},e.prototype.deleteTexture=function(e){this.gl.deleteTexture(e)},e.prototype.deleteProgram=function(e){this.gl.deleteProgram(e)},e.prototype.getEncoder=function(e,t,n){if(void 0===n&&(n=0),2===this.version)return new a.RedFloat32DataEncoder(this.gl,t);switch(e){case"float":return 1===n||this.isRenderFloat32Supported?new a.RGBAFloatDataEncoder(this.gl,t):new a.RGBAFloatDataEncoder(this.gl,t,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new a.Uint8DataEncoder(this.gl,t);default:throw new Error("Invalid dataType: "+e)}},e.prototype.clearActiveTextures=function(){for(var e=this.gl,t=0;t<this.maxTextureImageUnits;++t)e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,null)},e.prototype.dispose=function(){if(!this.disposed){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteFramebuffer(this.framebuffer),e.bindBuffer(e.ARRAY_BUFFER,null),e.deleteBuffer(this.vertexbuffer),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.finish(),this.disposed=!0}},e.prototype.createDefaultGeometry=function(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])},e.prototype.createVertexbuffer=function(){var e=this.gl,t=e.createBuffer();if(!t)throw new Error("createBuffer() returned null");var n=this.createDefaultGeometry();return e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW),this.checkError(),t},e.prototype.createFramebuffer=function(){var e=this.gl.createFramebuffer();if(!e)throw new Error("createFramebuffer returned null");return e},e.prototype.queryVitalParameters=function(){var e=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),1===this.version&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),this.version},e.prototype.getExtensions=function(){2===this.version?this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))},e.prototype.checkFloatTextureAttachableToFrameBuffer=function(){var e=this.gl,t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);var n=2===this.version?e.RGBA32F:e.RGBA;e.texImage2D(e.TEXTURE_2D,0,n,1,1,0,e.RGBA,e.FLOAT,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0);var i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(t),e.deleteFramebuffer(r),i},e.prototype.checkRenderFloat32=function(){if(2===this.version){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer},e.prototype.checkFloat32Download=function(){if(2===this.version){if(!this.colorBufferFloatExtension)return!1}else{if(!this.textureFloatExtension)return!1;if(!this.gl.getExtension("WEBGL_color_buffer_float"))return!1}return this.isFloatTextureAttachableToFrameBuffer},e.prototype.checkFloat32Blend=function(){var e,t,n,r,i,o=this.gl;try{e=o.createTexture(),t=o.createFramebuffer(),o.bindTexture(o.TEXTURE_2D,e);var s=2===this.version?o.RGBA32F:o.RGBA;return o.texImage2D(o.TEXTURE_2D,0,s,1,1,0,o.RGBA,o.FLOAT,null),o.bindFramebuffer(o.FRAMEBUFFER,t),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,e,0),o.enable(o.BLEND),!!(n=o.createShader(o.VERTEX_SHADER))&&(o.shaderSource(n,"void main(){}"),o.compileShader(n),!!(r=o.createShader(o.FRAGMENT_SHADER))&&(o.shaderSource(r,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),o.compileShader(r),!!(i=o.createProgram())&&(o.attachShader(i,n),o.attachShader(i,r),o.linkProgram(i),o.useProgram(i),o.drawArrays(o.POINTS,0,1),o.getError()===o.NO_ERROR)))}finally{o.disable(o.BLEND),i&&o.deleteProgram(i),n&&o.deleteShader(n),r&&o.deleteShader(r),t&&(o.bindFramebuffer(o.FRAMEBUFFER,null),o.deleteFramebuffer(t)),e&&(o.bindTexture(o.TEXTURE_2D,null),o.deleteTexture(e))}},e}();t.WebGLContext=c},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Uint8DataEncoder=t.RGBAFloatDataEncoder=t.RedFloat32DataEncoder=void 0;var r=n(3),i=function(){function e(e,t){if(void 0===t&&(t=1),1===t)this.internalFormat=e.R32F,this.format=e.RED,this.textureType=e.FLOAT,this.channelSize=t;else{if(4!==t)throw new Error("Invalid number of channels: "+t);this.internalFormat=e.RGBA32F,this.format=e.RGBA,this.textureType=e.FLOAT,this.channelSize=t}}return e.prototype.encode=function(e,t){var n,i;return e.constructor!==Float32Array&&(r.Logger.warning("Encoder","data was not of type Float32; creating new Float32Array"),i=new Float32Array(e)),t*this.channelSize>e.length?(r.Logger.warning("Encoder","Source data too small. Allocating larger array"),i=e,n=this.allocate(t*this.channelSize),i.forEach((function(e,t){return n[t]=e}))):n=i=e,n},e.prototype.allocate=function(e){return new Float32Array(4*e)},e.prototype.decode=function(e,t){return 1===this.channelSize?e.filter((function(e,t){return t%4==0})).subarray(0,t):e.subarray(0,t)},e}();t.RedFloat32DataEncoder=i;var o=function(){function e(e,t,n){if(void 0===t&&(t=1),1!==t&&4!==t)throw new Error("Invalid number of channels: "+t);this.internalFormat=e.RGBA,this.format=e.RGBA,this.channelSize=t,this.textureType=n||e.FLOAT}return e.prototype.encode=function(e,t){var n=e;return 1===this.channelSize&&(r.Logger.verbose("Encoder","Exploding into a larger array"),n=this.allocate(t),e.forEach((function(e,t){return n[4*t]=e}))),n},e.prototype.allocate=function(e){return new Float32Array(4*e)},e.prototype.decode=function(e,t){return 1===this.channelSize?e.filter((function(e,t){return t%4==0})).subarray(0,t):e.subarray(0,t)},e}();t.RGBAFloatDataEncoder=o;var s=function(){function e(e,t){if(void 0===t&&(t=1),this.channelSize=4,1===t)this.internalFormat=e.ALPHA,this.format=e.ALPHA,this.textureType=e.UNSIGNED_BYTE,this.channelSize=t;else{if(4!==t)throw new Error("Invalid number of channels: "+t);this.internalFormat=e.RGBA,this.format=e.RGBA,this.textureType=e.UNSIGNED_BYTE,this.channelSize=t}}return e.prototype.encode=function(e,t){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)},e.prototype.allocate=function(e){return new Uint8Array(e*this.channelSize)},e.prototype.decode=function(e,t){if(e instanceof Uint8Array)return e.subarray(0,t);throw new Error("Invalid array type: "+e.constructor)},e}();t.Uint8DataEncoder=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.envImpl=void 0;var r=n(25),i=function(){function e(){}return Object.defineProperty(e.prototype,"debug",{get:function(){return r.env.debug},set:function(e){r.env.debug=e},enumerable:!1,configurable:!0}),e}();t.envImpl=new i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Tensor=void 0;var s=o(n(51));t.Tensor=s.Tensor},function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.InferenceSession=void 0;var s=o(n(173));t.InferenceSession=s.InferenceSession},function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.InferenceSession=void 0;var c=n(174),l=o(n(52)),u=function(){function e(e){this.session=new c.Session(e)}return e.prototype.loadModel=function(e,t,n){if("string"==typeof e)return this.session.loadModel(e);if("undefined"!=typeof Blob&&e instanceof Blob){var r=URL.createObjectURL(e);return this.session.loadModel(r)}if(e instanceof ArrayBuffer)return this.session.loadModel(e,t,n);if(ArrayBuffer.isView(e))return this.session.loadModel(e);throw new Error("Model type is not supported.")},e.prototype.run=function(e,t){return s(this,void 0,void 0,(function(){var t,n,r,i,o,s;return a(this,(function(a){switch(a.label){case 0:return t=new Map,e instanceof Map?(n=new Map,e.forEach((function(e,t){n.set(t,e.internalTensor)})),[4,this.session.run(n)]):[3,2];case 1:return t=a.sent(),[3,5];case 2:return Array.isArray(e)?(r=[],e.forEach((function(e){r.push(e.internalTensor)})),[4,this.session.run(r)]):[3,4];case 3:return t=a.sent(),[3,5];case 4:for(o in i=new Map,e)i.set(o,e[o].internalTensor);a.label=5;case 5:return s=new Map,t.forEach((function(e,t){s.set(t,l.fromInternalTensor(e))})),[2,s]}}))}))},e.prototype.startProfiling=function(){this.session.startProfiling()},e.prototype.endProfiling=function(){this.session.endProfiling()},e}();t.InferenceSession=u},function(e,t,n){(function(e){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Session=void 0;var o=n(48),s=n(175),a=n(178),c=n(179),l=n(3),u=n(180),d=function(){function t(e){void 0===e&&(e={}),this._initialized=!1,this.backendHint=e.backendHint,this.profiler=l.Profiler.create(e.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}return t.prototype.startProfiling=function(){this.profiler.start()},t.prototype.endProfiling=function(){this.profiler.stop()},t.prototype.loadModel=function(t,n,c){return r(this,void 0,void 0,(function(){var l=this;return i(this,(function(d){switch(d.label){case 0:return[4,this.profiler.event("session","Session.loadModel",(function(){return r(l,void 0,void 0,(function(){var r,l,d;return i(this,(function(i){switch(i.label){case 0:return[4,a.Backend(this.backendHint)];case 1:return r=i.sent(),this.sessionHandler=r.createSessionHandler(this.context),this._model=new u.Model,"string"!=typeof t?[3,7]:"undefined"!=typeof fetch?[3,3]:[4,s.promisify(o.readFile)(t)];case 2:return l=i.sent(),this.initialize(e.from(l)),[3,6];case 3:return[4,fetch(t)];case 4:return[4,i.sent().arrayBuffer()];case 5:l=i.sent(),this.initialize(e.from(l)),i.label=6;case 6:return[3,8];case 7:ArrayBuffer.isView(t)?this.initialize(e.from(t)):(d=new Uint8Array(t,n||0,c||t.byteLength),this.initialize(e.from(d))),i.label=8;case 8:return[2]}}))}))}))];case 1:return d.sent(),[2]}}))}))},t.prototype.initialize=function(e){var t=this;if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",(function(){var n=t.sessionHandler.transformGraph?t.sessionHandler:void 0;t._model.load(e,n),t.sessionHandler.onGraphInitialized&&t.sessionHandler.onGraphInitialized(t._model.graph),t.initializeOps(t._model.graph),t._executionPlan=new c.ExecutionPlan(t._model.graph,t._ops,t.profiler)})),this._initialized=!0},t.prototype.run=function(e){var t=this;if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",(function(){return r(t,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:return t=this.normalizeAndValidateInputs(e),[4,this._executionPlan.execute(this.sessionHandler,t)];case 1:return n=r.sent(),[2,this.createOutput(n)]}}))}))}))},t.prototype.normalizeAndValidateInputs=function(e){var t=this._model.graph.getInputNames();if(Array.isArray(e)){if(e.length!==t.length)throw new Error("incorrect input array length: expected "+t.length+" but got "+e.length)}else{if(e.size!==t.length)throw new Error("incorrect input map size: expected "+t.length+" but got "+e.size);for(var n=new Array(e.size),r=0,i=0;i<t.length;++i){var o=e.get(t[i]);if(!o)throw new Error("missing input tensor for: '"+name+"'");n[r++]=o}e=n}if(this.context.graphInputTypes&&0!==this.context.graphInputTypes.length&&this.context.graphInputDims&&0!==this.context.graphInputDims.length)this.validateInputTensorDims(this.context.graphInputDims,e,!1);else{var s=this._model.graph.getInputIndices(),a=this._model.graph.getValues(),c=new Array(s.length);for(i=0;i<s.length;++i){var l=a[s[i]];c[i]=l.type.shape.dims,this.context.graphInputTypes.push(l.type.tensorType),this.context.graphInputDims.push(e[i].dims)}this.validateInputTensorDims(c,e,!0)}return this.validateInputTensorTypes(this.context.graphInputTypes,e),e},t.prototype.validateInputTensorTypes=function(e,t){for(var n=0;n<t.length;n++){var r=e[n],i=t[n].type;if(r!==i)throw new Error("input tensor["+n+"] check failed: expected type '"+r+"' but got "+i)}},t.prototype.validateInputTensorDims=function(e,t,n){for(var r=0;r<t.length;r++){var i=e[r],o=t[r].dims;if(!this.compareTensorDims(i,o,n))throw new Error("input tensor["+r+"] check failed: expected shape '["+i.join(",")+"]' but got ["+o.join(",")+"]")}},t.prototype.compareTensorDims=function(e,t,n){if(e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(e[r]!==t[r]&&(!n||0!==e[r]))return!1;return!0},t.prototype.createOutput=function(e){var t=this._model.graph.getOutputNames();if(e.length!==t.length)throw new Error("expected number of outputs do not match number of generated outputs");for(var n=new Map,r=0;r<t.length;++r)n.set(t[r],e[r]);return n},t.prototype.initializeOps=function(e){var t=e.getNodes();this._ops=new Array(t.length);for(var n=0;n<t.length;n++)this._ops[n]=this.sessionHandler.resolve(t[n],this._model.opsets)},t}();t.Session=d}).call(this,n(12).Buffer)},function(e,t,n){(function(e){var r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},i=/%[sdj%]/g;t.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(a(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,o=r.length,s=String(e).replace(i,(function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}})),c=r[n];n<o;c=r[++n])f(c)||!v(c)?s+=" "+c:s+=" "+a(c);return s},t.deprecate=function(n,r){if(void 0!==e&&!0===e.noDeprecation)return n;if(void 0===e)return function(){return t.deprecate(n,r).apply(this,arguments)};var i=!1;return function(){if(!i){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),i=!0}return n.apply(this,arguments)}};var o,s={};function a(e,n){var r={seen:[],stylize:l};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),g(n)?r.showHidden=n:n&&t._extend(r,n),y(r.showHidden)&&(r.showHidden=!1),y(r.depth)&&(r.depth=2),y(r.colors)&&(r.colors=!1),y(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=c),u(r,e,r.depth)}function c(e,t){var n=a.styles[t];return n?"["+a.colors[n][0]+"m"+e+"["+a.colors[n][1]+"m":e}function l(e,t){return e}function u(e,n,r){if(e.customInspect&&n&&k(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return b(i)||(i=u(e,i,r)),i}var o=function(e,t){if(y(t))return e.stylize("undefined","undefined");if(b(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return m(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):f(t)?e.stylize("null","null"):void 0}(e,n);if(o)return o;var s=Object.keys(n),a=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(n)),S(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return d(n);if(0===s.length){if(k(n)){var c=n.name?": "+n.name:"";return e.stylize("[Function"+c+"]","special")}if(_(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(w(n))return e.stylize(Date.prototype.toString.call(n),"date");if(S(n))return d(n)}var l,v="",I=!1,C=["{","}"];return p(n)&&(I=!0,C=["[","]"]),k(n)&&(v=" [Function"+(n.name?": "+n.name:"")+"]"),_(n)&&(v=" "+RegExp.prototype.toString.call(n)),w(n)&&(v=" "+Date.prototype.toUTCString.call(n)),S(n)&&(v=" "+d(n)),0!==s.length||I&&0!=n.length?r<0?_(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),l=I?function(e,t,n,r,i){for(var o=[],s=0,a=t.length;s<a;++s)x(t,String(s))?o.push(h(e,t,n,r,String(s),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(h(e,t,n,r,i,!0))})),o}(e,n,r,a,s):s.map((function(t){return h(e,n,r,a,t,I)})),e.seen.pop(),function(e,t,n){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(l,v,C)):C[0]+v+C[1]}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,r,i,o){var s,a,c;if((c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?a=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),x(r,i)||(s="["+i+"]"),a||(e.seen.indexOf(c.value)<0?(a=f(n)?u(e,c.value,null):u(e,c.value,n-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),y(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function p(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function f(e){return null===e}function m(e){return"number"==typeof e}function b(e){return"string"==typeof e}function y(e){return void 0===e}function _(e){return v(e)&&"[object RegExp]"===I(e)}function v(e){return"object"==typeof e&&null!==e}function w(e){return v(e)&&"[object Date]"===I(e)}function S(e){return v(e)&&("[object Error]"===I(e)||e instanceof Error)}function k(e){return"function"==typeof e}function I(e){return Object.prototype.toString.call(e)}function C(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(n){if(y(o)&&(o=e.env.NODE_DEBUG||""),n=n.toUpperCase(),!s[n])if(new RegExp("\\b"+n+"\\b","i").test(o)){var r=e.pid;s[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,r,e)}}else s[n]=function(){};return s[n]},t.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=p,t.isBoolean=g,t.isNull=f,t.isNullOrUndefined=function(e){return null==e},t.isNumber=m,t.isString=b,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=y,t.isRegExp=_,t.isObject=v,t.isDate=w,t.isError=S,t.isFunction=k,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(176);var E=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function A(){var e=new Date,t=[C(e.getHours()),C(e.getMinutes()),C(e.getSeconds())].join(":");return[e.getDate(),E[e.getMonth()],t].join(" ")}function x(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",A(),t.format.apply(t,arguments))},t.inherits=n(177),t._extend=function(e,t){if(!t||!v(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var T="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function O(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(T&&e[T]){var t;if("function"!=typeof(t=e[T]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,T,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise((function(e,r){t=e,n=r})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(e,r){e?n(e):t(r)}));try{e.apply(this,i)}catch(e){n(e)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),T&&Object.defineProperty(t,T,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=T,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,s=function(){return i.apply(o,arguments)};t.apply(this,n).then((function(t){e.nextTick(s,null,t)}),(function(t){e.nextTick(O,t,s)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,r(t)),n}}).call(this,n(24))},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.Backend=void 0;var s=new Map;function a(e){return r(this,void 0,void 0,(function(){var t,n,r;return i(this,(function(i){switch(i.label){case 0:return void 0!==(t=onnx.backend)[e]&&function(e){var t=e;return"initialize"in t&&"function"==typeof t.initialize&&"createSessionHandler"in t&&"function"==typeof t.createSessionHandler&&"dispose"in t&&"function"==typeof t.dispose}(t[e])?t[e].disabled?[3,3]:(n=t[e],"object"==typeof(r=n.initialize())&&"then"in r?[4,r]:[3,2]):[3,3];case 1:r=i.sent(),i.label=2;case 2:if(r)return s.set(e,n),[2,n];i.label=3;case 3:return[2,void 0]}}))}))}t.Backend=function e(t){return r(this,void 0,void 0,(function(){var n,r,c,l,u,d,h,p,g;return i(this,(function(i){switch(i.label){case 0:return t?[3,1]:[2,e(["webgl","wasm","cpu"])];case 1:n="string"==typeof t?[t]:t,i.label=2;case 2:i.trys.push([2,7,8,9]),r=o(n),c=r.next(),i.label=3;case 3:return c.done?[3,6]:(l=c.value,(u=s.get(l))?[2,u]:[4,a(l)]);case 4:if(d=i.sent())return[2,d];i.label=5;case 5:return c=r.next(),[3,3];case 6:return[3,9];case 7:return h=i.sent(),p={error:h},[3,9];case 8:try{c&&!c.done&&(g=r.return)&&g.call(r)}finally{if(p)throw p.error}return[7];case 9:throw new Error("no available backend to use")}}))}))}},function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0}),t.ExecutionPlan=void 0;var c=n(3),l=function(e,t){this.op=e,this.node=t},u=function(){function e(e,t,n){this.graph=e,this.profiler=n,this.initialize(t)}return e.prototype.initialize=function(e){var t=this;this.profiler.event("session","ExecutionPlan.initialize",(function(){var n=t.graph.getNodes();if(n.length!==e.length)throw new Error("The size of nodes and OPs do not match.");t._ops=e.map((function(e,t){return new l(e,n[t])})),t.reset(),t._starter=[],t._ops.forEach((function(e,n){var r,i,s=!0;try{for(var a=o(e.node.inputs),c=a.next();!c.done;c=a.next()){var l=c.value;if(!t._values[l]&&-1===t.graph.getInputIndices().indexOf(l)){s=!1;break}}}catch(e){r={error:e}}finally{try{c&&!c.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}s&&t._starter.push(n)}))}))},e.prototype.reset=function(){this._values=this.graph.getValues().map((function(e){return e.tensor}))},e.prototype.execute=function(e,t){var n=this;return this.profiler.event("session","ExecutionPlan.execute",(function(){return r(n,void 0,void 0,(function(){var n,s,l,u,d,h,p,g,f,m=this;return i(this,(function(b){switch(b.label){case 0:if(this.reset(),n=e.createInferenceHandler(),s=this.graph.getInputIndices(),t.length!==s.length)throw new Error("number of input tensors don't match the number of inputs to the model: actual: "+t.length+" expected: "+s.length);t.forEach((function(e,t){var n=s[t];m._values[n]=e})),l=this._starter.slice(0),u=this.graph.getValues(),d=this.graph.getNodes(),h=0,p=function(){var e,t,s,p,f,b;return i(this,(function(y){switch(y.label){case 0:if(e=l[h++],t=g._ops[e],-1!==(s=t.node.inputs.map((function(e){return m._values[e]}))).indexOf(void 0))throw new Error("unresolved input detected: op: "+t.node);return p=s,c.Logger.verbose("ExecPlan","Runing op:"+t.node.name+" ("+p.map((function(e,n){return"'"+t.node.inputs[n]+"': "+e.type+"["+e.dims.join(",")+"]"})).join(", ")+")"),[4,g.profiler.event("node",t.node.name,(function(){return r(m,void 0,void 0,(function(){var e;return i(this,(function(r){if(!(e=t.op).checkInputs(p))throw new Error("invalid inputs detected; op: "+t.node.name);return[2,e.run(n,p)]}))}))}))];case 1:if((f=y.sent()).length!==t.node.outputs.length)throw new Error("the size of output does not match model definition.");return f.forEach((function(e,n){var r=t.node.outputs[n];if(m._values[r])throw new Error("output ["+r+"] already has value: op:"+t.node.name);m._values[r]=e})),b=new Set,f.forEach((function(e,n){var r,i,s,a,c=t.node.outputs[n];try{for(var l=(r=void 0,o(u[c].to)),h=l.next();!h.done;h=l.next()){var p=h.value,g=d[p],f=!0;try{for(var y=(s=void 0,o(g.inputs)),_=y.next();!_.done;_=y.next()){var v=_.value;if(!m._values[v]){f=!1;break}}}catch(e){s={error:e}}finally{try{_&&!_.done&&(a=y.return)&&a.call(y)}finally{if(s)throw s.error}}f&&b.add(p)}}catch(e){r={error:e}}finally{try{h&&!h.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}})),l.push.apply(l,a(b)),[2]}}))},g=this,b.label=1;case 1:return h<l.length?[5,p()]:[3,3];case 2:return b.sent(),[3,1];case 3:return f=[],this.graph.getOutputIndices().forEach((function(e,t){var n=m._values[e];if(void 0===n)throw new Error("required output ["+e+"] does not have value");n.data,f.push(n)})),c.Logger.verbose("ExecPlan","disposing of inferenceHandler"),n.dispose(),[2,f]}}))}))}))},e}();t.ExecutionPlan=u},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Model=void 0;var r=n(9),i=n(181),o=n(0),s=function(){function e(){}return e.prototype.load=function(e,t){var n=r.onnx.ModelProto.decode(e);if(o.LongUtil.longToNumber(n.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=n.opsetImport.map((function(e){return{domain:e.domain,version:o.LongUtil.longToNumber(e.version)}})),this._graph=i.Graph.from(n.graph,t)},Object.defineProperty(e.prototype,"graph",{get:function(){return this._graph},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"opsets",{get:function(){return this._opsets},enumerable:!1,configurable:!0}),e}();t.Model=s},function(e,t,n){var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.Graph=void 0;var i=n(182),o=n(1),s=n(0);t.Graph={from:function(e,t){return new l(e,t)}};var a=function(){function e(e){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,e&&(this.type=s.ProtoUtil.tensorValueTypeFromProto(e.type.tensorType))}return Object.defineProperty(e.prototype,"from",{get:function(){return this._from},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"to",{get:function(){return this._to},enumerable:!1,configurable:!0}),e}(),c=function(e){this.name=e.name,this.opType=e.opType,this.inputs=[],this.outputs=[],this.attributes=new i.Attribute(e.attribute),this.executeNode=!0},l=function(){function e(e,t){if(!e)throw new TypeError("graph is empty");this.buildGraph(e),this.transformGraph(t),this.checkIsAcyclic()}return e.prototype.getInputIndices=function(){return this._allInputIndices},e.prototype.getInputNames=function(){return this._allInputNames},e.prototype.getOutputIndices=function(){return this._allOutputIndices},e.prototype.getOutputNames=function(){return this._allOutputNames},e.prototype.getValues=function(){return this._allData},e.prototype.getNodes=function(){return this._nodes},e.prototype.buildGraph=function(e){var t,n,i,l,u,d,h,p,g,f,m,b,y=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];var _=new Map;if(!e.input)throw new Error("missing information in graph: input");var v=[];try{for(var w=r(e.input),S=w.next();!S.done;S=w.next()){var k=S.value;if(y.has(k.name))throw new Error("duplicated input name: "+k.name);var I=this._allData.push(new a(k))-1;y.set(k.name,I),v.push(k.name)}}catch(e){t={error:e}}finally{try{S&&!S.done&&(n=w.return)&&n.call(w)}finally{if(t)throw t.error}}if(!e.initializer)throw new Error("missing information in graph: initializer");try{for(var C=r(e.initializer),E=C.next();!E.done;E=C.next()){k=E.value;var A=y.get(k.name);if(void 0===A){var x=new a;x.type={shape:{dims:s.ProtoUtil.tensorDimsFromProto(k.dims)},tensorType:s.ProtoUtil.tensorDataTypeFromProto(k.dataType)},A=this._allData.push(x)-1,y.set(k.name,A)}this._allData[A]._from=-1,this._allData[A].tensor=o.Tensor.fromProto(k)}}catch(e){i={error:e}}finally{try{E&&!E.done&&(l=C.return)&&l.call(C)}finally{if(i)throw i.error}}for(k=0;k<this._allData.length;k++)this._allData[k].tensor||(this._allInputIndices.push(k),this._allInputNames.push(v[k]));if(!e.output)throw new Error("missing information in graph: output");try{for(var T=r(e.output),O=T.next();!O.done;O=T.next()){if(k=O.value,y.has(k.name))throw new Error("duplicated output name: "+k.name);I=this._allData.push(new a(k))-1,y.set(k.name,I),this._allOutputIndices.push(I),this._allOutputNames.push(k.name)}}catch(e){u={error:e}}finally{try{O&&!O.done&&(d=T.return)&&d.call(T)}finally{if(u)throw u.error}}if(!e.node)throw new Error("missing information in graph: node");try{for(var P=r(e.node),R=P.next();!R.done;R=P.next()){if(!(L=R.value).name)for(var D=0;;D++){var N="unnamed_"+L.opType+"_"+D;if(!_.has(N)){L.name=N;break}}if(_.has(L.name))throw new Error("duplicated node name: "+L.name);I=this._nodes.push(new c(L))-1,_.set(L.name,I)}}catch(e){h={error:e}}finally{try{R&&!R.done&&(p=P.return)&&p.call(P)}finally{if(h)throw h.error}}for(k=0;k<this._nodes.length;k++){var U=this._nodes[k];if(!(L=e.node[k]).output)throw new Error("missing output for node: "+L.name);try{for(var M=(g=void 0,r(L.output)),j=M.next();!j.done;j=M.next()){var F=j.value;if(void 0===(z=y.get(F))&&(z=this._allData.push(new a)-1,y.set(F,z)),U.outputs.push(z),void 0!==this._allData[z]._from)throw new Error("multiple nodes output to one data value: "+z);if(this._allData[z]._from=k,"Constant"===L.opType){if(!L.attribute||1!==L.attribute.length||!L.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!L.output||1!==L.output.length)throw new Error("missing output or incorrect number of outputs for this Constant operator");U.outputs.pop(),U.executeNode=!1,this._allData[z]._from=-1,this._allData[z].tensor=o.Tensor.fromProto(L.attribute[0].t)}}}catch(e){g={error:e}}finally{try{j&&!j.done&&(f=M.return)&&f.call(M)}finally{if(g)throw g.error}}}for(k=0;k<this._nodes.length;k++){var L;if(U=this._nodes[k],!(L=e.node[k]).input)throw new Error("missing input for node: "+L.name);try{for(var G=(m=void 0,r(L.input)),B=G.next();!B.done;B=G.next()){var z,V=B.value;if(void 0===(z=y.get(V)))throw new Error("unrecognized input '"+V+"' for node: "+L.name);U.inputs.push(z),this._allData[z]._to.push(k)}}catch(e){m={error:e}}finally{try{B&&!B.done&&(b=G.return)&&b.call(G)}finally{if(m)throw m.error}}}return!0},e.prototype.checkIsAcyclic=function(){var e=this,t=new Set;this._allInputIndices.forEach((function(n){e._allData[n]._to.forEach((function(e){t.add(e)}))}));for(var n=Array.from(t),r=new Array(this._nodes.length).fill("white"),i=function(){var t=n.pop();"gray"===r[t]?r[t]="black":(n.push(t),r[t]="gray",o._nodes[t].outputs.forEach((function(i){var o=e._allData[i];if(void 0!==o.tensor)throw new Error("node outputs should not be initialized");if(o._from!==t)throw new Error("from property of the Value object doesn't match index of Node being processed");o._to.forEach((function(e){if("gray"===r[e])throw new Error("model graph is cyclic");"white"===r[e]&&n.push(e)}))})))},o=this;n.length>0;)i()},e.prototype.transformGraph=function(e){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),e&&e.transformGraph(this),this.finalizeGraph()},e.prototype.finalizeGraph=function(){for(var e,t=this,n=0,r=function(r){if(!i._nodes[r].executeNode)return n++,i._nodes[r].outputs.forEach((function(e){t._allData[e]._from=-2})),i._nodes.splice(r,1),r--,e=r,"continue";n>0&&(i._nodes[r].inputs.forEach((function(e){var i=t._allData[e]._to.indexOf(r+n);-1!==i&&(t._allData[e]._to[i]=r)})),i._nodes[r].outputs.forEach((function(e){t._allData[e]._from&&t._allData[e]._from===r+n&&(t._allData[e]._from=r)}))),e=r},i=this,o=0;o<this._nodes.length;o++)r(o),o=e;n=0;var s,a=function(e){if(-2===c._allData[e].from&&-1===c._allOutputIndices.indexOf(e+n))return n++,c._allData.splice(e,1),e--,s=e,"continue";if(n>0){var r=-1;void 0!==c._allData[e].from&&-1!==c._allData[e].from?-1!==(r=c._nodes[c._allData[e].from].outputs.indexOf(e+n))&&(c._nodes[c._allData[e].from].outputs[r]=e):-1!==(r=c._allInputIndices.indexOf(e+n))&&(c._allInputIndices[r]=e),c._allData[e].to.forEach((function(i){-1!==(r=t._nodes[i].inputs.indexOf(e+n))&&(t._nodes[i].inputs[r]=e)})),0===c._allData[e].to.length&&-1!==(r=c._allOutputIndices.indexOf(e+n))&&(c._allOutputIndices[r]=e)}s=e},c=this;for(o=0;o<this._allData.length;o++)a(o),o=s},e.prototype.deleteNode=function(e){var t,n,i=this._nodes[e];if(i.inputs.length>1)throw new Error("Node deletion with multiple inputs is not supported. ");if(i.outputs.length>1)for(var o=1;o<i.outputs.length;o++)if(this._allData[i.outputs[o]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ");i.executeNode=!1;var s=i.inputs[0],a=i.outputs[0],c=this._allData[a].to,l=this._allData[s].to.indexOf(e);if(-1===l)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[s].to.splice(l,1),this._allData[a]._to=[];var u=this._allOutputIndices.indexOf(a);if(-1!==u&&(this._allOutputIndices[u]=s),c&&c.length>0)try{for(var d=r(c),h=d.next();!h.done;h=d.next()){var p=h.value,g=this._nodes[p].inputs.indexOf(a);if(-1===g)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[p].inputs[g]=s,this._allData[s].to.push(p)}}catch(e){t={error:e}}finally{try{h&&!h.done&&(n=d.return)&&n.call(d)}finally{if(t)throw t.error}}},e.prototype.removeAllDropoutNodes=function(){var e,t,n=0;try{for(var i=r(this._nodes),o=i.next();!o.done;o=i.next()){var s=o.value;if("Dropout"===s.opType){if(1!==s.inputs.length)throw new Error("Dropout nodes should only contain one input. ");if(1!==s.outputs.length&&2!==s.outputs.length)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(2===s.outputs.length&&0!==this._allData[s.outputs[1]]._to.length)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(n)}n++}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},e.prototype.removeAllIdentityNodes=function(){var e,t,n=0;try{for(var i=r(this._nodes),o=i.next();!o.done;o=i.next())"Identity"===o.value.opType&&this.deleteNode(n),n++}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},e}()},function(e,t,n){(function(e){var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Attribute=void 0;var o=i(n(13)),s=n(9),a=n(1),c=n(0),l=function(){function t(e){var n,i;if(this._attributes=new Map,null!=e){try{for(var o=r(e),s=o.next();!s.done;s=o.next()){var a=s.value;this._attributes.set(a.name,[t.getValue(a),t.getType(a)])}}catch(e){n={error:e}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}if(this._attributes.size<e.length)throw new Error("duplicated attribute names")}}return t.prototype.set=function(e,t,n){this._attributes.set(e,[n,t])},t.prototype.delete=function(e){this._attributes.delete(e)},t.prototype.getFloat=function(e,t){return this.get(e,"float",t)},t.prototype.getInt=function(e,t){return this.get(e,"int",t)},t.prototype.getString=function(e,t){return this.get(e,"string",t)},t.prototype.getTensor=function(e,t){return this.get(e,"tensor",t)},t.prototype.getFloats=function(e,t){return this.get(e,"floats",t)},t.prototype.getInts=function(e,t){return this.get(e,"ints",t)},t.prototype.getStrings=function(e,t){return this.get(e,"strings",t)},t.prototype.getTensors=function(e,t){return this.get(e,"tensors",t)},t.prototype.get=function(e,t,n){var r=this._attributes.get(e);if(void 0===r){if(void 0!==n)return n;throw new Error("required attribute not found: "+e)}if(r[1]!==t)throw new Error("type mismatch: expected "+t+" but got "+r[1]);return r[0]},t.getType=function(e){switch(e.type){case s.onnx.AttributeProto.AttributeType.FLOAT:return"float";case s.onnx.AttributeProto.AttributeType.INT:return"int";case s.onnx.AttributeProto.AttributeType.STRING:return"string";case s.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case s.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case s.onnx.AttributeProto.AttributeType.INTS:return"ints";case s.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case s.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error("attribute type is not supported yet: "+s.onnx.AttributeProto.AttributeType[e.type])}},t.getValue=function(t){if(t.type===s.onnx.AttributeProto.AttributeType.GRAPH||t.type===s.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");var n=this.getValueNoCheck(t);if(t.type===s.onnx.AttributeProto.AttributeType.INT&&o.default.isLong(n))return n.toNumber();if(t.type===s.onnx.AttributeProto.AttributeType.INTS){for(var r=n,i=new Array(r.length),l=0;l<r.length;l++){var u=r[l];i[l]=c.LongUtil.longToNumber(u)}return i}if(t.type===s.onnx.AttributeProto.AttributeType.TENSOR)return a.Tensor.fromProto(n);if(t.type===s.onnx.AttributeProto.AttributeType.TENSORS)return n.map((function(e){return a.Tensor.fromProto(e)}));if(t.type===s.onnx.AttributeProto.AttributeType.STRING){var d=n;return e.from(d.buffer,d.byteOffset,d.byteLength).toString()}return t.type===s.onnx.AttributeProto.AttributeType.STRINGS?n.map((function(t){return e.from(t.buffer,t.byteOffset,t.byteLength).toString()})):n},t.getValueNoCheck=function(e){switch(e.type){case s.onnx.AttributeProto.AttributeType.FLOAT:return e.f;case s.onnx.AttributeProto.AttributeType.INT:return e.i;case s.onnx.AttributeProto.AttributeType.STRING:return e.s;case s.onnx.AttributeProto.AttributeType.TENSOR:return e.t;case s.onnx.AttributeProto.AttributeType.GRAPH:return e.g;case s.onnx.AttributeProto.AttributeType.FLOATS:return e.floats;case s.onnx.AttributeProto.AttributeType.INTS:return e.ints;case s.onnx.AttributeProto.AttributeType.STRINGS:return e.strings;case s.onnx.AttributeProto.AttributeType.TENSORS:return e.tensors;case s.onnx.AttributeProto.AttributeType.GRAPHS:return e.graphs;default:throw new Error("unsupported attribute type: "+s.onnx.AttributeProto.AttributeType[e.type])}},t}();t.Attribute=l}).call(this,n(12).Buffer)}])},module.exports=e()},9780:e=>{var t,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var a,c=[],l=!1,u=-1;function d(){l&&a&&(l=!1,a.length?c=a.concat(c):u=-1,c.length&&h())}function h(){if(!l){var e=s(d);l=!0;for(var t=c.length;t;){for(a=c,c=[];++u<t;)a&&a[u].run();u=-1,t=c.length}a=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function g(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||s(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},4246:(e,t,n)=>{var r=n(92379),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,o={},l=null,u=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!c.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:u,props:o,_owner:a.current}}t.Fragment=o,t.jsx=l,t.jsxs=l},67139:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,m={};function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||g}function y(){}function _(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||g}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=b.prototype;var v=_.prototype=new y;v.constructor=_,f(v,b.prototype),v.isPureReactComponent=!0;var w=Array.isArray,S=Object.prototype.hasOwnProperty,k={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var i,o={},s=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)S.call(t,i)&&!I.hasOwnProperty(i)&&(o[i]=t[i]);var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];o.children=l}if(e&&e.defaultProps)for(i in c=e.defaultProps)void 0===o[i]&&(o[i]=c[i]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:k.current}}function E(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function x(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var c=!1;if(null===e)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0}}if(c)return s=s(c=e),e=""===o?"."+x(c,0):o,w(s)?(i="",null!=e&&(i=e.replace(A,"$&/")+"/"),T(s,t,i,"",(function(e){return e}))):null!=s&&(E(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||c&&c.key===s.key?"":(""+s.key).replace(A,"$&/")+"/")+e)),t.push(s)),1;if(c=0,o=""===o?".":o+":",w(e))for(var l=0;l<e.length;l++){var u=o+x(a=e[l],l);c+=T(a,t,i,u,s)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),l=0;!(a=e.next()).done;)c+=T(a=a.value,t,i,u=o+x(a,l++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function O(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},D={transition:null},N={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:D,ReactCurrentOwner:k};function U(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:O,forEach:function(e,t,n){O(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return O(e,(function(){t++})),t},toArray:function(e){return O(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=b,t.Fragment=i,t.Profiler=s,t.PureComponent=_,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,t.act=U,t.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=f({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=k.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)S.call(t,l)&&!I.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){c=Array(l);for(var u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}return{$$typeof:n,type:e.type,key:o,ref:s,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=U,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},92379:(e,t,n)=>{e.exports=n(67139)},651:(e,t,n)=>{e.exports=n(4246)},62552:(e,t,n)=>{n.d(t,{X:()=>i});var r=n(5972),i=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return(0,r.ZT)(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){var e=this,t=e.hasError,n=e.thrownError,r=e._value;if(t)throw n;return this._throwIfClosed(),r},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(n(74822).x)},70937:(e,t,n)=>{n.d(t,{A:()=>i,JM:()=>o,TQ:()=>r});var r=s("C",void 0,void 0);function i(e){return s("E",void 0,e)}function o(e){return s("N",e,void 0)}function s(e,t,n){return{kind:e,value:t,error:n}}},8867:(e,t,n)=>{n.d(t,{y:()=>u});var r=n(69088),i=n(32073),o=n(61443),s=n(67982),a=n(86899),c=n(32540),l=n(60798),u=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var o,s=this,a=(o=e)&&o instanceof r.Lv||function(e){return e&&(0,c.m)(e.next)&&(0,c.m)(e.error)&&(0,c.m)(e.complete)}(o)&&(0,i.Nn)(o)?e:new r.Hp(e,t,n);return(0,l.x)((function(){var e=s,t=e.operator,n=e.source;a.add(t?t.call(a,n):n?s._subscribe(a):s._trySubscribe(a))})),a},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=d(t))((function(t,i){var o=new r.Hp({next:function(t){try{e(t)}catch(e){i(e),o.unsubscribe()}},error:i,complete:t});n.subscribe(o)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[o.L]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,s.U)(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=d(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function d(e){var t;return null!==(t=null!=e?e:a.v.Promise)&&void 0!==t?t:Promise}},36912:(e,t,n)=>{n.d(t,{b:()=>i});var r=n(80210),i=function(){function e(t,n){void 0===n&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=r.l.now,e}()},74822:(e,t,n)=>{n.d(t,{x:()=>l});var r=n(5972),i=n(8867),o=n(32073),s=n(17617),a=n(10135),c=n(60798),l=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return(0,r.ZT)(t,e),t.prototype.lift=function(e){var t=new u(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new s.N},t.prototype.next=function(e){var t=this;(0,c.x)((function(){var n,i;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var o=(0,r.XA)(t.currentObservers),s=o.next();!s.done;s=o.next()){s.value.next(e)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}}}))},t.prototype.error=function(e){var t=this;(0,c.x)((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}}))},t.prototype.complete=function(){var e=this;(0,c.x)((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this,r=n.hasError,i=n.isStopped,s=n.observers;return r||i?o.Lc:(this.currentObservers=null,s.push(e),new o.w0((function(){t.currentObservers=null,(0,a.P)(s,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,r=t.thrownError,i=t.isStopped;n?e.error(r):i&&e.complete()},t.prototype.asObservable=function(){var e=new i.y;return e.source=this,e},t.create=function(e,t){return new u(e,t)},t}(i.y),u=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return(0,r.ZT)(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:o.Lc},t}(l)},69088:(e,t,n)=>{n.d(t,{Hp:()=>m,Lv:()=>h});var r=n(5972),i=n(32540),o=n(32073),s=n(86899),a=n(84679),c=n(198),l=n(70937),u=n(80067),d=n(60798),h=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,(0,o.Nn)(t)&&t.add(n)):n.destination=_,n}return(0,r.ZT)(t,e),t.create=function(e,t,n){return new m(e,t,n)},t.prototype.next=function(e){this.isStopped?y((0,l.JM)(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?y((0,l.A)(e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?y(l.TQ,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(o.w0),p=Function.prototype.bind;function g(e,t){return p.call(e,t)}var f=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){b(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){b(e)}else b(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){b(e)}},e}(),m=function(e){function t(t,n,r){var o,a,c=e.call(this)||this;(0,i.m)(t)||!t?o={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:c&&s.v.useDeprecatedNextContext?((a=Object.create(t)).unsubscribe=function(){return c.unsubscribe()},o={next:t.next&&g(t.next,a),error:t.error&&g(t.error,a),complete:t.complete&&g(t.complete,a)}):o=t;return c.destination=new f(o),c}return(0,r.ZT)(t,e),t}(h);function b(e){s.v.useDeprecatedSynchronousErrorHandling?(0,d.O)(e):(0,a.h)(e)}function y(e,t){var n=s.v.onStoppedNotification;n&&u.z.setTimeout((function(){return n(e,t)}))}var _={closed:!0,next:c.Z,error:function(e){throw e},complete:c.Z}},32073:(e,t,n)=>{n.d(t,{Lc:()=>c,Nn:()=>l,w0:()=>a});var r=n(5972),i=n(32540),o=n(62178),s=n(10135),a=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var e,t,n,s,a;if(!this.closed){this.closed=!0;var c=this._parentage;if(c)if(this._parentage=null,Array.isArray(c))try{for(var l=(0,r.XA)(c),d=l.next();!d.done;d=l.next()){d.value.remove(this)}}catch(t){e={error:t}}finally{try{d&&!d.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}else c.remove(this);var h=this.initialTeardown;if((0,i.m)(h))try{h()}catch(e){a=e instanceof o.B?e.errors:[e]}var p=this._finalizers;if(p){this._finalizers=null;try{for(var g=(0,r.XA)(p),f=g.next();!f.done;f=g.next()){var m=f.value;try{u(m)}catch(e){a=null!=a?a:[],e instanceof o.B?a=(0,r.ev)((0,r.ev)([],(0,r.CR)(a)),(0,r.CR)(e.errors)):a.push(e)}}}catch(e){n={error:e}}finally{try{f&&!f.done&&(s=g.return)&&s.call(g)}finally{if(n)throw n.error}}}if(a)throw new o.B(a)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)u(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&(0,s.P)(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&(0,s.P)(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),c=a.EMPTY;function l(e){return e instanceof a||e&&"closed"in e&&(0,i.m)(e.remove)&&(0,i.m)(e.add)&&(0,i.m)(e.unsubscribe)}function u(e){(0,i.m)(e)?e():e.unsubscribe()}},86899:(e,t,n)=>{n.d(t,{v:()=>r});var r={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},84308:(e,t,n)=>{n.d(t,{a:()=>h});var r=n(8867),i=n(38601),o=n(50750),s=n(94173),a=n(4447),c=n(2673),l=n(56612),u=n(96643),d=n(20610);function h(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(0,c.yG)(e),u=(0,c.jO)(e),d=(0,i.D)(e),h=d.args,g=d.keys;if(0===h.length)return(0,o.D)([],n);var f=new r.y(p(h,n,g?function(e){return(0,l.n)(g,e)}:s.y));return u?f.pipe((0,a.Z)(u)):f}function p(e,t,n){return void 0===n&&(n=s.y),function(r){g(t,(function(){for(var i=e.length,s=new Array(i),a=i,c=i,l=function(i){g(t,(function(){var l=(0,o.D)(e[i],t),d=!1;l.subscribe((0,u.x)(r,(function(e){s[i]=e,d||(d=!0,c--),c||r.next(n(s.slice()))}),(function(){--a||r.complete()})))}),r)},d=0;d<i;d++)l(d)}),r)}}function g(e,t,n){e?(0,d.f)(n,e,t):t()}},20680:(e,t,n)=>{n.d(t,{z:()=>s});var r=n(18767),i=n(2673),o=n(50750);function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,r.u)()((0,o.D)(e,(0,i.yG)(e)))}},36344:(e,t,n)=>{n.d(t,{E:()=>r});var r=new(n(8867).y)((function(e){return e.complete()}))},50750:(e,t,n)=>{n.d(t,{D:()=>o});var r=n(91603),i=n(16537);function o(e,t){return t?(0,r.x)(e,t):(0,i.Xf)(e)}},16537:(e,t,n)=>{n.d(t,{Xf:()=>f});var r=n(5972),i=n(87991),o=n(2662),s=n(8867),a=n(78816),c=n(13532),l=n(29226),u=n(95256),d=n(43852),h=n(32540),p=n(84679),g=n(61443);function f(e){if(e instanceof s.y)return e;if(null!=e){if((0,a.c)(e))return y=e,new s.y((function(e){var t=y[g.L]();if((0,h.m)(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if((0,i.z)(e))return b=e,new s.y((function(e){for(var t=0;t<b.length&&!e.closed;t++)e.next(b[t]);e.complete()}));if((0,o.t)(e))return f=e,new s.y((function(e){f.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,p.h)}));if((0,c.D)(e))return m(e);if((0,u.T)(e))return n=e,new s.y((function(e){var t,i;try{for(var o=(0,r.XA)(n),s=o.next();!s.done;s=o.next()){var a=s.value;if(e.next(a),e.closed)return}}catch(e){t={error:e}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}e.complete()}));if((0,d.L)(e))return t=e,m((0,d.Q)(t))}var t,n,f,b,y;throw(0,l.z)(e)}function m(e){return new s.y((function(t){(function(e,t){var n,i,o,s;return(0,r.mG)(this,void 0,void 0,(function(){var a,c;return(0,r.Jh)(this,(function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),n=(0,r.KL)(e),l.label=1;case 1:return[4,n.next()];case 2:if((i=l.sent()).done)return[3,4];if(a=i.value,t.next(a),t.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return c=l.sent(),o={error:c},[3,11];case 6:return l.trys.push([6,,9,10]),i&&!i.done&&(s=n.return)?[4,s.call(n)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}},84766:(e,t,n)=>{n.d(t,{F:()=>o});var r=n(25941),i=n(93440);function o(e,t){return void 0===e&&(e=0),void 0===t&&(t=r.z),e<0&&(e=0),(0,i.H)(e,e,t)}},64271:(e,t,n)=>{n.d(t,{T:()=>c});var r=n(31603),i=n(16537),o=n(36344),s=n(2673),a=n(50750);function c(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(0,s.yG)(e),c=(0,s._6)(e,1/0),l=e;return l.length?1===l.length?(0,i.Xf)(l[0]):(0,r.J)(c)((0,a.D)(l,n)):o.E}},84714:(e,t,n)=>{n.d(t,{of:()=>o});var r=n(2673),i=n(50750);function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(0,r.yG)(e);return(0,i.D)(e,n)}},93440:(e,t,n)=>{n.d(t,{H:()=>a});var r=n(8867),i=n(25941),o=n(34446),s=n(11203);function a(e,t,n){void 0===e&&(e=0),void 0===n&&(n=i.P);var a=-1;return null!=t&&((0,o.K)(t)?n=t:a=t),new r.y((function(t){var r=(0,s.q)(e)?+e-n.now():e;r<0&&(r=0);var i=0;return n.schedule((function(){t.closed||(t.next(i++),0<=a?this.schedule(void 0,a):t.complete())}),r)}))}},96643:(e,t,n)=>{n.d(t,{x:()=>i});var r=n(5972);function i(e,t,n,r,i){return new o(e,t,n,r,i)}var o=function(e){function t(t,n,r,i,o,s){var a=e.call(this,t)||this;return a.onFinalize=o,a.shouldUnsubscribe=s,a._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,a._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,a}return(0,r.ZT)(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(n(69088).Lv)},18767:(e,t,n)=>{n.d(t,{u:()=>i});var r=n(31603);function i(){return(0,r.J)(1)}},29416:(e,t,n)=>{n.d(t,{b:()=>s});var r=n(25941),i=n(19064),o=n(96643);function s(e,t){return void 0===t&&(t=r.z),(0,i.e)((function(n,r){var i=null,s=null,a=null,c=function(){if(i){i.unsubscribe(),i=null;var e=s;s=null,r.next(e)}};function l(){var n=a+e,o=t.now();if(o<n)return i=this.schedule(void 0,n-o),void r.add(i);c()}n.subscribe((0,o.x)(r,(function(n){s=n,a=t.now(),i||(i=t.schedule(l,e),r.add(i))}),(function(){c(),r.complete()}),void 0,(function(){s=i=null})))}))}},5447:(e,t,n)=>{n.d(t,{d:()=>o});var r=n(19064),i=n(96643);function o(e){return(0,r.e)((function(t,n){var r=!1;t.subscribe((0,i.x)(n,(function(e){r=!0,n.next(e)}),(function(){r||n.next(e),n.complete()})))}))}},18827:(e,t,n)=>{n.d(t,{g:()=>s});var r=n(25941),i=n(97654),o=n(93440);function s(e,t){void 0===t&&(t=r.z);var n=(0,o.H)(e,t);return(0,i.j)((function(){return n}))}},97654:(e,t,n)=>{n.d(t,{j:()=>l});var r=n(20680),i=n(84178),o=n(46734),s=n(29479),a=n(17869),c=n(16537);function l(e,t){return t?function(n){return(0,r.z)(t.pipe((0,i.q)(1),(0,o.l)()),n.pipe(l(e)))}:(0,a.z)((function(t,n){return(0,c.Xf)(e(t,n)).pipe((0,i.q)(1),(0,s.h)(t))}))}},24666:(e,t,n)=>{n.d(t,{x:()=>s});var r=n(94173),i=n(19064),o=n(96643);function s(e,t){return void 0===t&&(t=r.y),e=null!=e?e:a,(0,i.e)((function(n,r){var i,s=!0;n.subscribe((0,o.x)(r,(function(n){var o=t(n);!s&&e(i,o)||(s=!1,i=o,r.next(n))})))}))}function a(e,t){return e===t}},90572:(e,t,n)=>{n.d(t,{h:()=>o});var r=n(19064),i=n(96643);function o(e,t){return(0,r.e)((function(n,r){var o=0;n.subscribe((0,i.x)(r,(function(n){return e.call(t,n,o++)&&r.next(n)})))}))}},14969:(e,t,n)=>{n.d(t,{P:()=>l});var r=n(54784),i=n(90572),o=n(84178),s=n(5447),a=n(27649),c=n(94173);function l(e,t){var n=arguments.length>=2;return function(l){return l.pipe(e?(0,i.h)((function(t,n){return e(t,n,l)})):c.y,(0,o.q)(1),n?(0,s.d)(t):(0,a.T)((function(){return new r.K})))}}},46734:(e,t,n)=>{n.d(t,{l:()=>s});var r=n(19064),i=n(96643),o=n(198);function s(){return(0,r.e)((function(e,t){e.subscribe((0,i.x)(t,o.Z))}))}},59179:(e,t,n)=>{n.d(t,{U:()=>o});var r=n(19064),i=n(96643);function o(e,t){return(0,r.e)((function(n,r){var o=0;n.subscribe((0,i.x)(r,(function(n){r.next(e.call(t,n,o++))})))}))}},29479:(e,t,n)=>{n.d(t,{h:()=>i});var r=n(59179);function i(e){return(0,r.U)((function(){return e}))}},31603:(e,t,n)=>{n.d(t,{J:()=>o});var r=n(17869),i=n(94173);function o(e){return void 0===e&&(e=1/0),(0,r.z)(i.y,e)}},38079:(e,t,n)=>{n.d(t,{p:()=>s});var r=n(16537),i=n(20610),o=n(96643);function s(e,t,n,s,a,c,l,u){var d=[],h=0,p=0,g=!1,f=function(){!g||d.length||h||t.complete()},m=function(e){return h<s?b(e):d.push(e)},b=function(e){c&&t.next(e),h++;var u=!1;(0,r.Xf)(n(e,p++)).subscribe((0,o.x)(t,(function(e){null==a||a(e),c?m(e):t.next(e)}),(function(){u=!0}),void 0,(function(){if(u)try{h--;for(var e=function(){var e=d.shift();l?(0,i.f)(t,l,(function(){return b(e)})):b(e)};d.length&&h<s;)e();f()}catch(e){t.error(e)}})))};return e.subscribe((0,o.x)(t,m,(function(){g=!0,f()}))),function(){null==u||u()}}},17869:(e,t,n)=>{n.d(t,{z:()=>c});var r=n(59179),i=n(16537),o=n(19064),s=n(38079),a=n(32540);function c(e,t,n){return void 0===n&&(n=1/0),(0,a.m)(t)?c((function(n,o){return(0,r.U)((function(e,r){return t(n,e,o,r)}))((0,i.Xf)(e(n,o)))}),n):("number"==typeof t&&(n=t),(0,o.e)((function(t,r){return(0,s.p)(t,r,e,n)})))}},37108:(e,t,n)=>{n.d(t,{Q:()=>s});var r=n(20610),i=n(19064),o=n(96643);function s(e,t){return void 0===t&&(t=0),(0,i.e)((function(n,i){n.subscribe((0,o.x)(i,(function(n){return(0,r.f)(i,e,(function(){return i.next(n)}),t)}),(function(){return(0,r.f)(i,e,(function(){return i.complete()}),t)}),(function(n){return(0,r.f)(i,e,(function(){return i.error(n)}),t)})))}))}},32734:(e,t,n)=>{n.d(t,{B:()=>c});var r=n(5972),i=n(16537),o=n(74822),s=n(69088),a=n(19064);function c(e){void 0===e&&(e={});var t=e.connector,n=void 0===t?function(){return new o.x}:t,r=e.resetOnError,c=void 0===r||r,u=e.resetOnComplete,d=void 0===u||u,h=e.resetOnRefCountZero,p=void 0===h||h;return function(e){var t,r,o,u=0,h=!1,g=!1,f=function(){null==r||r.unsubscribe(),r=void 0},m=function(){f(),t=o=void 0,h=g=!1},b=function(){var e=t;m(),null==e||e.unsubscribe()};return(0,a.e)((function(e,a){u++,g||h||f();var y=o=null!=o?o:n();a.add((function(){0!==--u||g||h||(r=l(b,p))})),y.subscribe(a),!t&&u>0&&(t=new s.Hp({next:function(e){return y.next(e)},error:function(e){g=!0,f(),r=l(m,c,e),y.error(e)},complete:function(){h=!0,f(),r=l(m,d),y.complete()}}),(0,i.Xf)(e).subscribe(t))}))(e)}}function l(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(!0!==t){if(!1!==t){var a=new s.Hp({next:function(){a.unsubscribe(),e()}});return(0,i.Xf)(t.apply(void 0,(0,r.ev)([],(0,r.CR)(n)))).subscribe(a)}}else e()}},98189:(e,t,n)=>{n.d(t,{n:()=>o});var r=n(19064),i=n(96643);function o(e){return(0,r.e)((function(t,n){var r=!1,o=0;t.subscribe((0,i.x)(n,(function(t){return(r||(r=!e(t,o++)))&&n.next(t)})))}))}},954:(e,t,n)=>{n.d(t,{O:()=>s});var r=n(20680),i=n(2673),o=n(19064);function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(0,i.yG)(e);return(0,o.e)((function(t,i){(n?(0,r.z)(e,t,n):(0,r.z)(e,t)).subscribe(i)}))}},53459:(e,t,n)=>{n.d(t,{R:()=>i});var r=n(19064);function i(e,t){return void 0===t&&(t=0),(0,r.e)((function(n,r){r.add(e.schedule((function(){return n.subscribe(r)}),t))}))}},20161:(e,t,n)=>{n.d(t,{w:()=>s});var r=n(16537),i=n(19064),o=n(96643);function s(e,t){return(0,i.e)((function(n,i){var s=null,a=0,c=!1,l=function(){return c&&!s&&i.complete()};n.subscribe((0,o.x)(i,(function(n){null==s||s.unsubscribe();var c=0,u=a++;(0,r.Xf)(e(n,u)).subscribe(s=(0,o.x)(i,(function(e){return i.next(t?t(n,e,u,c++):e)}),(function(){s=null,l()})))}),(function(){c=!0,l()})))}))}},84178:(e,t,n)=>{n.d(t,{q:()=>s});var r=n(36344),i=n(19064),o=n(96643);function s(e){return e<=0?function(){return r.E}:(0,i.e)((function(t,n){var r=0;t.subscribe((0,o.x)(n,(function(t){++r<=e&&(n.next(t),e<=r&&n.complete())})))}))}},86599:(e,t,n)=>{n.d(t,{h:()=>a});var r=n(5972),i=n(36344),o=n(19064),s=n(96643);function a(e){return e<=0?function(){return i.E}:(0,o.e)((function(t,n){var i=[];t.subscribe((0,s.x)(n,(function(t){i.push(t),e<i.length&&i.shift()}),(function(){var e,t;try{for(var o=(0,r.XA)(i),s=o.next();!s.done;s=o.next()){var a=s.value;n.next(a)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}n.complete()}),void 0,(function(){i=null})))}))}},39256:(e,t,n)=>{n.d(t,{o:()=>o});var r=n(19064),i=n(96643);function o(e,t){return void 0===t&&(t=!1),(0,r.e)((function(n,r){var o=0;n.subscribe((0,i.x)(r,(function(n){var i=e(n,o++);(i||t)&&r.next(n),!i&&r.complete()})))}))}},63532:(e,t,n)=>{n.d(t,{b:()=>a});var r=n(32540),i=n(19064),o=n(96643),s=n(94173);function a(e,t,n){var a=(0,r.m)(e)||t||n?{next:e,error:t,complete:n}:e;return a?(0,i.e)((function(e,t){var n;null===(n=a.subscribe)||void 0===n||n.call(a);var r=!0;e.subscribe((0,o.x)(t,(function(e){var n;null===(n=a.next)||void 0===n||n.call(a,e),t.next(e)}),(function(){var e;r=!1,null===(e=a.complete)||void 0===e||e.call(a),t.complete()}),(function(e){var n;r=!1,null===(n=a.error)||void 0===n||n.call(a,e),t.error(e)}),(function(){var e,t;r&&(null===(e=a.unsubscribe)||void 0===e||e.call(a)),null===(t=a.finalize)||void 0===t||t.call(a)})))})):s.y}},27649:(e,t,n)=>{n.d(t,{T:()=>s});var r=n(54784),i=n(19064),o=n(96643);function s(e){return void 0===e&&(e=a),(0,i.e)((function(t,n){var r=!1;t.subscribe((0,o.x)(n,(function(e){r=!0,n.next(e)}),(function(){return r?n.complete():n.error(e())})))}))}function a(){return new r.K}},10883:(e,t,n)=>{n.d(t,{M:()=>u});var r=n(5972),i=n(19064),o=n(96643),s=n(16537),a=n(94173),c=n(198),l=n(2673);function u(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(0,l.jO)(e);return(0,i.e)((function(t,i){for(var l=e.length,u=new Array(l),d=e.map((function(){return!1})),h=!1,p=function(t){(0,s.Xf)(e[t]).subscribe((0,o.x)(i,(function(e){u[t]=e,h||d[t]||(d[t]=!0,(h=d.every(a.y))&&(d=null))}),c.Z))},g=0;g<l;g++)p(g);t.subscribe((0,o.x)(i,(function(e){if(h){var t=(0,r.ev)([e],(0,r.CR)(u));i.next(n?n.apply(void 0,(0,r.ev)([],(0,r.CR)(t))):t)}})))}))}},76562:(e,t,n)=>{n.d(t,{r:()=>i});var r=n(8867);function i(e,t){return new r.y((function(n){var r=0;return t.schedule((function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())}))}))}},98061:(e,t,n)=>{n.d(t,{z:()=>o});var r=n(8867),i=n(20610);function o(e,t){if(!e)throw new Error("Iterable cannot be null");return new r.y((function(n){(0,i.f)(n,t,(function(){var r=e[Symbol.asyncIterator]();(0,i.f)(n,t,(function(){r.next().then((function(e){e.done?n.complete():n.next(e.value)}))}),0,!0)}))}))}},41563:(e,t,n)=>{n.d(t,{Q:()=>a});var r=n(8867),i=n(95635),o=n(32540),s=n(20610);function a(e,t){return new r.y((function(n){var r;return(0,s.f)(n,t,(function(){r=e[i.h](),(0,s.f)(n,t,(function(){var e,t,i;try{t=(e=r.next()).value,i=e.done}catch(e){return void n.error(e)}i?n.complete():n.next(t)}),0,!0)})),function(){return(0,o.m)(null==r?void 0:r.return)&&r.return()}}))}},97441:(e,t,n)=>{n.d(t,{l:()=>s});var r=n(16537),i=n(37108),o=n(53459);function s(e,t){return(0,r.Xf)(e).pipe((0,o.R)(t),(0,i.Q)(t))}},27511:(e,t,n)=>{n.d(t,{c:()=>s});var r=n(16537),i=n(37108),o=n(53459);function s(e,t){return(0,r.Xf)(e).pipe((0,o.R)(t),(0,i.Q)(t))}},65784:(e,t,n)=>{n.d(t,{v:()=>o});var r=n(98061),i=n(43852);function o(e,t){return(0,r.z)((0,i.Q)(e),t)}},91603:(e,t,n)=>{n.d(t,{x:()=>m});var r=n(97441),i=n(27511),o=n(76562),s=n(41563),a=n(98061),c=n(78816),l=n(2662),u=n(87991),d=n(95256),h=n(13532),p=n(29226),g=n(43852),f=n(65784);function m(e,t){if(null!=e){if((0,c.c)(e))return(0,r.l)(e,t);if((0,u.z)(e))return(0,o.r)(e,t);if((0,l.t)(e))return(0,i.c)(e,t);if((0,h.D)(e))return(0,a.z)(e,t);if((0,d.T)(e))return(0,s.Q)(e,t);if((0,g.L)(e))return(0,f.v)(e,t)}throw(0,p.z)(e)}},25333:(e,t,n)=>{n.d(t,{a:()=>i});var r=n(5972),i=function(e){function t(t,n){return e.call(this)||this}return(0,r.ZT)(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(n(32073).w0)},49571:(e,t,n)=>{n.d(t,{o:()=>a});var r=n(5972),i=n(25333),o=n(70498),s=n(10135),a=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return(0,r.ZT)(t,e),t.prototype.schedule=function(e,t){var n;if(void 0===t&&(t=0),this.closed)return this;this.state=e;var r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,t)),this.pending=!0,this.delay=t,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(i,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),o.V.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&o.V.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n,r=!1;try{this.work(e)}catch(e){r=!0,n=e||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),n},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,r=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,(0,s.P)(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(i.a)},16677:(e,t,n)=>{n.d(t,{v:()=>o});var r=n(5972),i=n(36912),o=function(e){function t(t,n){void 0===n&&(n=i.b.now);var r=e.call(this,t,n)||this;return r.actions=[],r._active=!1,r}return(0,r.ZT)(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var n;this._active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(i.b)},25941:(e,t,n)=>{n.d(t,{P:()=>o,z:()=>i});var r=n(49571),i=new(n(16677).v)(r.o),o=i},80210:(e,t,n)=>{n.d(t,{l:()=>r});var r={now:function(){return(r.delegate||Date).now()},delegate:void 0}},70498:(e,t,n)=>{n.d(t,{V:()=>i});var r=n(5972),i={setInterval:function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var s=i.delegate;return(null==s?void 0:s.setInterval)?s.setInterval.apply(s,(0,r.ev)([e,t],(0,r.CR)(n))):setInterval.apply(void 0,(0,r.ev)([e,t],(0,r.CR)(n)))},clearInterval:function(e){var t=i.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0}},80067:(e,t,n)=>{n.d(t,{z:()=>i});var r=n(5972),i={setTimeout:function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var s=i.delegate;return(null==s?void 0:s.setTimeout)?s.setTimeout.apply(s,(0,r.ev)([e,t],(0,r.CR)(n))):setTimeout.apply(void 0,(0,r.ev)([e,t],(0,r.CR)(n)))},clearTimeout:function(e){var t=i.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0}},95635:(e,t,n)=>{n.d(t,{h:()=>r});var r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},61443:(e,t,n)=>{n.d(t,{L:()=>r});var r="function"==typeof Symbol&&Symbol.observable||"@@observable"},54784:(e,t,n)=>{n.d(t,{K:()=>r});var r=(0,n(3148).d)((function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}}))},17617:(e,t,n)=>{n.d(t,{N:()=>r});var r=(0,n(3148).d)((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}))},62178:(e,t,n)=>{n.d(t,{B:()=>r});var r=(0,n(3148).d)((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}))},2673:(e,t,n)=>{n.d(t,{_6:()=>c,jO:()=>s,yG:()=>a});var r=n(32540),i=n(34446);function o(e){return e[e.length-1]}function s(e){return(0,r.m)(o(e))?e.pop():void 0}function a(e){return(0,i.K)(o(e))?e.pop():void 0}function c(e,t){return"number"==typeof o(e)?e.pop():t}},38601:(e,t,n)=>{n.d(t,{D:()=>a});var r=Array.isArray,i=Object.getPrototypeOf,o=Object.prototype,s=Object.keys;function a(e){if(1===e.length){var t=e[0];if(r(t))return{args:t,keys:null};if((a=t)&&"object"==typeof a&&i(a)===o){var n=s(t);return{args:n.map((function(e){return t[e]})),keys:n}}}var a;return{args:e,keys:null}}},10135:(e,t,n)=>{function r(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}n.d(t,{P:()=>r})},3148:(e,t,n)=>{function r(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}n.d(t,{d:()=>r})},56612:(e,t,n)=>{function r(e,t){return e.reduce((function(e,n,r){return e[n]=t[r],e}),{})}n.d(t,{n:()=>r})},60798:(e,t,n)=>{n.d(t,{O:()=>s,x:()=>o});var r=n(86899),i=null;function o(e){if(r.v.useDeprecatedSynchronousErrorHandling){var t=!i;if(t&&(i={errorThrown:!1,error:null}),e(),t){var n=i,o=n.errorThrown,s=n.error;if(i=null,o)throw s}}else e()}function s(e){r.v.useDeprecatedSynchronousErrorHandling&&i&&(i.errorThrown=!0,i.error=e)}},20610:(e,t,n)=>{function r(e,t,n,r,i){void 0===r&&(r=0),void 0===i&&(i=!1);var o=t.schedule((function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()}),r);if(e.add(o),!i)return o}n.d(t,{f:()=>r})},94173:(e,t,n)=>{function r(e){return e}n.d(t,{y:()=>r})},87991:(e,t,n)=>{n.d(t,{z:()=>r});var r=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e}},13532:(e,t,n)=>{n.d(t,{D:()=>i});var r=n(32540);function i(e){return Symbol.asyncIterator&&(0,r.m)(null==e?void 0:e[Symbol.asyncIterator])}},11203:(e,t,n)=>{function r(e){return e instanceof Date&&!isNaN(e)}n.d(t,{q:()=>r})},32540:(e,t,n)=>{function r(e){return"function"==typeof e}n.d(t,{m:()=>r})},78816:(e,t,n)=>{n.d(t,{c:()=>o});var r=n(61443),i=n(32540);function o(e){return(0,i.m)(e[r.L])}},95256:(e,t,n)=>{n.d(t,{T:()=>o});var r=n(95635),i=n(32540);function o(e){return(0,i.m)(null==e?void 0:e[r.h])}},2662:(e,t,n)=>{n.d(t,{t:()=>i});var r=n(32540);function i(e){return(0,r.m)(null==e?void 0:e.then)}},43852:(e,t,n)=>{n.d(t,{L:()=>s,Q:()=>o});var r=n(5972),i=n(32540);function o(e){return(0,r.FC)(this,arguments,(function(){var t,n,i;return(0,r.Jh)(this,(function(o){switch(o.label){case 0:t=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,(0,r.qq)(t.read())];case 3:return n=o.sent(),i=n.value,n.done?[4,(0,r.qq)(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,(0,r.qq)(i)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function s(e){return(0,i.m)(null==e?void 0:e.getReader)}},34446:(e,t,n)=>{n.d(t,{K:()=>i});var r=n(32540);function i(e){return e&&(0,r.m)(e.schedule)}},19064:(e,t,n)=>{n.d(t,{e:()=>i});var r=n(32540);function i(e){return function(t){if(function(e){return(0,r.m)(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}},4447:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(5972),i=n(59179),o=Array.isArray;function s(e){return(0,i.U)((function(t){return function(e,t){return o(t)?e.apply(void 0,(0,r.ev)([],(0,r.CR)(t))):e(t)}(e,t)}))}},198:(e,t,n)=>{function r(){}n.d(t,{Z:()=>r})},67982:(e,t,n)=>{n.d(t,{U:()=>i});var r=n(94173);function i(e){return 0===e.length?r.y:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}},84679:(e,t,n)=>{n.d(t,{h:()=>o});var r=n(86899),i=n(80067);function o(e){i.z.setTimeout((function(){var t=r.v.onUnhandledError;if(!t)throw e;t(e)}))}},29226:(e,t,n)=>{function r(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}n.d(t,{z:()=>r})},2953:(e,t,n)=>{var r,i=n(9780);t=e.exports=y,r="object"==typeof i&&i.env&&i.env.NODE_DEBUG&&/\bsemver\b/i.test(i.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var o=256,s=Number.MAX_SAFE_INTEGER||9007199254740991,a=t.re=[],c=t.safeRe=[],l=t.src=[],u=t.tokens={},d=0;function h(e){u[e]=d++}var p="[a-zA-Z0-9-]",g=[["\\s",1],["\\d",o],[p,250]];function f(e){for(var t=0;t<g.length;t++){var n=g[t][0],r=g[t][1];e=e.split(n+"*").join(n+"{0,"+r+"}").split(n+"+").join(n+"{1,"+r+"}")}return e}h("NUMERICIDENTIFIER"),l[u.NUMERICIDENTIFIER]="0|[1-9]\\d*",h("NUMERICIDENTIFIERLOOSE"),l[u.NUMERICIDENTIFIERLOOSE]="\\d+",h("NONNUMERICIDENTIFIER"),l[u.NONNUMERICIDENTIFIER]="\\d*[a-zA-Z-][a-zA-Z0-9-]*",h("MAINVERSION"),l[u.MAINVERSION]="("+l[u.NUMERICIDENTIFIER]+")\\.("+l[u.NUMERICIDENTIFIER]+")\\.("+l[u.NUMERICIDENTIFIER]+")",h("MAINVERSIONLOOSE"),l[u.MAINVERSIONLOOSE]="("+l[u.NUMERICIDENTIFIERLOOSE]+")\\.("+l[u.NUMERICIDENTIFIERLOOSE]+")\\.("+l[u.NUMERICIDENTIFIERLOOSE]+")",h("PRERELEASEIDENTIFIER"),l[u.PRERELEASEIDENTIFIER]="(?:"+l[u.NUMERICIDENTIFIER]+"|"+l[u.NONNUMERICIDENTIFIER]+")",h("PRERELEASEIDENTIFIERLOOSE"),l[u.PRERELEASEIDENTIFIERLOOSE]="(?:"+l[u.NUMERICIDENTIFIERLOOSE]+"|"+l[u.NONNUMERICIDENTIFIER]+")",h("PRERELEASE"),l[u.PRERELEASE]="(?:-("+l[u.PRERELEASEIDENTIFIER]+"(?:\\."+l[u.PRERELEASEIDENTIFIER]+")*))",h("PRERELEASELOOSE"),l[u.PRERELEASELOOSE]="(?:-?("+l[u.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+l[u.PRERELEASEIDENTIFIERLOOSE]+")*))",h("BUILDIDENTIFIER"),l[u.BUILDIDENTIFIER]="[a-zA-Z0-9-]+",h("BUILD"),l[u.BUILD]="(?:\\+("+l[u.BUILDIDENTIFIER]+"(?:\\."+l[u.BUILDIDENTIFIER]+")*))",h("FULL"),h("FULLPLAIN"),l[u.FULLPLAIN]="v?"+l[u.MAINVERSION]+l[u.PRERELEASE]+"?"+l[u.BUILD]+"?",l[u.FULL]="^"+l[u.FULLPLAIN]+"$",h("LOOSEPLAIN"),l[u.LOOSEPLAIN]="[v=\\s]*"+l[u.MAINVERSIONLOOSE]+l[u.PRERELEASELOOSE]+"?"+l[u.BUILD]+"?",h("LOOSE"),l[u.LOOSE]="^"+l[u.LOOSEPLAIN]+"$",h("GTLT"),l[u.GTLT]="((?:<|>)?=?)",h("XRANGEIDENTIFIERLOOSE"),l[u.XRANGEIDENTIFIERLOOSE]=l[u.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*",h("XRANGEIDENTIFIER"),l[u.XRANGEIDENTIFIER]=l[u.NUMERICIDENTIFIER]+"|x|X|\\*",h("XRANGEPLAIN"),l[u.XRANGEPLAIN]="[v=\\s]*("+l[u.XRANGEIDENTIFIER]+")(?:\\.("+l[u.XRANGEIDENTIFIER]+")(?:\\.("+l[u.XRANGEIDENTIFIER]+")(?:"+l[u.PRERELEASE]+")?"+l[u.BUILD]+"?)?)?",h("XRANGEPLAINLOOSE"),l[u.XRANGEPLAINLOOSE]="[v=\\s]*("+l[u.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+l[u.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+l[u.XRANGEIDENTIFIERLOOSE]+")(?:"+l[u.PRERELEASELOOSE]+")?"+l[u.BUILD]+"?)?)?",h("XRANGE"),l[u.XRANGE]="^"+l[u.GTLT]+"\\s*"+l[u.XRANGEPLAIN]+"$",h("XRANGELOOSE"),l[u.XRANGELOOSE]="^"+l[u.GTLT]+"\\s*"+l[u.XRANGEPLAINLOOSE]+"$",h("COERCE"),l[u.COERCE]="(^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])",h("COERCERTL"),a[u.COERCERTL]=new RegExp(l[u.COERCE],"g"),c[u.COERCERTL]=new RegExp(f(l[u.COERCE]),"g"),h("LONETILDE"),l[u.LONETILDE]="(?:~>?)",h("TILDETRIM"),l[u.TILDETRIM]="(\\s*)"+l[u.LONETILDE]+"\\s+",a[u.TILDETRIM]=new RegExp(l[u.TILDETRIM],"g"),c[u.TILDETRIM]=new RegExp(f(l[u.TILDETRIM]),"g");h("TILDE"),l[u.TILDE]="^"+l[u.LONETILDE]+l[u.XRANGEPLAIN]+"$",h("TILDELOOSE"),l[u.TILDELOOSE]="^"+l[u.LONETILDE]+l[u.XRANGEPLAINLOOSE]+"$",h("LONECARET"),l[u.LONECARET]="(?:\\^)",h("CARETTRIM"),l[u.CARETTRIM]="(\\s*)"+l[u.LONECARET]+"\\s+",a[u.CARETTRIM]=new RegExp(l[u.CARETTRIM],"g"),c[u.CARETTRIM]=new RegExp(f(l[u.CARETTRIM]),"g");h("CARET"),l[u.CARET]="^"+l[u.LONECARET]+l[u.XRANGEPLAIN]+"$",h("CARETLOOSE"),l[u.CARETLOOSE]="^"+l[u.LONECARET]+l[u.XRANGEPLAINLOOSE]+"$",h("COMPARATORLOOSE"),l[u.COMPARATORLOOSE]="^"+l[u.GTLT]+"\\s*("+l[u.LOOSEPLAIN]+")$|^$",h("COMPARATOR"),l[u.COMPARATOR]="^"+l[u.GTLT]+"\\s*("+l[u.FULLPLAIN]+")$|^$",h("COMPARATORTRIM"),l[u.COMPARATORTRIM]="(\\s*)"+l[u.GTLT]+"\\s*("+l[u.LOOSEPLAIN]+"|"+l[u.XRANGEPLAIN]+")",a[u.COMPARATORTRIM]=new RegExp(l[u.COMPARATORTRIM],"g"),c[u.COMPARATORTRIM]=new RegExp(f(l[u.COMPARATORTRIM]),"g");h("HYPHENRANGE"),l[u.HYPHENRANGE]="^\\s*("+l[u.XRANGEPLAIN]+")\\s+-\\s+("+l[u.XRANGEPLAIN]+")\\s*$",h("HYPHENRANGELOOSE"),l[u.HYPHENRANGELOOSE]="^\\s*("+l[u.XRANGEPLAINLOOSE]+")\\s+-\\s+("+l[u.XRANGEPLAINLOOSE]+")\\s*$",h("STAR"),l[u.STAR]="(<|>)?=?\\s*\\*";for(var m=0;m<d;m++)r(m,l[m]),a[m]||(a[m]=new RegExp(l[m]),c[m]=new RegExp(f(l[m])));function b(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof y)return e;if("string"!=typeof e)return null;if(e.length>o)return null;if(!(t.loose?c[u.LOOSE]:c[u.FULL]).test(e))return null;try{return new y(e,t)}catch(e){return null}}function y(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof y){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>o)throw new TypeError("version is longer than 256 characters");if(!(this instanceof y))return new y(e,t);r("SemVer",e,t),this.options=t,this.loose=!!t.loose;var n=e.trim().match(t.loose?c[u.LOOSE]:c[u.FULL]);if(!n)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>s||this.major<0)throw new TypeError("Invalid major version");if(this.minor>s||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>s||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<s)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}t.parse=b,t.valid=function(e,t){var n=b(e,t);return n?n.version:null},t.clean=function(e,t){var n=b(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},t.SemVer=y,y.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},y.prototype.toString=function(){return this.version},y.prototype.compare=function(e){return r("SemVer.compare",this.version,this.options,e),e instanceof y||(e=new y(e,this.options)),this.compareMain(e)||this.comparePre(e)},y.prototype.compareMain=function(e){return e instanceof y||(e=new y(e,this.options)),v(this.major,e.major)||v(this.minor,e.minor)||v(this.patch,e.patch)},y.prototype.comparePre=function(e){if(e instanceof y||(e=new y(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],i=e.prerelease[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return v(n,i)}while(++t)},y.prototype.compareBuild=function(e){e instanceof y||(e=new y(e,this.options));var t=0;do{var n=this.build[t],i=e.build[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return v(n,i)}while(++t)},y.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,n,r){"string"==typeof n&&(r=n,n=void 0);try{return new y(e,n).inc(t,r).version}catch(e){return null}},t.diff=function(e,t){if(I(e,t))return null;var n=b(e),r=b(t),i="";if(n.prerelease.length||r.prerelease.length){i="pre";var o="prerelease"}for(var s in n)if(("major"===s||"minor"===s||"patch"===s)&&n[s]!==r[s])return i+s;return o},t.compareIdentifiers=v;var _=/^[0-9]+$/;function v(e,t){var n=_.test(e),r=_.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1}function w(e,t,n){return new y(e,n).compare(new y(t,n))}function S(e,t,n){return w(e,t,n)>0}function k(e,t,n){return w(e,t,n)<0}function I(e,t,n){return 0===w(e,t,n)}function C(e,t,n){return 0!==w(e,t,n)}function E(e,t,n){return w(e,t,n)>=0}function A(e,t,n){return w(e,t,n)<=0}function x(e,t,n,r){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return I(e,n,r);case"!=":return C(e,n,r);case">":return S(e,n,r);case">=":return E(e,n,r);case"<":return k(e,n,r);case"<=":return A(e,n,r);default:throw new TypeError("Invalid operator: "+t)}}function T(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof T){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof T))return new T(e,t);e=e.trim().split(/\s+/).join(" "),r("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===O?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}t.rcompareIdentifiers=function(e,t){return v(t,e)},t.major=function(e,t){return new y(e,t).major},t.minor=function(e,t){return new y(e,t).minor},t.patch=function(e,t){return new y(e,t).patch},t.compare=w,t.compareLoose=function(e,t){return w(e,t,!0)},t.compareBuild=function(e,t,n){var r=new y(e,n),i=new y(t,n);return r.compare(i)||r.compareBuild(i)},t.rcompare=function(e,t,n){return w(t,e,n)},t.sort=function(e,n){return e.sort((function(e,r){return t.compareBuild(e,r,n)}))},t.rsort=function(e,n){return e.sort((function(e,r){return t.compareBuild(r,e,n)}))},t.gt=S,t.lt=k,t.eq=I,t.neq=C,t.gte=E,t.lte=A,t.cmp=x,t.Comparator=T;var O={};function P(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof P)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new P(e.raw,t);if(e instanceof T)return new P(e.value,t);if(!(this instanceof P))return new P(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+this.raw);this.format()}function R(e,t){for(var n=!0,r=e.slice(),i=r.pop();n&&r.length;)n=r.every((function(e){return i.intersects(e,t)})),i=r.pop();return n}function D(e){return!e||"x"===e.toLowerCase()||"*"===e}function N(e,t,n,r,i,o,s,a,c,l,u,d,h){return((t=D(n)?"":D(r)?">="+n+".0.0":D(i)?">="+n+"."+r+".0":">="+t)+" "+(a=D(c)?"":D(l)?"<"+(+c+1)+".0.0":D(u)?"<"+c+"."+(+l+1)+".0":d?"<="+c+"."+l+"."+u+"-"+d:"<="+a)).trim()}function U(e,t,n){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(i=0;i<e.length;i++)if(r(e[i].semver),e[i].semver!==O&&e[i].semver.prerelease.length>0){var o=e[i].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function M(e,t,n){try{t=new P(t,n)}catch(e){return!1}return t.test(e)}function j(e,t,n,r){var i,o,s,a,c;switch(e=new y(e,r),t=new P(t,r),n){case">":i=S,o=A,s=k,a=">",c=">=";break;case"<":i=k,o=E,s=S,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(M(e,t,r))return!1;for(var l=0;l<t.set.length;++l){var u=t.set[l],d=null,h=null;if(u.forEach((function(e){e.semver===O&&(e=new T(">=0.0.0")),d=d||e,h=h||e,i(e.semver,d.semver,r)?d=e:s(e.semver,h.semver,r)&&(h=e)})),d.operator===a||d.operator===c)return!1;if((!h.operator||h.operator===a)&&o(e,h.semver))return!1;if(h.operator===c&&s(e,h.semver))return!1}return!0}T.prototype.parse=function(e){var t=this.options.loose?c[u.COMPARATORLOOSE]:c[u.COMPARATOR],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new y(n[2],this.options.loose):this.semver=O},T.prototype.toString=function(){return this.value},T.prototype.test=function(e){if(r("Comparator.test",e,this.options.loose),this.semver===O||e===O)return!0;if("string"==typeof e)try{e=new y(e,this.options)}catch(e){return!1}return x(e,this.operator,this.semver,this.options)},T.prototype.intersects=function(e,t){if(!(e instanceof T))throw new TypeError("a Comparator is required");var n;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||(n=new P(e.value,t),M(this.value,n,t));if(""===e.operator)return""===e.value||(n=new P(this.value,t),M(e.semver,n,t));var r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=x(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=x(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||i||o&&s||a||c},t.Range=P,P.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},P.prototype.toString=function(){return this.range},P.prototype.parseRange=function(e){var t=this.options.loose,n=t?c[u.HYPHENRANGELOOSE]:c[u.HYPHENRANGE];e=e.replace(n,N),r("hyphen replace",e),e=e.replace(c[u.COMPARATORTRIM],"$1$2$3"),r("comparator trim",e,c[u.COMPARATORTRIM]),e=(e=(e=e.replace(c[u.TILDETRIM],"$1~")).replace(c[u.CARETTRIM],"$1^")).split(/\s+/).join(" ");var i=t?c[u.COMPARATORLOOSE]:c[u.COMPARATOR],o=e.split(" ").map((function(e){return function(e,t){return r("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){r("caret",e,t);var n=t.loose?c[u.CARETLOOSE]:c[u.CARET];return e.replace(n,(function(t,n,i,o,s){var a;return r("caret",e,t,n,i,o,s),D(n)?a="":D(i)?a=">="+n+".0.0 <"+(+n+1)+".0.0":D(o)?a="0"===n?">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":">="+n+"."+i+".0 <"+(+n+1)+".0.0":s?(r("replaceCaret pr",s),a="0"===n?"0"===i?">="+n+"."+i+"."+o+"-"+s+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+"-"+s+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+"-"+s+" <"+(+n+1)+".0.0"):(r("no pr"),a="0"===n?"0"===i?">="+n+"."+i+"."+o+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+" <"+(+n+1)+".0.0"),r("caret return",a),a}))}(e,t)})).join(" ")}(e,t),r("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var n=t.loose?c[u.TILDELOOSE]:c[u.TILDE];return e.replace(n,(function(t,n,i,o,s){var a;return r("tilde",e,t,n,i,o,s),D(n)?a="":D(i)?a=">="+n+".0.0 <"+(+n+1)+".0.0":D(o)?a=">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":s?(r("replaceTilde pr",s),a=">="+n+"."+i+"."+o+"-"+s+" <"+n+"."+(+i+1)+".0"):a=">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0",r("tilde return",a),a}))}(e,t)})).join(" ")}(e,t),r("tildes",e),e=function(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var n=t.loose?c[u.XRANGELOOSE]:c[u.XRANGE];return e.replace(n,(function(n,i,o,s,a,c){r("xRange",e,n,i,o,s,a,c);var l=D(o),u=l||D(s),d=u||D(a),h=d;return"="===i&&h&&(i=""),c=t.includePrerelease?"-0":"",l?n=">"===i||"<"===i?"<0.0.0-0":"*":i&&h?(u&&(s=0),a=0,">"===i?(i=">=",u?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):"<="===i&&(i="<",u?o=+o+1:s=+s+1),n=i+o+"."+s+"."+a+c):u?n=">="+o+".0.0"+c+" <"+(+o+1)+".0.0"+c:d&&(n=">="+o+"."+s+".0"+c+" <"+o+"."+(+s+1)+".0"+c),r("xRange return",n),n}))}(e,t)})).join(" ")}(e,t),r("xrange",e),e=function(e,t){return r("replaceStars",e,t),e.trim().replace(c[u.STAR],"")}(e,t),r("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(o=o.filter((function(e){return!!e.match(i)}))),o=o.map((function(e){return new T(e,this.options)}),this)},P.prototype.intersects=function(e,t){if(!(e instanceof P))throw new TypeError("a Range is required");return this.set.some((function(n){return R(n,t)&&e.set.some((function(e){return R(e,t)&&n.every((function(n){return e.every((function(e){return n.intersects(e,t)}))}))}))}))},t.toComparators=function(e,t){return new P(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},P.prototype.test=function(e){if(!e)return!1;if("string"==typeof e)try{e=new y(e,this.options)}catch(e){return!1}for(var t=0;t<this.set.length;t++)if(U(this.set[t],e,this.options))return!0;return!1},t.satisfies=M,t.maxSatisfying=function(e,t,n){var r=null,i=null;try{var o=new P(t,n)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(r&&-1!==i.compare(e)||(i=new y(r=e,n)))})),r},t.minSatisfying=function(e,t,n){var r=null,i=null;try{var o=new P(t,n)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(r&&1!==i.compare(e)||(i=new y(r=e,n)))})),r},t.minVersion=function(e,t){e=new P(e,t);var n=new y("0.0.0");if(e.test(n))return n;if(n=new y("0.0.0-0"),e.test(n))return n;n=null;for(var r=0;r<e.set.length;++r){e.set[r].forEach((function(e){var t=new y(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":n&&!S(n,t)||(n=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}))}if(n&&e.test(n))return n;return null},t.validRange=function(e,t){try{return new P(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,n){return j(e,t,"<",n)},t.gtr=function(e,t,n){return j(e,t,">",n)},t.outside=j,t.prerelease=function(e,t){var n=b(e,t);return n&&n.prerelease.length?n.prerelease:null},t.intersects=function(e,t,n){return e=new P(e,n),t=new P(t,n),e.intersects(t)},t.coerce=function(e,t){if(e instanceof y)return e;"number"==typeof e&&(e=String(e));if("string"!=typeof e)return null;var n=null;if((t=t||{}).rtl){for(var r;(r=c[u.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&r.index+r[0].length===n.index+n[0].length||(n=r),c[u.COERCERTL].lastIndex=r.index+r[1].length+r[2].length;c[u.COERCERTL].lastIndex=-1}else n=e.match(c[u.COERCE]);if(null===n)return null;return b(n[2]+"."+(n[3]||"0")+"."+(n[4]||"0"),t)}},59190:(e,t,n)=>{n.d(t,{pi:()=>r});var r=function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.create;Object.create},87998:function(e,t,n){var r;!function(i,o){var s="function",a="undefined",c="object",l="string",u="model",d="name",h="type",p="vendor",g="version",f="architecture",m="console",b="mobile",y="tablet",_="smarttv",v="wearable",w="embedded",S="Amazon",k="Apple",I="ASUS",C="BlackBerry",E="Firefox",A="Google",x="Huawei",T="LG",O="Microsoft",P="Motorola",R="Opera",D="Samsung",N="Sharp",U="Sony",M="Xiaomi",j="Zebra",F="Facebook",L=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},G=function(e,t){return typeof e===l&&-1!==B(t).indexOf(B(e))},B=function(e){return e.toLowerCase()},z=function(e,t){if(typeof e===l)return e=e.replace(/^\s\s*/,""),typeof t===a?e:e.substring(0,350)},V=function(e,t){for(var n,r,i,a,l,u,d=0;d<t.length&&!l;){var h=t[d],p=t[d+1];for(n=r=0;n<h.length&&!l;)if(l=h[n++].exec(e))for(i=0;i<p.length;i++)u=l[++r],typeof(a=p[i])===c&&a.length>0?2===a.length?typeof a[1]==s?this[a[0]]=a[1].call(this,u):this[a[0]]=a[1]:3===a.length?typeof a[1]!==s||a[1].exec&&a[1].test?this[a[0]]=u?u.replace(a[1],a[2]):o:this[a[0]]=u?a[1].call(this,u,a[2]):o:4===a.length&&(this[a[0]]=u?a[3].call(this,u.replace(a[1],a[2])):o):this[a]=u||o;d+=2}},q=function(e,t){for(var n in t)if(typeof t[n]===c&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(G(t[n][r],e))return"?"===n?o:n}else if(G(t[n],e))return"?"===n?o:n;return e},H={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},W={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[g,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[g,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,g],[/opios[\/ ]+([\w\.]+)/i],[g,[d,"Opera Mini"]],[/\bopr\/([\w\.]+)/i],[g,[d,R]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[d,g],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[g,[d,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[g,[d,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[g,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[g,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[g,[d,"IE"]],[/yabrowser\/([\w\.]+)/i],[g,[d,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure Browser"],g],[/\bfocus\/([\w\.]+)/i],[g,[d,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[g,[d,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[g,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[g,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[g,[d,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[g,[d,"MIUI Browser"]],[/fxios\/([-\w\.]+)/i],[g,[d,E]],[/\bqihu|(qi?ho?o?|360)browser/i],[[d,"360 Browser"]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1 Browser"],g],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],g],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[d,g],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,F],g],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[d,g],[/\bgsa\/([\w\.]+) .*safari\//i],[g,[d,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[g,[d,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,"Chrome WebView"],g],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[g,[d,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,g],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[g,[d,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[g,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[g,q,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[d,g],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],g],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[g,[d,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[d,g],[/(cobalt)\/([\w\.]+)/i],[d,[g,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[f,"amd64"]],[/(ia32(?=;))/i],[[f,B]],[/((?:i[346]|x)86)[;\)]/i],[[f,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[f,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[f,"armhf"]],[/windows (ce|mobile); ppc;/i],[[f,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[f,/ower/,"",B]],[/(sun4\w)[;\)]/i],[[f,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[f,B]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[p,D],[h,y]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[u,[p,D],[h,b]],[/\((ip(?:hone|od)[\w ]*);/i],[u,[p,k],[h,b]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[p,k],[h,y]],[/(macintosh);/i],[u,[p,k]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[p,x],[h,y]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[p,x],[h,b]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[u,/_/g," "],[p,M],[h,b]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[p,M],[h,y]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[p,"OPPO"],[h,b]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[p,"Vivo"],[h,b]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[u,[p,"Realme"],[h,b]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[p,P],[h,b]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[p,P],[h,y]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[p,T],[h,y]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[p,T],[h,b]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[p,"Lenovo"],[h,y]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[p,"Nokia"],[h,b]],[/(pixel c)\b/i],[u,[p,A],[h,y]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[p,A],[h,b]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[p,U],[h,b]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[p,U],[h,y]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[p,"OnePlus"],[h,b]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[p,S],[h,y]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[p,S],[h,b]],[/(playbook);[-\w\),; ]+(rim)/i],[u,p,[h,y]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[p,C],[h,b]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[p,I],[h,y]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[p,I],[h,b]],[/(nexus 9)/i],[u,[p,"HTC"],[h,y]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[p,[u,/_/g," "],[h,b]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[p,"Acer"],[h,y]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[p,"Meizu"],[h,b]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[p,N],[h,b]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[p,u,[h,b]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[p,u,[h,y]],[/(surface duo)/i],[u,[p,O],[h,y]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[p,"Fairphone"],[h,b]],[/(u304aa)/i],[u,[p,"AT&T"],[h,b]],[/\bsie-(\w*)/i],[u,[p,"Siemens"],[h,b]],[/\b(rct\w+) b/i],[u,[p,"RCA"],[h,y]],[/\b(venue[\d ]{2,7}) b/i],[u,[p,"Dell"],[h,y]],[/\b(q(?:mv|ta)\w+) b/i],[u,[p,"Verizon"],[h,y]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[p,"Barnes & Noble"],[h,y]],[/\b(tm\d{3}\w+) b/i],[u,[p,"NuVision"],[h,y]],[/\b(k88) b/i],[u,[p,"ZTE"],[h,y]],[/\b(nx\d{3}j) b/i],[u,[p,"ZTE"],[h,b]],[/\b(gen\d{3}) b.+49h/i],[u,[p,"Swiss"],[h,b]],[/\b(zur\d{3}) b/i],[u,[p,"Swiss"],[h,y]],[/\b((zeki)?tb.*\b) b/i],[u,[p,"Zeki"],[h,y]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[p,"Dragon Touch"],u,[h,y]],[/\b(ns-?\w{0,9}) b/i],[u,[p,"Insignia"],[h,y]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[p,"NextBook"],[h,y]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[p,"Voice"],u,[h,b]],[/\b(lvtel\-)?(v1[12]) b/i],[[p,"LvTel"],u,[h,b]],[/\b(ph-1) /i],[u,[p,"Essential"],[h,b]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[p,"Envizen"],[h,y]],[/\b(trio[-\w\. ]+) b/i],[u,[p,"MachSpeed"],[h,y]],[/\btu_(1491) b/i],[u,[p,"Rotor"],[h,y]],[/(shield[\w ]+) b/i],[u,[p,"Nvidia"],[h,y]],[/(sprint) (\w+)/i],[p,u,[h,b]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[p,O],[h,b]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[p,j],[h,y]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[p,j],[h,b]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[p,u,[h,m]],[/droid.+; (shield) bui/i],[u,[p,"Nvidia"],[h,m]],[/(playstation [345portablevi]+)/i],[u,[p,U],[h,m]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[p,O],[h,m]],[/smart-tv.+(samsung)/i],[p,[h,_]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[p,D],[h,_]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[p,T],[h,_]],[/(apple) ?tv/i],[p,[u,"Apple TV"],[h,_]],[/crkey/i],[[u,"Chromecast"],[p,A],[h,_]],[/droid.+aft(\w)( bui|\))/i],[u,[p,S],[h,_]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[p,N],[h,_]],[/(bravia[\w ]+)( bui|\))/i],[u,[p,U],[h,_]],[/(mitv-\w{5}) bui/i],[u,[p,M],[h,_]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[p,z],[u,z],[h,_]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[h,_]],[/((pebble))app/i],[p,u,[h,v]],[/droid.+; (glass) \d/i],[u,[p,A],[h,v]],[/droid.+; (wt63?0{2,3})\)/i],[u,[p,j],[h,v]],[/(quest( 2)?)/i],[u,[p,F],[h,v]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[p,[h,w]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[u,[h,b]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[h,y]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[h,y]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[h,b]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[p,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[g,[d,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[g,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[d,g],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[g,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,g],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[d,[g,q,H]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[d,"Windows"],[g,q,H]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[g,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,"Mac OS"],[g,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[g,d],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[d,g],[/\(bb(10);/i],[g,[d,C]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[g,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[g,[d,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[g,[d,"webOS"]],[/crkey\/([\d\.]+)/i],[g,[d,"Chromecast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[d,"Chromium OS"],g],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,g],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],g],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[d,g]]},$=function(e,t){if(typeof e===c&&(t=e,e=o),!(this instanceof $))return new $(e,t).getResult();var n=e||(typeof i!==a&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),r=t?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(W,t):W;return this.getBrowser=function(){var e,t={};return t.name=o,t.version=o,V.call(t,n,r.browser),t.major=typeof(e=t.version)===l?e.replace(/[^\d\.]/g,"").split(".")[0]:o,t},this.getCPU=function(){var e={};return e.architecture=o,V.call(e,n,r.cpu),e},this.getDevice=function(){var e={};return e.vendor=o,e.model=o,e.type=o,V.call(e,n,r.device),e},this.getEngine=function(){var e={};return e.name=o,e.version=o,V.call(e,n,r.engine),e},this.getOS=function(){var e={};return e.name=o,e.version=o,V.call(e,n,r.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=typeof e===l&&e.length>350?z(e,350):e,this},this.setUA(n),this};$.VERSION="1.0.33",$.BROWSER=L([d,g,"major"]),$.CPU=L([f]),$.DEVICE=L([u,p,h,m,b,_,y,v,w]),$.ENGINE=$.OS=L([d,g]),typeof t!==a?(e.exports&&(t=e.exports=$),t.UAParser=$):n.amdO?(r=function(){return $}.call(t,n,t,e))===o||(e.exports=r):typeof i!==a&&(i.UAParser=$);var X=typeof i!==a&&(i.jQuery||i.Zepto);if(X&&!X.ua){var K=new $;X.ua=K.getResult(),X.ua.get=function(){return K.getUA()},X.ua.set=function(e){K.setUA(e);var t=K.getResult();for(var n in t)X.ua[n]=t[n]}}}("object"==typeof self?self:this)},92054:(e,t,n)=>{n.d(t,{Z:()=>l});const r={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let i;const o=new Uint8Array(16);function s(){if(!i&&(i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!i))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(o)}const a=[];for(let e=0;e<256;++e)a.push((e+256).toString(16).slice(1));function c(e,t=0){return a[e[t+0]]+a[e[t+1]]+a[e[t+2]]+a[e[t+3]]+"-"+a[e[t+4]]+a[e[t+5]]+"-"+a[e[t+6]]+a[e[t+7]]+"-"+a[e[t+8]]+a[e[t+9]]+"-"+a[e[t+10]]+a[e[t+11]]+a[e[t+12]]+a[e[t+13]]+a[e[t+14]]+a[e[t+15]]}const l=function(e,t,n){if(r.randomUUID&&!t&&!e)return r.randomUUID();const i=(e=e||{}).random||(e.rng||s)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=i[e];return t}return c(i)}},24231:(e,t,n)=>{var r=n(60358);n(10617),n(12094),n(99350),n(57061),e.exports=r},11970:(e,t,n)=>{var r=n(55175);n(10617),n(26006),n(57061),e.exports=r},27841:(e,t,n)=>{var r=n(76604);n(13850),e.exports=r},66445:(e,t,n)=>{var r=n(64812);n(93482),e.exports=r},73351:(e,t,n)=>{n(19246),n(2255),n(75480),n(64851),n(48024),n(41980),n(70911),n(16122);var r=n(69793);e.exports=r.AsyncDisposableStack},52229:(e,t,n)=>{n(19246),n(2255),n(75480),n(48024),n(49622),n(16122);var r=n(69793);e.exports=r.DisposableStack},26770:(e,t,n)=>{n(47621);var r=n(13224);e.exports=r.f("asyncDispose")},39789:(e,t,n)=>{n(92424);var r=n(13224);e.exports=r.f("dispose")},39769:(e,t,n)=>{var r=n(85712),i=n(27437),o=TypeError;e.exports=function(e){if(r(e))return e;throw new o(i(e)+" is not a function")}},92586:(e,t,n)=>{var r=n(94124),i=n(27437),o=TypeError;e.exports=function(e){if(r(e))return e;throw new o(i(e)+" is not a constructor")}},26945:(e,t,n)=>{var r=n(32263),i=String,o=TypeError;e.exports=function(e){if(r(e))return e;throw new o("Can't set "+i(e)+" as a prototype")}},86795:(e,t,n)=>{var r=n(37288),i=n(69028),o=n(98237),s=n(53257),a=n(67618),c=n(39769),l=n(14704),u=n(51692),d=n(67395),h=d("asyncDispose"),p=d("dispose"),g=o([].push),f=function(e,t){if("async-dispose"===t){var n=u(e,h);return void 0!==n||void 0===(n=u(e,p))?n:function(){var e=this;return new(r("Promise"))((function(t){i(n,e),t(void 0)}))}}return u(e,p)},m=function(e,t,n){return arguments.length<3&&!l(e)&&(n=c(f(a(e),t))),void 0===n?function(){}:s(n,e)};e.exports=function(e,t,n,r){var i;if(arguments.length<4){if(l(t)&&"sync-dispose"===n)return;i=m(t,n)}else i=m(void 0,n,r);g(e.stack,i)}},76955:(e,t,n)=>{var r=n(98180),i=TypeError;e.exports=function(e,t){if(r(t,e))return e;throw new i("Incorrect invocation")}},67618:(e,t,n)=>{var r=n(53085),i=String,o=TypeError;e.exports=function(e){if(r(e))return e;throw new o(i(e)+" is not an object")}},36281:(e,t,n)=>{var r=n(46378),i=n(5235),o=n(54341),s=function(e){return function(t,n,s){var a=r(t),c=o(a);if(0===c)return!e&&-1;var l,u=i(s,c);if(e&&n!=n){for(;c>u;)if((l=a[u++])!=l)return!0}else for(;c>u;u++)if((e||u in a)&&a[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},26637:(e,t,n)=>{var r=n(98237);e.exports=r([].slice)},82677:(e,t,n)=>{var r,i,o=n(38462),s=n(30746),a=n(85712),c=n(49457),l=n(11401),u=n(36729),d=n(67395),h=n(90575),p=d("asyncIterator"),g=o.AsyncIterator,f=s.AsyncIteratorPrototype;if(f)r=f;else if(a(g))r=g.prototype;else if(s.USE_FUNCTION_CONSTRUCTOR||o.USE_FUNCTION_CONSTRUCTOR)try{i=l(l(l(Function("return async function*(){}()")()))),l(i)===Object.prototype&&(r=i)}catch(e){}r?h&&(r=c(r)):r={},a(r[p])||u(r,p,(function(){return this})),e.exports=r},76364:(e,t,n)=>{var r=n(67395)("iterator"),i=!1;try{var o=0,s={next:function(){return{done:!!o++}},return:function(){i=!0}};s[r]=function(){return this},Array.from(s,(function(){throw 2}))}catch(e){}e.exports=function(e,t){try{if(!t&&!i)return!1}catch(e){return!1}var n=!1;try{var o={};o[r]=function(){return{next:function(){return{done:n=!0}}}},e(o)}catch(e){}return n}},88661:(e,t,n)=>{var r=n(98237),i=r({}.toString),o=r("".slice);e.exports=function(e){return o(i(e),8,-1)}},11325:(e,t,n)=>{var r=n(55491),i=n(85712),o=n(88661),s=n(67395)("toStringTag"),a=Object,c="Arguments"===o(function(){return arguments}());e.exports=r?o:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=a(e),s))?n:c?o(t):"Object"===(r=o(t))&&i(t.callee)?"Arguments":r}},94050:(e,t,n)=>{var r=n(75292),i=n(75271),o=n(17164),s=n(23338);e.exports=function(e,t,n){for(var a=i(t),c=s.f,l=o.f,u=0;u<a.length;u++){var d=a[u];r(e,d)||n&&r(n,d)||c(e,d,l(t,d))}}},51856:(e,t,n)=>{var r=n(63736);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},45136:(e,t,n)=>{var r=n(21767),i=n(23338),o=n(65274);e.exports=r?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},65274:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},65056:(e,t,n)=>{var r=n(87434),i=n(23338);e.exports=function(e,t,n){return n.get&&r(n.get,t,{getter:!0}),n.set&&r(n.set,t,{setter:!0}),i.f(e,t,n)}},36729:(e,t,n)=>{var r=n(85712),i=n(23338),o=n(87434),s=n(10081);e.exports=function(e,t,n,a){a||(a={});var c=a.enumerable,l=void 0!==a.name?a.name:t;if(r(n)&&o(n,l,a),a.global)c?e[t]=n:s(t,n);else{try{a.unsafe?e[t]&&(c=!0):delete e[t]}catch(e){}c?e[t]=n:i.f(e,t,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return e}},65431:(e,t,n)=>{var r=n(36729);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},10081:(e,t,n)=>{var r=n(38462),i=Object.defineProperty;e.exports=function(e,t){try{i(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},21767:(e,t,n)=>{var r=n(63736);e.exports=!r((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},9983:(e,t,n)=>{var r=n(38462),i=n(53085),o=r.document,s=i(o)&&i(o.createElement);e.exports=function(e){return s?o.createElement(e):{}}},11624:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},90470:(e,t,n)=>{var r=n(10375);e.exports=/ipad|iphone|ipod/i.test(r)&&"undefined"!=typeof Pebble},54465:(e,t,n)=>{var r=n(10375);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},18914:(e,t,n)=>{var r=n(20349);e.exports="NODE"===r},99622:(e,t,n)=>{var r=n(10375);e.exports=/web0s(?!.*chrome)/i.test(r)},10375:(e,t,n)=>{var r=n(38462).navigator,i=r&&r.userAgent;e.exports=i?String(i):""},43772:(e,t,n)=>{var r,i,o=n(38462),s=n(10375),a=o.process,c=o.Deno,l=a&&a.versions||c&&c.version,u=l&&l.v8;u&&(i=(r=u.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&s&&(!(r=s.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/))&&(i=+r[1]),e.exports=i},20349:(e,t,n)=>{var r=n(38462),i=n(10375),o=n(88661),s=function(e){return i.slice(0,e.length)===e};e.exports=s("Bun/")?"BUN":s("Cloudflare-Workers")?"CLOUDFLARE":s("Deno/")?"DENO":s("Node.js/")?"NODE":r.Bun&&"string"==typeof Bun.version?"BUN":r.Deno&&"object"==typeof Deno.version?"DENO":"process"===o(r.process)?"NODE":r.window&&r.document?"BROWSER":"REST"},81819:(e,t,n)=>{var r=n(98237),i=Error,o=r("".replace),s=String(new i("zxcasd").stack),a=/\n\s*at [^:]*:[^\n]*/,c=a.test(s);e.exports=function(e,t){if(c&&"string"==typeof e&&!i.prepareStackTrace)for(;t--;)e=o(e,a,"");return e}},90546:(e,t,n)=>{var r=n(45136),i=n(81819),o=n(1402),s=Error.captureStackTrace;e.exports=function(e,t,n,a){o&&(s?s(e,t):r(e,"stack",i(n,a)))}},1402:(e,t,n)=>{var r=n(63736),i=n(65274);e.exports=!r((function(){var e=new Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",i(1,7)),7!==e.stack)}))},67645:(e,t,n)=>{var r=n(21767),i=n(63736),o=n(67618),s=n(88212),a=Error.prototype.toString,c=i((function(){if(r){var e=Object.create(Object.defineProperty({},"name",{get:function(){return this===e}}));if("true"!==a.call(e))return!0}return"2: 1"!==a.call({message:1,name:2})||"Error"!==a.call({})}));e.exports=c?function(){var e=o(this),t=s(e.name,"Error"),n=s(e.message);return t?n?t+": "+n:t:n}:a},30412:(e,t,n)=>{var r=n(38462),i=n(17164).f,o=n(45136),s=n(36729),a=n(10081),c=n(94050),l=n(16421);e.exports=function(e,t){var n,u,d,h,p,g=e.target,f=e.global,m=e.stat;if(n=f?r:m?r[g]||a(g,{}):r[g]&&r[g].prototype)for(u in t){if(h=t[u],d=e.dontCallGetSet?(p=i(n,u))&&p.value:n[u],!l(f?u:g+(m?".":"#")+u,e.forced)&&void 0!==d){if(typeof h==typeof d)continue;c(h,d)}(e.sham||d&&d.sham)&&o(h,"sham",!0),s(n,u,h,e)}}},63736:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},71832:(e,t,n)=>{var r=n(15673),i=Function.prototype,o=i.apply,s=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(r?s.bind(o):function(){return s.apply(o,arguments)})},53257:(e,t,n)=>{var r=n(90836),i=n(39769),o=n(15673),s=r(r.bind);e.exports=function(e,t){return i(e),void 0===t?e:o?s(e,t):function(){return e.apply(t,arguments)}}},15673:(e,t,n)=>{var r=n(63736);e.exports=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},69028:(e,t,n)=>{var r=n(15673),i=Function.prototype.call;e.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},58314:(e,t,n)=>{var r=n(21767),i=n(75292),o=Function.prototype,s=r&&Object.getOwnPropertyDescriptor,a=i(o,"name"),c=a&&"something"===function(){}.name,l=a&&(!r||r&&s(o,"name").configurable);e.exports={EXISTS:a,PROPER:c,CONFIGURABLE:l}},59602:(e,t,n)=>{var r=n(98237),i=n(39769);e.exports=function(e,t,n){try{return r(i(Object.getOwnPropertyDescriptor(e,t)[n]))}catch(e){}}},90836:(e,t,n)=>{var r=n(88661),i=n(98237);e.exports=function(e){if("Function"===r(e))return i(e)}},98237:(e,t,n)=>{var r=n(15673),i=Function.prototype,o=i.call,s=r&&i.bind.bind(o,o);e.exports=r?s:function(e){return function(){return o.apply(e,arguments)}}},37288:(e,t,n)=>{var r=n(38462),i=n(85712),o=function(e){return i(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?o(r[e]):r[e]&&r[e][t]}},48257:(e,t,n)=>{var r=n(11325),i=n(51692),o=n(14704),s=n(12583),a=n(67395)("iterator");e.exports=function(e){if(!o(e))return i(e,a)||i(e,"@@iterator")||s[r(e)]}},17856:(e,t,n)=>{var r=n(69028),i=n(39769),o=n(67618),s=n(27437),a=n(48257),c=TypeError;e.exports=function(e,t){var n=arguments.length<2?a(e):t;if(i(n))return o(r(n,e));throw new c(s(e)+" is not iterable")}},51692:(e,t,n)=>{var r=n(39769),i=n(14704);e.exports=function(e,t){var n=e[t];return i(n)?void 0:r(n)}},38462:function(e,t,n){var r=function(e){return e&&e.Math===Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof self&&self)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||r("object"==typeof this&&this)||function(){return this}()||Function("return this")()},75292:(e,t,n)=>{var r=n(98237),i=n(9631),o=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(i(e),t)}},57349:e=>{e.exports={}},76378:e=>{e.exports=function(e,t){try{1===arguments.length?console.error(e):console.error(e,t)}catch(e){}}},85271:(e,t,n)=>{var r=n(37288);e.exports=r("document","documentElement")},97849:(e,t,n)=>{var r=n(21767),i=n(63736),o=n(9983);e.exports=!r&&!i((function(){return 7!==Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},38245:(e,t,n)=>{var r=n(98237),i=n(63736),o=n(88661),s=Object,a=r("".split);e.exports=i((function(){return!s("z").propertyIsEnumerable(0)}))?function(e){return"String"===o(e)?a(e,""):s(e)}:s},59849:(e,t,n)=>{var r=n(85712),i=n(53085),o=n(29337);e.exports=function(e,t,n){var s,a;return o&&r(s=t.constructor)&&s!==n&&i(a=s.prototype)&&a!==n.prototype&&o(e,a),e}},23786:(e,t,n)=>{var r=n(98237),i=n(85712),o=n(30746),s=r(Function.toString);i(o.inspectSource)||(o.inspectSource=function(e){return s(e)}),e.exports=o.inspectSource},11693:(e,t,n)=>{var r=n(53085),i=n(45136);e.exports=function(e,t){r(t)&&"cause"in t&&i(e,"cause",t.cause)}},80561:(e,t,n)=>{var r,i,o,s=n(86235),a=n(38462),c=n(53085),l=n(45136),u=n(75292),d=n(30746),h=n(52022),p=n(57349),g="Object already initialized",f=a.TypeError,m=a.WeakMap;if(s||d.state){var b=d.state||(d.state=new m);b.get=b.get,b.has=b.has,b.set=b.set,r=function(e,t){if(b.has(e))throw new f(g);return t.facade=e,b.set(e,t),t},i=function(e){return b.get(e)||{}},o=function(e){return b.has(e)}}else{var y=h("state");p[y]=!0,r=function(e,t){if(u(e,y))throw new f(g);return t.facade=e,l(e,y,t),t},i=function(e){return u(e,y)?e[y]:{}},o=function(e){return u(e,y)}}e.exports={set:r,get:i,has:o,enforce:function(e){return o(e)?i(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=i(t)).type!==e)throw new f("Incompatible receiver, "+e+" required");return n}}}},94469:(e,t,n)=>{var r=n(67395),i=n(12583),o=r("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||s[o]===e)}},85712:e=>{var t="object"==typeof document&&document.all;e.exports=void 0===t&&void 0!==t?function(e){return"function"==typeof e||e===t}:function(e){return"function"==typeof e}},94124:(e,t,n)=>{var r=n(98237),i=n(63736),o=n(85712),s=n(11325),a=n(37288),c=n(23786),l=function(){},u=a("Reflect","construct"),d=/^\s*(?:class|function)\b/,h=r(d.exec),p=!d.test(l),g=function(e){if(!o(e))return!1;try{return u(l,[],e),!0}catch(e){return!1}},f=function(e){if(!o(e))return!1;switch(s(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!h(d,c(e))}catch(e){return!0}};f.sham=!0,e.exports=!u||i((function(){var e;return g(g.call)||!g(Object)||!g((function(){e=!0}))||e}))?f:g},16421:(e,t,n)=>{var r=n(63736),i=n(85712),o=/#|\.prototype\./,s=function(e,t){var n=c[a(e)];return n===u||n!==l&&(i(t)?r(t):!!t)},a=s.normalize=function(e){return String(e).replace(o,".").toLowerCase()},c=s.data={},l=s.NATIVE="N",u=s.POLYFILL="P";e.exports=s},14704:e=>{e.exports=function(e){return null==e}},53085:(e,t,n)=>{var r=n(85712);e.exports=function(e){return"object"==typeof e?null!==e:r(e)}},32263:(e,t,n)=>{var r=n(53085);e.exports=function(e){return r(e)||null===e}},90575:e=>{e.exports=!1},78437:(e,t,n)=>{var r=n(37288),i=n(85712),o=n(98180),s=n(5152),a=Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return i(t)&&o(t.prototype,a(e))}},20482:(e,t,n)=>{var r=n(53257),i=n(69028),o=n(67618),s=n(27437),a=n(94469),c=n(54341),l=n(98180),u=n(17856),d=n(48257),h=n(71971),p=TypeError,g=function(e,t){this.stopped=e,this.result=t},f=g.prototype;e.exports=function(e,t,n){var m,b,y,_,v,w,S,k=n&&n.that,I=!(!n||!n.AS_ENTRIES),C=!(!n||!n.IS_RECORD),E=!(!n||!n.IS_ITERATOR),A=!(!n||!n.INTERRUPTED),x=r(t,k),T=function(e){return m&&h(m,"normal"),new g(!0,e)},O=function(e){return I?(o(e),A?x(e[0],e[1],T):x(e[0],e[1])):A?x(e,T):x(e)};if(C)m=e.iterator;else if(E)m=e;else{if(!(b=d(e)))throw new p(s(e)+" is not iterable");if(a(b)){for(y=0,_=c(e);_>y;y++)if((v=O(e[y]))&&l(f,v))return v;return new g(!1)}m=u(e,b)}for(w=C?e.next:m.next;!(S=i(w,m)).done;){try{v=O(S.value)}catch(e){h(m,"throw",e)}if("object"==typeof v&&v&&l(f,v))return v}return new g(!1)}},71971:(e,t,n)=>{var r=n(69028),i=n(67618),o=n(51692);e.exports=function(e,t,n){var s,a;i(e);try{if(!(s=o(e,"return"))){if("throw"===t)throw n;return n}s=r(s,e)}catch(e){a=!0,s=e}if("throw"===t)throw n;if(a)throw s;return i(s),n}},6724:(e,t,n)=>{var r,i,o,s=n(63736),a=n(85712),c=n(53085),l=n(49457),u=n(11401),d=n(36729),h=n(67395),p=n(90575),g=h("iterator"),f=!1;[].keys&&("next"in(o=[].keys())?(i=u(u(o)))!==Object.prototype&&(r=i):f=!0),!c(r)||s((function(){var e={};return r[g].call(e)!==e}))?r={}:p&&(r=l(r)),a(r[g])||d(r,g,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:f}},12583:e=>{e.exports={}},54341:(e,t,n)=>{var r=n(9200);e.exports=function(e){return r(e.length)}},87434:(e,t,n)=>{var r=n(98237),i=n(63736),o=n(85712),s=n(75292),a=n(21767),c=n(58314).CONFIGURABLE,l=n(23786),u=n(80561),d=u.enforce,h=u.get,p=String,g=Object.defineProperty,f=r("".slice),m=r("".replace),b=r([].join),y=a&&!i((function(){return 8!==g((function(){}),"length",{value:8}).length})),_=String(String).split("String"),v=e.exports=function(e,t,n){"Symbol("===f(p(t),0,7)&&(t="["+m(p(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!s(e,"name")||c&&e.name!==t)&&(a?g(e,"name",{value:t,configurable:!0}):e.name=t),y&&n&&s(n,"arity")&&e.length!==n.arity&&g(e,"length",{value:n.arity});try{n&&s(n,"constructor")&&n.constructor?a&&g(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var r=d(e);return s(r,"source")||(r.source=b(_,"string"==typeof t?t:"")),e};Function.prototype.toString=v((function(){return o(this)&&h(this).source||l(this)}),"toString")},87115:e=>{var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var r=+e;return(r>0?n:t)(r)}},60163:(e,t,n)=>{var r,i,o,s,a,c=n(38462),l=n(7939),u=n(53257),d=n(33331).set,h=n(36482),p=n(54465),g=n(90470),f=n(99622),m=n(18914),b=c.MutationObserver||c.WebKitMutationObserver,y=c.document,_=c.process,v=c.Promise,w=l("queueMicrotask");if(!w){var S=new h,k=function(){var e,t;for(m&&(e=_.domain)&&e.exit();t=S.get();)try{t()}catch(e){throw S.head&&r(),e}e&&e.enter()};p||m||f||!b||!y?!g&&v&&v.resolve?((s=v.resolve(void 0)).constructor=v,a=u(s.then,s),r=function(){a(k)}):m?r=function(){_.nextTick(k)}:(d=u(d,c),r=function(){d(k)}):(i=!0,o=y.createTextNode(""),new b(k).observe(o,{characterData:!0}),r=function(){o.data=i=!i}),w=function(e){S.head||r(),S.add(e)}}e.exports=w},94752:(e,t,n)=>{var r=n(39769),i=TypeError,o=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw new i("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new o(e)}},88212:(e,t,n)=>{var r=n(58012);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:r(e)}},49457:(e,t,n)=>{var r,i=n(67618),o=n(8500),s=n(11624),a=n(57349),c=n(85271),l=n(9983),u=n(52022),d=u("IE_PROTO"),h=function(){},p=function(e){return"<script>"+e+"</"+"script>"},g=function(e){e.write(p("")),e.close();var t=e.parentWindow.Object;return e=null,t},f=function(){try{r=new ActiveXObject("htmlfile")}catch(e){}var e,t;f="undefined"!=typeof document?document.domain&&r?g(r):((t=l("iframe")).style.display="none",c.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(p("document.F=Object")),e.close(),e.F):g(r);for(var n=s.length;n--;)delete f.prototype[s[n]];return f()};a[d]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(h.prototype=i(e),n=new h,h.prototype=null,n[d]=e):n=f(),void 0===t?n:o.f(n,t)}},8500:(e,t,n)=>{var r=n(21767),i=n(20971),o=n(23338),s=n(67618),a=n(46378),c=n(49966);t.f=r&&!i?Object.defineProperties:function(e,t){s(e);for(var n,r=a(t),i=c(t),l=i.length,u=0;l>u;)o.f(e,n=i[u++],r[n]);return e}},23338:(e,t,n)=>{var r=n(21767),i=n(97849),o=n(20971),s=n(67618),a=n(55920),c=TypeError,l=Object.defineProperty,u=Object.getOwnPropertyDescriptor,d="enumerable",h="configurable",p="writable";t.f=r?o?function(e,t,n){if(s(e),t=a(t),s(n),"function"==typeof e&&"prototype"===t&&"value"in n&&p in n&&!n.writable){var r=u(e,t);r&&r.writable&&(e[t]=n.value,n={configurable:h in n?n.configurable:r.configurable,enumerable:d in n?n.enumerable:r.enumerable,writable:!1})}return l(e,t,n)}:l:function(e,t,n){if(s(e),t=a(t),s(n),i)try{return l(e,t,n)}catch(e){}if("get"in n||"set"in n)throw new c("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},17164:(e,t,n)=>{var r=n(21767),i=n(69028),o=n(62547),s=n(65274),a=n(46378),c=n(55920),l=n(75292),u=n(97849),d=Object.getOwnPropertyDescriptor;t.f=r?d:function(e,t){if(e=a(e),t=c(t),u)try{return d(e,t)}catch(e){}if(l(e,t))return s(!i(o.f,e,t),e[t])}},69993:(e,t,n)=>{var r=n(99953),i=n(11624).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},90701:(e,t)=>{t.f=Object.getOwnPropertySymbols},11401:(e,t,n)=>{var r=n(75292),i=n(85712),o=n(9631),s=n(52022),a=n(51856),c=s("IE_PROTO"),l=Object,u=l.prototype;e.exports=a?l.getPrototypeOf:function(e){var t=o(e);if(r(t,c))return t[c];var n=t.constructor;return i(n)&&t instanceof n?n.prototype:t instanceof l?u:null}},98180:(e,t,n)=>{var r=n(98237);e.exports=r({}.isPrototypeOf)},99953:(e,t,n)=>{var r=n(98237),i=n(75292),o=n(46378),s=n(36281).indexOf,a=n(57349),c=r([].push);e.exports=function(e,t){var n,r=o(e),l=0,u=[];for(n in r)!i(a,n)&&i(r,n)&&c(u,n);for(;t.length>l;)i(r,n=t[l++])&&(~s(u,n)||c(u,n));return u}},49966:(e,t,n)=>{var r=n(99953),i=n(11624);e.exports=Object.keys||function(e){return r(e,i)}},62547:(e,t)=>{var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);t.f=i?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},29337:(e,t,n)=>{var r=n(59602),i=n(53085),o=n(79744),s=n(26945);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=r(Object.prototype,"__proto__","set"))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return o(n),s(r),i(n)?(t?e(n,r):n.__proto__=r,n):n}}():void 0)},99972:(e,t,n)=>{var r=n(55491),i=n(11325);e.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},35916:(e,t,n)=>{var r=n(69028),i=n(85712),o=n(53085),s=TypeError;e.exports=function(e,t){var n,a;if("string"===t&&i(n=e.toString)&&!o(a=r(n,e)))return a;if(i(n=e.valueOf)&&!o(a=r(n,e)))return a;if("string"!==t&&i(n=e.toString)&&!o(a=r(n,e)))return a;throw new s("Can't convert object to primitive value")}},75271:(e,t,n)=>{var r=n(37288),i=n(98237),o=n(69993),s=n(90701),a=n(67618),c=i([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=o.f(a(e)),n=s.f;return n?c(t,n(e)):t}},69793:(e,t,n)=>{var r=n(38462);e.exports=r},26249:e=>{e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},79514:(e,t,n)=>{var r=n(38462),i=n(74815),o=n(85712),s=n(16421),a=n(23786),c=n(67395),l=n(20349),u=n(90575),d=n(43772),h=i&&i.prototype,p=c("species"),g=!1,f=o(r.PromiseRejectionEvent),m=s("Promise",(function(){var e=a(i),t=e!==String(i);if(!t&&66===d)return!0;if(u&&(!h.catch||!h.finally))return!0;if(!d||d<51||!/native code/.test(e)){var n=new i((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};if((n.constructor={})[p]=r,!(g=n.then((function(){}))instanceof r))return!0}return!(t||"BROWSER"!==l&&"DENO"!==l||f)}));e.exports={CONSTRUCTOR:m,REJECTION_EVENT:f,SUBCLASSING:g}},74815:(e,t,n)=>{var r=n(38462);e.exports=r.Promise},88482:(e,t,n)=>{var r=n(67618),i=n(53085),o=n(94752);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},81173:(e,t,n)=>{var r=n(74815),i=n(76364),o=n(79514).CONSTRUCTOR;e.exports=o||!i((function(e){r.all(e).then(void 0,(function(){}))}))},29974:(e,t,n)=>{var r=n(23338).f;e.exports=function(e,t,n){n in e||r(e,n,{configurable:!0,get:function(){return t[n]},set:function(e){t[n]=e}})}},36482:e=>{var t=function(){this.head=null,this.tail=null};t.prototype={add:function(e){var t={item:e,next:null},n=this.tail;n?n.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&&(this.tail=null),e.item}},e.exports=t},79744:(e,t,n)=>{var r=n(14704),i=TypeError;e.exports=function(e){if(r(e))throw new i("Can't call method on "+e);return e}},7939:(e,t,n)=>{var r=n(38462),i=n(21767),o=Object.getOwnPropertyDescriptor;e.exports=function(e){if(!i)return r[e];var t=o(r,e);return t&&t.value}},23854:(e,t,n)=>{var r=n(37288),i=n(65056),o=n(67395),s=n(21767),a=o("species");e.exports=function(e){var t=r(e);s&&t&&!t[a]&&i(t,a,{configurable:!0,get:function(){return this}})}},35672:(e,t,n)=>{var r=n(23338).f,i=n(75292),o=n(67395)("toStringTag");e.exports=function(e,t,n){e&&!n&&(e=e.prototype),e&&!i(e,o)&&r(e,o,{configurable:!0,value:t})}},52022:(e,t,n)=>{var r=n(73723),i=n(14115),o=r("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},30746:(e,t,n)=>{var r=n(90575),i=n(38462),o=n(10081),s="__core-js_shared__",a=e.exports=i[s]||o(s,{});(a.versions||(a.versions=[])).push({version:"3.45.1",mode:r?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.45.1/LICENSE",source:"https://github.com/zloirock/core-js"})},73723:(e,t,n)=>{var r=n(30746);e.exports=function(e,t){return r[e]||(r[e]=t||{})}},11066:(e,t,n)=>{var r=n(67618),i=n(92586),o=n(14704),s=n(67395)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||o(n=r(a)[s])?t:i(n)}},1648:(e,t,n)=>{var r=n(43772),i=n(63736),o=n(38462).String;e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol("symbol detection");return!o(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},33331:(e,t,n)=>{var r,i,o,s,a=n(38462),c=n(71832),l=n(53257),u=n(85712),d=n(75292),h=n(63736),p=n(85271),g=n(26637),f=n(9983),m=n(8205),b=n(54465),y=n(18914),_=a.setImmediate,v=a.clearImmediate,w=a.process,S=a.Dispatch,k=a.Function,I=a.MessageChannel,C=a.String,E=0,A={},x="onreadystatechange";h((function(){r=a.location}));var T=function(e){if(d(A,e)){var t=A[e];delete A[e],t()}},O=function(e){return function(){T(e)}},P=function(e){T(e.data)},R=function(e){a.postMessage(C(e),r.protocol+"//"+r.host)};_&&v||(_=function(e){m(arguments.length,1);var t=u(e)?e:k(e),n=g(arguments,1);return A[++E]=function(){c(t,void 0,n)},i(E),E},v=function(e){delete A[e]},y?i=function(e){w.nextTick(O(e))}:S&&S.now?i=function(e){S.now(O(e))}:I&&!b?(s=(o=new I).port2,o.port1.onmessage=P,i=l(s.postMessage,s)):a.addEventListener&&u(a.postMessage)&&!a.importScripts&&r&&"file:"!==r.protocol&&!h(R)?(i=R,a.addEventListener("message",P,!1)):i=x in f("script")?function(e){p.appendChild(f("script")).onreadystatechange=function(){p.removeChild(this),T(e)}}:function(e){setTimeout(O(e),0)}),e.exports={set:_,clear:v}},5235:(e,t,n)=>{var r=n(99729),i=Math.max,o=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):o(n,t)}},46378:(e,t,n)=>{var r=n(38245),i=n(79744);e.exports=function(e){return r(i(e))}},99729:(e,t,n)=>{var r=n(87115);e.exports=function(e){var t=+e;return t!=t||0===t?0:r(t)}},9200:(e,t,n)=>{var r=n(99729),i=Math.min;e.exports=function(e){var t=r(e);return t>0?i(t,9007199254740991):0}},9631:(e,t,n)=>{var r=n(79744),i=Object;e.exports=function(e){return i(r(e))}},76315:(e,t,n)=>{var r=n(69028),i=n(53085),o=n(78437),s=n(51692),a=n(35916),c=n(67395),l=TypeError,u=c("toPrimitive");e.exports=function(e,t){if(!i(e)||o(e))return e;var n,c=s(e,u);if(c){if(void 0===t&&(t="default"),n=r(c,e,t),!i(n)||o(n))return n;throw new l("Can't convert object to primitive value")}return void 0===t&&(t="number"),a(e,t)}},55920:(e,t,n)=>{var r=n(76315),i=n(78437);e.exports=function(e){var t=r(e,"string");return i(t)?t:t+""}},55491:(e,t,n)=>{var r={};r[n(67395)("toStringTag")]="z",e.exports="[object z]"===String(r)},58012:(e,t,n)=>{var r=n(11325),i=String;e.exports=function(e){if("Symbol"===r(e))throw new TypeError("Cannot convert a Symbol value to a string");return i(e)}},27437:e=>{var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},14115:(e,t,n)=>{var r=n(98237),i=0,o=Math.random(),s=r(1.1.toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+s(++i+o,36)}},5152:(e,t,n)=>{var r=n(1648);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},20971:(e,t,n)=>{var r=n(21767),i=n(63736);e.exports=r&&i((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},8205:e=>{var t=TypeError;e.exports=function(e,n){if(e<n)throw new t("Not enough arguments");return e}},86235:(e,t,n)=>{var r=n(38462),i=n(85712),o=r.WeakMap;e.exports=i(o)&&/native code/.test(String(o))},70134:(e,t,n)=>{var r=n(69793),i=n(75292),o=n(13224),s=n(23338).f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});i(t,e)||s(t,e,{value:o.f(e)})}},13224:(e,t,n)=>{var r=n(67395);t.f=r},67395:(e,t,n)=>{var r=n(38462),i=n(73723),o=n(75292),s=n(14115),a=n(1648),c=n(5152),l=r.Symbol,u=i("wks"),d=c?l.for||l:l&&l.withoutSetter||s;e.exports=function(e){return o(u,e)||(u[e]=a&&o(l,e)?l[e]:d("Symbol."+e)),u[e]}},69255:(e,t,n)=>{var r=n(37288),i=n(75292),o=n(45136),s=n(98180),a=n(29337),c=n(94050),l=n(29974),u=n(59849),d=n(88212),h=n(11693),p=n(90546),g=n(21767),f=n(90575);e.exports=function(e,t,n,m){var b="stackTraceLimit",y=m?2:1,_=e.split("."),v=_[_.length-1],w=r.apply(null,_);if(w){var S=w.prototype;if(!f&&i(S,"cause")&&delete S.cause,!n)return w;var k=r("Error"),I=t((function(e,t){var n=d(m?t:e,void 0),r=m?new w(e):new w;return void 0!==n&&o(r,"message",n),p(r,I,r.stack,2),this&&s(S,this)&&u(r,this,I),arguments.length>y&&h(r,arguments[y]),r}));if(I.prototype=S,"Error"!==v?a?a(I,k):c(I,k,{name:!0}):g&&b in w&&(l(I,w,b),l(I,w,"prepareStackTrace")),c(I,w),!f)try{S.name!==v&&o(S,"name",v),S.constructor=I}catch(e){}return I}}},41980:(e,t,n)=>{var r=n(30412),i=n(21767),o=n(37288),s=n(39769),a=n(76955),c=n(36729),l=n(65431),u=n(65056),d=n(67395),h=n(80561),p=n(86795),g=n(43772),f=o("Promise"),m=o("SuppressedError"),b=ReferenceError,y=d("asyncDispose"),_=d("toStringTag"),v="AsyncDisposableStack",w=h.set,S=h.getterFor(v),k="async-dispose",I="disposed",C=function(e){var t=S(e);if(t.state===I)throw new b("AsyncDisposableStack already disposed");return t},E=function(){w(a(this,A),{type:v,state:"pending",stack:[]}),i||(this.disposed=!1)},A=E.prototype;l(A,{disposeAsync:function(){var e=this;return new f((function(t,n){var r=S(e);if(r.state===I)return t(void 0);r.state=I,i||(e.disposed=!0);var o,s=r.stack,a=s.length,c=!1,l=function(e){c?o=new m(e,o):(c=!0,o=e),u()},u=function(){if(a){var e=s[--a];s[a]=null;try{f.resolve(e()).then(u,l)}catch(e){l(e)}}else r.stack=null,c?n(o):t(void 0)};u()}))},use:function(e){return p(C(this),e,k),e},adopt:function(e,t){var n=C(this);return s(t),p(n,void 0,k,(function(){return t(e)})),e},defer:function(e){var t=C(this);s(e),p(t,void 0,k,e)},move:function(){var e=C(this),t=new E;return S(t).stack=e.stack,e.stack=[],e.state=I,i||(this.disposed=!0),t}}),i&&u(A,"disposed",{configurable:!0,get:function(){return S(this).state===I}}),c(A,y,A.disposeAsync,{name:"disposeAsync"}),c(A,_,v,{nonWritable:!0}),r({global:!0,constructor:!0,forced:g&&g<136},{AsyncDisposableStack:E})},70911:(e,t,n)=>{var r=n(69028),i=n(36729),o=n(37288),s=n(51692),a=n(75292),c=n(67395),l=n(82677),u=c("asyncDispose"),d=o("Promise");a(l,u)||i(l,u,(function(){var e=this;return new d((function(t,n){var i=s(e,"return");i?d.resolve(r(i,e)).then((function(){t(void 0)}),n):t(void 0)}))}))},49622:(e,t,n)=>{var r=n(30412),i=n(21767),o=n(37288),s=n(39769),a=n(76955),c=n(36729),l=n(65431),u=n(65056),d=n(67395),h=n(80561),p=n(86795),g=o("SuppressedError"),f=ReferenceError,m=d("dispose"),b=d("toStringTag"),y="DisposableStack",_=h.set,v=h.getterFor(y),w="sync-dispose",S="disposed",k=function(e){var t=v(e);if(t.state===S)throw new f("DisposableStack already disposed");return t},I=function(){_(a(this,C),{type:y,state:"pending",stack:[]}),i||(this.disposed=!1)},C=I.prototype;l(C,{dispose:function(){var e=v(this);if(e.state!==S){e.state=S,i||(this.disposed=!0);for(var t,n=e.stack,r=n.length,o=!1;r;){var s=n[--r];n[r]=null;try{s()}catch(e){o?t=new g(e,t):(o=!0,t=e)}}if(e.stack=null,o)throw t}},use:function(e){return p(k(this),e,w),e},adopt:function(e,t){var n=k(this);return s(t),p(n,void 0,w,(function(){t(e)})),e},defer:function(e){var t=k(this);s(e),p(t,void 0,w,e)},move:function(){var e=k(this),t=new I;return v(t).stack=e.stack,e.stack=[],e.state=S,i||(this.disposed=!0),t}}),i&&u(C,"disposed",{configurable:!0,get:function(){return v(this).state===S}}),c(C,m,C.dispose,{name:"dispose"}),c(C,b,y,{nonWritable:!0}),r({global:!0,constructor:!0},{DisposableStack:I})},19246:(e,t,n)=>{var r=n(30412),i=n(38462),o=n(71832),s=n(69255),a="WebAssembly",c=i.WebAssembly,l=7!==new Error("e",{cause:7}).cause,u=function(e,t){var n={};n[e]=s(e,t,l),r({global:!0,constructor:!0,arity:1,forced:l},n)},d=function(e,t){if(c&&c[e]){var n={};n[e]=s("WebAssembly."+e,t,l),r({target:a,stat:!0,constructor:!0,arity:1,forced:l},n)}};u("Error",(function(e){return function(t){return o(e,this,arguments)}})),u("EvalError",(function(e){return function(t){return o(e,this,arguments)}})),u("RangeError",(function(e){return function(t){return o(e,this,arguments)}})),u("ReferenceError",(function(e){return function(t){return o(e,this,arguments)}})),u("SyntaxError",(function(e){return function(t){return o(e,this,arguments)}})),u("TypeError",(function(e){return function(t){return o(e,this,arguments)}})),u("URIError",(function(e){return function(t){return o(e,this,arguments)}})),d("CompileError",(function(e){return function(t){return o(e,this,arguments)}})),d("LinkError",(function(e){return function(t){return o(e,this,arguments)}})),d("RuntimeError",(function(e){return function(t){return o(e,this,arguments)}}))},2255:(e,t,n)=>{var r=n(36729),i=n(67645),o=Error.prototype;o.toString!==i&&r(o,"toString",i)},16122:(e,t,n)=>{var r=n(69028),i=n(36729),o=n(51692),s=n(75292),a=n(67395),c=n(6724).IteratorPrototype,l=a("dispose");s(c,l)||i(c,l,(function(){var e=o(this,"return");e&&r(e,this)}))},75480:(e,t,n)=>{var r=n(55491),i=n(36729),o=n(99972);r||i(Object.prototype,"toString",o,{unsafe:!0})},29318:(e,t,n)=>{var r=n(30412),i=n(69028),o=n(39769),s=n(94752),a=n(26249),c=n(20482);r({target:"Promise",stat:!0,forced:n(81173)},{all:function(e){var t=this,n=s.f(t),r=n.resolve,l=n.reject,u=a((function(){var n=o(t.resolve),s=[],a=0,u=1;c(e,(function(e){var o=a++,c=!1;u++,i(n,t,e).then((function(e){c||(c=!0,s[o]=e,--u||r(s))}),l)})),--u||r(s)}));return u.error&&l(u.value),n.promise}})},59269:(e,t,n)=>{var r=n(30412),i=n(90575),o=n(79514).CONSTRUCTOR,s=n(74815),a=n(37288),c=n(85712),l=n(36729),u=s&&s.prototype;if(r({target:"Promise",proto:!0,forced:o,real:!0},{catch:function(e){return this.then(void 0,e)}}),!i&&c(s)){var d=a("Promise").prototype.catch;u.catch!==d&&l(u,"catch",d,{unsafe:!0})}},81890:(e,t,n)=>{var r,i,o,s,a=n(30412),c=n(90575),l=n(18914),u=n(38462),d=n(69793),h=n(69028),p=n(36729),g=n(29337),f=n(35672),m=n(23854),b=n(39769),y=n(85712),_=n(53085),v=n(76955),w=n(11066),S=n(33331).set,k=n(60163),I=n(76378),C=n(26249),E=n(36482),A=n(80561),x=n(74815),T=n(79514),O=n(94752),P="Promise",R=T.CONSTRUCTOR,D=T.REJECTION_EVENT,N=T.SUBCLASSING,U=A.getterFor(P),M=A.set,j=x&&x.prototype,F=x,L=j,G=u.TypeError,B=u.document,z=u.process,V=O.f,q=V,H=!!(B&&B.createEvent&&u.dispatchEvent),W="unhandledrejection",$=function(e){var t;return!(!_(e)||!y(t=e.then))&&t},X=function(e,t){var n,r,i,o=t.value,s=1===t.state,a=s?e.ok:e.fail,c=e.resolve,l=e.reject,u=e.domain;try{a?(s||(2===t.rejection&&Q(t),t.rejection=1),!0===a?n=o:(u&&u.enter(),n=a(o),u&&(u.exit(),i=!0)),n===e.promise?l(new G("Promise-chain cycle")):(r=$(n))?h(r,n,c,l):c(n)):l(o)}catch(e){u&&!i&&u.exit(),l(e)}},K=function(e,t){e.notified||(e.notified=!0,k((function(){for(var n,r=e.reactions;n=r.get();)X(n,e);e.notified=!1,t&&!e.rejection&&Z(e)})))},Y=function(e,t,n){var r,i;H?((r=B.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),u.dispatchEvent(r)):r={promise:t,reason:n},!D&&(i=u["on"+e])?i(r):e===W&&I("Unhandled promise rejection",n)},Z=function(e){h(S,u,(function(){var t,n=e.facade,r=e.value;if(J(e)&&(t=C((function(){l?z.emit("unhandledRejection",r,n):Y(W,n,r)})),e.rejection=l||J(e)?2:1,t.error))throw t.value}))},J=function(e){return 1!==e.rejection&&!e.parent},Q=function(e){h(S,u,(function(){var t=e.facade;l?z.emit("rejectionHandled",t):Y("rejectionhandled",t,e.value)}))},ee=function(e,t,n){return function(r){e(t,r,n)}},te=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,K(e,!0))},ne=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw new G("Promise can't be resolved itself");var r=$(t);r?k((function(){var n={done:!1};try{h(r,t,ee(ne,n,e),ee(te,n,e))}catch(t){te(n,t,e)}})):(e.value=t,e.state=1,K(e,!1))}catch(t){te({done:!1},t,e)}}};if(R&&(L=(F=function(e){v(this,L),b(e),h(r,this);var t=U(this);try{e(ee(ne,t),ee(te,t))}catch(e){te(t,e)}}).prototype,(r=function(e){M(this,{type:P,done:!1,notified:!1,parent:!1,reactions:new E,rejection:!1,state:0,value:null})}).prototype=p(L,"then",(function(e,t){var n=U(this),r=V(w(this,F));return n.parent=!0,r.ok=!y(e)||e,r.fail=y(t)&&t,r.domain=l?z.domain:void 0,0===n.state?n.reactions.add(r):k((function(){X(r,n)})),r.promise})),i=function(){var e=new r,t=U(e);this.promise=e,this.resolve=ee(ne,t),this.reject=ee(te,t)},O.f=V=function(e){return e===F||e===o?new i(e):q(e)},!c&&y(x)&&j!==Object.prototype)){s=j.then,N||p(j,"then",(function(e,t){var n=this;return new F((function(e,t){h(s,n,e,t)})).then(e,t)}),{unsafe:!0});try{delete j.constructor}catch(e){}g&&g(j,L)}a({global:!0,constructor:!0,wrap:!0,forced:R},{Promise:F}),o=d.Promise,f(F,P,!1,!0),m(P)},64851:(e,t,n)=>{n(81890),n(29318),n(59269),n(21031),n(45419),n(38651)},21031:(e,t,n)=>{var r=n(30412),i=n(69028),o=n(39769),s=n(94752),a=n(26249),c=n(20482);r({target:"Promise",stat:!0,forced:n(81173)},{race:function(e){var t=this,n=s.f(t),r=n.reject,l=a((function(){var s=o(t.resolve);c(e,(function(e){i(s,t,e).then(n.resolve,r)}))}));return l.error&&r(l.value),n.promise}})},45419:(e,t,n)=>{var r=n(30412),i=n(94752);r({target:"Promise",stat:!0,forced:n(79514).CONSTRUCTOR},{reject:function(e){var t=i.f(this);return(0,t.reject)(e),t.promise}})},38651:(e,t,n)=>{var r=n(30412),i=n(37288),o=n(90575),s=n(74815),a=n(79514).CONSTRUCTOR,c=n(88482),l=i("Promise"),u=o&&!a;r({target:"Promise",stat:!0,forced:o||a},{resolve:function(e){return c(u&&this===l?s:this,e)}})},48024:(e,t,n)=>{var r=n(30412),i=n(38462),o=n(98180),s=n(11401),a=n(29337),c=n(94050),l=n(49457),u=n(45136),d=n(65274),h=n(90546),p=n(88212),g=n(67395),f=n(63736),m=n(90575),b=i.SuppressedError,y=g("toStringTag"),_=Error,v=!!b&&3!==b.length,w=!!b&&f((function(){return 4===new b(1,2,3,{cause:4}).cause})),S=v||w,k=function(e,t,n){var r,i=o(I,this);return a?r=!S||i&&s(this)!==I?a(new _,i?s(this):I):new b:(r=i?this:l(I),u(r,y,"Error")),void 0!==n&&u(r,"message",p(n)),h(r,k,r.stack,1),u(r,"error",e),u(r,"suppressed",t),r};a?a(k,_):c(k,_,{name:!0});var I=k.prototype=S?b.prototype:l(_.prototype,{constructor:d(1,k),message:d(1,""),name:d(1,"SuppressedError")});S&&!m&&(I.constructor=k),r({global:!0,constructor:!0,arity:3,forced:S},{SuppressedError:k})},47621:(e,t,n)=>{var r=n(38462),i=n(70134),o=n(23338).f,s=n(17164).f,a=r.Symbol;if(i("asyncDispose"),a){var c=s(a,"asyncDispose");c.enumerable&&c.configurable&&c.writable&&o(a,"asyncDispose",{value:c.value,enumerable:!1,configurable:!1,writable:!1})}},92424:(e,t,n)=>{var r=n(38462),i=n(70134),o=n(23338).f,s=n(17164).f,a=r.Symbol;if(i("dispose"),a){var c=s(a,"dispose");c.enumerable&&c.configurable&&c.writable&&o(a,"dispose",{value:c.value,enumerable:!1,configurable:!1,writable:!1})}},12094:(e,t,n)=>{n(41980)},99350:(e,t,n)=>{n(70911)},26006:(e,t,n)=>{n(49622)},57061:(e,t,n)=>{n(16122)},10617:(e,t,n)=>{n(48024)},13850:(e,t,n)=>{n(47621)},93482:(e,t,n)=>{n(92424)},60358:(e,t,n)=>{var r=n(73351);e.exports=r},55175:(e,t,n)=>{var r=n(52229);e.exports=r},76604:(e,t,n)=>{var r=n(26770);e.exports=r},64812:(e,t,n)=>{var r=n(39789);e.exports=r},28642:(e,t,n)=>{function r(e){const t=e.slice(0);let n=t.length;for(;n>0;){const e=Math.floor(Math.random()*n);n--,[t[n],t[e]]=[t[e],t[n]]}return t}function i(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function o(e,t){return new Array(e).fill(!0).map(((e,n)=>t(n)))}function s(e,t){const n=t.indexOf(e);t.splice(n,1)}n.d(t,{Hx:()=>i,QK:()=>s,TV:()=>r,j6:()=>o,sq:()=>a});const a=e=>t=>{let n=-1;for(let r=0;r<t.length;r++){const i=t[r],o=t[r-1];if(o&&e(o)||!e(i)||(n=r),Boolean(o)&&e(o)&&!e(i)&&0!==n)return!1}return!0}},8146:(e,t,n)=>{n.d(t,{Bm:()=>p,Cn:()=>v,Gk:()=>f,Hr:()=>u,Oo:()=>d,QZ:()=>a,Ue:()=>o,Y4:()=>g,_W:()=>h,d1:()=>i,eh:()=>S,km:()=>I,kq:()=>c,uK:()=>m,xt:()=>_});var r=(e=>(e.None="None",e.OAuth2="OAuth2",e))(r||{});function i(e){return e.length>0}function o(e){if(!i(e))throw new Error(`Invalid agent ID: '${e}'`);return e}const s="coda-pack";function a(e){if(!i(e))throw new Error(`Invalid agent ID: '${e}'`);return`${s}/${e}`}function c(e){return e.startsWith(`${s}/`)&&e.length>s.length+1}class l extends Error{constructor(e,t,n){super(`[${e}] ${t}`),this.kind=e,this.cause=n,n&&n.stack&&(this.stack=`${this.stack}\nCaused by: ${n.stack}`)}}function u(e){if(!c(e))throw new Error(`Invalid pack agent ID: '${e}'`);return e.slice(s.length+1)}function d(e){const t=Number(u(e));if(isNaN(t))throw new Error(`Invalid pack agent ID: '${e}'`);return t}var h=(e=>(e.Uninstalled="uninstalled",e.Pending="pending",e.Installed="installed",e))(h||{}),p=(e=>(e[e.GrammarlyProofreader=43834]="GrammarlyProofreader",e[e.GrammarlyPlagiarismChecker=43882]="GrammarlyPlagiarismChecker",e[e.GrammarlyReaderTranslate=44471]="GrammarlyReaderTranslate",e[e.GrammarlyReaderComprehension=44542]="GrammarlyReaderComprehension",e[e.GrammarlyAiDetector=45020]="GrammarlyAiDetector",e[e.GrammarlyAiGrader=45021]="GrammarlyAiGrader",e[e.GrammarlyCitationFinder=45022]="GrammarlyCitationFinder",e[e.GrammarlyParaphraser=45023]="GrammarlyParaphraser",e[e.GrammarlyReaderReactions=45024]="GrammarlyReaderReactions",e[e.GrammarlyHumanizer=45025]="GrammarlyHumanizer",e[e.GrammarlyExpertReview=45026]="GrammarlyExpertReview",e[e.SuperhumanGo=45121]="SuperhumanGo",e))(p||{}),g=(e=>(e[e.GoogleCalendar=1003]="GoogleCalendar",e[e.Gmail=1004]="Gmail",e[e.OutlookMail=41577]="OutlookMail",e[e.GoogleDrive=33739]="GoogleDrive",e[e.Jira=1052]="Jira",e[e.Confluence=31997]="Confluence",e))(g||{}),f=(e=>(e.Directory="directory",e.AgentProfile="agentProfile",e.ManageAgents="manageAgents",e.AgentSettings="agentSettings",e.AgentChat="agentChat",e))(f||{}),m=(e=>(e.AGENT_SECURITY_URL="agentSecurityUrl",e.AGENT_SETUP_URL="agentSetupUrl",e.AGENT_STORE_URL="agentStoreUrl",e.REPORT_AN_ISSUE="reportAnIssue",e))(m||{});const b=new Set(Object.values(p).filter((e=>"number"==typeof e))),y={aiDetector:a(p.GrammarlyAiDetector.toString()),AIGrader:a(p.GrammarlyAiGrader.toString()),chat:a(p.SuperhumanGo.toString()),expertPanel:a(p.GrammarlyExpertReview.toString()),humanizer:a(p.GrammarlyHumanizer.toString()),plagiarismChecker:a(p.GrammarlyPlagiarismChecker.toString()),legacyProofreader:a(p.GrammarlyProofreader.toString()),paraphraser:a(p.GrammarlyParaphraser.toString()),readerReactions:a(p.GrammarlyReaderReactions.toString()),translate:a(p.GrammarlyReaderTranslate.toString()),comprehension:a(p.GrammarlyReaderComprehension.toString())};Object.fromEntries(Object.entries(y).map((([e,t])=>[t,e])));function _(e){if(!c(e))return!1;try{const t=d(e);return b.has(t)}catch{return!1}}const v=100,w=class{};w.CODA="Coda",w.GRAMMARLY="Grammarly",w.SUPERHUMAN="Superhuman",w.UNKNOWN="Unknown";let S=w;const k={googleCalendar:{id:a("1003"),name:"Google Calendar",creator:"Google",icon:"https://codahosted.io/packs/1003/unversioned/assets/LOGO/af822f02808fc0f3440b8ac2a2b9735829dd8ffd24bae1cef7c3fb0afecd22a944202ab9288d94678e053df4c007aa4f3bc8b4860877ddab79fe248b4cfe0a5b1e4ab62dc7cf12967b6b60ee69541951b61b9381271f3c3736dc13c5822cfc8281d229af",logo:{assetId:"af822f02808fc0f3440b8",imageUrl:"https://codahosted.io/packs/1003/unversioned/assets/LOGO/af822f02808fc0f3440b8ac2a2b9735829dd8ffd24bae1cef7c3fb0afecd22a944202ab9288d94678e053df4c007aa4f3bc8b4860877ddab79fe248b4cfe0a5b1e4ab62dc7cf12967b6b60ee69541951b61b9381271f3c3736dc13c5822cfc8281d229af",filename:"unknown",mimeType:"image/png"},description:"See your events and create new events with your agent.",shortDescription:"Calendar events agent",externalMetadataUrl:"https://example.com/metadata/googlecalendar",certifiedAgent:!0,agentImages:[{imageUrl:"https://codahosted.io/packs/1003/unversioned/assets/EXAMPLE/d84eea83a4969de601c3cb20e6448c828bd54631b1cd11a9bd0dcf8f02e8f2b687ecaa381c7467285519c3edddc1bfc2e645e00d33eeb419854f856547029b61cd01d871b0b634305e30e640ab233e14726beec1aa26fde1fcb73fdfd9b4488f08305da4",filename:"example_image.jpg",assetId:"testId",mimeType:void 0,altText:void 0}],termsOfServiceUrl:"https://www.example.com/tos",privacyPolicyUrl:"https://www.example.com/privacy",isPaidAgentFreeInBeta:!1,releaseId:1,lastReleasedAt:"2025-09-25T18:35:01.102Z",supportEmail:"support@example.com"},gmail:{id:a("1004"),name:"Gmail",creator:"Google",icon:"https://codahosted.io/packs/33623/unversioned/assets/LOGO/6f13a625d61b79e79dd04dfb6bdcf1e3956c0dcd02face790ede7e21b79c2c435020e3039dc24cffd73c1bdfd11ac6f9ffa9d4f068a93a03c901bd346b00d7247cd20bda34bee90d4c57283e9f9422a2f237dfb0af5e01531f8a8742cd8777ab54bc07dc",logo:{assetId:"6f13a625d61b79e79dd04df",imageUrl:"https://codahosted.io/packs/33623/unversioned/assets/LOGO/6f13a625d61b79e79dd04dfb6bdcf1e3956c0dcd02face790ede7e21b79c2c435020e3039dc24cffd73c1bdfd11ac6f9ffa9d4f068a93a03c901bd346b00d7247cd20bda34bee90d4c57283e9f9422a2f237dfb0af5e01531f8a8742cd8777ab54bc07dc",filename:"unknown",mimeType:"image/png"},description:"See and send emails from your doc by connecting to Google.",shortDescription:"Email integration",certifiedAgent:!0,agentShortDescription:"Email integration"},github:{id:a("1013"),name:"GitHub",creator:"GitHub",icon:"https://codahosted.io/packs/1013/unversioned/assets/LOGO/c096a0cf4a2b4428c7f0129e783f2272c30ff12ae3800cccdc6401072aa0b62b92f321ce83a1a40ec0dd54dd89156f487f21f275bab69cc27d3a5a7135a4703574082b7df6469a3ae95c128049676ce2353f3cd8fd3dbf3b0b6e699172a7b12c6f558c74",logo:{assetId:"c096a0cf4a2b4428c7f0129e783f2272c30",imageUrl:"https://codahosted.io/packs/1013/unversioned/assets/LOGO/c096a0cf4a2b4428c7f0129e783f2272c30ff12ae3800cccdc6401072aa0b62b92f321ce83a1a40ec0dd54dd89156f487f21f275bab69cc27d3a5a7135a4703574082b7df6469a3ae95c128049676ce2353f3cd8fd3dbf3b0b6e699172a7b12c6f558c74",filename:"unknown",mimeType:"image/png"},description:"Track your latest pull requests, issues, and more in your doc.",shortDescription:"GitHub integration",agentShortDescription:"GitHub integration"},jira:{id:a("1052"),name:"Jira",creator:"Atlassian",icon:"https://codahosted.io/packs/1052/unversioned/assets/LOGO/b1b1ba834f26e6e1269d17cb503f657979abadd9377e022efb95508266bac9627aa8ae3ffd9221ba03fab3f367938a75d1e281393667ac1b97bda4fd99dd8c3b296c429a356c843a1c06d832dbe5e31c5bd6ded5acd4decd8fb1273a3d0bd200d5bab51d",logo:{assetId:"b1b1ba834f26e6e1269d17cb503f657979ad",imageUrl:"https://codahosted.io/packs/1052/unversioned/assets/LOGO/b1b1ba834f26e6e1269d17cb503f657979abadd9377e022efb95508266bac9627aa8ae3ffd9221ba03fab3f367938a75d1e281393667ac1b97bda4fd99dd8c3b296c429a356c843a1c06d832dbe5e31c5bd6ded5acd4decd8fb1273a3d0bd200d5bab51d",filename:"unknown",mimeType:"image/png"},description:"Track projects and push updates with two-way sync.",shortDescription:"Project tracking",agentShortDescription:"Project tracking"},googleDrive:{id:a("1059"),name:"Google Drive",creator:"Google",icon:"https://codahosted.io/packs/33739/unversioned/assets/LOGO/098ae4e4dd1fde3a1772737b39b9df86a6e34416b054bbcee6a9d4681d19a5c9ead852ac707659ea13daa1032d802da28df57ad59803c4d5d4366c436a59bf83d9d51f679c979eff7d4e80f6cf3443c5db24a4aa9eaa9155f5deec0ae7ad9f96c6670537",logo:{assetId:"098ae4e4dd1fde3a1772737b39b9df86a6e34416",imageUrl:"https://codahosted.io/packs/33739/unversioned/assets/LOGO/098ae4e4dd1fde3a1772737b39b9df86a6e34416b054bbcee6a9d4681d19a5c9ead852ac707659ea13daa1032d802da28df57ad59803c4d5d4366c436a59bf83d9d51f679c979eff7d4e80f6cf3443c5db24a4aa9eaa9155f5deec0ae7ad9f96c6670537",filename:"unknown",mimeType:"image/png"},description:"Connect your Coda doc and Google Drive account.",shortDescription:"File storage",agentShortDescription:"File storage"},slack:{id:a("1000"),name:"Slack",creator:"Slack",icon:"https://codahosted.io/packs/31459/unversioned/assets/LOGO/9940314f2c7e2194b8088615a083eaa127c6c8e574024a4f7b318ffe3dc7eb7d21934ab8dafd02042b6bc256101a30b6911bfa2c38e9318942d110df2375ce1af0023ea45a7eab468d4decd0defe6cb8b9411c2d95f21e5f7579e69f22a49b4c7ef5cd27",logo:{assetId:"9940314f2c7e2194b8088615a083eaa127c6",imageUrl:"https://codahosted.io/packs/31459/unversioned/assets/LOGO/9940314f2c7e2194b8088615a083eaa127c6c8e574024a4f7b318ffe3dc7eb7d21934ab8dafd02042b6bc256101a30b6911bfa2c38e9318942d110df2375ce1af0023ea45a7eab468d4decd0defe6cb8b9411c2d95f21e5f7579e69f22a49b4c7ef5cd27",filename:"unknown",mimeType:"image/png"},description:"Send updates and reminders from your doc.",shortDescription:"Team communication",externalMetadataUrl:"https://example.com/metadata/slack"},figma:{id:a("1010"),name:"Figma",creator:"Figma",icon:"https://codahosted.io/packs/1010/unversioned/assets/LOGO/f31b161b2a200180175ef564231c04c35f85f28c30fe2f08dca5adee2181f55c64e31fa5d839f5d6ab29543a2146fcd8d76401c442dcb231cbbc42442ccfd7f962ec8a60917ece91fe90f774294f79d9c423c4fbc8ab60721ae427ff5bccab15939c2777",logo:{assetId:"f31b161b2a200180175ef564231c04c35f85f28c30",imageUrl:"https://codahosted.io/packs/1010/unversioned/assets/LOGO/f31b161b2a200180175ef564231c04c35f85f28c30fe2f08dca5adee2181f55c64e31fa5d839f5d6ab29543a2146fcd8d76401c442dcb231cbbc42442ccfd7f962ec8a60917ece91fe90f774294f79d9c423c4fbc8ab60721ae427ff5bccab15939c2777",filename:"unknown",mimeType:"image/png"},description:"Share designs in your doc with image previews and more.",shortDescription:"Design sharing",agentShortDescription:"Design sharing"},spotify:{id:a("1018"),name:"Spotify",creator:"Spotify",icon:"https://codahosted.io/packs/1018/unversioned/assets/LOGO/d1fc08ea8e362430fafbc44461a525d9a2a1ee93463dfe25442a6d04f39386402f8fbc09ab1cc6447cd5f9fad449adce42923f6110e7c94021f4afe08858378b3cb0d61c5693fe9f4109e8b331b69a12b857ba44d4fc363ec27f3230d2c4511e9346f03d",logo:{assetId:"d1fc08ea8e362430fafbc44461a525d9",imageUrl:"https://codahosted.io/packs/1018/unversioned/assets/LOGO/d1fc08ea8e362430fafbc44461a525d9a2a1ee93463dfe25442a6d04f39386402f8fbc09ab1cc6447cd5f9fad449adce42923f6110e7c94021f4afe08858378b3cb0d61c5693fe9f4109e8b331b69a12b857ba44d4fc363ec27f3230d2c4511e9346f03d",filename:"unknown",mimeType:"image/png"},description:"Get your top songs and play music from your doc.",shortDescription:"Music streaming",agentShortDescription:"Music streaming"},googleTranslate:{id:a("1063"),name:"Google Translate",creator:"Google",icon:"https://codahosted.io/packs/1063/unversioned/assets/LOGO/5fbff85c069f05a25fbd192cb4ef64daaaaa14a2459357f5c2a5ff166f6aaddaaebc2bcafdad1fc49c065ff000f01cbed4b0e87f77aa15d403f6f6ca03e9e946421c6ed7f0a1da12616e4ccdc321dee92484078a15e1da66e8dea052f657f8b2faf3d218",logo:{assetId:"5fbff85c069f05a25fbd192cb4e",imageUrl:"https://codahosted.io/packs/1063/unversioned/assets/LOGO/5fbff85c069f05a25fbd192cb4ef64daaaaa14a2459357f5c2a5ff166f6aaddaaebc2bcafdad1fc49c065ff000f01cbed4b0e87f77aa15d403f6f6ca03e9e946421c6ed7f0a1da12616e4ccdc321dee92484078a15e1da66e8dea052f657f8b2faf3d218",filename:"unknown",mimeType:"image/png"},description:"Instant translation for over 100 languages.",shortDescription:"Language translation",agentShortDescription:"Language translation"},aiWritingAssistant:{id:a("9001"),name:"AI Writing Assistant",creator:"Grammarly",icon:"https://assets.grammarly.com/icons/v1/ai-studio-icon-lg.svg",logo:{assetId:"testId",imageUrl:"https://example.com/icon.svg",filename:"icon.svg",mimeType:"image/png"},description:"Advanced AI-powered writing assistance and suggestions.",shortDescription:"AI writing help",agentShortDescription:"AI writing help"},grammarChecker:{id:a("9002"),name:"Grammar Checker",creator:"Grammarly",icon:"https://assets.grammarly.com/icons/v1/ai-studio-icon-lg.svg",logo:{assetId:"testId",imageUrl:"https://example.com/icon.svg",filename:"icon.svg",mimeType:"image/png"},description:"Professional grammar and style checking.",shortDescription:"Grammar assistance",agentShortDescription:"Grammar assistance"},grammarlyProofreader:{id:a("43834"),name:"Grammarly Proofreader",creator:"Coda",icon:"https://coda.io/favicon.ico",logo:{assetId:"proofreader-logo",imageUrl:"https://coda.io/favicon.ico",filename:"proofreader.png",mimeType:"image/png"},description:"Proofreading assistance powered by Grammarly.",shortDescription:"Proofreading",certifiedAgent:!0},superhumanGo:{id:a("45121"),name:"Superhuman Go",creator:"Coda",icon:"https://coda.io/favicon.ico",logo:{assetId:"superhuman-go-logo",imageUrl:"https://coda.io/favicon.ico",filename:"superhuman-go.png",mimeType:"image/png"},description:"Superhuman email assistant integration.",shortDescription:"Email assistant",certifiedAgent:!0},weatherPack:{id:a("2001"),name:"Weather Pack",creator:"Coda",icon:"https://coda.io/favicon.ico",logo:{assetId:"weather-logo",imageUrl:"https://coda.io/favicon.ico",filename:"weather.png",mimeType:"image/png"},description:"Get weather information for any location.",shortDescription:"Weather data",certifiedAgent:!1}},I={all:[{...k.googleCalendar,status:h.Uninstalled},{...k.slack,status:h.Uninstalled},{...k.gmail,status:h.Uninstalled},{...k.github,status:h.Uninstalled},{...k.jira,status:h.Uninstalled},{...k.googleDrive,status:h.Uninstalled},{...k.figma,status:h.Uninstalled},{...k.spotify,status:h.Uninstalled},{...k.googleTranslate,status:h.Uninstalled},{...k.aiWritingAssistant,status:h.Uninstalled},{...k.grammarChecker,status:h.Uninstalled},{...k.grammarlyProofreader,status:h.Uninstalled},{...k.superhumanGo,status:h.Uninstalled},{...k.weatherPack,status:h.Uninstalled}],installed:[{...k.googleCalendar,status:h.Installed,hasData:!0},{...k.slack,status:h.Installed,hasData:!0}],uninstalled:[{...k.googleCalendar,status:h.Uninstalled},{...k.slack,status:h.Uninstalled},{...k.gmail,status:h.Uninstalled},{...k.github,status:h.Uninstalled},{...k.jira,status:h.Uninstalled},{...k.googleDrive,status:h.Uninstalled},{...k.figma,status:h.Uninstalled},{...k.spotify,status:h.Uninstalled},{...k.googleTranslate,status:h.Uninstalled},{...k.aiWritingAssistant,status:h.Uninstalled},{...k.grammarChecker,status:h.Uninstalled},{...k.grammarlyProofreader,status:h.Uninstalled},{...k.superhumanGo,status:h.Uninstalled},{...k.weatherPack,status:h.Uninstalled}],byName:{googleCalendar:{...k.googleCalendar,status:h.Installed},slack:{...k.slack,status:h.Installed},gmail:{...k.gmail,status:h.Uninstalled},github:{...k.github,status:h.Uninstalled},jira:{...k.jira,status:h.Uninstalled},googleDrive:{...k.googleDrive,status:h.Uninstalled},figma:{...k.figma,status:h.Uninstalled},spotify:{...k.spotify,status:h.Uninstalled},googleTranslate:{...k.googleTranslate,status:h.Uninstalled},aiWritingAssistant:{...k.aiWritingAssistant,status:h.Uninstalled},grammarChecker:{...k.grammarChecker,status:h.Uninstalled},grammarlyProofreader:{...k.grammarlyProofreader,status:h.Uninstalled},superhumanGo:{...k.superhumanGo,status:h.Uninstalled},weatherPack:{...k.weatherPack,status:h.Uninstalled}}};r.None;r.None,r.None},12838:(e,t,n)=>{n.d(t,{A:()=>g,L:()=>f,S:()=>r,a:()=>d,b:()=>h,c:()=>p,d:()=>b,i:()=>m});var r,i,o,s=n(89662),a=n(70512),c=n(32058);(e=>{e.Initial="Initial",e.Locked="Locked",e.Unlocked="Unlocked"})((i=r||(r={})).Kind||(i.Kind={})),i.initial=function(){return{kind:"Initial"}},i.locked=function(e){return{kind:"Locked",lockedState:e}},i.unlocked=function(e){return{kind:"Unlocked",unlockedState:e}},i.match=function(e){return(0,c.f)(e)},(e=>{(e=>{e.Initial="Initial",e.UphookConfigRequested="UphookConfigRequested",e.UphookConfigResolved="UphookConfigResolved"})(e.Kind||(e.Kind={})),e.initial=function(){return{kind:"Initial"}},e.uphookConfigRequested=function(){return{kind:"UphookConfigRequested"}},e.uphookConfigResolved=function(e){return{kind:"UphookConfigResolved",paywallUphook:e}},e.match=function(e){return(0,c.f)(e)}})(i.Locked||(i.Locked={})),(e=>{(e=>{e.Initial="Initial",e.TextTooShort="TextTooShort",e.Enabled="Enabled"})(e.Kind||(e.Kind={})),e.initial=function(){return{kind:"Initial"}},e.textTooShort=function(){return{kind:"TextTooShort"}},e.enabled=function(e){return{kind:"Enabled",enabledState:e}},e.match=function(e){return(0,c.f)(e)},(e=>{(e=>{e.Initial="Initial",e.ScoresReceived="ScoresReceived"})(e.Kind||(e.Kind={})),e.initial=function(){return{kind:"Initial"}},e.scoresReceived=function(e,t,n,r){return{kind:"ScoresReceived",citedPushedContentItemsIds:e,pushedContentItemIds:t,aiDetectorScorePercent:n,scoresStale:r}},e.match=function(e){return(0,c.f)(e)}})(e.Enabled||(e.Enabled={}))})(i.Unlocked||(i.Unlocked={})),(e=>{e.match=function(e){return(0,c.f)(e)},(e=>{e.match=function(e){return(0,c.f)(e)},(e.Enabled||(e.Enabled={})).match=function(e){return(0,c.f)(e)}})(e.Unlocked||(e.Unlocked={}))})(o||(o={}));const l={encode:function(e){return r.match({Initial:e=>e,Locked:e=>e,Unlocked:e=>({kind:"Unlocked",unlockedState:r.Unlocked.match({Initial:e=>e,TextTooShort:e=>e,Enabled:e=>({kind:"Enabled",enabledState:r.Unlocked.Enabled.match({Initial:e=>e,ScoresReceived:e=>({...e,citedPushedContentItemsIds:Array.from(e.citedPushedContentItemsIds),pushedContentItemIds:Array.from(e.pushedContentItemIds)})})(e.enabledState)})})(e.unlockedState)})})(e)},decode:function(e){return o.match({Initial:e=>e,Locked:e=>e,Unlocked:e=>({kind:"Unlocked",unlockedState:o.Unlocked.match({Initial:e=>e,TextTooShort:e=>e,Enabled:e=>({kind:"Enabled",enabledState:o.Unlocked.Enabled.match({Initial:e=>e,ScoresReceived:e=>({...e,citedPushedContentItemsIds:new Set(e.citedPushedContentItemsIds),pushedContentItemIds:new Set(e.pushedContentItemIds)})})(e.enabledState)})})(e.unlockedState)})})(e)}};const u={events:{"cardAction/:docId":(0,s.d)(),"panelAction/:docId":(0,s.d)()},state:{"panelState/:docId":(0,a.x)({codec:l}),paywallConfig:(0,a.x)()}},d="AI Detector",h="AI Detector",p="AI Detector",g="aiDetector",f=["Analyzing your text","Reviewing writing styles","Checking language patterns","Evaluating text variety","Calculating probability","Generating your report"];function m(e){return null!==e&&e>=100}const b={id:g,protocol:u,integrations:{documentActivate:async e=>{const{activate:t}=await Promise.all([n.e(3806),n.e(6214),n.e(8623),n.e(7156)]).then(n.bind(n,37156));return t(e)},textDecorationsActivate:async e=>{const{activate:t}=await n.e(6351).then(n.bind(n,16351));return t(e)},inlineCardActivate:async e=>{const{activate:t}=await Promise.all([n.e(7297),n.e(9566),n.e(8014)]).then(n.bind(n,8014));return t(e)},assistantActivate:async e=>{const{activate:t}=await Promise.all([n.e(7297),n.e(9566),n.e(9718),n.e(5120),n.e(1601),n.e(3885),n.e(5984),n.e(2999),n.e(8082)]).then(n.bind(n,48082));return t(e)}}}},82550:(e,t,n)=>{n.d(t,{L:()=>m,P:()=>f,S:()=>r,a:()=>h,b:()=>p,c:()=>g,d:()=>y,i:()=>b});var r,i,o,s=n(89662),a=n(70512),c=n(32058),l=n(62709);(e=>{e.Initial="Initial",e.Locked="Locked",e.Unlocked="Unlocked"})((i=r||(r={})).Kind||(i.Kind={})),i.initial=function(){return{kind:"Initial"}},i.locked=function(e){return{kind:"Locked",lockedState:e}},i.unlocked=function(e){return{kind:"Unlocked",unlockedState:e}},i.match=function(e){return(0,c.f)(e)},(e=>{var t;(t=e.Kind||(e.Kind={})).Initial="Initial",t.UphookConfigRequested="UphookConfigRequested",t.UphookConfigResolved="UphookConfigResolved",e.initial=function(){return{kind:"Initial"}},e.uphookConfigRequested=function(){return{kind:"UphookConfigRequested"}},e.uphookConfigResolved=function(e){return{kind:"UphookConfigResolved",paywallUphook:e}},e.match=function(e){return(0,c.f)(e)}})(i.Locked||(i.Locked={})),(e=>{var t;(t=e.Kind||(e.Kind={})).Initial="Initial",t.TextTooShort="TextTooShort",t.Enabled="Enabled",e.initial=function(e){return{kind:"Initial",citationStyle:e}},e.textTooShort=function(e){return{kind:"TextTooShort",citationStyle:e}},e.enabled=function(e,t){return{kind:"Enabled",enabledState:e,citationStyle:t}},e.match=function(e){return(0,c.f)(e)},(e=>{var t;(t=e.Kind||(e.Kind={})).Initial="Initial",t.ScoresReceived="ScoresReceived",e.initial=function(){return{kind:"Initial"}},e.scoresReceived=function(e,t,n,r){return{kind:"ScoresReceived",citedPushedContentItemsIds:e,pushedContentItems:t,originalityScorePercent:n,scoresStale:r}},e.match=function(e){return(0,c.f)(e)}})(e.Enabled||(e.Enabled={}))})(i.Unlocked||(i.Unlocked={})),(e=>{e.match=function(e){return(0,c.f)(e)},(e=>{e.match=function(e){return(0,c.f)(e)},(e=>{e.match=function(e){return(0,c.f)(e)}})(e.Enabled||(e.Enabled={}))})(e.Unlocked||(e.Unlocked={}))})(o||(o={}));const u={encode:function(e){return r.match({Initial:e=>e,Locked:e=>e,Unlocked:e=>({kind:"Unlocked",unlockedState:r.Unlocked.match({Initial:e=>e,TextTooShort:e=>e,Enabled:e=>({kind:"Enabled",citationStyle:e.citationStyle,enabledState:r.Unlocked.Enabled.match({Initial:e=>e,ScoresReceived:e=>({...e,citedPushedContentItemsIds:Array.from(e.citedPushedContentItemsIds)})})(e.enabledState)})})(e.unlockedState)})})(e)},decode:function(e){return o.match({Initial:e=>e,Locked:e=>e,Unlocked:e=>({kind:"Unlocked",unlockedState:o.Unlocked.match({Initial:e=>e,TextTooShort:e=>e,Enabled:e=>({kind:"Enabled",citationStyle:e.citationStyle,enabledState:o.Unlocked.Enabled.match({Initial:e=>e,ScoresReceived:e=>({...e,citedPushedContentItemsIds:new Set(e.citedPushedContentItemsIds)})})(e.enabledState)})})(e.unlockedState)})})(e)}};const d={events:{"cardAction/:docId":(0,s.d)(),"panelAction/:docId":(0,s.d)()},state:{"panelState/:docId":(0,a.x)({codec:u}),paywallConfig:(0,a.x)()}},h="Plagiarism Checker",p="Plagiarism Checker",g="Plagiarism Checker",f="plagiarismChecker",m=["Analyzing your text","Searching through websites","Checking academic publications","Identifying copied text","Generating citations","Preparing your report"];l.aO.APA;function b(e){return null!==e&&e>=100}const y={id:f,protocol:d,integrations:{documentActivate:async e=>{const{activate:t}=await Promise.all([n.e(3806),n.e(6214),n.e(8623),n.e(2790)]).then(n.bind(n,22790));return t(e)},textDecorationsActivate:async e=>{const{activate:t}=await n.e(477).then(n.bind(n,40477));return t(e)},inlineCardActivate:async e=>{const{activate:t}=await Promise.all([n.e(7297),n.e(9566),n.e(2324)]).then(n.bind(n,32324));return t(e)},assistantActivate:async e=>{const{activate:t}=await Promise.all([n.e(7297),n.e(9566),n.e(9718),n.e(5120),n.e(1601),n.e(3885),n.e(5984),n.e(2999),n.e(7937)]).then(n.bind(n,64905));return t(e)}}}},62709:(e,t,n)=>{function r(e){return e&&0!==e.length?e.map(o).filter((e=>null!==e)):[]}function i(e){if(!e)return null;if(/^\d+$/.test(e.trim())){const t=parseInt(e,10);if(!Number.isNaN(t))return{start:t,end:t}}const t=e.match(/(\d+)\s*-\s*(\d+)/);if(!t||!t[1]||!t[2])return null;return{start:parseInt(t[1],10),end:parseInt(t[2],10)}}function o(e){if(""===e.trim())return null;const t=e.trim().split(/\s+/),n=t.pop();if(!n)return null;const r=t.at(0);r&&["Dr.","Mr.","Ms.","Mrs.","Prof."].includes(r)&&t.shift();return{firstName:t.length>0?t.at(0):void 0,lastName:n,middleName:t.length>1?t.slice(1).join(" "):void 0}}function s(e,t){if(!e)return"";if(e.start===e.end)return t.usePagePrefix?`p. ${e.start}`:`${e.start}`;const{start:n,end:r}=e;return t.usePagePrefix?`pp. ${n}-${r}`:`${n}-${r}`}function a(e,t){return e.length===t}function c(e,t){return e.length>=t}function l(e){if(!e)return!1;return/^\d{4}-\d{2}-\d{2}$/.test(e)&&!Number.isNaN(new Date(e).getTime())}function u(e){return`<i>${function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}(e)}</i>`}function d(e){const t=e.trim();return t.startsWith("http://")||t.startsWith("https://")?t:`https://doi.org/${t}`}function h(e){try{const t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch{return!1}}var p;n.d(t,{aO:()=>p}),function(e){e.APA="APA",e.MLA="MLA",e.Chicago="Chicago"}(p||(p={}));p.APA,p.MLA,p.Chicago},6183:(e,t,n)=>{n.d(t,{$I:()=>v,Q1:()=>_,RK:()=>s,RU:()=>p,Wd:()=>h,aR:()=>l,b4:()=>i,bI:()=>m,cV:()=>y,dG:()=>o,kz:()=>b,l0:()=>f,ob:()=>a,sq:()=>c,tg:()=>g,yK:()=>u,zg:()=>d});var r=n(80891);new r.Cc("agent_expert_review_ai_editor_external","enabled"),new r.Cc("expert_review_ai_editor_internal","enabled");const i=new r.Cc("agent_paraphraser_ai_editor_internal","enabled"),o=new r.Cc("agent_paraphraser_ai_editor_external","enabled"),s=new r.Cc("agent_paraphraser_ai_editor_all_underlines","enabled"),a=(new r.Cc("agent_notetaker_ai_editor_internal","enabled"),new r.Cc("agent_notetaker_coauthoring","enabled"),new r.Cc("agent_expert_review_ai_editor_followup_actions","enabled")),c=new r.Cc("agent_expert_review_ai_editor_followup_actions_freeform","enabled"),l=new r.Cc("agent_expert_review_ai_editor_autoscroll","enabled"),u=new r.Cc("agent_expert_review_ai_editor_rebase","enabled"),d=new r.Cc("agent_paraphraser_ai_editor_my_voice","enabled"),h=new r.Cc("agent_paraphraser_ai_editor_focus_cards","enabled"),p=(new r.Cc("humanizer_ai_editor_internal","enabled"),new r.Cc("agent_reader_reactions_ai_editor_internal","enabled")),g=new r.Cc("agent_reader_reactions_ai_editor_external","enabled"),f=new r.Cc("agent_reader_reactions_ai_editor_rebase","enabled"),m=new r.Cc("agent_reader_reactions_ai_editor_custom_audience","enabled"),b=new r.Cc("agent_reader_reactions_ai_editor_remove_custom_audience","enabled"),y=new r.Cc("agent_reader_reactions_extension_text_changed_notification","enabled"),_=(new r.Cc("proofreader_rebase_counters","enabled"),new r.Cc("citations_rollout","enabled"),new r.Cc("citations_rollout_internal","enabled"),new r.Cc("proofreader_trusted_rewrite","enabled"),new r.Cc("ai_editor_chat_agent_chat_suggestion_summary","enabled"),new r.Cc("paraphraser_agent_ai_chat","enabled")),v=new r.Cc("humanizer_agent_ai_chat","enabled");new r.Cc("ai_editor_proofreader_widget","enabled"),new r.Cc("ai_editor_authorship_agent","enabled"),new r.Cc("citation_finder_ui_v2","enabled")},60595:(e,t,n)=>{n.d(t,{z:()=>r});class r{capacity;size=0;_keymap={};_head;_tail;constructor(e){this.capacity=e}put(e,t){const n={key:e,value:t};if(this._keymap[e]=n,this._tail?(this._tail.newer=n,n.older=this._tail):this._head=n,this._tail=n,this.size===this.capacity)return this.shift()?.value;++this.size}get(e){const t=this._getImpl(e);return t&&t.value}peek(e){return this._keymap[e]?.value}set(e,t){const n=this._getImpl(e),r=t(n&&n.value);return null!=r?n?n.value=r:this.put(e,r):n&&this.remove(e),r}getRef(e){return this._getImpl(e)}remove(e){const t=this._keymap[e];if(null!=t)return delete this._keymap[e],t.newer&&t.older?(t.older.newer=t.newer,t.newer.older=t.older):t.newer?(t.newer.older=void 0,this._head=t.newer):t.older?(t.older.newer=void 0,this._tail=t.older):this._head=this._tail=void 0,--this.size,t.value}forEach(e){for(const t in this._keymap)e(t,this._keymap[t].value)}shift(){const e=this._head;return this._head&&(this._head.newer?(this._head=this._head.newer,this._head.older=void 0):this._head=void 0,e.newer=e.older=void 0,delete this._keymap[e.key]),e}_getImpl(e){const t=this._keymap[e];if(null!=t)return t===this._tail||(t.newer&&(t===this._head&&(this._head=t.newer),t.newer.older=t.older),t.older&&(t.older.newer=t.newer),t.newer=void 0,t.older=this._tail,this._tail&&(this._tail.newer=t),this._tail=t),t}}},39104:(e,t,n)=>{n.d(t,{As:()=>m,CI:()=>p,C_:()=>c,Dw:()=>u,HP:()=>h,Kg:()=>a,Sm:()=>i,TN:()=>l,W9:()=>s,WA:()=>g,ff:()=>o,gw:()=>d,iR:()=>b});var r=n(60595);function i(e,t){return e+t}function o(e){return t=>!e(t)}function s(...e){return t=>e.every((e=>e(t)))}function a(...e){return t=>e.some((e=>e(t)))}function c(e){return null!=e}function l(e){return Math.trunc(Math.random()*e)}function u({length:e}){return e>0}const d=e=>new Promise((t=>setTimeout(t,e)));function h(e,t){const n=new r.z(50);return{[e.name]:function(...r){const i=t?t.apply(this,r):r[0],o=n.get(i);if(!o){const t=e.apply(this,r);return n.put(i,t),t}return o}}[e.name]}function p(e,t){return Object.values(e).indexOf(t)>-1}function g(e){return f(e,e.length-1,[])}function f(e,t,n){return function(r){const i=n.concat([r]);return 0===t?e.apply(this,i):f(e,t-1,i)}}function m(e,t){return e.size===t.size&&Array.from(e.values()).every((e=>t.has(e)))}function b(e,t){const n=self;n.ddebug=n.ddebug??{},n.ddebug[e]=t}},32058:(e,t,n)=>{function r(e){return t=>(e[t.kind]??e._??(()=>{throw new Error("No matching handler found")}))(t)}n.d(t,{f:()=>r})},56:(e,t,n)=>{function r(e,t,n,r,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var s=e.apply(t,n);function a(e){r(s,i,o,a,c,"next",e)}function c(e){r(s,i,o,a,c,"throw",e)}a(void 0)}))}}n.d(t,{_:()=>i})},12533:(e,t,n)=>{function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{_:()=>r})},37159:(e,t,n)=>{n.d(t,{_:()=>i});var r=n(12533);function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){(0,r._)(e,t,n[t])}))}return e}},96705:(e,t,n)=>{function r(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}n.d(t,{_:()=>r})},15488:(e,t,n)=>{function r(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}n.d(t,{_:()=>r})},5972:(e,t,n)=>{n.d(t,{CR:()=>c,FC:()=>d,Jh:()=>s,KL:()=>h,XA:()=>a,ZT:()=>i,ev:()=>l,mG:()=>o,qq:()=>u});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function o(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}function s(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}Object.create;function a(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function u(e){return this instanceof u?(this.v=e,this):new u(e)}function d(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",(function(e){return function(t){return Promise.resolve(t).then(e,l)}})),r[Symbol.asyncIterator]=function(){return this},r;function s(e,t){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||a(e,t)}))},t&&(r[e]=t(r[e])))}function a(e,t){try{(n=i[e](t)).value instanceof u?Promise.resolve(n.value.v).then(c,l):d(o[0][2],n)}catch(e){d(o[0][3],e)}var n}function c(e){a("next",e)}function l(e){a("throw",e)}function d(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function h(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=a(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}}Object.create;"function"==typeof SuppressedError&&SuppressedError},79725:e=>{e.exports=JSON.parse("[2251064457,3118220208,278275686,3090683415,905456685,2310920097,3330381119,3097628854,2308584772,3912254192,2483992340,416917248,1896346675,929871873,1187643106,2103767433,2058831064,3373558001,703636511,343995468,1010052510,1823949618,3947185191,3966215288,1730424479,2912293238,562834879,839605109,3025805418,1296250777,2083606769,163376123,2363750571,1871737962,1556536323,3408708016,3559193341,894124460,532455577,3998203489,1031413360,799811613,3527291262,3513532005,3913701395,1873603089,2660396197,2322803227,1676176892,207966906,2661732686,3689788648,4266069159,3983521473,1265151986,3749385009,1873934942,1681602228,2736153366,4096452182,4247002517,2538464459,1765211386,898293017,397097947,3656112413,1466513829,3931674349,3493256341,1282593880,3095174478,3903214402,2689618724,3015464148,1826016605,3284070612,2053987556,2450374867,3707046206,890046839,3284588936,3857535654,4221722746,529391673,3272724661,804976862,3345087953,1549522272,2338076792,766276857,174737586,2096505667,191614516,2830613580,684884595,3607135031,1914290176,2393897752,3067686766,4147490267,4272733719,2563619494,2948822396,4225473885,2551101731,799443219,4187872483,3499117970,3778319193,1448407968,4130920043,1944987688,2865808453,1957780273,340954337,242259771,3805736558,3658897877,1909302186,3591602308,1637363907,3130812252,2486490812,1796610026,2552435615,1945623303,1875347320,3425823966,360672114,212167992,80775505,2119009123,3156817692,132986733,1833424723,557261538,452689623,1219497744,13556891,2662594640,838834997,1602233473,4137498289,223927232,3791149768,2552045946,678007340,2776928972,345726151,1648163252,1294070134,2294851597,1071376249,2028147500,1005838435,1209553413,76612170,3385001389,3233380214,1739377735,2578748097,3667706277,902445454,1006891526,673284699,3959920881,3960352812,3292677496,2309349975,284439265,1104194375,805395457,3391881833,1130081112,1359963850,2231979281,3966646316,889024210,846107947,1219673616,503296504,1260748031,1425014518,1462348237,1025684407,3651973468,2985226830,3372625585,258865120,2976652179,1008531582,501854682,2447247149,2911647334,2311405959,2186467750,4213448953,384168571,1877650602,1794786568,2313621412,1960006675,2587948746,3174174808,1412251475,1093935290,672176162,4234997300,95938636,3234678270,3945361858,3354593631,3362024858,1472065429,3248602923,2767923591,4220064987,3894698296,342206828,865752843,2893615459,2145637021,214514129,3543611435,3110526918,755469224,3740828246,1695181210,276828892,1476823260,2732103229,2481209,3874518728,14575651,965687018,2056486797,148005372,1369111912,1861710179,1740035256,1708140719,3329459055,1867468569,1608029561,2043845922,3718567589,3882559515,4055359143,4042113652,1012065222,3824106476,3315801748,3203149541,1023371483,3430664213,879418969,3580479964,2789986061,924629955,165234826,600285273,503265969,1118766568,2191948940,3415855678,3758269509,1496509068,2186956387,3298874535,156194955,3483927899,2235841708,1904488192,2267441237,3558564636,3195240429,1856875595,1733759051,85994078,1029099059,973687939,4066625576,592590166,3878965635,3676419121,2143576132,3151795819,1079852832,3288061204,1459242107,225006861,862823061,291244672,3707673517,4154751356,2775121900,3876255281,2510498817,1757722687,108899836,1936389419,2847418692,3175677892,3106493935,859426300,1505573066,664280875,3688779594,3906582956,1458548809,557992898,2904029345,2905974802,2726290464,2655639003,1756375409,2964088087,939919230,2080546677,2771045810,4207028118,381393509,1396716644,911671464,3780281787,1536885439,428161064,2582108258,3884024875,1928844928,3801625367,1620616736,1310742121,3507146311,1580291813,3662522752,135370638,3908286490,580604723,140316199,2059585038,2390127212,2121477891,2866824501,62411672,3899908767,559934189,1537590325,2335278726,434926222,1316999686,2175590101,2813612273,3003020452,869418667,259349665,1389824194,3106668750,200305651,3942474928,4136216159,2045238794,2010790288,1005830215,4059333087,3901225598,1102210225,1772159252,2421291428,687944148,3815853895,2989483291,3281091160,1336752953,3673228397,1730660024,3826131292,958302489,528949865,4043279741,969235410,244698726,282625897,2760926873,3489280082,200291201,3103388925,745230889,1212027532,741580288,685705993,946005067,636420672,3030603238,3518654880,534128270,1571959996,3349987446,4217724885,3667056760,3683581971,2065952611,1622073274,2374127372,1517935146,3068174700,2369557332,3208811391,3885677276,3506190522,2634772791,3696485360,1357547277,894181101,1491717174,73827754,647710532,576381638,3294471633,377760942,3592978847,1576831689,2455414808,2092359376,1296896916,2128348327,2152415190,26728999,3113528553,2723887369,631041103,2746129298,3370161792,1048418343,270944152,2683636868,2063695699,3239641310,339340243,2543782224,3864313925,1295957682,1600610883,3870215170,2173776566,1592336849,894503765,3958588583,3076410110,663195141,3643882280,1784493558,4002325681,3352946013,2700363738,2600206339,462315355,3044959912,2898887625,3304499152,4092722543,808273888,3237971470,1891907286,2648765977,3907414102,742609966,197020256,439795325,1968123942,1290031757,740722480,2953339612,4014342747,1609139659,2258681200,1603958576,2906201078,1760795944,224242495,469330333,3675329179,204535911,3106005327,3644297507,2686365300,189914621,1852197589,2717828310,1802587701,3013948523,2283343851,1572692863,3114688935,2507098381,315587063,2480206647,2488698676,3302685928,474847534,412245617,4071595839,309051836,216207481,4230033442,1004275350,3749482875,2419481563,3089794483,1247812325,42084117,3911349018,20992439,1989710075,1422591602,681051115,3679120640,1681543218,3441584215,4113953451,4083259632,2016649819,1547318118,2409110956,349777427,2618088136,968114467,1890293740,2387560779,3026578767,2563260596,3835607814,656394824,1072368372,2787791597,785585596,1032318337,357975910,1393302245,3712844345,3595290492,2573233681,311473926,263185014,2208229541,2346416602,2340838906,1473646497,3931959633,3296083496,1522904725,143209548,88003307,3214953702,3872066651,4165110993,3778214858,1409488596,2140503837,3392407399,2539335593,619944242,3832274817,2517805736,1429813966,231652690,2475931266,3286886147,2482935561,116273170,3837649865,1616391967,3116968487,744594889,2518103421,3886071743,983523067,2606380682,1586421245,2916910364,1404402661,2545427306,8417147,1348762232,2978850367,809293251,1245258639,3493557790,2817011481,937585054,1738938031,3155224548,576487181,1956331267,4181269715,1567536369,3936337866,3126417745,2774921418,214298747,3892793459,3250198191,3261109662,3281607623,1017266646,2447015658,3715431259,1841223462,3333798698,2909106762,2971433482,2116121338,2505497751,3783772893,1462105691,1718891619,2225518404,2579290559,2880831565,3580617867,3183396262,2784111558,1325939173,3306123235,3221463076,2220058748,3114924310,3987015574,1302720316,1940982804,3248574801,3972127405,2244951317,482070224,3461983859,2577468877,744725115,59199710,2512569620,3405662074,765524487,573067262,3102110985,2137791632,2311838362,1691770393,3581748859,2509797228,1493121215,114699699,4209681878,1962098231,3518225767,30921067,1825657611,98962311,412515479,1913342126,681921437,3748531642,2524685203,1159812721,2676837823,2451986219,79741960,3653461972,3907276550,1490645280,3057510731,2205232614,2973200601,719382666,2773626967,1260976220,4105994425,3737559287,262586360,1354397770,1465669512,1758677935,3109742751,3552675455,281470602,711831493,1373677611,2052750401,966670169,166755255,304425183,3915668488,3228142011,3224506144,2715768712,14031884,810787742,3372860278,741042644,2244878831,1823509232,1598032973,3936063618,1465440780,1726353467,2343688371,1118140888,3687861995,2406077730,3939523270,2985597218,2386611223,678978744,1445914370,1453344377,2551807532,1778038816,1063102033,1708115355,3808075629,3920205508,91441038,2147909445,1577551933,1492658814,4230548332,5501051,3960281776,557357784,2592175906,1714342254,559574340,2413323499,1990277657,2736080221,3365966904,1321568359,3112369579,4266289134,3022799376,65977483,3848272111,1624614839,1166339994,2907787198,4133929452,1988710738,2433017156,3651158525,25831778,2372282523,1441691394,2491710213,3438606100,3034264854,262618193,2771300647,1876818271,1222453349,27807141,415580426,2409696419,1720411956,1641878379,3809704955,3709722719,2007427436,3375550159,3310183664,1993676089,2603178351,2952172330,3432038873,4251476405,1290511184,3234465958,1578658826,522122898,4206521550,1790627879,1015758506,3622525855,2662642056,1758086791,1343101803,3267056736,2131636501,4035485989,3550530431,3232905925,2506134717,3963798010,1317717424,3275051696,813701398,3243091194,3629652560,2925457957,2684222346,1482962327,4248470929,3339044265,3533549558,1421844460,269019926,853757630,4258414207,3099143261,512735608,2719005287,3174105482,1004984929,2626011231,1281255467,2274075766,3612623988,588917966,3326492896,12171607,989259655,4053544941,1010849171,3798462690,3605383101,1238347983,2514120590,1691069949,2418918301,1404779109,1541166050,684657124,3444388194,3360152208,3811046258,4259345325,163674875,2884011027,31549578,211123197,1608076182,1685354961,1617008352,113566858,4202791868,3109844802,2141244314,1633240739,3760903334,1034609867,3014228258,1624621662,1954320376,2017951262,1357311377,1976563872,568209026,3426285991,2425886264,236001223,951233820,3082799501,736127653,3131776060,1219788734,2263825260,608575009,1653684167,2085500040,4048355029,3420257497,1278273470,3236253535,2946899633,675194674,3969189679,1445072044,4078409929,1253840107,315393377,809806178,4293946924,1374857498,255601716,2859497776,2007500875,4291917221,1114432098,2001438156,676677595,2492445731,3347777457,2995452019,467746017,3772802863,4158923587,1249843307,936994131,3880648938,2999200308,3961349606,4273326207,1371725815,1881227469,3345343033,3738727678,4177980119,1850736771,1706102053,784094996,2599080930,3268563060,3016630298,1453340862,3112177204,3617256962,2987768081,238781305,4170492780,161614979,2761906214,1433682754,3927744280,4088234493,177246156,559537375,1351203752,960755702,1489875439,2458813982,2328154487,1273965332,2411228054,1505011513,2851374031,860044735,1641836890,4268707783,108638515,3414734344,1587487237,4286034435,1615716933,1069136845,2849268238,4175236679,1889306571,1645793230,1089322760,122268233,2586929256,3705180867,1319625245,1498250624,4219115023,684503549,2156892780,282627054,2508298059,1978751782,6609437,1563947406,640848056,2767558570,797150246,2206276016,3099154974,4190695800,389522095,1813539004,2653140278,349809913,1881132563,792050273,318443299,686944659,1778783148,2787511162,3173092289,2321886208,1568283700,4191729161,1964034873,2011650737,1736218274,1358906708,1535434599,1756696677,1031004932,1486244036,3921573297,1019278659,1774572620,3771565082,113562916,2823367005,1380295492,2167756929,361382345,393934141,2229542276,586931735,1189797108,3245101360,3511604941,2325908096,3066843625,1128923011,3021401983,535372946,240065934,3801548290,3455779302,1647631867,3070451990,170655054,813572102,4095809578,1075248046,2750634614,261179704,1770084144,4114467561,3365012356,3084272217,108857888,4235007670,2227894503,2854301457,3526688153,2506312380,2292704754,2054584292,2780644070,81537916,827976781,842934951,3081492110,84071220,795745439,4183808264,4286832041,2313852871,967831573,2559814789,1606996402,2703314973,4088454477,3184578740,485336351,1846159738,805757779,151147453,1425913323,3829073316,2690960832,3629149524,58746890,228531566,1297901435,2374963563,1361796793,3163390720,1674327629,2921374726,3609290269,3281050831,2302721071,303689997,494015748,2894697035,2873821537,1216943164,1381803597,688675761,2139926406,1712496663,3135518402,2718953046,1199207547,3884578488,896212055,2177884128,1805974976,2881471054,1455349344,3416833812,631593231,3023374506,274398612,249835108,1677962214,3749128582,776887517,1143467727,824920731,2874196266,4098606110,2624306035,1848886795,4148816342,554140889,3937734597,556695005,496504430,632192512,2196997047,1166649008,2754810338,1681348146,1827399223,83765391,783008847,1966321320,2167318652,3074675677,2152850402,1365888683,775238069,1397684758,3256687677,983975253,2394258698,3895811867,547225099,1444085701,594689189,3639838101,1265899990,22933195,3607733559,3828412682,2264127639,346073215,3244250367,3845392768,110298822,3063815956,2031193464,1023628604,731295137,557481704,3151108203,349983179,141913790,2257946044,2321166183,1588940722,165754167,979726348,2108362245,3928599912,744968081,1208240573,4026225054,2596794077,3603021491,3041297610,3675514136,4293933292,182716558,257054,779461058,2006379841,1958151253,2765094541,2306362253,1631774289,1100296472,3440731724,2874826789,2677854644,2446619902,1157075103,3403248847,1469142266,205403771,3804774815,1153883227,3991697213,655470227,694651923,4051272619,400982564,2240626413,3269680442,65912911,851664695,2191463667,2459880147,1917759217,3680322366,1137498400,3091011943,2494254715,3219400818,959051769,2177629313,3572891393,868818574,3661501402,2617881579,238501590,750745377,2980432668,812259875,372787971,3363501172,1728269273,2469491077,1230410539,2426274431,1576258760,2509821936,1336596547,2970847877,1494639352,681218243,2016288594,579929070,1535663440,3713452659,1406869289,3035782193,2465408650,3363890341,470871107,2030704068,2873708143,3407585898,713515328,1021139111,1349500125,1543896292,568102834,1774692555,2486100794,3887493749,3754725158,4037377376,675902790,530657241,1562358975,1745946332,3223324522,1811750232,1541207908,1209784008,749227718,3838788285,1423570347,2163894912,4035765637,4010989960,3914839032,2284677806,1337078053,1038877153,2934115709,470706886,2371240717,2463187489,4195133416,3788233205,772868014,1701762694,3363151995,1855123698,2960324784,661972087,188442311,2394952008,1731885470,1920159460,3368316357,1322661093,1541973219,4066425638,283783774,890438960,2844616178,238335470,135625084,562299890,3711109850,2031230638,3420944422,102634947,1522197631,3644482095,864281713,2872188114,3099146600,18520727,1773883794,3352937947,1263644104,4180989657,3835475410,1386650696,1902977490,4258294164,4017117091,2166444432,578933024,491360817,3264764131,2533711273,3692164794,252906624,2577834612,466824993,2716111375,3547781246,1368706800,3846211123,4057392784,1617756693,692338311,394026898,73614668,2328022757,3071108854,2475025274,201991499,4123941246,3898560232,1334797482,3312648801,2697701978,4013849358,1020816857,1439690502,987473996,403316552,3352912309,1103067737,763574313,2980938321,1884042052,4212062396,979910780,302576724,3634974123,585428581,3518930853,779269217,720498841,2678086269,137119754,1659867459,4216489644,3133721984,1641486434,3500941828,3196469219,4061859567,812273371,3128931514,2992073521,4221555299,432253963,274180084,3155116065,1000931988,1028367861,2323195334,1802420713,1803731488,432362567,1420568092,807730901,3056001012,3568652180,2435841895,2293727575,3531670712,3810842112,4255256964,1935427944,456135544,871746367,3615958592,3217841581,3919430554,2732728106,1230009298,545429124,2277730654,1568714790,2144001849,3598991299,3880074583,2039720674,3152332955,3992055441,3520659471,3136343941,4206908460,260855197,3507060693,2556890905,735483492,158823025,2562143736,3423123858,2567962409,3309158095,2505991630,284092647,2615209188,538460444,1273762757,2390249616,1417704067,437011844,114661420,3536495071,398308658,393257183,3484112553,2194690178,4203476621,3652579173,1943483499,1462470033,827651953,3831188061,3981877130,3242879383,1746701345,1832688742,3385414100,2222726436,1709399028,342749212,3446603322,4096833614,3338611894,2286618714,551938173,3585721998,263504249,3543266859,3146146723,4157303667,1327362403,1955360934,322379478,1384697988,511728707,1582097874,2141381852,121190325,3122302148,4172935604,1734982767,2445602594,1337169148,3797276992,3263606986,3943411918,3876738710,1521002197,31338184,43280775,2082071866,1969156398]")},93281:e=>{e.exports=JSON.parse('{"american":[["ambercoloured","ambercolored"],["antiarmour","antiarmor"],["anticolour","anticolor"],["anticolours","anticolors"],["antitumour","antitumor"],["apricotcoloured","apricotcolored"],["arbour","arbor"],["arbours","arbors"],["ardour","ardor"],["ardours","ardors"],["armour","armor"],["armoured","armored"],["armourer","armorer"],["armourers","armorers"],["armouries","armories"],["armouring","armoring"],["armours","armors"],["armoury","armory"],["ashcoloured","ashcolored"],["aurora-coloured","aurora-colored"],["behaviour","behavior"],["behavioural","behavioral"],["behaviourism","behaviorism"],["behaviourisms","behaviorisms"],["behaviourist","behaviorist"],["behaviourists","behaviorists"],["behaviours","behaviors"],["belabour","belabor"],["belaboured","belabored"],["belabouring","belaboring"],["belabours","belabors"],["bicolour","bicolor"],["bicolouration","bicoloration"],["bicoloured","bicolored"],["bodycolour","bodycolor"],["brasscoloured","brasscolored"],["brickcoloured","brickcolored"],["brightly-coloured","brightly-colored"],["buff-coloured","buff-colored"],["burgundycoloured","burgundycolored"],["candour","candor"],["cherrycoloured","cherrycolored"],["chestnut-coloured","chestnut-colored"],["chocolate-coloured","chocolate-colored"],["cinnamon-coloured","cinnamon-colored"],["citroncoloured","citroncolored"],["clamour","clamor"],["clamoured","clamored"],["clamouring","clamoring"],["clamourings","clamorings"],["clamours","clamors"],["clangour","clangor"],["clangours","clangors"],["claretcoloured","claretcolored"],["colour","color"],["colour-blind","color-blind"],["colour-blindness","color-blindness"],["colour-coordinate","color-coordinate"],["colour-coordinated","color-coordinated"],["colourability","colorability"],["colourable","colorable"],["colourably","colorably"],["colourant","colorant"],["colourants","colorants"],["colouration","coloration"],["colourational","colorational"],["colourations","colorations"],["colourative","colorative"],["colourbearer","colorbearer"],["colourblind","colorblind"],["colourblindness","colorblindness"],["colourcast","colorcast"],["colourcaster","colorcaster"],["coloured","colored"],["coloureds","coloreds"],["colourer","colorer"],["colourers","colorers"],["colourfast","colorfast"],["colourfastness","colorfastness"],["colourful","colorful"],["colourfully","colorfully"],["colourfulness","colorfulness"],["colourific","colorific"],["colourimeter","colorimeter"],["colourimeters","colorimeters"],["colourimetric","colorimetric"],["colourimetrical","colorimetrical"],["colourimetrically","colorimetrically"],["colourimetry","colorimetry"],["colourin\'","colorin\'"],["colouring","coloring"],["colourings","colorings"],["colourisation","colorisation"],["colourise","colorise"],["colourism","colorism"],["colourisms","colorisms"],["colourist","colorist"],["colouristic","coloristic"],["colouristically","coloristically"],["colourists","colorists"],["colourization","colorization"],["colourizations","colorizations"],["colourize","colorize"],["colourized","colorized"],["colourizer","colorizer"],["colourizes","colorizes"],["colourizin\'","colorizin\'"],["colourizing","colorizing"],["colourless","colorless"],["colourlessly","colorlessly"],["colourlessness","colorlessness"],["colourmaker","colormaker"],["colourmakers","colormakers"],["colourmap","colormap"],["colourmaps","colormaps"],["colourmen","colormen"],["colourous","colorous"],["colourphobia","colorphobia"],["colourpoint","colorpoint"],["colourpoints","colorpoints"],["colourpuncture","colorpuncture"],["colours","colors"],["colourspace","colorspace"],["colourtype","colortype"],["colourway","colorway"],["colourways","colorways"],["colourwise","colorwise"],["colourwork","colorwork"],["concolourous","concolorous"],["coulter","colter"],["coulters","colters"],["dark-coloured","dark-colored"],["decolour","decolor"],["decolouration","decoloration"],["decolourations","decolorations"],["decoloured","decolored"],["decolouring","decoloring"],["decolourisation","decolorisation"],["decolourisations","decolorisations"],["decolourise","decolorise"],["decolourised","decolorised"],["decolouriser","decoloriser"],["decolourises","decolorises"],["decolourising","decolorising"],["decolourization","decolorization"],["decolourize","decolorize"],["decolourized","decolorized"],["decolourizer","decolorizer"],["decolours","decolors"],["demeanour","demeanor"],["demeanours","demeanors"],["discolour","discolor"],["discolouration","discoloration"],["discolourations","discolorations"],["discoloured","discolored"],["discolourer","discolorer"],["discolouring","discoloring"],["discolourings","discolorings"],["discolourisation","discolorisation"],["discolourise","discolorise"],["discolourization","discolorization"],["discolourment","discolorment"],["discolourous","discolorous"],["discolours","discolors"],["disfavour","disfavor"],["disfavours","disfavors"],["dishonour","dishonor"],["dishonourable","dishonorable"],["dishonourably","dishonorably"],["dishonoured","dishonored"],["dishonouring","dishonoring"],["dishonours","dishonors"],["dolour","dolor"],["dolours","dolors"],["dun-coloured","dun-colored"],["dusky-coloured","dusky-colored"],["dustcoloured","dustcolored"],["enamour","enamor"],["enamoured","enamored"],["enamouring","enamoring"],["enamours","enamors"],["endeavour","endeavor"],["endeavoured","endeavored"],["endeavouring","endeavoring"],["endeavours","endeavors"],["favour","favor"],["favourable","favorable"],["favourably","favorably"],["favoured","favored"],["favouring","favoring"],["favourite","favorite"],["favourited","favorited"],["favourites","favorites"],["favouriting","favoriting"],["favouritism","favoritism"],["favours","favors"],["fawn-coloured","fawn-colored"],["fawncoloured","fawncolored"],["fervour","fervor"],["fervours","fervors"],["flame-coloured","flame-colored"],["flavour","flavor"],["flavoured","flavored"],["flavouring","flavoring"],["flavourings","flavorings"],["flavourless","flavorless"],["flavours","flavors"],["flavoursome","flavorsome"],["flesh-coloured","flesh-colored"],["fleshcoloured","fleshcolored"],["forecolour","forecolor"],["forecolours","forecolors"],["garnet-coloured","garnet-colored"],["gold-coloured","gold-colored"],["governours","governors"],["handcolour","handcolor"],["harbour","harbor"],["harboured","harbored"],["harbouring","harboring"],["harbours","harbors"],["heritours","heritors"],["honey-coloured","honey-colored"],["honour","honor"],["honourable","honorable"],["honourably","honorably"],["honoured","honored"],["honouring","honoring"],["honours","honors"],["horrour","horror"],["humour","humor"],["humoured","humored"],["humouring","humoring"],["humourless","humorless"],["humours","humors"],["labour","labor"],["laboured","labored"],["labourer","laborer"],["labourers","laborers"],["labouring","laboring"],["labours","labors"],["languour","languor"],["languours","languors"],["lead-coloured","lead-colored"],["malodour","malodor"],["metal-coloured","metal-colored"],["metallic-coloured","metallic-colored"],["mirrours","mirrors"],["misbehaviour","misbehavior"],["misbehaviours","misbehaviors"],["miscolour","miscolor"],["miscolouration","miscoloration"],["miscoloured","miscolored"],["miscolouring","miscoloring"],["miscolours","miscolors"],["misdemeanour","misdemeanor"],["misdemeanours","misdemeanors"],["monocoloured","monocolored"],["mould","mold"],["moulded","molded"],["moulder","molder"],["mouldered","moldered"],["mouldering","moldering"],["moulders","molders"],["mouldier","moldier"],["mouldiest","moldiest"],["moulding","molding"],["mouldings","moldings"],["moulds","molds"],["mouldy","moldy"],["moult","molt"],["moulted","molted"],["moulting","molting"],["moults","molts"],["multi-colour","multi-color"],["multi-coloured","multi-colored"],["multicolour","multicolor"],["multicoloured","multicolored"],["multicolours","multicolors"],["neighbour","neighbor"],["neighbourhood","neighborhood"],["neighbourhoods","neighborhoods"],["neighbouring","neighboring"],["neighbourliness","neighborliness"],["neighbourly","neighborly"],["neighbours","neighbors"],["neutral-coloured","neutral-colored"],["odour","odor"],["odourless","odorless"],["odours","odors"],["off-colour","off-color"],["olive-coloured","olive-colored"],["orange-coloured","orange-colored"],["overcolour","overcolor"],["overcoloured","overcolored"],["parlour","parlor"],["parlourmaid","parlormaid"],["parlourmaids","parlormaids"],["parlours","parlors"],["particoloured","particolored"],["peachy-coloured","peachy-colored"],["pernickety","persnickety"],["pretour","pretor"],["pretours","pretors"],["pseudocolour","pseudocolor"],["pseudocoloured","pseudocolored"],["pseudocolouring","pseudocoloring"],["pseudocolours","pseudocolors"],["pseudotumour","pseudotumor"],["pseudotumours","pseudotumors"],["rancour","rancor"],["recolour","recolor"],["recolourable","recolorable"],["recolouration","recoloration"],["recolourations","recolorations"],["recoloured","recolored"],["recolourin\'","recolorin\'"],["recolouring","recoloring"],["recolours","recolors"],["remould","remold"],["remoulded","remolded"],["remoulding","remolding"],["remoulds","remolds"],["rigour","rigor"],["rigours","rigors"],["rose-coloured","rose-colored"],["rumour","rumor"],["rumoured","rumored"],["rumouring","rumoring"],["rumourmonger","rumormonger"],["rumourmongers","rumormongers"],["rumours","rumors"],["saviour","savior"],["saviours","saviors"],["savour","savor"],["savoured","savored"],["savouries","savories"],["savouring","savoring"],["savours","savors"],["savoury","savory"],["self-coloured","self-colored"],["smoulder","smolder"],["smouldered","smoldered"],["smouldering","smoldering"],["smoulders","smolders"],["snuff-colour","snuff-color"],["solid-coloured","solid-colored"],["splendour","splendor"],["splendours","splendors"],["straw-coloured","straw-colored"],["succour","succor"],["succoured","succored"],["succouring","succoring"],["succours","succors"],["tabour","tabor"],["tabours","tabors"],["tawny-coloured","tawny-colored"],["technicolour","technicolor"],["technicoloured","technicolored"],["topcolour","topcolor"],["torpour","torpor"],["tricolour","tricolor"],["tricoloured","tricolored"],["tricolourous","tricolorous"],["tricolours","tricolors"],["tumour","tumor"],["tumours","tumors"],["uncolourable","uncolorable"],["uncoloured","uncolored"],["uncolourful","uncolorful"],["unfavourable","unfavorable"],["unfavourably","unfavorably"],["unicolour","unicolor"],["unicolourous","unicolorous"],["unsavoury","unsavory"],["valour","valor"],["vapour","vapor"],["vapoured","vapored"],["vapouring","vaporing"],["vapours","vapors"],["varicoloured","varicolored"],["vavasour","vavasor"],["vavasours","vavasors"],["versicolour","versicolor"],["versicoloured","versicolored"],["vigour","vigor"],["violet-coloured","violet-colored"],["water-colour","water-color"],["watercolour","watercolor"],["watercoloured","watercolored"],["watercolourist","watercolorist"],["watercolourists","watercolorists"],["watercolours","watercolors"],["wine-coloured","wine-colored"],["accoutrement","accouterment"],["accoutrements","accouterments"],["amphitheatre","amphitheater"],["amphitheatres","amphitheaters"],["calibre","caliber"],["calibres","calibers"],["centilitre","centiliter"],["centilitres","centiliters"],["centimetre","centimeter"],["centimetres","centimeters"],["centre","center"],["centreboard","centerboard"],["centrefold","centerfold"],["centrefolds","centerfolds"],["centrepiece","centerpiece"],["centrepieces","centerpieces"],["centres","centers"],["epicentre","epicenter"],["epicentres","epicenters"],["fibre","fiber"],["fibreglass","fiberglass"],["fibres","fibers"],["goitre","goiter"],["goitres","goiters"],["kilometre","kilometer"],["kilometres","kilometers"],["lacklustre","lackluster"],["litre","liter"],["litres","liters"],["louvre","louver"],["louvres","louvers"],["lustre","luster"],["lustres","lusters"],["meagre","meager"],["metacentre","metacenter"],["metacentres","metacenters"],["metre","meter"],["metres","meters"],["micrometre","micrometer"],["micrometres","micrometers"],["millilitre","milliliter"],["millilitres","milliliters"],["millimetre","millimeter"],["millimetres","millimeters"],["mitre","miter"],["mitres","miters"],["nitre","niter"],["philtre","philter"],["philtres","philters"],["reconnoitre","reconnoiter"],["reconnoitres","reconnoiters"],["sabre","saber"],["sabres","sabers"],["saltpetre","saltpeter"],["sceptre","scepter"],["sceptres","scepters"],["sepulchre","sepulcher"],["sepulchres","sepulchers"],["sombre","somber"],["spectre","specter"],["spectres","specters"],["theatregoer","theatergoer"],["theatregoers","theatergoers"],["titre","titer"],["titres","titers"],["abetalipoproteinaemia","abetalipoproteinemia"],["aeon","eon"],["aeons","eons"],["aetiology","etiology"],["agammaglobulinaemia","agammaglobulinemia"],["albuminaemia","albuminemia"],["alcoholaemia","alcoholemia"],["anaemia","anemia"],["anaemias","anemias"],["anaemic","anemic"],["anaesthesia","anesthesia"],["anaesthesias","anesthesias"],["anaesthetic","anesthetic"],["anaesthetics","anesthetics"],["anaesthetist","anesthetist"],["anaesthetists","anesthetists"],["anaesthetize","anesthetize"],["anaesthetized","anesthetized"],["anaesthetizes","anesthetizes"],["anaesthetizing","anesthetizing"],["anoxaemia","anoxemia"],["antigenaemia","antigenemia"],["antileukaemic","antileukemic"],["azotaemia","azotemia"],["bacteraemia","bacteremia"],["bougainvillaea","bougainvillea"],["bougainvillaeas","bougainvilleas"],["caesium","cesium"],["carboxyhaemoglobin","carboxyhemoglobin"],["caesarean","cesarean"],["chimaera","chimera"],["chimaeras","chimeras"],["chimaeric","chimeric"],["cholesterolaemia","cholesterolemia"],["cryoglobulinaemia","cryoglobulinemia"],["cyclopaedia","cyclopedia"],["deoxyhaemoglobin","deoxyhemoglobin"],["diarrhoea","diarrhea"],["diarrhoeas","diarrheas"],["dysbetalipoproteinaemia","dysbetalipoproteinemia"],["dyslipidaemia","dyslipidemia"],["encyclopaedia","encyclopedia"],["encyclopaediae","encyclopediae"],["encyclopaedias","encyclopedias"],["encyclopaedic","encyclopedic"],["endotoxaemia","endotoxemia"],["euglycaemia","euglycemia"],["faecal","fecal"],["faeces","feces"],["foetal","fetal"],["foetid","fetid"],["foetus","fetus"],["foetuses","fetuses"],["fungaemia","fungemia"],["galactosaemia","galactosemia"],["glycaemia","glycemia"],["gonorrhoea","gonorrhea"],["gonorrhoeas","gonorrheas"],["gynaecological","gynecological"],["gynaecologies","gynecologies"],["gynaecologist","gynecologist"],["gynaecologists","gynecologists"],["gynaecology","gynecology"],["haematein","hematein"],["haemateins","hemateins"],["haematocele","hematocele"],["haematocrit","hematocrit"],["haematocrits","hematocrits"],["haematogenous","hematogenous"],["haematological","hematological"],["haematologist","hematologist"],["haematologists","hematologists"],["haematology","hematology"],["haematoma","hematoma"],["haematomas","hematomas"],["haematophagous","hematophagous"],["haematopoiesis","hematopoiesis"],["haematopoietic","hematopoietic"],["haematoxylin","hematoxylin"],["haematoxylins","hematoxylins"],["haemochromatosis","hemochromatosis"],["haemocoel","hemocoel"],["haemocyanin","hemocyanin"],["haemocyte","hemocyte"],["haemocytes","hemocytes"],["haemocytometer","hemocytometer"],["haemodialyses","hemodialyses"],["haemodialysis","hemodialysis"],["haemodynamic","hemodynamic"],["haemodynamically","hemodynamically"],["haemodynamics","hemodynamics"],["haemogenic","hemogenic"],["haemoglobin","hemoglobin"],["haemoglobinopathies","hemoglobinopathies"],["haemoglobinopathy","hemoglobinopathy"],["haemoglobins","hemoglobins"],["haemoglobinuria","hemoglobinuria"],["haemoglobinurias","hemoglobinurias"],["haemolymph","hemolymph"],["haemolysate","hemolysate"],["haemolysin","hemolysin"],["haemolysins","hemolysins"],["haemolysis","hemolysis"],["haemolytic","hemolytic"],["haemophilia","hemophilia"],["haemophiliac","hemophiliac"],["haemophiliacs","hemophiliacs"],["haemophilic","hemophilic"],["haemophobia","hemophobia"],["haemopoiesis","hemopoiesis"],["haemopoietic","hemopoietic"],["haemoprotein","hemoprotein"],["haemoproteins","hemoproteins"],["haemoptysis","hemoptysis"],["haemorrhage","hemorrhage"],["haemorrhaged","hemorrhaged"],["haemorrhages","hemorrhages"],["haemorrhagic","hemorrhagic"],["haemorrhaging","hemorrhaging"],["haemorrhoid","hemorrhoid"],["haemorrhoids","hemorrhoids"],["haemostasis","hemostasis"],["haemostat","hemostat"],["haemostatic","hemostatic"],["haemostats","hemostats"],["haemotoxylin","hemotoxylin"],["haemozoin","hemozoin"],["histidinaemia","histidinemia"],["homoeopath","homeopath"],["homoeopathic","homeopathic"],["homoeopaths","homeopaths"],["homoeopathy","homeopathy"],["homoeostasis","homeostasis"],["hydraemia","hydremia"],["hyperaemia","hyperemia"],["hyperbilirubinaemia","hyperbilirubinemia"],["hypercalcaemia","hypercalcemia"],["hypercholesteraemia","hypercholesteremia"],["hypercholesterolaemia","hypercholesterolemia"],["hyperglycaemia","hyperglycemia"],["hyperhomocysteinaemia","hyperhomocysteinemia"],["hyperinsulinaemia","hyperinsulinemia"],["hyperkalaemia","hyperkalemia"],["hyperlipidaemia","hyperlipidemia"],["hyperlipoproteinaemia","hyperlipoproteinemia"],["hyperprolactinaemia","hyperprolactinemia"],["hypertriglyceridaemia","hypertriglyceridemia"],["hyperuricaemia","hyperuricemia"],["hypervolaemia","hypervolemia"],["hypoalbuminaemia","hypoalbuminemia"],["hypocalcaemia","hypocalcemia"],["hypogammaglobulinaemia","hypogammaglobulinemia"],["hypoglycaemia","hypoglycemia"],["hypoinsulinaemia","hypoinsulinemia"],["hypomagnesaemia","hypomagnesemia"],["hyponatraemia","hyponatremia"],["hypophosphataemia","hypophosphatemia"],["hypouricaemia","hypouricemia"],["hypoxaemia","hypoxemia"],["insulinaemia","insulinemia"],["ischaemia","ischemia"],["ketonaemia","ketonemia"],["leukaemia","leukemia"],["leukaemias","leukemias"],["leukaemic","leukemic"],["leukaemogenesis","leukemogenesis"],["macroglobulinaemia","macroglobulinemia"],["mediaeval","medieval"],["mediaevals","medievals"],["menorrhoea","menorrhea"],["methaemoglobin","methemoglobin"],["methaemoglobinaemia","methemoglobinaemia"],["methemoglobinaemia","methemoglobinemia"],["natraemia","natremia"],["nonhaemolytic","nonhemolytic"],["normokalaemia","normokalemia"],["oedema","edema"],["oedemata","edemata"],["oenology","enology"],["oesophagoscope","esophagoscope"],["oesophagus","esophagus"],["oestrogen","estrogen"],["oestrogens","estrogens"],["oestrous","estrous"],["orthopaedic","orthopedic"],["orthopaedics","orthopedics"],["oxyhaemoglobin","oxyhemoglobin"],["paedagogies","pedagogies"],["paedagogy","pedagogy"],["paederast","pederast"],["paederasts","pederasts"],["paediatric","pediatric"],["paediatrician","pediatrician"],["paediatricians","pediatricians"],["paediatrics","pediatrics"],["paedophile","pedophile"],["paedophiles","pedophiles"],["paedophilia","pedophilia"],["palaeobotany","paleobotany"],["palaeocene","paleocene"],["palaeoclimatology","paleoclimatology"],["palaeogeography","paleogeography"],["palaeographies","paleographies"],["palaeography","paleography"],["palaeolithic","paleolithic"],["palaeomagnetism","paleomagnetism"],["palaeontologist","paleontologist"],["palaeontologists","paleontologists"],["palaeontology","paleontology"],["palaeozoic","paleozoic"],["parasitaemia","parasitemia"],["pharmacopoeia","pharmacopeia"],["pharmacopoeias","pharmacopeias"],["polycythaemia","polycythemia"],["praesidium","presidium"],["praesidiums","presidiums"],["primaeval","primeval"],["pyaemia","pyemia"],["septicaemia","septicemia"],["thalassaemia","thalassemia"],["toxaemia","toxemia"],["toxaemias","toxemias"],["tyrosinaemia","tyrosinemia"],["uraemia","uremia"],["viraemia","viremia"],["backpedalled","backpedaled"],["backpedalling","backpedaling"],["bedevilled","bedeviled"],["bedevilling","bedeviling"],["bejewelled","bejeweled"],["bevelled","beveled"],["calliper","caliper"],["callipers","calipers"],["callisthenics","calisthenics"],["cancelled","canceled"],["cancelling","canceling"],["carolled","caroled"],["carolling","caroling"],["carollings","carolings"],["cavilled","caviled"],["cavilling","caviling"],["cavillings","cavilings"],["channelled","channeled"],["channelling","channeling"],["chilli","chili"],["chillies","chilies"],["chiselled","chiseled"],["chiselling","chiseling"],["councillor","councilor"],["councillors","councilors"],["counselled","counseled"],["counselling","counseling"],["counsellor","counselor"],["counsellors","counselors"],["crenellate","crenelate"],["crenellated","crenelated"],["crenellates","crenelates"],["crenellating","crenelating"],["crueller","crueler"],["cruellest","cruelest"],["cudgelled","cudgeled"],["cudgelling","cudgeling"],["dialled","dialed"],["dialling","dialing"],["dialling","dialing"],["diallings","dialings"],["disembowelled","disemboweled"],["disembowelling","disemboweling"],["disembowellings","disembowelings"],["dishevelled","disheveled"],["drivelled","driveled"],["drivelling","driveling"],["duelled","dueled"],["duelling","dueling"],["enamelled","enameled"],["enamelling","enameling"],["equalled","equaled"],["funnelled","funneled"],["funnelling","funneling"],["gambolled","gamboled"],["gambolling","gamboling"],["gravelled","graveled"],["gravelling","graveling"],["grovelled","groveled"],["grovelling","groveling"],["gruelling","grueling"],["gruellingly","gruelingly"],["impanelled","impaneled"],["impanelling","impaneling"],["imperilled","imperiled"],["imperilling","imperiling"],["initialled","initialed"],["initialling","initialing"],["jewelled","jeweled"],["jeweller","jeweler"],["jewellers","jewelers"],["labelled","labeled"],["labeller","labeler"],["labellers","labelers"],["labelling","labeling"],["labellings","labelings"],["levelled","leveled"],["leveller","leveler"],["levellers","levelers"],["levelling","leveling"],["libelled","libeled"],["libelling","libeling"],["libellous","libelous"],["marshalled","marshaled"],["marshalling","marshaling"],["marvelled","marveled"],["marvelling","marveling"],["marvellous","marvelous"],["marvellously","marvelously"],["metallize","metalize"],["metallized","metalized"],["metallizing","metalizing"],["modelled","modeled"],["modeller","modeler"],["modellers","modelers"],["modelling","modeling"],["modellings","modelings"],["panelled","paneled"],["panelling","paneling"],["panellist","panelist"],["panellists","panelists"],["parcelling","parceling"],["pedalled","pedaled"],["pedalling","pedaling"],["pencilled","penciled"],["pencilling","penciling"],["quarrelled","quarreled"],["quarrelling","quarreling"],["ravelled","raveled"],["ravelling","raveling"],["refuelled","refueled"],["refuelling","refueling"],["refuellings","refuelings"],["remodelled","remodeled"],["remodelling","remodeling"],["remodellings","remodelings"],["revelled","reveled"],["reveller","reveler"],["revellers","revelers"],["revelling","reveling"],["rivalled","rivaled"],["rivalling","rivaling"],["shovelled","shoveled"],["shovelling","shoveling"],["shrivelled","shriveled"],["shrivelling","shriveling"],["signalled","signaled"],["signalling","signaling"],["signallings","signalings"],["snivelled","sniveled"],["snivelling","sniveling"],["snorkelled","snorkeled"],["snorkelling","snorkeling"],["spiralled","spiraled"],["spiralling","spiraling"],["squirrelled","squirreled"],["squirrelling","squirreling"],["stencilled","stenciled"],["stencilling","stenciling"],["swivelled","swiveled"],["swivelling","swiveling"],["tasselled","tasseled"],["totalled","totaled"],["totalling","totaling"],["towelled","toweled"],["towelling","toweling"],["towellings","towelings"],["trammelled","trammeled"],["trammelling","trammeling"],["tranquillize","tranquilize"],["tranquillized","tranquilized"],["tranquillizer","tranquilizer"],["tranquillizers","tranquilizers"],["tranquillizes","tranquilizes"],["tranquillizing","tranquilizing"],["travelled","traveled"],["traveller","traveler"],["travellers","travelers"],["travelling","traveling"],["travellings","travelings"],["trialled","trialed"],["trialling","trialing"],["tunnelled","tunneled"],["tunnelling","tunneling"],["tunnellings","tunnelings"],["unequalled","unequaled"],["unravelled","unraveled"],["unravelling","unraveling"],["unrivalled","unrivaled"],["untrammelled","untrammeled"],["weaselled","weaseled"],["weaselling","weaseling"],["woollen","woolen"],["woollens","woolens"],["yodelled","yodeled"],["yodelling","yodeling"],["defence","defense"],["defenceless","defenseless"],["defences","defenses"],["licence","license"],["licenced","licensed"],["licences","licenses"],["licencing","licensing"],["offence","offense"],["offences","offenses"],["pretence","pretense"],["pretences","pretenses"],["bisulphate","bisulfate"],["bisulphates","bisulfates"],["bisulphite","bisulfite"],["bisulphites","bisulfites"],["disulphide","disulfide"],["disulphides","disulfides"],["hydrosulphite","hydrosulfite"],["hydrosulphites","hydrosulfites"],["pyrosulphite","pyrosulfite"],["pyrosulphites","pyrosulfites"],["sulphate","sulfate"],["sulphated","sulfated"],["sulphates","sulfates"],["sulphating","sulfating"],["sulphide","sulfide"],["sulphides","sulfides"],["sulphite","sulfite"],["sulphites","sulfites"],["sulphur","sulfur"],["sulphured","sulfured"],["sulphuring","sulfuring"],["sulphurous","sulfurous"],["sulphurs","sulfurs"],["abridgement","abridgment"],["abridgements","abridgments"],["acknowledgement","acknowledgment"],["acknowledgements","acknowledgments"],["aerogramme","aerogram"],["aerogrammes","aerograms"],["aeroplane","airplane"],["aeroplanes","airplanes"],["afterwards","afterward"],["ageing","aging"],["ageings","agings"],["almanack","almanac"],["almanacks","almanacs"],["aluminium","aluminum"],["ambience","ambiance"],["ambiences","ambiances"],["analogue","analog"],["analogues","analogs"],["annexe","annex"],["apophthegm","apothegm"],["apophthegms","apothegms"],["appal","appall"],["appaled","appalled"],["appaling","appalling"],["appals","appalls"],["archepiscopal","archiepiscopal"],["artefact","artifact"],["artefacts","artifacts"],["atishoo","achoo"],["atishoos","achoos"],["axe","ax"],["backwards","backward"],["bannister","banister"],["bannisters","banisters"],["barque","bark"],["barqued","barked"],["barques","barks"],["barquing","barking"],["battleaxe","battleax"],["baulk","balk"],["baulked","balked"],["baulking","balking"],["baulks","balks"],["behove","behoove"],["behoved","behooved"],["behoves","behooves"],["behoving","behooving"],["bevvies","bevies"],["bevvy","bevy"],["carburettor","carburetor"],["carburettors","carburetors"],["carcase","carcass"],["carcases","carcasses"],["catalogue","catalog"],["catalogued","cataloged"],["catalogues","catalogs"],["cataloguing","cataloging"],["centigramme","centigram"],["centigrammes","centigrams"],["centred","centered"],["centring","centering"],["centrings","centerings"],["chequebook","checkbook"],["chequebooks","checkbooks"],["clarinettist","clarinetist"],["clarinettists","clarinetists"],["collectable","collectible"],["collectables","collectibles"],["collonaded","colonnaded"],["compleat","complete"],["compleated","completed"],["compleater","completer"],["compleaters","completers"],["compleates","completes"],["compleatest","completest"],["compleating","completing"],["cosied","cozied"],["cosier","cozier"],["cosies","cozies"],["cosiest","coziest"],["cosily","cozily"],["cosiness","coziness"],["cosy","cozy"],["cosying","cozying"],["cypher","cipher"],["cyphers","ciphers"],["deprogramme","deprogram"],["distil","distill"],["distils","distills"],["doodah","doodad"],["doodahs","doodads"],["dyke","dike"],["dyked","diked"],["dykes","dikes"],["empanel","impanel"],["empanelled","impanelled"],["empanelling","impanelling"],["empanels","impanels"],["enquiries","inquiries"],["enquiry","inquiry"],["enrol","enroll"],["enrols","enrolls"],["ensorcel","ensorcell"],["ensorceled","ensorcelled"],["ensorceling","ensorcelling"],["ensorcels","ensorcells"],["enthral","enthrall"],["enthraled","enthralled"],["enthraling","enthralling"],["enthrals","enthralls"],["epaulette","epaulet"],["epaulettes","epaulets"],["flautist","flutist"],["flautists","flutists"],["fledgeling","fledgling"],["fledgelings","fledglings"],["fulfil","fulfill"],["fulfiled","fulfilled"],["fulfiling","fulfilling"],["fulfilment","fulfillment"],["fulfils","fulfills"],["furore","furor"],["furores","furors"],["gaol","jail"],["gaolbird","jailbird"],["gaolbirds","jailbirds"],["gaolbreak","jailbreak"],["gaolbreaking","jailbreaking"],["gaolbreaks","jailbreaks"],["gaolbroke","jailbroke"],["gaolbroken","jailbroken"],["gaoled","jailed"],["gaoler","jailer"],["gaolers","jailers"],["gaoling","jailing"],["gaolings","jailings"],["gaols","jails"],["gipsies","gypsies"],["gipsy","gypsy"],["glueing","gluing"],["goloshes","galoshes"],["gramme","gram"],["grammes","grams"],["groyne","groin"],["groynes","groins"],["gryphon","griffin"],["gryphons","griffins"],["haulier","hauler"],["hauliers","haulers"],["homologue","homolog"],["homologues","homologs"],["inclosure","enclosure"],["inclosures","enclosures"],["inflexion","inflection"],["inflexions","inflections"],["instal","install"],["instaled","installed"],["instaling","installing"],["instalment","installment"],["instalments","installments"],["instals","installs"],["instil","instill"],["instiled","instilled"],["instiling","instilling"],["instils","instills"],["jewellery","jewelry"],["judgement","judgment"],["judgements","judgments"],["kerb","curb"],["kerbed","curbed"],["kerbing","curbing"],["kerbings","curbings"],["kerbs","curbs"],["kilogramme","kilogram"],["kilogrammes","kilograms"],["leant","leaned"],["leapt","leaped"],["learnt","learned"],["likeable","likable"],["liquorice","licorice"],["liquorices","licorices"],["louvred","louvered"],["lustred","lustered"],["lustring","lustering"],["manoeuvrability","maneuverability"],["manoeuvrable","maneuverable"],["manoeuvre","maneuver"],["manoeuvred","maneuvered"],["manoeuvres","maneuvers"],["manoeuvring","maneuvering"],["manoeuvrings","maneuverings"],["meagrest","meagerest"],["mementoes","mementos"],["metred","metered"],["metring","metering"],["microprogramme","microprogram"],["microprogrammes","microprograms"],["milligramme","milligram"],["milligrammes","milligrams"],["minibuses","minibusses"],["misjudgement","misjudgment"],["misjudgements","misjudgments"],["misspelt","misspelled"],["mitred","mitered"],["mitring","mitering"],["mollusc","mollusk"],["molluscs","mollusks"],["moustache","mustache"],["moustached","mustached"],["moustaches","mustaches"],["moustachioed","mustachioed"],["nett","net"],["neurone","neuron"],["neurones","neurons"],["north-easts","northeasts"],["north-west","northwest"],["north-wests","northwests"],["nought","naught"],["oesophagal","esophageal"],["omelette","omelet"],["omelettes","omelets"],["outmanoeuvre","outmaneuver"],["outmanoeuvred","outmaneuvered"],["outmanoeuvres","outmaneuvers"],["outmanoeuvring","outmaneuvering"],["phial","vial"],["phialed","vialed"],["phialing","vialing"],["phials","vials"],["philtred","philtered"],["philtring","philtering"],["phoney","phony"],["plough","plow"],["ploughboy","plowboy"],["ploughboys","plowboys"],["ploughed","plowed"],["plougher","plower"],["ploughers","plowers"],["ploughgirl","plowgirl"],["ploughgirls","plowgirls"],["ploughing","plowing"],["ploughman","plowman"],["ploughmen","plowmen"],["ploughs","plows"],["ploughshare","plowshare"],["ploughshares","plowshares"],["ploughwoman","plowwoman"],["ploughwomen","plowwomen"],["ploughwright","plowwright"],["ploughwrights","plowwrights"],["polyethene","polyethylene"],["pouffe","pouf"],["pouffes","poufs"],["practise","practice"],["practised","practiced"],["practises","practices"],["practising","practicing"],["prefered","preferred"],["prefereds","preferreds"],["programme","program"],["programmes","programs"],["pyjama","pajama"],["pyjamas","pajamas"],["racoon","raccoon"],["racoons","raccoons"],["reconnoitred","reconnoitered"],["reconnoitring","reconnoitering"],["reconnoitrings","reconnoiterings"],["retroflexion","retroflection"],["retroflexions","retroflections"],["routeing","routing"],["routeings","routings"],["sceptic","skeptic"],["sceptical","skeptical"],["sceptically","skeptically"],["scepticism","skepticism"],["scepticisms","skepticisms"],["scepticist","skepticist"],["scepticists","skepticists"],["sceptics","skeptics"],["sceptred","sceptered"],["sceptring","sceptering"],["selvedge","selvage"],["selvedges","selvages"],["sepulchred","sepulchered"],["sepulchring","sepulchering"],["sheikh","sheik"],["sheikhs","sheiks"],["shoppe","shop"],["shoppes","shops"],["skilful","skillful"],["sledge","sled"],["sledged","sledded"],["sledges","sleds"],["sledging","sledding"],["sledgings","sleddings"],["snowplough","snowplow"],["snowploughed","snowplowed"],["snowploughing","snowplowing"],["snowploughs","snowplows"],["sombrer","somberer"],["sombrest","somberest"],["south-east","southeast"],["south-easts","southeasts"],["south-west","southwest"],["south-wests","southwests"],["specialities","specialties"],["speciality","specialty"],["spelt","spelled"],["spilt","spilled"],["storey","story"],["storeys","stories"],["syphon","siphon"],["syphoned","siphoned"],["syphoning","siphoning"],["syphons","siphons"],["tabletting","tableting"],["tranquilly","tranquility"],["transhipment","transshipment"],["tyre","tire"],["tyred","tired"],["tyreder","tireder"],["tyredest","tiredest"],["tyres","tires"],["tyring","tiring"],["tyrings","tirings"],["unspoilt","unspoiled"],["waggon","wagon"],["waggoned","wagoned"],["waggoning","wagoning"],["waggons","wagons"],["whiskies","whiskeys"],["whisky","whiskey"],["yoghourt","yogurt"],["yoghourts","yogurts"],["yoghurt","yogurt"],["yoghurts","yogurts"]],"australian":[["backpedaled","backpedalled"],["backpedaling","backpedalling"],["bedeviled","bedevilled"],["bedeviling","bedevilling"],["bejeweled","bejewelled"],["beveled","bevelled"],["caliper","calliper"],["calipers","callipers"],["calisthenics","callisthenics"],["cancelation","cancellation"],["cancelations","cancellations"],["canceled","cancelled"],["canceling","cancelling"],["caroled","carolled"],["caroling","carolling"],["carolings","carollings"],["caviled","cavilled"],["caviling","cavilling"],["cavilings","cavillings"],["channeled","channelled"],["channeling","channelling"],["chili","chilli"],["chilies","chillies"],["chiseled","chiselled"],["chiseling","chiselling"],["councilor","councillor"],["councilors","councillors"],["counseled","counselled"],["counseling","counselling"],["counselor","counsellor"],["counselors","counsellors"],["crenelate","crenellate"],["crenelated","crenellated"],["crenelates","crenellates"],["crenelating","crenellating"],["crueler","crueller"],["cruelest","cruellest"],["cudgeled","cudgelled"],["cudgeling","cudgelling"],["dialed","dialled"],["dialing","dialling"],["dialings","diallings"],["disemboweled","disembowelled"],["disemboweling","disembowelling"],["disembowelings","disembowellings"],["disheveled","dishevelled"],["driveled","drivelled"],["driveling","drivelling"],["dueled","duelled"],["dueling","duelling"],["empaneled","empanelled"],["empaneling","empanelling"],["enameled","enamelled"],["enameling","enamelling"],["equaled","equalled"],["funneled","funnelled"],["funneling","funnelling"],["gamboled","gambolled"],["gamboling","gambolling"],["graveled","gravelled"],["graveling","gravelling"],["groveled","grovelled"],["groveling","grovelling"],["grueling","gruelling"],["gruelingly","gruellingly"],["imperiled","imperilled"],["imperiling","imperilling"],["initialed","initialled"],["initialing","initialling"],["jeweled","jewelled"],["jeweler","jeweller"],["jewelers","jewellers"],["labeled","labelled"],["labeler","labeller"],["labelers","labellers"],["labeling","labelling"],["labelings","labellings"],["leveled","levelled"],["leveler","leveller"],["levelers","levellers"],["leveling","levelling"],["libeled","libelled"],["libeling","libelling"],["libelous","libellous"],["marshaled","marshalled"],["marshaling","marshalling"],["marveled","marvelled"],["marveling","marvelling"],["marvelous","marvellous"],["marvelously","marvellously"],["modeled","modelled"],["modeler","modeller"],["modelers","modellers"],["modeling","modelling"],["modelings","modellings"],["paneled","panelled"],["paneling","panelling"],["panelist","panellist"],["panelists","panellists"],["parceled","parcelled"],["parceling","parcelling"],["pedaled","pedalled"],["pedaling","pedalling"],["penciled","pencilled"],["penciling","pencilling"],["percent","per cent"],["persnickety","pernickety"],["quarreled","quarrelled"],["quarreling","quarrelling"],["raveled","ravelled"],["raveling","ravelling"],["refueled","refuelled"],["refueling","refuelling"],["refuelings","refuellings"],["remodeled","remodelled"],["remodeling","remodelling"],["remodelings","remodellings"],["reveled","revelled"],["reveler","reveller"],["revelers","revellers"],["reveling","revelling"],["rivaled","rivalled"],["rivaling","rivalling"],["shoveled","shovelled"],["shoveling","shovelling"],["shriveled","shrivelled"],["shriveling","shrivelling"],["signaled","signalled"],["signaling","signalling"],["signalings","signallings"],["sniveled","snivelled"],["sniveling","snivelling"],["snorkeled","snorkelled"],["snorkeling","snorkelling"],["spiraled","spiralled"],["spiraling","spiralling"],["squirreled","squirrelled"],["squirreling","squirrelling"],["stenciled","stencilled"],["stenciling","stencilling"],["swiveled","swivelled"],["swiveling","swivelling"],["tasseled","tasselled"],["totaled","totalled"],["totaling","totalling"],["toweled","towelled"],["toweling","towelling"],["towelings","towellings"],["trammeled","trammelled"],["trammeling","trammelling"],["tranquility","tranquillity"],["tranquilize","tranquillize"],["tranquilized","tranquillized"],["tranquilizer","tranquillizer"],["tranquilizers","tranquillizers"],["tranquilizes","tranquillizes"],["tranquilizing","tranquillizing"],["traveled","travelled"],["traveler","traveller"],["travelers","travellers"],["traveling","travelling"],["travelings","travellings"],["trialed","trialled"],["trialing","trialling"],["tunneled","tunnelled"],["tunneling","tunnelling"],["tunnelings","tunnellings"],["unequaled","unequalled"],["unraveled","unravelled"],["unraveling","unravelling"],["unrivaled","unrivalled"],["untrammeled","untrammelled"],["weaseled","weaselled"],["weaseling","weaselling"],["woolen","woollen"],["woolens","woollens"],["woolier","woollier"],["woolies","woollies"],["wooliest","woolliest"],["wooly","woolly"],["yodeled","yodelled"],["yodeling","yodelling"],["ambercolored","ambercoloured"],["anticolor","anticolour"],["anticolors","anticolours"],["apricotcolored","apricotcoloured"],["arbor","arbour"],["arbors","arbours"],["ardor","ardour"],["ardors","ardours"],["armor","armour"],["armored","armoured"],["armorer","armourer"],["armorers","armourers"],["armories","armouries"],["armoring","armouring"],["armors","armours"],["armory","armoury"],["ashcolored","ashcoloured"],["aurora-colored","aurora-coloured"],["behavior","behaviour"],["behavioral","behavioural"],["behaviorism","behaviourism"],["behaviorisms","behaviourisms"],["behaviorist","behaviourist"],["behaviorists","behaviourists"],["behaviors","behaviours"],["belabor","belabour"],["belabored","belaboured"],["belaboring","belabouring"],["belabors","belabours"],["bicolor","bicolour"],["bicoloration","bicolouration"],["bicolored","bicoloured"],["bodycolor","bodycolour"],["brasscolored","brasscoloured"],["brickcolored","brickcoloured"],["brightly-colored","brightly-coloured"],["buff-colored","buff-coloured"],["burgundycolored","burgundycoloured"],["candor","candour"],["cherrycolored","cherrycoloured"],["chestnut-colored","chestnut-coloured"],["chocolate-colored","chocolate-coloured"],["cinnamon-colored","cinnamon-coloured"],["citroncolored","citroncoloured"],["clamor","clamour"],["clamored","clamoured"],["clamoring","clamouring"],["clamorings","clamourings"],["clamors","clamours"],["clangor","clangour"],["claretcolored","claretcoloured"],["color","colour"],["color-blind","colour-blind"],["color-blindness","colour-blindness"],["color-coordinate","colour-coordinate"],["color-coordinated","colour-coordinated"],["colorability","colourability"],["colorable","colourable"],["colorably","colourably"],["colorant","colourant"],["colorants","colourants"],["coloration","colouration"],["colorational","colourational"],["colorations","colourations"],["colorative","colourative"],["colorbearer","colourbearer"],["colorblind","colourblind"],["colorblindness","colourblindness"],["colorcast","colourcast"],["colorcaster","colourcaster"],["colored","coloured"],["coloreds","coloureds"],["colorer","colourer"],["colorers","colourers"],["colorfast","colourfast"],["colorfastness","colourfastness"],["colorful","colourful"],["colorfully","colourfully"],["colorfulness","colourfulness"],["colorific","colourific"],["colorimeter","colourimeter"],["colorimeters","colourimeters"],["colorimetric","colourimetric"],["colorimetrical","colourimetrical"],["colorimetrically","colourimetrically"],["colorimetry","colourimetry"],["colorin\'","colourin\'"],["coloring","colouring"],["colorings","colourings"],["colorisation","colourisation"],["colorise","colourise"],["colorism","colourism"],["colorisms","colourisms"],["colorist","colourist"],["coloristic","colouristic"],["coloristically","colouristically"],["colorists","colourists"],["colorization","colourization"],["colorizations","colourizations"],["colorize","colourize"],["colorized","colourized"],["colorizer","colourizer"],["colorizes","colourizes"],["colorizin\'","colourizin\'"],["colorizing","colourizing"],["colorless","colourless"],["colorlessly","colourlessly"],["colorlessness","colourlessness"],["colormaker","colourmaker"],["colormakers","colourmakers"],["colormap","colourmap"],["colormaps","colourmaps"],["colormen","colourmen"],["colorous","colourous"],["colorphobia","colourphobia"],["colorpoint","colourpoint"],["colorpoints","colourpoints"],["colorpuncture","colourpuncture"],["colors","colours"],["colorspace","colourspace"],["colortype","colourtype"],["colorway","colourway"],["colorways","colourways"],["colorwise","colourwise"],["colorwork","colourwork"],["colter","coulter"],["colters","coulters"],["concolorous","concolourous"],["dark-colored","dark-coloured"],["decolor","decolour"],["decoloration","decolouration"],["decolorations","decolourations"],["decolored","decoloured"],["decoloring","decolouring"],["decolorisation","decolourisation"],["decolorisations","decolourisations"],["decolorise","decolourise"],["decolorised","decolourised"],["decoloriser","decolouriser"],["decolorises","decolourises"],["decolorising","decolourising"],["decolorization","decolourization"],["decolorize","decolourize"],["decolorized","decolourized"],["decolorizer","decolourizer"],["decolors","decolours"],["demeanor","demeanour"],["demeanors","demeanours"],["discolor","discolour"],["discoloration","discolouration"],["discolorations","discolourations"],["discolored","discoloured"],["discolorer","discolourer"],["discoloring","discolouring"],["discolorings","discolourings"],["discolorisation","discolourisation"],["discolorise","discolourise"],["discolorization","discolourization"],["discolorment","discolourment"],["discolorous","discolourous"],["discolors","discolours"],["disfavor","disfavour"],["dishonor","dishonour"],["dishonorable","dishonourable"],["dishonorably","dishonourably"],["dishonored","dishonoured"],["dishonoring","dishonouring"],["dishonors","dishonours"],["dolor","dolour"],["dolors","dolours"],["dun-colored","dun-coloured"],["dusky-colored","dusky-coloured"],["dustcolored","dustcoloured"],["enamor","enamour"],["enamored","enamoured"],["enamoring","enamouring"],["enamors","enamours"],["endeavor","endeavour"],["endeavored","endeavoured"],["endeavoring","endeavouring"],["endeavors","endeavours"],["favor","favour"],["favorable","favourable"],["favorably","favourably"],["favored","favoured"],["favoring","favouring"],["favorite","favourite"],["favorited","favourited"],["favorites","favourites"],["favoriting","favouriting"],["favoritism","favouritism"],["favors","favours"],["fawn-colored","fawn-coloured"],["fawncolored","fawncoloured"],["fervor","fervour"],["fervors","fervours"],["flame-colored","flame-coloured"],["flavor","flavour"],["flavored","flavoured"],["flavoring","flavouring"],["flavorings","flavourings"],["flavorless","flavourless"],["flavors","flavours"],["flavorsome","flavoursome"],["flesh-colored","flesh-coloured"],["fleshcolored","fleshcoloured"],["forecolor","forecolour"],["forecolors","forecolours"],["garnet-colored","garnet-coloured"],["glamor","glamour"],["gold-colored","gold-coloured"],["handcolor","handcolour"],["harbor","harbour"],["harbored","harboured"],["harboring","harbouring"],["harbors","harbours"],["honey-colored","honey-coloured"],["honor","honour"],["honorable","honourable"],["honorably","honourably"],["honored","honoured"],["honoring","honouring"],["honors","honours"],["humor","humour"],["humored","humoured"],["humoring","humouring"],["humorless","humourless"],["humors","humours"],["labor","labour"],["labored","laboured"],["laborer","labourer"],["laborers","labourers"],["laboring","labouring"],["labors","labours"],["lead-colored","lead-coloured"],["metal-colored","metal-coloured"],["metallic-colored","metallic-coloured"],["misbehavior","misbehaviour"],["misbehaviors","misbehaviours"],["miscolor","miscolour"],["miscoloration","miscolouration"],["miscolored","miscoloured"],["miscoloring","miscolouring"],["miscolors","miscolours"],["misdemeanor","misdemeanour"],["misdemeanors","misdemeanours"],["mold","mould"],["molded","moulded"],["molder","moulder"],["moldered","mouldered"],["moldering","mouldering"],["molders","moulders"],["moldier","mouldier"],["moldiest","mouldiest"],["molding","moulding"],["moldings","mouldings"],["molds","moulds"],["moldy","mouldy"],["molt","moult"],["molted","moulted"],["molting","moulting"],["molts","moults"],["monocolored","monocoloured"],["multi-color","multi-colour"],["multi-colored","multi-coloured"],["multicolor","multicolour"],["multicolored","multicoloured"],["multicolors","multicolours"],["neighbor","neighbour"],["neighborhood","neighbourhood"],["neighborhoods","neighbourhoods"],["neighboring","neighbouring"],["neighborliness","neighbourliness"],["neighborly","neighbourly"],["neighbors","neighbours"],["neutral-colored","neutral-coloured"],["odor","odour"],["odorless","odourless"],["odors","odours"],["off-color","off-colour"],["olive-colored","olive-coloured"],["orange-colored","orange-coloured"],["overcolor","overcolour"],["overcolored","overcoloured"],["parlor","parlour"],["parlormaid","parlourmaid"],["parlormaids","parlourmaids"],["parlors","parlours"],["particolored","particoloured"],["peachy-colored","peachy-coloured"],["pseudocolor","pseudocolour"],["pseudocolored","pseudocoloured"],["pseudocoloring","pseudocolouring"],["pseudocolors","pseudocolours"],["rancor","rancour"],["recolor","recolour"],["recolorable","recolourable"],["recoloration","recolouration"],["recolorations","recolourations"],["recolored","recoloured"],["recolorin\'","recolourin\'"],["recoloring","recolouring"],["recolors","recolours"],["remold","remould"],["remolded","remoulded"],["remolding","remoulding"],["remolds","remoulds"],["rigor","rigour"],["rigors","rigours"],["rose-colored","rose-coloured"],["rumor","rumour"],["rumored","rumoured"],["rumoring","rumouring"],["rumormonger","rumourmonger"],["rumormongers","rumourmongers"],["rumors","rumours"],["savior","saviour"],["saviors","saviours"],["savor","savour"],["savored","savoured"],["savories","savouries"],["savoring","savouring"],["savors","savours"],["savory","savoury"],["self-colored","self-coloured"],["smolder","smoulder"],["smoldered","smouldered"],["smoldering","smouldering"],["smolders","smoulders"],["snuff-color","snuff-colour"],["solid-colored","solid-coloured"],["splendor","splendour"],["splendors","splendours"],["straw-colored","straw-coloured"],["succor","succour"],["succored","succoured"],["succoring","succouring"],["succors","succours"],["tawny-colored","tawny-coloured"],["technicolor","technicolour"],["technicolored","technicoloured"],["topcolor","topcolour"],["tricolor","tricolour"],["tricolored","tricoloured"],["tricolorous","tricolourous"],["tricolors","tricolours"],["tumor","tumour"],["tumors","tumours"],["uncolorable","uncolourable"],["uncolored","uncoloured"],["uncolorful","uncolourful"],["unfavorable","unfavourable"],["unfavorably","unfavourably"],["unicolor","unicolour"],["unicolorous","unicolourous"],["unsavory","unsavoury"],["valor","valour"],["vapor","vapour"],["vapored","vapoured"],["vaporing","vapouring"],["vapors","vapours"],["varicolored","varicoloured"],["versicolored","versicoloured"],["vigor","vigour"],["violet-colored","violet-coloured"],["water-color","water-colour"],["watercolor","watercolour"],["watercolored","watercoloured"],["watercolorist","watercolourist"],["watercolorists","watercolourists"],["watercolors","watercolours"],["wine-colored","wine-coloured"],["accouterment","accoutrement"],["accouterments","accoutrements"],["amphitheater","amphitheatre"],["amphitheaters","amphitheatres"],["caliber","calibre"],["calibers","calibres"],["center","centre"],["centerboard","centreboard"],["centerfold","centrefold"],["centerfolds","centrefolds"],["centerpiece","centrepiece"],["centerpieces","centrepieces"],["centers","centres"],["centiliter","centilitre"],["centiliters","centilitres"],["centimeter","centimetre"],["centimeters","centimetres"],["epicenter","epicentre"],["epicenters","epicentres"],["fiber","fibre"],["fiberglass","fibreglass"],["fibers","fibres"],["goiter","goitre"],["goiters","goitres"],["kilometer","kilometre"],["kilometers","kilometres"],["lackluster","lacklustre"],["liter","litre"],["liters","litres"],["louver","louvre"],["louvers","louvres"],["luster","lustre"],["lusters","lustres"],["meager","meagre"],["metacenter","metacentre"],["metacenters","metacentres"],["micrometer","micrometre"],["micrometers","micrometres"],["milliliter","millilitre"],["milliliters","millilitres"],["millimeter","millimetre"],["millimeters","millimetres"],["miter","mitre"],["miters","mitres"],["niter","nitre"],["philter","philtre"],["philters","philtres"],["reconnoiter","reconnoitre"],["reconnoiters","reconnoitres"],["saber","sabre"],["sabers","sabres"],["saltpeter","saltpetre"],["scepter","sceptre"],["scepters","sceptres"],["sepulcher","sepulchre"],["sepulchers","sepulchres"],["somber","sombre"],["specter","spectre"],["specters","spectres"],["theater","theatre"],["theatergoer","theatregoer"],["theatergoers","theatregoers"],["theaters","theatres"],["defense","defence"],["defenseless","defenceless"],["defenses","defences"],["offense","offence"],["offenses","offences"],["pretense","pretence"],["pretenses","pretences"],["vise","vice"],["vises","vices"],["bisulfate","bisulphate"],["bisulfates","bisulphates"],["bisulfite","bisulphite"],["bisulfites","bisulphites"],["disulfide","disulphide"],["disulfides","disulphides"],["hydrosulfite","hydrosulphite"],["hydrosulfites","hydrosulphites"],["pyrosulfite","pyrosulphite"],["pyrosulfites","pyrosulphites"],["sulfate","sulphate"],["sulfated","sulphated"],["sulfates","sulphates"],["sulfating","sulphating"],["sulfide","sulphide"],["sulfides","sulphides"],["sulfite","sulphite"],["sulfites","sulphites"],["sulfur","sulphur"],["sulfured","sulphured"],["sulfuring","sulphuring"],["sulfurous","sulphurous"],["sulfurs","sulphurs"],["ax","axe"],["battleax","battleaxe"],["furor","furore"],["furors","furores"],["catalog","catalogue"],["cataloged","catalogued"],["cataloging","cataloguing"],["catalogs","catalogues"],["dialog","dialogue"],["dialogs","dialogues"],["epilog","epilogue"],["epilogs","epilogues"],["monolog","monologue"],["monologs","monologues"],["prolog","prologue"],["prologs","prologues"],["travelog","travelogue"],["travelogs","travelogues"],["appall","appal"],["appalls","appals"],["distill","distil"],["distills","distils"],["enroll","enrol"],["enrolls","enrols"],["ensorcell","ensorcel"],["ensorcelled","ensorceled"],["ensorcelling","ensorceling"],["ensorcells","ensorcels"],["enthrall","enthral"],["enthralls","enthrals"],["fulfill","fulfil"],["fulfillment","fulfilment"],["fulfills","fulfils"],["installment","instalment"],["installments","instalments"],["instill","instil"],["instills","instils"],["skillful","skilful"],["afterward","afterwards"],["airplane","aeroplane"],["airplanes","aeroplanes"],["aluminum","aluminium"],["ambiance","ambience"],["ambiances","ambiences"],["apothegm","apophthegm"],["apothegms","apophthegms"],["archepiscopal","archiepiscopal"],["behoove","behove"],["behooved","behoved"],["behooves","behoves"],["behooving","behoving"],["carburetor","carburettor"],["carburetors","carburettors"],["centered","centred"],["centering","centring"],["centerings","centrings"],["checkbook","chequebook"],["checkbooks","chequebooks"],["collonaded","colonnaded"],["donut","doughnut"],["donuts","doughnuts"],["doodad","doodah"],["doodads","doodahs"],["epaulet","epaulette"],["epaulets","epaulettes"],["flutist","flautist"],["flutists","flautists"],["gantlet","gauntlet"],["gantlets","gauntlets"],["goloshes","galoshes"],["gray","grey"],["grayed","greyed"],["grayer","greyer"],["grayest","greyest"],["graying","greying"],["grayish","greyish"],["grayness","greyness"],["grays","greys"],["hauler","haulier"],["haulers","hauliers"],["impanel","empanel"],["impaneled","empanelled"],["impaneling","empanelling"],["impanels","empanels"],["jewelry","jewellery"],["kidnaped","kidnapped"],["leaped","leapt"],["louvered","louvred"],["lustered","lustred"],["lustering","lustring"],["meagerest","meagrest"],["mitered","mitred"],["mitering","mitring"],["mollusk","mollusc"],["mollusks","molluscs"],["mustache","moustache"],["mustached","moustached"],["mustaches","moustaches"],["mustachioed","moustachioed"],["nought","naught"],["omelet","omelette"],["omelets","omelettes"],["pajama","pyjama"],["pajamas","pyjamas"],["philtered","philtred"],["philtering","philtring"],["plow","plough"],["plowboy","ploughboy"],["plowboys","ploughboys"],["plowed","ploughed"],["plower","plougher"],["plowers","ploughers"],["plowgirl","ploughgirl"],["plowgirls","ploughgirls"],["plowing","ploughing"],["plowings","ploughings"],["plowland","ploughland"],["plowlands","ploughlands"],["plowman","ploughman"],["plowmen","ploughmen"],["plows","ploughs"],["plowshare","ploughshare"],["plowshares","ploughshares"],["plowwoman","ploughwoman"],["plowwomen","ploughwomen"],["plowwright","ploughwright"],["plowwrights","ploughwrights"],["practiced","practised"],["practicing","practising"],["reconnoitered","reconnoitred"],["reconnoitering","reconnoitring"],["reconnoiterings","reconnoitrings"],["sceptered","sceptred"],["sceptering","sceptring"],["sepulchered","sepulchred"],["sepulchering","sepulchring"],["skeptic","sceptic"],["skeptical","sceptical"],["skeptically","sceptically"],["skepticism","scepticism"],["skepticisms","scepticisms"],["skepticist","scepticist"],["skepticists","scepticists"],["skeptics","sceptics"],["snowplow","snowplough"],["snowplowed","snowploughed"],["snowplowing","snowploughing"],["snowplows","snowploughs"],["somberer","sombrer"],["somberest","sombrest"],["transshipment","transhipment"],["worshiped","worshipped"],["worshiping","worshipping"],["yoghourt","yoghurt"],["yoghourts","yoghurts"]],"british":[["backpedaled","backpedalled"],["backpedaling","backpedalling"],["bedeviled","bedevilled"],["bedeviling","bedevilling"],["bejeweled","bejewelled"],["beveled","bevelled"],["caliper","calliper"],["calipers","callipers"],["calisthenics","callisthenics"],["cancelation","cancellation"],["cancelations","cancellations"],["canceled","cancelled"],["canceling","cancelling"],["caroled","carolled"],["caroling","carolling"],["carolings","carollings"],["caviled","cavilled"],["caviling","cavilling"],["cavilings","cavillings"],["channeled","channelled"],["channeling","channelling"],["chili","chilli"],["chilies","chillies"],["chiseled","chiselled"],["chiseling","chiselling"],["councilor","councillor"],["councilors","councillors"],["counseled","counselled"],["counseling","counselling"],["counselor","counsellor"],["counselors","counsellors"],["crenelate","crenellate"],["crenelated","crenellated"],["crenelates","crenellates"],["crenelating","crenellating"],["crueler","crueller"],["cruelest","cruellest"],["cudgeled","cudgelled"],["cudgeling","cudgelling"],["dialed","dialled"],["dialing","dialling"],["dialings","diallings"],["disemboweled","disembowelled"],["disemboweling","disembowelling"],["disembowelings","disembowellings"],["disheveled","dishevelled"],["driveled","drivelled"],["driveling","drivelling"],["dueled","duelled"],["dueling","duelling"],["empaneled","empanelled"],["empaneling","empanelling"],["enameled","enamelled"],["enameling","enamelling"],["equaled","equalled"],["funneled","funnelled"],["funneling","funnelling"],["gamboled","gambolled"],["gamboling","gambolling"],["graveled","gravelled"],["graveling","gravelling"],["groveled","grovelled"],["groveling","grovelling"],["grueling","gruelling"],["gruelingly","gruellingly"],["imperiled","imperilled"],["imperiling","imperilling"],["initialed","initialled"],["initialing","initialling"],["jeweled","jewelled"],["jeweler","jeweller"],["jewelers","jewellers"],["labeled","labelled"],["labeler","labeller"],["labelers","labellers"],["labeling","labelling"],["labelings","labellings"],["leveled","levelled"],["leveler","leveller"],["levelers","levellers"],["leveling","levelling"],["libeled","libelled"],["libeling","libelling"],["libelous","libellous"],["marshaled","marshalled"],["marshaling","marshalling"],["marveled","marvelled"],["marveling","marvelling"],["marvelous","marvellous"],["marvelously","marvellously"],["modeled","modelled"],["modeler","modeller"],["modelers","modellers"],["modeling","modelling"],["modelings","modellings"],["paneled","panelled"],["paneling","panelling"],["panelist","panellist"],["panelists","panellists"],["parceled","parcelled"],["parceling","parcelling"],["pedaled","pedalled"],["pedaling","pedalling"],["penciled","pencilled"],["penciling","pencilling"],["percent","per cent"],["persnickety","pernickety"],["quarreled","quarrelled"],["quarreling","quarrelling"],["raveled","ravelled"],["raveling","ravelling"],["refueled","refuelled"],["refueling","refuelling"],["refuelings","refuellings"],["remodeled","remodelled"],["remodeling","remodelling"],["remodelings","remodellings"],["reveled","revelled"],["reveler","reveller"],["revelers","revellers"],["reveling","revelling"],["rivaled","rivalled"],["rivaling","rivalling"],["shoveled","shovelled"],["shoveling","shovelling"],["shriveled","shrivelled"],["shriveling","shrivelling"],["signaled","signalled"],["signaling","signalling"],["signalings","signallings"],["sniveled","snivelled"],["sniveling","snivelling"],["snorkeled","snorkelled"],["snorkeling","snorkelling"],["spiraled","spiralled"],["spiraling","spiralling"],["squirreled","squirrelled"],["squirreling","squirrelling"],["stenciled","stencilled"],["stenciling","stencilling"],["swiveled","swivelled"],["swiveling","swivelling"],["tasseled","tasselled"],["totaled","totalled"],["totaling","totalling"],["toweled","towelled"],["toweling","towelling"],["towelings","towellings"],["trammeled","trammelled"],["trammeling","trammelling"],["tranquility","tranquillity"],["tranquilize","tranquillize"],["tranquilized","tranquillized"],["tranquilizer","tranquillizer"],["tranquilizers","tranquillizers"],["tranquilizes","tranquillizes"],["tranquilizing","tranquillizing"],["traveled","travelled"],["traveler","traveller"],["travelers","travellers"],["traveling","travelling"],["travelings","travellings"],["trialed","trialled"],["trialing","trialling"],["tunneled","tunnelled"],["tunneling","tunnelling"],["tunnelings","tunnellings"],["unequaled","unequalled"],["unraveled","unravelled"],["unraveling","unravelling"],["unrivaled","unrivalled"],["untrammeled","untrammelled"],["weaseled","weaselled"],["weaseling","weaselling"],["woolen","woollen"],["woolens","woollens"],["woolier","woollier"],["woolies","woollies"],["wooliest","woolliest"],["wooly","woolly"],["yodeled","yodelled"],["yodeling","yodelling"],["ambercolored","ambercoloured"],["anticolor","anticolour"],["anticolors","anticolours"],["apricotcolored","apricotcoloured"],["arbor","arbour"],["arbors","arbours"],["ardor","ardour"],["ardors","ardours"],["armor","armour"],["armored","armoured"],["armorer","armourer"],["armorers","armourers"],["armories","armouries"],["armoring","armouring"],["armors","armours"],["armory","armoury"],["ashcolored","ashcoloured"],["aurora-colored","aurora-coloured"],["behavior","behaviour"],["behavioral","behavioural"],["behaviorism","behaviourism"],["behaviorisms","behaviourisms"],["behaviorist","behaviourist"],["behaviorists","behaviourists"],["behaviors","behaviours"],["belabor","belabour"],["belabored","belaboured"],["belaboring","belabouring"],["belabors","belabours"],["bicolor","bicolour"],["bicoloration","bicolouration"],["bicolored","bicoloured"],["bodycolor","bodycolour"],["brasscolored","brasscoloured"],["brickcolored","brickcoloured"],["brightly-colored","brightly-coloured"],["buff-colored","buff-coloured"],["burgundycolored","burgundycoloured"],["candor","candour"],["cherrycolored","cherrycoloured"],["chestnut-colored","chestnut-coloured"],["chocolate-colored","chocolate-coloured"],["cinnamon-colored","cinnamon-coloured"],["citroncolored","citroncoloured"],["clamor","clamour"],["clamored","clamoured"],["clamoring","clamouring"],["clamorings","clamourings"],["clamors","clamours"],["clangor","clangour"],["claretcolored","claretcoloured"],["color","colour"],["color-blind","colour-blind"],["color-blindness","colour-blindness"],["color-coordinate","colour-coordinate"],["color-coordinated","colour-coordinated"],["colorability","colourability"],["colorable","colourable"],["colorably","colourably"],["colorant","colourant"],["colorants","colourants"],["coloration","colouration"],["colorational","colourational"],["colorations","colourations"],["colorative","colourative"],["colorbearer","colourbearer"],["colorblind","colourblind"],["colorblindness","colourblindness"],["colorcast","colourcast"],["colorcaster","colourcaster"],["colored","coloured"],["coloreds","coloureds"],["colorer","colourer"],["colorers","colourers"],["colorfast","colourfast"],["colorfastness","colourfastness"],["colorful","colourful"],["colorfully","colourfully"],["colorfulness","colourfulness"],["colorific","colourific"],["colorimeter","colourimeter"],["colorimeters","colourimeters"],["colorimetric","colourimetric"],["colorimetrical","colourimetrical"],["colorimetrically","colourimetrically"],["colorimetry","colourimetry"],["colorin\'","colourin\'"],["coloring","colouring"],["colorings","colourings"],["colorisation","colourisation"],["colorise","colourise"],["colorism","colourism"],["colorisms","colourisms"],["colorist","colourist"],["coloristic","colouristic"],["coloristically","colouristically"],["colorists","colourists"],["colorization","colourization"],["colorizations","colourizations"],["colorize","colourize"],["colorized","colourized"],["colorizer","colourizer"],["colorizes","colourizes"],["colorizin\'","colourizin\'"],["colorizing","colourizing"],["colorless","colourless"],["colorlessly","colourlessly"],["colorlessness","colourlessness"],["colormaker","colourmaker"],["colormakers","colourmakers"],["colormap","colourmap"],["colormaps","colourmaps"],["colormen","colourmen"],["colorous","colourous"],["colorphobia","colourphobia"],["colorpoint","colourpoint"],["colorpoints","colourpoints"],["colorpuncture","colourpuncture"],["colors","colours"],["colorspace","colourspace"],["colortype","colourtype"],["colorway","colourway"],["colorways","colourways"],["colorwise","colourwise"],["colorwork","colourwork"],["colter","coulter"],["colters","coulters"],["concolorous","concolourous"],["dark-colored","dark-coloured"],["decolor","decolour"],["decoloration","decolouration"],["decolorations","decolourations"],["decolored","decoloured"],["decoloring","decolouring"],["decolorisation","decolourisation"],["decolorisations","decolourisations"],["decolorise","decolourise"],["decolorised","decolourised"],["decoloriser","decolouriser"],["decolorises","decolourises"],["decolorising","decolourising"],["decolorization","decolourization"],["decolorize","decolourize"],["decolorized","decolourized"],["decolorizer","decolourizer"],["decolors","decolours"],["demeanor","demeanour"],["demeanors","demeanours"],["discolor","discolour"],["discoloration","discolouration"],["discolorations","discolourations"],["discolored","discoloured"],["discolorer","discolourer"],["discoloring","discolouring"],["discolorings","discolourings"],["discolorisation","discolourisation"],["discolorise","discolourise"],["discolorization","discolourization"],["discolorment","discolourment"],["discolorous","discolourous"],["discolors","discolours"],["disfavor","disfavour"],["dishonor","dishonour"],["dishonorable","dishonourable"],["dishonorably","dishonourably"],["dishonored","dishonoured"],["dishonoring","dishonouring"],["dishonors","dishonours"],["dolor","dolour"],["dolors","dolours"],["dun-colored","dun-coloured"],["dusky-colored","dusky-coloured"],["dustcolored","dustcoloured"],["enamor","enamour"],["enamored","enamoured"],["enamoring","enamouring"],["enamors","enamours"],["endeavor","endeavour"],["endeavored","endeavoured"],["endeavoring","endeavouring"],["endeavors","endeavours"],["favor","favour"],["favorable","favourable"],["favorably","favourably"],["favored","favoured"],["favoring","favouring"],["favorite","favourite"],["favorited","favourited"],["favorites","favourites"],["favoriting","favouriting"],["favoritism","favouritism"],["favors","favours"],["fawn-colored","fawn-coloured"],["fawncolored","fawncoloured"],["fervor","fervour"],["fervors","fervours"],["flame-colored","flame-coloured"],["flavor","flavour"],["flavored","flavoured"],["flavoring","flavouring"],["flavorings","flavourings"],["flavorless","flavourless"],["flavors","flavours"],["flavorsome","flavoursome"],["flesh-colored","flesh-coloured"],["fleshcolored","fleshcoloured"],["forecolor","forecolour"],["forecolors","forecolours"],["garnet-colored","garnet-coloured"],["glamor","glamour"],["gold-colored","gold-coloured"],["handcolor","handcolour"],["harbor","harbour"],["harbored","harboured"],["harboring","harbouring"],["harbors","harbours"],["honey-colored","honey-coloured"],["honor","honour"],["honorable","honourable"],["honorably","honourably"],["honored","honoured"],["honoring","honouring"],["honors","honours"],["humor","humour"],["humored","humoured"],["humoring","humouring"],["humorless","humourless"],["humors","humours"],["labor","labour"],["labored","laboured"],["laborer","labourer"],["laborers","labourers"],["laboring","labouring"],["labors","labours"],["lead-colored","lead-coloured"],["metal-colored","metal-coloured"],["metallic-colored","metallic-coloured"],["misbehavior","misbehaviour"],["misbehaviors","misbehaviours"],["miscolor","miscolour"],["miscoloration","miscolouration"],["miscolored","miscoloured"],["miscoloring","miscolouring"],["miscolors","miscolours"],["misdemeanor","misdemeanour"],["misdemeanors","misdemeanours"],["mold","mould"],["molded","moulded"],["molder","moulder"],["moldered","mouldered"],["moldering","mouldering"],["molders","moulders"],["moldier","mouldier"],["moldiest","mouldiest"],["molding","moulding"],["moldings","mouldings"],["molds","moulds"],["moldy","mouldy"],["molt","moult"],["molted","moulted"],["molting","moulting"],["molts","moults"],["monocolored","monocoloured"],["multi-color","multi-colour"],["multi-colored","multi-coloured"],["multicolor","multicolour"],["multicolored","multicoloured"],["multicolors","multicolours"],["neighbor","neighbour"],["neighborhood","neighbourhood"],["neighborhoods","neighbourhoods"],["neighboring","neighbouring"],["neighborliness","neighbourliness"],["neighborly","neighbourly"],["neighbors","neighbours"],["neutral-colored","neutral-coloured"],["odor","odour"],["odorless","odourless"],["odors","odours"],["off-color","off-colour"],["olive-colored","olive-coloured"],["orange-colored","orange-coloured"],["overcolor","overcolour"],["overcolored","overcoloured"],["parlor","parlour"],["parlormaid","parlourmaid"],["parlormaids","parlourmaids"],["parlors","parlours"],["particolored","particoloured"],["peachy-colored","peachy-coloured"],["pseudocolor","pseudocolour"],["pseudocolored","pseudocoloured"],["pseudocoloring","pseudocolouring"],["pseudocolors","pseudocolours"],["rancor","rancour"],["recolor","recolour"],["recolorable","recolourable"],["recoloration","recolouration"],["recolorations","recolourations"],["recolored","recoloured"],["recolorin\'","recolourin\'"],["recoloring","recolouring"],["recolors","recolours"],["remold","remould"],["remolded","remoulded"],["remolding","remoulding"],["remolds","remoulds"],["rigor","rigour"],["rigors","rigours"],["rose-colored","rose-coloured"],["rumor","rumour"],["rumored","rumoured"],["rumoring","rumouring"],["rumormonger","rumourmonger"],["rumormongers","rumourmongers"],["rumors","rumours"],["savior","saviour"],["saviors","saviours"],["savor","savour"],["savored","savoured"],["savories","savouries"],["savoring","savouring"],["savors","savours"],["savory","savoury"],["self-colored","self-coloured"],["smolder","smoulder"],["smoldered","smouldered"],["smoldering","smouldering"],["smolders","smoulders"],["snuff-color","snuff-colour"],["solid-colored","solid-coloured"],["splendor","splendour"],["splendors","splendours"],["straw-colored","straw-coloured"],["succor","succour"],["succored","succoured"],["succoring","succouring"],["succors","succours"],["tawny-colored","tawny-coloured"],["technicolor","technicolour"],["technicolored","technicoloured"],["topcolor","topcolour"],["tricolor","tricolour"],["tricolored","tricoloured"],["tricolorous","tricolourous"],["tricolors","tricolours"],["tumor","tumour"],["tumors","tumours"],["uncolorable","uncolourable"],["uncolored","uncoloured"],["uncolorful","uncolourful"],["unfavorable","unfavourable"],["unfavorably","unfavourably"],["unicolor","unicolour"],["unicolorous","unicolourous"],["unsavory","unsavoury"],["valor","valour"],["vapor","vapour"],["vapored","vapoured"],["vaporing","vapouring"],["vapors","vapours"],["varicolored","varicoloured"],["versicolored","versicoloured"],["vigor","vigour"],["violet-colored","violet-coloured"],["water-color","water-colour"],["watercolor","watercolour"],["watercolored","watercoloured"],["watercolorist","watercolourist"],["watercolorists","watercolourists"],["watercolors","watercolours"],["wine-colored","wine-coloured"],["accouterment","accoutrement"],["accouterments","accoutrements"],["amphitheater","amphitheatre"],["amphitheaters","amphitheatres"],["caliber","calibre"],["calibers","calibres"],["center","centre"],["centerboard","centreboard"],["centerfold","centrefold"],["centerfolds","centrefolds"],["centerpiece","centrepiece"],["centerpieces","centrepieces"],["centers","centres"],["centiliter","centilitre"],["centiliters","centilitres"],["centimeter","centimetre"],["centimeters","centimetres"],["epicenter","epicentre"],["epicenters","epicentres"],["fiber","fibre"],["fiberglass","fibreglass"],["fibers","fibres"],["goiter","goitre"],["goiters","goitres"],["kilometer","kilometre"],["kilometers","kilometres"],["lackluster","lacklustre"],["liter","litre"],["liters","litres"],["louver","louvre"],["louvers","louvres"],["luster","lustre"],["lusters","lustres"],["meager","meagre"],["metacenter","metacentre"],["metacenters","metacentres"],["micrometer","micrometre"],["micrometers","micrometres"],["milliliter","millilitre"],["milliliters","millilitres"],["millimeter","millimetre"],["millimeters","millimetres"],["miter","mitre"],["miters","mitres"],["niter","nitre"],["philter","philtre"],["philters","philtres"],["reconnoiter","reconnoitre"],["reconnoiters","reconnoitres"],["saber","sabre"],["sabers","sabres"],["saltpeter","saltpetre"],["scepter","sceptre"],["scepters","sceptres"],["sepulcher","sepulchre"],["sepulchers","sepulchres"],["somber","sombre"],["specter","spectre"],["specters","spectres"],["theater","theatre"],["theatergoer","theatregoer"],["theatergoers","theatregoers"],["theaters","theatres"],["ameba","amoeba"],["anemia","anaemia"],["anemias","anaemias"],["anemic","anaemic"],["anesthesia","anaesthesia"],["anesthesias","anaesthesias"],["anesthetic","anaesthetic"],["anesthetics","anaesthetics"],["anesthetist","anaesthetist"],["anesthetists","anaesthetists"],["anesthetize","anaesthetize"],["anesthetized","anaesthetized"],["anesthetizes","anaesthetizes"],["anesthetizing","anaesthetizing"],["archeological","archaeological"],["archeologically","archaeologically"],["archeologist","archaeologist"],["archeologists","archaeologists"],["archeology","archaeology"],["bougainvillea","bougainvillaea"],["bougainvilleas","bougainvillaeas"],["cesium","caesium"],["chimera","chimaera"],["chimeras","chimaeras"],["cyclopedia","cyclopaedia"],["diarrhea","diarrhoea"],["diarrheas","diarrhoeas"],["fecal","faecal"],["feces","faeces"],["gonorrhea","gonorrhoea"],["gonorrheas","gonorrhoeas"],["gynecological","gynaecological"],["gynecologies","gynaecologies"],["gynecologist","gynaecologist"],["gynecologists","gynaecologists"],["gynecology","gynaecology"],["hematein","haematein"],["hemateins","haemateins"],["hematological","haematological"],["hematologist","haematologist"],["hematologists","haematologists"],["hematology","haematology"],["hemoglobin","haemoglobin"],["hemoglobins","haemoglobins"],["hemophilia","haemophilia"],["hemophiliac","haemophiliac"],["hemophiliacs","haemophiliacs"],["hemorrhage","haemorrhage"],["hemorrhaged","haemorrhaged"],["hemorrhages","haemorrhages"],["hemorrhaging","haemorrhaging"],["hemorrhoid","haemorrhoid"],["hemorrhoids","haemorrhoids"],["homeopath","homoeopath"],["homeopathic","homoeopathic"],["homeopaths","homoeopaths"],["homeopathy","homoeopathy"],["leukemia","leukaemia"],["leukemias","leukaemias"],["menorrhea","menorrhoea"],["orthopedic","orthopaedic"],["orthopedics","orthopaedics"],["paleobotany","palaeobotany"],["paleocene","palaeocene"],["paleoclimatology","palaeoclimatology"],["paleogeography","palaeogeography"],["paleographies","palaeographies"],["paleography","palaeography"],["paleolithic","palaeolithic"],["paleomagnetism","palaeomagnetism"],["paleontologist","palaeontologist"],["paleontologists","palaeontologists"],["paleontology","palaeontology"],["paleozoic","palaeozoic"],["pederast","paederast"],["pederasts","paederasts"],["pediatrician","paediatrician"],["pediatricians","paediatricians"],["pediatrics","paediatrics"],["pedophile","paedophile"],["pedophiles","paedophiles"],["pedophilia","paedophilia"],["pharmacopeia","pharmacopoeia"],["pharmacopeias","pharmacopoeias"],["presidium","praesidium"],["presidiums","praesidiums"],["primeval","primaeval"],["toxemia","toxaemia"],["toxemias","toxaemias"],["defense","defence"],["defenseless","defenceless"],["defenses","defences"],["offense","offence"],["offenses","offences"],["pretense","pretence"],["pretenses","pretences"],["vise","vice"],["vises","vices"],["abridgment","abridgement"],["abridgments","abridgements"],["acknowledgment","acknowledgement"],["acknowledgments","acknowledgements"],["aerogram","aerogramme"],["aerograms","aerogrammes"],["afterward","afterwards"],["aging","ageing"],["agings","ageings"],["airplane","aeroplane"],["airplanes","aeroplanes"],["almanac","almanack"],["almanacs","almanacks"],["aluminum","aluminium"],["ambiance","ambience"],["ambiances","ambiences"],["analog","analogue"],["analogs","analogues"],["annex","annexe"],["apothegm","apophthegm"],["apothegms","apophthegms"],["appall","appal"],["appalls","appals"],["arbores","arbours"],["archiepiscopal","archepiscopal"],["artifact","artefact"],["artifacts","artefacts"],["ax","axe"],["backward","backwards"],["balk","baulk"],["balked","baulked"],["balking","baulking"],["balks","baulks"],["banister","bannister"],["banisters","bannisters"],["battleax","battleaxe"],["behoove","behove"],["behooved","behoved"],["behooves","behoves"],["behooving","behoving"],["bevies","bevvies"],["bevy","bevvy"],["carburetor","carburettor"],["carburetors","carburettors"],["catalog","catalogue"],["cataloged","catalogued"],["cataloging","cataloguing"],["catalogs","catalogues"],["centered","centred"],["centering","centring"],["centerings","centrings"],["checkbook","chequebook"],["checkbooks","chequebooks"],["cipher","cypher"],["ciphers","cyphers"],["clarinetist","clarinettist"],["clarinetists","clarinettists"],["collectible","collectable"],["collectibles","collectables"],["colonnaded","collonaded"],["conjuror","conjurer"],["cozied","cosied"],["cozier","cosier"],["cozies","cosies"],["coziest","cosiest"],["cozily","cosily"],["coziness","cosiness"],["cozy","cosy"],["cozying","cosying"],["dialog","dialogue"],["dialogs","dialogues"],["dike","dyke"],["diked","dyked"],["dikes","dykes"],["distill","distil"],["distills","distils"],["donut","doughnut"],["donuts","doughnuts"],["doodad","doodah"],["doodads","doodahs"],["edema","oedema"],["edemata","oedemata"],["enology","oenology"],["enroll","enrol"],["enrolls","enrols"],["ensorcell","ensorcel"],["ensorcelled","ensorceled"],["ensorcelling","ensorceling"],["ensorcells","ensorcels"],["enthrall","enthral"],["enthralls","enthrals"],["eon","aeon"],["eons","aeons"],["epaulet","epaulette"],["epaulets","epaulettes"],["epilog","epilogue"],["epilogs","epilogues"],["esophageal","oesophagal"],["esophagoscope","oesophagoscope"],["esophagus","oesophagus"],["estrous","oestrous"],["etiology","aetiology"],["fledgling","fledgeling"],["fledglings","fledgelings"],["flutist","flautist"],["flutists","flautists"],["fulfill","fulfil"],["fulfillment","fulfilment"],["fulfills","fulfils"],["furor","furore"],["furors","furores"],["galoshes","goloshes"],["gantlet","gauntlet"],["gantlets","gauntlets"],["gluing","glueing"],["gray","grey"],["grayed","greyed"],["grayer","greyer"],["grayest","greyest"],["graying","greying"],["grayish","greyish"],["grayness","greyness"],["grays","greys"],["griffin","gryphon"],["griffins","gryphons"],["gypsies","gipsies"],["gypsy","gipsy"],["hauler","haulier"],["haulers","hauliers"],["impanel","empanel"],["impaneled","empanelled"],["impaneling","empanelling"],["impanels","empanels"],["inflection","inflexion"],["inflections","inflexions"],["installment","instalment"],["installments","instalments"],["instill","instil"],["instills","instils"],["jewelry","jewellery"],["kidnaped","kidnapped"],["leaped","leapt"],["licorice","liquorice"],["licorices","liquorices"],["likable","likeable"],["louvered","louvred"],["lustered","lustred"],["lustering","lustring"],["maneuver","manoeuvre"],["maneuverability","manoeuvrability"],["maneuverable","manoeuvrable"],["maneuvered","manoeuvred"],["maneuvering","manoeuvring"],["maneuverings","manoeuvrings"],["maneuvers","manoeuvres"],["meagerest","meagrest"],["mementos","mementoes"],["minibusses","minibuses"],["misspelled","misspelt"],["mitered","mitred"],["mitering","mitring"],["mollusk","mollusc"],["mollusks","molluscs"],["monolog","monologue"],["monologs","monologues"],["mustache","moustache"],["mustached","moustached"],["mustaches","moustaches"],["mustachioed","moustachioed"],["naught","nought"],["omelet","omelette"],["omelets","omelettes"],["outmaneuver","outmanoeuvre"],["outmaneuvered","outmanoeuvred"],["outmaneuvering","outmanoeuvring"],["outmaneuvers","outmanoeuvres"],["pajama","pyjama"],["pajamas","pyjamas"],["philtered","philtred"],["philtering","philtring"],["phony","phoney"],["plow","plough"],["plowboy","ploughboy"],["plowboys","ploughboys"],["plowed","ploughed"],["plower","plougher"],["plowers","ploughers"],["plowgirl","ploughgirl"],["plowgirls","ploughgirls"],["plowing","ploughing"],["plowings","ploughings"],["plowland","ploughland"],["plowlands","ploughlands"],["plowman","ploughman"],["plowmen","ploughmen"],["plows","ploughs"],["plowshare","ploughshare"],["plowshares","ploughshares"],["plowwoman","ploughwoman"],["plowwomen","ploughwomen"],["plowwright","ploughwright"],["plowwrights","ploughwrights"],["polyethylene","polyethene"],["pouf","pouffe"],["poufs","pouffes"],["practiced","practised"],["practicing","practising"],["prolog","prologue"],["prologs","prologues"],["quire","choir"],["quired","choired"],["quires","choirs"],["quiring","choiring"],["reconnoitered","reconnoitred"],["reconnoitering","reconnoitring"],["reconnoiterings","reconnoitrings"],["retroflection","retroflexion"],["retroflections","retroflexions"],["sceptered","sceptred"],["sceptering","sceptring"],["selvage","selvedge"],["selvages","selvedges"],["sepulchered","sepulchred"],["sepulchering","sepulchring"],["sheik","sheikh"],["sheiks","sheikhs"],["skeptic","sceptic"],["skeptical","sceptical"],["skeptically","sceptically"],["skepticism","scepticism"],["skepticisms","scepticisms"],["skepticist","scepticist"],["skepticists","scepticists"],["skeptics","sceptics"],["skillful","skilful"],["sled","sledge"],["sledded","sledged"],["sledding","sledging"],["sleddings","sledgings"],["sleds","sledges"],["snowplow","snowplough"],["snowplowed","snowploughed"],["snowplowing","snowploughing"],["snowplows","snowploughs"],["somberer","sombrer"],["somberest","sombrest"],["specialties","specialities"],["specialty","speciality"],["spelled","spelt"],["spilled","spilt"],["tableting","tabletting"],["transshipment","transhipment"],["travelog","travelogue"],["travelogs","travelogues"],["worshiped","worshipped"],["worshiping","worshipping"],["yogurt","yoghurt"],["yogurts","yoghurts"]],"canadian":[["arbor","arbour"],["arbors","arbours"],["ardor","ardour"],["ardors","ardours"],["armor","armour"],["armored","armoured"],["armorer","armourer"],["armorers","armourers"],["armories","armouries"],["armoring","armouring"],["armors","armours"],["armory","armoury"],["behavior","behaviour"],["behavioral","behavioural"],["behaviorism","behaviourism"],["behaviorisms","behaviourisms"],["behaviorist","behaviourist"],["behaviorists","behaviourists"],["behaviors","behaviours"],["belabor","belabour"],["belabored","belaboured"],["belaboring","belabouring"],["belabors","belabours"],["candor","candour"],["clamor","clamour"],["clamored","clamoured"],["clamoring","clamouring"],["clamorings","clamourings"],["clamors","clamours"],["clangor","clangour"],["color","colour"],["colorant","colourant"],["colorants","colourants"],["colored","coloured"],["coloreds","coloureds"],["colorful","colourful"],["colorfully","colourfully"],["coloring","colouring"],["colorings","colourings"],["colorize","colourize"],["colorized","colourized"],["colorizes","colourizes"],["colorizing","colourizing"],["colorless","colourless"],["colors","colours"],["colter","coulter"],["colters","coulters"],["demeanor","demeanour"],["demeanors","demeanours"],["discolor","discolour"],["discolored","discoloured"],["discoloring","discolouring"],["discolors","discolours"],["disfavor","disfavour"],["dishonor","dishonour"],["dishonorable","dishonourable"],["dishonorably","dishonourably"],["dishonored","dishonoured"],["dishonoring","dishonouring"],["dishonors","dishonours"],["dolor","dolour"],["dolors","dolours"],["enamor","enamour"],["enamored","enamoured"],["enamoring","enamouring"],["enamors","enamours"],["endeavor","endeavour"],["endeavored","endeavoured"],["endeavoring","endeavouring"],["endeavors","endeavours"],["favor","favour"],["favorable","favourable"],["favorably","favourably"],["favored","favoured"],["favoring","favouring"],["favorite","favourite"],["favorited","favourited"],["favorites","favourites"],["favoriting","favouriting"],["favoritism","favouritism"],["favors","favours"],["fervor","fervour"],["fervors","fervours"],["flavor","flavour"],["flavored","flavoured"],["flavoring","flavouring"],["flavorings","flavourings"],["flavorless","flavourless"],["flavors","flavours"],["flavorsome","flavoursome"],["glamor","glamour"],["harbor","harbour"],["harbored","harboured"],["harboring","harbouring"],["harbors","harbours"],["honor","honour"],["honorable","honourable"],["honorably","honourably"],["honored","honoured"],["honoring","honouring"],["honors","honours"],["humor","humour"],["humored","humoured"],["humoring","humouring"],["humorless","humourless"],["humors","humours"],["labor","labour"],["labored","laboured"],["laborer","labourer"],["laborers","labourers"],["laboring","labouring"],["labors","labours"],["misbehavior","misbehaviour"],["misbehaviors","misbehaviours"],["misdemeanor","misdemeanour"],["misdemeanors","misdemeanours"],["mold","mould"],["molded","moulded"],["molder","moulder"],["moldered","mouldered"],["moldering","mouldering"],["molders","moulders"],["moldier","mouldier"],["moldiest","mouldiest"],["molding","moulding"],["moldings","mouldings"],["molds","moulds"],["moldy","mouldy"],["molt","moult"],["molted","moulted"],["molting","moulting"],["molts","moults"],["multicolor","multicolour"],["multicolored","multicoloured"],["neighbor","neighbour"],["neighborhood","neighbourhood"],["neighborhoods","neighbourhoods"],["neighboring","neighbouring"],["neighborliness","neighbourliness"],["neighborly","neighbourly"],["neighbors","neighbours"],["odor","odour"],["odorless","odourless"],["odors","odours"],["parlor","parlour"],["parlormaid","parlourmaid"],["parlormaids","parlourmaids"],["parlors","parlours"],["rancor","rancour"],["remold","remould"],["remolded","remoulded"],["remolding","remoulding"],["remolds","remoulds"],["rigor","rigour"],["rigors","rigours"],["rumor","rumour"],["rumored","rumoured"],["rumoring","rumouring"],["rumormonger","rumourmonger"],["rumormongers","rumourmongers"],["rumors","rumours"],["savior","saviour"],["saviors","saviours"],["savor","savour"],["savored","savoured"],["savories","savouries"],["savoring","savouring"],["savors","savours"],["savory","savoury"],["smolder","smoulder"],["smoldered","smouldered"],["smoldering","smouldering"],["smolders","smoulders"],["splendor","splendour"],["splendors","splendours"],["succor","succour"],["succored","succoured"],["succoring","succouring"],["succors","succours"],["technicolor","technicolour"],["tricolor","tricolour"],["tricolors","tricolours"],["tumor","tumour"],["tumors","tumours"],["unfavorable","unfavourable"],["unfavorably","unfavourably"],["unsavory","unsavoury"],["valor","valour"],["vapor","vapour"],["vapored","vapoured"],["vaporing","vapouring"],["vapors","vapours"],["vigor","vigour"],["watercolor","watercolour"],["watercolors","watercolours"],["accouterment","accoutrement"],["accouterments","accoutrements"],["amphitheater","amphitheatre"],["amphitheaters","amphitheatres"],["caliber","calibre"],["calibers","calibres"],["centerboard","centreboard"],["centerfold","centrefold"],["centerfolds","centrefolds"],["centerpiece","centrepiece"],["centerpieces","centrepieces"],["centiliter","centilitre"],["centiliters","centilitres"],["centimeter","centimetre"],["centimeters","centimetres"],["epicenter","epicentre"],["epicenters","epicentres"],["fiber","fibre"],["fiberglass","fibreglass"],["fibers","fibres"],["goiter","goitre"],["goiters","goitres"],["kilometer","kilometre"],["kilometers","kilometres"],["lackluster","lacklustre"],["liter","litre"],["liters","litres"],["louver","louvre"],["louvers","louvres"],["luster","lustre"],["lusters","lustres"],["meager","meagre"],["metacenter","metacentre"],["metacenters","metacentres"],["micrometer","micrometre"],["micrometers","micrometres"],["milliliter","millilitre"],["milliliters","millilitres"],["millimeter","millimetre"],["millimeters","millimetres"],["miter","mitre"],["miters","mitres"],["niter","nitre"],["philter","philtre"],["philters","philtres"],["reconnoiter","reconnoitre"],["reconnoiters","reconnoitres"],["saber","sabre"],["sabers","sabres"],["saltpeter","saltpetre"],["scepter","sceptre"],["scepters","sceptres"],["sepulcher","sepulchre"],["sepulchers","sepulchres"],["somber","sombre"],["specter","spectre"],["specters","spectres"],["theater","theatre"],["theatergoer","theatregoer"],["theatergoers","theatregoers"],["theaters","theatres"],["backpedaled","backpedalled"],["backpedaling","backpedalling"],["bedeviled","bedevilled"],["bedeviling","bedevilling"],["bejeweled","bejewelled"],["beveled","bevelled"],["caliper","calliper"],["calipers","callipers"],["calisthenics","callisthenics"],["cancelation","cancellation"],["cancelations","cancellations"],["canceled","cancelled"],["canceling","cancelling"],["caroled","carolled"],["caroling","carolling"],["carolings","carollings"],["caviled","cavilled"],["caviling","cavilling"],["cavilings","cavillings"],["channeled","channelled"],["channeling","channelling"],["chili","chilli"],["chilies","chillies"],["chiseled","chiselled"],["chiseling","chiselling"],["councilor","councillor"],["councilors","councillors"],["counseled","counselled"],["counseling","counselling"],["counselor","counsellor"],["counselors","counsellors"],["crenelate","crenellate"],["crenelated","crenellated"],["crenelates","crenellates"],["crenelating","crenellating"],["crueler","crueller"],["cruelest","cruellest"],["cudgeled","cudgelled"],["cudgeling","cudgelling"],["dialed","dialled"],["dialing","dialling"],["dialings","diallings"],["disemboweled","disembowelled"],["disemboweling","disembowelling"],["disembowelings","disembowellings"],["disheveled","dishevelled"],["driveled","drivelled"],["driveling","drivelling"],["dueled","duelled"],["dueling","duelling"],["empaneled","empanelled"],["empaneling","empanelling"],["enameled","enamelled"],["enameling","enamelling"],["equaled","equalled"],["funneled","funnelled"],["funneling","funnelling"],["gamboled","gambolled"],["gamboling","gambolling"],["graveled","gravelled"],["graveling","gravelling"],["groveled","grovelled"],["groveling","grovelling"],["grueling","gruelling"],["gruelingly","gruellingly"],["imperiled","imperilled"],["imperiling","imperilling"],["initialed","initialled"],["initialing","initialling"],["jeweled","jewelled"],["jeweler","jeweller"],["jewelers","jewellers"],["labeled","labelled"],["labeler","labeller"],["labelers","labellers"],["labeling","labelling"],["labelings","labellings"],["leveled","levelled"],["leveler","leveller"],["levelers","levellers"],["leveling","levelling"],["libeled","libelled"],["libeling","libelling"],["libelous","libellous"],["marshaled","marshalled"],["marshaling","marshalling"],["marveled","marvelled"],["marveling","marvelling"],["marvelous","marvellous"],["marvelously","marvellously"],["modeled","modelled"],["modeler","modeller"],["modelers","modellers"],["modeling","modelling"],["modelings","modellings"],["paneled","panelled"],["paneling","panelling"],["panelist","panellist"],["panelists","panellists"],["parceled","parcelled"],["parceling","parcelling"],["pedaled","pedalled"],["pedaling","pedalling"],["penciled","pencilled"],["penciling","pencilling"],["quarreled","quarrelled"],["quarreling","quarrelling"],["raveled","ravelled"],["raveling","ravelling"],["refueled","refuelled"],["refueling","refuelling"],["refuelings","refuellings"],["remodeled","remodelled"],["remodeling","remodelling"],["remodelings","remodellings"],["reveled","revelled"],["reveler","reveller"],["revelers","revellers"],["reveling","revelling"],["rivaled","rivalled"],["rivaling","rivalling"],["shoveled","shovelled"],["shoveling","shovelling"],["shriveled","shrivelled"],["shriveling","shrivelling"],["signaled","signalled"],["signaling","signalling"],["signalings","signallings"],["sniveled","snivelled"],["sniveling","snivelling"],["snorkeled","snorkelled"],["snorkeling","snorkelling"],["spiraled","spiralled"],["spiraling","spiralling"],["squirreled","squirrelled"],["squirreling","squirrelling"],["stenciled","stencilled"],["stenciling","stencilling"],["swiveled","swivelled"],["swiveling","swivelling"],["tasseled","tasselled"],["totaled","totalled"],["totaling","totalling"],["toweled","towelled"],["toweling","towelling"],["towelings","towellings"],["trammeled","trammelled"],["trammeling","trammelling"],["tranquility","tranquillity"],["tranquilize","tranquillize"],["tranquilized","tranquillized"],["tranquilizer","tranquillizer"],["tranquilizers","tranquillizers"],["tranquilizes","tranquillizes"],["tranquilizing","tranquillizing"],["traveled","travelled"],["traveler","traveller"],["travelers","travellers"],["traveling","travelling"],["travelings","travellings"],["trialed","trialled"],["trialing","trialling"],["tunneled","tunnelled"],["tunneling","tunnelling"],["tunnelings","tunnellings"],["unequaled","unequalled"],["unraveled","unravelled"],["unraveling","unravelling"],["unrivaled","unrivalled"],["untrammeled","untrammelled"],["weaseled","weaselled"],["weaseling","weaselling"],["woolen","woollen"],["woolens","woollens"],["woolier","woollier"],["woolies","woollies"],["wooliest","woolliest"],["wooly","woolly"],["yodeled","yodelled"],["yodeling","yodelling"],["defense","defence"],["defenseless","defenceless"],["defenses","defences"],["offense","offence"],["offenses","offences"],["vise","vice"],["vises","vices"],["abetalipoproteinaemia","abetalipoproteinemia"],["aeon","eon"],["aeons","eons"],["aetiology","etiology"],["agammaglobulinaemia","agammaglobulinemia"],["albuminaemia","albuminemia"],["alcoholaemia","alcoholemia"],["anaemia","anemia"],["anaemias","anemias"],["anaemic","anemic"],["anaesthesia","anesthesia"],["anaesthesias","anesthesias"],["anaesthetic","anesthetic"],["anaesthetics","anesthetics"],["anaesthetist","anesthetist"],["anaesthetists","anesthetists"],["anaesthetize","anesthetize"],["anaesthetized","anesthetized"],["anaesthetizes","anesthetizes"],["anaesthetizing","anesthetizing"],["anoxaemia","anoxemia"],["antigenaemia","antigenemia"],["antileukaemic","antileukemic"],["azotaemia","azotemia"],["bacteraemia","bacteremia"],["bougainvillaea","bougainvillea"],["bougainvillaeas","bougainvilleas"],["caesium","cesium"],["carboxyhaemoglobin","carboxyhemoglobin"],["caesarean","cesarean"],["chimaera","chimera"],["chimaeras","chimeras"],["chimaeric","chimeric"],["cholesterolaemia","cholesterolemia"],["cryoglobulinaemia","cryoglobulinemia"],["cyclopaedia","cyclopedia"],["deoxyhaemoglobin","deoxyhemoglobin"],["diarrhoea","diarrhea"],["diarrhoeas","diarrheas"],["dysbetalipoproteinaemia","dysbetalipoproteinemia"],["dyslipidaemia","dyslipidemia"],["encyclopaedia","encyclopedia"],["encyclopaediae","encyclopediae"],["encyclopaedias","encyclopedias"],["encyclopaedic","encyclopedic"],["endotoxaemia","endotoxemia"],["euglycaemia","euglycemia"],["faecal","fecal"],["faeces","feces"],["foetal","fetal"],["foetid","fetid"],["foetus","fetus"],["foetuses","fetuses"],["fungaemia","fungemia"],["galactosaemia","galactosemia"],["glycaemia","glycemia"],["gonorrhoea","gonorrhea"],["gonorrhoeas","gonorrheas"],["gynaecological","gynecological"],["gynaecologies","gynecologies"],["gynaecologist","gynecologist"],["gynaecologists","gynecologists"],["gynaecology","gynecology"],["haematein","hematein"],["haemateins","hemateins"],["haematocele","hematocele"],["haematocrit","hematocrit"],["haematocrits","hematocrits"],["haematogenous","hematogenous"],["haematological","hematological"],["haematologist","hematologist"],["haematologists","hematologists"],["haematology","hematology"],["haematoma","hematoma"],["haematomas","hematomas"],["haematophagous","hematophagous"],["haematopoiesis","hematopoiesis"],["haematopoietic","hematopoietic"],["haematoxylin","hematoxylin"],["haematoxylins","hematoxylins"],["haemochromatosis","hemochromatosis"],["haemocoel","hemocoel"],["haemocyanin","hemocyanin"],["haemocyte","hemocyte"],["haemocytes","hemocytes"],["haemocytometer","hemocytometer"],["haemodialyses","hemodialyses"],["haemodialysis","hemodialysis"],["haemodynamic","hemodynamic"],["haemodynamically","hemodynamically"],["haemodynamics","hemodynamics"],["haemogenic","hemogenic"],["haemoglobin","hemoglobin"],["haemoglobinopathies","hemoglobinopathies"],["haemoglobinopathy","hemoglobinopathy"],["haemoglobins","hemoglobins"],["haemoglobinuria","hemoglobinuria"],["haemoglobinurias","hemoglobinurias"],["haemolymph","hemolymph"],["haemolysate","hemolysate"],["haemolysin","hemolysin"],["haemolysins","hemolysins"],["haemolysis","hemolysis"],["haemolytic","hemolytic"],["haemophilia","hemophilia"],["haemophiliac","hemophiliac"],["haemophiliacs","hemophiliacs"],["haemophilic","hemophilic"],["haemophobia","hemophobia"],["haemopoiesis","hemopoiesis"],["haemopoietic","hemopoietic"],["haemoprotein","hemoprotein"],["haemoproteins","hemoproteins"],["haemoptysis","hemoptysis"],["haemorrhage","hemorrhage"],["haemorrhaged","hemorrhaged"],["haemorrhages","hemorrhages"],["haemorrhagic","hemorrhagic"],["haemorrhaging","hemorrhaging"],["haemorrhoid","hemorrhoid"],["haemorrhoids","hemorrhoids"],["haemostasis","hemostasis"],["haemostat","hemostat"],["haemostatic","hemostatic"],["haemostats","hemostats"],["haemotoxylin","hemotoxylin"],["haemozoin","hemozoin"],["histidinaemia","histidinemia"],["homoeopath","homeopath"],["homoeopathic","homeopathic"],["homoeopaths","homeopaths"],["homoeopathy","homeopathy"],["homoeostasis","homeostasis"],["hydraemia","hydremia"],["hyperaemia","hyperemia"],["hyperbilirubinaemia","hyperbilirubinemia"],["hypercalcaemia","hypercalcemia"],["hypercholesteraemia","hypercholesteremia"],["hypercholesterolaemia","hypercholesterolemia"],["hyperglycaemia","hyperglycemia"],["hyperhomocysteinaemia","hyperhomocysteinemia"],["hyperinsulinaemia","hyperinsulinemia"],["hyperkalaemia","hyperkalemia"],["hyperlipidaemia","hyperlipidemia"],["hyperlipoproteinaemia","hyperlipoproteinemia"],["hyperprolactinaemia","hyperprolactinemia"],["hypertriglyceridaemia","hypertriglyceridemia"],["hyperuricaemia","hyperuricemia"],["hypervolaemia","hypervolemia"],["hypoalbuminaemia","hypoalbuminemia"],["hypocalcaemia","hypocalcemia"],["hypogammaglobulinaemia","hypogammaglobulinemia"],["hypoglycaemia","hypoglycemia"],["hypoinsulinaemia","hypoinsulinemia"],["hypomagnesaemia","hypomagnesemia"],["hyponatraemia","hyponatremia"],["hypophosphataemia","hypophosphatemia"],["hypouricaemia","hypouricemia"],["hypoxaemia","hypoxemia"],["insulinaemia","insulinemia"],["ischaemia","ischemia"],["ketonaemia","ketonemia"],["leukaemia","leukemia"],["leukaemias","leukemias"],["leukaemic","leukemic"],["leukaemogenesis","leukemogenesis"],["macroglobulinaemia","macroglobulinemia"],["mediaeval","medieval"],["mediaevals","medievals"],["menorrhoea","menorrhea"],["methaemoglobin","methemoglobin"],["methaemoglobinaemia","methemoglobinaemia"],["methemoglobinaemia","methemoglobinemia"],["natraemia","natremia"],["nonhaemolytic","nonhemolytic"],["normokalaemia","normokalemia"],["oedema","edema"],["oedemata","edemata"],["oenology","enology"],["oesophagoscope","esophagoscope"],["oesophagus","esophagus"],["oestrogen","estrogen"],["oestrogens","estrogens"],["oestrous","estrous"],["orthopaedic","orthopedic"],["orthopaedics","orthopedics"],["oxyhaemoglobin","oxyhemoglobin"],["paedagogies","pedagogies"],["paedagogy","pedagogy"],["paederast","pederast"],["paederasts","pederasts"],["paediatric","pediatric"],["paediatrician","pediatrician"],["paediatricians","pediatricians"],["paediatrics","pediatrics"],["paedophile","pedophile"],["paedophiles","pedophiles"],["paedophilia","pedophilia"],["palaeobotany","paleobotany"],["palaeocene","paleocene"],["palaeoclimatology","paleoclimatology"],["palaeogeography","paleogeography"],["palaeographies","paleographies"],["palaeography","paleography"],["palaeolithic","paleolithic"],["palaeomagnetism","paleomagnetism"],["palaeontologist","paleontologist"],["palaeontologists","paleontologists"],["palaeontology","paleontology"],["palaeozoic","paleozoic"],["parasitaemia","parasitemia"],["pharmacopoeia","pharmacopeia"],["pharmacopoeias","pharmacopeias"],["polycythaemia","polycythemia"],["praesidium","presidium"],["praesidiums","presidiums"],["primaeval","primeval"],["pyaemia","pyemia"],["septicaemia","septicemia"],["thalassaemia","thalassemia"],["toxaemia","toxemia"],["toxaemias","toxemias"],["tyrosinaemia","tyrosinemia"],["uraemia","uremia"],["viraemia","viremia"],["bisulfate","bisulphate"],["bisulfates","bisulphates"],["bisulfite","bisulphite"],["bisulfites","bisulphites"],["disulfide","disulphide"],["disulfides","disulphides"],["hydrosulfite","hydrosulphite"],["hydrosulfites","hydrosulphites"],["pyrosulfite","pyrosulphite"],["pyrosulfites","pyrosulphites"],["sulfate","sulphate"],["sulfated","sulphated"],["sulfates","sulphates"],["sulfating","sulphating"],["sulfide","sulphide"],["sulfides","sulphides"],["sulfite","sulphite"],["sulfites","sulphites"],["sulfur","sulphur"],["sulfured","sulphured"],["sulfuring","sulphuring"],["sulfurous","sulphurous"],["sulfurs","sulphurs"],["aging","ageing"],["agings","ageings"],["ax","axe"],["battleax","battleaxe"],["catalog","catalogue"],["catalogs","catalogues"],["dialog","dialogue"],["dialogs","dialogues"],["epilog","epilogue"],["epilogs","epilogues"],["monolog","monologue"],["monologs","monologues"],["prolog","prologue"],["prologs","prologues"],["travelog","travelogue"],["travelogs","travelogues"],["instal","install"],["instaled","installed"],["instaling","installing"],["north-easts","northeasts"],["north-west","northwest"],["north-wests","northwests"],["south-east","southeast"],["south-easts","southeasts"],["south-west","southwest"],["south-wests","southwests"],["almanack","almanac"],["almanacks","almanacs"],["aluminium","aluminum"],["archepiscopal","archiepiscopal"],["artefact","artifact"],["artefacts","artifacts"],["atishoo","achoo"],["atishoos","achoos"],["baulk","balk"],["baulked","balked"],["baulking","balking"],["baulks","balks"],["behove","behoove"],["behoved","behooved"],["behoves","behooves"],["behoving","behooving"],["bevvies","bevies"],["bevvy","bevy"],["carcase","carcass"],["carcases","carcasses"],["centered","centred"],["centering","centring"],["centerings","centrings"],["checkbook","chequebook"],["checkbooks","chequebooks"],["collonaded","colonnaded"],["compleat","complete"],["compleated","completed"],["compleater","completer"],["compleaters","completers"],["compleates","completes"],["compleatest","completest"],["compleating","completing"],["cosied","cozied"],["cosier","cozier"],["cosies","cozies"],["cosiest","coziest"],["cosily","cozily"],["cosiness","coziness"],["cosy","cozy"],["cosying","cozying"],["doodah","doodad"],["doodahs","doodads"],["empanel","impanel"],["empanelled","impanelled"],["empanelling","impanelling"],["empanels","impanels"],["gaol","jail"],["gaolbird","jailbird"],["gaolbirds","jailbirds"],["gaolbreak","jailbreak"],["gaolbreaking","jailbreaking"],["gaolbreaks","jailbreaks"],["gaolbroke","jailbroke"],["gaolbroken","jailbroken"],["gaoled","jailed"],["gaoler","jailer"],["gaolers","jailers"],["gaoling","jailing"],["gaolings","jailings"],["gaols","jails"],["gipsies","gypsies"],["gipsy","gypsy"],["gryphon","griffin"],["gryphons","griffins"],["haulier","hauler"],["hauliers","haulers"],["inflexion","inflection"],["inflexions","inflections"],["kerb","curb"],["kerbed","curbed"],["kerbing","curbing"],["kerbings","curbings"],["kerbs","curbs"],["liquorice","licorice"],["liquorices","licorices"],["louvered","louvred"],["lustred","lustered"],["lustring","lustering"],["meagrest","meagerest"],["metred","metered"],["metring","metering"],["nett","net"],["pajama","pyjama"],["pajamas","pyjamas"],["philtred","philtered"],["philtring","philtering"],["prefered","preferred"],["prefereds","preferreds"],["racoon","raccoon"],["racoons","raccoons"],["reconnoitered","reconnoitred"],["reconnoitering","reconnoitring"],["reconnoiterings","reconnoitrings"],["retroflection","retroflexion"],["retroflections","retroflexions"],["sceptic","skeptic"],["sceptical","skeptical"],["sceptically","skeptically"],["scepticism","skepticism"],["scepticisms","skepticisms"],["scepticist","skepticist"],["scepticists","skepticists"],["sceptics","skeptics"],["sledge","sled"],["sledged","sledded"],["sledges","sleds"],["sledging","sledding"],["sledgings","sleddings"],["somberer","sombrer"],["somberest","sombrest"],["specialities","specialties"],["speciality","specialty"],["tabletting","tableting"],["tranship","transship"],["transhiped","transshiped"],["transhipment","transshipment"],["transhipping","transshipping"],["waggon","wagon"],["waggoned","wagoned"],["waggoning","wagoning"],["waggons","wagons"],["yoghourt","yogurt"],["yoghourts","yogurts"],["yoghurt","yogurt"],["yoghurts","yogurts"]],"indian":[["backpedaled","backpedalled"],["backpedaling","backpedalling"],["bedeviled","bedevilled"],["bedeviling","bedevilling"],["bejeweled","bejewelled"],["beveled","bevelled"],["caliper","calliper"],["calipers","callipers"],["calisthenics","callisthenics"],["cancelation","cancellation"],["cancelations","cancellations"],["canceled","cancelled"],["canceling","cancelling"],["caroled","carolled"],["caroling","carolling"],["carolings","carollings"],["caviled","cavilled"],["caviling","cavilling"],["cavilings","cavillings"],["channeled","channelled"],["channeling","channelling"],["chili","chilli"],["chilies","chillies"],["chiseled","chiselled"],["chiseling","chiselling"],["councilor","councillor"],["councilors","councillors"],["counseled","counselled"],["counseling","counselling"],["counselor","counsellor"],["counselors","counsellors"],["crenelate","crenellate"],["crenelated","crenellated"],["crenelates","crenellates"],["crenelating","crenellating"],["crueler","crueller"],["cruelest","cruellest"],["cudgeled","cudgelled"],["cudgeling","cudgelling"],["dialed","dialled"],["dialing","dialling"],["dialings","diallings"],["disemboweled","disembowelled"],["disemboweling","disembowelling"],["disembowelings","disembowellings"],["disheveled","dishevelled"],["driveled","drivelled"],["driveling","drivelling"],["dueled","duelled"],["dueling","duelling"],["empaneled","empanelled"],["empaneling","empanelling"],["enameled","enamelled"],["enameling","enamelling"],["equaled","equalled"],["funneled","funnelled"],["funneling","funnelling"],["gamboled","gambolled"],["gamboling","gambolling"],["graveled","gravelled"],["graveling","gravelling"],["groveled","grovelled"],["groveling","grovelling"],["grueling","gruelling"],["gruelingly","gruellingly"],["imperiled","imperilled"],["imperiling","imperilling"],["initialed","initialled"],["initialing","initialling"],["jeweled","jewelled"],["jeweler","jeweller"],["jewelers","jewellers"],["labeled","labelled"],["labeler","labeller"],["labelers","labellers"],["labeling","labelling"],["labelings","labellings"],["leveled","levelled"],["leveler","leveller"],["levelers","levellers"],["leveling","levelling"],["libeled","libelled"],["libeling","libelling"],["libelous","libellous"],["marshaled","marshalled"],["marshaling","marshalling"],["marveled","marvelled"],["marveling","marvelling"],["marvelous","marvellous"],["marvelously","marvellously"],["modeled","modelled"],["modeler","modeller"],["modelers","modellers"],["modeling","modelling"],["modelings","modellings"],["paneled","panelled"],["paneling","panelling"],["panelist","panellist"],["panelists","panellists"],["parceled","parcelled"],["parceling","parcelling"],["pedaled","pedalled"],["pedaling","pedalling"],["penciled","pencilled"],["penciling","pencilling"],["percent","per cent"],["persnickety","pernickety"],["quarreled","quarrelled"],["quarreling","quarrelling"],["raveled","ravelled"],["raveling","ravelling"],["refueled","refuelled"],["refueling","refuelling"],["refuelings","refuellings"],["remodeled","remodelled"],["remodeling","remodelling"],["remodelings","remodellings"],["reveled","revelled"],["reveler","reveller"],["revelers","revellers"],["reveling","revelling"],["rivaled","rivalled"],["rivaling","rivalling"],["shoveled","shovelled"],["shoveling","shovelling"],["shriveled","shrivelled"],["shriveling","shrivelling"],["signaled","signalled"],["signaling","signalling"],["signalings","signallings"],["sniveled","snivelled"],["sniveling","snivelling"],["snorkeled","snorkelled"],["snorkeling","snorkelling"],["spiraled","spiralled"],["spiraling","spiralling"],["squirreled","squirrelled"],["squirreling","squirrelling"],["stenciled","stencilled"],["stenciling","stencilling"],["swiveled","swivelled"],["swiveling","swivelling"],["tasseled","tasselled"],["totaled","totalled"],["totaling","totalling"],["toweled","towelled"],["toweling","towelling"],["towelings","towellings"],["trammeled","trammelled"],["trammeling","trammelling"],["tranquility","tranquillity"],["tranquilize","tranquillize"],["tranquilized","tranquillized"],["tranquilizer","tranquillizer"],["tranquilizers","tranquillizers"],["tranquilizes","tranquillizes"],["tranquilizing","tranquillizing"],["traveled","travelled"],["traveler","traveller"],["travelers","travellers"],["traveling","travelling"],["travelings","travellings"],["trialed","trialled"],["trialing","trialling"],["tunneled","tunnelled"],["tunneling","tunnelling"],["tunnelings","tunnellings"],["unequaled","unequalled"],["unraveled","unravelled"],["unraveling","unravelling"],["unrivaled","unrivalled"],["untrammeled","untrammelled"],["weaseled","weaselled"],["weaseling","weaselling"],["woolen","woollen"],["woolens","woollens"],["woolier","woollier"],["woolies","woollies"],["wooliest","woolliest"],["wooly","woolly"],["yodeled","yodelled"],["yodeling","yodelling"],["ambercolored","ambercoloured"],["anticolor","anticolour"],["anticolors","anticolours"],["apricotcolored","apricotcoloured"],["arbor","arbour"],["arbors","arbours"],["ardor","ardour"],["ardors","ardours"],["armor","armour"],["armored","armoured"],["armorer","armourer"],["armorers","armourers"],["armories","armouries"],["armoring","armouring"],["armors","armours"],["armory","armoury"],["ashcolored","ashcoloured"],["aurora-colored","aurora-coloured"],["behavior","behaviour"],["behavioral","behavioural"],["behaviorism","behaviourism"],["behaviorisms","behaviourisms"],["behaviorist","behaviourist"],["behaviorists","behaviourists"],["behaviors","behaviours"],["belabor","belabour"],["belabored","belaboured"],["belaboring","belabouring"],["belabors","belabours"],["bicolor","bicolour"],["bicoloration","bicolouration"],["bicolored","bicoloured"],["bodycolor","bodycolour"],["brasscolored","brasscoloured"],["brickcolored","brickcoloured"],["brightly-colored","brightly-coloured"],["buff-colored","buff-coloured"],["burgundycolored","burgundycoloured"],["candor","candour"],["cherrycolored","cherrycoloured"],["chestnut-colored","chestnut-coloured"],["chocolate-colored","chocolate-coloured"],["cinnamon-colored","cinnamon-coloured"],["citroncolored","citroncoloured"],["clamor","clamour"],["clamored","clamoured"],["clamoring","clamouring"],["clamorings","clamourings"],["clamors","clamours"],["clangor","clangour"],["claretcolored","claretcoloured"],["color","colour"],["color-blind","colour-blind"],["color-blindness","colour-blindness"],["color-coordinate","colour-coordinate"],["color-coordinated","colour-coordinated"],["colorability","colourability"],["colorable","colourable"],["colorably","colourably"],["colorant","colourant"],["colorants","colourants"],["coloration","colouration"],["colorational","colourational"],["colorations","colourations"],["colorative","colourative"],["colorbearer","colourbearer"],["colorblind","colourblind"],["colorblindness","colourblindness"],["colorcast","colourcast"],["colorcaster","colourcaster"],["colored","coloured"],["coloreds","coloureds"],["colorer","colourer"],["colorers","colourers"],["colorfast","colourfast"],["colorfastness","colourfastness"],["colorful","colourful"],["colorfully","colourfully"],["colorfulness","colourfulness"],["colorific","colourific"],["colorimeter","colourimeter"],["colorimeters","colourimeters"],["colorimetric","colourimetric"],["colorimetrical","colourimetrical"],["colorimetrically","colourimetrically"],["colorimetry","colourimetry"],["colorin\'","colourin\'"],["coloring","colouring"],["colorings","colourings"],["colorisation","colourisation"],["colorise","colourise"],["colorism","colourism"],["colorisms","colourisms"],["colorist","colourist"],["coloristic","colouristic"],["coloristically","colouristically"],["colorists","colourists"],["colorization","colourization"],["colorizations","colourizations"],["colorize","colourize"],["colorized","colourized"],["colorizer","colourizer"],["colorizes","colourizes"],["colorizin\'","colourizin\'"],["colorizing","colourizing"],["colorless","colourless"],["colorlessly","colourlessly"],["colorlessness","colourlessness"],["colormaker","colourmaker"],["colormakers","colourmakers"],["colormap","colourmap"],["colormaps","colourmaps"],["colormen","colourmen"],["colorous","colourous"],["colorphobia","colourphobia"],["colorpoint","colourpoint"],["colorpoints","colourpoints"],["colorpuncture","colourpuncture"],["colors","colours"],["colorspace","colourspace"],["colortype","colourtype"],["colorway","colourway"],["colorways","colourways"],["colorwise","colourwise"],["colorwork","colourwork"],["colter","coulter"],["colters","coulters"],["concolorous","concolourous"],["dark-colored","dark-coloured"],["decolor","decolour"],["decoloration","decolouration"],["decolorations","decolourations"],["decolored","decoloured"],["decoloring","decolouring"],["decolorisation","decolourisation"],["decolorisations","decolourisations"],["decolorise","decolourise"],["decolorised","decolourised"],["decoloriser","decolouriser"],["decolorises","decolourises"],["decolorising","decolourising"],["decolorization","decolourization"],["decolorize","decolourize"],["decolorized","decolourized"],["decolorizer","decolourizer"],["decolors","decolours"],["demeanor","demeanour"],["demeanors","demeanours"],["discolor","discolour"],["discoloration","discolouration"],["discolorations","discolourations"],["discolored","discoloured"],["discolorer","discolourer"],["discoloring","discolouring"],["discolorings","discolourings"],["discolorisation","discolourisation"],["discolorise","discolourise"],["discolorization","discolourization"],["discolorment","discolourment"],["discolorous","discolourous"],["discolors","discolours"],["disfavor","disfavour"],["dishonor","dishonour"],["dishonorable","dishonourable"],["dishonorably","dishonourably"],["dishonored","dishonoured"],["dishonoring","dishonouring"],["dishonors","dishonours"],["dolor","dolour"],["dolors","dolours"],["dun-colored","dun-coloured"],["dusky-colored","dusky-coloured"],["dustcolored","dustcoloured"],["enamor","enamour"],["enamored","enamoured"],["enamoring","enamouring"],["enamors","enamours"],["endeavor","endeavour"],["endeavored","endeavoured"],["endeavoring","endeavouring"],["endeavors","endeavours"],["favor","favour"],["favorable","favourable"],["favorably","favourably"],["favored","favoured"],["favoring","favouring"],["favorite","favourite"],["favorited","favourited"],["favorites","favourites"],["favoriting","favouriting"],["favoritism","favouritism"],["favors","favours"],["fawn-colored","fawn-coloured"],["fawncolored","fawncoloured"],["fervor","fervour"],["fervors","fervours"],["flame-colored","flame-coloured"],["flavor","flavour"],["flavored","flavoured"],["flavoring","flavouring"],["flavorings","flavourings"],["flavorless","flavourless"],["flavors","flavours"],["flavorsome","flavoursome"],["flesh-colored","flesh-coloured"],["fleshcolored","fleshcoloured"],["forecolor","forecolour"],["forecolors","forecolours"],["garnet-colored","garnet-coloured"],["glamor","glamour"],["gold-colored","gold-coloured"],["handcolor","handcolour"],["harbor","harbour"],["harbored","harboured"],["harboring","harbouring"],["harbors","harbours"],["honey-colored","honey-coloured"],["honor","honour"],["honorable","honourable"],["honorably","honourably"],["honored","honoured"],["honoring","honouring"],["honors","honours"],["humor","humour"],["humored","humoured"],["humoring","humouring"],["humorless","humourless"],["humors","humours"],["labor","labour"],["labored","laboured"],["laborer","labourer"],["laborers","labourers"],["laboring","labouring"],["labors","labours"],["lead-colored","lead-coloured"],["metal-colored","metal-coloured"],["metallic-colored","metallic-coloured"],["misbehavior","misbehaviour"],["misbehaviors","misbehaviours"],["miscolor","miscolour"],["miscoloration","miscolouration"],["miscolored","miscoloured"],["miscoloring","miscolouring"],["miscolors","miscolours"],["misdemeanor","misdemeanour"],["misdemeanors","misdemeanours"],["mold","mould"],["molded","moulded"],["molder","moulder"],["moldered","mouldered"],["moldering","mouldering"],["molders","moulders"],["moldier","mouldier"],["moldiest","mouldiest"],["molding","moulding"],["moldings","mouldings"],["molds","moulds"],["moldy","mouldy"],["molt","moult"],["molted","moulted"],["molting","moulting"],["molts","moults"],["monocolored","monocoloured"],["multi-color","multi-colour"],["multi-colored","multi-coloured"],["multicolor","multicolour"],["multicolored","multicoloured"],["multicolors","multicolours"],["neighbor","neighbour"],["neighborhood","neighbourhood"],["neighborhoods","neighbourhoods"],["neighboring","neighbouring"],["neighborliness","neighbourliness"],["neighborly","neighbourly"],["neighbors","neighbours"],["neutral-colored","neutral-coloured"],["odor","odour"],["odorless","odourless"],["odors","odours"],["off-color","off-colour"],["olive-colored","olive-coloured"],["orange-colored","orange-coloured"],["overcolor","overcolour"],["overcolored","overcoloured"],["parlor","parlour"],["parlormaid","parlourmaid"],["parlormaids","parlourmaids"],["parlors","parlours"],["particolored","particoloured"],["peachy-colored","peachy-coloured"],["pseudocolor","pseudocolour"],["pseudocolored","pseudocoloured"],["pseudocoloring","pseudocolouring"],["pseudocolors","pseudocolours"],["rancor","rancour"],["recolor","recolour"],["recolorable","recolourable"],["recoloration","recolouration"],["recolorations","recolourations"],["recolored","recoloured"],["recolorin\'","recolourin\'"],["recoloring","recolouring"],["recolors","recolours"],["remold","remould"],["remolded","remoulded"],["remolding","remoulding"],["remolds","remoulds"],["rigor","rigour"],["rigors","rigours"],["rose-colored","rose-coloured"],["rumor","rumour"],["rumored","rumoured"],["rumoring","rumouring"],["rumormonger","rumourmonger"],["rumormongers","rumourmongers"],["rumors","rumours"],["savior","saviour"],["saviors","saviours"],["savor","savour"],["savored","savoured"],["savories","savouries"],["savoring","savouring"],["savors","savours"],["savory","savoury"],["self-colored","self-coloured"],["smolder","smoulder"],["smoldered","smouldered"],["smoldering","smouldering"],["smolders","smoulders"],["snuff-color","snuff-colour"],["solid-colored","solid-coloured"],["splendor","splendour"],["splendors","splendours"],["straw-colored","straw-coloured"],["succor","succour"],["succored","succoured"],["succoring","succouring"],["succors","succours"],["tawny-colored","tawny-coloured"],["technicolor","technicolour"],["technicolored","technicoloured"],["topcolor","topcolour"],["tricolor","tricolour"],["tricolored","tricoloured"],["tricolorous","tricolourous"],["tricolors","tricolours"],["tumor","tumour"],["tumors","tumours"],["uncolorable","uncolourable"],["uncolored","uncoloured"],["uncolorful","uncolourful"],["unfavorable","unfavourable"],["unfavorably","unfavourably"],["unicolor","unicolour"],["unicolorous","unicolourous"],["unsavory","unsavoury"],["valor","valour"],["vapor","vapour"],["vapored","vapoured"],["vaporing","vapouring"],["vapors","vapours"],["varicolored","varicoloured"],["versicolored","versicoloured"],["vigor","vigour"],["violet-colored","violet-coloured"],["water-color","water-colour"],["watercolor","watercolour"],["watercolored","watercoloured"],["watercolorist","watercolourist"],["watercolorists","watercolourists"],["watercolors","watercolours"],["wine-colored","wine-coloured"],["accouterment","accoutrement"],["accouterments","accoutrements"],["amphitheater","amphitheatre"],["amphitheaters","amphitheatres"],["caliber","calibre"],["calibers","calibres"],["center","centre"],["centerboard","centreboard"],["centerfold","centrefold"],["centerfolds","centrefolds"],["centerpiece","centrepiece"],["centerpieces","centrepieces"],["centers","centres"],["centiliter","centilitre"],["centiliters","centilitres"],["centimeter","centimetre"],["centimeters","centimetres"],["epicenter","epicentre"],["epicenters","epicentres"],["fiber","fibre"],["fiberglass","fibreglass"],["fibers","fibres"],["goiter","goitre"],["goiters","goitres"],["kilometer","kilometre"],["kilometers","kilometres"],["lackluster","lacklustre"],["liter","litre"],["liters","litres"],["louver","louvre"],["louvers","louvres"],["luster","lustre"],["lusters","lustres"],["meager","meagre"],["metacenter","metacentre"],["metacenters","metacentres"],["micrometer","micrometre"],["micrometers","micrometres"],["milliliter","millilitre"],["milliliters","millilitres"],["millimeter","millimetre"],["millimeters","millimetres"],["miter","mitre"],["miters","mitres"],["niter","nitre"],["philter","philtre"],["philters","philtres"],["reconnoiter","reconnoitre"],["reconnoiters","reconnoitres"],["saber","sabre"],["sabers","sabres"],["saltpeter","saltpetre"],["scepter","sceptre"],["scepters","sceptres"],["sepulcher","sepulchre"],["sepulchers","sepulchres"],["somber","sombre"],["specter","spectre"],["specters","spectres"],["theater","theatre"],["theatergoer","theatregoer"],["theatergoers","theatregoers"],["theaters","theatres"],["ameba","amoeba"],["anemia","anaemia"],["anemias","anaemias"],["anemic","anaemic"],["anesthesia","anaesthesia"],["anesthesias","anaesthesias"],["anesthetic","anaesthetic"],["anesthetics","anaesthetics"],["anesthetist","anaesthetist"],["anesthetists","anaesthetists"],["anesthetize","anaesthetize"],["anesthetized","anaesthetized"],["anesthetizes","anaesthetizes"],["anesthetizing","anaesthetizing"],["archeological","archaeological"],["archeologically","archaeologically"],["archeologist","archaeologist"],["archeologists","archaeologists"],["archeology","archaeology"],["bougainvillea","bougainvillaea"],["bougainvilleas","bougainvillaeas"],["cesium","caesium"],["chimera","chimaera"],["chimeras","chimaeras"],["cyclopedia","cyclopaedia"],["diarrhea","diarrhoea"],["diarrheas","diarrhoeas"],["fecal","faecal"],["feces","faeces"],["gonorrhea","gonorrhoea"],["gonorrheas","gonorrhoeas"],["gynecological","gynaecological"],["gynecologies","gynaecologies"],["gynecologist","gynaecologist"],["gynecologists","gynaecologists"],["gynecology","gynaecology"],["hematein","haematein"],["hemateins","haemateins"],["hematological","haematological"],["hematologist","haematologist"],["hematologists","haematologists"],["hematology","haematology"],["hemoglobin","haemoglobin"],["hemoglobins","haemoglobins"],["hemophilia","haemophilia"],["hemophiliac","haemophiliac"],["hemophiliacs","haemophiliacs"],["hemorrhage","haemorrhage"],["hemorrhaged","haemorrhaged"],["hemorrhages","haemorrhages"],["hemorrhaging","haemorrhaging"],["hemorrhoid","haemorrhoid"],["hemorrhoids","haemorrhoids"],["homeopath","homoeopath"],["homeopathic","homoeopathic"],["homeopaths","homoeopaths"],["homeopathy","homoeopathy"],["leukemia","leukaemia"],["leukemias","leukaemias"],["menorrhea","menorrhoea"],["orthopedic","orthopaedic"],["orthopedics","orthopaedics"],["paleobotany","palaeobotany"],["paleocene","palaeocene"],["paleoclimatology","palaeoclimatology"],["paleogeography","palaeogeography"],["paleographies","palaeographies"],["paleography","palaeography"],["paleolithic","palaeolithic"],["paleomagnetism","palaeomagnetism"],["paleontologist","palaeontologist"],["paleontologists","palaeontologists"],["paleontology","palaeontology"],["paleozoic","palaeozoic"],["pederast","paederast"],["pederasts","paederasts"],["pediatrician","paediatrician"],["pediatricians","paediatricians"],["pediatrics","paediatrics"],["pedophile","paedophile"],["pedophiles","paedophiles"],["pedophilia","paedophilia"],["pharmacopeia","pharmacopoeia"],["pharmacopeias","pharmacopoeias"],["presidium","praesidium"],["presidiums","praesidiums"],["primeval","primaeval"],["toxemia","toxaemia"],["toxemias","toxaemias"],["defense","defence"],["defenseless","defenceless"],["defenses","defences"],["offense","offence"],["offenses","offences"],["pretense","pretence"],["pretenses","pretences"],["vise","vice"],["vises","vices"],["abridgment","abridgement"],["abridgments","abridgements"],["acknowledgment","acknowledgement"],["acknowledgments","acknowledgements"],["aerogram","aerogramme"],["aerograms","aerogrammes"],["afterward","afterwards"],["aging","ageing"],["agings","ageings"],["airplane","aeroplane"],["airplanes","aeroplanes"],["almanac","almanack"],["almanacs","almanacks"],["aluminum","aluminium"],["ambiance","ambience"],["ambiances","ambiences"],["analog","analogue"],["analogs","analogues"],["annex","annexe"],["apothegm","apophthegm"],["apothegms","apophthegms"],["appall","appal"],["appalls","appals"],["arbores","arbours"],["archiepiscopal","archepiscopal"],["artifact","artefact"],["artifacts","artefacts"],["ax","axe"],["backward","backwards"],["balk","baulk"],["balked","baulked"],["balking","baulking"],["balks","baulks"],["banister","bannister"],["banisters","bannisters"],["battleax","battleaxe"],["behoove","behove"],["behooved","behoved"],["behooves","behoves"],["behooving","behoving"],["bevies","bevvies"],["bevy","bevvy"],["carburetor","carburettor"],["carburetors","carburettors"],["catalog","catalogue"],["cataloged","catalogued"],["cataloging","cataloguing"],["catalogs","catalogues"],["centered","centred"],["centering","centring"],["centerings","centrings"],["checkbook","chequebook"],["checkbooks","chequebooks"],["cipher","cypher"],["ciphers","cyphers"],["clarinetist","clarinettist"],["clarinetists","clarinettists"],["collectible","collectable"],["collectibles","collectables"],["colonnaded","collonaded"],["conjuror","conjurer"],["cozied","cosied"],["cozier","cosier"],["cozies","cosies"],["coziest","cosiest"],["cozily","cosily"],["coziness","cosiness"],["cozy","cosy"],["cozying","cosying"],["dialog","dialogue"],["dialogs","dialogues"],["distill","distil"],["distills","distils"],["donut","doughnut"],["donuts","doughnuts"],["doodad","doodah"],["doodads","doodahs"],["edema","oedema"],["edemata","oedemata"],["enology","oenology"],["enroll","enrol"],["enrolls","enrols"],["ensorcell","ensorcel"],["ensorcelled","ensorceled"],["ensorcelling","ensorceling"],["ensorcells","ensorcels"],["enthrall","enthral"],["enthralls","enthrals"],["eon","aeon"],["eons","aeons"],["epaulet","epaulette"],["epaulets","epaulettes"],["epilog","epilogue"],["epilogs","epilogues"],["esophageal","oesophagal"],["esophagoscope","oesophagoscope"],["esophagus","oesophagus"],["estrous","oestrous"],["etiology","aetiology"],["flutist","flautist"],["flutists","flautists"],["fulfill","fulfil"],["fulfillment","fulfilment"],["fulfills","fulfils"],["furor","furore"],["furors","furores"],["galoshes","goloshes"],["gantlet","gauntlet"],["gantlets","gauntlets"],["gluing","glueing"],["gray","grey"],["grayed","greyed"],["grayer","greyer"],["grayest","greyest"],["graying","greying"],["grayish","greyish"],["grayness","greyness"],["grays","greys"],["griffin","gryphon"],["griffins","gryphons"],["gypsies","gipsies"],["gypsy","gipsy"],["hauler","haulier"],["haulers","hauliers"],["impanel","empanel"],["impaneled","empanelled"],["impaneling","empanelling"],["impanels","empanels"],["inflection","inflexion"],["inflections","inflexions"],["installment","instalment"],["installments","instalments"],["instill","instil"],["instills","instils"],["jewelry","jewellery"],["kidnaped","kidnapped"],["leaped","leapt"],["licorice","liquorice"],["licorices","liquorices"],["likable","likeable"],["louvered","louvred"],["lustered","lustred"],["lustering","lustring"],["maneuver","manoeuvre"],["maneuverability","manoeuvrability"],["maneuverable","manoeuvrable"],["maneuvered","manoeuvred"],["maneuvering","manoeuvring"],["maneuverings","manoeuvrings"],["maneuvers","manoeuvres"],["meagerest","meagrest"],["mementos","mementoes"],["minibusses","minibuses"],["misspelled","misspelt"],["mitered","mitred"],["mitering","mitring"],["mollusk","mollusc"],["mollusks","molluscs"],["monolog","monologue"],["monologs","monologues"],["mustache","moustache"],["mustached","moustached"],["mustaches","moustaches"],["mustachioed","moustachioed"],["naught","nought"],["omelet","omelette"],["omelets","omelettes"],["outmaneuver","outmanoeuvre"],["outmaneuvered","outmanoeuvred"],["outmaneuvering","outmanoeuvring"],["outmaneuvers","outmanoeuvres"],["pajama","pyjama"],["pajamas","pyjamas"],["philtered","philtred"],["philtering","philtring"],["phony","phoney"],["plow","plough"],["plowboy","ploughboy"],["plowboys","ploughboys"],["plowed","ploughed"],["plower","plougher"],["plowers","ploughers"],["plowgirl","ploughgirl"],["plowgirls","ploughgirls"],["plowing","ploughing"],["plowings","ploughings"],["plowland","ploughland"],["plowlands","ploughlands"],["plowman","ploughman"],["plowmen","ploughmen"],["plows","ploughs"],["plowshare","ploughshare"],["plowshares","ploughshares"],["plowwoman","ploughwoman"],["plowwomen","ploughwomen"],["plowwright","ploughwright"],["plowwrights","ploughwrights"],["polyethylene","polyethene"],["pouf","pouffe"],["poufs","pouffes"],["practiced","practised"],["practicing","practising"],["prolog","prologue"],["prologs","prologues"],["quire","choir"],["quired","choired"],["quires","choirs"],["quiring","choiring"],["reconnoitered","reconnoitred"],["reconnoitering","reconnoitring"],["reconnoiterings","reconnoitrings"],["retroflection","retroflexion"],["retroflections","retroflexions"],["sanitizer","sanitiser"],["sanitizers","sanitisers"],["sceptered","sceptred"],["sceptering","sceptring"],["selvage","selvedge"],["selvages","selvedges"],["sepulchered","sepulchred"],["sepulchering","sepulchring"],["sheik","sheikh"],["sheiks","sheikhs"],["skeptic","sceptic"],["skeptical","sceptical"],["skeptically","sceptically"],["skepticism","scepticism"],["skepticisms","scepticisms"],["skepticist","scepticist"],["skepticists","scepticists"],["skeptics","sceptics"],["skillful","skilful"],["sled","sledge"],["sledded","sledged"],["sledding","sledging"],["sleddings","sledgings"],["sleds","sledges"],["snowplow","snowplough"],["snowplowed","snowploughed"],["snowplowing","snowploughing"],["snowplows","snowploughs"],["somberer","sombrer"],["somberest","sombrest"],["specialties","specialities"],["specialty","speciality"],["spelled","spelt"],["spilled","spilt"],["tableting","tabletting"],["transshipment","transhipment"],["travelog","travelogue"],["travelogs","travelogues"],["worshiped","worshipped"],["worshiping","worshipping"],["yogurt","yoghurt"],["yogurts","yoghurts"]]}')},56013:e=>{e.exports=JSON.parse("[3797255325,3152668645,3474690887,1093386216,1055978197,981119102,1012895067,370095044,3057534675,3945464942,1294076740,2831420656,1627541080,2743881436,1984134083,3427294899,3424738308,2807400837,9564316,2878048700,2537164870,1941488088,3487153937,460837437,39930393,316768608,666057312,4117207704,3690310762,3718845803,2278799750,3470386955,3055937425,4033479615,2832673753,212492919,3981234756,2305060992,4227262176,4120545051,1049152160,294667362,2081971093,3102255997,3290041152,2193909666,3726139035,390032266,767709924,3916102915,1052375118,3499543247,292925815,1695553805,3604929813,2438996414,2541438498,312416082,923039859,1321890305,4062327915,3200638611,126162117,3582001667,2342469943,3917225842,1062716709,1158959214,176640750,979037137,1359955862,2389355877,3751400435,2123133869,3173699887,1295171216,1459438041,3332625350,4253356137,274086900,4040367928,929605787,2162534271,3182510613,1447947398,4116456060,883580320,4042783221,2443239614,2197295564,803073329,3052358768,1981649369,1530665065,1224729428,1761569052,2413609613,1429852220,703268455,4253523344,388636391,3146218970,1303513835,3848336808,411836761,2335704523,3634000063,928659214,3383487279,4188972756,15935476,885320550,316199631,2109922083,3133012900,2066092243,3504034459,1206629722,3678765742,1395483777,966064054,4280237008,2135199464,3074980130,1183043064,2849688777,3476108287,477883011,4193616490,55986717,3514591461,2596072392,2653485606,911872027,4265065599,2977310897,513329408,3761396241,2550148107,223183002,635894679,3074170841,621708025,2692559376,3657174927,3832701908,2262312001,2401438801,234545642,163742384,580245955,1864287325,724252727,1503399745,3443415957,1612432565,2858898005,1010716128,1036264406,1002726732,502395933,4140049916,2399630359,113615976,2567880991,2395279185,1618510348,2261583838,2668201830,2689787185,274741178,179218763,2271154071,2956397599,1792832215,4068399903,1003654668,3958967620,1711459788,1783015331,1520642710,2628004305,2951329807,781317913,2952912258,4020738849,337206988,2902750835,2889589355,1470025386,1280789460,1802218416,3794414517,2528760805,297460106,1694330657,1085454568,3026124108,529209924,2823793789,3175085732,2942756677,4247012848,333909080,3596264620,441296706,829893807,3396095750,3088613177,548904259,4149415853,2383487549,2671965078,327687360,4050230544,1241995236,194831395,2873595493,1379989964,1055318645,1089186219,1852263428,971354605,3036956808,3470312382,3263855105,244328195,2651513114,664863151,1162681863,3543438283,1154233681,1688343770,2915742300,2887280722,3020187674,3576637303,4025477043,171463728,3773406539,3412954891,2026572788,4017009276,1920228911,698803660,2072792583,537947897,789786548,445575012,2409228664,1409682357,3582891332,1217357123,3978987079,803864637,3130735062,193600209,290240093,3807890499,2220596399,2438622901,2947438513,3981191574,869181904,3251153140,2605907176,2117652075,1701271270,4099578981,931669276,3000295926,784968234,541133332,4119516419,1841945601,1179207497,2872024942,489060293,1992810244,2125374192,3613016682,445797081,273409753,3720436226,2473983290,3168662451,284963996,1156855932,978946729,3839558138,3869672445,3287772583,232538530,525649347,4008911279,4276162256,1101610242,3047445074,2799542561,3722563634,411188115,2782937685,854453602,3274390153,3269216666,3480235985,1878764662,2590541929,2018885421,2575572719,3926263524,2237834992,1737705643,2315290875,2644012652,595255991,1826870024,400885517,1112070987,3856104292,1646950412,1382337722,637018763,1918259916,2393304258,1365272295,2387881098,3880730695,3078794381,2173557089,342783920,2333173496,885741419,1228189913,4023377482,21441916,1140064072,506050799,4249382628,354018158,2837786968,3085843406,2103533990,744216808,3017331067,3637422660,318907780,2192603205,1572068789,3407116705,2291791816,800039977,1286706523,1760774106,338056270,41941065,2101210155,1008139568,2095798252,2936777017,3487318321,1444935948,510021514,4281022031,365560695,3266677434,253139363,4025728819,1878044919,2729726579,760088352,2721457429,2179814301,2002371603,1121403155,657499627,607704181,1353772592,1331938742,4239680605,4208037837,2257417012,2243070016,1540886162,586514187,2536231578,926153077,1361738099,2155132932,1555430804,109329680,107065739,479740255,625213560,4245668216,2103672938,2232139005,3068187636,3744734838,132372203,3113813546,3507121770,4229679562,1232625137,4180907570,1048803738,2983050172,2556150790,3619634940,1246254861,1503682296,4085890868,1143937703,3808287138,64490779,202577226,935028059,3697007164,287810705,178896412,146989452,3141067771,30950182,281501034,2118075539,620055224,3597798738,1422222555,3671254747,1428560099,3402546507,1803576667,1120205913,4200689428,3075306284,1831170331,610414191,907842199,3453601370,185909410,731483324,938451904,1667501254,2476011525,41406317,2676266992,3270027992,2088307889,206774478,3838891603,3725398112,1205416899,797309671,1814660624,2819953962,4115405168,1146493726,1290382054,766599942,533276653,547348717,2088787044,1007061614,1539201084,4091974634,3072848823,1428507079,345797998,669835120,2761437471,3904185107,3841061340,2894285537,1417755832,817063255,938294067,2050989727,3989181361,1774350908,2011523616,380495883,842377246,2635596765,3092358667,958183765,1700145645,42106693,1917793036,986908683,935320209,3815213066,2162064843,3968266892,188629542,3787650193,3222540516,1692757228,4081873041,970734029,760575890,3969809845,2171669718,3518874688,1685857806,135120208,3971762523,2020744817,1541830330,4054327852,3009758924,657522898,4051796323,363301592,3363054597,2334469003,2656148382,733428495,3321288877,2656981942,2641851147,3902332406,2750282491,825744486,1031831933,2107547513,256312223,3890758564,1618146353,4139508150,1931266818,2113315059,1757773281,2898109936,1094002936,2678925708,4128487188,3791130163,2885546638,3395211669,4137389033,2167405899,3127082596,1472817862,2383644170,2526441551,3042773524,4081355726,4200425912,102121113,3760032038,2099444410,2270189653,755491402,2108008624,4264803659,2873720096,2502229880,3406254773,1651796161,2869384281,645260132,958575520,4026350442,1070535489,827933739,2524808062,4177715500,1042868330,1668434862,3270469138,3965540028,1697864044,1402804585,4076331907,3893613819,566832820,287598211,16091236,3141776415,286829124,265589463,4154177734,424604888,709159612,3565296865,2616770475,3907536381,3803030558,409027839,3807777435,3530069674,3790647455,4158884404,3523976836,1289747709,3503758335,2936439471,3119950020,3107732952,3885665705,152197341,4158889181,399948787,2088386065,1848338492,2225216248,3563476403,710652203,2901243848,4223281172,4249091003,1731656694,2736701311,4135866480,2039355292,4047911164,4256334271,1378785897,2595720754,1816324545,32826190,3509428593,2294056077,608170134,1275344900,321465883,897825319,656481525,2590245613,2537527630,3904083216,1659042167,604408573,3037355736,4233148143,2540635218,2577110999,4291475407,159599156,3106475451,2216465411,1416072308,672532601,2042309501,1746056787,4189368935,643659694,2534935605,2534558411,4084074302,1717758654,3790616383,2734312260,2346031146,3471871211,373944866,1158579612,2023073495,2282502375,3361443542,477228841,1091526300,2382180608,3041115262,36204344,323522898,153542894,209303558,2232555854,3509113876,4017826442,589414987,1949611600,2801454544,1304890083,1930087357,2987321838,580325804,1625015166,1913952019,1912579607,136672526,3960352224,1348251553,3320423260,4152570643,1445110682,3860545018,1787714590,12822399,3162236618,184100,3457295613,2317329864,1288281376,32252652,465032798,3047197163,757886242,3351493681,2695178599,1418888530,1850085847,820675822,1267248278,1731604627,3355508084,1575847246,3566344577,4102589681,3877511170,254417483,2439618332,3413548914,3274662484,1801549535,3214399441,858935096,3157868959,3350084643,2085083372,628478593,313448827,2002119801,3333918227,1800501132,3775459450,4210732144,3439254026,939461977,2089420235,1086761738,209328941,797074428,3855176195,1688303231,985182675,730729732,752773611,2743229083,1835320278,471737970,2225827787,3690648340,3693771302,1756493343,1875131910,3349803682,1283511809,1558388194,803489451,3734315869,2514241435,808396990,325345170,1276518640,1088478366,3751121771,2574902716,192439056,194522054,2188100186,3480198208,1550846888,3951932830,2622152842,3696144311,1883983610,557348163,595598955,3533132652,3482807750,352137800,1221732703,2850222938,2167100386,477478045,1311791987,555010964,777659431,2839402762,1192636547,1865426448,1614984231,3074875360,2266257427,3063827382,1453986466,998606162,8529876,2126445764,626957027,3273960284,503402708,2817650053,666877688,900462820,509781247,4219296543,2428897226,3679733239,1174086075,3341547257,2392482305,3972454337,857834033,1037395887,3814903590,3543151235,2964726546,1822035179,974815505,1733672218,2202710500,2953535288,2996367523,1023417891,874649054,4220706770,1738693831,3342570746,1729352233,3208729852,860180450,2462059612,3209431976,3694096241,2121225484,1478274921,2393784842,389457593,41488551,2630121077,3884366774,3391327652,370809918,2860012861,4049292833,3367949987,3822757019,2973380736,4254541824,3987097411,4250187376,1406100325,291699084,126202073,1367578447,3327840391,395631210,86839224,2306421510,3544840842,2484652196,777755860,1261619249,294647961,3132950399,2475964036,2786266642,1075993906,138371201,283988537,880867054,2842887625,4140594170,1678314228,2323713909,3104424649,4203019203,1149792573,2587495148,3156361149,1975139543,2193250236,1869089698,2439513170,2305703322,1293325507,424520867,1081713790,927888005,2482090079,3002547907,2442402030,3830060465,4019898213,1936562566,2424323625,2666599066,1157423000,2228552652,620632178,4063101197,1951889225,2262476033,898521793,3732539952,1405461688,3679311760,3377634757,582618473,3648814040,756409471,1285368731,499017801,647159802,1060243387,3002975206,795490679,3368399046,2940276386,1556421109,4157274554,3077705770,2328577675,1118645048,2887723613,1497585689,883074018,3801483679,2682831463,2417637908,3966191370,3690873150,1828022979,3633527250,2348390181,846883213,2399681530,3806261461,1140800258,1289003196,1329348025,2920417920,3364762802,3241239290,117159591,1472003817,1716210717,3239494638,4206103255,1068115821,1505216910,1423892667,2322762619,2369402833,1086187763,364109012,2191912736,2897326272,66106468,3627601237,1794854514,2016952106,940598064,893349050,1952712383,3701031001,255051593,2541459792,1871052064,1600724510,1346443472,475801522,2768842341,1144743685,1370542498,1862628992,802618832,2565121382,1635256641,1055801965,1215093169,1988451037,3020652471,2679188052,3410122384,4157595023,2645368709,3949271818,69720664,879210837,547696704,3384732221,828017545,3736292860,665432216,238475099,518669339,3442975128,3546030589,2980746120,2986184170,3419010657,2185979565,1918181200,1555130750,3364334789,2559581399,1055007015,2765861560,672508506,2266334670,2747065785,1859951135,3436753105,3994827447,719715326,3560680499,2467040899,3554176332,2132852793,1120859738,3737642709,3451908096,3905316918,1508588960,3537483703,321703250,1519994160,3558481755,2641035711,1376621918,1659110710,478071415,1176268988,1435213423,1443873372,4184494193,707624574,2441643977,98344259,118316246,494560044,6596585,2775644066,117991275,3499801551,1421699234,2921229990,170767476,3289290512,2330346824,2125822178,1784872064,1952100744,3254231469,3227639491,3937097738,4271154601,3667798723,454888690,934270728,575528871,4044181334,3686920649,2667312783,4103895883,364442065,406486219,776285025,1057878131,2409300552,3710307432,3049092706,3345870762,497788718,3752951755,635436754,3682566906,2123181277,3345682834,2756732182,2564046858,2434754005,3013421603,1745752677,2046671017,769850494,917666103,237149514,3647950770,3910483289,3473377934,3690661460,746551277,2105390450,136600943,3765545574,337745159,3424256116,1259294817,3118822367,2328399835,3197013168,1013646438,2878705156,2096894029,664454087,2948469240,2190800410,3990132721,1295908898,3530581954,273583488,851366692,1823093032,1172784604,3376083113,3978415239,2788722095,333362690,2244678072,931289375,847865791,1991371443,2928724140,932711700,2361177922,3375552552,3564103465,2229550330,4255802075,3444098728,4014367267,246506004,2839455709,153947829,1185751864,2328415207,87029897,945769461,80872241,3759223132,1892101599,4215434566,969687426,2248878429,709091053,1912713477,146872839,1958227085,1570633188,4228219817,61429996,1772769856,2154882417,4202080996,3199197104,619467214,26201572,262295807,321915641,3408914162,3615859417,489567130,2549422113,1990364267,2557063375,2103341039,2910224385,2482275245,3967210214,1602057088,327703478,1839742007,2858145637,1249252017,2163237223,271000408,913783772,3424943342,2628115973,420185902,2740395707,2397572967,600509671,2948904861,1008016168,1157854173,695097190,4180415898,1808184906,2788628594,3400150762,2562328638,604842423,147218487,2044678546,253658330,1579531945,800943348,3528463168,1209972732,1802075036,2640520450,4041958207,2365714625,1510430311,2012553748,2416873059,1288236424,2716373202,3135804517,2675815074,1149858160,2308130801,2665806047,375130404,194764566,465750944,3280413991,3517963611,84829329,3636204900,1249670659,1304918612,1970657921,3392504846,1278096110,2526804747,1449686295,39621510,1814762196,802343099,23198706,3153163056,1970361255,3133507870,3285070131,1361322020,2361677912,151244347,1498139030,3276813430,281461452,418321881,1436191855,641939935,4113923384,3357989853,1950427907,2148347328,3683611053,2268906953,418860807,543548814,4215963633,4130132508,1994794781,196777875,3230779557,2630742207,4070889000,3854295558,3240006528,1076963494,2031721742,1111367930,3924523228,232560641,3350209535,1539189483,441953659,2816194630,1140749209,1688595038,2319817082,907484070,2678395534,1016204944,2893338818,3562260398,52661832,2551384137,1181967289,4266719685,2975903108,4260606994,2483556325,660440585,1645723230,2826928054,3183341090,275550588,130779779,3498282761,467740129,3267606463,1949893210,2717607625,3688965656,1942074264,1282422039,502377803,733672711,2621859981,3747020969,2445108453,2053152047,1649208355,723081259,2284065381,1617938044,2276734891,488304293,476013115,2214862486,56797841,3597650438,250755358,2197119133,1408635818,448479256,44552904,2125794314,598536333,2741029523,1372234641,2934704213,3186494784,3157860903,2399497911,291129946,3009308819,1420012991,3551222599,503737684,1176655332,1230475630,1267381608,3374161639,3599358102,2828722406,314501722,2265507900,167471897,3293927274,2853915851,2462690028,711357401,3383014218,3820377735,1430666208,1913117929,807700067,4179248889,1342348909,2042834474,328387752,378040427,2627001352,2149525429,533556949,3156321083,2292415119,2362506939,2683776499,2334303426,3570415676,2827278979,892005029,885657743,1593633755,1121969559,3135207436,854529925,1638165925,1938304710,626533659,1860368344,152039135,546420020,48974456,3314450735,2122697721,586204449,1318687020,2529767090,3128554086,2454038342,2493777658,3717016113,3572899600,863252177,3477554654,3530908540,3460013753,1321584062,145801817,3850914146,1466914992,1520936830,2234667248,328662021,402237843,3082869378,294364892,4078202041,431432452,4078710422,1547565829,3648407124,3135370847,2281265108,1923026207,2617875930,2370778974,694734765,1423294197,1192236788,3406877415,1776309462,1457235995,2795031302,1930622254,3937256304,1313059348,491630542,2215472522,2936335059,1818800462,3431749332,2697479883,4085583757,4195706896,2604812414,337745490,1198337410,2303983957,827706765,396424550,2172930396,3435186646,4276177847,2021353481,85788582,2493647419,2611197324,480585449,2086469022,2416177315,627347060,2279062160,2958790624,2689331808,4160560286,2544502623,410708335,715141218,3118448174,3633995702,855973324,1762857389,2887232377,774270392,1896290227,2156048608,1893962277,2795397943,3349777666,2555888821,3402301762,4106079314,2126979612,2484150522,927830816,3380641012,603332501,2834234833,367435653,993835023,1321389575,2248850443,1051561901,2365585390,1861333755,1505920635,2576255141,3571474939,38393298,2972732730,3946447723,279906111,293666606,1580308516,2799752467,957474976,1367784061,3369039287,2489497941,658415673,1603158974,1953649993,859186881,3407036755,4198255849,646731020,4269483732,3652352408,2526585379,3433525545,249685604,720505374,585457316,2378998553,2996193921,4011578837,1987566096,489362299,194870055,2608498673,209892918,4129132231,882070507,3249083780,2448373207,1180526072,3360134897,657327653,907924937,1580580353,2889307995,3096839679,1483983615,1594147200,1396916586,3252847822,2327743142,3625363657,1955233906,1240730764,393374542,2885336359,838636606,3107724918,2742680384,2255869514,139351306,1489901218,2350726700,2566842023,1024316697,3498041969,421426907,1149221069,531393511,1349861260,2381492278,2201613989,1524871107,60238497,2916719706,1799667284,2262689079,4063191864,3490073873,408008442,4219635263,3228297367,100528479,781631713,3606447324,2928198823,1398349224,161737780,3272894016,829238282,1805042016,226564466,2226012153,2143255540,456685136,4265071372,3684096335,295916775,2375013721,2738139219,1418598582,1150183179,3379311323,3102752497,3034068441,3639347308,1480880203,2253000277,4040385121,4112139884,320730658,1818721441,453743627,1311157497,4125331019,3004036454,3735699042,970469072,756041687,1813551605,1488648337,1352152297,1902457172,1777405935,3848661111,4136307515,3861852912,4009601859,2161710691,715126937,3226781705,3387705314,1568149758,3566495170,1661379474,2710958411,3741313274,3570047438,4122964386,2917361706,742130880,2751192863,803203952,801938081,311927440,3455483740,197464697,2734740797,461360512,1832145673,3844214987,623204895,1003493383,1506283609,567789329,1341492893,3485925667,1772717506,598417985,1475470038,1923814173,386668861,2032285707,558755456,799671392,533110840,2906754984,4097789525,604386597,775692949,3263018761,2963699567,179893171,630950309,823998232,2977460480,2434765307,2305128793,2501731247,2139284400,1602528677,4087228881,2947791512,3162983490,3759338148,2304814708,1728329275,139363405,1141825591,1919336445,3589278037,225946909,193903184,2536512071,3219365526,3805042490,2353691437,3831054056,2572970101,116940628,725801570,3670551352,2394990485,3245150455,338297413,1452094700,3492525112,1418867926,1853621209,2387399843,605780635,2119126302,3818206039,1527991297,4064076829,2413736122,2307068031,3136770534,847739458,2116699622,2472045531,2953479101,1021700657,2623467065,693934018,22621030,1947033840,753203111,4168979053,2371885462,3043269108,1158570263,3767158709,2979982931,187885967,284516652,2030678787,4049686978,3783655052,619662053,2131846323,3246715391,2240077952,1166025389,3135148019,2164164463,1670374560,3377953854,3834253652,2075728513,1008736024,1803079430,3254959724,22923649,3697026839,1586797525,60607954,3231275890,1890591611,214037192,833105280,2435456958,1286584176,644102277,3935350814,2122739406,2450653966,1342829130,2147414540,211485239,3688955339,2516467802,1860163843,1036398496,2349637148,388699486,402914331,1518870844,1251396020,1201830100,1533650442,1760235940,94370852,933051978,3805332930,1128855196,2601585410,9221373,2880893376,4048741243,512836034,2567729295,1763372029,1961545021,815412310,593982967,1636466374,2072269540,2490809788,2770640938,3414311150,2795251698,2923106085,4267702902,42828459,2986929441,3987969569,1897166337,1110785039,3222828302,63609099,536872845,3361039868,750642430,3199434748,3728621625,18666421,644109996,931681211,3354828592,3821910763,2433972774,4095976842,3505410974,141253389,1951925805,3568648931,1037922567,1792665122,370761732,512902114,4210622018,2992582466,1215700819,1511711177,1946144908,3920514346,2126905720,1327490453,3493342622,1741680834,941741326,3059588973,623061963,3567708847,251475613,2798367505,498872989,1181362507,4232742924,1444958470,2510740788,4242673868,1081694168,2752008355,3721037557,2161899092,336306057,2869406900,478503928,1793338372,8766964,1540462870,761438745,2712656480,1119904900,3674368499,215409022,2391474627,4108422123,1003328478,3059860742,2680513214,1404322333,1770801405,990285996,3407444775,2983413946,2903654415,3784171555,3389779285,3373278956,3589563135,262528926,1455681943,3208732197,1962693280,219343259,3640748300,4183585828,1489262305,1661719743,2069129238,3647452946,1799323318,2834180329,2211610562,496318222,1892495783,2451311543,1334720463,1588380862,683138974,1922307047,1948501079,1313383111,3861328877,1798144398,395015443,299860646,1831687166,3225593370,1509023136,443195600,2047637180,2471112542,3858644895,2921361153,3552929881,1327670025,2981880550,2953269465,3769080060,2187985106,554249233,2631946047,1921652643,20176923,2737007656,714620227,2632488343,3025788630,3478896770,3506061689,2076602889,3781976822,3559828663,1237897568,3779719607,1331352216,849808077,3618351940,3436092102,2966507134,560747663,453090833,2709196927,1615949587,1273440645,3463180585,441575417,935509827,1739325941,4054184058,1805021328,3624911362,146797874,849153449,2017031758,3075698925,757259833,184003665,2014183489,3553778288,2765234688,80953012,1057539092,315440403,389360756,1042555241,3888203365,3576577339,3287129630,2877269250,3824596950,1263816072,1471626484,3804992459,2604815476,2506832336,1300037347,649910605,203156106,2576273280,1217702892,3247440929,740490945,3283218130,577210605,2962026632,810991651,3141380739,268016394,3987588604,1591609181,2904425785,939910135,2569341177,419556080,3410580991,3689774668,2160084293,2392649606,3879714198,3046241305,2178175058,2761930061,2876641446,3716506576,2628842309,2560150436,1553456554,1089913779,2893615769,1394204508,3888204099,1365061206,1432273662,1071655194,2545485568,2286927885,3605296464,1672035920,3807771318,1794126534,1124354351,3076399039,2407684722,1325134539,49413864,2174277954,2107432615,609231402,3120158524,2944506144,2985539752,2331269158,4213420766,2208517993,1457371021,2814568064,463340346,1956880975,1613558017,1689359676,231577129,1415754063,805190818,1035892395,3513319618,1145879603,1980783069,3182076228,829149905,923257245,558888802,3524463545,3820449631,2553559632,2213619540,3983913990,616284266,2600694204,3193035742,2677987059,1600759240,1057070411,778251668,1778704986,3527082004,814344529,199731616,2574688217,3274410202,1876190816,1827881137,2474556197,2009737841,1663857886,298839381,3682229473,2142874263,3600356090,2042904213,1599277433,2785033128,127750010,3837611278,2074866869,3820368373,3090898110,3498165853,3237444280,1021981801,2676437014,3765765587,3320045519,3043352361,1328638381,3657383259,2476194850,3561493158,937359549,2757987878,2447325202,1453877955,1514392989,1654296236,2860963045,1917030504,313338161,2173855032,1344375372,3400234350,3226063059,476430463,562356090,3344755574,488042118,3976722626,3231516488,4034697308,3944833673,259005176,1486086323,54754199,1130135334,1367003636,2598641495,1224684615,756788491,2007402027,780497025,3748516929,3564426180,3209854829,1370192199,3634477998,1146435448,1351128294,2835331602,1501014714,3671888108,3381422166,1159097508,3149764006,2336320205,399785503,2565433162,3277967655,1570791727,2535108208,1266099644,2974532462,2455714539,1673119298,3672052820,417207234,3460327540,3477588152,851306465,3194356366,2831272251,2661647503,4138810554,2978071170,753502214,336989460,1095188979,1426676820,148420230,633938959,2846219664,1708302562,630158942,1396237673,3030569636,2435417937,1116633072,543394526,3406490719,265879227,4237190883,25233091,393855606,2246636777,3387223885,3229547208,2024739875,1410651193,2611778533,4277606362,2320896938,2519581731,2473175455,2607051624,3776496454,898026692,628097511,512358353,2352332857,597771502,1162764861,2344648683,2363755035,542888892,3374952356,4121253381,696248724,657861156,4208360971,512370018,1545555377,1485853388,4225655419,3406669998,2791454954,71344495,3212462362,2627470272,693671487,1662605235,935891317,3280370513,1760021914,4096865154,2462927858,3688154238,2374237606,1591646239,632316905,1105364255,3259383565,3648036978,608487088,1642100169,2439230032,1291528340,1666372549,1986819214,4119848170,3746144330,1533559411,2068532325,3001180022,3441537266,3892623884,2624048582,2628305078,1410516324,2861133459,1131770443,2430153099,1530502801,2974182958,2156783873,1880485577,2700929778,1631286981,1387961700,1695121782,3739670607,4144210110,2962442202,886322326,2607810907,876486863,847973683,2006008224,3957851901,1907508413,3317608310,3465485057,1061736362,3704090382,648886259,3539915084,2233862137,888651976,1367784397,355325761,4163154775,3270890182,111491149,1252948958,168403928,1359905298,1929886919,776490858,1804042891,3582428949,265031736,3883019473,335933993,1808493493,2883458670,1853109584,3665956036,1118492636,2228821274,261448062,1725166223,2646892353,3241443769,1684889802,1059410316,2114472329,1952397246,3648103971,3434424062,2989345191,2489087723,1965778889,3165493434,4135799032,3745224961,2934116215,2318011210,3277579526,2357166103,176249805,994534546,1329572396,2327076017,925428314,1982403808,1765735514,1345274763,493995646,4214511564,2191745675,838336467,433305,139976873,2616805799,3524567160,3471077707,704988905,1775032558,1443451431,1629848490,774877782,953793292,2471805997,2511604514,3704644500,281931882,3375951997,814534291,2588708749,1997283415,1451237468,2783047741,585276543,396328605,216968337,1871390768,3654735631,1274895774,4159563116,721176400,1273979096,2365982327,1066344155,2561036826,2518108338,4140691808,829472349,346857958,947910174,3621112605,2440587571,2667134565,2320261025,340590305,2592039604,12800463,3729713643,1459707510,1408712268,1399343476,2108751256,4037045589,2426626654,2499296080,4193039202,742354704,1723237906,3011140697,2358971208,2337761100,2489557817,2505685416,1184353589,1806943650,1862418479,21820578,3111493168,2848574406,504638657,712852516,2175665759,1479032346,2732027985,441754546,3263055514,1244599707,2128117965,2779119466,2387187518,3529625315,2268876598,3240316275,2582395250,732646868,3169884836,2857526684,2501292385,4214106645,2559603980,3143637840,3379956403,387210068,2600748210,1731462823,1709015134,2205618127,2270579734,329939838,2762398656,1653339763,415987414,2841271421,1193158793,3272263180,3138793858,2661799169,3832802112,761062225,2791869890,1441056095,989755613,3539722917,2819796638,395893203,3310113954,2702443811,1466537236,1909075968,3324041272,846699801,1289078389,685584187,1530288692,1535421169,321038423,3135331720,4191685474,250770232,3217316604,615393490,2991993684,614364429,3029973960,1233895449,1012357783,3638076444,1530625887,15411675,1291896889,1853003510,1263501631,2965382961,3625867757,1294363229,1785130176,2000273395,4168265636,403596365,2411976843,2361723201,297890139,1342194230,288111836,4100257538,977467397,160746820,2083147578,4180960687,2441697344,2371480597,1994510979,1810311276,1523064828,2641286676,3191204893,2753270653,3708799891,4241626278,1431016694,1014533722,2649448026,2412687816,172546004,3751811399,2617116199,3895274057,3850994675,4118646822,2030684956,418627519,1783862358,4092389095,3988916357,1503618610,2309040929,2675966680,4005042727,3810260078,1903490611,485941786,3089365577,1601406693,3722667359,2359655734,220928675,1680394894,2190175171,1591171198,3175750335,1144286950,623499625,1411245797,1260316218,1151420456,1864692520,2778335781,3544452052,3027168898,652716576,1325042957,2373882267,1265976489,1782909718,2903460752,3789391566,926118821,3281305373,2626177835,366230157,325905840,956640176,3274590622,2131210847,2517100685,3866982495,1683311508,102703221,93284634,3792333628,2564695794,2762113477,1575534357,1889848093,4193023340,2303457298,2207661250,93034295,3315104889,1519016620,370622147,3727867539,1022253907,1346632829,3429172213,2590553581,1115819599,2142111562,2226136793,3860089910,2341056605,1346868227,3825615540,69059598,1462404947,2799967256,2904993607,2265826637,3956644439,2989750159,2675334755,92433076,4094972285,1483184809,2494001650,2537416719,1297773838,4090883321,3293924354,1636060518,3719309479,1169880190,1526686308,3397393893,4131231056,1529503968,2322281414,926878268,1290572853,3202912040,2574137171,468726749,2331771977,1690585684,1578268039,2916593756,862394963,4059845866,2315357296,860799802,3931869235,412430044,1600684492,192117593,3057715637,3306098754,2275443846,203358683,2085338529,2221457719,3760218476,3399864487,722965478,1211514055,2530873069,824007703,1486073553,4119317619,733947546,1417577864,518501778,4020325173,1839852706,4251469292,2712065190,1212853459,1439729975,4167253719,1122979240,1113186336,1314388263,3241435415,3300752979,2315983649,3179558036,1120626398,440605942,36664558,237311290,613108832,2603347607,1723385823,3260633059,1065459462,3672630868,1574713667,1139718312,2163662854,3040180435,29901771,685045315,3257394662,3882119971,3098365059,2048404047,4177656952,4016093217,3751312760,2878657380,1647081692,2903206265,445445538,246618454,1577873758,2116570471,3795422941,2488878481,762670826,933266529,1863501022,1904867988,994917285,2773114913,369338580,3984019325,2841059337,2386518434,3521108204,976811280,64268957,4125495110,2249680669,80382321,2955453974,3116944808,2223682049,2882710914,2625205877,4077805899,2084422524,1009035745,1665935773,3796573899,134391883,2239443459,3200317167,3099353011,3087854214,2520986108,2114409531,4245309158,958603875,950334348,1560533713,2149244783,1219086496,3405936034,2203644802,4287532394,840462772,619905821,3239443371,1365955664,2510561198,4002689048,2350050041,982785166,2985863423,2425759149,3475205955,2712820931,144894771,822093420,4004781310,3807344136,4048087924,2958910286,1250269750,2351578015,3047330788,3019321025,739947994,3849384166,745469261,1697321007,2496395376,3856245116,4109672118,782029809,3534925675,2371591234,834323726,898278737,3748677982,3532041679,3591473456,426632259,2849907809,4038527261,1151123030,3472133971,3850999490,3470334741,2194536598,1602113695,1722868877,2763210838,1220026504,1529881259,2366969973,2783544795,159747300,1188830426,2502636712,138999647,3044227007,3329475459,1650221619,4155403359,277381417,2859387717,118446789,942567430,1257970610,3860338519,467548010,3471072772,2616558588,1998422130,3148514382,2507615800,2638723646,2876208416,1839793766,355397602,2806082990,4174293302,123372804,780587555,973757636,175889399,241510837,59652915,4069728822,106527289,1934046602,1933705189,205449945,698670660,4056141488,4145437284,3183121384,3985714032,2201191996,2383275853,849324913,2832864311,2158919384,778249339,2742509113,1288180199,1711004741,3063992812,3169917076,1336291404,3439566701,694600696,2219243571,3618451291,252243998,3711324513,433590394,3080580096,3492440482,2882717862,3323836912,4068579,2153578682,3293772902,2557334127,242678031,1593133486,4171670984,448964125,4284346810,175362541,1449156515,1496034129,2944569221,2734068655,4037758424,1656403128,1764298715,2469648511,2892733085,3053306895,3667392706,624335952,570826103,614671159,3159150773,2407590137,391086706,2133536068,1573410265,3041408456,1698871110,1934130054,368273583,3846480147,2707829712,627053066,2567949140,1037744518,2861461643,1223210677,2390029624,452868661,3286744354,3455587220,1466066553,285493591,577407709,1794038529,3995750830,4277213175,3935677200,3069398544,3629735987,2718453605,2131032403,1808337836,2929543960,3098270668,492251547,596141519,1870346650,3592300148,3353849869,1238896193,747955526,1410379015,2322200700,92217662,4015725312,4113236829,4081499021,3976667247,1359145965,4145400747,3774165390,2285031142,1865886785,2919939423,538670436,1241070510,1975601693,594336895,4254786174,1964179415,1401650451,1931673908,4222678217,374830415,3102985869,2495965569,2722804974,113129126,85474422,3206729493,4122106985,804003734,609652394,1461103818,3462272639,2811082408,4064947584,3142569076,915625614,3899231887,1643827433,2529996608,1064138627,1693278557,3809033014,4289038919,3844541770,3444076742,2250605105,3277693329,3847585308,860612755,3964544675,1066592853,1958883080,4008011120,3858616572,2103924886,3527844240,178301479,3419633105,2633149687,43779174,971211619,3753081525,381550472,1988243820,3506450446,2027770986,3916247356,1578472138,1323789015,3488923065,70702032,3259084682,1583728003,898784440,1074215204,744540583,2290434851,3567974288,1153805134,2338706553,654243461,108771932,2334142615,1094898005,1238179737,4082351177,2065587174,3051171986,3949096154,914724108,3040360479,3493267902,2825750762,4061316503,1848967173,3899587034,497924083,3140638957,1332237960,121810127,2630565337,898835930,3958433435,719434619,565609691,1316933724,716196367,1195508605,2770116149,505471398,3858451255,2148375212,4004646870,897326590,246964134,694927422,1451036537,1536843090,1683212396,3368934613,496059278,3009534640,3551989060,4117099994,3496808116,8015533,1105424053,803219212,3456608821,3723535256,4177934709,2857244069,1212869373,3034383307,1881786145,3880723378,3461546530,3615700679,2691831453,1982395062,1908636067,61688389,910225399,4221148243,3795567890,1356778549,169040833,2931660119,421401969,2173566888,594234101,1282963129,2626184095,1522263881,3777092568,1142412221,1992878510,3453932139,1134820921,1971368625,2045779074,975001064,389260207,3764562231,2414748324,1029351757,1611596538,2570465250,1850129415,4007480343,2179775990,2508102208,2776419859,1472283083,3770344649,820936879,2888515884,3438387889,1837194951,4213609713,336870589,2046375265,3814718408,1428502450,1164685306,3947682216,3876114205,749175059,101399183,2271918997,2446819080,3992858492,2783314838,2554379987,2485277612,1612689470,1452306089,3900149701,3604985584,817266239,2590911301,1913260009,1190231196,1593819752,2660282441,1151586665,1043842945,1493529806,3324376641,1323988955,2004724124,2865656274,971913405,2199515944,3394421817,3543441128,1543642605,1731988468,1722741404,4245612684,1280851395,1342599801,3733104028,2195439714,2901384719,3858515701,4116261025,336452432,114069698,1150384934,47783730,4289195155,1725711100,2849462807,14512188,614035957,3488502783,3252131251,999926960,372092028,4271661826,3234963247,2287618068,4049502457,3985585666,1765696004,3034471341,4220826856,1599043228,1197401375,3033348251,4245904927,4144260279,1638839830,2755561834,1546968677,865050891,3074932715,2448875102,1141859700,3243263108,3527607590,2359231619,4083246495,960718053,2830868331,2255804307,1150031330,3518751229,600884832,37710065,1347883414,3798491876,2245016783,1416721174,3316434207,3987386180,3984731418,1640638395,1872397883,1459021338,3887094297,462187808,3374394301,721687265,1253597493,3728267695,696635467,1555402044,3183650130,3096140383,4274790214,1563429411,345307908,88983943,1224918528,3625283295,2850718594,1625580485,599556495,2987708107,2425526638,249210257,1935702058,4226409850,3962892087,926954385,601181095,680081613,2102798294,3250061004,3040073295,136099377,1871060119,3331618592,1664655184,4164213443,2021031380,4118098666,268253317,3960392879,2013948094,818015967,3464273858,3967149343,1668551803,2739105801,2339996213,1422248109,3260049746,1758850282,2177177043,269996930,736738250,1120713422,857596836,932963373,2281166405,4155200355,2821339562,2991409225,3237448491,2534151489,4208832963,3214295092,463725706,3703131622,225750340,3616671175,2557709719,4171633100,3021522545,3898996490,3082528462,469795932,3045556721,3986485362,2345920602,3203842465,862813404,535322162,2315908645,3915483825,760230265,3102330458,3801248571,123804825,3149862107,3761143070,1480449294,2679199502,1152345628,3346057071,39395008,3884897153,1543994152,1323956236,3382772284,3182015325,3700908210,958030467,3026450573,2609986832,1981676060,3616177916,2493824633,1623396830,23175442,2009390654,2162391927,3644875140,3085248639,3966719570,2241440763,3143583883,4207608039,843971028,4206201935,3172755628,733342315,643683153,4029052480,1461956805,586478437,1664791116,3596168499,2740925749,2792503590,2412842552,2544447800,1467726321,2370640025,2366133288,1605697497,314815445,2622811123,4254983093,2894525637,2211756919,3217039131,3896493341,2618572223,540013627,4189313002,761102554,1731912708,3513441784,1820581768,315150830,1419560261,3863162890,1056869693,2923050412,3199040539,2009472828,3268176866,696263514,2440447208,216778594,3916483664,1804660727,4172898914,2693793619,1531458,3434627854,1016136350,2006031088,3593664775,3856749118,2670048224,2240018592,3927553266,4188594505,2551601085,1543905466,837528461,3113115806,284208489,119942158,3471081288,2875339770,382596834,1809424365,1553800676,1238721490,159972256,3540325346,2076768716,3876176597,3754360327,3565048300,2374533698,3585311315,1971800183,692333696,592760322,2087359192,745517987,619873643,2471248868,2113545526,2363745569,1977731286,1308515818,3902113717,2227023351,429422250,1907199817,478263444,1610243179,3424383185,3886071944,2375757280,4272148954,258529805,1029771511,2590845582,3105329993,1669679892,3442122428,1867034830,369150602,3024934118,3484281376,1725102974,3281320863,1596009444,2511693340,3579137260,699784018,206479105,610181147,3439047203,1890369565,3726530592,3655633135,68639904,2595182481,3816958240,914880531,2187338444,957324844,3257394375,1318934603,1064998895,4104641698,856437616,734712138,1442286217,2199677621,2306050696,488075536,586621305,2285957117,788938054,3728507010,985079109,2572435675,2087855092,612287729,4065925176,3976426306,2056949333,4170434062,3715284582,1409896204,1639266341,2717936416,1615367655,1028060635,4239185701,1666071759,284947001,2170605641,1837425102,1980042286,68208971,3151568898,88753797,226352302,4049505086,2456298242,1176442683,2060179266,4271336341,848412352,859341713,3237764025,2337787190,928100945,2605671906,581624578,2258854567,2825392001,4159690624,805249449,1245472577,527889610,3698881,21226427,63023599,473473565,1059524869,3028446485,609656770,2405180054,2624928742,3044136878,3280934555,577452375,2233298319,3314080485,2255579283,604745405,3982809204,2094485762,1127098751,331891124,806657535,3233214634,3176407153,976053355,3639611226,428085451,166761312,800094599,3697953553,1943212151,791627794,1160918603,1442468563,2026608885,3122361768,2723992363,1916112878,494619374,2631285990,2077286228,3116620393,1464001801,3220363961,785282387,3730633773,907032724,2621886316,1004950931,4271541897,1158681707,1148192750,3579273190,495653056,3868609816,345013602,2082663347,1687144835,1232096,920211755,2525941092,542650081,3040042741,2323979276,261000355,664098100,319837239,3067896705,2380424892,2687585851,1870901323,1679327964,2482444571,3792136069,1011056610,2241310849,1488875991,1367694219,4163915748,3132566590,1174516897,505340967,421358170,1662687296,3423467258,386517370,959980864,2095372445,3004229518,1791865704,2958144520,3127408662,2040031544,2674735001,324068898,1849586277,902701781,4115273783,1031423620,2458222270,3713518544,2180146517,886857514,1446692199,1834779703,2144402984,366833804,2033655447,607105018,2560609297,2047982284,1091352401,3368833707,1400412383,1563436377,608376973,168519931,2348128802,1933861246,3541161230,4059777418,1082179716,3503298535,234080202,3681828677,489299158,2943005914,914943777,1022986098,1972701578,1282921358,665064390,1586608576,260488881,3616480044,4003337803,850058787,1945723131,172543009,803758826,3570648184,1641529010,2987635138,3019189168,2044647385,3469983160,3940310007,3231874331,3263972353,3372408357,834107091,2203680276,2777203776,2600855157,2418377822,3189786530,3638306354,3488640236,4109530445,4167847572,1101817177,669729877,3129249531,925680727,2548824473,1551298600,3035486062,721531126,3485030831,702592202,1618937998,1892151248,2896497952,1914225153,1974053226,682063395,2992398736,3423082229,1139425102,172164650,1304529550,3955522532,878765736,3512638537,3899771547,2490592620,4249025068,1034038395,550992584,4162615659,2690881321,3113126960,3528907240,570110802,266061914,1074251737,2859600536,1468331656,57693672,2159532008,434980980,1271054107,1979610475,347577760,2074142600,596528837,2776119126,2587513998,504681636,1234524859,3270729936,1952206670,758042913,231170328,2460588135,2647845080,721030180,487142619,4156374344,484688658,479115399,2292538941,886334996,1779992846,4188013704,759971757,968703150,1896703708,1536423198,1197118852,2008838551,934215117,3150866296,3655000125,3404674383,4278064779,3575673045,1758527854,1607601853,3508922859,1854474617,882806404,1221388125,421345679,2083823831,905894764,2978587938,3865716715,2401436274,3596168627,767614826,2488612295,2016880065,2478485487,936161319,1086556754,2367929489,1615554762,3872235002,263851313,3021178915,3696175139,2291473100,3701262861,1731020618,1439811307,1958381706,2089378437,2780901058,157537125,1890099121,3361981040,3268544561,3478565403,2556302667,267438941,3310088574,1040059919,2063063454,467437114,2539709531,2610409643,2231323056,1523755193,1453892556,845393307,3958874157,475187133,3819781525,1118324837,633768551,208509182,2463526660,1920887108,3186001633,3657245579,2283382617,3926306685,3564540425,3738879662,121319233,1194687259,2836486530,1926416102,1720288289,3582770479,1462813098,350682759,2962354202,4063489246,2260023354,2321389863,797265590,439423906,3676058272,3061898614,2276415296,509348979,4069462910,4088058382,3661304466,1504474174,3904352420,2007702321,3206459370,2880790618,3080652348,766552299,3216517240,2064361759,2841578934,1196968198,210655153,4040047370,1016894694,4206339478,1068447681,3665373875,477284166,578646746,2506943850,1168250601,3909214125,4115051607,789363312,930100560,87302315,4163993435,3544085837,246300315,1446785414,1906733962,2411902558,3377896464,3325101600,1772398934,1677778291,1925631937,3801952714,1915800862,3946092830,3163696991,29448451,1077324376,2178763083,949441312,738473592,1363644168,563575039,1652712860,2450895445,4042058096,191314728,1003296875,3548750279,3376305518,3699321593,3896354188,2527206457,2004252549,327692692,3944977001,4100164151,784447153,3842554885,2837494193,3439966636,2466074624,3341351190,3689682542,2314578362,2241593946,4191738398,1631675201,1362696988,68726463,4063337685,164088063,2681797846,1268581385,1259376740,3269137953,2919800464,3116489643,153110202,2944665692,3072799166,1263684133,3139068452,57775254,1113258737,2914552598,1886593142,1565547396,3997849904,4003201168,2443304100,642147930,1741106438,2713807470,1837913838,2404225222,3188068003,3635720407,1564908411,2127523810,4056473804,4205615286,2354773801,664741137,3846274164,652319702,4217000845,116888902,813887905,2024864072,585592629,4055527479,4204281341,3273128153,4253669943,724392484,1784765996,2449036742,1688956256,3957474148,1515169032,336320329,2441833608,233531090,1435733411,2776908625,4285488997,3007140964,3331503438,2035528367,437946909,247385818,2678610173,800244145,1575416400,1193199862,2406809534,287290020,651453182,1927709018,4160776671,707779278,2158549014,3733714004,2077321924,2223080492,2942022242,2472994533,4262064624,3975929544,2099349891,3665236800,4215631803,3520243730,4133524388,4043430603,2153624694,1700248729,437782909,2770584693,1279599421,1205937712,2428148258,788099379,34878540,2703536666,1880221863,3737882014,4126261340,2326559886,28390249,76760640,541716033,2076846240,517645097,1199819201,3800715141,1495402125,483099347,2504289250,2263315888,543716087,1177969971,2911237747,3185004579,2158079533,3509273534,145440678,2920815035,3270670902,3247404617,1635384124,465072950,3359858196,3793396956,1404784732,3646209532,2252739306,783010702,1493132043,3844303665,1246769224,1023557290,2582000504,4120965908,484743387,4191552667,788488831,1761510670,1531366947,196137071,1527338249,1992789048,2131242387,2068250926,4247237758,3280822174,3983817482,2329346534,3441235734,2544948234,3643846899,3217967189,175299034,1210122624,2610302506,1829326172,1555123130,4168836354,4265482427,922856499,3376947010,2462445193,3673082795,1376207615,991260847,541712068,1827657280,1569164692,3915466095,2847701543,3107449963,1247940763,1107492127,2379634664,1984127592,3260691213,439657868,1255515016,259351465,3449330403,479856833,475787187,1430977702,2708514922,2548337143,2309959311,4218484382,4103934880,1146395212,469885314,1720383326,2944907790,1311848796,679397912,4275056088,204857630,136016692,899619714,1881931644,224969380,2534449013,340821861,1304419526,3922987476,1569582418,3500395398,3674335304,3577860300,1225301583,3115901235,4039998397,2037649305,2186151506,930589970,44348555,2780729079,1414987809,2138323518,4070008985,1262015941,3529411281,2413992829,684075621,3329133904,2961893750,2903834005,446554431,1295128589,3756623899,3043164801,3317080718,1337901131,3218825271,539330648,2381004278,1488662966,1376317264,131372416,3995002429,2626396226,492925119,2671562520,2985305465,3740539597,3814276103,2754685421,3534077468,1189886301,1093631690,587695393,1547113288,144299420,3983195098,1283417945,1835778381,4050193813,141217325,1798044386,3808488412,562496591,3588131102,925857975,386018890,335544182,3099065274,2632716776,169636563,2402125367,3883087093,2963563594,690282109,2404011797,3047144762,2607897477,1555825177,2364090220,2029781544,3518917975,3583223351,4177107925,782602134,937883246,1624043223,391329951,3268654937,749984551,4154474501,1063152423,3753699982,1298737983,214829520,2563318481,2883481535,3288482032,2630532626,4147163612,3528109165,1073501869,2580491315,923487580,1445045148,1590587861,360640308,3811713595,110547229,2568352721,1202273608,1330094160,934490513,1795670209,1388743402,3990519413,3266545042,1944966850,2742342726,1896914113,894430323,396517798,61668911,788910828,563997189,1317379004,3988240468,3095328416,3377285035,3404495582,2229049066,4294768684,2618388206,3048558080,1889965844,1268490982,1876941461,3973834191,2867186387,1127090743,3753103165,560798149,2306582247,2921545015,2965432481,694654621,360721037,1070293287,707214146,1364068831,1109455165,819562041,302605718,2814021829,1223461110,3766427108,4155205838,1716156176,405337173,571505921,3951748701,3368078805,1565761618,3613415144,4209155336,2431893501,311684069,2380682511,3765923956,1233887728,1427429346,2098588211,1341871079,2095599625,558425417,1791376258,145792109,794720238,1343407099,4128703522,1941517258,961704498,1399168973,980689139,2561458412,1172772856,2856086646,1022151870,1402337646,3309437047,190392646,3846271427,303340250,2348826621,22176109,1440192619,4204291849,1246436378,89565780,2899743575,1794159601,4196125121,3005833906,1029101958,795372547,1528137270,3425222928,1468276008,1849209591,3747225320,2166170967,615292810,3558392825,61655204,3447775912,629894848,1470216968,1147564013,592070869,1204970798,4046376752,2068807284,73934474,704908888,1795920065,3852692473,4103435785,1593422305,2736725636,180395614,659413667,1308132006,2312971053,3290271032,584219770,1473792724,3553069644,2123204822,2435537902,4240100583,2656047885,641027098,320376551,724567246,2075191840,2448687309,4178498579,3264647358,3177311009,58901861,869383848,2410548526,275676238,1872984412,2673602017,3144596064,1991008277,681012311,3165012125,2532147459,2129988318,1323565333,1880563429,1204950911,1096290267,3087367953,679091015,3861322845,213260345,3213693608,2420301772,3959963071,74430616,4170105087,2808233359,1962558308,3114259087,938389855,508329172,3297653331,2413480583,877740830,3966169364,3945563858,1225274207,4097617729,2609953807,3147716504,2529562272,1638906888,2768021785,2635985526,466194547,977462410,1585461910,3892563030,1821082658,3402962492,636018420,116741664,708008668,3381254614,1508871233,2083181513,3071200236,4040598976,1581750694,2708921268,121281378,1092747113,3496779178,926692042,1189696818,2678963332,2968479759,2159199232,3128509357,3223491647,3322553280,3277936114,1170267420,2847874720,2227664949,4047046450,2992708445,2718147914,1529622838,730703515,2435944627,2162606843,3806296470,2198419779,2638830140,1686682622,3073912000,2453379188,4113835933,3472903123,3126993695,3019818389,767929500,2716544012,785582950,38529597,3444631832,1442478417,2048274262,3105408454,3530244067,1409900397,1900721914,55341114,1339884202,1083007209,4267253726,3246897984,1614952800,724373558,1796411531,4104839184,3822664011,1280624968,1574745603,1798746337,2186441934,277462516,874253819,844956825,4044343516,878029971,2975563199,441025680,3256602572,531045782,2627754110,4167365884,2481906342,596246636,532225721,3918824800,302458828,4018014089,3531451061,275946663,1774247738,167542370,3271806650,1251759010,745416791,346729602,937851868,379943308,2467331040,3904122354,3011385785,342870277,2456725631,1171492032,1528385310,402900640,420135901,4289948960,157709763,930558982,3018960935,1951059188,3180993207,1647940377,1590423189,374429639,351638374,1073164861,942406153,2919929065,830923157,4091268339,3704527532,1189211118,2931042332,1459497052,2513133628,2235464509,1090042602,34091104,2265432197,877115033,2959495451,820342335,2263152439,2883931998,386413123,3533153140,1204426797,3655278967,4150950881,1088239121,2527064678,1241783701,3746181939,2122157909,2516215723,3703670441,2520276660,1113018766,1362086395,2960284858,1339938686,2109632665,281410030,2430790041,785243990,3747440827,479418076,2646146854,3592975507,3861748348,866123489,702207774,1363197445,1309703391,4284118719,2741043678,971268260,3786854137,1187611532,3239798602,641955440,3003568642,320457747,3657232067,4191789138,303538724,4157778819,2687722665,705694145,2853884437,814324852,236661267,2439105523,41527924,1297535647,1958077581,3299209211,2493658118,416132018,1835411116,1740601252,1366251560,3666010731,3053419919,2347941344,3733137234,3312563670,1208082138,2554864461,3079124807,3521603130,587722151,3498737122,393610147,665336681,3954740406,608961515,1392546932,968953843,2478930742,3585078418,1847428413,1517413211,2184498788,537607385,1923436780,975178193,3165622196,3640358551,2975508437,1200424418,173402426,3031394006,3032383871,2006509289,3934745967,463776743,2470388433,2278255204,2039702947,4024640173,3920534501,1808892888,3185043816,524352995,1236397662,2955105505,4134345631,2769695715,1129627425,1764795217,1181846650,1847564691,901160440,2026272277,174550316,1564648072,148190828,2362802547,405654408,3100048555,831191335,3844716277,691456376,3362966912,2401293344,2844865487,3703644708,343596620,1333748946,1205743279,3012416087,3127934093,1734076749,3202279365,1912057833,3755679533,558509140,1570035073,4195800123,2421550553,637869563,4290862859,1995554802,4000876095,4182782947,3179634615,310756029,2343871431,3104904133,4040619976,2731476651,4079872450,2022615306,3748742557,854378856,1224903482,2505626946,3079319887,3298555762,1242518701,4272022298,2576553224,152070235,3122283842,4265998461,1798107782,3648106687,3846357299,3925668322,2516038151,2824892230,2378536809,4241331667,1736441320,2977686351,2818818325,935173837,921008796,2655038432,2812430303,3898614016,2689750253,222563455,3547277221,526475767,1101654273,272416793,3972423505,1652255792,4275495810,636909447,145425457,2413194560,3008285758,3561465454,1937378325,1236794,3096884605,3977622839,1292609539,3386805872,556553215,1189677239,2830902042,3050503857,305173369,2006537856,2952762237,3896690202,755876940,2561896608,2580122488,1840197911,1706721854,2366563697,2823602385,2353079849,1644155904,3150661532,1508981456,961427600,40365314,3018382482,4247715585,2849381366,532729835,1223874428,1387136362,2489333027,2314623575,3586780673,2454127075,706018927,3540900893,900795808,1370705408,338536076,2034569290,102399387,1244285017,1835686337,4123305871,1242839223,1113842656,3876730160,2985272853,2175238203,351798402,2673134997,402449451,2367067500,3032997611,755573554,3313063977,1129206904,1425087124,464372973,523525205,3095536717,2632005821,278384972,2606869409,3472832851,4286920886,989654716,1312919833,1157048608,790223519,3031850517,1273265715,979120344,1597334484,4086115923,2003767938,1317725918,89844488,1500107857,3547504183,1038129834,1275875993,1158147799,1780506669,784000482,3199215073,3148699767,2499503258,2506133767,475052129,667884193,1937228653,1458802093,3880154011,3642038775,2421486563,2566900498,2705131075,723808751,3574055891,2408410864,2478252703,1461513173,3669628185,1586356630,1242659721,1738318392,2263262309,3627952249,3887761046,1284838504,2273364130,1059888177,3459851811,3850722297,3259613922,2661714539,1342056454,901454297,2341687991,3912769317,3873399650,248659946,3169104771,3324964349,3355003587,3756907140,138334563,2408811711,1119146012,3570485708,2961919970,2807918026,1036667402,613935044,1639511014,2098959842,1515598058,1367731618,3203821475,4231586332,3586866172,2818144539,347443300,3217141961,201655669,3274926990,545813705,67336557,1294971069,1767121380,2558987473,2878175263,389335901,57410865,2946237273,1965120457,2991754929,2519395097,3463424129,614289127,2730139645,4045983927,485767379,1612417851,4164903726,1625893526,3203149212,2990406760,3128084000,207653678,3183350260,269928518,49803556,1691079770,2422005724,3678871267,3113485810,3634065678,609366843,3049682852,2076145793,471577270,87320834,3729544989,3076521895,819642042,1270769358,132845862,571731188,117940460,1190789009,2460814957,1459295103,1973087418,4060937082,1808976536,1087477004,2026724766,499401249,2776774704,2110596779,3047093024,1299168513,4190835900,3732644306,4284193513,308514784,2301072538,2002478312,2900477864,3037426768,9809825,1273890001,3261459728,2498869120,3548978335,3967591234,882568181,124743918,2101886281,1478149030,693322070,2008077103,515073922,4003780264,1675108693,1206559880,4267537734,3574966850,1218879142,2284667608,1476050939,202791423,32976493,3542304212,2722610967,2653937480,2430186350,3686834563,1700219071,2936303127,3671208248,2088687372,1148944035,1159049506,3806540998,1538306514,3354769002,457539221,482785281,1969456850,2194186889,275046370,3290768038,307293107,307377995,1255098811,2451729964,3786219360,2325782141,1820064408,1187967853,4078021828,218164395,3208976389,4257010336,1337914149,3515236465,3735984015,3713843058,3615654929,170436944,2027605442,2460191015,2173931228,3369823744,628717446,2241913286,3870938376,4256427728,1267062566,491465191,2606857396,3915711381,1937528448,1303817457,3609677785,1278769897,1534154177,669714023,4106472301,3459582418,681597341,1532506625,92493319,1134184659,1694290246,3554483525,2873814052,815369209,3192621167,2150887681,10618600,3483015676,3259192522,2638730541,2251935537,2067317975,62611364,3412234485,3637293510,432320481,3547450964,232439652,1326771737,3074907545,821464443,3837189268,3948129133,953084850,1583118383,2311271306,1254852119,4026046020,2496183373,1556668001,4267999621,3062069504,1270608963,126591824,3455595199,812217269,1002162515,6976501,4187791844,29611350,2065413796,3457516760,3212829721,2725035599,2473172015,1744687719,1868540856,593525921,3430898847,4258039903,3782130165,1864564662,908060589,281171988,4238721487,3907612852,3228064104,2902195738,1980604888,1391117135,2556508278,4024564055,4062870763,3759724875,3259633669,2706245829,1340626241,4062862828,3467565940,2622384002,3614637168,1147979078,3776548738,321453779,2604936241,3171508089,1083565171,986557940,3950504497,982596163,3687924910,2886930816,2084138939,2054749233,3642940819,1673611738,2988841546,1306246744,3296087282,3623264157,1617959344,3122811398,3000530361,1734487173,1502266830,86668747,4241503042,453364338,3874401038,1212273446,32284237,3728707040,2587262449,3744459346,423295290,1613856032,3802545097,596246470,4293229963,2003639335,1004932080,3813247804,788840113,3117683602,3083559191,3473305531,2927460822,363730834,2683975928,2141828518,1257585988,2500700066,1261084977,2948450867,4125659938,4022591326,4019933368,2590099969,1943426887,372711152,548467189,4082920711,3343304976,698021639,3353448423,765519132,3467906196,2548022241,1865416381,2375429475,4235670678,2913035318,1572596441,3528720510,2566422606,4190829453,3867993485,1506275639,3654678873,3681489366,3850103405,3889608032,1558725479,3467005653,3135364127,3776783355,1580393116,4161389759,1727274571,2122131692,476565071,3909364060,2920684578,36520250,387908000,2253548427,2988467589,4230581488,911172565,3918435441,353142960,4010094601,2198089644,1896448745,3303575902,2561130272,3080578851,3502313174,2057294699,2947973624,1467715209,2311662416,1442359246,993748559,1088482444,3485173177,4148608296,1681170936,196186361,2797677435,2447315150,3510729500,1947243238,811943140,1393383895,2635549586,833340283,22819521,1824600402,6063082,3934788858,3715438261,3518649253,1223861826,3868239024,3853187095,3946340528,1854654926,2019445311,3494788571,2486740465,421469012,2893623633,4146361602,423926371,1076155250,1759340322,636398643,3840754840,1668908075,3415670720,2766913879,3583399187,1426794268,1121422562,2932649521,2282576171,3184087838,3720541205,4178311984,2307384649,3462458973,1924120588,400802175,2185270844,1491925804,3588922970,3385601225,3985627869,1748075056,1903359893,2408130746,1903067190,578590230,188748400,778980199,3293218620,1814201505,1133106272,1242478440,671701457,3594536876,740782903,1021562622,732073091,3246432291,2912572144,6359003,3672981400,1596766328,1598626216,2892487021,3449636889,1228254220,2819650643,2712894923,556836490,2630823829,727033487,817185165,2869217909,623122636,2465751337,2448621047,2783928192,3605181273,2292964545,2681305506,2315671709,487101082,4007330013,1303072774,1020937686,2155661959,195334598,336709102,3690508090,3733687899,4264470532,1571998130,1060487712,2436795270,2005645446,2078243421,3166664080,3766376750,3709489985,84842744,3731231223,2421059179,4072217639,2264520869,998677933,3154630777,4054088473,2413576351,3714801662,1647509082,2686458643,1715187144,2790543155,2040678271,1418766941,2804252665,2785914036,2326795813,301389488,1923607135,150787995,3021677731,2684034580,4077303998,58102455,1245368492,716750546,2810390601,1119104306,1526374759,927518678,1644479581,176835413,3738882395,1954809162,2712547067,987610540,2118875564,2004468583,2260474649,3821502853,2275542969,423589486,2212507127,2363657070,3083281304,545231574,32991864,1761187972,60393381,1374306322,935243873,1146372416,1442476648,3391249647,3230490425,2020005475,679106375,1201944471,4175965704,1763247285,559583368,139573243,926328189,3079308068,3887989652,1085296380,2993705241,3844037298,2370520344,29592151,2137807483,78409798,4522032,2249228867,3901054597,1170004022,4021539900,1179048134,1578649826,3574687996,210587236,3182137826,622096268,3031997718,159597668,110073104,1005440401,3138392880,1933149229,1577727666,1274845885,660519986,682437264,4064247062,4094755779,1288685568,1819802568,3551217515,3488348292,1508277351,1602976784,1257008764,1328170514,295489031,3486054260,2624021817,583765069,2593681208,3478663210,2033302854,1918450673,390170437,841739697,1709299368,2240070558,2721000753,2447544872,2985253992,3491747858,913521074,1321197055,3980750239,2132130987,1073905679,3503543392,2488183813,3364323754,1467157606,385475880,251605596,4038820988,2042815797,1816351892,3736493147,3069804179,1528840972,29384256,2220428724,1820966011,454769971,2905578309,4219356668,2051573654,971001874,2300087726,712577728,3985943486,3418275641,1431245755,425573986,2237164720,2962043482,2389547111,2317257542,3955902104,2068802583,3175949100,2245823268,3097491668,2715732394,3566948860,1867703415,34510117,2703708701,335583315,1196054852,1273707905,3396500334,1572790151,4050793699,1567054354,2288606026,4095384441,122621639,3780146090,1976409626,40149447,4286186830,3336227280,1519357758,1545986458,1178317947,2437313711,1552743627,256603534,622580435,535496090,630245334,3152499777,2129388853,2604486002,3806760794,1909216699,3543572318,1450465681,383421748,3937519615,1514015989,102129777,2789682946,3997639102,1121486864,181974212,2796655983,1165858760,2047109861,1597912468,3353811519,764910758,2717641348,1107892799,1719739025,191047968,1395602761,2025530912,1814543593,136974360,1770821940,2115533358,641069260,4085146990,1128045702,2019068206,1578502738,2634009019,1853405654,56476030,3925640176,1658978002,4077969967,420335089,3947185191,1444956801,2107942900,4268268618,890251727,1227407466,3966215288,2044954923,3120326411,2050602602,4237701042,1777604717,4091394559,1281116992,1605208478,3958109921,4289019605,3173947433,463891679,601118256,4067310361,164652841,3841583197,400733965,2821256317,638063964,1812146104,837165448,3982410864,3580217223,1273770605,617688188,2831957858,6954503,498358222,3265533973,2948405286,2049486975,1196496732,415530143,3319916947,1237007113,3361741287,3824806386,1452121034,26814032,1547923094,2645808461,3176617194,3857026254,103133875,1369505732,726647683,2706492648,115935800,3478920031,2828261177,556461038,2774427912,1994856474,4190968206,2663887730,2730131494,2311955087,3243442888,279037815,2099649751,3881655493,1250103315,1330480704,2383025521,3686089430,604363979,528948510,2299624670,1420728750,747373168,3166183288,3123042870,1513118126,546744959,1843677033,79463561,1671035169,1617640300,261620524,642227972,936253283,1007426018,3141631874,654350902,3142182802,2699586514,3263242885,1784556967,1938532066,1536046013,12066682,1753130877,730330753,408884896,1497010673,1776373489,3730916020,2537493099,3821326660,478671530,134330448,3460185146,1395829502,3148597016,154843295,267514017,2283340963,1542728475,4058357027,2094890056,3210116390,468821640,870173321,2139426931,2373434386,4258049460,3498134294,924672273,1401089721,187120249,3718294533,4016463799,4158438327,692939128,3430963457,3308246864,1907502522,2363069654,194060273,2754470921,1315188752,195120426,4055493739,3666600895,4270761,2321387011,3932663738,911475564,3010014153,928997977,255874939,2003573091,1496826372,1124064655,2957573352,1419435963,3258439444,1346631361,3670679708,2173654106,3814080978,1127208858,355281273,242579141,2774713312,2803644379,3028687905,3466908014,3561065983,3897867108,1564377248,1036906440,1121934738,1447145465,602510064,4179675040,1321640979,3796291997,3382979594,627497504,2642191069,4097218009,872500320,2712408834,2823073364,4080148446,414459543,3746186127,3890075113,3359050867,1835212114,1928150739,656666877,2999741059,3025663573,4016519079,4125028390,1560338132,1873193918,1190509102,324163153,3108313326,3552911333,2404070402,1342695001,403986778,2576622219,4248390268,3158523068,547172201,1681125588,2184475493,2742624948,1525984125,2579308959,3486319503,2189529866,2947709587,1909985224,583841461,921925587,3116323354,137569095,929965850,180865746,3458723966,548887245,1278647382,1447696225,1747432700,2100448579,1799029041,850322176,3968314954,663647158,103647574,4182072729,2418971317,980949554,1175713730,4064313799,1956595003,2360981359,361713104,3017969514,1908543590,3859202343,4043516961,1758167128,4042517287,1997811644,766986287,1697561973,4259146310,3364874587,1062388880,1331190965,3714857307,4209478164,550332016,4075765833,2062873252,1645961591,1621594772,3148839819,103002140,1924180603,1616360117,853311781,1626598641,159337394,3738272993,1587473106,313632514,2224637546,4007748468,632364995,3903158965,3406623447,3931615203,882357649,3837057716,1494391593,3475817883,779140406,924772403,2654529846,1504952333,2139519315,2870084469,1606751021,1088305679,3136338288,1786843574,1033652096,825488413,491348339,1020409530,2551131001,3342000083,3845792983,2182677263,2068894749,3208418424,3994706012,489353361,2975667675,1860635181,3775122105,1294502167,2051614160,2524266016,4202281057,3691267107,2631156478,2954200617,3167056179,1794185611,1169411480,676931097,3857403997,4035969988,1808068856,1677102168,410379504,1631352492,93546138,3440511171,285830435,600872333,2012595908,2419501227,2153375513,187760771,121486672,1568443265,2490761140,1969156398,157254259,2432324551,2683505154,55329305,3941194935,849034388,2409051741,2216621390,2640998115,4131294182,3902528588,2533788821,173180576,3016123699,3384492049,330974320,3897861016,2148130562,2796367046,1943994174,184528895,4035384550,3079369909,4087720945,3628254276,361714989,134515033,4064037331,1388641478,2229211830,3068601153,3912418074,2952103598,1190698447,1677825433,476904313,472084138,1023133293,1782810255,418588832,2982443722,1239412212,400906979,811791238,2890766525,953511118,1452031646,1588634705,365693976,1300966366,1639744266,2024062524,2518446093,3790728214,194806908,3667682096,2092418119,4284004762,1896254509,4249471214,3534795715,2680303572,3051245793,2171117549,3686121972,3461195247,2077432118,4176283124,3650723479,2465018014,354156234,1521198471,2766539112,3638069361,1501552603,599894509,2402066289,839625821,2874184215,1851465846,4097664754,522491694,1517570006,1941577192,650613034,1418185020,3477267734,4190654961,2509258372,3084865640,1312197651,956325643,1363572500,3077922379,113150159,358652923,1169205957,155017680,2090687182,3332564487,3687231470,3351347889,3324275656,2446648478,3411283388,557174656,3095593244,3559897019,3794384126,1429870300,3762329649,3580040219,3207247942,3991667341,1326835159,2203706638,1965435561,3385842293,1919857105,3518812227,3575370421,2345261611,952915405,2138359663,2562899998,1236142896,3439122017,712493546,2907688299,3621555475,243056868,52566414,2017248553,1633957931,4097007758,897362799,4117891311,2168968780,2890795962,3585459516,483470688,2628175657,1570179833,924127428,2017163437,2840980372,1223980519,3172660421,3802170208,3120892442,2296796228,972469671,2452324985,4110542638,1132724912,3312694506,4137671647,4171847811,2694896404,2391446369,3537927191,2330276010,4278818943,153122020,1414236342,1823099337,3019711111,2045246324,1514175009,2400892599,2991635747,2621752302,1982518393,3621744630,1233001369,2741219896,1701203597,3139503675,2787729716,891696252,2205594058,1379184257,1329939981,2230406312,1977382211,287813278,3583964905,1983917254,1097217162,834842981,3267752836,1677011009,1320524775,2507588134,4279260271,1496964506,615933031,919120049,682505904,369957731,711872052,1221050267,2167546392,1615044575,3651150251,1492291159,2691726270,4053449827,1861097179,1905941480,4141949491,1851622897,2324319376,2082116595,3240231565,1038856387,1543162472,2284369141,890502555,2179160800,2705457270,947434420,2315304202,1162138255,2375594619,1588825780,2916692917,3019583773,1504803343,800210004,3692948911,2747549568,2210944395,3648171577,630544228,3348995316,3934764475,2889973934,1306114618,2073276847,2082676388,669113800,465511536,3878190733,821716026,2680588152,897982275,721153182,4102902266,4146955835,1874746895,407026285,69568203,4161393215,2327771570,1643123301,3111651494,1804211229,668760157,3546752315,1507732970,3935671822,582934483,1708589328,976424849,2408388687,3071887568,2337090991,636610041,2360023391,2431712800,3999742065,1919405662,3901844989,3362024395,2057109215,365843896,1946323158,4005908822,1686859596,1725957769,1852875059,1116046349,1205145396,1749376652,1577800433,3319724177,2916908074,2280944697,2261019251,1613779117,2967978103,2379537826,1397871391,829164665,410830252,2169937665,1160770701,1589546063,3405279962,1083282460,919916398,1551214136,1231542578,4275308151,1888018569,830619863,395348041,1012459230,3834847969,2422423975,3220866093,4668377,3254203367,2554915722,798425349,1728782492,709448124,266064631,649542715,1230563212,3077205232,2567244305,142990446,2746211988,3537756543,4222285452,2317456406,3821308102,259593,425612091,4002047647,3853790673,1799867985,3915273302,4034839352,15813987,1972707525,4262762706,633891473,3111235432,909469878,4257775288,2069395949,687452021,1320514886,449268643,611888130,3120591829,2165664043,4060445608,2251833690,897832647,429947958,1593296116,3477101702,4283222566,702331415,253140716,1405692204,4268585164,3146343240,2705086659,2630269877,3544091285,1973105012,3584253337,3362475899,2851742516,815793268,119827306,1627624778,2708257637,2113606319,3331106594,4058361557,3697022657,2954799410,3816260162,3724709407,63205600,1121930114,3194718384,3627387224,2690490812,2546282749,848149641,87209889,1162697781,345818109,4209056166,3015855336,3427398416,3703936176,3439137963,2801919972,694514728,3535489486,3502406468,352894167,2925975487,2400623206,1832115499,4084611190,2788943975,2767791021,4235990130,674091243,3319515296,2663785912,4029628374,1229091422,3433838843,3364226262,893082710,1579023705,1597332584,4274811001,2490488959,2477221021,2790891331,2181976916,3592914855,1762109365,1202417654,2151499388,1583160563,1738398743,4019106936,606411633,4224509933,4098789174,1046772637,177172049,2337580220,967701018,1248109958,4146343085,4132496427,406945220,3989034978,4037614542,1462623656,2769441127,800053578,3900801678,3278172427,3710800576,3542777377,327901307,614903498,3954265477,3856565076,2592921907,2115363805,1701160645,1797727188,3021862463,2063217075,2571401527,4004698937,3311598989,2124913695,2177725882,962790442,1098423660,2180201078,1366041949,1492010686,2366160275,1322190331,1219125469,4266381846,761072308,2429308063,65371614,3177183839,3318599719,4199748896,1998773748,2431840929,2317725957,880389723,4094864168,473661988,3975019369,2425773339,1537907313,3113691718,989899103,2450402587,246110680,29144824,3192297807,331431844,863774895,4279577843,441650745,3527849703,2809856291,2124704225,2758947523,385951238,1978645573,2804677008,1907226389,2290704560,3203643287,3025084291,3270469781,600522093,3689036107,2721862465,1353052696,2480213030,2448443882,3608064050,2029551050,1234181637,3841678434,618231932,419667956,897802731,3618045849,64793617,1138230394,2878759550,2536481146,4203234741,2433698990,3570648396,2701136995,612789661,1046164512,2296603848,4171835020,140718945,4238282591,4119062105,440017675,377422008,2972970972,3707405033,2023113099,3788852891,2491698321,1681374308,3442272504,3689491864,377780147,3958965160,895800638,3763233287,4217664546,3088723967,3306998620,103913562,1042313541,741981992,410591839,3398288068,3800370415,761675291,3531411396,4153406383,2151645792,2455848439,2067256780,4156746785,3801264260,3721376537,3581129786,3380055886,2599426448,947543764,1642771419,1279919806,635432892,1743272061,3264881241,640960694,1758583080,3156454324,2633482553,1873226292,3545402111,844800744,2955885451,3642199020,1647068262,112987619,3931029062,3573815567,2550846864,2113496230,555121784,990645862,838346063,673426838,3033958082,807118636,531144666,119157693,1571508499,291431259,4159448924,3468650612,1008666329,1373411299,3225866883,329208910,253453967,3688057619,3797519369,2974446217,2204701349,1275432610,4126079721,1947363974,77251917,3581489007,4224833773,1726974662,3898705196,2064467646,2752355229,1668673902,610654070,2905032293,3334444314,1544561421,2685086183,3037076206,2665181943,4161212412,1271711425,4117252465,3186164524,1519572658,4186805958,1675216780,2960424003,1021045970,4245320102,3099961381,4225434354,4172528116,3857638448,2218835738,3291407011,878903860,2859700260,218044483,1789561882,1662121024,3880114495,1224540037,2255215297,3293551328,1441376768,1595469143,1326240243,4025950084,2759526649,3865326032,76428933,1769292209,3063199281,1809775700,1794087665,1546256392,551868973,2263678600,1387546132,2696238180,4290423270,2668930371,3732157982,672786718,498445474,3518000708,3449141330,4094840135,2511699663,2511038311,4285943927,1033803291,3833141809,1235977399,1242446533,1437926043,1088872003,2389606719,4128128382,466974006,2429249610,2710620262,2402469718,3381600211,2402478917,1185759959,1388456434,1839149672,1690113974,777367021,2357412082,2990161117,1787720768,3298277472,1484223961,1386847827,3665450883,3356330912,877354690,2450622018,3790825461,1215056955,120881078,1216680265,2103406049,613051025,1941868704,1621076869,3076369191,543992367,3192623069,1030205405,1047469012,2612729042,3845552379,2863851365,2489561773,1802704757,1558696976,2327492557,679970853,1797865962,2832280543,1835112789,1044778833,534545135,548518515,525931706,2391516812,2880624416,1585292472,1700580315,1011304239,3066775011,264689773,1094586735,3388081398,990242113,41773081,281275144,662629277,708592001,3106626305,2182408418,3445155015,3808434301,4149775744,1894527965,3339232328,2295418905,2905221636,1042352898,2950036712,3212877902,2160505098,1179951018,3222444015,417971980,1640743927,677202941,2977296092,928382551,1184628924,662998463,3535943238,725279656,3673987511,1263745113,1438170025,4176968376,1926930157,3678795349,2593449178,795945467,1234672947,321623402,861417626,1114855445,2120466676,1692961339,2678698792,2214196634,579109936,2405650976,243626976,1488630921,2913136983,595295524,3568590663,3730101520,2363063113,324216972,446530308,1848956294,2026369828,2630979320,2725186161,2243835886,917446818,275737281,1619636283,2587203575,3941739082,2424085931,3437171298,2408984425,2422120223,3618390463,3595638472,2924246421,3258978531,3288065366,1214928408,1697818570,3392554966,4245418539,2064873040,3770001964,3533316088,819196623,3511603391,1761814358,128726221,1089794144,2095870415,3255503547,3886730595,3384921881,4206171531,3681543904,2728424128,1970414063,3043334124,2280405544,2987453656,3087797303,322426264,3701119950,2221959863,2795658850,1007489112,995198165,694975039,652724777,3267846528,3186171700,2852921080,3004433356,2237182620,1171112321,1506131671,3782571385,2166880337,3203007010,3018703310,854740073,66322089,1222253748,954717368,2822876467,3340851596,3043842015,133075460,3407093322,3815378309,2652194254,128316545,866551632,3308463443,4025356733,3123180971,1656805408,1184997640,238572231,2430211632,1171972660,3229459856,4220807903,2621156931,3596022619,3886362478,2185400756,3333578379,2126200722,1036348690,314064055,4102754796,1502910130,3404160967,318849613,3952401722,2791168172,2261676894,1950277566,2130799152,2171926400,2327793957,1944207339,779776528,585843552,3482146324,187366112,3402961525,2078139869,3421140324,526447170,2723255766,428170529,3210650626,1316089805,4153289671,3231416115,2423625428,3336714219,2445538534,1466645435,2876384351,53198037,4034224809,1516585738,2018687224,3938707378,1569973430,1630722705,227562490,1724729925,2491152146,740466602,272831891,1574282162,88315216,1404027654,855132932,4232963632,471690249,2115517627,3438775254,3040465903,1238626581,2648471481,88328418,1600354569,3723019362,1817112147,1187007202,1008216228,1323991874,3914338798,97869478,2636972434,1587612662,1465429929,721021661,2455408535,1460851971,4143473824,2306126965,785033349,1206700277,354108691,3514890814,3194654901,1902911622,2100303186,1855617026,3202869967,4209917316,3354124100,3437843239,3944990443,1803798541,3054028067,4166133735,3153486986,1398622285,2748616398,1568731617,3248605740,1006799524,113005701,1908319202,2939851829,2570218351,726039576,2909745321,1936069980,1863019649,136859402,4026297153,3491682328,4160782300,1405165214,2855248162,2570658923,78139480,3114508101,4075195835,3405100207,707175786,3804221459,1022459926,1783190343,228531566,1297901435,2374963563,1361796793,4223300177,3163390720,1674327629,2225941902,2302721071,303689997,3733906426,1219104761,2750216570,448571878,1850810653,2252208421,2966068007,3300910949,1216943164,2299053708,399653286,348858994,1805974976,2347868707,1616119605,1809686030,2594167851,4080585015,681499130,3573877370,2419773309,3406733079,2453411532,2599117487,987715351,1962556974,3266873701,2359551331,2673321840,3109045300,1140302662,356227433,4253951181,3099620849,3582127457,180327845,3241682938,905257335,1013071099,4161118778,1971748456,1902377979,2260503892,466797710,4109761666,2884158158,2613911133,3600699646,4277917630,164191875,587614536,3147696726,4160757691,12427889,560880467,1460818949,3457970432,1907099677,2724495308,1405095942,2321643951,941756865,51188988,2512405432,1951749152,1396716644,2748726961,3759904851,911671464,3317731121,1422157308,2159818606,1285078670,4184581255,123986273,517451527,2114931151,757836665,3664731043,2111552829,3823081722,3833639757,1923002023,1903847744,226249720,1345794817,109717515,3128914116,2424758831,555791192,2571339079,4253067799,2185707722,585055066,603433256,430211487,3281325239,349251951,898361901,1156959402,2550470501,154078904,449558278,1675833964,1157923270,1993569401,724638285,3525798293,2056848962,3294281468,2086846359,3533143705,3156869124,2341410494,2711678365,1759758272,1876237457,2893973369,4122711597,952852485,1048811675,2606223438,3524574835,1465608491,1384010226,481220562,2941969068,2338879681,3934124620,1515532702,2463551065,1966976470,2476651110,3073549408,2347380147,1450212786,2240356026,489804723,826213176,705651541,4289429371,1227833522,1837572836,4007811208,2008957975,1509658607,3855195663,4071286176,1341598953,1638663971,1941477758,2103673561,1596094486,3060961673,3075985735,1070135976,372525840,2660112042,2637593486,506976390,431255626,921029008,2107687620,1198595801,2163170878,56241596,703983034,1515947730,5499012,3252662260,3510971791,2177549788,3306186755,2206017084,3915929434,573816363,41908418,2368571964,3870099499,357484148,2194180912,2172079865,3549635188,3024036509,956446993,830451711,2745529678,3389996420,1459441194,656956929,3701930846,2374476864,366888408,4035924113,518660194,1471457567,4138279281,3070569665,3977306215,1255973378,2557675523,857108787,2099842626,280603204,3310868924,3254560185,2507870995,1562983337,3968424447,1848418792,472248268,2404927240,4171610356,2818099975,186619000,814568866,2755422135,389529554,1226939341,163096447,3588059247,3445167956,1807042718,1146087052,2545787769,4011413320,9735430,349052586,505270312,1570914998,755921392,1634795390,2017990067,2264072504,217590125,3626862538,909928441,1278011488,877995794,201964344,994613566,1254073399,2971338323,3752992704,402812117,2910647070,1017624195,3415790845,900664540,2762226419,2233869225,3201874261,813276115,59136946,1637584645,2447088894,3357279254,2079560093,4261362317,896400039,769255431,1144244123,1801737168,4148599185,1094619402,4064071017,13338641,1052633223,2792071077,1422229948,1333217343,971399636,1691683824,2296864743,956377274,978378024,475361816,3604413961,1713302819,1494243964,2871680803,1148160339,3846871359,4124741874,554413768,3135660370,3313675503,786891851,32644275,3031562206,3202897537,2344721492,3943080959,2015251295,1240609462,1104241278,708848569,2463665647,138328494,2589270058,2400006541,491720324,2030751849,2132402022,1186863638,516404463,4287955479,2960523180,1340237073,3904408395,2097185945,962559930,881154105,1369838982,2210780189,2762032142,1888478740,1277863808,1664741763,1762402926,4203037831,1943178332,2693681851,1230470904,2180497010,3178051798,493952320,1441299163,867608150,3599878405,3022693714,1494360105,2060345738,2807159006,1002637316,3084487795,2549535738,2855471926,1739880555,275368397,3861031885,2453696804,1550837910,1276274188,789010133,3075094302,240542145,2596467926,3020122112,2654770861,3178362367,1736622356,3591044463,246626548,2550167522,1614382000,1054786640,1779872484,1748653245,2778117317,322110879,2574826555,692385840,3395711717,2458258189,4132272804,283968335,1193795406,885093444,2808980018,1341741889,3180047059,487585933,585788939,892153069,11447930,2106838665,518878182,3723050412,718714733,2103966496,1702994894,911725986,75553951,1149862331,2534409153,455101961,489459503,2302174511,965500619,3069780187,1870235767,2475263181,225252932,1586940166,739118538,3063243152,1108911431,1092033150,1811206702,3607699898,2788596291,2935025129,3564732565,1075588015,1596061254,2108138970,2240023450,2145128565,1809997122,446732304,1719844339,3693303079,3676860903,3862783717,2828199223,815101919,149918743,4201497124,4176069537,2191218997,2754346204,2404331839,1820787998,3261906375,455318769,2931630280,3774296920,2418815944,3934771777,3147928467,192460408,3905896817,2299210082,1925404599,2077531690,3961992125,4234742123,2275022362,3410534808,1653859271,1488368507,3224163841,3785323906,2864693770,68679,1542154841,632979890,2268288056,1962069929,4242471571,478066257,3172617458,3049975969,482138539,1801443829,2482770601,632994774,492281619,2456572105,2235804234,1350955688,1366139519,450141667,2894662301,3480452138,686475630,2299274710,1634204408,3906266459,2402563163,1114575517,3786676085,3240107096,3051853925,2712448804,2174317880,409735099,1864004515,333578712,1777834263,381368633,213880515,295390971,1874195931,2945380105,2370746623,1497124443,2791484849,3437250853,397282333,3502191165,1756169030,2050029881,1867677567,3355718981,2157641925,1377787542,771508329,2424060530,2739268043,1860654448,2313262374,651251576,329523357,3646621323,2434235823,3391433447,2092030554,420927707,3247132915,2352799895,189556564,519754716,3026391059,540285482,1035422779,1900673948,19322076,1832365821,80555539,2128759085,3290954817,2457267550,431915054,3601318094,9290636,4212945483,4035930751,31587683,2829869573,366316217,2610527255,3446303414,3563638333,367449642,699481764,2585362977,3739821290,3738500781,2064788347,519165073,2651985450,4278630835,3216100288,4161740569,402196666,4167390100,3452445870,4168719282,2028166189,2144380813,1702479647,1241984757,3771881036,1401498144,3094174181,2730155986,2303936122,4228924276,2679993159,3169997833,1318154325,1223152199,383332277,1184950195,1607179185,3357280562,2267137462,1765133642,1883119339,2449769496,3225680295,1434554521,730194589,3086681630,2760100794,3884033122,2934877591,3693581658,3685932161,3678668259,1990709208,823880406,2601417597,2867103328,3350964806,2586991166,1669551022,3081893650,2523889298,1592462937,1994880184,1572941612,699641723,993573900,3892897020,2925308452,382707920,2991513270,3997326043,1213309166,2439714629,2378980225,566664818,4215723831,2187605502,249483399,2504556365,157920707,303876937,2810710657,112432996,3902976964,3587488303,541981410,3523312477,3163843956,687573910,3396279734,1134488209,1231410528,4130339331,1484138595,743562255,1825482563,158448787,3813680357,826267381,2006005127,2620737038,2906177537,3008181530,106329183,4163210406,3875125737,2771079641,1223021428,3872394057,551342437,2260881936,840891083,113885511,1824058394,3063181328,2873890817,639351623,202332710,1365361588,783323904,1683661245,3126797121,2965157402,172807260,2968331933,978270229,1049136867,536392636,1752914353,290504135,1070388701,750783939,2400184992,1084267801,1075726234,665472227,518940840,1927623000,2163381133,3447659307,293567290,2272001573,4225295152,1580516567,1147681783,256983915,2052724834,2408322442,4065980270,1970539042,1701466040,724522947,118329064,1024919922,1122159321,3968896780,1330479566,2581812498,53418300,3137755361,2774710902,1126995138,754014457,137788987,2060944757,3637501362,1429927782,1547637021,3245296283,3976032459,204319601,165911910,166838360,2416182110,647081067,4025546938,1105557164,3369782496,1699215320,1305164931,569575334,2617787932,1561872118,2572768499,2665423951,35993013,2323730642,371436634,77922638,1003803030,2986550889,28584867,1589971894,4188142344,1318945768,2151455336,3433836363,65080831,3622165732,1168563704,3666137053,4245393578,4000096581,2916256526,3788750937,3575730033,3169845837,4163489431,2933182481,1540945034,151622415,3425618223,2887861487,26499049,3087163158,2825998674,2625991047,3186257437,99404514,4163278654,3966868725,908570266,2675807511,1341265893,2717177469,3103735104,255601716,2859497776,2007500875,4291917221,1379863790,1281960168,1564964942,4184717757,3025805418,1296250777,2900875978,1247428638,2950639841,3197224956,819042730,3155576286,3602208688,2453028346,721483195,2868737268,4201684211,754865529,123562143,2295208559,2814410876,2001793329,1622956916,1718070895,2239975977,1557682311,902025639,2001090091,2784558570,1932694792,333752919,3857100853,2630477997,4227049119,3935656141,1865303113,967342218,1020128489,4125554743,808633459,2581861696,2247325072,3578142979,2909917686,939498629,4222617163,1137212481,3350730519,34509333,2735631446,580234751,3730365942,209874964,111082143,4070693891,1685135269,350839718,2465260085,1446379571,757044159,1966129832,945458408,1579058065,1818218567,3918880350,207782008,949958575,58537459,3382418441,79278904,3242758893,1438592826,2920774790,478658604,4139939189,761580397,896143516,2277798444,1501506599,2418130974,1764365051,2641138023,2919201990,628776176,3423700524,2616896181,528412493,1800023998,581369815,3757624896,1572543933,2685554132,4030367163,1223760293,833726587,3840814199,499955106,1050886205,1104095665,1814768028,2940191905,2540365214,2222200160,1091539751,178929611,2641273794,1576334238,3057563601,890330282,4130693002,268775629,3329365639,3050803990,3209263396,4047103462,2168842256,1756711881,2355404100,4226042502,3082594566,3168486510,1343087442,1930856226,2814452104,3892015171,1351341047,2455779527,4159461857,3288553784,856092920,1707000006,1305037363,3194270776,3159675966,2994675972,3211308883,3524924053,887967055,1129292486,3474820831,710632536,2461374600,1413625569,2882941255,279713021,4147577648,2563920598,2549699141,4040918846,1528999552,2990776201,2522027872,1660343073,3605226578,2569149581,2951678978,428080255,213041218,4062736998,3262493747,3907047610,750517537,174440365,3556235456,4197794881,1665405576,1463621502,3837257870,570945293,2281683571,628083997,2308645589,3731749665,2724382127,463733723,1416486222,2803323146,198672463,2412076551,2590481568,2927730508,2049850467,386318470,2133264013,2205270879,940467475,103370660,2104569550,3323887176,2345174488,1357531844,3149733791,2791142655,3056717596,819710020,671201420,3026993939,1953424196,738461106,1247767586,803157135,54948478,2179680713,3541075017,3752581875,4158572571,3777676319,576147511,287615914,2574284183,972437908,3694667154,4190430593,280944183,3978755899,519085047,922445720,795789304,1750706768,2059751183,2865733872,2370797610,3179874143,1617549919,491708781,3570771205,2242056977,2127035497,2784738776,695153253,939799563,3542243550,1924239036,2436862558,1031487744,2207470666,1749663395,2657925942,403056388,857544855,2374284311,2406115638,140904248,3217185653,3879253660,1101269655,2235054522,3977940832,783915862,3177453253,4236617925,602399952,2894113622,287102766,749590397,3584123558,1984502711,3437649137,3940155557,1970926101,3340138434,1360342068,350434922,306538161,2379987236,4266811074,2428979753,763044526,1772193500,3830942570,997964965,1230869080,1239310250,2678092942,2726752737,1232665741,1864419265,3204502823,1564569273,1233841683,128000444,2266625629,1451213651,3314990365,295721363,2705521983,2058247531,134234561,2624416957,628278078,1486479966,2635458397,3652363492,2020451768,419478693,3334961251,1631330226,2465461442,1711451453,1833016875,4049910939,3200453038,3999939504,2574549652,1021078689,2079623541,3881554693,688371313,2917624119,1785200676,2484948482,2883094099,310557580,3829913205,3788539851,636028347,1611837871,2971719712,163947788,3516060436,4136483808,914529416,47973260,3019787585,1289400177,3694645491,3948395183,3783012738,3050222398,3722343690,783576998,1660953563,464418648,1382391473,124866368,2623267119,284707094,4123488858,2088132427,761640582,2902451133,572947619,3836796613,1283258867,1507062703,3969859539,3426146574,2989273071,978292932,584456939,3733307722,3575275555,3694580584,69449349,4212268261,1108932452,3470546792,3770076282,3547265409,3575185335,3406074846,2654716550,1381880061,705910764,3151558501,2458756012,2147068952,1138680616,2928995259,2936243032,3807402507,1712154616,3464965759,1001155445,402573022,679268458,745551320,2896672280,2423370082,1811322090,1846643531,2069154559,1275978574,2408178509,1624548857,1404453089,2892794732,1345231358,232690401,3331848642,43175039,4103133070,877382989,1033443551,3114806960,206536458,4200467540,1563065715,1447249812,1330254882,3035658063,3799012639,121852198,550031345,2429143798,3782577451,1057491083,1536954007,2946547789,4167209168,2686556672,2545004690,3682321817,850862254,3775586372,1155722878,2399947232,1307655768,2139859059,2768002663,1403476089,2450573412,2599975362,3263615670,3761647896,2228039858,3994827314,588686862,3472532954,751104912,690648644,478661101,3927933960,2772177474,1406375553,1475762085,1184996995,1755635983,2244012369,1585595075,2391801873,4143140935,3700689245,3218516943,1158776561,2867655796,4145899814,26810633,226627147,3755562305,355310557,1815529997,2960445215,3850445901,1001167315,1285401620,2673530407,1491650762,1036576219,336526827,2005714654,4206790665,2048732296,3350844977,1221654634,3594998409,3262189031,555265360,4267854544,2404702056,4162102717,390803033,514370106,367537785,314787817,1198730520,58091993,4087159575,2734398106,341579580,2469240319,2649745874,4187015522,2793377055,3565930359,1064119978,3105079208,886890724,1519604521,395934131,1814743167,684335648,2170040281,1846407741,1835078082,3523739827,594186155,35150919,97718471,1170486304,3890519079,2175469633,4138243364,3794431691,3339642566,2968516376,4287899350,2736366307,179060155,339994918,3014878806,604633059,2575295247,625078856,1983027033,2928464440,4014818736,525918590,2690754129,3260122223,2174048032,2214110097,1336312691,434035186,1317030423,619173653,3605530624,972541750,2711394037,3253165563,221356955,1557790499,450878196,3296841381,129531636,1289906911,1167641373,2898116561,3235997352,2111003938,1059756262,1038809775,1322221976,824542708,1018797286,14593979,1781521594,1505036994,3091917885,3449727793,2123480580,2282356539,2801901661,34826520,1283887638,1198047737,2392122244,1215320245,4202733712,2186191830,3220743035,1858464497,500793027,3202811974,1913499366,130195765,3069096891,565577594,578082877,2487857358,1704708257,1396395125,3069084334,481043684,117139989,3847635346,128702513,2944927871,1120930144,3132969590,2786489536,253935924,3746800862,2946091480,276287680,1808132490,39404327,1334378059,3576322015,2613863432,1641965881,4258276680,4124539466,1360463913,1840208920,1841415431,487616311,1423018948,419940002,3738496002,3345619581,3541144418,1173302123,2943259663,1020627727,3267114850,4236910796,882810813,2732892828,3073248632,4217041944,2378063711,2488058558,803105660,1668704654,2626784404,546404964,1225634404,1257765332,1501928690,1384931665,2923661718,820077948,2980202298,1499676787,3896092037,404166341,1078673028,2864646833,2735700178,2499803197,2220236575,3185974771,2168767745,2893982580,821497395,95358127,690825737,2545060657,4253852007,93914092,124633641,3817473107,1387719644,3555460157,2625360745,3607962073,1875221867,2962598504,3809820990,2760507411,1243012916,205323906,1144966750,1953959745,1094652199,2086064030,2876750031,142361281,2952837485,1193769298,3433424019,343886551,216393413,3836890859,788166617,4135860111,4131183556,487003685,4196897461,37662866,2651448386,2722730696,154373845,2825752129,3786227092,403960204,829191871,821964309,1266573275,3716040632,341249135,1720634946,2542823824,1184371931,2016374961,3340740310,3823182107,2584589091,1948142942,402894401,3110693309,3573414436,2249557326,4028819835,1599728462,2638764383,2396623242,482958228,2374474719,1439255989,2513121065,4223506107,829583637,591799482,3670416547,3233457351,1917576878,1202257487,2867642217,3101158932,3624331092,294460410,2554613953,1263322663,3666566538,4267547198,3250901216,3749002100,1841878082,3018442317,441536343,1791000628,2998962959,1253019176,2455308035,2980101097,2146437971,1221514274,4028660377,2786424556,19531439,4026963679,2691345090,3813317847,1314904009,700213538,104395904,2056621535,2141476083,3813774169,1201562999,2793144122,822037830,4041790430,986646206,1359443219,1841702797,32213363,3651925095,2706412790,2589642243,3262003004,275141026,4001532389,2883760415,1536539428,1782903719,954351614,323107448,221460451,1112197553,209374351,65921675,945594785,3103085096,3617212314,585270386,439444193,3853257163,943821167,4243096933,723465055,1378683540,2531828175,310586783,3762256498,552725454,2057038260,2075455779,2319338978,3692991261,4278667699,132275401,1242529099,2084737299,2815637461,3676654126,2016146308,841113347,3556824596,268860517,2508673092,1853673017,926091278,2152309259,801562729,863636143,1439833509,1218605199,1138118478,747930828,2360319432,3742267085,1954864980,1084605411,3075053626,1653776927,2585970035,343998909,1321615676,1946516960,2805698082,3637432268,4148524716,1802366448,3530572068,603539361,2750680747,2915240888,3728946196,248183498,2465871778,2127958495,3877499922,2504248034,3982449284,3081808684,3248989878,241089764,3966982693,2883966370,2301095528,1412967172,2944613906,2209740136,2290132931,4022092259,557546096,2337024686,3091390647,3306309089,2791974772,2819025701,2697432443,2817446743,3305510469,302252734,2426998852,2206726791,1192632119,2879362625,2844653438,4049705054,2707848257,1359111002,2581974653,23689200,1186253460,1535101539,3303536902,3025518705,866309736,3685495417,3727323439,1789268665,3640558639,609439488,2381294996,1939181975,1641996751,3571681377,3726463241,3292251,3580448903,445233795,2543652714,2087265584,3626897190,791427814,1877408663,90352224,1981902696,1391829617,3398828803,4235518201,3245136082,2314249739,1331224049,2950572714,1223079964,801060376,2396544861,566740608,2992979496,1667814749,3656735789,2375077428,120625950,2843784317,4243079941,4228348313,1421449669,2157777605,3048160560,2572095722,3272175034,2633500818,1210872825,821987456,570154376,2851961405,3274025309,1690470443,806586992,3647552375,583166072,3510178522,3721516220,992987587,3635927601,689413623,1374332558,2271701730,2815547145,370350556,505987526,2366939622,1037432833,3124361038,3732727634,2370662093,549044430,2237138504,43631090,2947884015,446626812,4085578708,1516909315,4262234965,3432197266,587627997,3787335098,4244167219,2098686288,3331249495,1830595235,3269848014,819864062,2031011475,3958659256,2676226858,109512978,4213882917,39539325,350870524,508550688,335315118,729918331,2956608199,1407029553,2542586938,921188044,4271461026,1147344793,1325423368,3505767055,3033375323,2339762063,3287681515,4286802079,2720980985,1648515583,2143441912,4221245269,3109378473,1255888656,1483537737,2892826664,1596823150,2816564582,885143001,4238133138,2234840682,91672524,1359907078,1514732285,4226659764,2740863457,569529449,3049450969,833529186,3085079276,3390781309,1069254162,2143672688,3917581149,2710365215,2694523701,3286128616,139523045,2134829054,2881589189,2724179980,2136263797,2670734690,1580540831,1243293607,2032905651,4171357082,110092418,74695681,86744717,2716546603,3101333648,2754777781,74106415,4124599675,3755241901,2291614002,1779705148,3847428751,1749597286,3326510148,2645057827,3748854394,4117941028,83388852,303710805,2917538882,3089862076,4222949520,2793734992,3426309484,1266017618,1065446069,3389134414,2408590910,3458640322,1830164844,1995556655,1524280137,3959274493,2048372181,3440567046,834717864,1475961483,3892529245,2848755016,587816708,3869593018,1760958294,2111990345,2207387059,85763182,900365818,2411062120,1367650500,3206285838,3643681280,3122664503,1876085673,3326744088,1222452315,501774567,111594859,131423044,3910319101,3499811992,4039543166,2467081114,1103658449,754101839,1967122624,3705499152,3651735217,4058791900,2595930723,2222274875,112912966,2977016709,1708207110,2364250433,1785874247,2218356769,4127240997,3512359822,3857277320,3536167414,2231817259,2088934199,798269706,2755892467,1471644447,51812980,1087388873,769875360,301026753,3131354073,2641400159,2176482852,485580415,1502586384,3980945211,2918198447,669330744,4254008376,3066471265,718227940,2475055632,1448249006,478283066,96451103,3401993227,1754753420,3879533332,4204314652,977446430,1659620524,2116076213,3667541791,722308002,122672518,4016022836,645044210,2926701747,3074951543,144400696,3756468312,429561728,3967667804,3344995004,2285470340,1180373052,1496786234,248004111,2854813316,881784873,4187010453,2542861639,737918859,2314086752,4140370277,229039773,4062282898,1919734398,3841323530,256712148,2390309924,1702604788,1383101106,1911935606,2617970170,682055961,2304482988,2935074028,2359804823,4124600450,4142680688,3801700946,2504520014,2622410815,861852740,2124182030,729418215,2565859273,2241513991,3673925742,242199665,3913543830,147268353,2769916141,3351689770,3723800580,3626778187,3407441946,4217724885,3667056760,2036824779,584230306,639348534,3552760847,2979949034,2598224060,4005564391,4186241457,2720440409,755073827,3154934573,925182864,4080328198,3416056196,3059413058,266483709,75455036,3242789885,3661170569,1158954787,821400635,713774319,38434836,546144805,3723169844,249670266,1017206301,3386769452,3601893772,366859986,188386863,861071935,513719165,1976498608,512507715,2289877672,3749543422,2485691461,2453146058,2815666792,4092079990,165608897,382573980,22247599,3635662305,633912500,829340963,1292996769,738597928,2441566411,3006360054,1392412969,55213187,1452557925,3973533385,2443126495,627697350,1470172099,481428063,2416584158,1286754782,3015407520,2395096220,556060098,3253863037,3265135087,173158854,651995705,375020019,2390304145,1457016316,1970739670,1107998927,1183442910,3701751272,1907225522,1089256397,1163182444,3879595374,73804247,873781158,2502315387,2914727162,911145922,2427916030,2668174764,4044513685,2525628198,1810371211,335565652,959895424,1482365760,1425266383,3148702112,1258196929,4126674109,2558809666,2105523826,2420263916,2383425021,645979184,3191067235,2683877764,1585385400,1405167027,4166552228,594796029,257368016,4026512454,1967182684,3589818940,1109839917,1674754430,48200128,1694579652,617764284,1138612230,729550462,3612717026,1639140117,1175907543,4038663541,735415427,2723492558,4051656159,1932054521,1023131364,2457921749,1242532004,1316027196,2003106720,412383185,3050007047,2447155426,163262313,744191471,1036284654,197446423,925782502,2900324561,4264355457,509057214,1410154931,2431022373,4049000031,1636776401,3131687392,364636120,3125714426,2183858225,784654148,3887743277,1062883526,550860319,2913033823,270854926,3357103678,1308184362,2768649254,3220752699,4038790256,1580587956,533661577,645986547,2439923032,1640184544,1303309974,2470888510,1659335908,2398310417,2259971553,1368073425,3999732940,2910031544,2579170254,1280795615,3168000387,1244782302,1798694526,3826782846,1864388282,1342706131,207250093,387090276,1098545971,2898858314,3764820392,2189907880,2082780515,2916142963,1534515196,3633530918,3717517009,3274783874,1250213875,801622264,1997425053,483278400,2534310874,1552347564,3997182690,189928357,2297790880,2193625392,248393218,4259971358,2914994404,1064182059,1946808272,1120157362,3080748191,2086104994,3689788777,773716580,2037971409,4161869323,4096120303,2711812144,4074752502,3075638393,2402660069,1977736042,4039462570,3098929878,2267661253,245909532,4202397973,2513375264,1620516173,1117090892,2286953474,201047030,2893992893,239559737,2195508919,3654526718,3533204794,755851014,698421065,3886203953,328132743,2966808456,1242288106,2759417576,4178312980,3932996920,4215408462,1337021944,3262506241,1751765340,900118085,271762900,2614363756,3770052672,1615370489,1728598390,219065969,2153946469,2582772628,497270841,1208061635,2330766704,2497558831,1228734705,1677481463,3939354698,2539385354,3873056312,1126486531,3054904163,2190951647,1410181487,2278446366,2799200605,1302688591,3797529331,1728120558,3957759679,2555334066,716781730,3561301958,3405272964,919240291,4043676615,2678960408,1598239882,1285038988,2656318845,2506410498,2023929437,668306137,1137600967,2506369008,2476739692,53388928,2760163108,621034414,3107127406,502594262,2439174329,613550136,3074406944,695676949,2670822062,3155973194,411888343,908516407,2651047205,2893525538,391014994,2561253912,3823601947,3542253098,1322970775,549041824,3193999823,1469734709,3309762385,2872993613,2426628339,3748748184,971344373,1104148671,1994771056,4079721472,2693919486,1582652552,3996768561,2112063720,2817873155,985217174,2113282821,457445792,313318644,3538032170,545352466,249798145,2589716740,1738005683,745412884,2985763225,3131084898,493797310,1223765712,2027976180,223473321,2156421634,7927217,2913808054,3457465911,4252678007,1945554952,3485085521,1257757222,3263161519,3362859839,1351668575,2244078109,979649224,1052208683,2636711809,748102755,850284763,3067645485,2966645812,4072979608,3536278100,3814076943,2602064862,2888718056,664310143,1107357007,3298120471,2430902736,2708882947,83136123,1390202445,2505826124,3966708606,3627565083,561294011,1121436256,2054682324,3643972991,4078867373,750158263,3553121536,2954955928,2476175664,2176049333,3496421356,2146169914,3571572637,3681762005,2259393901,2006360208,631765832,1072000245,1294007304,3241677179,4082244090,237028384,567274550,3801196067,3754836601,1046062555,2610492085,929877971,2712667506,2718987818,399673992,3080669362,3219692873,1661971156,667980299,2122981226,275953977,1492373413,3060924986,164861959,2032974619,911000740,675439937,3564842079,3003118313,124056010,2025542348,1398107834,4179462532,3396100618,3353738584,3244557827,2524279206]")}},__webpack_module_cache__={},leafPrototypes,getProto,inProgress;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}function sendExtensionMessage(e){chrome.runtime.sendMessage(e)}function getExtensionSrc(e){return __webpack_require__.p&&__webpack_require__.p.includes("://")?e:chrome.runtime.getURL(e)}__webpack_require__.m=__webpack_modules__,__webpack_require__.amdO={},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},getProto=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var n=Object.create(null);__webpack_require__.r(n);var r={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var i=2&t&&e;"object"==typeof i&&!~leafPrototypes.indexOf(i);i=getProto(i))Object.getOwnPropertyNames(i).forEach((t=>r[t]=()=>e[t]));return r.default=()=>e,__webpack_require__.d(n,r),n},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,n)=>(__webpack_require__.f[n](e,t),t)),[])),__webpack_require__.u=e=>8014===e?"8014.common.chunk.js":8082===e?"8082.common.chunk.js":1258===e?"1258.common.chunk.js":7494===e?"7494.common.chunk.js":1852===e?"1852.common.chunk.js":981===e?"981.common.chunk.js":2980===e?"2980.common.chunk.js":4909===e?"4909.common.chunk.js":6598===e?"6598.common.chunk.js":2165===e?"2165.common.chunk.js":e+".vendors.chunk.js",__webpack_require__.miniCssF=e=>{},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),inProgress={},__webpack_require__.l=(e,t,n,r)=>{if(inProgress[e])inProgress[e].push(t);else{var i,o;if(void 0!==n)for(var s=document.getElementsByTagName("script"),a=0;a<s.length;a++){var c=s[a];if(c.getAttribute("src")==e){i=c;break}}if(!i){o=!0;var l=e,u=(r=n.replace("chunk-",""),function(t){var n={type:t,target:{src:l}},r=inProgress[e];delete inProgress[e],r&&r.forEach((e=>e(n)))});return inProgress[e]=[t],import(l).then((()=>u("load"))).catch((()=>{sendExtensionMessage({type:"CODE_SPLITTING_INJECT",file:e});var t=0,n=setInterval((()=>{var e=window.webpackChunk,i=Array.isArray(e)&&e.some((e=>Array.isArray(e)&&Array.isArray(e[0])&&e[0].includes(r)));i||t>12e4?(clearInterval(n),u(i?"load":"missing")):t+=100}),100)}))}inProgress[e]=[t];var d=(t,n)=>{i.onerror=i.onload=null,clearTimeout(h);var r=inProgress[e];if(delete inProgress[e],i.parentNode&&i.parentNode.removeChild(i),r&&r.forEach((e=>e(n))),t)return t(n)},h=setTimeout(d.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=d.bind(null,i.onerror),i.onload=d.bind(null,i.onload),o&&document.head.appendChild(i)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.j=6052,__webpack_require__.p="/src/js/",__webpack_require__.p=getExtensionSrc(__webpack_require__.p),(()=>{var e={6052:0,2768:0,5984:0,7325:0};__webpack_require__.f.j=(t,n)=>{var r=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise(((n,i)=>r=e[t]=[n,i]));n.push(r[2]=i);var o=__webpack_require__.p+__webpack_require__.u(t),s=new Error;__webpack_require__.l(o,(n=>{if(__webpack_require__.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",s.name="ChunkLoadError",s.type=i,s.request=o,r[1](s)}}),"chunk-"+t,t)}};var t=(t,n)=>{var r,i,[o,s,a]=n,c=0;if(o.some((t=>0!==e[t]))){for(r in s)__webpack_require__.o(s,r)&&(__webpack_require__.m[r]=s[r]);if(a)a(__webpack_require__)}for(t&&t(n);c<o.length;c++)i=o[c],__webpack_require__.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=self.webpackChunk=self.webpackChunk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var __webpack_exports__={};(()=>{var e={};__webpack_require__.r(e),__webpack_require__.d(e,{Direction:()=>vr,MaxAgeOrigin:()=>wr,OrderBy:()=>Sr});var t={};__webpack_require__.r(t),__webpack_require__.d(t,{version:()=>Xr});var n={};__webpack_require__.r(n),__webpack_require__.d(n,{ClientMessage:()=>Zr,ClientMessageImplementations:()=>ui,Direction:()=>ti,Entry:()=>ni,MaxAgeOrigin:()=>ri,Message:()=>ii,MessageClear:()=>si,MessageEntries:()=>ci,MessageGet:()=>oi,MessageSave:()=>ai,OrderBy:()=>li,ProtocolMessage:()=>Jr,ProtocolMessageImplementations:()=>di,Root:()=>ei,ServerMessage:()=>Qr,ServerMessageImplementations:()=>hi,interpreter:()=>Yr.n});var r={};__webpack_require__.r(r),__webpack_require__.d(r,{CoreBlue1:()=>iO,CoreBlue10:()=>rO,CoreBlue20:()=>nO,CoreBlue30:()=>tO,CoreBlue40:()=>eO,CoreBlue50:()=>QT,CoreBlue60:()=>JT,CoreBlue70:()=>ZT,CoreCoral1:()=>lP,CoreCoral10:()=>cP,CoreCoral30:()=>aP,CoreCoral40:()=>sP,CoreCoral50:()=>oP,CoreCoral60:()=>iP,CoreCyan1:()=>UO,CoreCyan10:()=>NO,CoreCyan20:()=>DO,CoreCyan30:()=>RO,CoreCyan40:()=>PO,CoreCyan50:()=>OO,CoreCyan60:()=>TO,CoreGreen1:()=>YT,CoreGreen10:()=>KT,CoreGreen20:()=>XT,CoreGreen30:()=>$T,CoreGreen40:()=>WT,CoreGreen50:()=>HT,CoreGreen60:()=>qT,CoreGreen70:()=>VT,CoreIndigo1:()=>ZO,CoreIndigo10:()=>YO,CoreIndigo20:()=>KO,CoreIndigo30:()=>XO,CoreIndigo40:()=>$O,CoreIndigo50:()=>WO,CoreIndigo60:()=>HO,CoreIndigo70:()=>qO,CoreLime1:()=>wP,CoreLime10:()=>vP,CoreLime20:()=>_P,CoreLime30:()=>yP,CoreLime40:()=>bP,CoreLime50:()=>mP,CoreMagenta1:()=>rP,CoreMagenta10:()=>nP,CoreMagenta30:()=>tP,CoreMagenta40:()=>eP,CoreMagenta60:()=>QO,CoreMagenta70:()=>JO,CoreNeutral0:()=>zT,CoreNeutral1:()=>BT,CoreNeutral10:()=>GT,CoreNeutral20:()=>LT,CoreNeutral30:()=>FT,CoreNeutral40:()=>jT,CoreNeutral50:()=>MT,CoreNeutral60:()=>UT,CoreNeutral70:()=>NT,CoreNeutral80:()=>DT,CoreNeutral90:()=>RT,CorePurple1:()=>xO,CorePurple10:()=>AO,CorePurple20:()=>EO,CorePurple30:()=>CO,CorePurple40:()=>IO,CorePurple50:()=>kO,CorePurple60:()=>SO,CoreRed1:()=>hO,CoreRed10:()=>dO,CoreRed20:()=>uO,CoreRed30:()=>lO,CoreRed40:()=>cO,CoreRed50:()=>aO,CoreRed60:()=>sO,CoreRed70:()=>oO,CoreSky1:()=>VO,CoreSky10:()=>zO,CoreSky20:()=>BO,CoreSky30:()=>GO,CoreSky40:()=>LO,CoreSky50:()=>FO,CoreSky60:()=>jO,CoreSky70:()=>MO,CoreYellow1:()=>wO,CoreYellow10:()=>vO,CoreYellow20:()=>_O,CoreYellow30:()=>yO,CoreYellow40:()=>bO,CoreYellow50:()=>mO,CoreYellow60:()=>fO,CoreYellow70:()=>gO,CoreYellow80:()=>pO,CoreYellowBrand1:()=>fP,CoreYellowBrand10:()=>gP,CoreYellowBrand20:()=>pP,CoreYellowBrand30:()=>hP,CoreYellowBrand40:()=>dP,CoreYellowBrand50:()=>uP});var i={};__webpack_require__.r(i),__webpack_require__.d(i,{ActionArg:()=>g$,ActionArgDef:()=>f$,ActionArgDefRadioButtonGroup:()=>_$,ActionArgDefRadioButtonGroupHint:()=>y$,ActionArgDefString:()=>b$,ActionArgDefStringHint:()=>m$,ActionDef:()=>S$,ActionDefDisabled:()=>w$,ActionDefGeneratesTextType:()=>v$,ActionInfo:()=>k$,AvailableVoiceProfile:()=>A$,AvailableVoiceProfileSection:()=>E$,AvailableVoiceProfileSectionTag:()=>C$,AvailableVoiceProfileSectionTagState:()=>I$,AvailableVoiceProfiles:()=>x$,ClientMessage:()=>a$,ClientMessageImplementations:()=>OX,Context:()=>T$,DocumentOverview:()=>O$,Error:()=>R$,ErrorKind:()=>P$,GeneratedText:()=>D$,GenerationMode:()=>N$,Message:()=>U$,MessageAction:()=>F$,MessageChunk:()=>X$,MessageError:()=>H$,MessageGetContext:()=>M$,MessageGetHistory:()=>q$,MessageGetUserState:()=>z$,MessageInterrupt:()=>B$,MessageInvalidateContext:()=>j$,MessageResult:()=>Y$,MessageResultChangesSummary:()=>K$,MessageSearchReferences:()=>V$,MessageSearchReferencesResult:()=>$$,MessageSetContext:()=>W$,MessageSetHistory:()=>nX,MessageSetHistoryCard:()=>tX,MessageSetHistoryCardTitle:()=>J$,MessageSetHistoryCardTitleAction:()=>eX,MessageSetHistoryCardTitleUserPrompt:()=>Q$,MessageSetUserState:()=>Z$,MessageSetVoice:()=>L$,MessageSetVoiceProfile:()=>G$,Metadata:()=>rX,Notification:()=>oX,NotificationKind:()=>iX,OuterContext:()=>aX,OuterContextItem:()=>sX,PreviousText:()=>cX,PreviousTextHistory:()=>uX,PreviousTextRegular:()=>lX,PreviousTextWriterExpert:()=>dX,ProtocolMessage:()=>c$,ProtocolMessageImplementations:()=>PX,Reference:()=>hX,ReferencePrivacyLevel:()=>pX,ReferencePrivacyLevelPublic:()=>gX,ReferencePrivacyLevelRestricted:()=>fX,Root:()=>p$,ServerMessage:()=>l$,ServerMessageImplementations:()=>RX,SpecialView:()=>mX,SpecialViewAiUsageAlert:()=>bX,StartMessage:()=>u$,StartedMessage:()=>d$,Style:()=>yX,Text:()=>_X,TextLike:()=>h$,TextRange:()=>vX,Toggle:()=>wX,UrlReference:()=>SX,Usage:()=>kX,UserState:()=>CX,UserStateSettings:()=>IX,Voice:()=>EX,VoiceProfileSettings:()=>TX,VoiceProfileSettingsMyVoiceIsEnabledByDefault:()=>AX,VoiceProfileSettingsStatus:()=>xX,extend:()=>UX,interpreter:()=>NX,make:()=>DX});var o,s,a,c,l,u,d,h=__webpack_require__(78767);class p extends Error{constructor(e){super(`Assertion failed: ${e?"string"==typeof e?e:e():"(unnamed)"}`)}}function g(e,t){if(!e)throw new p(t)}function f(e,t){if(null==e)throw new p((()=>t?`Expected ${t} to be non-null`:"Expected non-null"));return e}function m(e,t){return[].concat(...e.map(t))}function b(e,t){return e.filter((e=>!!e)).join(t)}!function(e){const t={chromiumWebExtension:"chromeExt",firefoxWebExtension:"firefoxExt",safariWebExtension:"safariExt",safariIOSWebExtension:"safariIOSExt"};function n(e,n,r){return"retail"===r&&"safariIOSWebExtension"===n?"safariIOSExt-retail":"edge"===e?"chromiumEdgeExt":t[n]}e.getAppName=n,e.create=function(e,t,r,i){return{appName:f(n(e,t,r),"gnar app name"),url:`https://gnar.${i}`,ingestionUrl:`https://in.${i}/v1/events`,domain:`.${i}`,sendEmailInfoTracking:!0,sendFluidExperimentData:!1}}}(o||(o={})),function(e){const t={chromiumWebExtension:"extensionChrome",firefoxWebExtension:"extensionFirefox",safariWebExtension:"extensionSafari",safariIOSWebExtension:"extensionSafariIOS"};e.create=function(e,n,r,i){let o;return o="retail"===r&&"safariIOSWebExtension"===n?"extensionSafariIOS-retail":"edge"===e?"extensionEdge":f(t[n],"felog app name"),{appName:o,sendUsageMetrics:!0,sendPerfMetricsType:"dev"===i?"local":"off"}}}(s||(s={})),function(e){const t={chromiumWebExtension:"extension_chrome",firefoxWebExtension:"extension_firefox",safariWebExtension:"extension_safari",safariIOSWebExtension:"extension_safari_ios"},n={regular:"inline",retail:"retail_demo"};e.create=(e,r,i)=>({clientType:"edge"===e?"extension_chromium_edge":f(t[r],"capi client type"),clientSubType:f(n[i],"capi client subType")})}(a||(a={})),function(e){e.create=function(e){return{urls:{getInAppMessages:`${e}/api/inApp/getMessages`,track:`${e}/api/events/track`,trackInAppOpen:`${e}/api/events/trackInAppOpen`,trackInAppClose:`${e}/api/events/trackInAppClose`,trackInAppConsume:`${e}/api/events/inAppConsume`,trackInAppClick:`${e}/api/events/trackInAppClick`,userUpdate:`${e}/api/users/update`}}}}(c||(c={})),function(e){const t={chromiumWebExtension:"chromeExt",firefoxWebExtension:"firefoxExt",safariWebExtension:"safariWebExt",safariIOSWebExtension:"safariIOSExt"};e.create=function(e,n){return{xClientType:"edge"===e?"chromiumEdgeExt":t[n]}}}(l||(l={})),function(e){let t;var n;n=t=e.GrStaticUrl||(e.GrStaticUrl={}),n.toGrStaticUrl=e=>"https://assets.extension.grammarly.com/"+e}(u||(u={})),function(e){e.create=function(t,n,r,i,o){const s="safari"===t?"disableAppsPromotion=true":"";function a(e){const t=`https://${e}.${n}`;return(e="",n="")=>{const r=b([s,n],"&");return b([t+e,r],"?")}}const c=a("www"),l=a("app"),u=a("account"),d=a("redirect"),h=e.GrStaticUrl.toGrStaticUrl,p=`https://data.${n}`,g=`https://auth.${n}/v3`,f=`https://auth.${n}/v4`,m=`https://auth.${n}/v5`,y=`https://capi.${n}/api/configuration/cheetah/v1/settings`,_=`https://gateway.${n}/skills`,v=`https://capi.${n}`,w=`https://coda.${n}`,S=`wss://capi.${n}/freews`,k={production:/^(\w+\.)*superhuman\.com$/,qa:/^(\w+\.)*(pp-sh\.io|staging-superhuman\.com)$/};return{accountSubscription:u("/subscription"),accountSubscriptionAddBillingInfo:u("/admin/subscription","popup=add_billing_info"),adminAccountSubscription:u("/admin/subscription"),accountAdminSubscriptionAddBillingInfoToUngatedTrial:u("/admin/subscription","popup=ungated_trial"),app:l(),appPersonalDictionary:u("/customize"),homepage:c(),featuresSettings:u("/customize/features"),capi:S,capiStatic:S,capiGDocs:`wss://capi.${n}/gdocs`,dapi:p,cheetahSettings:y,skills:_,editorDictionary:l("/profile/dictionary"),desktop:c("/desktop"),dictionary:`https://capi.${n}/api/defs`,docs:l("/docs"),docsApi:`https://dox.${n}/documents`,newDoc:l("/docs/new"),tokens:`${f}/api`,auth:g,userOrAnonymous:`${g}/user/oranonymous`,userOrAnonymousV4:`${f}/api/userinfo`,userOrAnonymousV5:`${m}/api/userinfo`,authorize:`${f}/api/oauth2/authorize`,signin:c("/signin"),signup:c("/signup"),signupSuccess:c("/extension/signup/success"),dialect:`${v}/api/configuration/language/v1/settings`,passport:`https://gateway.${n}/passport/api/v1/passport`,fbSignin:c("/signin","fromExtensionFb=true"),fbSignup:c("/signup","fromExtensionFb=true"),googleSignin:c("/signin","fromExtensionGoogle=true"),googleSignup:c("/signup","fromExtensionGoogle=true"),resetPassword:c("/resetpassword"),newFelog:r,vmetrics:i,welcomeC:c("/extension-success"),afterInstall:c("/after_install_page/"),planComparison:c("/plans"),businessHomepage:c("/business"),businessPricing:c("/business/pricing"),businessStyleGuide:c("/business/styleguide"),businessBrandTones:c("/business/brand-tones"),uninstall:c("/extension-uninstall"),terms:c("/terms"),policy:c("/privacy-policy"),californiaPolicy:c("/privacy-policy#sectionSingleColumn_47y4NWiOf89wt12wcc6a74"),extensionSuccess:c("/extension-success"),firefoxPrivatePolicy:"https://addons.mozilla.org/en-US/firefox/addon/grammarly-1/privacy/",dynamicConfigUrl:"https://config.extension.grammarly.com/dynamicConfig.json",pageConfigUrl:"https://config.extension.grammarly.com/browserplugin/config.json",grammarlyDomain:n,grammarlyProtocol:"https:",redirect:d("/redirect"),snippetsApi:`https://gateway.${n}/snippets/v1/snippets`,snippetsNew:u("/admin/snippets","action=create"),snippetsAdmin:u("/admin/snippets"),snippetsSettings:u("/customize/snippets"),knowledgeHubApi:`https://gateway.${n}/knowledge-hub/v1/institution`,settingsRegistryApi:`https://gateway.${n}/settings-registry/v1`,institutionAdminApi:`https://gateway.${n}/institution/api/institution/admin`,subscriptionApi:`https://subscription.${n}/api/v1`,suggestionsSettings:u("/customize/suggestions"),allSettings:u(),styleGuideSettings:u("/admin/style-guide"),writingStyleSettings:u("/admin/style-guide-writing-style"),brandTones:u("/admin/brand-tones"),grammarlyIdeasSelf:l("/ideas/grow/self"),grammarlyIdeasPeer:l("/ideas/grow/peer"),grammarlyIdeasSales:l("/ideas/sales"),iOSApp:"grammarly://home",iOSUpgrade:"grammarly://premium-instructions?deepLinkSource=safari",standWithUkraine:c("/stand-with-ukraine"),standWithUkraineBlockedUserPing:"https://rwsgfy.grammarly.com/stand-with-ukraine",tourGdocs:c("/tour-gdocs"),dataSharing:`https://gateway.${n}/privacy/v1/api/data-sharing`,specialOffer:`https://gateway.${n}/vito`,uphookHub:`https://gateway.${n}/uhub`,mise:`https://gateway.${n}/mise/api/v1`,codaAgentDirectory:{apiUrl:o,webBaseUrl:w},assets:{assistantOnboardingTourGif:h("assets/assistant/assistant-onboarding-tour"),ownerActivationIPMHeader:h("assets/ipm/owner-activation-ipm-header"),graduationIpmSvg:h("assets/ipm/graduation-campaign-ipm"),writingProgressIpmGif:h("assets/ipm/writing-progress-ipm-header"),onboardingTour:{inlineSuggestionsPreviewImage:h("assets/onboarding/inline-suggestions-preview-image-v2.jpg"),inlineSuggestionsAnimation:h("assets/onboarding/inline-suggestions-v2.mp4"),clickToAcceptAnimation:h("assets/onboarding/click-to-accept-v2.mp4"),happyWritingAnimation:h("assets/onboarding/happy-writing-v2.mp4")},knowledgeShareOnboardingTour:{step1:h("assets/knowledgeShareOnboarding/ks-onboarding-step1.mp4"),step2:h("assets/knowledgeShareOnboarding/ks-onboarding-step2.mp4"),step3:h("assets/knowledgeShareOnboarding/ks-onboarding-step3.mp4")},touchTypist:{readyToApplySuggestionsAudio:h("assets/touchTypist/tt-ready-to-apply-suggestions-v1.mp3"),suggestionsAppliedAudio:h("assets/touchTypist/tt-suggestions-applied-v1.mp3")}},support:`https://support.${n}/hc/en-us/requests/new#/`,grammarlyEmployeesBugReportsUrl:"https://in-product.report.grammarly.io/v1/report",inviteMembers:u("/admin/members"),superhumanGoWelcome:{production:"https://superhuman.com/superhuman-go-intro",qa:"https://superhuman.com/superhuman-go-intro?genesisLaunch=true"},superhumanDomains:k,isSuperhumanDomain:e=>k.production.test(e)||k.qa.test(e),socialAuth:{google:"https://accounts.google.com",facebook:"https://www.facebook.com/login",apple:"https://appleid.apple.com/auth"}}}}(u||(u={})),function(e){const t="grammarly.com",n="qagr.io",r="ppgr.io";e.create=function(e,i,d,p){const g=(e,t,n,r,i)=>"prod"===p?e:"qa"===p?t:"dev-qa"===p?n:"dev-preprod"===p?r:"dev"===p?i:void(0,h.vE)(p),f="https://127.0.0.1:8000",m=g("https://f-log-extension.grammarly.io",f,f,f,f),b=g("https://extension.femetrics.grammarly.io/batch/import","https://femetrics.qagr.io/batch/import","https://femetrics.qagr.io/batch/import","https://femetrics.ppgr.io/batch/import","https://femetrics.qagr.io/batch/import"),y=g("https://coda.io","https://head.coda.io","https://head.coda.io","https://staging.coda.io","https://coda.io"),_=g(t,n,n,r,n),v=g(t,n,n,r,t);return{url:u.create(e,v,m,b,y),gnar:o.create(e,i,d,_),felog:s.create(e,i,d,p),capi:a.create(e,i,d),iterable:c.create("https://api.iterable.com"),auth:l.create(e,i),extensionId:"87677a2c52b84ad3a151a4a72f5bd3c4"}}}(d||(d={}));const y=(0,h.DV)((()=>browser),(()=>self.browser)),_=(0,h.DV)((()=>browser),(()=>self.browser));self.chrome=self.chrome;var v,w,S,k,I,C,E,A,x,T,O,P;!function(e){e.CHROME_PROD="kbfnbcaeplbcioakkpcpgfkobkghlhen",e.CHROME_DEV="hnjmaaohmpmdoanfjacbknnehbdpjpmm",e.CHROME_QA="kioapjjehinomebhipemibkoghnfihaj",e.CHROME_NIGHTLY="aojbbefmgiilpnbipikljicoojkjbfle",e.CHROME_SHGO_NIGHTLY="cnkljppodomflaoljemgokomblgbgenf",e.CHROME_EARTH="nlpbgkedmfjdliflklegppnapkojinhi",e.CHROME_MARS="ofklbkglijgokkagmgomakbafehgeacg",e.CHROME_VENUS="opbgoiocaoaggaladhoaldigpglopmej",e.FIREFOX="87677a2c52b84ad3a151a4a72f5bd3c4@jetpack"}(v||(v={})),function(e){e.create=function(e,t,n,r,i,o,s,a,c){const l=void 0!==o&&void 0!==s?o:"UNVERSIONED",u=`${e}.${t}.${n}`;return{version:u,fullVersion:`${u}-${[r,["prod"!==i?i:null,l!==r?l:null].filter((e=>!!e)).join(".")].filter((e=>""!==e)).join("/")}`,commitHash:s,gitBranch:o,manifestVersion:a,extensionId:c}},e.getManifestVersion=function(e,t){switch(e){case"chromiumWebExtension":return t.chrome.runtime.getManifest().version;case"firefoxWebExtension":return y.runtime.getManifest().version;case"safariWebExtension":case"safariIOSWebExtension":return _.runtime.getManifest().version;default:return(0,h.vE)(e)}},e.getExtensionId=function(e,t){try{switch(e){case"chromiumWebExtension":return t.chrome.runtime.id;case"firefoxWebExtension":return y.runtime.id;case"safariWebExtension":case"safariIOSWebExtension":return _.runtime.id;default:return v.CHROME_PROD}}catch(e){return v.CHROME_PROD}}}(w||(w={})),function(e){e.create=function(e){return(0,h.cq)(["chrome","safari","firefox","edge"],e)},e.isValidTargetBrowser=function(e){return["chrome","safari","firefox","edge"].includes(e)}}(S||(S={})),function(e){e.create=function(e){return(0,h.cq)(["dev","prod","qa","dev-qa","dev-preprod"],e)}}(k||(k={})),function(e){e.create=function(e){return(0,h.cq)(["regular","retail"],e)}}(I||(I={})),function(e){e.create=function(e){return(0,h.cq)(["chromiumWebExtension","firefoxWebExtension","safariWebExtension","safariIOSWebExtension"],e)}}(C||(C={})),function(e){e.create=function(e,t,n,r,i){return{browser:e,extensionType:t,deploymentType:n,env:r,context:i}}}(E||(E={})),function(e){e.create=function(e){return{name:e.browserName||"other",version:e.browserVersion,userAgent:e.userAgent||""}}}(A||(A={})),function(e){e.create=function(e){const{osName:t,osVersion:n,userAgent:r=self.navigator.userAgent}=e;return{name:t,version:n,isWindows:-1!==(t||r).indexOf("Win"),isMac:-1!==(t||r).indexOf("Mac"),isChromeOS:t?"Chromium OS"===t:-1!==r.indexOf("CrOS")}}}(x||(x={})),function(e){e.create=function(e){return{browser:A.create(e),os:x.create(e)}}}(T||(T={})),function(e){function t(e,t,n,r,i,o,s){return{env:e,major_number:t,build_number:n,release_number:r,git_branch:i,git_commit:o,manifest_version:s}}e.create=t,e.fromBrowserify=function(){return t("prod","14","1264","0","UNVERSIONED","UNVERSIONED","3")}}(O||(O={})),function(e){e.getTargetEnv=function(e){if(!e.env)throw new Error("processEnv.env is null or undefined");const t=k.create(e.env);if(!t)throw new Error(`Invalid processEnv.env: ${e.env}`);return t},e.create=function(e,t,n,r,i,o,s){const a=[i.major_number,i.build_number,i.release_number].map(h.wU);let c;if(3===a.length&&a.every((e=>void 0!==e)))c=a;else{let e;try{e=w.getManifestVersion(t,self)}catch(e){}const n=(e||"").split(".").map(h.wU);c=3===n.length&&n.every((e=>void 0!==e))?n:[0,0,0]}const[l,u,p]=c;return{buildInfo:w.create(l,u,p,e,o,i.git_branch,i.git_commit,i.manifest_version,w.getExtensionId(t,self)),bundleInfo:E.create(e,t,n,o,r),appConfig:d.create(e,t,n,o),systemInfo:T.create(s)}}}(P||(P={}));const R=new h.xB((()=>{throw new Error("Global config not initialized")}));let D=()=>R.get();function N(){return D()}var U=__webpack_require__(13391);class M{constructor(e){if(this._capacity=e,this._start=0,this._end=0,this._isFull=!1,e<0)throw new Error(`Invalid capacity ${e}`);this._buffer=new Array(e),0===e&&(this._isFull=!0)}get size(){return this._isFull?this._buffer.length:(this._end-this._start+this._buffer.length)%this._buffer.length}get capacity(){return this._capacity}get isEmpty(){return 0===this.size}get isFull(){return this._isFull}get head(){return this.isEmpty?null:this._buffer[this._start]}get tail(){return this.isEmpty?null:this._buffer[0===this._end?this.capacity-1:this._end-1]}enqueue(e){if(0===this.capacity)return null;let t=null;return this.isFull&&(t=this._buffer[this._start],this._startInc()),this._buffer[this._end]=e,this._endInc(),this._start===this._end&&(this._isFull=!0),t}dequeue(){if(this.isEmpty)return null;const e=this._buffer[this._start];return this._buffer[this._start]=null,this._startInc(),this._isFull=!1,e}delete(e){const t=this._buffer.indexOf(e);if(t>=0){if(t<this._end){for(let e=t;e<this._end-1;e++)this._buffer[e]=this._buffer[e+1];this._buffer[--this._end]=null}else{for(let e=this._start;e<t;e++)this._buffer[e+1]=this._buffer[e];this._buffer[this._start]=null,this._startInc()}return this._isFull=!1,!0}return!1}_startInc(){this._start++,this._start===this.capacity&&(this._start=0)}_endInc(){this._end++,this._end===this.capacity&&(this._end=0)}clear(){this._buffer=new Array(this.capacity),this._start=this._end=0,this.capacity>0&&(this._isFull=!1)}toArray(){let e;return e=this.isEmpty?[]:this._start<this._end?this._buffer.slice(this._start,this._end):this._buffer.slice(this._start,this.capacity).concat(this._buffer.slice(0,this._end)),e}resize(e){if(e===this.capacity)return;if(e<0)throw new Error(`Invalid newCapacity ${e}`);let t=this.toArray();e>=this.size?(t.length=e,this._end=this.size,this._isFull=!1):(t=e?t.slice(-e):[],this._end=e,this._isFull=!0),this._buffer=t,this._start=0,this._capacity=e}}const j=void 0!==self.requestIdleCallback?self.requestIdleCallback:function(e){const t=Date.now();return setTimeout((()=>{e({didTimeout:!1,timeRemaining:()=>Math.max(0,50-Date.now()+t)})}),1)};var F;!function(e){e.TRACE="TRACE",e.DEBUG="DEBUG",e.INFO="INFO",e.WARN="WARN",e.ERROR="ERROR",e.FATAL="FATAL"}(F||(F={}));const L={[F.TRACE]:1,[F.DEBUG]:2,[F.INFO]:3,[F.WARN]:4,[F.ERROR]:5,[F.FATAL]:6};function G(e){return L[e]||0}const B=Object.freeze({"gdocs.injected":{limit:30},"gdocs.textMap.error":{limit:20}});class z{constructor(e){this.name=e,this._isError=e=>{const t=e;return t&&(void 0!==t.message&&void 0!==t.name||void 0!==t.stack)}}trace(e,t,n){this._logMessage(F.TRACE,e,t,n)}debug(e,t,n){this._logMessage(F.DEBUG,e,t,n)}info(e,t,n){this._logMessage(F.INFO,e,t,n)}warn(e,t,n){this._logMessage(F.WARN,e,t,n)}error(e,t,n){this._logMessage(F.ERROR,e,t,n)}fatal(e,t,n){this._logMessage(F.FATAL,e,t,n)}_logMessage(e,t,n,r){const i={level:e,loggerName:this.name,message:t,timestamp:Date.now()};n&&(this._isError(n)?i.exception=n:i.data=n),i.data=i.data||r,this.handleEvent(i)}}class V{constructor(e,t){this.name=e,this._createLogger=t}trace(e,t,n){void 0===this._logger&&(this._logger=this._createLogger(this.name)),this._logger.trace(e,t,n)}debug(e,t,n){void 0===this._logger&&(this._logger=this._createLogger(this.name)),this._logger.debug(e,t,n)}info(e,t,n){void 0===this._logger&&(this._logger=this._createLogger(this.name)),this._logger.info(e,t,n)}warn(e,t,n){void 0===this._logger&&(this._logger=this._createLogger(this.name)),this._logger.warn(e,t,n)}error(e,t,n){void 0===this._logger&&(this._logger=this._createLogger(this.name)),this._logger.error(e,t,n)}fatal(e,t,n){void 0===this._logger&&(this._logger=this._createLogger(this.name)),this._logger.fatal(e,t,n)}}var q;function H(e,t){const n={};return Object.keys(t).forEach((r=>n[r]=e(r,t[r]))),n}function W(e,t){const n={};return Object.keys(t).forEach((r=>{e(r,t[r])&&(n[r]=t[r])})),n}function $(e){const t={};for(const[n,r]of e)t[n]=r;return t}!function(e){e.create=function(e,t){return new V(e,(()=>de().logger.create(e,t)))}}(q||(q={}));const X=e=>e===Object(e)&&!Array.isArray(e);function K(e,...t){if(!t.length||!X(e))return e;const n=e,r=t.length;for(let i=0;i<r;i+=1){const r=t[i];if(X(r))for(const t in r)if(r.hasOwnProperty(t)){const i=r[t],o=e[t];X(i)?(o&&X(o)||(n[t]={}),K(n[t],i)):Array.isArray(o)&&Array.isArray(i)?n[t]=Array.from(new Set(o.concat(i))):n[t]=Array.isArray(i)?Array.from(i):i}}return e}function Y(e,t){if(e===t)return!0;if(Z(e)||Z(t))return e===t;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e){if(!(n in t))return!1;if(!Y(e[n],t[n]))return!1}return!0}function Z(e){return e!==Object(e)}function J(e){return Number.isFinite(e)||e===Number.NEGATIVE_INFINITY||e===Number.POSITIVE_INFINITY}function Q(e){return"string"==typeof e}var ee;!function(e){function t(e){return{message:e.message,stack:e.stack}}e.normalizeException=t,e.isCircularObject=function(e){try{return!Q(JSON.stringify(e))}catch(e){return e.message.includes("Converting circular structure to JSON")}},e.normalizeData=function e(n,r=new WeakSet){try{return self.HTMLElement&&n instanceof self.HTMLElement?{type:(i=n).nodeName,html:i.outerHTML,attributes:Array.from(i.attributes).reduce(((e,t)=>({...e,[t.nodeName]:t.nodeValue})),{})}:n instanceof Error?t(n):Array.isArray(n)?n.map((t=>e(t,r))):"function"==typeof n?`${n.name}()`:X(n)?r.has(n)?"circular data!":(r.add(n),Object.keys(n).reduce(((t,i)=>({...t,[i]:e(n[i],r)})),{})):n}catch(e){return q.create("HistoryLogNormalizer").error("cannot normalize data",e,n),t(new Error("Data normalization fail!"))}var i}}(ee||(ee={}));const te=["CRITICAL","HIGH","MEDIUM","LOW"],ne={[F.FATAL]:"CRITICAL",[F.ERROR]:"CRITICAL",[F.WARN]:"HIGH",[F.INFO]:"MEDIUM",[F.DEBUG]:"LOW",[F.TRACE]:"LOW"},re={CRITICAL:{limit:100,advancedLoggingLimit:500},HIGH:{limit:100,advancedLoggingLimit:500},MEDIUM:{limit:200,advancedLoggingLimit:1e3},LOW:{limit:0,advancedLoggingLimit:1e3}};class ie{constructor(e){var t;this.historyArgs=e,this.customBuffers={},this.defaultBuffers=Object.fromEntries(te.map((e=>[e,new M(re[e].limit)]))),null===(t=e.enableAdvancedInProd)||void 0===t||t.subscribe((()=>{this.resizeDefaultBuffers()})),e.isBG&&this.restoreDefaultBufferLogsFromStorage(),this.initializeDebugCommands()}isHistoryEnabled(){var e;return!!(null===(e=this.historyArgs.enableInProd)||void 0===e?void 0:e.get())}isAdvancedHistoryEnabled(){var e,t;return!!(null===(e=this.historyArgs.enableInProd)||void 0===e?void 0:e.get())&&!!(null===(t=this.historyArgs.enableAdvancedInProd)||void 0===t?void 0:t.get())}getBufferCapacity(e){var t;return this.isAdvancedHistoryEnabled()&&null!==(t=e.advancedLoggingLimit)&&void 0!==t?t:e.limit}getDefaultBuffer(e){return this.defaultBuffers[ne[e]]}getCustomBuffer(e){return this.customBuffers[e]||(this.customBuffers[e]=new M(this.getBufferCapacity(B[e]))),this.customBuffers[e]}resizeDefaultBuffers(){for(const[e,t]of Object.entries(this.defaultBuffers)){const n=this.getBufferCapacity(re[e]);t.resize(n)}}backupDefaultBufferLogsToStorage(){var e;null===(e=this.historyArgs.backupStorage)||void 0===e||e.set((e=>{let t=0;const n=[];for(const r of te){const i=this.defaultBuffers[r];if(n.push(i.toArray()),t+=i.size,t>=e)break}return n.reverse().flat()}))}async restoreDefaultBufferLogsFromStorage(){var e;const t=await(null===(e=this.historyArgs.backupStorage)||void 0===e?void 0:e.get());if(!t)return;const n=Object.fromEntries(Object.entries(this.defaultBuffers).map((([e,t])=>[e,t.toArray()])));for(const e of Object.values(this.defaultBuffers))e.clear();for(const e of t)this.getDefaultBuffer(e.level).enqueue(e);for(const[e,t]of Object.entries(n)){const n=this.defaultBuffers[e];for(const e of t)n.enqueue(e)}this.backupDefaultBufferLogsToStorage()}pushLog(e,t){if(!this.isHistoryEnabled())return Promise.resolve();const n=t?this.getCustomBuffer(t):this.getDefaultBuffer(e.level);return r=()=>{n.enqueue(oe(e,t)),!t&&this.isAdvancedHistoryEnabled()&&this.backupDefaultBufferLogsToStorage()},new Promise(((e,t)=>{j((()=>{try{r(),e()}catch(e){t(e)}}))}));var r}getLogs(){const e=Object.values(this.defaultBuffers).map((e=>e.toArray())),t=Object.entries(this.customBuffers).map((([e,t])=>t.toArray()));return e.concat(t).flat()}initializeDebugCommands(){}}const oe=(e,t)=>({...e,data:ee.normalizeData(e.data),loggerName:t?e.loggerName:`common.${e.loggerName}`,exception:e.exception&&ee.normalizeException(e.exception)});class se extends z{constructor(e,t,n,r){super(e),this._config=t,this._historyLogsService=n,this._loggerSettings=r}handleEvent(e){var t,n,r;this._config.filterFn(e)&&!(null===(t=this._loggerSettings)||void 0===t?void 0:t.skipWriteToConsole)&&this._config.writer.write(e),(null===(n=this._loggerSettings)||void 0===n?void 0:n.skipPushToHistory)||this._historyLogsService.pushLog(e,null===(r=this._loggerSettings)||void 0===r?void 0:r.customLogBufferKey)}}function ae(e){return new Proxy({},{get(t,n){const r=e[n];return r&&"function"==typeof r?r.bind(e):void 0}})}var ce;!function(e){e.LEVEL={[F.TRACE]:"color: white; background: orange;",[F.DEBUG]:"color: black; background: #ffdc00;",[F.INFO]:"color: black; background: #abdcfb",[F.WARN]:"color: white; background: darkorange;",[F.ERROR]:"color: white; background: red;",[F.FATAL]:"color: white; background: darkred;"},e.GRAMMARLY="color: black; background: #bada55;";const t=new Map;function n(e,t){return e+Math.floor(Math.random()*(t-e+1))}function r(e){return`color: ${e.isDark?"white":"black"}; background: rgb(${e.red}, ${e.green}, ${e.blue})`}e.getLoggerName=function(e){const i=t.get(e);if(i)return r(i);const o=n(0,255),s=n(0,255),a=n(0,255),c={red:o,green:s,blue:a,isDark:Math.sqrt(o*o*.299+s*s*.587+a*a*.114)<127.5};return t.set(e,c),r(c)},e.RESET_DEFAULT="color: reset;",e.RESET_DEBUG=`color: ${self.matchMedia&&self.matchMedia("(prefers-color-scheme: dark)").matches?"white":"black"};`,e.getReset=function(t){return t!==F.TRACE&&t!==F.DEBUG?e.RESET_DEFAULT:t===F.TRACE||t===F.DEBUG?e.RESET_DEBUG:e.RESET_DEFAULT},e.outputLog=function(e){return[`grm ${e.level} [${e.loggerName}]  ${e.message}`]}}(ce||(ce={}));class le{constructor(){this._writeFunc=le._commonWriteFunc}shouldWriteLog(e){const t=G(e);return!!(t&&1<=t)}write(e){try{const t=ce.outputLog(e);e.data&&t.push(e.data),e.exception&&t.push(e.exception),this.shouldWriteLog(e.level)&&this._writeFunc[e.level].apply(null,t)}catch(e){}}}le._commonWriteFunc=function(){const{debug:e,info:t,warn:n,error:r}=ae(console);return{[F.TRACE]:e,[F.DEBUG]:e,[F.INFO]:t,[F.WARN]:n,[F.ERROR]:r,[F.FATAL]:r}}();class ue{static getInstance(){if(void 0===this._instanceShared)throw new Error("shared Env not inited yet");return this._instanceShared}static initShared(e){if(void 0!==this._instanceShared)throw new Error("shared Env already inited");this._instanceShared=e}constructor(e,t=U.h.create(!1),n=U.h.create(!1)){this._enableHistoryLoggerInProd=t,this._enableAdvancedHistoryLoggerInProd=n,this.enableHistoryLoggerInProd=(e,t)=>{e&&!this._enableHistoryLoggerInProd.get()?(console.debug("Debug reports have been enabled",t),this._enableHistoryLoggerInProd.set(!0)):!e&&this._enableHistoryLoggerInProd.get()&&(console.debug("Debug reports have been disabled",t),this._enableHistoryLoggerInProd.set(!1))},this.enableAdvancedHistoryLoggerInProd=(e,t)=>{e&&!this._enableAdvancedHistoryLoggerInProd.get()?(console.debug("Advanced logging has been enabled",t),this._enableAdvancedHistoryLoggerInProd.set(!0)):!e&&this._enableAdvancedHistoryLoggerInProd.get()&&(console.debug("Advanced logging has been disabled",t),this._enableAdvancedHistoryLoggerInProd.set(!1))};const r=e.testArgs,i=r&&r.processEnv?r.processEnv:O.fromBrowserify(),o=P.getTargetEnv(i);this._initLogger(e,o);const s=function(e,t,n,r,i,o,s){const a=P.create(e,t,n,r,i,o,s);return R.init(a),a}(e.browser,e.extensionType,e.deploymentType,e.context,i,o,e.browserInfo);this.context=e.context,this.config=s}_initLogger(e,t){const n={...e.historyLoggerExtraArgs,enableInProd:this._enableHistoryLoggerInProd.view(),enableAdvancedInProd:this._enableAdvancedHistoryLoggerInProd.view()};this.historyLogsService=new ie(n);const r="prod"!==t||"cs"!==e.context,i={create:(e,t)=>{return new se(e,{writer:new le,filterFn:r?e=>!0:(n=F.ERROR,e=>G(e.level)>=G(n))},this.historyLogsService,t);var n}};this.logger=i}}function de(){return ue.getInstance()}class he extends ue{}var pe=__webpack_require__(96442),ge=__webpack_require__(80891);const fe={CheetahFetchSkills:new ge.Cc("cheetah_fetch_skills"),PlagiarismAiDetector:new ge.Cc("plagiarism_ai_detector_cheetah_web"),AiStudioInlineWritingGuidelines:new ge.Cc("wricomp_inline_writing_guidelines","enabled"),AiStudioEssayRubric:new ge.Cc("wricomp_essay_rubric","enabled"),CheetahFeatureFlagShowPeerFeedbackAction:new ge.Cc("wricomp_show_peer_feedback_action","enabled"),AiStudioPlaybooksRead:new ge.Cc("ai_studio_playbooks_read","enabled")},me={ImprovedPlagiarismAiUphook:new ge.KS("improved_plagiarism_ai_uphook"),CheetahUphookHub:new ge.KS("cheetah_uphook_hub"),CheetahUphookHubWin:new ge.KS("cheetah_uphook_hub_win"),InProductDiscount:new ge.KS("in_product_discount",["control","enabled"])};var be=__webpack_require__(6183),ye=__webpack_require__(93390);const _e={AIEditorAgentParaphraserInternal:be.b4,AIEditorAgentParaphraserExternal:be.dG,AIEditorParaphraserAllUnderlines:be.RK,AIEditorParaphraserMyVoice:be.zg,AIEditorParaphraserFocusCard:be.Wd,AIEditorReaderReactionsRebase:be.l0,AIEditorReaderReactionsCustomAudience:be.bI,ExpertReviewAutoScrollToFirstVBar:be.aR,ExpertReviewFollowUpActions:be.ob,ExpertReviewFollowUpActionsFreeform:be.sq,ExpertReviewRebase:be.yK,AgentsFeatureInExtension:new ye.Gate("agents_feature_in_extension"),AgentsCAPIFiltering:new ye.Gate("extension_agents_capi_filtering"),AgentParaphraserInExtension:new ye.Gate("extension_paraphraser"),AgentHumanizerInExtension:new ye.Gate("extension_humanizer"),AgentReaderReactionsInExtension:new ye.Gate("extension_reader_reactions"),AgentExpertPanelInExtension:new ye.Gate("extension_expert_review"),AgentAiDetectorInExtension:new ye.Gate("extension_ai_detector"),AgentPlagiarismCheckerInExtension:new ye.Gate("extension_plagiarism_checker"),AgentsAutofocusToFirstVBar:new ye.Gate("extension_agents_autofocus_vbars"),AgentsUphookHubClientDependency:new ye.Gate("extension_agents_uphook_hub_client"),AgentsMessageBusDetailedTelemetry:new ye.Gate("extension_agents_message_bus_detailed_telemetry"),AgentsInfoTelemetry:new ye.Gate("extension_agents_info_telemetry"),ParaphraserAgentAIChat:new ye.Gate("paraphraser_agent_ai_chat","enabled"),HumanizerAgentAIChat:new ye.Gate("humanizer_agent_ai_chat","enabled")};function ve(e){return e.isGateEnabled(_e.AgentsFeatureInExtension)}function we(e){return ve(e)&&e.isGateEnabled(_e.AgentPlagiarismCheckerInExtension)}function Se(e){return ve(e)&&e.isGateEnabled(_e.AgentAiDetectorInExtension)}function ke(e){return ve(e)&&e.isGateEnabled(_e.AgentParaphraserInExtension)}function Ie(e){return ve(e)&&e.isGateEnabled(_e.AgentHumanizerInExtension)}function Ce(e){return ve(e)&&e.isGateEnabled(_e.AgentReaderReactionsInExtension)}function Ee(e){return ve(e)&&e.isGateEnabled(_e.AgentExpertPanelInExtension)}const Ae={AssistantInSidePanel:new ye.Gate("extension_enable_side_panel_assistant"),AbilityToAddAgents:new ye.Gate("extension_enable_ability_to_add_agents"),WatchForAgentSetup:new ye.Gate("extension_watch_for_agent_setup"),SuperhumanGoBranding:new ye.Gate("extension_go_branding"),SupportAAAInIframeHost:new ye.Gate("extension_aaa_support_iframe_host"),InsertPlainTextOnlyForSlack:new ye.Gate("extension_aaa_insert_plain_text_only_for_slack"),ReinitializeAssistantOnExtensionUpdate:new ye.Gate("extension_reinitialize_assistant_on_extension_update"),BrowserSidePanelEnablement:new ye.Gate("extension_browser_side_panel_enablement")},xe={KeyboardShortcutOnboardingBanner:new ye.Gate("extension_shgo_onboarding_keyboard_shortcut_banner"),ProPreviewOnboardingBanner:new ye.Gate("extension_shgo_onboarding_pro_preview_banner"),AddDataSourceTooltip:new ye.Gate("extension_shgo_onboarding_add_data_source_tooltip"),FindMoreAgentsTooltip:new ye.Gate("extension_shgo_onboarding_find_more_agents_tooltip"),SuperhumanGoDomTriggers:new ye.Gate("extension_shgo_onboarding_dom_triggers"),HeroWaveAnimation:new ye.Gate("extension_shgo_onboarding_hero_wave_animation"),ChatAgentOnboardingHeader:new ye.Gate("extension_shgo_chat_agent_onboarding_header"),SuperhumanWelcomePageOnOptIn:new ye.Gate("extension_shgo_welcome_page_on_opt_in"),SuperhumanWelcomePageUseQaUrl:new ye.Gate("extension_shgo_welcome_use_qa_url")},Te={...Ae,...xe,LogAssistantNotchStatus:new ye.Gate("extension_log_aaa_notch_status"),AssistantLifecycleEvents:new ye.Gate("extension_assistant_lifecycle_events"),AlwaysOnAssistantInsertButton:new ye.Gate("extension_always_on_assistant_insert_button"),Add1PasswordBypass:new ye.Gate("extension_add_1password_bypass"),IncludeTextContentsInTextActions:new ye.Gate("extension_include_text_contents_in_text_actions"),NativeInstallFlowForAgents:new ye.Gate("extension_agent_install_flow"),EnableAssistantForGoUsers:new ye.Gate("extension_enable_assistant_for_go_users"),FirstPartyPackAgents:new ye.Gate("extension_first_party_pack_agents"),AssistantDebugMode:new ye.Gate("assistant_debug_mode"),PushedContentAutoFocus:new ye.Gate("extension_pushed_content_autofocus"),CheckTextWhenTurnOnAAA:new ye.Gate("extension_enable_extension_when_turn_on_aaa"),TranslateAgentInternal:new ye.Gate("extension_translate_agent_internal"),ListenToSidePanelClose:new ye.Gate("extension_listen_to_side_panel_close"),ContextSelectorRedesign:new ye.Gate("extension_context_selector_redesign"),ExplainerAgentInternal:new ye.Gate("extension_explainer_agent_internal")},Oe={VBarsKillSwitch:new ge.Cc("vbars_extension_kill_switch"),VBarsInternal:new ge.Cc("extension_g2_vbars_internal","enabled"),VBarsInternalIgnoreAllowList:new ge.Cc("extension_g2_vbars_internal_ignore_allow_list","enabled"),VBarsSelectionPreload:new ge.Cc("vbars_selection_preload_extension","enabled"),VBarsClickAwayFixes:new ge.Cc("vbars_clickaway_listener","enabled"),VBarsSelectionEnterprise:new ge.Cc("vbars_selection_enterprise","enabled"),VBarsPushedContent:new ge.Cc("pushed_content_extension","enabled"),VBarsIdleEnterprise:new ge.Cc("vbars_idle_enterprise","enabled"),VBarsRedesign:new ge.Cc("extension_vbars_redesign","enabled"),VBarsInjectionContainerDisplayContents:new ge.Cc("vbars_injection_container_display_contents"),VBarsToggleFromSettingsRegistry:new ge.Cc("meg_vbars_toggle","enabled"),VBarsDarkMode:new ge.Cc("extension_vbars_dark_mode","enabled"),VBarsPushedContentComments:new ge.Cc("extension_vbars_pushed_content_comments","enabled")},Pe={HumanWritingReportRolloutTestOff:new ge.Cc("extension hwr rollout test off on")},Re={HWRSourceTrackingEverywhere:new ge.Cc("extension_hwr_clipboard_everywhere"),HWRDisable:new ge.Cc("extension_hwr_disable"),HWRInternal:new ge.Cc("extension_human_writing_report_internal"),HWRMigrateStorage:new ge.Cc("extension_authorship_migrate_storage")},De={...fe,...{...Pe,...Ae,HideGButtonWhenNotchOn:new ye.Gate("extension_hide_gbutton_when_chat_launcher_on"),FetchExperimentAfterUserChange:new ye.Gate("fetch_experiment_after_user_change"),DispatchFocusEventIfDocNotFocused:new ye.Gate("extension_dispatch_focus_event_if_doc_not_focused"),PromptEnhancementInternalGate:new ye.Gate("prompt_enhancement_internal_gate"),HideGButtonWhenSuperhumanGoIsOpen:new ye.Gate("extension_hide_gbutton_when_superhuman_go_is_open")},...Re,...Te,..._e,...Oe,StandWithUkraineGrammarlySuspended:new ge.Cc("standWithUkraineExtensionSuspended","enabled"),StandWithUkraineTheme:new ge.Cc("standWithUkraineExtensionTheme","enabled"),StudentsOFEGdocs:new ge.Cc("citations_rollout_gdocs","enabled"),StudentsOFEInternal:new ge.Cc("citations_rollout_internal","enabled"),CitationBuilder:new ge.Cc("citation_builder","enabled"),CitationBuilderEditing:new ge.Cc("citation_builder_editing","enabled"),CitationBuilderManualInvocation:new ge.Cc("citation_builder_manual_invocation","enabled"),ShowPerformanceCard:new ge.Cc("extension_show_performance_card","enabled"),ExtensionDebugReport:new ge.Cc("extension_debug_report","enabled"),SduiBulkDismiss:new ge.Cc("sdui_bulk_dismiss","enabled"),TrackSiblingDataForGMail:new ge.Cc("extension_track_sibling_data_for_gmail","enabled"),FixGmailHouseCat:new ge.Cc("gmail_housecat_memory_leak_fix","enabled"),KnowledgeHubGdocs:new ge.Cc("knowledge_hub_gdocs","enabled"),KnowledgeHubGmail:new ge.Cc("knowledge_hub_gmail","enabled"),KnowledgeHubSlack:new ge.Cc("knowledge_hub_slack","enabled"),KnowledgeHubWord:new ge.Cc("windowsextension_knowledge_hub_word","enabled"),SlackUseInsertHTML:new ge.Cc("extension_slack_use_insert_html"),KeyboardShortcut:new ge.Cc("extension_keyboard_shortcut","enabled"),EnableFirstVisibleHighlightTracking:new ge.Cc("extension_track_first_visible_highlight","enabled"),KnowledgeHubCheetahIntegration:new ge.Cc("gbgo_knowledge_share_web","enabled"),GdocsMultiColumnAllCombinations:new ge.Cc("gdocs_canvas_multicolumn_compare_all_combination","enabled"),GdocsRefactorDomQuery:new ge.Cc("gdocs_refactor_dom_query","enabled"),GDocsUseStackToStoreParentClip:new ge.Cc("gdocs_use_stack_to_store_parent_clip","enabled"),GdocsReturnAllRects:new ge.Cc("gdocs_return_all_rects","enabled"),SuggestionDeliveryAutoApply:new ge.Cc("suggestion_delivery_autoapply_extension_gate_23q3","enabled"),IndianEnglishDialect:new ge.Cc("indian_english_dialect","enabled"),IndianEnglishDialectInternal:new ge.Cc("indian_english_dialect_internal","enabled"),CheetahFeatureFlagCompose:new ge.Cc("cheetah_extension_feature_flag_compose","enabled"),CheetahFeatureFlagRewrite:new ge.Cc("cheetah_extension_feature_flag_rewrite","enabled"),CheetahFeatureFlagInlineRewrite:new ge.Cc("cheetah_extension_feature_flag_inline_rewrite","enabled"),CheetahFeatureFlagMagicRewrite:new ge.Cc("cheetah_extension_feature_flag_magic_rewrite","enabled"),CheetahFeatureFlagQuickReply:new ge.Cc("cheetah_extension_feature_flag_quick_reply","enabled"),CheetahFeatureFlagInlineQuickReply:new ge.Cc("cheetah_extension_feature_flag_inline_quick_reply","enabled"),CheetahFeatureFlagGDocsInlineRewrites:new ge.Cc("cheetah_extension_feature_flag_gdocs_inline_rewrites","enabled"),CheetahFeatureFlagOnboarding:new ge.Cc("cheetah_extension_feature_flag_onboarding","enabled"),CheetahStudentsOnboarding:new ge.Cc("ggo_students_onboarding","enabled"),CheetahStudentBTS:new ge.Cc("ggo_student_bts","enabled"),CheetahStudentPromptsInternal:new ge.Cc("ggo_student_prompts_internal","enabled"),GDocsTextCorruptionValidateTextBeforeAlertApply:new ge.Cc("gDocs_tc_validate_text_before_alert_apply","enabled"),GDocsGetFormatMap:new ge.Cc("gdocs_get_format_map","enabled"),NonGDocsGetFormatMap:new ge.Cc("extension_get_format_map","enabled"),SupportMoreStyle:new ge.Cc("extension_support_more_style","enabled"),GDocsUseVisibleLayoutRoot:new ge.Cc("gdocs_use_visible_layout_root"),GDocsUnloadIfInitArgsChanged:new ge.Cc("gdocs_unload_when_init_args_changed"),GDocsDetectDocModeChangeByLayoutRootListener:new ge.Cc("gdocs_detect_dom_mode_change_by_layout_root"),Iterable:new ge.Cc("iterable_gate_ext","enabled"),IterableGDocsSidebarInitializedTrigger:new ge.Cc("iterable_gate_gdoc_sidebar_initialized_ext","enabled"),IterableUserSessionInitializedTrigger:new ge.Cc("iterable_gate_user_session_initialized_ext","enabled"),NonGDocsFirstAlertLookedAtTrigger:new ge.Cc("iterable_gate_non_gdocs_first_alert_looked_at_ext","enabled"),InkwellSubscribeToSecureKeyRequests:new ge.Cc("extension_inkwell_communication","enabled"),SalesforceCK4RichTextFix:new ge.Cc("salesforce_ck4_richtext_fix","enabled"),IterablePauseInTypingTrigger:new ge.Cc("iterable_gate_pause_in_typing_ext","enabled"),IterableEngagedByAlertsAcceptedTrigger:new ge.Cc("iterable_gate_alerts_accepted_ext","enabled"),IterableTriggerFromCustomPayload:new ge.Cc("iterable_trigger_from_custom_payload_ext","enabled"),IterableTargetDomain:new ge.Cc("iterable_target_domain_ext","enabled"),IterableMetrics:new ge.Cc("iterable_metrics_ext","enabled"),IterableTriggerMetrics:new ge.Cc("iterable_trigger_metrics_ext","enabled"),IterableLogs:new ge.Cc("iterable_logs_ext","enabled"),IterableCooldownAndImpressions:new ge.Cc("iterable_cooldown_and_retry_ext","enabled"),IterableGlobalCooldown:new ge.Cc("iterable_global_cooldown_ext","enabled"),IterableHideIPMOnPopupStateChange:new ge.Cc("iterable_hide_ipm_on_popup_state_change_ext","enabled"),SessionStorageLogsBackup:new ge.Cc("session_storage_logs_backup","enabled"),SduiPopoverNotifications:new ge.Cc("sdui_popover_manager_ext","enabled"),TextChangeBufferUseLegacy:new ge.Cc("text_change_buffer_use_legacy_3","enabled"),TextChangeBufferDontFlushOnApply:new ge.Cc("text_change_buffer_dont_flush_on_apply_1","enabled"),DontSyncAlertApplicationsWithInlineMode:new ge.Cc("dont_sync_alert_applications_with_inline_mode","enabled"),KnowledgeEngineSearchV2Alpha:new ge.Cc("knowledge_engine_search_v2alpha","enabled"),HideReportBugByGrammarlyEmployeeFeature:new ge.Cc("hide_report_bug_by_grammarly_employee_feature","enabled"),ExtensionFeatureFlagCAPIClientStorage:new ge.Cc("extension_feature_flag_capi_client_storage","enabled"),ExtensionFeatureFlagCAPIClientStorageCleanup:new ge.Cc("extension_feature_flag_capi_client_storage_cleanup","enabled"),ExtensionFeatureFlagCAPIClientStorageLogWarnings:new ge.Cc("extension_capi_client_storage_log_warnings","enabled"),ExtensionFeatureFlagCAPIClientStorageRunCleanupRequests:new ge.Cc("extension_capi_client_storage_run_cleanup_requests","enabled"),CAPIDistinctConnectionStatus:new ge.Cc("extension_capi_distinct_connection_status","enabled"),ZendeskTransformReplacementOnlyForString:new ge.Cc("extension_zendesk_transform_replacement_only_for_string","enabled"),GDocsInitGbuttonInsideCommentsField:new ge.Cc("gdocs_init_gbutton_inside_comments_field","enabled"),GDocsCreateRichText:new ge.Cc("gdocs_create_rich_text","enabled"),GDocsFormatGetFontFamily:new ge.Cc("gdocs_format_get_font_family","enabled"),GDocsFormatGetColor:new ge.Cc("gdocs_format_get_color","enabled"),GDocsAlignBasicStyleForTextDiff:new ge.Cc("gdocs_align_basic_style_for_text_diff","enabled"),GDocsReturnAppliedForNonSuccess:new ge.Cc("gdocs_return_applied_for_non_success","enabled"),GDocsReturnAppliedForAll:new ge.Cc("gdocs_return_applied_for_all","enabled"),GDocsCheckTextForSuggestionMode:new ge.Cc("gdocs_check_text_for_suggestion_mode","enabled"),GDocsNoDeleteEventForSuggestionMode:new ge.Cc("gdocs_no_delete_event_for_suggestion_mode","enabled"),GDocsUseSelectionServiceForSuggestionMode:new ge.Cc("gdocs_use_selection_service_suggestion_mode","enabled"),ExtensionA11yUIFixes:new ge.Cc("extension_a11y_ui_fixes","enabled"),AutocorrectKeydownCaptureUserInput:new ge.Cc("extension_autocorrect_keydown_capture_user_input","enabled"),AutocorrectAllowCaptureNonTrustedUserEvents:new ge.Cc("extension_autocorrect_allow_capture_not_trusted_user_events","enabled"),DispatchDeltaDeleteEvent:new ge.Cc("extension_dispatch_deleta_delete_event","enabled"),DiscordTransformInsertToReplace:new ge.Cc("extension_discord_transform_insert_to_replace","enabled"),DiscordExecComandReplacementService:new ge.Cc("extension_discord_exec_comand_replacement","enabled"),DiscordDelayAfterReplacementInBatch:new ge.Cc("extension_discord_delay_after_replacement_in_batch","enabled"),ReplacementExecutionTimeoutValidation:new ge.Cc("extension_replacement_execution_timeout_validation","enabled"),ValidateTextInsertionAtCursor:new ge.Cc("extension_validate_text_insertion_at_cursor","enabled"),CheetahSelectionContextUpdates:new ge.Cc("cheetah_selection_context_updates","enabled"),CheetahSelectionContextUpdatesServer:new ge.Cc("cheetah_selection_context_updates_server","enabled"),UseBodyToGetViewportDimentions:new ge.Cc("extension_use_body_to_get_viewport_dimentions","enabled"),CLEditorIntegration:new ge.Cc("extension_cleditor_integration","enabled"),GOSRollout:new ge.Cc("extension_gos_rollout","enabled"),GOSTelemetry:new ge.Cc("extension_gos_telemetry","enabled"),CentralizeStopEventPropagation:new ge.Cc("extension_centralize_stop_event_propagation","enabled"),CollectDataForPreserveFormatting:new ge.Cc("extension_collect_data_for_preserve_formatting","enabled"),FormattingUseBatchWhenHaveListItems:new ge.Cc("extension_preserve_formatting_skip_list_items","enabled"),FormattingReplaceEmptyStringToNonBreakingSpaceEntity:new ge.Cc("extension_formatting_support_continuous_white_spaces","enabled"),GDocsCollectLayoutRenderingStats:new ge.Cc("gdocs_collect_layout_rendering_stats","enabled"),GDocsInternalsFilterStrikethrough:new ge.Cc("gdocs_internals_filter_strikethrough","enabled"),GDocsTrackUnderline:new ge.Cc("gdocs_track_underline","enabled"),GDocsTrackStrikeThrough:new ge.Cc("gdocs_track_strikethrough","enabled"),GDocsInternalsFilterCodeBlocks:new ge.Cc("gdocs_internals_filter_code_blocks","enabled"),GDocsDebounceDataRendering:new ge.Cc("gdocs_debouncing_data_rendering","enabled"),GDocsExtractLinkFromGoogleInternals:new ge.Cc("gdocs_extract_link_from_internals","enabled"),GDocsExtractDocumentInternals:new ge.Cc("gdocs_extract_document_internals","enabled"),GDocsExtractSuggestionObjectsWithPath:new ge.Cc("gdocs_extract_suggestion_objects_with_path"),GDocsretryExtractAnnotationAfterOneSecond:new ge.Cc("gdocs_retry_extract_annotation_after_one_second"),GDocsRetryExtractAnnotation100Times:new ge.Cc("gdocs_retry_extract_annotation_100_times"),GDocsExtractLinkInternalsByPath:new ge.Cc("gdocs_extract_link_internals_by_path"),TrackInstitutionIdToGnar:new ge.Cc("extension_track_institution_id_to_gnar","enabled"),GdocsTrackFatalPopup:new ge.Cc("extension_gdocs_track_fatal_popup","enabled"),VbarsGlobal:new ge.Cc("vbars_global","enabled"),CheetahOnboardingContextProviderFix:new ge.Cc("cheetah_extension_external_onboarding_context_provider_fix","enabled"),CheetahClearSDUIBufferOnReconnect:new ge.Cc("cheetah_extension_clear_sdui_buffer_on_reconnect","enabled"),InactiveIntegration:new ge.Cc("extension_inactive_integration","enabled"),UseApproximateTCValidation:new ge.Cc("use_approximate_tc_validation","enabled"),GDocsCanUseTransformBeforeValidate:new ge.Cc("gdocs_can_use_trasfrom_before_validate","enabled"),GDocsSendValidationInfoForBatchReplacement:new ge.Cc("gdocs_send_validation_info_for_batch_replacement","enabled"),CanIgnoreNonWidthCharsForTCValidation:new ge.Cc("extension_ignore_non_width_chars_for_tc_validaition","enabled"),GDocsCanIgnoreEndNewLine:new ge.Cc("gdocs_ignore_end_new_line_for_tc_validaition","enabled"),GDocsWhitespaceSelectionRetry:new ge.Cc("gdocs_whitespace_selection_retry","enabled"),OAuth2SelectiveLogout:new ge.Cc("extension_oauth2_selective_logout","enabled"),OAuth2LastAuthnEventLogout:new ge.Cc("extension_oauth2_last_authn_event_logout","enabled"),LockedUIRollout:new ge.Cc("locked_ui_rollout","unlimited_pool"),DebouncedInlineCardUpdate:new ge.Cc("extension_debounced_inline_card_update"),GDocsShouldCheckIfMappedSomething:new ge.Cc("gdocs_map_result_must_mapped_some_text"),GDocsCheckIndexBoundaryWhenTranslateIndex:new ge.Cc("gdocs_check_index_boundary_when_translate_index"),GDocsOnlyAddIncompleteResult:new ge.Cc("gdocs_only_add_incomplete_result"),GDocsPageInputValidationForParser:new ge.Cc("gdocs_page_input_validation_for_parser"),CheetahProfuseEventsTracking:new ge.Cc("cheetah_profuse_events_tracking"),RedditReplacementDuplicationFix:new ge.Cc("reddit_replacement_duplication_fix"),RedditNewUseOverlayLayout:new ge.Cc("reddit_new_use_overlay_layout"),RedditUseClipboardForCreatePost:new ge.Cc("extension_reddit_use_clipboard_for_create_post"),InstagramUseDispatchEventReplacementService:new ge.Cc("instagram_use_dispatch_event_replacement_service"),FacebookUseDispatchEventReplacementService:new ge.Cc("facebook_use_dispatch_event_replacement_service"),FacebookChatNoDelayBeforeSelection:new ge.Cc("facebook_chat_no_delay_before_selection"),PrioritizeLeftNodeAsEndNode:new ge.Cc("extension_prioritize_left_node_as_end_node"),SalesforceServiceConsoleReplacementFix:new ge.Cc("salesforce_service_console_replacement_fix"),SalesforceFilterEmailThread:new ge.Cc("salesforce_filter_email_thread"),SalesforceDetailsTextareaRichReplacementServiceDelay:new ge.Cc("salesforce_details_textarea_replacement_service_delay"),StravaReplacementSelectionDelay:new ge.Cc("extension_strave_replacement_selection_delay"),SkipParallelAutoFixReplacement:new ge.Cc("skip_parallel_autofix_replacement"),AvoidExtraIntegrationControllerInitialization:new ge.Cc("extension_avoid_extra_integration_controller_initialization"),OggyOnGOS:new ge.Cc("extension_oggy_on_gos","enabled"),UnfixFast570:new ge.Cc("extension_unfix_fast_570"),LatticeReplacementDuplicationFix:new ge.Cc("lattice_replacement_duplication_fix"),NewSessionEndWithConnectionStats:new ge.Cc("new_session_end_with_connection_stats"),GDocsReplacementValidateOnlyFullTextBeforeReplacement:new ge.Cc("gdocs_replacement_only_validate_full_text_before_replacement"),GDocsReplacementValidateOnlyFragmentText:new ge.Cc("gdocs_replacement_only_validate_fragment_text"),GDocsCachingParserMiddleware:new ge.Cc("gdocs_caching_parser_middleware"),OggyIframeWrappers:new ge.Cc("extension_oggy_use_iframe_wrappers"),LoadAppActionsFromAppletCdn:new ge.Cc("app_actions_applet_cdn_extension"),PerformanceScoreOggy:new ge.Cc("performance_score_oggy"),SessionTimeout:new ge.Cc("extension_session_timeout"),ConnectorGdocs:new ge.Cc("extension_connector_gdocs"),ConnectorNonGdocs:new ge.Cc("extension_connector_non_gdocs"),ServiceAvailabilityViewMetrics:new ge.Cc("extension_service_availability_view_metrics"),ServiceAvailabilityTypingMetrics:new ge.Cc("extension_service_availability_typing_metrics"),GDocsUseCanvasFocusedRule:new ge.Cc("extension_gdocs_use_canvas_focused_rule"),GDocsExpireCommentIntegrationByChildCount:new ge.Cc("extension_gdocs_expire_by_child_count"),FieldIntegrationManager:new ge.Cc("extension_field_integration_manager"),CheetahExecReplacementOnlyWhenItsExists:new ge.Cc("extension_cheetah_exec_replacement_only_when_its_exists"),SendChangesToCAPIAfterSequentialApply:new ge.Cc("extension_send_changes_to_capi_after_sequential_apply"),GDocsTabSwitchFrequencyTracking:new ge.Cc("gdocs_tab_switch_frequency_tracking"),DatabricksPerformanceMetrics:new ge.Cc("extension_databricks_performance_metrics"),PersonalizedInsightsConsentPopup:new ge.Cc("extension_personalized_insights_consent_onboarding"),PersonalizedInsightsEmailDomainAndSignature:new ge.Cc("extension_personalized_insights_email_domain_and_signature"),DataSharing:new ge.Cc("data_sharing_optin"),TrackLevenshteinDistanceForTextCorruption:new ge.Cc("extension_track_levenshtein_distance_for_text_corruption"),TrackTextCorruptionDebugProductMetric:new ge.Cc("extension_track_text_corruption_debug_product_metric"),TouchTypistInternal:new ge.Cc("extension_touch_typist_internal"),TouchTypistRelease:new ge.Cc("extension_touchtypist_release"),TouchTypistPartialTrigger:new ge.Cc("extension_touchtypist_partial_trigger","enabled"),TouchTypistForcedBufferFlush:new ge.Cc("extension_touchtypist_internal_dlp_bypass","enabled"),TSMintSdkRollout:new ge.Cc("extension-ts-mint-sdk-rollout"),EnableDoubleWriteToMint:new ge.Cc("extensions-enable-double-write-to-mint"),TSMintDeprecateGnar:new ge.Cc("extension_deprecate_gnar"),FetchSkills:new ge.Cc("extension_fetch_skills"),GDocsParseSmartChipFragments:new ge.Cc("gdocs_parse_smart_chip_fragments"),NewsNowSingleInstantiation:new ge.Cc("newsnow_disable_multiple"),CanContainsPrivateFieldsInDocInfo:new ge.Cc("extension_can_contains_private_fields_in_doc_info"),CleanupPageMapCanvas2dContext:new ge.Cc("cleanup_page_map_canvas_2d"),InProductDiscountSpecialOffer:new ge.Cc("extension_in_product_discount_m2_special_offer"),MapImageNodeForRichText:new ge.Cc("map_image_node_for_rich_text"),PreventEmptySetContext:new ge.Cc("extension_prevent_empty_set_context"),GDocsSendComments:new ge.Cc("gdocs_send_comments"),TrackAlertProcessingPerformance:new ge.Cc("extension_track_alert_processing_performance"),AlertProcessingOptimization:new ge.Cc("extension_alert_processing_optimization"),CodaUseCSSTransformTranslateForUnderlinePosition:new ge.Cc("coda_use_css_transform_translate_for_underline_position"),CodaHideUnderlineWhenAnimated:new ge.Cc("coda_hide_underline_when_animated"),CodaIntegrateOuterElementsCloser:new ge.Cc("coda_integrate_outer_elements_closer"),CodaHideGbuttonForDocumentTitle:new ge.Cc("coda_hide_gbutton_for_document_title"),CodaPositionGbuttonIntoFixedContainer:new ge.Cc("coda_position_gbutton_into_fixed_container"),GDocsSignUpPopupReactToUserState:new ge.Cc("extension_gdocs_signup_popup_react_to_user_state"),FullySignedInExperienceInGDocsFeature:new ge.Cc("fully_signedin_gdocs_feature"),FullySignedInExperienceViaTone:new ge.Cc("fully_signedin_block_inline_cards_via_tone"),GDocsAllowToDetectAssistantInjectionMode:new ge.Cc("extension_gdocs_allow_to_detect_assistant_injection_mode"),GDocsDetectSidebarTypeDynamically:new ge.Cc("extension_gdocs_detect_sidebar_type_dynamically"),GDocsInviteNudge:new ge.Cc("extension_gdocs_invite_nudge"),GDocsShareModalTracking:new ge.Cc("extension_gdocs_share_modal_tracking"),AttributesTriggerFieldIntegration:new ge.Cc("extension_integration_target_attributes"),OAuthCheckTokenServiceState:new ge.Cc("extension_check_oauth_token_service_state"),OAuthTokenServiceStateFallback:new ge.Cc("extension_oauth_token_service_state_fallback"),SnippetsTemplateVariables:new ge.Cc("meg_snippets_dynamic_fields"),DomainClaimedUserCopyWithInstitutionDetails:new ge.Cc("meg_domain_claimed_user_copy_with_institution_details"),TrackContainerIdFailures:new ge.Cc("extension_track_container_id_failures"),AuthenticationOptionsApi:new ge.Cc("authentication_options_api"),UseBlockListToConfigureFieldMinSizeForDefaultIntegrations:new ge.Cc("extension_use_block_list_to_configure_field_min_size_for_default_integrations"),EnablePathTrackingForSessionEnd:new ge.Cc("extension_enable_path_tracking_for_session_end"),LazyLoadSnippetsSearchTrees:new ge.Cc("extensions_lazy_load_snippets","enabled"),ShowLegacyPlagiarismInSidePanel:new ge.Cc("always_available_assistant_legacy_plagiarism"),GDocsVersionHistorySidebarSelector:new ge.Cc("extension_gdocs_version_history_selector"),GoogleGroupsIntegration:new ge.Cc("extension_google_groups_integration","enabled"),DisableGoogleFeedbackFormIntegration:new ge.Cc("extension_disable_google_feedback_form_integration","enabled"),EnableIframesByDefault:new ge.Cc("extension_iframe_default_enable","enabled"),UphookGnarEvents:new ge.Cc("uphook-gnar-events","enabled"),DisableKixApp:new ge.Cc("extension_disable_kix_app","enabled"),AgentRuntimeInternalDebug:new ge.Cc("agent_runtime_internal_debug"),ExistingSelectionOptimization:new ge.Cc("existing_selection_optimization","enabled"),IntegrationResultTracking:new ge.Cc("extension_integration_result_tracking","enabled"),GDocsGeminiPreviewRendering:new ge.Cc("extension_gdocs_gemini_preview_rendering"),CleanUxUiInternal:new ge.Cc("clean_ux_ui_internal"),ExtensionGoOnboarding:new ge.Cc("extension_go_onboarding","enabled"),ExtensionBugSubmissionForm:new ge.Cc("extension_bug_submission_form","enabled"),EnableSuperhumanIntegration:new ge.Cc("extension_enable_superhuman_integration"),CodaTransformDeleteReplacement:new ge.Cc("extension_coda_transform_delete_replacement"),GDocsCanvasPrototypePatching:new ge.Cc("extension_gdocs_late_canvas_patching"),CKEditor5UseBeforeInputForDeletion:new ge.Cc("extension_ckeditor5_use_beforeinput_for_deletion"),ExtensionMSTeamsAsyncReplaceDelay:new ge.Cc("extension_msteams_async_replace_delay"),ExtensionZendeskAsyncReplaceDelay:new ge.Cc("extension_zendesk_async_replace_delay"),GDocsCanvasExclusiveSelectionEnd:new ge.Cc("extension_gdocs_exclusive_selection_end"),ToolbarIconTheme:new ge.Cc("extension_toolbar_icon_theme","enabled"),SuperUnderlinesKillSwitch:new ge.Cc("extension_super_underlines_kill_switch"),OutreachCustomSlateEditor:new ge.Cc("outreach_custom_slate_editor","enabled"),AiChatIntercept:new ge.Cc("extension_ai_chat_intercept")};function Ne(){return"firefox"===N().bundleInfo.browser}function Ue(){return"chrome"===N().bundleInfo.browser}function Me(){return"safari"===N().bundleInfo.browser}function je(){return"firefoxWebExtension"===N().bundleInfo.extensionType}function Fe(){return"edge"===N().bundleInfo.browser}function Le(){return Ue()||Fe()}function Ge(){return"bg"===N().bundleInfo.context}function Be(){return N().bundleInfo.browser}function ze(){return N().buildInfo.version}function Ve(){return N().bundleInfo.env}function qe(){return N().appConfig.url}function He(){return N().appConfig.felog.appName}function We(){return N().appConfig.gnar.appName}function $e(){return N().appConfig.url.grammarlyDomain}function Xe(e="/"){return`https://${$e()}${e}`}var Ke=__webpack_require__(44675);function Ye(e){return"object"==typeof e&&null!==e&&"message"in e&&"string"==typeof e.message}function Ze(e){return e instanceof Error?function(e){if(e instanceof Error){const{name:t,message:n,stack:r,errors:i,suppressed:o,cause:s,...a}=e;return{...a,name:t,message:n,stack:r,errors:i,suppressed:o,cause:s}}return e}(e):e instanceof ErrorEvent?function(e){if(e instanceof ErrorEvent){const{message:t,type:n,lineno:r,colno:i,filename:o,error:s,...a}=e;return{...a,message:t,type:n,lineno:r,colno:i,filename:o,error:s}}return e}(e):e instanceof PromiseRejectionEvent?function(e){if(e instanceof PromiseRejectionEvent){const{type:t,reason:n,...r}=e;return{...r,type:t,reason:n}}return e}(e):e}function Je(e){try{return JSON.stringify(e,((e,t)=>Ze(t)))}catch(e){return JSON.stringify({json_error:"Cannot json stringify"})}}function Qe(e,t){return{json:Je(e),exception:t?{name:t.name,message:t.message,stack:t.stack?nt(t.stack):void 0,...X(t.extra)?t.extra:{}}:void 0}}function et(){return de().browserApi.baseUri}const tt={chromium:["<anonymous>","native","unknown location"],firefox:[],safari:["[native code]"]};function nt(e,{browser:t=de().config.bundleInfo.browser,extensionBaseUri:n=et()}={}){if(!e)return e;const r=tt["chrome"===t||"edge"===t?"chromium":t],i=e=>r.some((t=>e.startsWith(t)))||n&&e.startsWith(n),o=e.split("\n");if("chrome"===t||"edge"===t){const e=[];let t=0;for(;t<o.length&&!o[t].startsWith("    at ");)e.push(o[t]),t++;for(;t<o.length;){const n=st(o[t]);n?i(n)?e.push(o[t]):e.push("    at <hidden>"):e.push("    <unparsed>"),t++}return e.join("\n")}if("firefox"===t||"safari"===t)return o.map((e=>[e,"firefox"===t?at(e):ct(e)])).map((([e,t])=>void 0===t?"<unparsed>":i(t)?e:"<hidden>")).join("\n");(0,h.vE)(t)}const rt=/^ {4}at ([^(]*)$/,it=/^ {4}at [^(]* \(([^()]*)\)$/,ot=/^ {4}at eval \([^(]* \(([^()]*)\)\)$/;function st(e){var t,n,r;return null===(r=null!==(n=null!==(t=rt.exec(e))&&void 0!==t?t:it.exec(e))&&void 0!==n?n:ot.exec(e))||void 0===r?void 0:r[1]}function at(e){return e.split("@",2)[1]}function ct(e){var t;return null!==(t=e.split("@",2)[1])&&void 0!==t?t:e}function lt(e,t,n="unknown"){for(const[n,r,i]of e)if(t>=n&&t<r)return i;return n}const ut=function(e,t){if(0===e.length)return[[-1/0,1/0,""]];const n=e=>void 0===t?e.toString():e.toExponential(t),r=new Array(e.length+1);let i=-1/0,o=e[0];r[0]=[i,o,`<${n(o)}`];for(let t=1;t<e.length;t++)i=o,o=e[t],r[t]=[i,o,`>=${n(i)}, <${n(o)}`];return r[e.length]=[o,1/0,`>=${n(o)}`],r}([0,5,10,15,20,25,50,75,100,200,250,500,750,1e3,1250,1500,2e3]),dt=new Set(["primaryLanguage","integrationName","fieldType"]);var ht;!function(e){e.lessThan1Week="lessThan1Week",e.weekTo4Weeks="weekTo4Weeks",e.moreThan4weeks="moreThan4weeks",e.moreThan3Months="moreThan3Months"}(ht||(ht={}));const pt={stats:"ex_perfstats",csInit:"ex_csInitPerf",viewInjection:"viewInjectionPerf"};function gt(e){const{_tag:t,...n}=e;return{[pt[e._tag]]:n}}var ft;function mt(e,t){return{...e,application:t.application,version:t.version,env:t.env,sessionId:t.context&&t.sessionId,userId:t.context&&t.context.userId,containerId:t.context&&t.context.containerId,...t.browserInfo}}!function(e){e.INFO="INFO",e.WARN="WARN",e.ERROR="ERROR"}(ft||(ft={}));const bt=e=>e.reduce(((e,t,n)=>e+(t-e)/(n+1)),0),yt=(e,t)=>{const n=void 0===t?bt(e):t;return e.length>1?Math.sqrt(e.reduce(((e,t)=>e+(t-n)**2),0)/(e.length-1)):0};var _t,vt,wt;!function(e){function t(){return{dummy:!0,startMeasure:()=>({endMeasure:()=>{},cancelMeasure:h.EI}),measure:e=>e(),measureAsync:e=>e(),custom:h.EI}}e.dummy=t,e.dummyFactoryInitialization=()=>()=>t()}(_t||(_t={})),function(e){e.dummy={flushMeasures:e=>[],measure:(e,t)=>t(),startMeasure:e=>({endMeasure(){},cancelMeasure(){}})}}(vt||(vt={})),function(e){let t;!function(e){let t;!function(e){let t;!function(e){e.stats="stats",e.csInit="csInit",e.viewInjection="viewInjection"}(t=e.Types||(e.Types={}))}(t=e.Tagged||(e.Tagged={}))}(t=e.Data||(e.Data={})),e.getStats=function(e){if(0===e.length)return{ct:0};{const t=e.reduce(((e,t)=>Math.min(e,t)),Number.MAX_VALUE),n=e.reduce(((e,t)=>Math.max(e,t)),Number.MIN_VALUE),r=e.length>=6?bt(e):void 0;return{ct:e.length,min:t,max:n,range:n-t,avg:r,stddev:void 0!==r&&e.length>1?yt(e,r):void 0}}}}(wt||(wt={}));const St=["facebook.com","messenger.com","work.fb.com","business.facebook.com"],kt=e=>e.replace(/^www\./,"");function It(e){const t=e&&e.ownerDocument||document,n=t.location||t.defaultView.location;return n?kt(n.hostname):""}function Ct(e){return Ne()&&/^about:/.test(e)?e:""===e?"":kt(new URL(e).hostname)}function Et(e){const t=e&&e.ownerDocument||document,n=t.location||t.defaultView.location;return n?n.pathname+n.search:""}function At(e){return Ot.includes(e)}function xt(e=It(),t="other"){var n;return Ne()?"null":At(e)?null!==(n=function(e){var t,n;return null!==(n=null===(t=Ot.getTopSiteId(e))||void 0===t?void 0:t.match)&&void 0!==n?n:null}(e))&&void 0!==n?n:"null":t}const Tt=new Set(["docs.google.com"]);const Ot=new class{constructor(e,t=new Set){function n(e){return`Invalid pattern "${e}": "*" is allowed only at start and/or end position`}this._patternsWithPath=t,this._equal=[],this._prefix=[],this._suffix=[],this._infix=[],this._domain=[];for(const t of e)if(t.startsWith("**."))this._domain.push({pattern:t,match:t.substring(3)});else{const e=t.indexOf("*");if(-1===e)this._equal.push({pattern:t,match:t});else if(e===t.length-1)this._prefix.push({pattern:t,match:t.substring(0,e)});else{if(0!==e)throw new Error(n(t));{const e=t.indexOf("*",1);if(-1===e)this._suffix.push({pattern:t,match:t.substring(1)});else{if(e!==t.length-1)throw new Error(n(t));this._infix.push({pattern:t,match:t.substring(1,e)})}}}}}getTopSiteId(e){var t,n,r,i,o,s,a;return null!==(s=null!==(o=null!==(i=null!==(r=null!==(n=null!==(t=this._equal.find((t=>t.match===e)))&&void 0!==t?t:this._domain.find((t=>t.match===e)))&&void 0!==n?n:(a=this._domain.find((t=>e.endsWith("."+t.match))),a?{match:"**."+a.match,pattern:a.pattern}:void 0))&&void 0!==r?r:this._prefix.find((t=>e.startsWith(t.match))))&&void 0!==i?i:this._suffix.find((t=>e.endsWith(t.match))))&&void 0!==o?o:this._infix.find((t=>e.includes(t.match))))&&void 0!==s?s:null}getTopSiteFirstPathComponent(e,t){var n,r;const i=null===(n=this.getTopSiteId(e))||void 0===n?void 0:n.pattern;return i&&this._patternsWithPath.has(i)&&null!==(r=null==t?void 0:t.replace(/^\//,"").split("/")[0])&&void 0!==r?r:null}includes(e){return null!==this.getTopSiteId(e)}}(["mail.google.com","translate.google.*","docs.google.com","web.whatsapp.com","facebook.com","outlook.*","linkedin.com","zendesk.*","youtube.com","twitter.com","x.com","messenger.com","*.slack.*","*canvas*","*instructure*","trello.com","editor.wix.com","quizlet.com","mail.yahoo.com","*.force.*","keep.google.com","vk.com","fanyi.baidu.com","app.bullhornstaffing.com","app.qa-world.com","calendar.google.com","papago.naver.com","wordcounter.net","blogger.*","wattpad.com","**.wordpress.com","amazon.*","smallseotools.com","create.kahoot.it","apps.rackspace.com","basecamp.com","varsitytutors.com","canva.com","fanyi.youdao.com","reverso.net","message.alibaba.com","*schoology*","*.blackboard.*","classroom.google.com","*upwork*","business.facebook.com","medium.com","mail.aol.com","workhub.transcribeme.com","github.com","overleaf.com","chat.openai.com","chatgpt.com","**.substack.com","**.atlassian.net","**.greenhouse.io","**.lattice.com","**.latticehq.com","**.salesforce.com","**.force.com","**.zendesk.com","**.microsoftonline.com","**.outlook.com","**.facebook.com","**.messenger.com","**.genesys.com","**.cisco.com","**.avaya.com","**.oraclecloud.com","**.five9.com","**.tawk.to","**.helpscout.com","**.livechat.com","**.intercom.com","**.freshdesk.com","**.liveagent.com","**.hubspot.com","google.com","chat.google.com","classroom.google.com","quillbot.com","notion.so","**.peardeck.com","discord.com","**.officeapps.live.com","student.desmos.com","web.kamihq.com","deepl.com","upwork.com","app.nearpod.com","bard.google.com","instagram.com","teams.microsoft.com","studio.youtube.com","learning.amplify.com","commonlit.org","**.asana.com","reddit.com","forms.office.com","sites.google.com","*amazon.co*","apps.studysync.com","fiverr.com","newsnow.io","coda.io","mail.superhuman.com","groups.google.com"],Tt);class Pt{constructor(e){this._onMeasure=e}measure(e){const t=performance.now();let n=!1;try{const r=e();return n=!0,r}finally{this._onMeasure(performance.now()-t,n)}}async measureAsync(e){const t=performance.now();let n=!1;try{const r=await e();return n=!0,r}finally{this._onMeasure(performance.now()-t,n)}}}const Rt=q.create("lib.tracking.telemetry"),Dt=.1,Nt=.05,Ut=.01;var Mt;!function(e){e.getMapPageCount=e=>void 0===e.mapPageCount?void 0:e.mapPageCount>10?"10+":e.mapPageCount}(Mt||(Mt={}));const jt=e=>e.substring(0,5),Ft=(e,t)=>{let n;try{n=JSON.stringify(t)}catch(t){n=`stringify fail: '${String(t)}', '${Ye(t)?t.message:"undefined"}'`,Rt.warn(n,e)}return n};class Lt{constructor(e=h.EI,t=h.EI,n=h.EI,r=h.EI,i=!1,o=_t.dummyFactoryInitialization,s=h.EI,a=h.EI,c=(e=>.01),l=h.EI,u=o(((e,{hideUserInfo:t,...n})=>{this._sendEvent({logger:e,level:ft.INFO,hideUserInfo:t,...gt(n)})})),d=h.EI,p=h.EI,g=h.EI,f=h.EI,m=h.EI){this._sendFelog=e,this._sendFelogUsage=t,this._setUserInfo=n,this._setContainerId=r,this._sendUsageMetrics=i,this._sendFelogEvent=s,this._sendFelogCrashLogs=a,this._getUsageMetricsRate=c,this._enableDataSharing=l,this._createPerfLogger=u,this._sendFelogMetricEvent=d,this._sendFemetricsRate=p,this._startFemetricsTimer=g,this._endFemetricsTimer=f,this._sendFemetricsTimer=m,this._sendEvent=e=>{try{this._sendFelogEvent(e)}catch(t){Rt.warn(`Failed to send felog for ${JSON.stringify(e)}`,t)}},this._sendException=e=>(t,n,r,i=!0)=>{let o;o=r||(Ye(t)?t.message:String(t)),this._sendEvent({message:o,...e,sendToFemetrics:i,extra:{...e.extra,...Qe(n,t)}})},this._sendUsageMetricsSamplingRatio=this._getUsageMetricsRate(N().bundleInfo.browser),this.sendFemetricsRate=(e,t,n,r,i)=>{this._sendFemetricsRate(e,t,n,r,i)},this.startFemetricsTimer=(e,t,n)=>{this._startFemetricsTimer(e,t,performance.now(),n)},this.endFemetricsTimer=(e,t,n,r)=>{this._endFemetricsTimer(e,t,performance.now(),n,r)},this.sendFemetricsTimer=(e,t,n,r)=>{this._sendFemetricsTimer(e,t,n,r)},this.restoredBgConnection=e=>{this._send("cs.connection.bg.restored",ft.INFO,{timeWithoutConnection:e})},this.initWithoutBgConnection=()=>{this._send("cs.connection.bg.disconnected",ft.INFO)},this.fetchDefinitionsFail=()=>{this._send("cs.connection.api.definition.failed",ft.WARN)},this.tooLongPageConfigInit=e=>{this._send("cs.pageConfig.init.exceeded",ft.WARN,{initTime:e})},this.tooLongUserUpdateTime=e=>{this._send("bg.state.user.update.exceeded",ft.WARN,{updateTime:e})},this.lostBgPageConnection=()=>{this._send("cs.gbutton.bgConnection.lost",ft.INFO)},this.restoreBgPageConnection=e=>{this._send("cs.gbutton.bgConnection.restored",ft.INFO,{time:e})},this.dynamicConfigLoadFromPrefsError=e=>{this._sendSampled(Ut,"bg.dynamicConfig.prefs.load.error",ft.ERROR,{message:e})},this.dynamicConfigSaveToPrefsError=e=>{this._sendSampled(Ut,"bg.dynamicConfig.prefs.save.error",ft.ERROR,{message:e})},this.dynamicConfigLoadFromServerError=e=>{this._sendSampled(Ut,"bg.dynamicConfig.server.load.error",ft.ERROR,{message:e})},this.pageConfigCDNError=e=>{this._send("cs.pageConfig.cdn.error",ft.ERROR,{message:e})},this.pageConfigLocalStorageError=(e,t)=>{this._send("cs.pageConfig.localStorage.error",ft.INFO,{message:e,name:t})},this.pageConfigUpdated=(e,t)=>{this._send("cs.pageConfig.updated",ft.INFO,{oldVersion:e,newVersion:t})},this.settingsPopupTimeout=()=>{this._send("settings.popup.init.timeout",ft.ERROR)},this.settingsUnsupportedShow=e=>{this._send("settings.popup.state.unsupported.show",ft.INFO,{popupType:e})},this.gnarClientInitFail=e=>{this._send("gnar.bg.tracking.gnar.init.fail",ft.WARN,{message:e})},this.bgTrackingInitFail=()=>{this._send("debug.tracking.init.fail",ft.INFO)},this.userUpgradeClick=e=>{this._send("cs.ui.action.upgradeClick",ft.INFO,{placement:e})},this.gGbUpHookClick=()=>{this._send("cs.ui.gb.uphook.click",ft.INFO)},this.gButtonClick=()=>{this._send("cs.ui.gbutton.click",ft.INFO)},this.unexpectedAnonymous=e=>{this._send("debug.bg.session.unexpectedAnonymous",ft.INFO,e)},this.getDapiPropError=(e,t)=>{const n="bg.connection.dapi.getProp.error",r=Ft(n,{statusCode:e,message:t});this._sendEvent({logger:n,level:ft.WARN,extra:{json:r},sendToFemetrics:!0})},this.getFetchPassportError=(e,t)=>{const n="bg.connection.passport.fetch.error",r=Ft(n,{statusCode:e,message:t});this._sendEvent({logger:n,level:ft.WARN,extra:{json:r},sendToFemetrics:!0})},this.getCheetahStatusError=(e,t)=>{const n="bg.connection.cheetahSettings.getStatus.error",r=Ft(n,{statusCode:e,message:t});this._sendEvent({logger:n,level:ft.WARN,extra:{json:r},sendToFemetrics:!0})},this.setDapiPropError=(e,t)=>{const n="bg.connection.dapi.setProp.error",r=Ft(n,{statusCode:e,message:t});this._sendEvent({logger:n,level:ft.WARN,extra:{json:r},sendToFemetrics:!0})},this.toggleExtensionDefs=e=>{this._send("bg.settings.definitions.toggle",ft.INFO,{enabled:e})},this.toggleExtension=(e,t,n)=>{const r={enabled:e,placement:t,domain:n};this._sendEvent({logger:"bg.settings.extension.toggle",level:ft.INFO,sendToFemetrics:!0,extra:{json:Je(r)},femetricsExtra:r})},this.disableUntilNextVisit=()=>{this._send("cs.gbutton.disableUntilNextVisit",ft.INFO)},this.disableButtonClick=()=>{this._send("cs.gbutton.disableButtonClick",ft.INFO)},this.cookieOverflow=(e,t)=>{this._send("debug.bg.state.cookie.overflow",ft.INFO,{size:e,biggestCookie:t})},this.externalChangePlan=()=>{this._send("bg.api.external.changePlan",ft.INFO)},this.externalChangeDialect=()=>{this._send("bg.api.external.changeDialect",ft.INFO)},this.externalChangeUser=()=>{this._send("bg.api.external.changeUsed",ft.INFO)},this.externalLogout=()=>{this._send("bg.api.external.logout",ft.INFO)},this.safariLogoutFail=e=>{this._sendEvent({logger:"bg.safari.logout.error",level:ft.INFO,message:e,sendToFemetrics:!0})},this.chromeToolbarPopupInitFail=e=>{this._sendEvent({logger:"bg.chrome.toolbar.popup",level:ft.WARN,message:e,sendToFemetrics:!1})},this.csInitialized=e=>{if("message"in e){const t=xt();this._sendFemetricsRate("csInitialized",{message:e.message,isIframe:e.isIframe,stage:e.stage,domain:t,context:e.context,isAnnotatedTextEnabled:e.isAnnotatedTextEnabled});const n=ze();this._sendEvent({level:ft.INFO,logger:"csFailInitializedVersion",extra:{json:JSON.stringify({csVersion:n})}}),this._sendFemetricsRate("csFailInitializedVersion",{csVersion:n}),"facebook.com"===t&&this._sendEvent({level:ft.INFO,logger:"csInitializedFailed",message:e.message,extra:{json:JSON.stringify({isIframe:e.isIframe,stage:e.stage,url:self.location.href,context:e.context})},hideUserInfo:!0})}else this._sendFemetricsRate("csInitialized",e,["firstInstall","registrationDate"])},this.acceptDataControl=()=>{this._send("bg.dataControl.accepted",ft.INFO)},this.bgPage={bgStarted:e=>{this._sendFemetricsRate("bgStarted",e),"fail"===e.status&&this._sendException({logger:"bg.start.fail",femetricsExtra:{reason:e.reason},level:ft.ERROR})(e.error,{reason:e.reason,json:e.json})},bgPageStarted:(e,t)=>{this._sendFemetricsRate("bgPageStarted",{context:e,time:t})},bgPageInitFail:e=>{this._send("bg.state.init.fail",ft.ERROR,{initAttempts:e})},bgPageInitTimeout:e=>{this._send("bg.state.start.timeout",ft.WARN,{initTime:e})},operationTimeout:(e,t)=>{this._send("bg.operation.timeout",ft.WARN,{operation:e,timeout:t})},portIdNotFound:e=>{this._sendFemetricsRate("bgPagePortIdNotFound",e)},chunkInjectFailure:(e,t,n)=>{this._send("bg.codeSplitting.injectFailure",ft.ERROR,{chunkUrl:e,tabId:t,error:n})}},this.sidePanel={openFail:e=>this._sendEvent({logger:"sidePanel.open.fail",level:ft.ERROR,message:e,femetricsMessage:jt(e)}),openPopupFail:e=>this._sendEvent({logger:"sidePanel.openPopup.fail",level:ft.ERROR,message:e,femetricsMessage:jt(e)}),initFail:e=>{this._sendEvent({logger:"sidePanel.init.fail",level:ft.ERROR,message:e,femetricsMessage:jt(e)})},initSuccess:()=>{this._sendEvent({logger:"sidePanel.init.success",level:ft.INFO,sendToFemetrics:!0})},unhandledException:(e,t)=>{const n="sidePanel.unhandledException";Rt.error(n,new Error(e),t),this._sendEvent({logger:n,level:ft.ERROR,message:e,extra:t,femetricsMessage:jt(e)})},unhandledRejection:(e,t)=>{const n="sidePanel.unhandledRejection";Rt.error(n,new Error(e),t),this._sendEvent({logger:n,level:ft.ERROR,message:e,extra:t,femetricsMessage:jt(e)})},fetchTreatmentsFail:e=>{this._sendFemetricsRate("sidePanelFetchTreatmentsFail",{message:jt(e)})},fetchTreatmentsTimeout:e=>{this._sendFemetricsRate("sidePanelFetchTreatmentsTimeoutInSecond",{time:e})},fetchTreatmentsSuccess:()=>{this._sendFemetricsRate("sidePanelFetchTreatmentsSuccess")},serviceWorkerNotWorking:()=>{this._sendFemetricsRate("serviceWorkerNotWorking")},chromiumBrand:e=>{this._sendEvent({logger:"sidePanel.chromiumBrand",level:ft.INFO,extra:{json:JSON.stringify(e)}}),this._sendFemetricsRate("sidePanelChromiumBrand",e)},sidePanelCloseDuplication:(e,t,n,r)=>{this._sendEvent({message:"received disconnect event after side panel is closed",logger:e,level:ft.ERROR,extra:{json:Je({disconnectionCount:t,assistantSessionId:n,isSidePanelOpen:r})}})},closeAssistantFailure:(e,t)=>{this._sendEvent({message:"unable to send closeAssistant event when side panel is closed",logger:e,level:ft.WARN,extra:{json:Je({message:t})}})},recordAssistantShownFail:()=>{this._sendEvent({logger:"sidePanel.recordAssistantShown.fail",level:ft.ERROR})}},this.popup={popupInitFail:(e,t)=>{this._sendEvent({logger:"popup.init.fail",level:ft.ERROR,message:e,extra:t,femetricsMessage:jt(e)})},fetchTreatmentsFail:e=>{this._sendFemetricsRate("popupFetchTreatmentsFails",{message:jt(e)})},popupStateInitFail:e=>{this._sendEvent({logger:"popup.state.init.fail",level:ft.ERROR,message:e,femetricsMessage:jt(e)})},initSuccess:()=>{this._sendEvent({logger:"popup.init.success",level:ft.INFO,sendToFemetrics:!0})}},this.checkScript={fetchTreatmentsFail:e=>{this._sendFemetricsRate("checkingFetchTreatmentsFail",{message:jt(e),domain:xt()})},fetchTreatmentsSuccess:()=>{this._sendFemetricsRate("checkingFetchTreatmentsSuccess",{domain:xt()})},fetchTreatmentsTimeout:e=>{this._sendFemetricsRate("checkingFetchTreatmentsTimeoutInSecond",{time:e,domain:xt()})}},this.extensionUpdated=(e,t)=>{this._send("bg.state.updated",ft.INFO,{currentVersion:e,previousVersion:t})},this.extensionUpdateFail=e=>{this._send("bg.state.update.fail",ft.INFO,{previousVersion:e})},this.cannotGetInstallSource=()=>{this._send("bg.getSource.fail",ft.WARN)},this.extensionInstall=e=>{this._sendEvent({logger:"bg.state.install",level:ft.INFO,extra:{json:JSON.stringify({source:e})},sendToFemetrics:!0})},this.chromeContentScriptLoadError=(e,t)=>{this._send("bg.chrome.cs.load.error",ft.WARN,{message:e,type:t})},this.reloadNotificationShow=()=>{this._send("bg.ui.notification.tabsReload.show",ft.WARN)},this.reloadNotificationClick=()=>{this._send("bg.ui.notification.tabsReload.click",ft.INFO)},this.fetchUserFail=(e,t,n,r)=>{const i="bg.user.fetch.fail",o=Ft(i,{body:t,statusCode:n,reason:e,fromAuthRequest:!!r});this._sendEvent({logger:i,level:ft.WARN,extra:{json:o},sendToFemetrics:!0})},this.getAccessTokenError=e=>this.sendFemetricsRate("oauthGetAccessTokenError",e),this.getAccessTokenSuccess=e=>this.sendFemetricsRate("oauthGetAccessTokenSuccess",e),this.initializeAccessTokenSuccess=()=>this._sendEvent({logger:"bg.api.service.getAccessToken",message:"initialize access token",level:ft.INFO}),this.oauthLogout=e=>this.sendFemetricsRate("oauthLogout",e),this.compareUserInUserUpdate=e=>this.sendFemetricsRate("compareUserInUserUpdate",e),this.frequentCookieChanges=e=>{this._send("debug.cookie.onChange.error",ft.INFO,{canceled:e})},this.initializePropFromDapi=e=>{this._send("bg.state.dapi.prop.initialize",ft.INFO,{name:e})},this.personalizedInsightsConsentPopupShow=e=>{this._sendEvent({logger:"cs.personalizedInsightsConsent.popup.show",level:ft.INFO,sendToFemetrics:!0,femetricsMessage:`Personalized Insights Consent Popup shown with consent type: ${e}`,hideUserInfo:!0})},this.performanceCardHighCollaborationDetected=()=>{this._sendEvent({logger:"cs.gDocsCollabPerformance.highCollaborationDetected",level:ft.INFO,sendToFemetrics:!0,femetricsMessage:"High collaboration detected on GDocs",hideUserInfo:!0})},this.performanceCardPopupShow=()=>{this._sendEvent({logger:"cs.gDocsCollabPerformance.popup.show",level:ft.INFO,sendToFemetrics:!0,femetricsMessage:"Performance degradation warning shown to user on gDocs",hideUserInfo:!0})},this.performanceCardContinueSession=()=>{this._sendEvent({logger:"cs.gDocsCollabPerformance.popup.continue",level:ft.INFO,sendToFemetrics:!0,femetricsMessage:"Performance degradation warning acknowledged by user on gDocs and user chose to continue the session",hideUserInfo:!0})},this.performanceCardDeactivateSession=()=>{this._sendEvent({logger:"cs.gDocsCollabPerformance.popup.deactivate",level:ft.INFO,sendToFemetrics:!0,femetricsMessage:"Performance degradation warning acknowledged by user on gDocs and user chose to deactivate the session",hideUserInfo:!0})},this.personalizedInsightsConsentPopupInitializationError=e=>{this._sendEvent({logger:"cs.personalizedInsightsConsent.popup.initialization.error",level:ft.ERROR,sendToFemetrics:!0,femetricsMessage:"There was an issue initialing Personalized Insights Consent popup. Likely, gButtonPopupController has not been initialized yet at the time when updateState was called.",hideUserInfo:!0,extra:{json:JSON.stringify({err:e})}})},this.dataSharingGetError=e=>{this._sendEvent({logger:"bg.dataSharing.api.failure",level:ft.ERROR,sendToFemetrics:!0,femetricsMessage:"There was an issue calling Data Sharing API",hideUserInfo:!1,extra:{json:JSON.stringify({err:e})}})},this.authAccountChooserOptionsError=e=>{this._sendEvent({logger:"bg.authOptions.api.error",level:ft.ERROR,sendToFemetrics:!0,femetricsMessage:"There was an issue calling Auth /options endpoint used to return Account Chooser information.",hideUserInfo:!0,extra:{json:JSON.stringify({err:e})}})},this.onboardingPopupShow=()=>{this._send("cs.onboarding.popup.show",ft.INFO)},this.onboardingPopupCancel=()=>{this._send("cs.onboarding.popup.cancel",ft.INFO)},this.onboardingTutorialShow=()=>{this._send("cs.onboarding.tutorial.show",ft.INFO)},this.loginReminderPopupShow=()=>{this._send("cs.gbutton.popup.loginReminder.show",ft.INFO)},this.loginReminderBadgeShow=()=>{this._send("bg.state.user.loginReminder.enable",ft.INFO)},this.loginReminderCanceled=e=>{this._sendFelog("bg.state.user.loginReminder.canceled",e,ft.ERROR)},this.logApiCallFailure=(e,t)=>{this._sendEvent({logger:"bg.api.service.request.failure",level:ft.ERROR,message:"[API_CALL_FAILED]",extra:{json:JSON.stringify({filteredUrl:e,method:t})}})},this.logGrauthExchange=()=>{this._sendEvent({logger:"user.auth.grauth.exchange",level:ft.INFO,message:"[GRAUTH_ROTATED]"})},this.unhandledExceptions={unhandledBgPageException:(e,t)=>{const n="bg.unhandledException";Rt.error(n,new Error(e),t),this._sendSampledEvent(Nt,{logger:n,level:ft.ERROR,message:Vt(e),extra:t})},unhandledBgPageRejection:(e,t)=>{const n="bg.unhandledRejection";Rt.error(n,new Error(e),t),this._sendSampledEvent(Nt,{logger:n,level:ft.ERROR,message:zt(e),extra:t})},unhandledPopupException:(e,t)=>{const n="popup.unhandledException";Rt.error(n,new Error(e),t),this._sendEvent({logger:n,level:ft.ERROR,message:e,extra:t,femetricsMessage:jt(e)})},unhandledPopupRejection:(e,t)=>{const n="popup.unhandledRejection";Rt.error(n,new Error(e),t),this._sendEvent({logger:n,level:ft.ERROR,message:e,extra:t,femetricsMessage:jt(e)})}},this.csUnhandled=({message:e,femetricsExtra:t,error:n,printAsWarning:r})=>{const i="cs.unhandled";r?Rt.warn(i,new Error(e)):Rt.error(i,new Error(e)),this._sendEvent({logger:i,level:r?ft.WARN:ft.ERROR,message:e,femetricsExtra:t,sendToFemetrics:!0,extra:n?Qe({},n):void 0})},this.csCrash=(0,h.hz)(((e,t)=>{Rt.error("cs.crash",new Error(e)),this._sendEvent({logger:"cs.crash",level:ft.ERROR,message:e,femetricsExtra:t})})),this.storageMigrationSucceeded=()=>{this._send("bg.storageMigration.success",ft.INFO,{})},this.storageMigrationFailed=this._sendException({logger:"bg.storageMigration.failure",level:ft.ERROR}),this.storageApplyChangesFailed=this._sendException({logger:"bg.storage.applyChanges.failure",level:ft.ERROR}),this.cardShowAction=()=>{this._sendSampled(Dt,"cs.editor.card.show",ft.INFO)},this.cardHideAction=()=>{this._sendSampled(Dt,"cs.editor.card.hide",ft.INFO)},this.cardReplacementAction=()=>{this._sendSampled(Dt,"cs.editor.card.replacement",ft.INFO)},this.cardAddToDictAction=()=>{this._sendSampled(Dt,"cs.editor.card.addToDict",ft.INFO)},this.cardIgnoreAction=()=>{this._sendSampled(Dt,"cs.editor.card.ignore",ft.INFO)},this.synonymCardShowAction=e=>{this._sendSampled(Dt,"cs.editor.synonym.show",ft.INFO,{notFoundCard:e})},this.synonymCardHideAction=e=>{this._sendSampled(Dt,"cs.editor.synonym.hide",ft.INFO,{notFoundCard:e})},this.synonymReplacementAction=()=>{this._sendSampled(Dt,"cs.editor.synonym.replacement",ft.INFO)},this.dictCardShowAction=()=>{this._sendSampled(Dt,"cs.editor.dict.show",ft.INFO)},this.dictCardHideAction=()=>{this._sendSampled(Dt,"cs.editor.dict.hide",ft.INFO)},this.couldNotParseTransform=(e,t)=>{this._send("cs.cards.transforms.parse.error",ft.WARN,{transformHTML:e,fallbackParseSuccessful:t})},this.disabledTabLoad=e=>{this._sendUsage("usage.loadOnDisabledTab",ft.INFO,{accountType:e})},this.disabledTabByUserLoad=e=>{this._sendUsage("usage.loadOnDisabledByUserTab",ft.INFO,{accountType:e})},this.initSession=(e,t,n,r)=>{this._sendUsage("usage.session.init",ft.INFO,{isTopSite:At(e),accountType:t,fieldType:n,fieldSupported:r}),this._sendMetric("usage.session.init",{domain:e,accountType:t,fieldType:n,fieldSupported:r})},this.cardFirstInteraction=(e,t)=>{this._sendUsage("usage.card.interaction",ft.INFO,{accountType:e,fieldType:t})},this.gnar={nextPingDateWriteError:e=>this._send("bg.gnarTracker.nextPingDateWriteError",ft.ERROR,{error:e}),sendError:(e,t)=>this._sendException({logger:"bg.gnarTracker.sendError",level:ft.ERROR,femetricsExtra:{context:t}})(e,{eventName:t}),failToLoadContainerId:(e,t,n,r)=>this.sendFemetricsRate("failToLoadContainerId",{source:t,placement:e,reason:n,message:String(r).slice(0,20)}),trackBeforeSetUser:e=>this._send("bg.gnarTracker.trackBeforeSetUser",ft.INFO,{millisSinceInit:e}),errorSetUser:this._sendException({logger:"bg.gnarTracker.errorSetUser",level:ft.ERROR})},this.productMetricsClient={updateConfigurationFailed:(e,t)=>{this._sendException({logger:"bg.productMetricsClient.setUserInfoFailed",level:ft.ERROR,femetricsExtra:{context:t}})(e,{error:e,context:t})}},this._sendGdocsPageExecutionException=this._sendException({logger:"cs.gdocs.pageExecution.exception",level:ft.ERROR}),this.gdocs={nonDocumentPage:e=>{this._sendEvent({logger:"cs.gdocs.canvas.nonDocumentPage",level:ft.WARN,sendToFemetrics:!0,femetricsMessage:`isViewMode: ${e.isViewMode}`,femetricsExtra:{context:e.pageType},extra:{json:Je({url:e.url})},hideUserInfo:!0})},documentTabInfo:(0,h.hz)((e=>{this.sendFemetricsRate("gdocsDocumentTabInfo",{hasTabQuery:e})})),tabSwitchFrequency:e=>{this.sendFemetricsRate("gdocsTabSwitchFrequency",e)},pageExecutionException:(e,t)=>this._sendGdocsPageExecutionException(e,{isGDocsCanvas:t}),disabledBeforeForceEnable:(0,h.hz)((e=>this._send("cs.gdocs.disabledBeforeForceEnable",ft.INFO,{disabledDate:e}))),enabledBeforeForceEnable:(0,h.hz)((()=>this._send("cs.gdocs.enabledBeforeForceEnable",ft.INFO))),replacementSelectionErrorInfo:e=>{this._sendFemetricsRate("gdocsReplacementSelectionErrorInfo",e)},eventTargetFail:(0,h.hz)(this._sendException({logger:"cs.gdocs.eventTargetFail",level:ft.ERROR})),sidebarFail:(0,h.hz)(((e,t)=>this._sendException({logger:"cs.gdocs.getSidebarFail",level:ft.ERROR})(e,{type:t}))),trackSidebarType:({detectedSidebarType:e,displayedSidebarType:t})=>this.sendFemetricsRate("gdocsSidebarType",{type:e,displayedSidebarType:t}),layoutTreeAvailability:e=>{this.sendFemetricsRate("gdocsInternalsLayoutTreeAvailability",e)}},this.canvasGdocs={trackGdocsInjectedMetric:e=>{this.sendFemetricsRate("gdocsInjectedMetric",e)},injectedException:(0,h.hz)(this._sendException({logger:"cs.gdocs.canvas.injected.exception",level:ft.ERROR})),injectedError:(0,h.HO)(((e,t,n,r)=>this._sendEvent({logger:"cs.gdocs.canvas.injected.error",level:ft.ERROR,message:t,extra:{json:Je({context:e,data:n})},gdocsExtra:r,femetricsExtra:{context:e}})),(e=>e)),injectedInfo:(0,h.HO)(((e,t,n,r)=>this._sendEvent({logger:"cs.gdocs.canvas.injected.info",eventContext:e,level:ft.INFO,message:r,sendToFemetrics:!0,gdocsExtra:t,extra:{json:Je({context:e,data:n})},femetricsExtra:{context:e}})),(e=>e)),injectedInfoCanvasPatching:(0,h.HO)(((e,t,n,r)=>this._sendEvent({logger:"cs.gdocs.canvas.injected.info",eventContext:e,level:ft.INFO,message:t,sendToFemetrics:!0,gdocsExtra:n,extra:{json:Je({context:e,data:r})},femetricsExtra:{context:e,message:t,...r}})),(e=>e)),initializationException:(0,h.hz)(((e,t,n)=>this._sendException({logger:"cs.gdocs.canvas.init.exception",level:ft.ERROR,gdocsExtra:n,femetricsExtra:{type:t}})(e,{type:t}))),initializationTimeout:(0,h.hz)(((e,t,n)=>this._sendEvent({logger:"cs.gdocs.canvas.init.timeout",level:ft.ERROR,message:`Initialization for ${t} timeout: ${e}ms`,extra:{json:Je({type:t})},gdocsExtra:n,femetricsExtra:{type:t}}))),creatingException:(0,h.hz)(((e,t)=>this._sendEvent({logger:"cs.gdocs.canvas.creating.exception",level:ft.ERROR,message:e,gdocsExtra:t}))),initInterrupted:(0,h.hz)((e=>this._sendEvent({logger:"cs.gdocs.canvas.interrupted",level:ft.ERROR,message:"Interrupted",gdocsExtra:e}))),dataSourceException:(0,h.hz)(((e,t)=>this._sendException({logger:"cs.gdocs.canvas.dataSource.exception",level:ft.ERROR,femetricsExtra:{type:t}})(e,{type:t}))),error:(0,h.HO)(((e,t,n,r,i)=>this._sendEvent({logger:"cs.gdocs.canvas.error",level:ft.ERROR,message:t,extra:Qe({type:e,message:t,data:r},n),femetricsExtra:{type:e,mappingName:null==i?void 0:i.mappingName}})),(e=>e),((e,t,n,r,i)=>{this._sendFemetricsRate("gdocsError",{type:e,message:t&&t.substring(0,20)||"other",mappingName:null==i?void 0:i.mappingName,selectionDiff:"selectionService"===e?null==r?void 0:r.selectionDiff:void 0,gDocsInternalsType:null==i?void 0:i.gDocsInternalsType})})),warning:(0,h.HO)(((e,t,n)=>this._sendEvent({logger:"cs.gdocs.canvas.warning",level:ft.WARN,message:t,extra:Qe({type:e,message:t,data:n})})),(e=>e)),trackSessionFinalResult:(0,h.hz)(((e,t)=>this._sendEvent({logger:"cs.gdocs.canvas.start.result",level:ft.INFO,gdocsExtra:t,sendToFemetrics:!0,femetricsExtra:{type:e}}))),started:e=>this._sendEvent({logger:"cs.gdocs.canvas.started",level:ft.INFO,sendToFemetrics:!0,gdocsExtra:e}),creating:()=>this._sendEvent({logger:"cs.gdocs.canvas.creating",level:ft.INFO,sendToFemetrics:!0}),showLongDocPopup:e=>this._sendEvent({logger:"cs.gdocs.canvas.longDocPopup",level:ft.INFO,sendToFemetrics:!0,gdocsExtra:e}),showSharedDocPopup:e=>this._sendEvent({logger:"cs.gdocs.canvas.sharedDocPopup",level:ft.INFO,sendToFemetrics:!0,gdocsExtra:e}),debugPageSearchFail:(0,h.hz)((e=>this._sendEvent({logger:"cs.gdocs.canvas.pageSearch.debug",level:ft.INFO,extra:{json:Je({data:e})}}))),debugMappingFail:(0,h.hz)((e=>this._sendEvent({logger:"cs.gdocs.canvas.mapping.debug",level:ft.INFO,extra:{json:Je({data:e})}}))),buildTextMapPerf:this._createPerfLogger("cs.gdocs.canvas.perf.textMap",30),findPage:this._createPerfLogger("cs.gdocs.canvas.perf.findPage",100),mappingPerf:e=>new Pt((t=>{1e-4>Math.random()&&this._sendFemetricsTimer("gdocsMapping",t,"summary",{...e,mapPageCount:Mt.getMapPageCount(e)})})),fullTextNotFound:(0,h.hz)((()=>this._send("cs.gdocs.canvas.fullTextNotFound",ft.WARN))),equationsRenderInfo:e=>{this._sendFemetricsRate("gdocsEquationsRenderInfo",e)},mapping:({mapPageCount:e,attempts:t,mappingName:n,mode:r,tableMode:i,partialRenderMode:o,renderRTL:s,gDocsInternalsType:a})=>{this._sendFemetricsRate("gdocsMapping",{mappingMode:r,mappingName:n,tableMode:i,mapPageCount:e>5?"5+":e,mappingAttempts:t.length,partialRenderMode:o,renderRTL:s,gDocsInternalsType:a,...t.reduce(((e,t,n)=>({...e,[`mapping${n}_name`]:t.name,[`mapping${n}_success`]:t.success,[`mapping${n}_mappedPages`]:"number"==typeof t.mappedPageCount&&t.mappedPageCount>5?"5+":t.mappedPageCount})),{})},["os","userOrganizationType"]),this._sendFemetricsRate("gdocsMapping.short",{mappingName:n,gDocsInternalsType:a},["os","userOrganizationType"])},mappingFailedInfo:e=>{this._sendFemetricsRate("gdocsMappingFailedInfo",e)},mappings:{advanced:{byFeatures:({mapPageCount:e,injectedFeatures:t,...n})=>{this._sendFemetricsRate("gdocs.mapping.advanced.byFeatures",{...n,...Ht(t),mapPageCount:e>5?"5+":e},["os"])},textCoverage:e=>{this._sendFemetricsRate("gdocs.mapping.advanced.coverage",e)},textCoverageShort:e=>{this._sendFemetricsRate("gdocs.mapping.advanced.coverage.short",e)}}},mappingStats:e=>{this._sendFemetricsRate("gdocsMappingStats",e,["os"])},mappingPageStats:e=>{this._sendFemetricsRate("gdocsMappingPageStats",e,["os"])},mappingStatsByTextLength:e=>{this._sendFemetricsRate("gdocsMappingStatsByTextLength",e,["os"])},mappingPageStatsByTextLength:e=>{this._sendFemetricsRate("gdocsMappingPageStatsByTextLength",e,["os"])},mappingStatsByTableMode:e=>{this._sendFemetricsRate("gdocsMappingStatsByTableMode",e,["os"])},mappingPageStatsByTableMode:e=>{this._sendFemetricsRate("gdocsMappingPageStatsByTableMode",e,["os"])},mappingMinPageGapsStats:e=>{this._sendFemetricsRate("gdocsMappingMinPageGapsStats",e,["os"])},mappingMaxPageGapsStats:e=>{this._sendFemetricsRate("gdocsMappingMaxPageGapsStats",e,["os"])},mappingSearchStats:e=>{this._sendFemetricsRate("gdocsMappingSearchStats",e,["os"])},partialMappingByPageExperimentUsage:e=>{this._sendFemetricsRate("gdocsPartialMappingByPageExperimentUsage",e,["os"])},partialMapping:{error:e=>{this._sendFemetricsRate("gdocsPartialMappingErrors",e,["os"])}},atmMappingPerformance:e=>{this._sendFemetricsRate("gdocsATMMappingPerformance",e,["os"])},selectionPatched:e=>{this._sendFemetricsRate("gdocsSelectionPatched",e)},trackFatalPopup:(e,t)=>{this._sendFemetricsRate("gdocsTrackFatalPopup",{reason:(null==e?void 0:e.isBrowserExtFault)?"extension":"google",content:String(null==e?void 0:e.textContent).slice(0,10),context:t?"started":"notStarted"})},lazyLoadSidebarController:e=>{this._sendFemetricsRate("gdocsLazyLoadSidebarController",e)}},this.gmailThreadContext={warning:(0,h.HO)(((e,t,n)=>this._sendEvent({logger:"cs.threadContext.gmail.warning",level:ft.WARN,message:t,extra:{json:Je({type:e,message:t,data:n})}})),(e=>e))},this.autoFix={featureToggleClick:(e,t)=>{this._sendFemetricsRate("autoFixFeatureToggleClick",{autoFixFeatureState:e,autoFixFeatureTogglePlacement:t})},attemptToApplyInParallel:e=>{this._sendFemetricsRate("autoFixAttemptToApplyInParallel",{autoAlerApplierVersion:e})},attemptToApplyInParallelError:(0,h.hz)(((e,t)=>this._sendEvent({logger:"cs.autoFix.attemptToApplyInParallelError",level:ft.ERROR,sendToFemetrics:!0,autoFixExtra:{domain:e,autoAlerApplierVersion:t}})))},this.autoApply={inconsistentRevertAlertError:(0,h.hz)(((e,t)=>this._sendEvent({logger:"cs.autoApply.inconsistentRevertAlert",level:ft.ERROR,sendToFemetrics:!0,autoApplyExtra:{domain:e,pname:t}}))),triggered:()=>{this._sendFemetricsRate("autoApplyTriggered")},cardLooked:()=>{this._sendFemetricsRate("autoApplyCardLooked")},revertClick:()=>{this._sendFemetricsRate("autoApplyRevertClick")},reverted:()=>{this._sendFemetricsRate("autoApplyReverted")},affectedByTextChange:()=>{this._sendFemetricsRate("autoApplyAffectedByTextChange")},acceptClick:()=>{this._sendFemetricsRate("autoApplyAcceptClick")},settingsClick:e=>{this._sendFemetricsRate("autoApplySettingsClick",{autoApplySettingsMenuState:e})},turnOffUntilNextView:()=>{this._sendFemetricsRate("autoApplyTurnOffUntilNextView")},integrationCreated:()=>{this._sendFemetricsRate("autoApplyIntegrationCreated")}},this.knowledgeHub={error:(0,h.HO)(((e,t,n,r)=>this._sendEvent({logger:"cs.knowledgeHub.error",level:ft.ERROR,message:t,extra:{json:Je({type:e,message:t,domain:n,data:r})}})),(e=>e)),integrationCreated:(e,t)=>{this._sendFemetricsRate("knowledgeHubIntegrationCreated",{site:e,integrationMode:t})},relatedMaterialsClick:e=>{this._sendFemetricsRate("knowledgeHubRelatedMaterialsClick",{site:e})},pointPeopleClick:(e,t)=>{this._sendFemetricsRate("knowledgeHubPointPeopleClick",{site:e,pointPeopleClickType:t})},descriptionCopyClick:e=>{this._sendFemetricsRate("knowledgeHubDescriptionCopyClick",{site:e})},suggestEditButtonClick:e=>{this._sendFemetricsRate("knowledgeHubSuggestEditButtonClick",{site:e})},featureToggleClick:(e,t)=>{this._sendFemetricsRate("knowledgeHubFeatureToggleClick",{site:e,featureState:t})},bgApiError:(e,t)=>{const n="bg.knowledgeHub.error",r=Ft(n,{statusCode:e,message:t});this._sendEvent({logger:n,level:ft.ERROR,extra:{json:r},sendToFemetrics:!0})},onboardingPopupShow:(e,t)=>{this._sendFemetricsRate("knowledgeHubOnboardingPopupShow",{onboardingType:e,site:t})},onboardingNextButtonClick:(e,t,n)=>{this._sendFemetricsRate("knowledgeHubOnboardingNextButtonClick",{onboardingType:e,site:t,step:n})},onboardingSkipButtonClick:(e,t,n)=>{this._sendFemetricsRate("knowledgeHubOnboardingSkipButtonClick",{onboardingType:e,site:t,step:n})},onboardingCloseButtonClick:(e,t,n)=>{this._sendFemetricsRate("knowledgeHubOnboardingCloseButtonClick",{onboardingType:e,site:t,step:n})}},this._cbLog=e=>(0,h.HO)(((t,n,r,i)=>this._sendEvent({logger:"cs.citationBuilder",level:e,citationBuilderExtra:r,message:n,extra:Qe(void 0,i)})),(e=>e)),this.citationBuilder={error:this._cbLog(ft.ERROR),warning:this._cbLog(ft.WARN),info:this._cbLog(ft.INFO)},this.translateOnboarding={error:this._cbLog(ft.ERROR),warning:this._cbLog(ft.WARN),info:this._cbLog(ft.INFO)},this.tsMintSDK={error:(e,t)=>this._sendEvent({logger:"cs.tsMintSDK.error",level:ft.ERROR,message:t,extra:{json:Je({type:e,message:t})}})},this.humanWritingReport={error:(e,t,n,r)=>this._sendEvent({logger:"cs.humanWritingReport.error",level:ft.ERROR,message:t,extra:{json:Je({type:e,message:t,domain:n,data:r})}}),warning:(e,t,n,r)=>this._sendEvent({logger:"cs.humanWritingReport.warn",level:ft.WARN,message:t,extra:{json:Je({type:e,message:t,domain:n,data:r})}}),info:(e,t,n)=>{this._sendEvent({logger:"cs.humanWritingReport.info",level:ft.INFO,message:e,extra:{json:Je({message:e,domain:t,data:n})}})}},this.alwaysAvailableAssistant={sendFeedback:({message:e,feedback:t,sessionId:n,domain:r})=>this._sendEvent({message:e,logger:"cs.alwaysAvailableAssistant.feedback",level:ft.INFO,alwaysAvailableAssistantExtra:{feedback:t,sessionId:n,domain:r}}),chatsDeleted:()=>{this._sendFemetricsRate("aaaChatsDeleted")},trackUnexpectedAssistantOpen:e=>{this._sendFemetricsRate("trackUnexpectedAssistantOpen",{source:e})},openSidePanel:(e,t)=>{this._sendFemetricsRate("openSidePanel",{source:e,domain:xt(),status:t})},getDeltaFromHtmlStringFailed:e=>{this._sendException({logger:"cs.alwaysAvailableAssistant.getDeltaFromHtmlStringFailed",level:ft.ERROR})(e)}},this.g2LoggerFactory=({integrationName:e,level:t,loggerNameSuffix:n})=>({message:r,data:i={},error:o,feedbackData:s,hideUserInfo:a=!0})=>{let c;a?c={integrationName:e,feedbackData:s}:s&&(c={feedbackData:s,integrationName:s.domain?e:void 0}),this._sendEvent({logger:"cs.g2"+(n?`.${n}`:""),level:t,message:r,extra:{...o?Qe(i,o):{json:Je(i)}},g2Extra:c,hideUserInfo:a})},this.promptEnhancerLoggerFactory=({integrationName:e,domain:t,level:n})=>({message:r,data:i={},error:o})=>{this._sendEvent({logger:"cs.promptEnhancer",level:n,message:r,extra:{...o?Qe(i,o):{json:Je(i)}},promptEnhancerExtra:{integrationName:e,domain:xt(t)}})},this.touchTypistLoggerFactory=({level:e})=>({message:t,error:n})=>{this._sendEvent({logger:"cs.touchTypist",level:e,message:t,extra:{...n?Qe({},n):{json:Je({error:"Unknown error"})}}})},this._agentsLogger=({level:e,context:t,message:n,domain:r,data:i,error:o})=>{const s=void 0!==r,a=s?{...i,domain:r?xt(r):void 0}:i;this._sendEvent({logger:`${t}.agents`,level:e,message:n,extra:{...o?Qe(null!=a?a:{},o):{json:Je(a)}},hideUserInfo:s})},this.agents={bg:Wt("bg",this._agentsLogger),cs:e=>Wt("cs",this._agentsLogger,e),sidePanel:Wt("sidePanel",this._agentsLogger)},this.performance={processInput:this._createPerfLogger("cs.fluid.processInput",100),processAlerts:this._createPerfLogger("cs.fluid.processAlerts",10),processFilterChange:this._createPerfLogger("cs.fluid.processFilterChange",10),csInitialized:(e,t,n,r,i)=>{this._createPerfLogger("cs.initialized").custom({_tag:wt.Data.Tagged.Types.csInit,domain:self.location.host,hideUserInfo:!0,loadTime:e,initTime:t,pageLoadTime:n,injectTime:r,error:i?{message:i.message,stack:i.stack}:void 0})},viewInjection:e=>{this._createPerfLogger("cs.viewInjection").custom({_tag:wt.Data.Tagged.Types.viewInjection,...e})}},this.autocorrect={responseTime:this._createPerfLogger("cs.autocorrect.responseTime",10),predictTime:this._createPerfLogger("cs.autocorrect.predictTime",10),integrationCreated:()=>{this._sendFemetricsRate("autoCorrectIntegrationCreated")},triggered:()=>{this._sendFemetricsRate("autoCorrectTriggered")},cardLooked:()=>{this._sendFemetricsRate("autoCorrectCardLooked")},revertClick:()=>{this._sendFemetricsRate("autoCorrectRevertClick")},reverted:()=>{this._sendFemetricsRate("autoCorrectReverted")},acceptClick:()=>{this._sendFemetricsRate("autoCorrectAcceptClick")},settingsClick:e=>{this._sendFemetricsRate("autoCorrectSettingsClick",{autoCorrectSettingsMenuState:e})},turnOffUntilNextView:()=>{this._sendFemetricsRate("autoCorrectTurnOffUntilNextView")},affectedByTextChange:()=>{this._sendFemetricsRate("autoCorrectAffectedByTextChange")}},this.assistant={initTime:this._createPerfLogger("cs.assistant.initTime",1),renderTime:this._createPerfLogger("cs.assistant.renderTime",1),openTime:this._createPerfLogger("cs.assistant.openTime",1),alertManagerError:this._sendException({logger:"cs.assistant.alertManagerError",level:ft.ERROR})},this.sharedAssistant={open:(e,t)=>{this._sendFemetricsRate("sharedAssistant.open",{domain:e,isIframe:t})}},this.proofit={availabilityQuotaError:e=>{this._sendEvent({logger:"cs.proofit.availability_quota_error",level:ft.ERROR,extra:{json:JSON.stringify(e)}})},submitResponseError:e=>{this._sendEvent({logger:"cs.proofit.submit_response_error",level:ft.ERROR,extra:{json:JSON.stringify(e)}})},progressError:e=>{this._sendEvent({logger:"cs.proofit.progress_error",level:ft.ERROR,extra:{json:JSON.stringify(e)}})},progressRejected:e=>{this._sendEvent({logger:"cs.proofit.progress_rejected",level:ft.WARN,extra:{json:JSON.stringify(e)}})}},this.oauthExchangeError=e=>{this._send("bg.oauth.exchange.error",ft.ERROR,{message:e})},this.iterable={sideEffectGetIterableClientAccessToken:(e,t,n)=>{this._sendFemetricsRate("sideEffectGetIterableClientAccessToken",{status:e,type:t,statusCode:n})},refreshIterableClientAccessToken:(e,t)=>{this._sendFemetricsRate("refreshIterableClientAccessToken",{status:e,statusCode:t})},iterableClientAccessTokenIsNull:()=>{this._sendFemetricsRate("iterableClientAccessTokenIsNull")},iterableGetIPMByTrigger:e=>{this._sendFemetricsRate("iterableGetIPMByTrigger",{trigger:e})},iterableGetIPM:(e,t,n)=>{this._sendFemetricsRate("iterableGetIPM",{status:e,statusCode:t,retryCount:n})},iterableIPMOpen:(e,t,n,r)=>{this._sendFemetricsRate("iterableIPMOpen",{status:e,statusCode:t,retryCount:n,campaignId:r})},iterableIPMDelete:(e,t,n,r,i)=>{this._sendFemetricsRate("iterableIPMDelete",{status:e,action:t,statusCode:n,retryCount:r,campaignId:i})},iterableIPMExpired:e=>{this._sendFemetricsRate("iterableIPMExpired",{campaignId:e})},iterableIPMClick:(e,t,n,r)=>{this._sendFemetricsRate("iterableIPMClick",{status:e,statusCode:t,retryCount:n,campaignId:r})},iterableIPMClose:(e,t,n,r,i)=>{this._sendFemetricsRate("iterableIPMClose",{status:e,action:t,statusCode:n,retryCount:r,campaignId:i})},iterableCustomEvent:(e,t,n,r)=>{this._sendFemetricsRate("iterableCustomEvent",{status:e,statusCode:t,retryCount:n,campaignId:r})},iterableUserUpdate:(e,t,n)=>{this._sendFemetricsRate("iterableUserUpdate",{status:e,statusCode:t,retryCount:n})},iterableIPMFailed:e=>{this._sendFemetricsRate("iterableIPMFailed",{reason:e})},iterableIPMTrigger:(e,t,n)=>{this._sendFemetricsRate("iterableIPMTrigger",{trigger:e,isTriggerEnabled:t,isTriggerAfterRateLimit:n})},iterableIPMCooldown:e=>{this._sendFemetricsRate("iterableIPMCooldown",{campaignId:e})},iterableIPMGlobalCooldown:()=>{this._sendFemetricsRate("iterableIPMGlobalCooldown")},iterableIPMImageLoadingError:e=>{this._sendFemetricsRate("iterableIPMImageLoadingError",{campaignId:e})},iterableIPMNoMatchingMessages:(e,t)=>{this._sendFemetricsRate("iterableIPMNoMatchingMessages",{trigger:e,pendingMessageCount:t})},iterableIPMHide:e=>{this._sendFemetricsRate("iterableIPMHide",{reason:e})},logIterableApi:e=>{this._sendEvent({logger:"bg.iterable.api",level:ft.WARN,extra:{json:e},sendToFemetrics:!1})}},this.mise={getIterableAccessToken:(e,t)=>{this._sendFemetricsRate("getIterableClientAccessToken",{status:e,statusCode:t})},logMISeApi:e=>{this._sendEvent({logger:"bg.mise.api",level:ft.WARN,extra:{json:e},sendToFemetrics:!0})}},this.alerts={inconsistentAlertWithText:(e,t)=>{this._sendFemetricsRate("inconsistentAlertWithText",{context:e,source:t})},cannotShowInlineCard:(e,t)=>{this._sendFemetricsRate("cannotShowInlineCard",{context:e,domain:xt(t)})},showInlineCard:e=>{this._sendFemetricsRate("showInlineCard",{domain:xt(e)})}},this.authHooks={authHookShown:e=>{this._sendFemetricsRate("authHookShow",e)},authHookClick:e=>{this._sendFemetricsRate("authHookClick",e)}},this.upgradeHooks={showUpgradeHook:(e,t,n)=>{this._sendFemetricsRate("showPremiumButton",{upgradeHookName:e,upgradeHookSlot:t,upgradeHookVariant:n})},clickUpgradeHook:(e,t,n)=>{this._sendFemetricsRate("clickPremiumButton",{upgradeHookName:e,upgradeHookSlot:t,upgradeHookVariant:n})}},this.sdui={inlineItemNotFound:()=>{this._sendFemetricsRate("sduiInlineItemNotFound",void 0,["os","browserName"])},renderSduiInlineCard:()=>{this._sendFemetricsRate("renderSduiInlineCard",void 0,["os","browserName"])},renderCommonInlineCard:e=>{this._sendFemetricsRate("renderCommonInlineCard",e,["os","browserName"])}},this.sendToTabFailed=(e,t)=>{this._sendSampledEvent(Nt,{logger:"bg.connection.sendToTabFailed",level:ft.ERROR,message:"send message to tab emit an error",extra:Qe(e,t)})},this.noActiveTabId=e=>{this._sendFemetricsRate("simpleTransportNoActiveTabId",{message:e})},this.noTabId=e=>{this._sendFemetricsRate("simpleTransportNoTabId",{message:e})},this.debugReports={downloadSuccessfully:(e,t)=>{const n="debugReports.downloadSuccessfully",r=Ft(n,{envContext:e,downloadEnvContext:t});this._sendEvent({logger:n,level:ft.INFO,extra:{json:r},sendToFemetrics:!0})},downloadTimeout:(e,t)=>{const n="debugReports.downloadTimeout",r=Ft(n,{envContext:e,downloadEnvContext:t});this._sendEvent({logger:n,level:ft.WARN,extra:{json:r},sendToFemetrics:!0})},downloadError:(e,t)=>{const n="debugReports.downloadError",r=Ft(n,{envContext:e,downloadEnvContext:t});this._sendEvent({logger:n,level:ft.WARN,extra:{json:r},sendToFemetrics:!0})}},this.dialectSettingsError=e=>{this._sendException({logger:"bg.api.dialectService",level:ft.ERROR})(e)},this.debugSelectiveLogoutGate=()=>{this._sendEvent({logger:"bg.user.debugSelectiveLogoutGate",level:ft.INFO})},this.logoutSuccess=e=>{this._sendEvent({logger:"bg.user.logoutSuccess",level:ft.INFO,extra:{json:JSON.stringify({reason:e})}})},this.logoutError=e=>{this._sendException({logger:"bg.user.logout",level:ft.ERROR})(e)},this.logoutLastAuthnEventError=e=>{this._sendException({logger:"bg.user.logout.lastAuthnEvent",level:ft.ERROR})(e)},this.serializeTransportMsgFailed=()=>{this._sendFemetricsRate("error",{logger:"bg.serialize.transport.message.failed",level:ft.ERROR,message:"Failed to serialize rpc message"})},this.hiddenFieldInjectionFailed=()=>{this._sendFemetricsRate("error",{logger:"cs.hiddenField.injection.failed",level:ft.ERROR,domain:xt()})},this.skipIntegrationForNonHtmlPage=()=>{this._sendFemetricsRate("info",{logger:"cs.skip.integration.for.non.html.page",domain:qt(self.location.hostname)})},this.backendManagedStorage={error:(e,t)=>{this._sendException({logger:"bg.backendManagedStorage",level:ft.ERROR})(t,void 0,e)},warn:(e,t)=>{const n=Ft("backendManagedStorage.warn",t);this._sendEvent({logger:"bg.backendManagedStorage",level:ft.WARN,message:e,extra:{json:n}})},info:e=>{this._sendEvent({logger:"bg.backendManagedStorage",level:ft.INFO,message:e})}},this.cookiesAccessibility={enabled:()=>{this.sendFemetricsRate("cookiesAccessibility",{enabled:!0},["os","osVersion","userOrganizationType"])},disabled:(e,t)=>{this.sendFemetricsRate("cookiesAccessibility",{enabled:!1,reason:e},["os","osVersion","userOrganizationType"]),t&&this._sendEvent({logger:"bg.cookiesInaccessibile",level:ft.ERROR,message:t})}},this.replacement={info:e=>{this.sendFemetricsRate("replacementInfo",e,["os","userOrganizationType"])},infoShort:e=>{this.sendFemetricsRate("replacementInfoShort",e)},infoShortExtended:e=>{this.sendFemetricsRate("replacementInfoShortExtended",e)},approximateMatched:e=>{this.sendFemetricsRate("replacementInfo.approximateMatched",e)},format:{short:e=>{this.sendFemetricsRate("replacementInfo.format.short",e)},alert:e=>{this.sendFemetricsRate("replacementInfo.format.alert",e)},style:e=>{this.sendFemetricsRate("replacementInfo.format.style",e)},hyperlinks:e=>{this.sendFemetricsRate("replacementInfo.format.hyperlinks",e)},smartChips:e=>{this.sendFemetricsRate("replacementInfo.format.smartChips",e)},footnotes:e=>{this.sendFemetricsRate("replacementInfo.format.footnotes",e)}},gOSInfo:e=>{this.sendFemetricsRate("replacementInfo.gOS",e)},gdocs:(e,t)=>{this.sendFemetricsRate("replacementInfo.gdocs",e,["os"]);for(const[n,r]of t)this.sendFemetricsRate(`replacementInfo.gdocs.byGate.${n}`,{...e,enabled:r},["os"])},gdocsByFeatures:({injectedFeatures:e,...t})=>{this.sendFemetricsRate("replacementInfo.gdocs.advanced.byFeatures",{...t,...Ht(e),hasLayout:void 0},["os"])},contentEditable:e=>{this.sendFemetricsRate("replacementInfo.contentEditable",e)},sessionCount:e=>{this.sendFemetricsRate("replacementSessionCount",e)},sessionStats:e=>{this.sendFemetricsRate("replacementSessionStats",e)},sessionStatsBySource:e=>{this.sendFemetricsRate("replacementSessionStatsBySource",e)},sessionStatsByReplacementType:e=>{this.sendFemetricsRate("replacementSessionStatsByReplacementType",e)},alert:e=>{this.sendFemetricsRate("replacementInfo.alert",e)},alertExtended:e=>{this.sendFemetricsRate("replacementInfo.alertExtended",e)},alertFailedLevenshteinDistance:e=>{this.sendFemetricsRate("replacementLevenshteinDistance",e)}},this.gOS={info:(e,t,n)=>{this._sendEvent({logger:`gOS.${e}`,level:ft.INFO,message:t,extra:n})},warn:(e,t,n)=>{this._sendEvent({logger:`gOS.${e}`,level:ft.WARN,message:t,extra:n})},error:(e,t,n)=>{this._sendEvent({logger:`gOS.${e}`,level:ft.ERROR,message:t,extra:Qe(n)})}},this.inkwell={logLaunchInkwellErrorOnce:(0,h.hz)(this._sendException({logger:"inkwell.launchInkwellError",level:ft.ERROR})),logConnectDocumentErrorOnce:(0,h.hz)(this._sendException({logger:"inkwell.connectDocumentError",level:ft.ERROR})),logInkwellIntegrationErrorOnce:(0,h.hz)(this._sendException({logger:"inkwell.inkwellIntegrationError",level:ft.ERROR})),launchInkwellSuccess:()=>{this._sendFemetricsRate("inkwell.launchInkwellSuccess")},launchInkwellError:e=>{this._sendFemetricsRate("inkwell.launchInkwellError",{message:e.message}),this.inkwell.logLaunchInkwellErrorOnce(e)},inkwellIntegrationError:e=>{this._sendFemetricsRate("inkwell.inkwellIntegrationError",{message:e.message}),this.inkwell.logLaunchInkwellErrorOnce(e)},connectDocumentSuccess:()=>{this._sendFemetricsRate("inkwell.connectDocumentSuccess")},connectDocumentError:e=>{this._sendFemetricsRate("inkwell.connectDocumentError",{message:e.message}),this.inkwell.logConnectDocumentErrorOnce(e)},gotGetDocumentTextRequest:(0,h.HO)((e=>this._sendFemetricsRate("inkwell.gotGetDocumentTextRequest")),(e=>e))},this.auth={manageModeTimeoutFail:e=>{this._sendFemetricsRate("auth.manageModeTimeoutFail",{message:e})}},this.connector={connected:()=>{this._sendFemetricsRate("connector.connected")},disconnected:e=>{this._sendFemetricsRate("connector.disconnected",{message:e})},connectionFailed:e=>{this._sendFemetricsRate("connector.connectionFailed",{message:e})},checkConnectionFailed:e=>{this._sendFemetricsRate("connector.checkConnectionFailed",{message:e})},handshakeFailed:e=>{this._sendFemetricsRate("connector.handshakeFailed",{message:e})},textFieldIntegrated:(e,t)=>{this._sendFemetricsRate("connector.textFieldIntegrated",{domain:e,integrationName:t})},permissionViewShow:e=>{this._sendFemetricsRate("connector.permissionViewShow",{placement:e})},permissionViewClicked:e=>{this._sendFemetricsRate("connector.permissionViewClicked",{placement:e})},permissionViewClosed:e=>{this._sendFemetricsRate("connector.permissionViewClosed",{placement:e})},permissionPromptAccepted:e=>{this._sendFemetricsRate("connector.permissionPromptAccepted",{placement:e})},permissionPromptDenied:e=>{this._sendFemetricsRate("connector.permissionPromptDenied",{placement:e})},permissionPromptFailed:(e,t)=>{this._sendFemetricsRate("connector.permissionPromptFailed",{placement:e,message:t})}},this.serviceAvailability={viewDuration:(e,t)=>{this._sendFemetricsRate("serviceAvailabilityV2.viewDuration",e,["os"],t)},totalViewDuration:(e,t)=>{this._sendFemetricsRate("serviceAvailabilityV2.totalViewDuration",e,["os"],t)},typingDuration:(e,t)=>{const n=W((e=>!dt.has(e)),e);this._sendFemetricsRate("serviceAvailabilityV2.typingDuration",n,["os"],t),this._sendFemetricsRate("serviceAvailabilityV2.typingDuration.extended",e,["os"],t)},totalTypingDuration:(e,t)=>{this._sendFemetricsRate("serviceAvailabilityV2.totalTypingDuration",e,["os"],t)},typingLength:(e,t)=>{const n=W((e=>!dt.has(e)),e);this._sendFemetricsRate("serviceAvailabilityV2.typingLength",n,["os"],t),this._sendFemetricsRate("serviceAvailabilityV2.typingLength.extended",e,["os"],t)},totalTypingLength:(e,t)=>{this._sendFemetricsRate("serviceAvailabilityV2.totalTypingLength",e,["os"],t)},amountOfViewedDomains:e=>{this._sendFemetricsRate("serviceAvailabilityV2.amountOfViewedDomains",{bucket:e},["os"],void 0)},amountOfTypedDomains:e=>{this._sendFemetricsRate("serviceAvailabilityV2.amountOfTypedDomains",{bucket:e},["os"],void 0)}},this.treatments={getTreatmentsFromCacheFail:(e,t)=>this._sendEvent({logger:"bg.treatmentStorageManager",message:"Failed to get treatments from cache",level:ft.ERROR,extra:{exception:e,json:JSON.stringify({storageKey:t})}}),getTreatmentsFromServerFail:(e,t)=>this._sendEvent({logger:"bg.treatmentStorageManager",message:"Failed to get treatments from server",level:ft.ERROR,extra:{exception:e,json:JSON.stringify({storageKey:t})}}),getFallbackTreatmentsSuccess:(e,t)=>this._sendEvent({logger:"bg.treatmentStorageManager",message:"Successfully received fallback treatments",level:ft.INFO,extra:{json:JSON.stringify({treatments:e,storageKey:t})}}),getFallbackTreatmentsFail:(e,t)=>this._sendEvent({logger:"bg.treatmentStorageManager",message:"Failed to get fallback treatments",level:ft.ERROR,extra:{exception:e,json:JSON.stringify({storageKey:t})}})},this.pageIntegrationLifecycle=e=>{this._sendFemetricsRate("pageIntegrationLifecycle",e,["os","userOrganizationType"])},this.interactionToNextPaint=(e,t)=>{this._sendFemetricsTimer("interactionToNextPaint",e,"histogram",t)}}_send(e,t,n){const r=Ft(e,n);try{this._sendFelog(e,String(null==n?void 0:n.message),t,n?{json:r}:void 0)}catch(t){Rt.warn(`Failed to send felog for ${e}: '${Ye(t)?t.message:"undefined"}'`,t)}}_sendUsage(e,t,n){if(this._sendUsageMetrics&&this._sendUsageMetricsSamplingRatio>Math.random())try{this._sendFelogUsage(e,"",t,n)}catch(t){Rt.warn(`Failed to send usage felog for ${e}: '${Ye(t)?t.message:"undefined"}'`,t)}}_sendSampled(e,t,n,r){e>Math.random()&&this._send(t,n,r)}_sendSampledEvent(e,t){e>Math.random()&&this._sendEvent(t)}_sendMetric(e,t){this._sendFelogMetricEvent({metricName:e,data:t})}sendCrashLogs(e,t){try{this._sendFelogCrashLogs(t)}catch(t){Rt.warn(`Failed to send crash data data for ${e}: '${Ye(t)?t.message:"undefined"}'`,t)}}setUserInfo(e){this._setUserInfo(e)}setContainerId(e){this._setContainerId(e)}enableDataSharing(){this._enableDataSharing()}notificationShown(e){this._send("cs.notification.show",ft.INFO,{type:e})}notificationHide(e){this._send("cs.notification.hide",ft.INFO,{type:e})}}var Gt,Bt;function zt(e){return e?"Failed to fetch"===e?Gt.FAILED_FETCH:"Could not establish connection. Receiving end does not exist."===e||e.includes("No frame with id")||e.includes("No tab with id")||e.startsWith("Frame with ID")&&e.endsWith("was removed.")?Gt.TAB_NOT_EXISTS:e.startsWith("IO error:")?Gt.IO_ERROR:"The browser is shutting down."===e?Gt.BROWSER_SHUTTING_DOWN:"No available storage method found."===e?Gt.NO_STORAGE_METHOD_FOUND:"this._firefox is undefined"===e?Gt.FIREFOX_UNDEFINED:"Load failed"===e?Gt.LOAD_FAILED:"Unexpected user type for login reminder"===e?Gt.UNEXPECTED_USER_TYPE:Gt.OTHER:Gt.EMPTY}function Vt(e){return e?e.includes("executing a cancelled action")?Bt.ACTION_CANCELED:"Script error."===e?Bt.SCRIPT_ERROR:"object unsubscribed"===e?Bt.OBJECT_UNSUBSCRIBED:e.includes("is not a function")?Bt.INVALID_FUNCTION:Bt.OTHER:Bt.EMPTY}function qt(e){const t=t=>e.endsWith(t),n=xt(e);if("other"===n){const e=["pubmatic.com","quantumdex.io","gumgum.com","aniview.com","amazon-adsystem","nextmillmedia.com","doubleclick.net","adsrvr.org","adnxs.com","msn.com"].find(t);if(e)return e}return n}function Ht(e){return{strikethrough:e.useStrikethroughFiltering,codeBlocks:e.useCodeBlockFiltering}}function Wt(e,t,n){return{error:(r,i,o)=>t({context:e,level:ft.ERROR,message:r,domain:n,error:i,data:o}),warn:(r,i,o)=>t({context:e,level:ft.WARN,message:r,domain:n,error:i,data:o}),info:(r,i)=>t({context:e,level:ft.INFO,message:r,domain:n,data:i})}}!function(e){let t;!function(e){e.fromPartial=e=>e}(t=e.Mock||(e.Mock={}))}(Lt||(Lt={})),function(e){e.FAILED_FETCH="FailedToFetch",e.TAB_NOT_EXISTS="TabNotExists",e.IO_ERROR="IOError",e.BROWSER_SHUTTING_DOWN="BrowserShuttingDown",e.FIREFOX_UNDEFINED="FirefoxUndefined",e.LOAD_FAILED="LoadFailed",e.UNEXPECTED_USER_TYPE="UnexpectedUserType",e.NO_STORAGE_METHOD_FOUND="NoStorageMethodFound",e.EMPTY="Empty",e.OTHER="Other"}(Gt||(Gt={})),function(e){e.ACTION_CANCELED="ActionCanceled",e.SCRIPT_ERROR="ScriptError",e.OBJECT_UNSUBSCRIBED="ObjectUnsubscribed",e.INVALID_FUNCTION="InValidFunction",e.EMPTY="Empty",e.OTHER="Other"}(Bt||(Bt={}));const $t=q.create("lib.tracking.logger");let Xt;function Kt(){if(!Xt){const e=de().telemetryCallProvider;Xt=new Lt(e.sendFelog,e.sendFelogUsageEvent,e.setUserInfo,e.setContainerId,N().appConfig.felog.sendUsageMetrics,function(){N().appConfig.felog.sendPerfMetricsType,0;return}(),e.sendFelogEvent,e.sendFelogCrashLogs,void 0,(()=>{var t;return null===(t=e.enableDataSharing)||void 0===t?void 0:t.call(e)}),void 0,e.sendFelogMetricEvent,e.sendFemetricsRate,e.startFemetricsTimer,e.endFemetricsTimer,e.sendFemetricsTimer)}return Xt}function Yt(){if(Ge()){$t.info("Installing unhandled error loggers...");const r=Kt();e=self,t=(e,t)=>r.unhandledExceptions.unhandledBgPageException(e,t),n=(e,t)=>r.unhandledExceptions.unhandledBgPageRejection(e,t),e.addEventListener("error",(e=>{const n=Ye(e.error)&&e.error.message?e.error.message:e.message,r=Qe({message:n,filename:e.filename,lineno:e.lineno,colno:e.colno},e.error);t(n,r)})),e.addEventListener("unhandledrejection",(e=>{let t;t=null!==e.reason?"string"==typeof e.reason?e.reason:Ye(e.reason)?e.reason.message:void 0:void 0;const r=Qe({message:t},e.reason);n(t,r)}))}var e,t,n}class Zt{constructor(e=Kt()){this._felog=e}recordEvent(e,t,n){this._felog.sendFemetricsRate(e,{...t,value:null==n?void 0:n.toString()})}recordLatency(e,t,n){this._felog.sendFemetricsTimer(e,t,"histogram",n)}recordError(e,t,n){this._felog.sendFemetricsRate(`${e}.error`,{...n,message:t.message.substring(0,100),errorType:t.name})}}var Jt=function(e,t){return Jt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Jt(e,t)};function Qt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Jt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var en,tn,nn=function(){return nn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},nn.apply(this,arguments)};function rn(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}function on(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}function sn(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}"function"==typeof SuppressedError&&SuppressedError,function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.HTTP_EXCEPTION=1]="HTTP_EXCEPTION",e[e.INVALID_STATE=2]="INVALID_STATE",e[e.LOCK_TIMEOUT=3]="LOCK_TIMEOUT",e[e.STORAGE_CACHE_SET_ERROR=4]="STORAGE_CACHE_SET_ERROR",e[e.STORAGE_CACHE_REMOVE_ERROR=5]="STORAGE_CACHE_REMOVE_ERROR"}(tn||(tn={}));var an,cn=((en={})[tn.UNKNOWN]="Unknown error",en[tn.HTTP_EXCEPTION]="HTTP Exception",en[tn.INVALID_STATE]="Invalid State",en[tn.LOCK_TIMEOUT]="Lock Timeout",en[tn.STORAGE_CACHE_SET_ERROR]="Error storing tokens",en[tn.STORAGE_CACHE_REMOVE_ERROR]="Error removing tokens",en),ln=function(e){function t(n,r){void 0===n&&(n=tn.UNKNOWN),void 0===r&&(r=cn[n]);var i=e.call(this,r)||this;return i.code=n,Object.setPrototypeOf(i,t.prototype),i}return Qt(t,e),t.codes=tn,t}(Error);!function(e){e.INVALID_AUTHORIZATION_CODE="Invalid authorization code",e.INVALID_CLIENT_TYPE="Invalid client type",e.INVALID_CODE_VERIFIER="Invalid code verifier",e.INVALID_ORIGIN="Invalid origin",e.INVALID_PUBLIC_KEY="Invalid public key",e.INVALID_REDIRECT_URI="Invalid redirect uri",e.INVALID_SCOPE="Invalid scope",e.INVALID_GRANT_TYPE="Invalid grant type",e.INVALID_REFRESH_TOKEN="Invalid refresh token",e.ACCESS_DENIED="Access is denied",e.INVALID_CLIENT="Invalid client",e.REVOKE_ERROR="Revoke error",e.NOT_ENABLED="Oauth not enabled",e.NOT_IMPLEMENTED="Not implemented"}(an||(an={}));var un=function(e){function t(n,r,i){void 0===r&&(r="unknown");var o=e.call(this,ln.codes.HTTP_EXCEPTION,i)||this;return o.serverCode=r,o.response=n,Object.setPrototypeOf(o,t.prototype),o}return Qt(t,e),Object.defineProperty(t.prototype,"status",{get:function(){return this.response.status},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"statusText",{get:function(){return this.response.statusText},enumerable:!1,configurable:!0}),t}(ln),dn="grammarly.lock.getAccessToken";function hn(e,t){return void 0===t&&(t=3),rn(this,void 0,void 0,(function(){var n;return on(this,(function(r){switch(r.label){case 0:n=0,r.label=1;case 1:return n<t?[4,e()]:[3,4];case 2:if(r.sent())return[2,!0];r.label=3;case 3:return n++,[3,1];case 4:return[2,!1]}}))}))}function pn(e){var t,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_~.",r="";if("undefined"==typeof crypto||void 0===crypto.getRandomValues){t=new Uint8Array(e);for(var i=0;i<e;++i)t[i]=65535*Math.random()|0}else t=crypto.getRandomValues(new Uint8Array(e));return Array.from(t).forEach((function(e){return r+=n[e%n.length]})),r}var gn=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function fn(e,t,n,r,i){for(var o,s,a,c,l,u,d,h,p,g,f,m,b;i>=64;){for(o=t[0],s=t[1],a=t[2],c=t[3],l=t[4],u=t[5],d=t[6],h=t[7],g=0;g<16;g++)f=r+4*g,e[g]=(255&n[f])<<24|(255&n[f+1])<<16|(255&n[f+2])<<8|255&n[f+3];for(g=16;g<64;g++)m=((p=e[g-2])>>>17|p<<15)^(p>>>19|p<<13)^p>>>10,b=((p=e[g-15])>>>7|p<<25)^(p>>>18|p<<14)^p>>>3,e[g]=(m+e[g-7]|0)+(b+e[g-16]|0);for(g=0;g<64;g++)m=(((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))+(l&u^~l&d)|0)+(h+(gn[g]+e[g]|0)|0)|0,b=((o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10))+(o&s^o&a^s&a)|0,h=d,d=u,u=l,l=c+m|0,c=a,a=s,s=o,o=m+b|0;t[0]+=o,t[1]+=s,t[2]+=a,t[3]+=c,t[4]+=l,t[5]+=u,t[6]+=d,t[7]+=h,r+=64,i-=64}return r}var mn,bn=function(){function e(){this.digestLength=32,this.blockSize=64,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}return e.prototype.reset=function(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this},e.prototype.clean=function(){for(var e=0;e<this.buffer.length;e++)this.buffer[e]=0;for(e=0;e<this.temp.length;e++)this.temp[e]=0;this.reset()},e.prototype.update=function(e,t){if(void 0===t&&(t=e.length),this.finished)throw new Error("SHA256: can't update because hash was finished.");var n=0;if(this.bytesHashed+=t,this.bufferLength>0){for(;this.bufferLength<64&&t>0;)this.buffer[this.bufferLength++]=e[n++],t--;64===this.bufferLength&&(fn(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(t>=64&&(n=fn(this.temp,this.state,e,n,t),t%=64);t>0;)this.buffer[this.bufferLength++]=e[n++],t--;return this},e.prototype.finish=function(e){if(!this.finished){var t=this.bytesHashed,n=this.bufferLength,r=t/536870912|0,i=t<<3,o=t%64<56?64:128;this.buffer[n]=128;for(var s=n+1;s<o-8;s++)this.buffer[s]=0;this.buffer[o-8]=r>>>24&255,this.buffer[o-7]=r>>>16&255,this.buffer[o-6]=r>>>8&255,this.buffer[o-5]=r>>>0&255,this.buffer[o-4]=i>>>24&255,this.buffer[o-3]=i>>>16&255,this.buffer[o-2]=i>>>8&255,this.buffer[o-1]=i>>>0&255,fn(this.temp,this.state,this.buffer,0,o),this.finished=!0}for(s=0;s<8;s++)e[4*s+0]=this.state[s]>>>24&255,e[4*s+1]=this.state[s]>>>16&255,e[4*s+2]=this.state[s]>>>8&255,e[4*s+3]=this.state[s]>>>0&255;return this},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype._saveState=function(e){for(var t=0;t<this.state.length;t++)e[t]=this.state[t]},e.prototype._restoreState=function(e,t){for(var n=0;n<this.state.length;n++)this.state[n]=e[n];this.bytesHashed=t,this.finished=!1,this.bufferLength=0},e}();function yn(e){var t=(new bn).update(e),n=t.digest();return t.clean(),n}function _n(e){return function(e){try{return btoa(e)}catch(t){return Buffer.from(e,"binary").toString("base64")}}(function(e){return String.fromCharCode.apply(null,Array.from(new Uint8Array(e)))}(e)).replace(/[=]+$/,"").replace(/[+]/g,"-").replace(/[/]/g,"_")}function vn(e){return rn(this,void 0,void 0,(function(){var t;return on(this,(function(n){switch(n.label){case 0:return t=function(e){try{return(new TextEncoder).encode(e)}catch(t){return new Uint8Array(Buffer.from(e,"utf8"))}}(e),"undefined"==typeof crypto||void 0===crypto.subtle?[2,yn(t)]:[4,crypto.subtle.digest("SHA-256",t)];case 1:return[2,n.sent()]}}))}))}function wn(){return rn(this,void 0,void 0,(function(){var e,t,n,r;return on(this,(function(i){switch(i.label){case 0:return e=pn(43),n=_n,[4,vn(e)];case 1:return t=n.apply(void 0,[i.sent()]),r=new Date,[2,{codeVerifier:e,codeChallenge:t,createdAt:r}]}}))}))}function Sn(e){return void 0===e&&(e=0),rn(this,void 0,void 0,(function(){return on(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t){return setTimeout(t,e)}))];case 1:return t.sent(),[2]}}))}))}!function(e){e[e.BAD_REQUEST=400]="BAD_REQUEST",e[e.UNAUTHORIZED=401]="UNAUTHORIZED",e[e.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",e[e.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR"}(mn||(mn={}));var kn;function In(e){var t=Math.floor(100*Math.pow(2,e));return Math.floor(Math.random()*(t-100+1))+100}function Cn(e){return rn(this,void 0,void 0,(function(){var t,n,r,i,o,s,a,c,l=this;return on(this,(function(u){switch(u.label){case 0:t=nn({backoffFn:function(e){var t=e.tryNo;return rn(l,void 0,void 0,(function(){return on(this,(function(e){switch(e.label){case 0:return[4,Sn(Math.round(In(t)))];case 1:return e.sent(),[2]}}))}))},maxRetries:10},e),n=0,r=!1,i=null,o=null,s=Date.now(),a=function(){r=!0},u.label=1;case 1:if(!(n<=t.maxRetries))return[3,8];u.label=2;case 2:return u.trys.push([2,4,,7]),[4,t.fn({tryNo:n,startedAt:s,abort:a})];case 3:return[2,{result:o=u.sent(),error:null}];case 4:return c=u.sent(),i=c,++n,r?[3,8]:n<=t.maxRetries?[4,t.backoffFn({tryNo:n,startedAt:s,abort:a})]:[3,6];case 5:u.sent(),u.label=6;case 6:return[3,7];case 7:return[3,1];case 8:return[2,{error:i,result:o}]}}))}))}function En(e){return rn(this,void 0,void 0,(function(){var t=this;return on(this,(function(n){switch(n.label){case 0:return[4,Cn({maxRetries:1,fn:function(n){return rn(t,void 0,void 0,(function(){var t;return on(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e(n)];case 1:return[2,r.sent()];case 2:throw(t=r.sent())instanceof un&&(i=t.status)>=mn.BAD_REQUEST&&i<mn.INTERNAL_SERVER_ERROR&&t.status!==mn.TOO_MANY_REQUESTS&&n.abort(),t;case 3:return[2]}var i}))}))}})];case 1:return[2,n.sent()]}}))}))}!function(e){e.APPLICATION_JSON="application/json"}(kn||(kn={}));var An=function(){function e(e,t){this._fetch=e,this._config=t}return e.prototype.get=function(e){return rn(this,void 0,void 0,(function(){var t,n,r,i,o,s=this;return on(this,(function(a){switch(a.label){case 0:return[4,this._getHeaders()];case 1:return t=a.sent(),n=function(){return rn(s,void 0,void 0,(function(){var n;return on(this,(function(r){switch(r.label){case 0:return[4,this._fetchWithTimeout(e,{credentials:"include",mode:"cors",headers:t})];case 1:return n=r.sent(),[2,this._parseResponse(e,n)]}}))}))},[4,En(n)];case 2:if(r=a.sent(),i=r.result,o=r.error,null!=i)return[2,i];if(null!=o)throw o;throw new Error("Unexpected HttpClient error")}}))}))},e.prototype.post=function(e,t){return rn(this,void 0,void 0,(function(){var n,r,i,o,s,a=this;return on(this,(function(c){switch(c.label){case 0:return[4,this._getHeaders()];case 1:return n=c.sent(),r=function(){return rn(a,void 0,void 0,(function(){var r;return on(this,(function(i){switch(i.label){case 0:return[4,this._fetchWithTimeout(e,{method:"post",credentials:"include",mode:"cors",headers:nn(nn({},n),{"Content-Type":kn.APPLICATION_JSON}),body:JSON.stringify(t)})];case 1:return r=i.sent(),[2,this._parseResponse(e,r)]}}))}))},[4,En(r)];case 2:if(i=c.sent(),o=i.result,s=i.error,null!=o)return[2,o];if(null!=s)throw s;throw new Error("Unexpected HttpClient error")}}))}))},e.prototype._fetchWithTimeout=function(e,t){return void 0===t&&(t={}),rn(this,void 0,void 0,(function(){var n,r=this;return on(this,(function(i){return n=this._fetch(e,t),this._config.timeout?[2,Promise.race([n,new Promise((function(e,t){return setTimeout((function(){return t(new Error("Fetch Timeout"))}),r._config.timeout)}))])]:[2,n]}))}))},e.prototype._getHeaders=function(){return rn(this,void 0,void 0,(function(){return on(this,(function(e){switch(e.label){case 0:return this._config.applicationHeaders?[2,this._config.applicationHeaders]:this._config.getApplicationHeaders?[4,this._config.getApplicationHeaders()]:[3,2];case 1:return[2,e.sent()];case 2:throw new Error("Cannot get application headers")}}))}))},e.prototype._parseResponse=function(e,t){return rn(this,void 0,void 0,(function(){var n,r;return on(this,(function(i){switch(i.label){case 0:if(t.status>=mn.INTERNAL_SERVER_ERROR)throw new un(t,"unknown","HTTP server error ".concat(t.status,". Unable to fetch ").concat(e));return[4,t.clone().json().catch((function(e){return{error:"unknown",message:e.message}}))];case 1:if(n=i.sent(),r=n.message||"HTTP error. Unable to fetch ".concat(e),!t.ok)throw new un(t,n.error,r);return[4,t.json()];case 2:return[2,i.sent()]}}))}))},e}(),xn=function(){function e(e,t,n){this._tokensUrl=e,this._httpClient=new An(t,n)}return e.prototype.getTokens=function(e){return this._httpClient.post(this._tokensUrl+"/oauth2/token",e)},e.prototype.exchangeTokens=function(e){return this._httpClient.post(this._tokensUrl+"/oauth2/exchange",e)},e}();function Tn(e){var t=e.tokensClient,n=e.clientId,r=e.grantType,i=e.codeVerifier,o=e.authorizationCode,s=e.refreshToken;return rn(this,void 0,void 0,(function(){var e;return on(this,(function(a){switch(e={client_id:n,grant_type:r},r){case"refresh_token":e=nn(nn({},e),{refresh_token:s});break;case"authorization_code":e=nn(nn({},e),{code_verifier:i,authorization_code:o});break;case"urn:ietf:params:oauth:grant-type:token-exchange":return e=nn(nn({},e),{subject_token_type:"urn:grammarly:params:oauth:token-type:grauth"}),[2,t.exchangeTokens(e)]}return[2,t.getTokens(e)]}))}))}function On(e){if(e&&e.expires_at&&e.access_token&&e.refresh_token){var t=(new Date).getTime();return e.expires_at-t<=0?null:e}return null}function Pn(e){return{expires_at:(new Date).getTime()+1e3*e.expires_in,access_token:e.access_token,refresh_token:e.refresh_token,refresh_token_expires_at:(new Date).getTime()+1e3*e.refresh_token_expires_in}}function Rn(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function Dn(e){return void 0===e&&(e=0),rn(this,void 0,void 0,(function(){return on(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t){return setTimeout(t,e)}))];case 1:return t.sent(),[2]}}))}))}var Nn=Rn();function Un(e){return"".concat(Nn,":").concat(e,":").concat(Math.floor(1e6*(1+Math.random())))}function Mn(){return Math.floor(1+9*Math.random())}function jn(e,t,n,r,i){return rn(this,void 0,void 0,(function(){function o(t){return rn(this,void 0,void 0,(function(){var n,i;return on(this,(function(o){switch(o.label){case 0:return[4,e.getItem(t)];case 1:return null==(n=o.sent())?[2,!1]:n===u?[2,!0]:(i=parseInt(String(n.split(":")[1]),10),[2,!Number.isFinite(i)||i+r<Date.now()])}}))}))}function s(){return rn(this,void 0,void 0,(function(){return on(this,(function(t){switch(t.label){case 0:return[4,o(c)];case 1:return t.sent()?[4,e.removeItem(c)]:[3,3];case 2:t.sent(),t.label=3;case 3:return[4,o(l)];case 4:return t.sent()?[4,e.removeItem(l)]:[3,6];case 5:t.sent(),t.label=6;case 6:return[2]}}))}))}var a,c,l,u,d;return on(this,(function(r){switch(r.label){case 0:a=Date.now(),c="".concat(t,"__$$MUTEX_x"),l="".concat(t,"__$$MUTEX_y"),u=Un(a),r.label=1;case 1:return[4,s()];case 2:if(r.sent(),Date.now()-a>n)throw new ln(ln.codes.LOCK_TIMEOUT,'"Mutex on '.concat(t," was not achieved in ").concat(n,"ms"));return[4,e.getItem(c)];case 3:return null==r.sent()?[3,5]:[4,Dn(Mn())];case 4:return r.sent(),[3,1];case 5:return[4,e.setItem(c,u)];case 6:return r.sent(),[4,e.getItem(l)];case 7:return null==r.sent()?[3,9]:[4,Dn(Mn())];case 8:return r.sent(),[3,1];case 9:return[4,e.setItem(l,u)];case 10:return r.sent(),[4,Dn(Mn())];case 11:return r.sent(),[4,e.getItem(c)];case 12:return r.sent()===u?[3,17]:[4,Dn(Mn())];case 13:return r.sent(),[4,e.getItem(l)];case 14:return r.sent()===u?[3,16]:[4,Dn(Mn())];case 15:r.sent(),r.label=16;case 16:return[3,1];case 17:return r.trys.push([17,,21,24]),d=Un(Date.now()),[4,e.setItem(c,d)];case 18:return r.sent(),[4,e.setItem(l,d)];case 19:return r.sent(),[4,i()];case 20:return r.sent(),[3,24];case 21:return[4,e.removeItem(c)];case 22:return r.sent(),[4,e.removeItem(l)];case 23:return r.sent(),[7];case 24:return[3,25];case 25:return[2]}}))}))}var Fn,Ln,Gn=function(){function e(e){this.locks=new Map,this.storage=e}return e.prototype.acquireLock=function(e){return rn(this,void 0,void 0,(function(){var t=this;return on(this,(function(n){return[2,new Promise((function(n){return rn(t,void 0,void 0,(function(){var t=this;return on(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,jn(this.storage,e,6e4,5e3,(function(){return rn(t,void 0,void 0,(function(){var t=this;return on(this,(function(r){switch(r.label){case 0:return[4,new Promise((function(r){t.locks.set(e,r),n(!0)}))];case 1:return r.sent(),[2]}}))}))}))];case 1:return r.sent(),[3,3];case 2:return r.sent(),n(!1),[3,3];case 3:return[2]}}))}))}))]}))}))},e.prototype.releaseLock=function(e){return rn(this,void 0,void 0,(function(){var t;return on(this,(function(n){return null!=(t=this.locks.get(e))&&t(),this.locks.delete(e),[2]}))}))},e}(),Bn=function(){function e(e,t){this._storage=e,this._storageKey=t}return e.prototype.set=function(e){return rn(this,void 0,void 0,(function(){return on(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this._storage.setItem(this._storageKey,JSON.stringify(e))];case 1:return t.sent(),[2,e];case 2:throw t.sent(),new ln(tn.STORAGE_CACHE_SET_ERROR);case 3:return[2]}}))}))},e.prototype.get=function(){return rn(this,void 0,void 0,(function(){var e;return on(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this._storage.getItem(this._storageKey)];case 1:return[2,(e=t.sent())?JSON.parse(e):null];case 2:return t.sent(),[2,null];case 3:return[2]}}))}))},e.prototype.remove=function(){return rn(this,void 0,void 0,(function(){return on(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this._storage.removeItem(this._storageKey)];case 1:return e.sent(),[3,3];case 2:throw e.sent(),new ln(tn.STORAGE_CACHE_REMOVE_ERROR);case 3:return[2]}}))}))},e}(),zn=function(){function e(){this.cache=new Map}return Object.defineProperty(e.prototype,"length",{get:function(){return this.cache.size},enumerable:!1,configurable:!0}),e.prototype.getItem=function(e){return this.cache.has(e)?this.cache.get(e):null},e.prototype.setItem=function(e,t){this.cache.set(e,String(t))},e.prototype.removeItem=function(e){this.cache.delete(e)},e.prototype.key=function(e){return function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([],sn(this.cache.keys()),!1)[e]||null},e.prototype.clear=function(){this.cache=new Map},e}(),Vn=function(){function e(e){var t;this._promiseMap=new Map,this._clientId=e.clientId,this._anonymousTokenClientType=e.anonymousTokenClientType,this._redirectUri=e.redirectUri,this._domain=(t=e.domain,/^https?:\/\//.test(t)?t:"https://".concat(t)),this._tokensClient=new xn(this._domain,e.fetch,e.httpClientOptions),this._storageKey=e.storageKey||"grammarly.".concat(this._clientId,".tokens"),this._storage=e.storage||new zn,this._lock=e.lock||new Gn(this._storage),this._cache=new Bn(this._storage,this._storageKey),this._tracking=e.tracking}return e.prototype._exchangeToken=function(e){var t=this,n=e.orAnonymous;return function(e){return Tn({tokensClient:e.tokensClient,clientId:e.clientId,grantType:"urn:ietf:params:oauth:grant-type:token-exchange"})}({tokensClient:this._tokensClient,clientId:this._clientId}).catch((function(e){if(!(e instanceof un))throw e;if(n&&e.status===mn.UNAUTHORIZED)return function(e){var t=e.tokensClient,n=e.clientId,r=e.clientType;return rn(this,void 0,void 0,(function(){return on(this,(function(e){switch(e.label){case 0:return[4,Tn({tokensClient:t,clientId:n,grantType:"Web"===r?"urn:ietf:params:oauth:grant-type:origin":"urn:ietf:params:oauth:grant-type:client_id"})];case 1:return[2,e.sent()]}}))}))}({tokensClient:t._tokensClient,clientId:t._clientId,clientType:t._anonymousTokenClientType});throw e}))},e.prototype._refresh=function(e,t){var n=this;return function(e){var t=e.tokensClient,n=e.clientId,r=e.refreshToken;return rn(this,void 0,void 0,(function(){return on(this,(function(e){switch(e.label){case 0:return[4,Tn({tokensClient:t,clientId:n,grantType:"refresh_token",refreshToken:r})];case 1:return[2,e.sent()]}}))}))}({tokensClient:this._tokensClient,clientId:this._clientId,refreshToken:e}).catch((function(e){if(e instanceof un&&e.status===mn.UNAUTHORIZED)return n._exchangeToken(t);throw e}))},e.prototype._getAccessToken=function(e){var t,n,r,i,o;return rn(this,void 0,void 0,(function(){var s,a,c,l,u,d,h,p=this;return on(this,(function(g){switch(g.label){case 0:return g.trys.push([0,19,,20]),(s=e.ignoreCache)?[3,2]:(a=On,[4,this._cache.get()]);case 1:if(l=a.apply(void 0,[g.sent()]))return[2,l.access_token];g.label=2;case 2:return[4,hn((function(){return p._lock.acquireLock(dn,5e3)}),10)];case 3:if(!g.sent())return[3,17];g.label=4;case 4:return g.trys.push([4,,14,16]),[4,this._cache.get()];case 5:return c=g.sent(),!s&&(l=On(c))?[2,l.access_token]:(u=void 0,!s&&c&&c.refresh_token?[3,7]:(null===(t=this._tracking)||void 0===t||t.getTokensAttemptWithoutRefreshToken(),[4,this._exchangeToken(e)]));case 6:return u=g.sent(),[3,9];case 7:return null===(n=this._tracking)||void 0===n||n.getTokensAttemptWithRefreshToken(),[4,this._refresh(c.refresh_token,e)];case 8:u=g.sent(),g.label=9;case 9:return[4,this._cache.set(Pn(u))];case 10:return!(d=g.sent())||On(d)?[3,13]:[4,this._refresh(d.refresh_token,e)];case 11:return u=g.sent(),[4,this._cache.set(Pn(u))];case 12:d=g.sent(),g.label=13;case 13:return null===(r=this._tracking)||void 0===r||r.getTokensSuccess(),[2,d.access_token];case 14:return[4,this._lock.releaseLock(dn)];case 15:return g.sent(),[7];case 16:return[3,18];case 17:throw null===(i=this._tracking)||void 0===i||i.lockTimeout(),new ln(tn.LOCK_TIMEOUT);case 18:return[3,20];case 19:throw h=g.sent(),null===(o=this._tracking)||void 0===o||o.getTokensFailure(h),h;case 20:return[2]}}))}))},e.prototype.getAccessToken=function(e){var t=this;void 0===e&&(e={orAnonymous:!1,ignoreCache:!1});var n="".concat(e.orAnonymous,"::").concat(e.ignoreCache),r=this._promiseMap.get(n);return r||(r=this._getAccessToken(e).finally((function(){t._promiseMap.delete(n),r=void 0})),this._promiseMap.set(n,r)),r},e.prototype.logout=function(){return rn(this,void 0,void 0,(function(){return on(this,(function(e){switch(e.label){case 0:return[4,this._cache.remove()];case 1:return e.sent(),[2]}}))}))},e}(),qn=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Qt(t,e)}(Vn),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Qt(t,e)}(Vn),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Qt(t,e)}(Vn),function(e){function t(n,r,i,o,s){var a=e.call(this,i)||this;return a.name="HttpError",a.status=n,a.errorType=r,a.message=i,a.url=o,a.method=s,Object.setPrototypeOf(a,t.prototype),a}return Qt(t,e),t}(Error)),Hn=function(e){function t(n,r,i){var o=e.call(this,n)||this;return o.name="FetchRequestError",o.url=r,o.method=i,Object.setPrototypeOf(o,t.prototype),o}return Qt(t,e),t}(Error),Wn=function(e){function t(n,r,i,o,s){var a=e.call(this,n,r,i,o,s)||this;return a.name="HttpClientError",Object.setPrototypeOf(a,t.prototype),a}return Qt(t,e),t}(qn),$n=function(e){function t(n,r,i,o,s){var a=e.call(this,n,r,i,o,s)||this;return a.name="HttpServerError",Object.setPrototypeOf(a,t.prototype),a}return Qt(t,e),t}(qn),Xn=function(e){function t(n,r,i,o){var s=e.call(this,401,n,r,i,o)||this;return s.name="HttpUnauthorizedError",Object.setPrototypeOf(s,t.prototype),s}return Qt(t,e),t}(qn),Kn=function(e){function t(n,r,i,o){var s=e.call(this,n,r,i,o)||this;return s.name="HttpUnauthorizedInvalidRefreshTokenError",Object.setPrototypeOf(s,t.prototype),s}return Qt(t,e),t}(Xn),Yn=function(e){function t(n){var r=e.call(this,n)||this;return r.name="UnauthenticatedError",Object.setPrototypeOf(r,t.prototype),r}return Qt(t,e),t}(Error);!function(e){e.Prod="prod",e.PreProd="preprod",e.QA="qa"}(Ln||(Ln={}));var Zn=((Fn={})[Ln.Prod]={AUTHORIZATION_URL:"https://auth.grammarly.com/v4/api/oauth2/authorize",EXCHANGE_URL:"https://auth.grammarly.com/v4/api/oauth2/exchange",TOKEN_URL:"https://auth.grammarly.com/v4/api/oauth2/token",REVOKE_URL:"https://auth.grammarly.com/v4/api/revoke-by-refresh-token",USER_INFO_URL:"https://auth.grammarly.com/v4/api/userinfo"},Fn[Ln.PreProd]={AUTHORIZATION_URL:"https://auth.ppgr.io/v4/api/oauth2/authorize",EXCHANGE_URL:"https://auth.ppgr.io/v4/api/oauth2/exchange",TOKEN_URL:"https://auth.ppgr.io/v4/api/oauth2/token",REVOKE_URL:"https://auth.ppgr.io/v4/api/revoke-by-refresh-token",USER_INFO_URL:"https://auth.ppgr.io/v4/api/userinfo"},Fn[Ln.QA]={AUTHORIZATION_URL:"https://auth.qagr.io/v4/api/oauth2/authorize",EXCHANGE_URL:"https://auth.qagr.io/v4/api/oauth2/exchange",TOKEN_URL:"https://auth.qagr.io/v4/api/oauth2/token",REVOKE_URL:"https://auth.qagr.io/v4/api/revoke-by-refresh-token",USER_INFO_URL:"https://auth.qagr.io/v4/api/userinfo"},Fn);function Jn(e){return rn(this,void 0,void 0,(function(){return on(this,(function(t){return[2,new Promise((function(t){return setTimeout(t,e)}))]}))}))}function Qn(e,t,n,r){return void 0===n&&(n={}),rn(this,void 0,void 0,(function(){var i,o,s,a;return on(this,(function(c){switch(c.label){case 0:i=3,o=0,c.label=1;case 1:s=void 0,c.label=2;case 2:return c.trys.push([2,4,,5]),[4,e(t,n)];case 3:return s=c.sent(),[3,5];case 4:throw c.sent();case 5:return function(e){return e&&(429===e.status||e.status>=500)}(s)?++o>=i?(null==r||r(s.status),[2,s]):(a=function(e){return 1e3*Math.pow(2,e-1)}(o),[4,Jn(a)]):[3,7];case 6:return c.sent(),[3,8];case 7:return[2,s];case 8:return[3,1];case 9:return[2]}}))}))}var er,tr=function(){function e(e,t,n,r){this.getApplicationHeaders=t,this.logger=n,this.onFinalRetryFailed=r,this.httpFetch=e}return e.prototype.addFetchOptions=function(){return rn(this,void 0,void 0,(function(){var e;return on(this,(function(t){switch(t.label){case 0:return[4,this.getApplicationHeaders()];case 1:return e=t.sent(),[2,{credentials:"include",mode:"cors",headers:nn(nn({},e),{"Content-Type":"application/json"})}]}}))}))},e.prototype.post=function(e,t){return rn(this,void 0,void 0,(function(){return on(this,(function(n){return[2,this.request(e,"POST",t)]}))}))},e.prototype.get=function(e){return rn(this,void 0,void 0,(function(){return on(this,(function(t){return[2,this.request(e,"GET")]}))}))},e.prototype.request=function(e,t,n){return rn(this,void 0,void 0,(function(){var r,i,o,s,a,c,l,u,d,h,p;return on(this,(function(g){switch(g.label){case 0:return[4,this.addFetchOptions()];case 1:r=g.sent(),i=nn(nn({},r),{method:t,body:n?JSON.stringify(n):void 0}),g.label=2;case 2:return g.trys.push([2,4,,5]),[4,Qn(this.httpFetch,e,i,this.onFinalRetryFailed)];case 3:return o=g.sent(),[3,5];case 4:throw s=g.sent(),a=new Hn(s.message,e,t),this.logger.trackFetchRequestError(a),a;case 5:if(!o.ok)return[3,9];g.label=6;case 6:return g.trys.push([6,8,,9]),this.logger.trackHttpRequestSuccess(e,t),[4,o.json()];case 7:return[2,g.sent()];case 8:throw g.sent(),c=new qn(o.status,"invalid_json","Failed to parse JSON response",e,t),this.logger.trackHttpJsonParseError(c),c;case 9:return[4,o.clone().json().catch((function(e){return{error:"unknown",message:e.message}}))];case 10:throw l=g.sent(),u=o.status,d=l.error||"unknown_error",h=l.message||"HTTP error ".concat(u," when accessing ").concat(e),p=u>=500?new $n(u,d,h,e,t):401===u?h.includes("Invalid refresh token")?new Kn(d,h,e,t):new Xn(d,h,e,t):u>=400?new Wn(u,d,h,e,t):new qn(u,d,h,e,t),this.logger.trackHttpRequestError(p),p}}))}))},e}(),nr="gr-oauth-key",rr="gr-oauth-service-state",ir="gr-oauth-state",or=function(e){function t(n){var r=e.call(this,n)||this;return r.name="ExpiredAccessTokenError",Object.setPrototypeOf(r,t.prototype),r}return Qt(t,e),t}(Error),sr=function(e){function t(n){var r=e.call(this,n)||this;return r.name="UnexpectedAuthenticatedError",Object.setPrototypeOf(r,t.prototype),r}return Qt(t,e),t}(Error);!function(e){e[e.Anonymous=0]="Anonymous",e[e.Authenticated=1]="Authenticated",e[e.Unknown=2]="Unknown"}(er||(er={}));var ar=function(){function e(e,t,n,r,i,o,s,a){this.clientId=e,this.tokenValidator=n,this.exchangeURL=Zn[t].EXCHANGE_URL,this.tokenURL=Zn[t].TOKEN_URL,this.revokeURL=Zn[t].REVOKE_URL,this.userInfoURL=Zn[t].USER_INFO_URL,this.typedStorage=r,this.fetchSessionToken=a,this.useImplicitExchange=o,this.logger=i,this.environment=t,this.httpClient=new tr(fetch,s,i,this.handleFinalRetryFailure.bind(this))}return e.prototype.getTokenFromAuthorizationCodeGrant=function(e,t){return rn(this,void 0,void 0,(function(){var n,r,i;return on(this,(function(o){switch(o.label){case 0:return n={client_id:this.clientId,grant_type:"authorization_code",authorization_code:e,code_verifier:t},[4,this.httpClient.post(this.tokenURL,n)];case 1:return r=o.sent(),i=this.parseTokenResponse(r),[4,this.typedStorage.setItem(nr,i)];case 2:return o.sent(),[2,r.access_token]}}))}))},e.prototype.getTokenFromRefreshGrant=function(e){return rn(this,void 0,void 0,(function(){var t,n,r,i,o;return on(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,6]),t={client_id:this.clientId,grant_type:"refresh_token",refresh_token:e},[4,this.httpClient.post(this.tokenURL,t)];case 1:return n=s.sent(),r=this.parseTokenResponse(n),[4,this.typedStorage.setItem(nr,r)];case 2:if(s.sent(),this.logger.trackTokenRefreshSuccess(),!(i=this.tokenValidator.validateAccessToken(r)))throw new or("Access token expired upon refresh");return[2,i];case 3:return(o=s.sent())instanceof Error&&this.logger.trackTokenRefreshFailed(o),o instanceof Kn?[4,this.typedStorage.removeItem(nr)]:[3,5];case 4:s.sent(),s.label=5;case 5:throw o;case 6:return[2]}}))}))},e.prototype.getTokenFromAnonymousGrant=function(){return rn(this,void 0,void 0,(function(){var e,t,n;return on(this,(function(r){switch(r.label){case 0:return e={client_id:this.clientId,grant_type:"urn:ietf:params:oauth:grant-type:client_id"},[4,this.httpClient.post(this.tokenURL,e)];case 1:return t=r.sent(),n=this.parseTokenResponse(t),[4,this.typedStorage.setItem(nr,n)];case 2:return r.sent(),[2,t.access_token]}}))}))},e.prototype.getTokenFromExchangeGrant=function(e){return rn(this,void 0,void 0,(function(){var t,n,r,i,o;return on(this,(function(s){switch(s.label){case 0:return s.trys.push([0,5,,8]),t={client_id:this.clientId,grant_type:"urn:ietf:params:oauth:grant-type:token-exchange",subject_token_type:"urn:grammarly:params:oauth:token-type:grauth"},this.useImplicitExchange||!this.fetchSessionToken?[3,2]:[4,this.fetchSessionToken()];case 1:n=s.sent(),t.subject_token=n,s.label=2;case 2:return[4,this.httpClient.post(this.useImplicitExchange?this.exchangeURL:this.tokenURL,t)];case 3:return r=s.sent(),i=this.parseTokenResponse(r),[4,this.typedStorage.setItem(nr,i)];case 4:return s.sent(),this.useImplicitExchange?this.logger.trackTokenExchangeImplicitSuccess(e):this.logger.trackTokenExchangeSuccess(e),[2,r.access_token];case 5:return o=s.sent(),this.useImplicitExchange?o instanceof Error&&this.logger.trackTokenExchangeImplicitFailed(o,e):o instanceof Error&&this.logger.trackTokenExchangeFailed(o,e),this.useImplicitExchange&&o instanceof Xn&&401===o.status||!this.useImplicitExchange&&o instanceof Wn&&400===o.status?[4,this.validateGrauth()]:[3,7];case 6:if(s.sent()===er.Anonymous)throw new Yn("User is anonymous");throw new sr("User is unexpectedly authenticated after unsuccessful token exchange");case 7:throw o;case 8:return[2]}}))}))},e.prototype.revokeRefreshToken=function(e){var t={client_id:this.clientId,refresh_token:e};return this.httpClient.post(this.revokeURL,t)},e.prototype.validateGrauth=function(){return rn(this,void 0,void 0,(function(){var e,t;return on(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.httpClient.post(this.userInfoURL,{})];case 1:return e=n.sent(),[2,this.isUserAnonymous(e)?er.Anonymous:er.Authenticated];case 2:if((t=n.sent())instanceof Xn)return[2,er.Anonymous];throw t;case 3:return[2]}}))}))},e.prototype.isUserAnonymous=function(e){return e.id<0},e.prototype.handleFinalRetryFailure=function(e){return rn(this,void 0,void 0,(function(){return on(this,(function(t){switch(t.label){case 0:return e>=500&&e<600?[4,this.markTokenServiceAsDegraded("Outage_5XX")]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},e.prototype.markTokenServiceAsDegraded=function(e){return rn(this,void 0,void 0,(function(){return on(this,(function(t){switch(t.label){case 0:return[4,this.typedStorage.setItem(rr,{tokens_service_last_degraded_ts:Date.now(),tokens_service_last_degraded_reason:e})];case 1:return t.sent(),this.logger.trackTokenServiceDegraded(e),[2]}}))}))},e.prototype.parseTokenResponse=function(e){return{expires_at:(new Date).getTime()+1e3*e.expires_in,access_token:e.access_token,refresh_token:e.refresh_token,refresh_token_expires_at:(new Date).getTime()+1e3*e.refresh_token_expires_in}},e}();class cr extends Error{}function lr(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function(e){return decodeURIComponent(atob(e).replace(/(.)/g,((e,t)=>{let n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(e){return atob(t)}}cr.prototype.name="InvalidTokenError";var ur=function(){function e(e){this.networkLeeway=e}return e.prototype.validateAccessToken=function(e){return e&&e.access_token&&e.expires_at&&Date.now()<e.expires_at-this.networkLeeway?e.access_token:null},e.prototype.isAuthenticated=function(e){try{var t=function(e,t){if("string"!=typeof e)throw new cr("Invalid token specified: must be a string");t||(t={});const n=!0===t.header?0:1,r=e.split(".")[n];if("string"!=typeof r)throw new cr(`Invalid token specified: missing part #${n+1}`);let i;try{i=lr(r)}catch(e){throw new cr(`Invalid token specified: invalid base64 for part #${n+1} (${e.message})`)}try{return JSON.parse(i)}catch(e){throw new cr(`Invalid token specified: invalid json for part #${n+1} (${e.message})`)}}(e);return t.sub>0}catch(e){return!1}},e}(),dr=function(){function e(e){this.storage=e}return e.prototype.getItem=function(e){var t;return rn(this,void 0,void 0,(function(){var n;return on(this,(function(r){switch(r.label){case 0:return[4,null===(t=this.storage)||void 0===t?void 0:t.getItem(e.toString())];case 1:if(null==(n=r.sent()))return[2,n];try{return[2,JSON.parse(n)]}catch(e){return[2,null]}return[2]}}))}))},e.prototype.setItem=function(e,t){var n;return rn(this,void 0,void 0,(function(){return on(this,(function(r){return null===(n=this.storage)||void 0===n||n.setItem(e.toString(),JSON.stringify(t)),[2]}))}))},e.prototype.removeItem=function(e){var t;return rn(this,void 0,void 0,(function(){return on(this,(function(n){switch(n.label){case 0:return[4,null===(t=this.storage)||void 0===t?void 0:t.removeItem(e.toString())];case 1:return n.sent(),[2]}}))}))},e}();function hr(e,t,n){return void 0===t&&(t=function(){return!0}),void 0===n&&(n=2),rn(this,void 0,void 0,(function(){var r,i,o;return on(this,(function(s){switch(s.label){case 0:r=0,s.label=1;case 1:if(!(r<n))return[3,6];s.label=2;case 2:return s.trys.push([2,4,,5]),[4,e(r)];case 3:return[2,s.sent()];case 4:if(o=s.sent(),!(t(o)&&r<n-1))throw o;return r++,i=o,[3,5];case 5:return[3,1];case 6:throw i}}))}))}function pr(e,t){return void 0===t&&(t=function(){return!0}),rn(this,void 0,void 0,(function(){return on(this,(function(n){return[2,hr(e,t,2)]}))}))}var gr=function(e){function t(){var n=e.call(this)||this;return n.name="MissingRefreshTokenError",Object.setPrototypeOf(n,t.prototype),n}return Qt(t,e),t}(Error),fr=function(){function e(e,t,n,r,i,o,s,a){void 0===s&&(s=!0),this.clientId=e,this.environment=t,this.useImplicitExchange=s,this.typedStorage=new dr(n),this.logger=i,this.tokenValidator=new ur(a||6e4),this.oauthService=new ar(e,t,this.tokenValidator,this.typedStorage,this.logger,this.useImplicitExchange,r,o)}return e.prototype.createAuthorizationRequestUrl=function(e,t,n){return void 0===n&&(n={}),rn(this,void 0,void 0,(function(){var r,i,o,s,a,c;return on(this,(function(l){switch(l.label){case 0:return r=pn(32),[4,wn()];case 1:return i=l.sent(),o=i.codeVerifier,s=i.codeChallenge,[4,this.typedStorage.setItem(ir,{state:r,code_verifier:o,created_at:Date.now()})];case 2:return l.sent(),a=Zn[this.environment].AUTHORIZATION_URL,c=new URLSearchParams({scopes:t.join(" "),redirect_uri:e,client_id:this.clientId,response_mode:"query",response_type:"code",code_challenge:s,code_challenge_method:"S256",state:r}),Object.entries(n).forEach((function(e){var t=sn(e,2),n=t[0],r=t[1];c.append(n,r)})),[2,"".concat(a,"?").concat(c.toString())]}}))}))},e.prototype.handleRedirect=function(e,t){return rn(this,void 0,void 0,(function(){var n,r,i,o;return on(this,(function(s){switch(s.label){case 0:if(s.trys.push([0,4,,5]),!e)throw new Error("Authorization code is required");if(!t)throw new Error("State parameter is required");return[4,this.typedStorage.getItem(ir)];case 1:if(!(n=s.sent())||!n.code_verifier||n.state!==t)throw new Error("No matching authorization state found");return r=n.code_verifier,[4,this.oauthService.getTokenFromAuthorizationCodeGrant(e,r)];case 2:return i=s.sent(),[4,this.typedStorage.removeItem(ir)];case 3:return s.sent(),this.logger.trackAuthorizationCodeExchangeSuccess(),[2,i];case 4:throw(o=s.sent())instanceof Error&&this.logger.trackAuthorizationCodeExchangeFailed(o),o;case 5:return[2]}}))}))},e.prototype.getAccessTokenOrRenew=function(){return rn(this,void 0,void 0,(function(){var e=this;return on(this,(function(t){return this.refreshPromise||(this.refreshPromise=this._getAccessTokenOrRenew().finally((function(){e.refreshPromise=void 0}))),[2,this.refreshPromise]}))}))},e.prototype._getAccessTokenOrRenew=function(){return rn(this,void 0,void 0,(function(){var e,t,n,r,i,o=this;return on(this,(function(s){switch(s.label){case 0:return[4,this.typedStorage.getItem(nr)];case 1:if(e=s.sent(),t=this.tokenValidator.validateAccessToken(e))return[2,t];if(n="MissingRefreshToken",!(null==e?void 0:e.refresh_token))return[3,5];s.label=2;case 2:return s.trys.push([2,4,,5]),[4,pr((function(){return rn(o,void 0,void 0,(function(){var e;return on(this,(function(t){switch(t.label){case 0:return[4,this.typedStorage.getItem(nr)];case 1:if(!(null==(e=t.sent())?void 0:e.refresh_token))throw new gr;return[2,this.oauthService.getTokenFromRefreshGrant(e.refresh_token)]}}))}))}),this.shouldRetryRefresh)];case 3:return[2,s.sent()];case 4:if(!((r=s.sent())instanceof Kn))throw r;return n="InvalidRefreshToken",r instanceof Error&&this.logger.trackInvalidRefreshToken(r),[3,5];case 5:return s.trys.push([5,7,,10]),[4,this.loginWithTokenExchange(n)];case 6:return[2,s.sent()];case 7:return(i=s.sent())instanceof Yn?(this.logger.trackUnauthenticatedError(i,n),"InvalidRefreshToken"===n&&this.logger.trackUnintentionalLogoutError(i),[4,this.loginAnonymous()]):[3,9];case 8:return[2,s.sent()];case 9:throw i;case 10:return[2]}}))}))},e.prototype.loginWithTokenExchangeOrAnonymous=function(e){return rn(this,void 0,void 0,(function(){var t;return on(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,5]),[4,this.loginWithTokenExchange(e)];case 1:case 3:return[2,n.sent()];case 2:return(t=n.sent())instanceof Yn?(this.logger.trackUnauthenticatedError(t,e),[4,this.loginAnonymous()]):[3,4];case 4:throw t;case 5:return[2]}}))}))},e.prototype.logout=function(e){return rn(this,void 0,void 0,(function(){var t,n=this;return on(this,(function(r){switch(r.label){case 0:return[4,this.typedStorage.getItem(nr)];case 1:return(t=r.sent())&&t.refresh_token&&this.oauthService.revokeRefreshToken(t.refresh_token).then((function(){return n.logger.trackTokenRevokeSuccess()})).catch((function(e){return n.logger.trackTokenRevokeFailed(e)})),[4,this.typedStorage.removeItem(nr)];case 2:return r.sent(),this.logger.trackLogoutSuccess(e),[2]}}))}))},e.prototype.getTokensServiceState=function(){return rn(this,void 0,void 0,(function(){return on(this,(function(e){switch(e.label){case 0:return[4,this.typedStorage.getItem(rr)];case 1:return[2,e.sent()||{tokens_service_last_degraded_ts:null,tokens_service_last_degraded_reason:null}]}}))}))},e.prototype.experimental__isAuthenticated=function(e){return this.tokenValidator.isAuthenticated(e)},e.prototype.shouldRetryRefresh=function(e){return e instanceof or},e.prototype.shouldRetryTokenExchange=function(e){return e instanceof sr},e.prototype.loginAnonymous=function(){return rn(this,void 0,void 0,(function(){var e,t;return on(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.oauthService.getTokenFromAnonymousGrant()];case 1:return e=n.sent(),this.logger.trackTokenAnonymousFetchSuccess(),[2,e];case 2:throw(t=n.sent())instanceof Error&&this.logger.trackTokenAnonymousFetchFailed(t),t;case 3:return[2]}}))}))},e.prototype.loginWithTokenExchange=function(e){return rn(this,void 0,void 0,(function(){var t=this;return on(this,(function(n){return[2,pr((function(){return t.oauthService.getTokenFromExchangeGrant(e)}),this.shouldRetryTokenExchange)]}))}))},e}(),mr=function(){function e(){this.storage=new Map}return e.prototype.getItem=function(e){return this.storage.get(e)||null},e.prototype.setItem=function(e,t){this.storage.set(e,t)},e.prototype.removeItem=function(e){this.storage.delete(e)},e}();!function(){function e(e,t,n,r,i){this.fetchFn=e,this._disallowedDomainList=["auth.grammarly.com","auth.ppgr.io","auth.qagr.io"],this._allowedDomainList=["grammarly.com","grammarly.io","qagr.io","ppgr.io"],this.logger=n,this.config=t,this.typedStorage=i||new dr(new mr),this.httpClient=new tr(e,r,n)}e.prototype.getAccessTokenOrRenew=function(){return rn(this,void 0,void 0,(function(){var e=this;return on(this,(function(t){return this.refreshPromise||(this.refreshPromise=this._getAccessTokenOrRenew().finally((function(){e.refreshPromise=void 0}))),[2,this.refreshPromise]}))}))},e.prototype._getAccessTokenOrRenew=function(){return rn(this,void 0,void 0,(function(){var t,n,r;return on(this,(function(i){switch(i.label){case 0:return[4,this.typedStorage.getItem(e.TOKEN_KEY)];case 1:return(t=i.sent())&&t.expires_at>Date.now()?[2,t.access_token]:(n="".concat(this.config.baseUrl).concat(this.config.tokenPath),[4,this.httpClient.get(n)]);case 2:return r=i.sent(),[4,this.typedStorage.setItem(e.TOKEN_KEY,{access_token:r.access_token,expires_in:r.expires_in,expires_at:Date.now()+1e3*r.expires_in})];case 3:return i.sent(),[2,r.access_token]}}))}))},e.prototype.logout=function(){return rn(this,void 0,void 0,(function(){var t;return on(this,(function(n){switch(n.label){case 0:return t="".concat(this.config.baseUrl).concat(this.config.logoutPath),[4,this.httpClient.get(t)];case 1:return n.sent(),[4,this.typedStorage.removeItem(e.TOKEN_KEY)];case 2:return n.sent(),this.refreshPromise=void 0,this.logger.trackLogoutSuccess(),[2]}}))}))},e.prototype.fetchWithAuth=function(t,n){return rn(this,void 0,void 0,(function(){var r,i,o,s,a,c=this;return on(this,(function(l){switch(l.label){case 0:if(!this.isValidDomain(t))return[2,this.fetchFn(t,n)];r=function(){return rn(c,void 0,void 0,(function(){var e,t;return on(this,(function(r){switch(r.label){case 0:return e=new Headers(null==n?void 0:n.headers),[4,this.getAccessTokenOrRenew()];case 1:return t=r.sent(),e.set("Authorization","Bearer ".concat(t)),[2,nn(nn({},n),{headers:e})]}}))}))},l.label=1;case 1:return l.trys.push([1,7,,10]),[4,r()];case 2:return i=l.sent(),[4,this.fetchFn(t,i)];case 3:return 401!==(o=l.sent()).status?[3,6]:[4,this.typedStorage.removeItem(e.TOKEN_KEY)];case 4:return l.sent(),this.refreshPromise=void 0,[4,r()];case 5:return s=l.sent(),[2,this.fetchFn(t,s)];case 6:return[2,o];case 7:return(a=l.sent())instanceof Xn?(this.logger.trackUnauthorizedError(a),[4,this.typedStorage.removeItem(e.TOKEN_KEY)]):[3,9];case 8:l.sent(),this.refreshPromise=void 0,l.label=9;case 9:return[2,this.fetchFn(t,n)];case 10:return[2]}}))}))},e.prototype.isValidDomain=function(e){var t;try{t=e instanceof URL?e:e instanceof Request?new URL(e.url):new URL(e)}catch(e){return!1}var n=function(e){return t.hostname.toLowerCase()===e.toLowerCase()||t.hostname.toLowerCase().endsWith(".".concat(e).toLowerCase())};return!this._disallowedDomainList.some(n)&&this._allowedDomainList.some(n)},e.TOKEN_KEY="oauth.tokens"}();function br(){return{client_event_epoch:Date.now(),nonce:Math.round(Math.random()*Math.pow(10,16))}}const yr=(e,t="round")=>{switch(t){case"floor":return Math.floor(e);case"ceil":return Math.ceil(e);case"round":return Math.round(e);default:return(0,h.vE)(t)}};class _r{_getSessionMetadata(e){const t={...this._userInfo,...this._sessionInfo};return e.reduce(((e,n)=>t[n]?{...e,[n]:t[n]}:e),{})}enableDataSharing(){this._dataSharingEnabled=!0}isDevelopment(){return!1}constructor(e,t,n,r=self.fetch.bind(self),i=br){this._url=e,this._sessionInfo=t,this._authTokenProvider=n,this._fetch=r,this._getEventNonce=i,this._log=q.create("ProductMetricsClientImpl"),this._isInitialised=!1,this._queue=[],this._dataSharingEnabled=!Ne()}_send(e){return this._fetch(this._url,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",serviceName:"ingestion_front_end",datasetName:e.dataset_name},body:JSON.stringify(e)}).then((()=>{}))}_decorateEvent(e,t){var n;return{...e,...this._containerIdInfo,...this._getEventNonce(),...this._getSessionMetadata(null!==(n=t.additionalProps)&&void 0!==n?n:[]),event_name:`${this._sessionInfo.client}/${e.event_name}`}}_process(e,t){const n=this._decorateEvent(e,t||{});return this._log.debug("Sending product metric:",n),this._send(n)}_enqueue(e,t){this._log.trace("Enqueue product metric:",e);const n=(0,Ke.ep)();return this._queue.push({event:e,options:t,resultPromise:n}),n.promise}async init(e,t){if(this._isInitialised)return!1;this._isInitialised=!0,this._containerIdInfo={container_id:null!=e?e:void 0},t&&(this._userInfo=t);const n=(0,pe.G1)((()=>{const e=N().bundleInfo.env;let t;return t="qa"===e||"dev-qa"===e?Ln.QA:"dev-preprod"===e?Ln.PreProd:Ln.Prod,t})(),"ingestion_front_end"),r=new pe.Hd(this._sessionInfo,{container_id:e,referral_container_id:e}),i=new pe.Yq((()=>{var e,n;return{user_id:null!==(e=null==t?void 0:t.user_id)&&void 0!==e?e:null,institution_id:null!==(n=null==t?void 0:t.institution_id)&&void 0!==n?n:null}})),o=new pe.Ze(n,this._authTokenProvider,[r,i],[],new Zt,{serviceName:"ingestion_front_end",gracefulDegradation:!0,maxQueueSize:100});return this._mintClient=new pe.fS(o),await this._mintClient.initialize(),this._queue.forEach((({event:e,options:t,resultPromise:n})=>{this._process(e,t).then(n.resolve).catch(n.reject)})),!0}updateUserInfo(e){this._userInfo=e}send(e,t){var n,r;const i=null===(n=de().experimentClient)||void 0===n?void 0:n.isGateEnabled(De.TSMintSdkRollout),o=!this._userInfo||"Anonymous"===this._userInfo.user_type;if(!this._dataSharingEnabled)return this._log.debug("Data sharing is not enabled. Not sending product metrics"),Promise.resolve();if(this.isDevelopment())return this._log.debug("Not sending product metrics on dev environment"),Promise.resolve();const s={...e,user_id:(null===(r=this._userInfo)||void 0===r?void 0:r.user_id)||"unknown",client:this._sessionInfo.client,client_version:this._sessionInfo.client_version,client_event_epoch:Date.now(),nonce:this._getEventNonce().nonce,dataset_name:e.dataset_name,event_name:e.event_name};i&&this._mintClient.sendEvent(s,e.dataset_name,o);return!i||!this._isInitialised?this._isInitialised?this._process(e,t):this._enqueue(e,t):Promise.resolve()}}var vr,wr,Sr,kr=__webpack_require__(58303),Ir=__webpack_require__(90023),Cr=__webpack_require__(5972),Er=__webpack_require__(74822),Ar=__webpack_require__(80210),xr=function(e){function t(t,n,r){void 0===t&&(t=1/0),void 0===n&&(n=1/0),void 0===r&&(r=Ar.l);var i=e.call(this)||this;return i._bufferSize=t,i._windowTime=n,i._timestampProvider=r,i._buffer=[],i._infiniteTimeWindow=!0,i._infiniteTimeWindow=n===1/0,i._bufferSize=Math.max(1,t),i._windowTime=Math.max(1,n),i}return(0,Cr.ZT)(t,e),t.prototype.next=function(t){var n=this,r=n.isStopped,i=n._buffer,o=n._infiniteTimeWindow,s=n._timestampProvider,a=n._windowTime;r||(i.push(t),!o&&i.push(s.now()+a)),this._trimBuffer(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){this._throwIfClosed(),this._trimBuffer();for(var t=this._innerSubscribe(e),n=this._infiniteTimeWindow,r=this._buffer.slice(),i=0;i<r.length&&!e.closed;i+=n?1:2)e.next(r[i]);return this._checkFinalizedStatuses(e),t},t.prototype._trimBuffer=function(){var e=this,t=e._bufferSize,n=e._timestampProvider,r=e._buffer,i=e._infiniteTimeWindow,o=(i?1:2)*t;if(t<1/0&&o<r.length&&r.splice(0,r.length-o),!i){for(var s=n.now(),a=0,c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}},t}(Er.x),Tr=__webpack_require__(12518),Or=__webpack_require__(86399),Pr=__webpack_require__(84178),Rr=__webpack_require__(14944),Dr=__webpack_require__(20232),Nr=__webpack_require__(67177),Ur=__webpack_require__(11633),Mr=__webpack_require__(36344),jr=__webpack_require__(64271),Fr=__webpack_require__(29416),Lr=__webpack_require__(20161),Gr=__webpack_require__(59179),Br=__webpack_require__(16537),zr=__webpack_require__(19064),Vr=__webpack_require__(96643);function qr(e,t){return t?function(n){return n.pipe(qr((function(n,r){return(0,Br.Xf)(e(n,r)).pipe((0,Gr.U)((function(e,i){return t(n,e,r,i)})))})))}:(0,zr.e)((function(t,n){var r=0,i=null,o=!1;t.subscribe((0,Vr.x)(n,(function(t){i||(i=(0,Vr.x)(n,void 0,(function(){i=null,o&&n.complete()})),(0,Br.Xf)(e(t,r++)).subscribe(i))}),(function(){o=!0,!i&&n.complete()})))}))}class Hr extends Error{constructor(e,t){super(e),this.reason=void 0,this.reason=t,this.name="StorageError","captureStackTrace"in Error?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack}toString(){return`${this.name}: ${this.message}${Boolean(this.reason)?` - ${String(this.reason)}`:""}`}static is(e){return e instanceof Hr}}function Wr(e){return t=>new Hr(e,t)}function $r(e){var t;return Boolean(null==(t=function(e){const t=e.reason;return null==t?null:"string"==typeof t?t:"object"==typeof t&&"string"==typeof(null==t?void 0:t.name)?String(t.name):null}(e))?void 0:t.startsWith("QuotaExceeded"))}!function(e){e.Descending="descending",e.Ascending="ascending"}(vr||(vr={})),function(e){e.Write="write",e.ReadWrite="read-write"}(wr||(wr={})),function(e){e.CreationTime="creation-time",e.ExpirationTime="expiration-time"}(Sr||(Sr={}));var Xr="3.0.25",Kr=__webpack_require__(24961),Yr=__webpack_require__(36661),Zr=(0,Yr.S)((function(e){return(0,Kr.wf)(Jr(e),e.struct({}))(e)})),Jr=(0,Yr.S)((function(e){return e.struct({id:e.number})})),Qr=(0,Yr.S)((function(e){return(0,Kr.wf)(Jr(e),e.struct({}))(e)})),ei=(0,Yr.S)((function(e){return ii(e)})),ti=(0,Kr.Dd)(vr),ni=(0,Yr.S)((function(e){return e.struct({key:e.string,data:e.string})})),ri=(0,Kr.Dd)(wr),ii=(0,Yr.S)((function(e){var t;return e.sum("action")(((t={})["storage:get"]=oi(e),t["storage:clear"]=si(e),t["storage:save"]=ai(e),t["storage:entries"]=ci(e),t))})),oi=(0,Yr.S)((function(e){return(0,Kr.wf)(Jr(e),Qr(e),e.intersect(e.partial({maxEntries:e.number}))(e.intersect(e.partial({orderBy:li(e)}))(e.intersect(e.partial({direction:ti(e)}))(e.struct({action:e.literal("storage:get"),keyPrefixes:e.readonly(e.array(e.string))})))))(e)})),si=(0,Yr.S)((function(e){return(0,Kr.wf)(Jr(e),Qr(e),e.struct({action:e.literal("storage:clear"),keyPrefixes:e.readonly(e.array(e.string))}))(e)})),ai=(0,Yr.S)((function(e){return(0,Kr.wf)(Jr(e),Qr(e),e.struct({action:e.literal("storage:save"),key:e.string,data:e.string,maxAgeSeconds:e.number,maxAgeOrigin:ri(e)}))(e)})),ci=(0,Yr.S)((function(e){return(0,Kr.wf)(Zr(e),Jr(e),e.struct({action:e.literal("storage:entries"),data:e.readonly(e.array(ni(e)))}))(e)})),li=(0,Kr.Dd)(Sr),ui=(0,Yr.S)((function(e){var t;return e.sum("action")(((t={})["storage:entries"]=ci(e),t))})),di=(0,Yr.S)((function(e){var t;return e.sum("action")(((t={})["storage:get"]=oi(e),t["storage:clear"]=si(e),t["storage:save"]=ai(e),t["storage:entries"]=ci(e),t))})),hi=(0,Yr.S)((function(e){var t;return e.sum("action")(((t={})["storage:get"]=oi(e),t["storage:clear"]=si(e),t["storage:save"]=ai(e),t))}));const pi=e,gi=n;var fi,mi;(mi=fi||(fi={})).Codec=Ur.OT(Ur.dt({action:Ur.OT(Ur.i0("storage")),id:Ur.OT(Ur.pk)})),mi.is=mi.Codec.is;var bi=__webpack_require__(8867);function yi(e){return new Blob([e]).size}var _i=Object.defineProperty,vi=Object.defineProperties,wi=Object.getOwnPropertyDescriptors,Si=Object.getOwnPropertySymbols,ki=Object.prototype.hasOwnProperty,Ii=Object.prototype.propertyIsEnumerable,Ci=(e,t,n)=>t in e?_i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ei,Ai;(Ai=Ei||(Ei={})).primaryKeyPath="key",Ai.expiresPath="expires",Ai.createdPath="created",Ai.maxAgeSecondsPath="maxAgeSeconds",Ai.maxAgeOriginPath="maxAgeOrigin",Ai.entryCodec=Ur.OT(Ur.dt({data:Ur.Z_,[Ai.primaryKeyPath]:Ur.Z_,[Ai.createdPath]:Ur.pk,[Ai.expiresPath]:Ur.pk,[Ai.maxAgeSecondsPath]:Ur.pk,[Ai.maxAgeOriginPath]:Ur.Z_})),Ai.v1EntryCodec=Ur.OT(Ur.jV([Ur.dt({[Ai.primaryKeyPath]:Ur.Z_,blobs:Ur.Bk(Ur.Z_),[Ai.expiresPath]:Ur.pk,[Ai.maxAgeSecondsPath]:Ur.pk,[Ai.maxAgeOriginPath]:Ur.Z_}),Ur.r$({tag:Ur.Z_})]));const xi=()=>{var e,t,n,r,i,o;return null!=(o=null==(i=null==(r=null==(n=null==(t=null==(e=null==self?void 0:self.navigator)?void 0:e.storage)?void 0:t.estimate)?void 0:n.call(t))?void 0:r.then(Tr.F2))?void 0:i.catch((0,Ir.ls)(Tr.KC,Wr("unexepected navigator.storage.estimate() error"),Tr.t$)))?o:Promise.resolve(Tr.t$(new Hr("navigator.storage.estimate() API not supported")))},Ti=class e{constructor(t,n,r,i=xi,o=((e=xi,t=1e3)=>n=>(0,Ir.zG)(e,Dr.UI(Tr.g_((()=>Tr.F2(Math.max(t,n))),(e=>{var r;return Tr.F2(Math.max(t,n,(null!=(r=e.quota)?r:0)/2))})))))(i),s=function(e){return(t,n)=>()=>new Promise((r=>{const i=t.transaction(e,"readwrite"),o=i.objectStore(e);Ri(i,{onError:e=>r(Tr.t$(new Hr("IndexedDBStorageImpl.putIndexedDBStorageEntry() save transaction error, objectStore.put()",e))),onAbort:e=>r(Tr.t$(new Hr("IndexedDBStorageImpl.putIndexedDBStorageEntry() save transaction aborted, objectStore.put()",e))),onComplete:()=>r(Tr.F2(void 0))}),o.put(Ei.entryCodec.encode({key:n.key,data:n.data,created:Date.now(),expires:Date.now()+1e3*n.maxAgeSeconds,maxAgeSeconds:n.maxAgeSeconds,maxAgeOrigin:n.maxAgeOrigin}))})).catch((e=>Tr.t$(new Hr("IndexedDBStorageImpl.putIndexedDBStorageEntry() promise rejection",e))))}(r)){this._idb=t,this._dbName=n,this._storeName=r,this._storageStatsProvider=i,this._minEvictionSizeInBytes=o,this._putEntry=s,this._requestExpiredDataCleanup=new Er.x,this._lazyDB=function(e){let t,n=!1;return{get hasValue(){return n},get value(){return n||(t=e(),n=!0),t}}}((()=>new Promise((t=>{const n=this._idb.open(this._dbName,e._version);n.onerror=()=>t(Tr.t$(new Hr(`Error opening storage database (v${e._version})`,n.error))),n.onsuccess=()=>{const e=n.result;e.onversionchange=()=>{e.close()},t(Tr.F2(e))},n.onupgradeneeded=r=>{const i=n.result;if(i.objectStoreNames.contains(this._storeName)){if(1===r.oldVersion){const r=n.transaction;if(r){const n=r.objectStore(this._storeName),i=n.getAll();i.onerror=()=>{t(Tr.t$(new Hr(`objectStore.getAll() error during migration of database ${this._dbName} from v1 to v${e._version})`,i.error)))},i.onsuccess=()=>{const r=i.result,o=n.clear();o.onsuccess=()=>{r.forEach((e=>{(0,Ir.zG)(Ei.v1EntryCodec.decode(e),Tr.UI((e=>{e.blobs.forEach(((t,r)=>{n.put(Ei.entryCodec.encode({key:`${void 0!==e.tag?`${e.tag}/`:""}${e.key}${e.blobs.length>1?`/${r}`:""}`,data:t,created:e.expires-1e3*e.maxAgeSeconds,expires:e.expires,maxAgeSeconds:e.maxAgeSeconds,maxAgeOrigin:e.maxAgeOrigin}))}))})))}))},o.onerror=()=>{t(Tr.t$(new Hr(`objectStore.clear() error during migration of database ${this._dbName} from v1 to v${e._version})`,i.error)))}}}}}else{i.createObjectStore(this._storeName,{keyPath:Ei.primaryKeyPath}).createIndex(e._expirationIndex,Ei.expiresPath,{unique:!1})}}})).catch((e=>Tr.t$(new Hr("IndexedDBStorageImpl._lazyDB promise rejection",e))))))}runCleanupRequests(e=Mr.E,t=5e3){return(0,jr.T)(this._requestExpiredDataCleanup,e).pipe((0,Fr.b)(1e3),(0,Lr.w)((n=t,"requestIdleCallback"in self?e=>new bi.y((t=>{let r=null;const i=o=>{o.timeRemaining()>0||o.didTimeout?t.next(e):o.timeRemaining()<=0&&void 0===n&&(null!==r&&self.cancelIdleCallback(r),r=self.requestIdleCallback(i))};return r=self.requestIdleCallback(i,{timeout:n}),()=>{null!==r&&self.cancelIdleCallback(r)}})):e=>new bi.y((t=>{const n=self.requestAnimationFrame((()=>t.next(e)));return()=>cancelAnimationFrame(n)})))),qr((()=>this.clearExpiredData()())));var n}get(e){return 0===e.keyPrefixes.length?Nr.Uo(Tr.t$(new Hr("Invalid IndexedDBStorageImpl.get() request. No keyPrefixes provided"))):(0,Ir.zG)((()=>this._lazyDB.value),Nr.tS((t=>()=>new Promise((n=>{const r=t.transaction(this._storeName,"readonly"),i=r.objectStore(this._storeName),o={};let s=!1;e.keyPrefixes.forEach((e=>{o[e]=[]})),Ri(r,{onError:e=>n(Tr.t$(new Hr("IndexedDBStorageImpl.get() readonly transaction error (openCursor)",e))),onAbort:e=>n(Tr.t$(new Hr("IndexedDBStorageImpl.get() readonly transaction aborted (openCursor)",e))),onComplete:()=>n((0,Ir.zG)(e.keyPrefixes,Or.tS((t=>(0,Ir.zG)(o[t],Or.DY("expiration-time"===e.orderBy?Rr.Uz((e=>e.expires))(Rr.Mh):Rr.Uz((e=>e.created))(Rr.Mh)),"ascending"===e.direction?Ir.yR:Or.GY))),(t=>{var n,r;const i=function(e,t){try{let n=yi("[]");const r=[];for(const i of e){const e=yi(JSON.stringify(i)),o=0===r.length?0:1;if(!(n+o+e<=t))break;n+=o+e,r.push(i)}return r}catch(e){return[]}}((0,Ir.zG)(t,Or.ke(null!=(n=e.maxEntries)?n:Number.MAX_SAFE_INTEGER),Or.UI((e=>({key:e.key,data:e.data})))),null!=(r=e.maxResponseSize)?r:19e4).length;return{entries:(0,Ir.zG)(t,Or.ke(i)),entriesDropped:t.length-i}}),(({entries:e,entriesDropped:n})=>Tr.F2({hasExpiredEntries:s,expirationUpdates:e.filter((e=>e.maxAgeOrigin===pi.MaxAgeOrigin.ReadWrite)),entries:e.map((e=>({key:e.key,data:e.data}))),entriesDropped:n,db:t}))))});for(const t of e.keyPrefixes){const e=i.openCursor(Ui(t));e.onsuccess=()=>{const i=e.result;null!==i&&((0,Ir.zG)(Ei.entryCodec.decode(i.value),Tr.Pd((e=>{n(Tr.t$(new Hr("IndexedDBStorageImpl.get() decoding error reading cursor value, aborting",Tr.KC(e)))),r.abort()}),(e=>{e.expires<=Date.now()?s=!0:o[t].push(e)}))),i.continue())}}})).catch((e=>Tr.t$(new Hr("IndexedDBStorageImpl.get() promise rejection during readonly transaction",e)))))),Nr.mU((({db:e,expirationUpdates:t})=>t.length>0?()=>new Promise((n=>{const r=e.transaction(this._storeName,"readwrite"),i=r.objectStore(this._storeName);Ri(r,{onError:e=>n(Tr.t$(new Hr("IndexedDBStorageImpl.get() readwrite transaction error (put/delete)",e))),onAbort:e=>n(Tr.t$(new Hr("IndexedDBStorageImpl.get() readwrite transaction aborted (put/delete)",e))),onComplete:()=>n(Tr.F2(void 0))}),t.forEach((e=>i.put(Ei.entryCodec.encode(((e,t)=>vi(e,wi(t)))(((e,t)=>{for(var n in t||(t={}))ki.call(t,n)&&Ci(e,n,t[n]);if(Si)for(var n of Si(t))Ii.call(t,n)&&Ci(e,n,t[n]);return e})({},e),{expires:Date.now()+1e3*e.maxAgeSeconds})))))})).catch((e=>Tr.t$(new Hr("IndexedDBStorageImpl.get() promise rejection during readwrite transaction",e)))):Nr.of(void 0))),Nr.UI((e=>(e.hasExpiredEntries&&this._requestExpiredDataCleanup.next(null),{entries:e.entries,entriesDropped:e.entriesDropped}))))}save(e){if(e.maxAgeSeconds<=0)return Nr.Uo(Tr.t$(new Hr("Invalid IndexedDBStorageImpl.save() request. Invalid parameter `maxAgeSeconds <= 0`")));const t=(0,Ir.zG)((()=>this._lazyDB.value),Nr.tS((t=>this._putEntry(t,e))));return(0,Ir.zG)(t,Dr.tS((e=>Di(e)?(0,Ir.zG)(this.clearExpiredData(),Nr.tS((n=>n>0?t:Dr.of(e)))):Dr.of(e))),Dr.tS((n=>Di(n)?(0,Ir.zG)(this._minEvictionSizeInBytes(Ni({key:e.key,data:e.data,expires:Date.now(),created:Date.now(),maxAgeSeconds:e.maxAgeSeconds,maxAgeOrigin:e.maxAgeOrigin})),Nr.tS((e=>this._evictTTL(e))),Nr.tS((()=>t))):Dr.of(n))))}clear(e){return 0===e.keyPrefixes.length?Nr.Uo(Tr.t$(new Hr("Invalid IndexedDBStorageImpl.clear() request. No keyPrefixes provided"))):(0,Ir.zG)((()=>this._lazyDB.value),Nr.tS((t=>()=>new Promise((n=>{const r=t.transaction(this._storeName,"readwrite"),i=r.objectStore(this._storeName);Ri(r,{onError:e=>n(Tr.t$(new Hr("IndexedDBStorageImpl.clear() transaction error",e))),onAbort:e=>n(Tr.t$(new Hr("IndexedDBStorageImpl.clear() transaction aborted",e))),onComplete:()=>n(Tr.F2(void 0))});for(const t of e.keyPrefixes){const e=i.openCursor(Ui(t));e.onsuccess=()=>{const t=e.result;null!==t&&(t.delete(),t.continue())}}})))))}clearExpiredData(){return(0,Ir.zG)((()=>this._lazyDB.value),Nr.tS((t=>()=>new Promise((n=>{const r=t.transaction(this._storeName,"readwrite"),i=r.objectStore(this._storeName);let o=0;Ri(r,{onError:e=>n(Tr.t$(new Hr("IndexedDBStorageImpl.clearExpiredData() transaction error",e))),onAbort:e=>n(Tr.t$(new Hr("IndexedDBStorageImpl.clearExpiredData() transaction aborted",e))),onComplete:()=>n(Tr.F2(o))});const s=i.index(e._expirationIndex).openKeyCursor(IDBKeyRange.upperBound(Date.now()));s.onsuccess=()=>{const e=s.result;if(null!==e){i.delete(e.primaryKey).onsuccess=()=>++o,e.continue()}}})).catch((e=>Tr.t$(new Hr("IndexedDBStorageImpl.clearExpiredData() promise rejection",e)))))))}statsEstimate(){return this._storageStatsProvider}close(){return this._lazyDB.hasValue?(0,Ir.zG)((()=>this._lazyDB.value),Nr.Pd(Wr("IndexedDBStorageImpl.close() error while accessing DB connection"),(e=>e.close()))):Nr.of(void 0)}dispose(){this.close()}_evictTTL(t){return(0,Ir.zG)((()=>this._lazyDB.value),Nr.tS((n=>()=>new Promise((r=>{const i=n.transaction(this._storeName,"readwrite"),o=i.objectStore(this._storeName);let s=0;Ri(i,{onError:e=>r(Tr.t$(new Hr("IndexedDBStorageImpl._evictTTL() transaction error",e))),onAbort:e=>r(Tr.t$(new Hr("IndexedDBStorageImpl._evictTTL() transaction aborted",e))),onComplete:()=>r(Tr.F2(s))});const a=o.index(e._expirationIndex).openCursor(null,"next");a.onsuccess=()=>{const e=a.result;null!==e&&s<t&&((0,Ir.zG)(Ei.entryCodec.decode(e.value),Tr.UI((t=>{e.delete(),s+=Ni(t)}))),e.continue())}})).catch((e=>Tr.t$(new Hr("IndexedDBStorageImpl._evictTTL() promise rejection",e)))))))}};Ti._version=2,Ti._expirationIndex="expiration";let Oi=Ti;function Pi(e){var t,n;return null!=(n=null==(t=e.target)?void 0:t.error)?n:void 0}function Ri(e,t){const n=()=>{e.removeEventListener("abort",r),e.removeEventListener("error",i),e.removeEventListener("complete",o)},r=e=>{t.onAbort(Pi(e)),n()},i=e=>{t.onError(Pi(e)),n()},o=()=>{t.onComplete(),n()};e.addEventListener("abort",r),e.addEventListener("error",i),e.addEventListener("complete",o)}function Di(e){return Tr.nM(e)&&!0===$r(e.left)}function Ni(e){return e.key.length+e.data.length+e.maxAgeOrigin.length+48}function Ui(e){return IDBKeyRange.bound(e,e+"",!1,!0)}var Mi=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(e){i(e)}},s=e=>{try{a(n.throw(e))}catch(e){i(e)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));const ji="GrCAPIStorage:",Fi="GrCAPIStorage:Tracking",Li="GrCAPIStorage:__support__",Gi="Tables";class Bi{constructor(e,t){this._idbFactory=e,this._hashUserEmail=t,this._dbNameToStorageInstanceMap=new Map}getStorageInstanceForUser(e){var t,n;const r=this._getUserStorageDBName(e),i=new Er.x,o={instance:null!=(n=null==(t=this._dbNameToStorageInstanceMap.get(r))?void 0:t.instance)?n:new Oi(this._idbFactory,r,"CAPI Storage"),setupErrors:new Er.x,canSaveToStorage:i.pipe((0,Pr.q)(1)).toPromise().then(Boolean)};return this._dbNameToStorageInstanceMap.set(r,o),zi(this._idbFactory)?i.next(!0):this._storeUserDBNameForTracking(r).then(Tr.g_((e=>{i.next(!1),o.setupErrors.next(new Hr("Unexpected storeUserDBNameForTracking() error",e))}),(()=>i.next(!0)))).catch((e=>{i.next(!1),o.setupErrors.next(new Hr("Unexpected storeUserDBNameForTracking() promise rejection",e))})),o}clearAllStorage(){return Mi(this,null,(function*(){try{this._dbNameToStorageInstanceMap.forEach((e=>e.instance.dispose())),this._dbNameToStorageInstanceMap.clear();const e=yield this._collectAllBackendManagedDBNames();if(Tr.nM(e))return e;const t=yield Promise.all(e.right.map((e=>function(e,t){return new Promise((n=>{const r=t.deleteDatabase(e);r.onerror=()=>n(Tr.t$(new Hr("Unexpected deleteIndexedDBDatabase error",r.error))),r.onsuccess=()=>n(Tr.F2(void 0))}))}(e,this._idbFactory).catch((e=>Tr.t$(new Hr("Unexpected error while clearing backend-managed client storage",e))))))),n=Or.oh(t);return n.left.length>0?Tr.t$(new Hr("Unexpected error(s) while clearing backend-managed client storage",n.left)):Tr.F2(void 0)}catch(e){return Tr.t$(new Hr("Unexpected error while clearing backend-managed client storage: "+String(e),e))}}))}dispose(){this._dbNameToStorageInstanceMap.forEach((e=>e.instance.dispose())),this._dbNameToStorageInstanceMap.clear()}_getUserStorageDBName(e){return`GrCAPIStorage:${this._hashUserEmail(e)}`}_collectAllBackendManagedDBNames(){return Mi(this,null,(function*(){var e;return zi(this._idbFactory)?Tr.F2((null!=(e=yield this._idbFactory.databases())?e:[]).map((e=>e.name)).filter((e=>void 0!==e&&e.startsWith(ji)))):this._enumerateUserDBNamesFromTrackingDB().then(Tr.UI((e=>e.concat(Li))))}))}_enumerateUserDBNamesFromTrackingDB(){return this._openOrCreateTrackingDatabase().then(Tr.g_((e=>Promise.resolve(Tr.t$(e))),(e=>new Promise((t=>{const n=e.transaction(Gi,"readonly"),r=n.objectStore(Gi);let i=[];Ri(n,{onError:e=>t(Tr.t$(new Hr("TrackingDB._enumerateUserDBNamesFromTrackingDB() transaction error",e))),onAbort:e=>t(Tr.t$(new Hr("TrackingDB._enumerateUserDBNamesFromTrackingDB() transaction aborted",e))),onComplete:()=>{t(Tr.F2(i)),e.close()}});const o=r.getAllKeys();o.onsuccess=()=>{i=o.result.map((e=>e.toString()))}})))))}_storeUserDBNameForTracking(e){return this._openOrCreateTrackingDatabase().then(Tr.g_((e=>Promise.resolve(Tr.t$(e))),(t=>new Promise((n=>{const r=t.transaction(Gi,"readwrite"),i=r.objectStore(Gi);Ri(r,{onError:e=>n(Tr.t$(new Hr("TrackingDB._storeUserDBNameForTracking() transaction error",e))),onAbort:e=>n(Tr.t$(new Hr("TrackingDB._storeUserDBNameForTracking() transaction aborted",e))),onComplete:()=>{n(Tr.F2(void 0)),t.close()}}),i.put({key:e})})))))}_openOrCreateTrackingDatabase(){return new Promise(((e,t)=>{const n=this._idbFactory.open(Fi,1);n.onerror=()=>t(Tr.t$(new Hr(`Error creating DB ${Fi}`,n.error))),n.onsuccess=()=>{const t=n.result;t.onversionchange=()=>{t.close()},e(Tr.F2(n.result))},n.onupgradeneeded=()=>{const e=n.result;e.objectStoreNames.contains(Gi)||e.createObjectStore(Gi,{keyPath:"key"})}}))}}function zi(e){return"databases"in e&&"function"==typeof e.databases}function Vi(e,t,n=100,r=!0){return t?function(e,t=100,n=!0){return Promise.race([new Promise((t=>{const n=e.open(Li);n.onerror=()=>t(!1),n.onsuccess=()=>{t(!0),n.result.close()}})).catch((()=>!1)),new Promise((e=>setTimeout((()=>e(n)),t)))]).catch((()=>!1))}(t,n,r).then((n=>n?kr.G(new Bi(t,e)):kr.YP)).catch((()=>kr.YP)):Promise.resolve(kr.YP)}const qi=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function Hi(e,t,n,r,i){let o,s,a,c,l,u,d,h,p,g,f,m,b;for(;i>=64;){for(o=t[0],s=t[1],a=t[2],c=t[3],l=t[4],u=t[5],d=t[6],h=t[7],g=0;g<16;g++)f=r+4*g,e[g]=(255&n[f])<<24|(255&n[f+1])<<16|(255&n[f+2])<<8|255&n[f+3];for(g=16;g<64;g++)p=e[g-2],m=(p>>>17|p<<15)^(p>>>19|p<<13)^p>>>10,p=e[g-15],b=(p>>>7|p<<25)^(p>>>18|p<<14)^p>>>3,e[g]=(m+e[g-7]|0)+(b+e[g-16]|0);for(g=0;g<64;g++)m=(((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))+(l&u^~l&d)|0)+(h+(qi[g]+e[g]|0)|0)|0,b=((o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10))+(o&s^o&a^s&a)|0,h=d,d=u,u=l,l=c+m|0,c=a,a=s,s=o,o=m+b|0;t[0]+=o,t[1]+=s,t[2]+=a,t[3]+=c,t[4]+=l,t[5]+=u,t[6]+=d,t[7]+=h,r+=64,i-=64}return r}class Wi{constructor(){this.digestLength=32,this.blockSize=64,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this.finished=!1,this.reset()}static sha256(e){const t=(new Wi).update((new TextEncoder).encode(e)),n=t.digest();return t.clean(),n}reset(){return this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225,this._bufferLength=0,this._bytesHashed=0,this.finished=!1,this}clean(){for(let e=0;e<this._buffer.length;e++)this._buffer[e]=0;for(let e=0;e<this._temp.length;e++)this._temp[e]=0;this.reset()}update(e,t=e.length){if(this.finished)throw new Error("SHA256: can't update because hash was finished.");let n=0;if(this._bytesHashed+=t,this._bufferLength>0){for(;this._bufferLength<64&&t>0;)this._buffer[this._bufferLength++]=e[n++],t--;64===this._bufferLength&&(Hi(this._temp,this._state,this._buffer,0,64),this._bufferLength=0)}for(t>=64&&(n=Hi(this._temp,this._state,e,n,t),t%=64);t>0;)this._buffer[this._bufferLength++]=e[n++],t--;return this}finish(e){if(!this.finished){const e=this._bytesHashed,t=this._bufferLength,n=e/536870912|0,r=e<<3,i=e%64<56?64:128;this._buffer[t]=128;for(let e=t+1;e<i-8;e++)this._buffer[e]=0;this._buffer[i-8]=n>>>24&255,this._buffer[i-7]=n>>>16&255,this._buffer[i-6]=n>>>8&255,this._buffer[i-5]=n>>>0&255,this._buffer[i-4]=r>>>24&255,this._buffer[i-3]=r>>>16&255,this._buffer[i-2]=r>>>8&255,this._buffer[i-1]=r>>>0&255,Hi(this._temp,this._state,this._buffer,0,i),this.finished=!0}for(let t=0;t<8;t++)e[4*t+0]=this._state[t]>>>24&255,e[4*t+1]=this._state[t]>>>16&255,e[4*t+2]=this._state[t]>>>8&255,e[4*t+3]=this._state[t]>>>0&255;return this}digest(){const e=new Uint8Array(this.digestLength);return this.finish(e),e}saveState(e){for(let t=0;t<this._state.length;t++)e[t]=this._state[t]}restoreState(e,t){for(let t=0;t<this._state.length;t++)this._state[t]=e[t];this._bytesHashed=t,this.finished=!1,this._bufferLength=0}}function $i(e){const t=Wi.sha256(e);return btoa(String.fromCharCode(...t))}function Xi(e){return function(e){const t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=e[n].toString(16).padStart(2,"0");return t.join("")}(Wi.sha256(e))}var Ki=__webpack_require__(90572),Yi=__webpack_require__(84308),Zi=__webpack_require__(81933),Ji=__webpack_require__(98189),Qi=__webpack_require__(14969),eo=__webpack_require__(198);var to=__webpack_require__(10883),no=__webpack_require__(66861);function ro(e){return(0,Ki.h)((function(t,n){return e<=n}))}var io,oo=__webpack_require__(84766),so=(__webpack_require__(24231),__webpack_require__(11970),__webpack_require__(27841),__webpack_require__(66445),__webpack_require__(27902)),ao=__webpack_require__(39104),co=e=>{throw TypeError(e)},lo=(e,t,n)=>(((e,t,n)=>{t.has(e)||co("Cannot "+n)})(e,t,"read from private field"),n?n.call(e):t.get(e));class uo{constructor(){((e,t,n)=>{t.has(e)?co("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n)})(this,io,new Map)}has(e){return lo(this,io).has(e)}get(e){return lo(this,io).get(e)}set(e,t){lo(this,io).set(e,t)}delete(e){lo(this,io).delete(e)}clear(){lo(this,io).clear()}entries(){return lo(this,io).entries()}}io=new WeakMap;var ho=__webpack_require__(23537),po=__webpack_require__(57206),go=__webpack_require__(1933);function fo(e,t){if(e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every(((e,n)=>fo(e,t[n])));if(Array.isArray(e)!==Array.isArray(t))return!1;const n=Object.keys(e),r=new Set(Object.keys(t));if(n.length!==r.size)return!1;for(const i of n)if(!r.has(i)||!fo(e[i],t[i]))return!1;return!0}var mo,bo,yo,_o,vo,wo,So,ko,Io,Co,Eo,Ao,xo,To,Oo,Po,Ro,Do,No,Uo,Mo,jo,Fo,Lo,Go,Bo,zo,Vo,qo,Ho,Wo,$o,Xo,Ko,Yo,Zo,Jo=__webpack_require__(83535),Qo=Object.defineProperty,es=Object.defineProperties,ts=Object.getOwnPropertyDescriptors,ns=Object.getOwnPropertySymbols,rs=Object.prototype.hasOwnProperty,is=Object.prototype.propertyIsEnumerable,os=e=>{throw TypeError(e)},ss=(e,t,n)=>t in e?Qo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,as=(e,t)=>{for(var n in t||(t={}))rs.call(t,n)&&ss(e,n,t[n]);if(ns)for(var n of ns(t))is.call(t,n)&&ss(e,n,t[n]);return e},cs=(e,t,n)=>t.has(e)||os("Cannot "+n),ls=(e,t,n)=>(cs(e,t,"read from private field"),n?n.call(e):t.get(e)),us=(e,t,n)=>t.has(e)?os("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),ds=(e,t,n,r)=>(cs(e,t,"write to private field"),t.set(e,n),n),hs=(e,t,n)=>(cs(e,t,"access private method"),n);class ps{constructor(e){var t,n;us(this,Ao),us(this,mo,new DisposableStack),us(this,bo),us(this,yo),us(this,_o),us(this,vo),us(this,wo,!1),us(this,So,null),us(this,ko,ls(this,mo).adopt(new Map,(e=>e.clear()))),us(this,Io,ls(this,mo).adopt(new Map,(e=>e.clear()))),us(this,Co,ls(this,mo).adopt(new Map,(e=>e.clear()))),us(this,Eo,ls(this,mo).adopt(new Map,(e=>e.clear()))),ds(this,bo,e.serverPort),ds(this,yo,null!=(t=e.tracingOptions)?t:{enabled:!1}),ds(this,_o,e.retainedValueStorage),ds(this,vo,`${(0,Jo.v)()}${void 0!==e.name?`(${e.name})`:""}`),ls(this,mo).use(null==(n=ls(this,bo))?void 0:n.subscribe((e=>hs(this,Ao,To).call(this,e)))),ls(this,mo).defer((()=>{var t;return null==(t=e.retainedValueStorage)?void 0:t.clear()})),void 0!==ls(this,bo)&&this.connect()}isConnected(){return!ls(this,wo)}waitConnected(){var e,t;return null!=(t=null==(e=ls(this,So))?void 0:e.promise)?t:Promise.resolve()}connect(){var e;if(!ls(this,bo))return Promise.resolve();null==(e=ls(this,So))||e.reject(new Error("Connection attempt superseded by a newer one")),ds(this,wo,!0),ls(this,Eo).forEach((e=>e.setBufferingEnabled(!0)));const t=`${ls(this,vo)}|${(0,Jo.v)()}`,n=(0,go.B)();return ds(this,So,{attempId:t,resolve:()=>{var e;(null==(e=ls(this,So))?void 0:e.attempId)===t&&(ds(this,wo,!1),ds(this,So,null),ls(this,Eo).forEach((e=>e.setBufferingEnabled(!1))),n.resolve())},reject:e=>{var r;(null==(r=ls(this,So))?void 0:r.attempId)===t&&(ds(this,wo,!1),ds(this,So,null),n.reject(e))},promise:n.promise}),ls(this,bo).send({kind:"handshake",id:t,subscriptions:[...ls(this,ko).values()].map((e=>({key:e.key,clientId:e.clientId,subscriptionId:e.portId,timestamp:e.timestamp}))),retainedValues:[...ls(this,Co).entries()].map((([e,t])=>({key:e,value:t.value,clientId:t.lastWriterClientId,timestamp:t.modifiedTimestamp})))}),n.promise}createPort(e){const t=null==e?void 0:e.name,n=`${ls(this,vo)}|${(0,Jo.v)()}${void 0!==t?`(${t})`:""}`,r=ls(this,mo).use(new gs({send:e=>hs(this,Ao,Ro).call(this,n,e),notifyDispose:()=>hs(this,Ao,xo).call(this,n),shouldBufferMessages:ls(this,wo),tracingOptions:void 0!==(null==e?void 0:e.tracingOptions)?e.tracingOptions:ls(this,yo),portId:n}));return ls(this,Eo).set(n,r),r}[Symbol.dispose](){ls(this,mo).dispose()}}mo=new WeakMap,bo=new WeakMap,yo=new WeakMap,_o=new WeakMap,vo=new WeakMap,wo=new WeakMap,So=new WeakMap,ko=new WeakMap,Io=new WeakMap,Co=new WeakMap,Eo=new WeakMap,Ao=new WeakSet,xo=function(e){const t=ls(this,Eo).get(e);if(void 0!==t){for(const[t,n]of ls(this,ko).entries())n.portId===e&&hs(this,Ao,Fo).call(this,e,{kind:"unsubscribe",subscriptionId:t});t[Symbol.dispose](),ls(this,Eo).delete(e)}},To=function(e){switch(e.kind){case"publish":hs(this,Ao,Po).call(this,e);break;case"handshake-ack":hs(this,Ao,Oo).call(this,e)}},Oo=function(e){var t,n;if((null==(t=ls(this,So))?void 0:t.attempId)===e.id){ls(this,So).resolve();for(const t of e.newerRetainedValues)ls(this,Co).set(t.key,{value:t.value,lastWriterClientId:t.clientId,modifiedTimestamp:t.timestamp}),null==(n=ls(this,_o))||n.set(t.key,t.value),hs(this,Ao,Bo).call(this,{kind:"publish",key:t.key,value:t.value,timestamp:t.timestamp,clientId:t.clientId})}},Po=function(e){var t,n;const r=ls(this,Co).get(e.key);if(void 0!==r){if(e.timestamp<=r.modifiedTimestamp)return;ls(this,Co).set(e.key,{value:e.value,lastWriterClientId:e.clientId,modifiedTimestamp:e.timestamp}),null==(t=ls(this,_o))||t.set(e.key,e.value)}if(null==(n=e.route)||!n.includes(ls(this,vo)))return void 0!==e.toSubscriptionId?hs(this,Ao,Lo).call(this,e):void 0!==e.toClientId?hs(this,Ao,Go).call(this,e):hs(this,Ao,Bo).call(this,e)},Ro=function(e,t){switch(t.kind){case"publish":hs(this,Ao,Do).call(this,t);break;case"subscribe":hs(this,Ao,Uo).call(this,e,t);break;case"unsubscribe":hs(this,Ao,Fo).call(this,e,t);break;case"handshake":hs(this,Ao,No).call(this,e,t)}},Do=function(e){var t,n,r;const i=ls(this,Co).get(e.key);void 0!==i&&e.timestamp>i.modifiedTimestamp?(ls(this,Co).set(e.key,{value:e.value,lastWriterClientId:e.clientId,modifiedTimestamp:e.timestamp}),null==(t=ls(this,_o))||t.set(e.key,e.value)):void 0!==i&&hs(this,Ao,Go).call(this,{kind:"publish",key:e.key,value:i.value,timestamp:i.modifiedTimestamp,clientId:i.lastWriterClientId,route:[ls(this,vo)],toClientId:e.clientId});const o=((e,t)=>es(e,ts(t)))(as({},e),{route:[...null!=(n=e.route)?n:[],ls(this,vo)]});void 0!==e.toClientId?hs(this,Ao,Go).call(this,o):hs(this,Ao,Bo).call(this,o),null==(r=ls(this,bo))||r.send(o)},No=function(e,t){var n,r;const i=ls(this,Eo).get(e);if(void 0===i)return void(0,ho.P)("No port for handshake message",e);for(const n of t.subscriptions)hs(this,Ao,Mo).call(this,{key:n.key,portId:e,timestamp:n.timestamp,clientId:n.clientId,subscriptionId:n.subscriptionId});const o=[],s=[];for(const e of t.retainedValues){const t=ls(this,Co).get(e.key);void 0!==t&&t.modifiedTimestamp>=e.timestamp?o.push({key:e.key,value:t.value,timestamp:t.modifiedTimestamp,clientId:t.lastWriterClientId}):(ls(this,Co).set(e.key,{value:e.value,lastWriterClientId:e.clientId,modifiedTimestamp:e.timestamp}),null==(n=ls(this,_o))||n.set(e.key,e.value),s.push({key:e.key,value:e.value,timestamp:e.timestamp,clientId:e.clientId}))}i.outbound({kind:"handshake-ack",id:t.id,newerRetainedValues:o}),null==(r=ls(this,bo))||r.send(t);for(const e of s)hs(this,Ao,Bo).call(this,{kind:"publish",key:e.key,value:e.value,timestamp:e.timestamp,clientId:e.clientId,route:[ls(this,vo)],excludeSubscriptionIds:t.subscriptions.map((e=>e.subscriptionId))})},Uo=function(e,t){var n;ls(this,ko).has(t.subscriptionId)?(0,ho.P)("Subscription with this id already exists",t.subscriptionId):(hs(this,Ao,Mo).call(this,as({portId:e},t)),void 0!==t.retain&&hs(this,Ao,jo).call(this,t,t.retain.value,e),null==(n=ls(this,bo))||n.send(t))},Mo=function(e){const t={key:e.key,portId:e.portId,timestamp:e.timestamp,clientId:e.clientId};ls(this,ko).set(e.subscriptionId,t);let n=ls(this,Io).get(e.key);void 0===n&&(n=new Set,ls(this,Io).set(e.key,n)),n.add(e.subscriptionId)},jo=function(e,t,n){var r,i,o,s,a;if("write"===(null==(r=e.retain)?void 0:r.kind)&&e.timestamp>(null!=(o=null==(i=ls(this,Co).get(e.key))?void 0:i.modifiedTimestamp)?o:Number.MIN_SAFE_INTEGER)&&!fo(t,null==(s=ls(this,Co).get(e.key))?void 0:s.value))ls(this,Co).set(e.key,{value:t,lastWriterClientId:e.clientId,modifiedTimestamp:e.timestamp}),null==(a=ls(this,_o))||a.set(e.key,t),void 0!==ls(this,Eo).get(n)&&hs(this,Ao,Bo).call(this,{kind:"publish",key:e.key,value:t,timestamp:e.timestamp,clientId:e.clientId,route:[ls(this,vo)],excludeSubscriptionIds:[e.subscriptionId]});else{const r=ls(this,Co).get(e.key);if(void 0===r)return;void 0!==ls(this,Eo).get(n)&&!fo(t,r.value)&&hs(this,Ao,Lo).call(this,{kind:"publish",key:e.key,value:r.value,timestamp:r.modifiedTimestamp,clientId:r.lastWriterClientId,route:[ls(this,vo)],toSubscriptionId:e.subscriptionId})}},Fo=function(e,t){var n,r;const i=ls(this,ko).get(t.subscriptionId);if(void 0===i)return void(0,ho.P)("No subscription with this id",t.subscriptionId);if(i.portId!==e)return void(0,ho.P)("Subscription does not belong to this port",t.subscriptionId,e);ls(this,ko).delete(t.subscriptionId);const o=ls(this,Io).get(i.key);void 0!==o&&(o.delete(t.subscriptionId),0===o.size&&(ls(this,Io).delete(i.key),ls(this,Co).delete(i.key),null==(n=ls(this,_o))||n.delete(i.key))),null==(r=ls(this,bo))||r.send(t)},Lo=function(e){const t=ls(this,ko).get(e.toSubscriptionId);if(void 0===t)return void(0,ho.P)("No subscription with this id",e.toSubscriptionId);const n=ls(this,Eo).get(t.portId);void 0!==n?n.outbound(e):(0,ho.P)("No port for subscription with this id",e.toSubscriptionId)},Go=function(e){const t=hs(this,Ao,zo).call(this,e.key,e.toClientId,void 0);for(const n of t)n.outbound(e)},Bo=function(e){const t=hs(this,Ao,zo).call(this,e.key,void 0,e.excludeSubscriptionIds);for(const n of t)n.outbound(e)},zo=function(e,t,n){const r=new Set,i=ls(this,Io).get(e);for(const e of null!=i?i:[]){if(n&&n.includes(e))continue;const i=ls(this,ko).get(e);if(void 0===i||void 0!==t&&t!==i.clientId)continue;const o=ls(this,Eo).get(i.portId);void 0!==o&&r.add(o)}return r};class gs{constructor(e){var t;us(this,Ko),us(this,Vo,new DisposableStack),us(this,qo),us(this,Ho),us(this,Wo,ls(this,Vo).use(new po.x)),us(this,$o,[]),us(this,Xo),ds(this,Ho,e.send),ds(this,Xo,e.shouldBufferMessages),ls(this,Vo).defer((()=>e.notifyDispose())),ds(this,qo,null!=(t=e.tracingOptions)?t:{enabled:!1}),this.portId=e.portId}send(e){hs(this,Ko,Zo).call(this,"inbound",e),ls(this,Xo)&&"handshake"!==e.kind?ls(this,$o).push(e):(hs(this,Ko,Yo).call(this),ls(this,Ho).call(this,e))}subscribe(e){const t=new DisposableStack;return ls(this,Vo).defer((()=>t.dispose())),t.use(ls(this,Wo).subscribe({next:e,complete:()=>t.dispose()})),t}[Symbol.dispose](){ls(this,Vo).dispose()}outbound(e){hs(this,Ko,Zo).call(this,"outbound",e),ls(this,Wo).next(e)}setBufferingEnabled(e){ds(this,Xo,e),e||hs(this,Ko,Yo).call(this)}}Vo=new WeakMap,qo=new WeakMap,Ho=new WeakMap,Wo=new WeakMap,$o=new WeakMap,Xo=new WeakMap,Ko=new WeakSet,Yo=function(){if(ls(this,$o).length>0){for(const e of ls(this,$o))ls(this,Ho).call(this,e);ls(this,$o).length=0}},Zo=function(e,t){};var fs,ms,bs,ys=e=>{throw TypeError(e)},_s=(e,t,n)=>t.has(e)||ys("Cannot "+n),vs=(e,t,n)=>(_s(e,t,"read from private field"),n?n.call(e):t.get(e)),ws=(e,t,n)=>t.has(e)?ys("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n);class Ss{constructor(e={}){ws(this,fs,new DisposableStack),ws(this,ms),((e,t,n,r)=>{_s(e,t,"write to private field"),t.set(e,n)})(this,ms,vs(this,fs).use(new ps(e)))}createPort(e){return vs(this,ms).createPort(e)}[Symbol.dispose](){vs(this,fs).dispose()}}fs=new WeakMap,ms=new WeakMap,function(e){e.background="message:to-priv",e.sidePanelCloseStatus="side-panel-close-status",e.messageBusPort="message-bus-port"}(bs||(bs={}));var ks,Is;function Cs(){return self.chrome&&self.chrome.runtime&&self.chrome.runtime.lastError}function Es(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function As(){return Es()+Es()+"-"+Es()+"-"+Es()+"-"+Es()+"-"+Es()+Es()+Es()}!function(e){e.OpenSubscriptionDialog="OPEN_SUBSCRIPTION_DIALOG",e.SetUserInfo="SET_USER_INFO",e.ReloadBgPage="RELOAD_BACKGROUND_PAGE",e.NetworkServiceRequest="NETWORK_SERVICE_REQUEST",e.NetworkServiceResponse="NETWORK_SERVICE_RESPONSE"}(ks||(ks={})),function(e){e[e.success=0]="success",e[e.successWithEmpty=1]="successWithEmpty",e[e.alreadyMigrated=2]="alreadyMigrated"}(Is||(Is={}));function xs(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}var Ts;!function(e){class t extends Error{constructor(e,t=1e3){super(`SafePromiseError: ${String(e)}`),this.stack=(super.stack||"").slice(t)}}function n(e){return e.catch((e=>e instanceof Error&&!e.stack?Promise.reject(new t(e.message)):Promise.reject(e)))}e.fromPromise=n,e.fromAsync=function(e){return(...t)=>n(e(...t))},e.noop=e.fromPromise(Promise.resolve()),e.create=function(e){return n(new Promise(e))},e.sync=function(e){return n(new Promise(((t,n)=>t(e()))))},e.createCompletionSource=Ke.II,e.delay=Ke.gw}(Ts||(Ts={}));const Os=q.create("universal.bg.prefs");class Ps{constructor(e){this._api=e,this.get=async e=>{try{const t=await this._api.get(e);return Array.isArray(e)?t:t[e]}catch(t){return Os.warn("prefs get error:",t),Array.isArray(e)?{}:void 0}},this.getByName=async e=>await this.get(e),this.set=async(e,t)=>{const n="string"==typeof e?{[e]:t}:e;try{await this._api.set(n)}catch(e){Os.warn("prefs set error",e)}},this.setByName=async(e,t)=>await this.set(e,t),this.all=async()=>{try{return await this._api.getAll()}catch(e){return Os.warn("prefs get error:",e),{}}},this.remove=async e=>{try{await this._api.remove(e)}catch(e){Os.warn("prefs remove error",e)}},this.clearAll=async()=>{try{await this._api.removeAll()}catch(e){Os.warn("prefs clearAll error",e)}}}}const Rs=q.create("extension-api.message"),Ds=()=>`cs-bg-runtime-${N().appConfig.extensionId}`,Ns=()=>{};class Us{constructor(){this._listeners={},this._queue={},this.fire=(e,t,n=Ns,r)=>{const i=this._listeners[e]||[];i.length?i.forEach((e=>e(t,n,r))):(this._queue[e]=this._queue[e]||[],this._queue[e].push({content:t,callback:n,sender:r}))},this.unlisten=(e,t)=>{const n=this._listeners[e]||[],r=n.indexOf(t);-1!==r&&(1===n.length?delete this._listeners[e]:n.splice(r,1))},this.listenOnce=(e,t)=>{const n=(r,i,o)=>{this.unlisten(e,n),t&&t(r,i,o)};this.listen(e,n)},this.listen=(e,t)=>{this._listeners[e]=this._listeners[e]||[],-1===this._listeners[e].indexOf(t)&&this._listeners[e].push(t);const n=this._queue[e]||[];if(n.length){for(const e of n)try{t(e.content,e.callback,e.sender)}catch(e){Rs.error("exception during proccesing buffered messages",e)}delete this._queue[e]}}}}const Ms=q.create("extension-api.message.bg"),js="popup",Fs="devtoolsPanel",Ls="sidePanel";function Gs(e){const{browser:t,extensionType:n}=N().bundleInfo;if(!e)return"safariIOSWebExtension"===n||"safariWebExtension"===n;const r="firefox"===t?/^moz-extension:\/\/.*\/src\/popup.html$/:"safariWebExtension"===n||"safariIOSWebExtension"===n?/^safari-web-extension:\/\/.*\/src\/popup.html$/:"chrome"===t||"edge"===t?chrome&&chrome.runtime&&chrome.runtime.id?new RegExp(chrome.runtime.id+"/src/popup.html"):void 0:(0,h.vE)(t);return void 0!==r&&r.test(e)}function Bs(e){const{browser:t}=N().bundleInfo;if("chrome"!==t&&"edge"!==t||!e)return!1;const n=chrome&&chrome.runtime&&chrome.runtime.id?new RegExp(chrome.runtime.id+"/src/sidePanel.html"):void 0;return void 0!==n&&n.test(e)}function zs(e){const{browser:t}=N().bundleInfo;return e&&"chrome"===t&&chrome&&chrome.runtime&&chrome.runtime.id&&new RegExp(chrome.runtime.id+"/src/devtoolsPanel.html").test(e)}class Vs{constructor(e,t,n,r,i){this.onPortConnection=e,this._getActiveTab=t,this._sendMessageToTab=n,this._getAllTabs=r,this._browserRuntimeOnMessageAddListener=i,this.kind="background-message-api",this.topFrameId="0",this._callbacks={},this._tabPorts={popup:[],devtoolsPanel:[]},this._messageHelper=new Us,this.toFocused=(e,t)=>Ts.fromPromise(this._getActiveTab().then((({id:n,url:r}={})=>{if(n)return Gs(r)?Ms.warn(`toFocussed not allowed for popup when it open like regular tab ${e}`,t):this._sendMessageToPorts({type:e,content:t,callid:As()},n)}))),this._initPortListener=e=>{var t;if(e.name===bs.background){const{sender:n}=e;let r=(null==n?void 0:n.tab)?n.tab.id:js;if(n){if(r=function(e){if(e.tab)return e.tab.id;const t=e.url;if(t){if(Gs(t))return js;if(Bs(t))return Ls;if(zs(t))return Fs}return}(e.sender),r){const t=this._tabPorts[r]||[];this._tabPorts[r]=t,t.push(e),e.onDisconnect((()=>{const t=this._tabPorts[r];t&&t.splice(t.indexOf(e),1)}))}else Kt().bgPage.portIdNotFound({hasTab:!!(null==n?void 0:n.tab),hasUrl:!!(null==n?void 0:n.url),hasFrameId:!!(null==n?void 0:n.frameId)});const i=(null===(t=n.tab)||void 0===t?void 0:t.url)||"";0===i.indexOf("http")&&this._messageHelper.fire("tab-connected",{tab:r,url:i})}e.onMessage((t=>{const i=({callid:t,content:i,type:o})=>{this._callbacks[t]&&(this._callbacks[t](i),delete this._callbacks[t]);this._messageHelper.fire(o,i,(n=>e.postMessage({content:n,callid:t})),n&&n.tab?{tabId:r,frameId:void 0===n.frameId?void 0:String(n.frameId)}:{tabId:r})};"tab-connected"===t.type?this._getActiveTab().then((({url:e}={})=>{t.content={tab:js,url:e},i(t)})):i(t)}))}},e(this._initPortListener)}listenToRuntimeMessage(e,t){return this._browserRuntimeOnMessageAddListener(((n,r,i)=>(e(n)&&t(n).then((e=>i(e))),!0)))}start(){throw new Error("Method not implemented.")}async _findDestinationTab(e){return(await this._getAllTabs()).find((t=>String(t.id)===String(e)))}async _sendMessageToPorts(e,t,n){var r;try{const i=null===(r=this._tabPorts[t])||void 0===r?void 0:r.filter((e=>!J(n)||J(e.sender.frameId)&&e.sender.frameId===n));if(null==i?void 0:i.length)i.forEach((t=>t.postMessage(e)));else if(isNaN(Number(t)))Ms.warn(`tab with id ${t} couldn't be found and not valid to send a tab message`);else{const r=await this._findDestinationTab(t);if(!r||"complete"!==r.status)return;const i={type:Ds(),data:e};Ms.warn("no specified port on current destination"),this._sendMessageToTab(i,Number(t),n).catch((async e=>{const n=await this._findDestinationTab(t);Kt().sendToTabFailed({isOpen:!!n,status:null==n?void 0:n.status},e)}))}}catch(r){Ms.error("send message to tab emit an error",r,{tabId:t,frameId:n,msg:e})}}getPortExists(e){return!!this._tabPorts[e]}sendTo(e,t,n,r){const{tabId:i,frameId:o=null}="object"==typeof e?e:{tabId:String(e)},s={type:t,content:n};r&&"function"==typeof r&&(s.callid=As(),this._callbacks[s.callid]=r),this._sendMessageToPorts(s,i,o?Number(o):void 0)}listen(e,t){this._messageHelper.listen(e,t)}}var qs=__webpack_require__(89662),Hs=__webpack_require__(70512);const Ws={events:{documentSessionDisposed:(0,qs.d)()},state:{activeTabId:(0,Hs.x)(),"activeDocument/:tabId":(0,Hs.x)(),"agentsFeatureFlags/:tabId":(0,Hs.x)(),lastActivePanelAgentId:(0,Hs.x)(),activePanelAgentId:(0,Hs.x)()}};function $s(e){return`agents/${e}`}function Xs(e,...t){return Ks(e,...t)}function Ks(e,...t){return`agents/@impl/${e}${Js(t)}`}function Ys(e,t,...n){return Zs(e,t,...n)}function Zs(e,t,...n){return`${$s(e)}/${t}${Js(n)}`}function Js(e){const t=e.filter(Boolean).join("/");return t?`/${t}`:""}class Qs{constructor(e){this._experimentClient=e}isAssigned(e,...t){if(e instanceof ge.Cc)return this._experimentClient.isGateEnabled(e);const n=this._experimentClient.getTreatment(e);return null!==n&&n!==ge.q4&&t.includes(n)}getTreatment(e){const t=this._experimentClient.getTreatment(e);return t===ge.q4?null:t}peekExperiment(e,...t){const n=this._experimentClient.peekTreatment(e);return null!==n&&n!==ge.q4&&t.includes(n)}}var ea=__webpack_require__(24666),ta=__webpack_require__(84714);var na=__webpack_require__(12838),ra=__webpack_require__(11546);const ia={events:{"panelUIAction/:docId":(0,qs.d)(),"panelUIResponse/:docId":(0,qs.d)(),"trackingEvent/:docId":(0,qs.d)()},state:{"agentState/:docId":(0,Hs.x)({codec:ra.mg}),"capiSessionId/:docId":(0,Hs.x)(),"textInfo/:docId":(0,Hs.x)(),"followUpTopics/:docId":(0,Hs.x)()}};var oa=__webpack_require__(30349),sa=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(e){i(e)}},s=e=>{try{a(n.throw(e))}catch(e){i(e)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));const aa={id:oa.p,protocol:ia,integrations:{documentActivate:e=>sa(void 0,null,(function*(){const{activate:t}=yield Promise.all([__webpack_require__.e(3806),__webpack_require__.e(6214),__webpack_require__.e(8623),__webpack_require__.e(4064),__webpack_require__.e(1258)]).then(__webpack_require__.bind(__webpack_require__,1258));return t(e)})),textDecorationsActivate:e=>sa(void 0,null,(function*(){const{activate:t}=yield Promise.all([__webpack_require__.e(3806),__webpack_require__.e(6214),__webpack_require__.e(8623),__webpack_require__.e(7494)]).then(__webpack_require__.bind(__webpack_require__,95087));return t(e)})),inlineCardActivate:e=>sa(void 0,null,(function*(){const{activate:t}=yield Promise.all([__webpack_require__.e(3806),__webpack_require__.e(6214),__webpack_require__.e(8623),__webpack_require__.e(1852)]).then(__webpack_require__.bind(__webpack_require__,31852));return t(e)})),assistantActivate:e=>sa(void 0,null,(function*(){const{activate:t}=yield Promise.all([__webpack_require__.e(3806),__webpack_require__.e(7297),__webpack_require__.e(6214),__webpack_require__.e(9566),__webpack_require__.e(9718),__webpack_require__.e(8623),__webpack_require__.e(5120),__webpack_require__.e(1601),__webpack_require__.e(3885),__webpack_require__.e(5984),__webpack_require__.e(4064),__webpack_require__.e(5339)]).then(__webpack_require__.bind(__webpack_require__,45339));return t(e)}))}},ca={events:{"panelUIAction/:docId":(0,qs.d)(),"trackingEvent/:docId":(0,qs.d)()},state:{"agentState/:docId":(0,Hs.x)(),"capiSessionId/:docId":(0,Hs.x)(),"textLength/:docId":(0,Hs.x)(),"selectedVoice/:docId":(0,Hs.x)()}};var la=__webpack_require__(25797),ua=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(e){i(e)}},s=e=>{try{a(n.throw(e))}catch(e){i(e)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));const da={id:la.k,protocol:ca,integrations:{documentActivate:e=>ua(void 0,null,(function*(){const{activate:t}=yield Promise.all([__webpack_require__.e(3806),__webpack_require__.e(7297),__webpack_require__.e(6214),__webpack_require__.e(9566),__webpack_require__.e(9718),__webpack_require__.e(8623),__webpack_require__.e(5120),__webpack_require__.e(1601),__webpack_require__.e(3885),__webpack_require__.e(2654),__webpack_require__.e(213),__webpack_require__.e(9453),__webpack_require__.e(8490),__webpack_require__.e(2768),__webpack_require__.e(7023),__webpack_require__.e(1464),__webpack_require__.e(9057)]).then(__webpack_require__.bind(__webpack_require__,79057));return t(e)})),assistantActivate:e=>ua(void 0,null,(function*(){const{activate:t}=yield Promise.all([__webpack_require__.e(3806),__webpack_require__.e(7297),__webpack_require__.e(6214),__webpack_require__.e(9566),__webpack_require__.e(9718),__webpack_require__.e(8623),__webpack_require__.e(5120),__webpack_require__.e(1601),__webpack_require__.e(3885),__webpack_require__.e(9453),__webpack_require__.e(8490),__webpack_require__.e(5984),__webpack_require__.e(2120),__webpack_require__.e(4805),__webpack_require__.e(5522)]).then(__webpack_require__.bind(__webpack_require__,5522));return t(e)})),textDecorationsActivate:e=>ua(void 0,null,(function*(){const{activate:t}=yield __webpack_require__.e(6998).then(__webpack_require__.bind(__webpack_require__,46998));return t(e)})),inlineCardActivate:e=>ua(void 0,null,(function*(){const{activate:t}=yield __webpack_require__.e(7252).then(__webpack_require__.bind(__webpack_require__,97252));return t(e)}))}},ha={events:{"panelUIAction/:docId":(0,qs.d)(),"trackingEvent/:docId":(0,qs.d)()},state:{"agentState/:docId":(0,Hs.x)(),"capiSessionId/:docId":(0,Hs.x)(),"wordCount/:docId":(0,Hs.x)()}};var pa=__webpack_require__(74623),ga=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(e){i(e)}},s=e=>{try{a(n.throw(e))}catch(e){i(e)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));const fa={id:pa.Rn,protocol:ha,integrations:{documentActivate:e=>ga(void 0,null,(function*(){const{activate:t}=yield Promise.all([__webpack_require__.e(3806),__webpack_require__.e(7297),__webpack_require__.e(6214),__webpack_require__.e(9566),__webpack_require__.e(9718),__webpack_require__.e(8623),__webpack_require__.e(5120),__webpack_require__.e(1601),__webpack_require__.e(3885),__webpack_require__.e(2654),__webpack_require__.e(213),__webpack_require__.e(9453),__webpack_require__.e(8490),__webpack_require__.e(2768),__webpack_require__.e(7023),__webpack_require__.e(1464),__webpack_require__.e(810),__webpack_require__.e(2165)]).then(__webpack_require__.bind(__webpack_require__,72165));return t(e)})),textDecorationsActivate:e=>ga(void 0,null,(function*(){const{activate:t}=yield Promise.all([__webpack_require__.e(7297),__webpack_require__.e(9566),__webpack_require__.e(9718),__webpack_require__.e(5120),__webpack_require__.e(1601),__webpack_require__.e(9453),__webpack_require__.e(8490),__webpack_require__.e(810),__webpack_require__.e(7608)]).then(__webpack_require__.bind(__webpack_require__,98121));return t(e)})),inlineCardActivate:e=>ga(void 0,null,(function*(){const{activate:t}=yield __webpack_require__.e(7539).then(__webpack_require__.bind(__webpack_require__,77539));return t(e)})),assistantActivate:e=>ga(void 0,null,(function*(){const{activate:t}=yield Promise.all([__webpack_require__.e(3806),__webpack_require__.e(7297),__webpack_require__.e(6214),__webpack_require__.e(9566),__webpack_require__.e(9718),__webpack_require__.e(8623),__webpack_require__.e(5120),__webpack_require__.e(1601),__webpack_require__.e(3885),__webpack_require__.e(9453),__webpack_require__.e(8490),__webpack_require__.e(5984),__webpack_require__.e(2120),__webpack_require__.e(810),__webpack_require__.e(4805),__webpack_require__.e(1794)]).then(__webpack_require__.bind(__webpack_require__,30942));return t(e)}))}};var ma=__webpack_require__(82550);const ba={events:{"panelUIAction/:docId":(0,qs.d)(),"trackingEvent/:docId":(0,qs.d)()},state:{"agentState/:docId":(0,Hs.x)(),"audience/:docId":(0,Hs.x)(),"capiSessionId/:docId":(0,Hs.x)(),"textInfo/:docId":(0,Hs.x)(),"hasTextChanges/:docId":(0,Hs.x)()}};var ya=__webpack_require__(25249),_a=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(e){i(e)}},s=e=>{try{a(n.throw(e))}catch(e){i(e)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));const va={id:ya.oJ,protocol:ba,integrations:{documentActivate:e=>_a(void 0,null,(function*(){const{activate:t}=yield Promise.all([__webpack_require__.e(3806),__webpack_require__.e(7297),__webpack_require__.e(6214),__webpack_require__.e(9566),__webpack_require__.e(9718),__webpack_require__.e(8623),__webpack_require__.e(5120),__webpack_require__.e(1601),__webpack_require__.e(3885),__webpack_require__.e(2654),__webpack_require__.e(213),__webpack_require__.e(9453),__webpack_require__.e(8490),__webpack_require__.e(2768),__webpack_require__.e(7023),__webpack_require__.e(1464),__webpack_require__.e(3451),__webpack_require__.e(981)]).then(__webpack_require__.bind(__webpack_require__,90981));return t(e)})),textDecorationsActivate:e=>_a(void 0,null,(function*(){const{activate:t}=yield Promise.all([__webpack_require__.e(3806),__webpack_require__.e(7297),__webpack_require__.e(6214),__webpack_require__.e(9566),__webpack_require__.e(9718),__webpack_require__.e(8623),__webpack_require__.e(5120),__webpack_require__.e(1601),__webpack_require__.e(3885),__webpack_require__.e(2654),__webpack_require__.e(213),__webpack_require__.e(9453),__webpack_require__.e(8490),__webpack_require__.e(2768),__webpack_require__.e(7023),__webpack_require__.e(1464),__webpack_require__.e(3451),__webpack_require__.e(2980)]).then(__webpack_require__.bind(__webpack_require__,72980));return t(e)})),inlineCardActivate:e=>_a(void 0,null,(function*(){const{activate:t}=yield Promise.all([__webpack_require__.e(3806),__webpack_require__.e(7297),__webpack_require__.e(6214),__webpack_require__.e(9566),__webpack_require__.e(9718),__webpack_require__.e(8623),__webpack_require__.e(5120),__webpack_require__.e(1601),__webpack_require__.e(3885),__webpack_require__.e(2654),__webpack_require__.e(213),__webpack_require__.e(9453),__webpack_require__.e(8490),__webpack_require__.e(2768),__webpack_require__.e(7023),__webpack_require__.e(1464),__webpack_require__.e(3451),__webpack_require__.e(4909)]).then(__webpack_require__.bind(__webpack_require__,64909));return t(e)})),assistantActivate:e=>_a(void 0,null,(function*(){const{activate:t}=yield Promise.all([__webpack_require__.e(3806),__webpack_require__.e(7297),__webpack_require__.e(6214),__webpack_require__.e(9566),__webpack_require__.e(9718),__webpack_require__.e(8623),__webpack_require__.e(5120),__webpack_require__.e(1601),__webpack_require__.e(3885),__webpack_require__.e(2654),__webpack_require__.e(213),__webpack_require__.e(9453),__webpack_require__.e(8490),__webpack_require__.e(2768),__webpack_require__.e(5984),__webpack_require__.e(7023),__webpack_require__.e(1464),__webpack_require__.e(3451),__webpack_require__.e(6598)]).then(__webpack_require__.bind(__webpack_require__,96598));return t(e)}))}};na.d.id,ma.d.id;function wa(e){return{[Symbol.asyncDispose]:async()=>{if(!e)return;const t=await e;t&&(!function(e){return Symbol.dispose in e}(t)?function(e){return Symbol.asyncDispose in e}(t)&&await t[Symbol.asyncDispose]():t[Symbol.dispose]())}}}const Sa={activeAgentPanelId:null,activeDocumentIdStack:[]},ka=1e3,Ia=6e4,Ca=36e5,Ea=24*Ca;function Aa(e){return e*Ea}function xa(e){return e*ka}function Ta(e){return e*Ia}function Oa(e){return e*Ca}class Pa{constructor(e){var t,n,r;this._disposables=new AsyncDisposableStack,this._logger=q.create("Agents.BackgroundIntegration"),this._integrationInitTimestamp=Date.now(),this._retainedValueStorage=new uo,this._messageBusServer=this._disposables.use(new Ss({tracingOptions:{enabled:!1,color:"green"},retainedValueStorage:this._retainedValueStorage})),this._agentPlatformBus=this._disposables.use((0,so.kX)({port:this._messageBusServer.createPort({name:Xs("bg")}),clientId:Ks("bg"),keyPrefix:"agents/@impl",protocol:Ws})),this._onContentScriptDisconnect=new Er.x,this._activePortConnections=0,this._experimentClient=e.experimentClient,this._activeTabId=e.activeTabId,this._featureState=e.agentsFeatureState,this._storeActions=e.agentsFeatureBgActions,this._maxIntegratedDocuments=null!==(t=e.maxIntegratedDocuments)&&void 0!==t?t:20,this._messageBusDetailedTelemetryConfig=null!==(n=e.messageBusTelemetryConfig)&&void 0!==n?n:U.h.create(void 0),this._activePanelAgentId=this._disposables.use(this._agentPlatformBus.state.activePanelAgentId.create(null!==(r=this._featureState.get().activeAgentPanelId)&&void 0!==r?r:Sa.activeAgentPanelId)),this._listenToScriptConnections(),(0,ao.iR)("agentsBackground",{getMessageBusRetainedValues:()=>this._retainedValueStorage.entries()}),this._initializeAgentPlatformBus(),this._maybeInitializeMessageBusDetailedTelemetry(),this._runBackgroundActivations()}_listenToScriptConnections(){ZJ().browserApi.message.onPortConnection((e=>{if(e.name!==bs.messageBusPort)return;const t=function(e){var t;if("number"==typeof(null===(t=e.tab)||void 0===t?void 0:t.id))return e.tab.id;if(Bs(e.url))return Ls;if(Gs(e.url))return js;if(zs(e.url))return Fs;return"<unknown>"}(e.sender),n=this._disposables.use(new DisposableStack);n.defer((()=>{this._activePortConnections--,this._onContentScriptDisconnect.next(t),this._logger.debug("Disposed MessageBusPort for Script",t)})),this._logger.debug("Creating MessageBusPort for Script connection",t),this._activePortConnections++,e.onDisconnect((()=>n.dispose()));const r=n.use(this._messageBusServer.createPort({name:`tab/${"<unknown>"===t?crypto.randomUUID():String(t)}`}));n.use(r.subscribe((n=>{try{e.postMessage(n)}catch(e){Kt().agents.bg.error("Error sending message to Content Script port",e),this._logger.error("Error sending message to Content Script port",e,{tabId:t})}}))),e.onMessage((e=>{n.disposed||r.send(e)}))}))}_initializeAgentPlatformBus(){const e=this._disposables.use(this._agentPlatformBus.state.activeTabId.create(this._activeTabId.get()));this._disposables.adopt(this._activeTabId.subscribe((t=>e.set(t))),(e=>e.unsubscribe()));const t=this._disposables.use(this._agentPlatformBus.state.lastActivePanelAgentId.view(null));this._disposables.adopt(t.pipe(ro(1)).subscribe((e=>{this._logger.debug(`Active panel agent ID changed to ${String(e)}`),this._activePanelAgentId.set(e),this._storeActions.setActiveAgentPanelId(e)})),(e=>e.unsubscribe())),this._disposables.adopt(this._onContentScriptDisconnect.pipe((0,Ki.h)((e=>e===Ls))).subscribe((()=>{this._logger.debug("Side panel disconnected, clearing active panel agent ID"),this._activePanelAgentId.set(null),this._storeActions.setActiveAgentPanelId(null)})),(e=>e.unsubscribe()));const n=this._disposables.use(function(e){const t=new DisposableStack,n=t.use(e.state.activeTabId.view(null)),r=U.h.create(null);return t.adopt(n.pipe((0,ea.x)(),(0,Lr.w)((t=>null===t?(0,ta.of)(null):(0,so.N4)((()=>e.state.activeDocument.view(t,null)))))).subscribe((e=>r.set(e))),(e=>e.unsubscribe())),{activeDocument:r,[Symbol.dispose]:()=>t.dispose()}}(this._agentPlatformBus)).activeDocument.view((e=>{var t;return null!==(t=null==e?void 0:e.id)&&void 0!==t?t:null}));this._disposables.adopt(n.subscribe((e=>{var t;if(this._logger.debug(`Active document ID changed to ${String(e)}`),null===e)return;const{stack:n,dropped:r}=function(e,t,n){const r=[],i=[...e.filter((e=>e!==t)),t];if(i.length>n){const e=i.slice(0,i.length-n);for(const t of e)r.push(t)}return{stack:i.slice(-n),dropped:r}}(null!==(t=this._featureState.get().activeDocumentIdStack)&&void 0!==t?t:Sa.activeDocumentIdStack,e,this._maxIntegratedDocuments);this._logger.debug("Active document ID stack changed",n),r.length>0&&this._logger.debug("Disposing old document integrations",r);for(const e of r)this._agentPlatformBus.events.documentSessionDisposed.emit(e);this._storeActions.setActiveDocumentIdStack(n)})),(e=>e.unsubscribe())),Kt().agents.bg.info("Initialized AgentPlatformBus successfully.")}_maybeInitializeMessageBusDetailedTelemetry(){if(!this._experimentClient.isGateEnabled(_e.AgentsMessageBusDetailedTelemetry))return void this._logger.debug("Message bus detailed telemetry disabled for this integration instance");const{samplingChance:e,intervalMs:t,maxLogsCount:n}=function(e){var t,n,r;const i=null==e?void 0:e.get(),o=null!==(t=null==i?void 0:i.samplingChance)&&void 0!==t?t:10,s=null!==(n=null==i?void 0:i.intervalMinutes)&&void 0!==n?n:30,a=null!==(r=null==i?void 0:i.maxLogsCount)&&void 0!==r?r:50;return{samplingChance:o,intervalMs:Ta(s),maxLogsCount:a}}(this._messageBusDetailedTelemetryConfig);!function(e){return 100*Math.random()<e}(e)?this._logger.debug("Message bus detailed telemetry disabled for this integration instance"):(this._logger.debug("Message bus detailed telemetry enabled for this integration instance"),this._disposables.adopt((0,oo.F)(t).pipe((0,Pr.q)(n)).subscribe((()=>{const e=Array.from(this._retainedValueStorage.entries()).length,r=this._activePortConnections,i=Date.now()-this._integrationInitTimestamp,o=Math.floor(i/6e4);Kt().agents.bg.info("Message bus usage report",{entryCount:e,connectedPortsCount:r,intervalMs:t,maxLogsCount:n,minutesSinceIntegrationInit:o})})),(e=>e.unsubscribe())),Kt().agents.bg.info("Initialized message bus detailed telemetry.",{intervalMs:t,samplingChance:e,maxLogsCount:n}))}async _runBackgroundActivations(){var e,t;const n=new Qs(this._experimentClient),r=ve(i=this._experimentClient)?[ke(i)?[fa]:[],Ce(i)?[va]:[],Ie(i)?[da]:[],Ee(i)?[aa]:[],Se(i)?[na.d]:[],we(i)?[ma.d]:[]].flat():[];var i;const o={succeeded:new Set,failed:new Set};for(const i of r){this._logger.debug(`Running background activation for ${i.id}`);const r=this._messageBusServer.createPort({name:Ys(i.id,"bg")});try{const s=await(null===(t=(e=i.integrations).volatileBackgroundActivate)||void 0===t?void 0:t.call(e,{bus:this._disposables.use((0,so.kX)({port:r,clientId:Zs(i.id,"bg"),keyPrefix:$s(i.id),protocol:i.protocol})),experimentation:n,navigation:{isPanelOpen:this._activePanelAgentId.view((e=>e===i.id))}}));s&&this._disposables.use(wa(s)),i.integrations.volatileBackgroundActivate&&o.succeeded.add(i.id)}catch(e){this._logger.error(`Background activation error for agent ${i.id}`,e),Kt().agents.bg.error("Background activation failed for agent",e,{agentId:i.id}),o.failed.add(i.id)}}Kt().agents.bg.info("Agents background activations completed.",{successfulActivations:Array.from(o.succeeded),successfulActivationCount:o.succeeded.size,failedActivations:Array.from(o.failed),failedActivationCount:o.failed.size})}dispose(){this._disposables.disposeAsync()}}async function Ra(e){var t,n,r;const i=navigator.userAgent||"",o=(null===(t=navigator.userAgentData)||void 0===t?void 0:t.brands)||[],s=o.map((e=>e.brand)).join(", "),a={chromiumVersion:null!==(r=null===(n=o.find((e=>"Chromium"===e.brand)))||void 0===n?void 0:n.version)&&void 0!==r?r:"",extraInfo:{userAgent:i,brands:o}};return navigator.brave&&"function"==typeof navigator.brave.isBrave?{browserName:"Brave",...a}:self.opr||i.includes("OPR/")||s.includes("Opera")?{browserName:"Opera",...a}:i.includes("Edg/")||s.includes("Microsoft Edge")?{browserName:"Microsoft Edge",...a}:await async function(){const e=self.chrome;if(e&&"windows"in e&&"object"==typeof e.windows&&e.windows&&"getCurrent"in e.windows&&"function"==typeof e.windows.getCurrent)return"vivExtData"in await e.windows.getCurrent();return!1}()?{browserName:"Vivaldi",...a}:await async function(e){if(!(null==e?void 0:e.id))return!1;const t=ZJ().browserApi.tabs;if(!function(e){return"web-extension"===e.kind}(t))return!1;const n=await t.executeFunction((()=>getComputedStyle(document.documentElement).getPropertyValue("--arc-palette-background")),e.id);return"string"==typeof n&&""!==n}(e)?{browserName:"Arc",...a}:s.includes("Avast Secure Browser")?{browserName:"Avast Secure Browser",...a}:i.includes("Chrome/")||s.includes("Chromium")?{browserName:"Google Chrome (or Chromium-based)",...a}:{browserName:"Unknown Chromium Variant",...a}}function Da(e,t){let n="not-reported";ZJ().browserApi.tabs.onActiveTabChange((r=>{var i;"not-reported"===n&&(null===(i=r.url)||void 0===i?void 0:i.startsWith("http"))&&(n="in-progress",async function({gnar:e,tab:t,logger:n}){try{const r=await Ra(t),{browserName:i,chromiumVersion:o,extraInfo:s}=r;return null==n||n.info("Chrome variant data",r),e.alwaysOnAssistantBrowserInfoRetrieved(s.brands.map((e=>`${e.brand} v${e.version}`)),i,o),!0}catch(e){return null==n||n.error("Error reporting chromium variant",e),!1}}({gnar:e,tab:r,logger:t}).then((e=>{n=e?"reported":"not-reported"})))}),(e=>{t.error("Error reporting chromium variant",e)}))}const Na={AAADefaultOnV3:new ge.KS("extension_always_on_assistant_default_on_v3",["control","test"])};function Ua(e){var t,n,r,i;if(!(null===(t=de().experimentClient)||void 0===t?void 0:t.isGateEnabled(Te.AssistantInSidePanel)))return!1;const o=()=>{var t,n;const r=null===(t=null==e?void 0:e.alwaysAvailableAssistantSettings)||void 0===t?void 0:t.enabled;return void 0!==r?!!r:!!e&&!0!==e.isDesktopIntegrationEnabled&&"test"===(null===(n=de().experimentClient)||void 0===n?void 0:n.getTreatment(Na.AAADefaultOnV3))};return((null===(n=de().experimentClient)||void 0===n?void 0:n.isGateEnabled(Te.SuperhumanGoBranding))||!1!==(null===(i=null===(r=null==e?void 0:e.cheetah)||void 0===r?void 0:r.status)||void 0===i?void 0:i.cheetahEnabled))&&o()}const Ma=({extensionApi:e,log:t=q.create("updateSidePanelState"),store:n})=>{var r;const i=Ua(null===(r=n.view("extensionSettings").get())||void 0===r?void 0:r.common);e.setSidePanelEnabled(i).catch((e=>{null==t||t.error(`Failed to ${i?"enable":"disable"} side panel`,e)}))},ja="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function Fa(e,t=""){if(e<=0)return t;const n=Math.floor(Math.random()*(ja.length-1));return Fa(e-1,t+ja.charAt(n))}const La=()=>(new Date).setFullYear((new Date).getFullYear()+10),Ga=()=>(new Date).setMinutes((new Date).getMinutes()+10);function Ba(e,t=null,n={}){return arguments.length<2?Wa(e):qa(e,t,n)}var za,Va;!function(e){e.None="None",e.Lax="Lax",e.Strict="Strict"}(za||(za={})),function(e){e.Path="Path",e.Domain="Domain",e.Expires="Expires",e.Secure="Secure",e.SameSite="SameSite"}(Va||(Va={}));function qa(e,t,n={}){const r=[];null===t?(r.push(Ha($a(e),"null")),n.maxage=-1):r.push(Ha($a(e),$a(t))),n.maxage&&(n.expires=new Date(+new Date+n.maxage)),n.path&&r.push(Ha(Va.Path,n.path)),n.domain&&r.push(Ha(Va.Domain,n.domain)),n.expires&&r.push(Ha(Va.Expires,n.expires.toUTCString())),n.secure&&r.push(Va.Secure),n.sameSite&&(r.push(Ha(Va.SameSite,n.sameSite)),n.sameSite!==za.None||n.secure||r.push(Va.Secure));const i=r.join(";");return document.cookie=i,i}function Ha(e,t){return`${e}=${t}`}function Wa(e){const t=function(e){const t={},n=e.split(/ *; */);if(!n[0])return t;for(const e of n){const[n,r]=e.split("="),i=Xa(n),o=Xa(r);i&&o&&(t[i]=o)}return t}(document.cookie);return e?t[e]:""}function $a(e){try{return encodeURIComponent(e)}catch(e){return""}}function Xa(e){try{return decodeURIComponent(e)}catch(e){return null}}function Ka(e){try{return e()}catch(e){return}}const Ya=/^\.\w+\.\w+/,Za=e=>`gnar_test_${e}_${Fa(5)}`;function Ja(e){return{type:"success",value:e}}function Qa(e){return{type:"failure",error:e}}function ec(e){return e.then(Ja,Qa)}function tc(e,t,n){const r=n();return e>0?r.catch((r=>new Promise(((e,n)=>setTimeout(e,t))).then((r=>tc(e-1,t,n))))):r}class nc{constructor(e,t=[],n=null,r=3e5,i=0,o=(()=>Date.now())){this.primaryStorage=e,this.secondaryStorages=t,this._logger=n,this._cacheSuccessTimeoutMillis=r,this._cacheFailureTimeoutMillis=i,this._getTime=o,this._allStorages=[e,...t]}_expireCache(e){0===e?this._cacheExpireTimestamp=0:e>0&&(this._cacheExpireTimestamp=this._getTime()+e)}getValue(){if(void 0!==this._cache&&(void 0===this._cacheExpireTimestamp||this._getTime()<this._cacheExpireTimestamp))return this._cache;const e=Ka((()=>this._logger&&this._logger.getValueStart(this.valueLabel()))),t=this._valueFromStorage();return this._cache=t,this._cacheExpireTimestamp=void 0,t.then((e=>{e?this._expireCache(this._cacheSuccessTimeoutMillis):this._cache=void 0}),(e=>{this._cache=void 0})),t.then((t=>{e&&Ka((()=>e.getValueSuccess()))}),(t=>{e&&Ka((()=>e.getValueFailure(t)))})),t}_valueFromStorage(){return Promise.all(this._allStorages.map((e=>ec(e.safeGetValue(this.key()))))).then((e=>{const[t]=e;if("failure"===t.type)return Promise.reject(`getting value from primary storage '${this.primaryStorage.name}' has failed: ${t.error}`);const n=e.find((e=>"success"===e.type&&void 0!==e.value));if(void 0===n)return Promise.resolve(void 0);const r=n.value,i="success"===t.type&&void 0===t.value,o=e.reduce(((e,t,n)=>"success"===t.type&&t.value!==r?e.concat(n):e),[]);return this.setValue(r,i,!1,o)}))}setValue(e,t=!1,n=!1,r=Array.from(Array(this._allStorages.length).keys())){const i=r.map((t=>ec(this._allStorages[t].safeSetValue(this.key(),e))));return Promise.all(i).then((r=>{if(t||n){const[e]=r;if("success"!==e.type)return Promise.reject(`setting ${this.valueLabel()} to primary storage has failed:\n                ${e.error}`)}const i=Promise.resolve(e);return this._cache=i,this._expireCache(this._cacheSuccessTimeoutMillis),i})).then((e=>(t?Ka((()=>this._logger&&this._logger.valueRecovered())):n&&Ka((()=>this._logger&&this._logger.valueGenerated())),e)))}}class rc extends nc{constructor(){super(...arguments),this.containerIdLength=12,this.initialSetPromise=void 0,this.generatedContainerId=void 0,this._key="gnar_containerId",this.getContainerId=()=>super.getValue().then((e=>{if(void 0===e){if(this.initialSetPromise)return this.initialSetPromise;{const e=super.setValue(this.getOrGenerateContainerId(),!1,!0);this.initialSetPromise=e;const t=()=>this.initialSetPromise=void 0;return e.then(t,t),e}}return e}))}key(){return this._key}setKey(e){this._key=e}valueLabel(){return"ContainerId"}getOrGenerateContainerId(){return this.generatedContainerId||(this.generatedContainerId=Fa(this.containerIdLength)),this.generatedContainerId}}class ic{constructor(e){this.name=e}safeSetValue(e,t){return this.ensureAvailable(e).then((()=>this.setValue(e,t)))}safeGetValue(e){return this.ensureAvailable(e).then((()=>this.getValue(e))).then((e=>""===e?void 0:e))}}class oc extends ic{constructor(e,t){if(super("chromeCookie"),this._url=e,this._domain=t,this._hasRuntimeError=()=>self.chrome&&self.chrome.runtime&&self.chrome.runtime.lastError,!Ya.test(t))throw new Error('Incorrect cookie domain provided.\n        Use top-level domain, starting from "."')}ensureAvailable(e){return tc(2,1e3,(()=>new Promise(((t,n)=>{const r=Za(e),i=Fa(10);try{self.chrome.cookies.set({name:r,value:i,url:this._url,domain:this._domain,expirationDate:Ga()/1e3},(e=>{const o=this._hasRuntimeError();!e&&o&&n("chrome.cookie.set failed with an error: "+o.message),e&&e.value===i?t():n(new Error(`ChromeCookieStorage is unavailable.\n              Availability test failed.\n              Tried to set ${r}=${i}, the result is ${e?e.value:e}.`))}))}catch(e){n(e)}finally{self.chrome.cookies.remove({url:this._url,name:r})}}))))}getValue(e){return new Promise(((t,n)=>{try{self.chrome.cookies.get({url:this._url,name:e},(e=>{const r=this._hasRuntimeError();!e&&r&&n("chrome.cookie.get failed with an error: "+r.message),t(e?e.value:void 0)}))}catch(e){n(e)}}))}setValue(e,t){return new Promise(((n,r)=>{try{self.chrome.cookies.set({name:e,value:t,url:this._url,domain:this._domain,expirationDate:La()/1e3},(i=>{const o=this._hasRuntimeError();!i&&o&&r("chrome.cookie.set failed with an error: "+o.message),i&&i.value===t||r(new Error(`setValue for ${e} failed.\n            Tried to set ${t}, the result is ${i?i.value:i}.`)),n()}))}catch(e){r(e)}}))}}class sc extends ic{constructor(e,t){if(super("webExtensionsCookie"),this._url=e,this._domain=t,!Ya.test(t))throw new Error('Incorrect cookie domain provided.\n        Use top-level domain, starting from "."')}ensureAvailable(e){return tc(2,1e3,(()=>new Promise(((t,n)=>{const r=Za(e),i=Fa(10);self.browser.cookies.set({name:r,value:i,url:this._url,domain:this._domain,expirationDate:Ga()/1e3}).then((()=>{self.browser.cookies.get({url:this._url,name:r}).then((e=>{e&&e.value===i?t():n(new Error(`WebExtensionsCookieStorage is unavailable.\n              Availability test failed.\n              Tried to set ${r}=${i}, the result is ${e?e.value:e}.`))})).catch((e=>{n("browser.cookies.get failed with an error: "+e.message)}))})).catch((e=>{n("browser.cookies.set failed with an error: "+e.message)})).finally((()=>{self.browser.cookies.remove({url:this._url,name:r}).catch((e=>{console.error(`WebExtensionsCookieStorage: Error removing test cookie: ${e.message}`)}))}))}))))}getValue(e){return new Promise(((t,n)=>{self.browser.cookies.get({url:this._url,name:e}).then((e=>{t(e?e.value:void 0)})).catch((e=>{n("browser.cookies.get failed with an error: "+e.message)}))}))}setValue(e,t){return new Promise(((n,r)=>{self.browser.cookies.set({name:e,value:t,url:this._url,domain:this._domain,expirationDate:La()/1e3}).then((e=>{e&&e.value===t||r(new Error(`setValue failed.\n          Tried to set ${t}, the result is ${e?e.value:e}.`)),n()})).catch((e=>{r("browser.cookies.set failed with an error: "+e.message)}))}))}}class ac extends ic{constructor(){super("localStorage"),this.ensureAvailable=e=>{const t=Za(e),n=Fa(10);return new Promise(((e,r)=>{localStorage.setItem(t,n),localStorage.getItem(t)!==n?r(new Error(`LocalStorage is unavailable.\n          Availability test failed.\n          Tried to set ${t}=${n},\n          the result is ${localStorage.getItem(t)}.`)):e(),localStorage.removeItem(t)}))},this.getValue=e=>{const t=localStorage.getItem(e);return new Promise(((e,n)=>e(null===t?void 0:t)))},this.setValue=(e,t)=>new Promise(((n,r)=>{localStorage.setItem(e,t),n()}))}}class cc extends ic{constructor(e,t=La){if(super("cookie"),this._domain=e,this.ensureAvailable=e=>{const t=Za(e),n=Fa(10);return new Promise(((e,r)=>{const i={...this._getCookieOptions(),expires:new Date(Ga())};Ba(t,n,i),Ba(t)!==n?r(new Error(`CookieStorage is unavailable.\n          Availability test failed.\n          Tried to set ${t}=${n}, the result is ${Ba(t)}.`)):e(),((e,t)=>{Ba(e,null,{...t,expires:new Date(0)})})(t,this._getCookieOptions())}))},this.getValue=e=>new Promise(((t,n)=>t(Ba(e)))),!Ya.test(e))throw new Error('Incorrect cookie domain provided.\n        Use top-level domain, starting from "."');this.cookieExpiration=t}_getCookieOptions(){return{path:"/",domain:this._domain,expires:new Date(this.cookieExpiration()),secure:!0,sameSite:za.None}}setValue(e,t){return new Promise(((n,r)=>{Ba(e,t,this._getCookieOptions()),n()}))}}class lc extends ic{constructor(e){super("memory"),this._value=e,this.ensureAvailable=()=>Promise.resolve()}getValue(e){return Promise.resolve(this._value)}setValue(e,t){return this._value=t,Promise.resolve()}}const uc=()=>{const e=document.documentElement.clientWidth||document.body.clientWidth,t=document.documentElement.clientHeight||document.body.clientHeight;return{url:document.location.href,referrer:document.referrer,userAgent:navigator.userAgent,containerWidth:e,containerHeight:t,screenWidth:screen.width,screenHeight:screen.height,devicePixelRatio:self.devicePixelRatio}},dc=["client","clientVersion","userId","isTest","containerId","websiteSessionId","instanceId","batchId"],hc="gnar_nextPingTimestamp";class pc{constructor(e,t,n,r,i,o=null,s=!1,a,c=uc,l={},u=new ac,d){this._url=e,this._client=t,this._clientVersion=n,this._fetch=r,this._managers=i,this._logger=o,this._storePingTimestamp=s,this._gaClientOpt=a,this._getWindowProps=c,this._extraPingParams=l,this._localStorage=u,this._bundleEventsTime=d,this._instanceId=Fa(8),this._batchId=0,this._isUserReady=!1,this._queue=[],this._bundledProps=[],this._sendTimeoutId=null,this.userGetter=void 0,this._withBrowserProps=e=>{const{userAgent:t,containerHeight:n,containerWidth:r,screenHeight:i,screenWidth:o,devicePixelRatio:s,browserName:a,browserVersion:c,deviceSystemName:l,deviceSystemVersion:u}=this._getWindowProps();return{...e,userAgent:t,screenWidth:o,screenHeight:i,containerWidth:r,containerHeight:n,devicePixelRatio:s,...a?{browserName:a}:{},...c?{browserVersion:c}:{},...l?{deviceSystemName:l}:{},...u?{deviceSystemVersion:u}:{}}},this._eventsUrl="events",this._liteUrl="lite",this._pingMaybe(),this._initTs=Date.now()}track(e,t={lite:!1,sendUserIfExists:!1}){if(0!==e.eventName.indexOf(this._client+"/"))throw new Error(`Event name ${e.eventName} should start with '${this._client}/'`);if(Object.keys(e).forEach((e=>{if(-1!==dc.indexOf(e))throw new Error(`Event data should not contain '${e}' prop.`)})),!this._isUserReady&&this.userGetter)try{const e=this.userGetter();e&&this.setUserWithParams(e.userId,{isTest:e.isTest,institutionId:e.institutionId})}catch(e){}return t.sendUserIfExists||this._isUserReady||t.lite&&!t.sendUser?(e.eventName!==`${this._client}/ping`&&this._pingMaybe(),this._send(e,t)):(Ka((()=>this._logger&&this._logger.trackBeforeSetUser(Date.now()-this._initTs))),this._enqueue(e,t))}setUser(e,t){this._setUser(e,{isTest:t})}setUserWithParams(e,t){this._setUser(e,t)}_setUser(e,t){if(null===e||!/^-?\d+$/.test(e))throw new Error("Invalid userId: "+e);const n=this._userId&&this._userId!==e&&!(/^-/.test(e)&&/^-/.test(this._userId));this._isTest=t.isTest,this._userId=e,this._institutionId=t.institutionId,this._isUserReady||(this._isUserReady=!0,this._execQueue()),n&&this._pingMaybe(!0)}setJWT(e,t){if(null===e||""===e)throw new Error("Invalid JWT token: "+e);const[n,r]=e.split("."),i=JSON.parse(decodeURIComponent(atob(r.replace(/-/g,"+").replace(/_/g,"/")).split("").map((e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join("")));this._jwt=e,this.setUserWithParams(i.sub,{isTest:t})}setGaClient(e){this._gaClientOpt=e}getContainerId(){return this._managers.containerId.getContainerId()}getWebsiteSessionId(){var e,t;return null!==(t=null===(e=this._managers.websiteSessionId)||void 0===e?void 0:e.getWebsiteSessionId())&&void 0!==t?t:Promise.resolve(void 0)}async _setNextPingTimestamp(){const e=function(){const e=new Date;return e.getHours()>2&&e.setDate(e.getDate()+1),e.setHours(3),e.setMinutes(Math.floor(60*Math.random())),e.getTime()}();if(this._nextPingTimestamp=e,this._storePingTimestamp)try{await this._localStorage.safeSetValue(hc,e.toString())}catch(e){Ka((()=>this._logger&&this._logger.nextPingDateWriteError(e)))}}async _getNextPingTimestamp(){let e=this._nextPingTimestamp;if(void 0!==e||!this._storePingTimestamp)return e;try{const t=await this._localStorage.safeGetValue(hc);e=t?parseInt(t,10):void 0}catch(t){e=void 0,Ka((()=>this._logger&&this._logger.nextPingDateReadError(t)))}return e}async _shouldPing(e){if(e)return!0;{const e=await this._getNextPingTimestamp();return void 0===e||e<Date.now()}}async _pingMaybe(e=!1){if(!await this._shouldPing(e))return;await this._setNextPingTimestamp();const{url:t,referrer:n}=this._getWindowProps(),r={eventName:`${this._client}/ping`,referrer:n,url:t},i={lite:!1,sendUserIfExists:!1,doNotBundle:!0};this._gaClientOpt?this._gaClientOpt.getClientId().then((e=>this.track({...r,...this._extraPingParams,gaClientId:e},i)),(e=>this.track({...r,...this._extraPingParams},i))):this.track({...r,...this._extraPingParams},i)}pingMaybe(){this._pingMaybe()}_enqueue(e,t){return new Promise(((n,r)=>{this._queue.push([e,t,{resolve:n,reject:r}])}))}_execQueue(){this._queue.forEach((([e,t,{resolve:n,reject:r}])=>{this._send(e,t).then((()=>n())).catch((e=>r(e)))})),this._queue=[]}_withClientProps(e){return{...e,client:this._client,clientVersion:this._clientVersion}}async _withUserProps(e){const t=await this.getContainerId().catch((()=>{})),n=await this.getWebsiteSessionId().catch((()=>{}));return{...e,containerId:t,userId:this._userId,isTest:this._isTest,...this._institutionId?{institutionId:this._institutionId}:{},...n?{websiteSessionId:n}:{}}}_withInstanceProps(e){const t=this._batchId++;return{...e,instanceId:this._instanceId,batchId:t}}_trackUrl(e){return this._url+"/"+(e.lite?this._liteUrl:this._eventsUrl)+(this._jwt?"-with-token":"")}async _send(e,t){try{return e=this._withClientProps(e),(!t.lite||t.lite&&t.sendInstance)&&(e=this._withInstanceProps(e)),(t.sendUserIfExists||!t.lite||t.lite&&t.sendUser)&&(e=await this._withUserProps(e)),(!t.lite||t.lite&&t.sendBrowser)&&(e=this._withBrowserProps(e)),await this._doSend(this._trackUrl(t),e,t)}catch(t){throw Ka((()=>this._logger&&this._logger.sendError(t,e))),t}}_doSend(e,t,n){var r;return!n.doNotBundle&&this._bundleEventsTime?(this._bundlePromise=null!==(r=this._bundlePromise)&&void 0!==r?r:new Promise((e=>this._bundleResolver=e)),this._sendTimeoutId&&clearTimeout(this._sendTimeoutId),this._bundledProps.push(t),this._sendTimeoutId=setTimeout((()=>{var t;this._sendTimeoutId=null;const n=this._doFetch(e,this._bundledProps);null===(t=this._bundleResolver)||void 0===t||t.call(this,n),this._bundlePromise=null,this._bundledProps=[]}),this._bundleEventsTime),this._bundlePromise):this._doFetch(e,[t])}_doFetch(e,t){return this._fetch(e,{mode:"cors",credentials:"include",method:"post",keepalive:!0,headers:{"Content-Type":"application/json"},body:JSON.stringify({events:t,jwt:this._jwt})}).then((e=>e.ok?Promise.resolve():Promise.reject(new Error(e.statusText))))}setUserGetter(e){this.userGetter=e}}const gc={};class fc{constructor(e,t=q.create("GnarStorage")){this._getPreferencesAPI=e,this._log=t,this.name=fc.name,this._storageKey="gnarInternalStorage",this.safeGetValue=async e=>{try{const t=await this._getPreferencesAPI().get(this._storageKey);return t&&t[this._storageKey]?t[this._storageKey][e]:void 0}catch(e){return void this._log.error("safeGetValue is fail with",e)}},this.safeSetValue=async(e,t)=>{try{const n=this._getPreferencesAPI(),r=await n.get(this._storageKey);await n.set({[this._storageKey]:{...r&&r[this._storageKey]?r[this._storageKey]:{},[e]:t}})}catch(e){this._log.error("safeSetValue is fail with",e)}}}}let mc;const bc={alwaysonassistantnewchatbuttonclick:"assistant",alwaysonassistantsidepanelopen:"assistant",alwaysonassistantsidepanelloaded:"assistant",alwaysonassistantsidepanelclose:"assistant",alwaysonassistantpromptsubmit:"assistant",alwaysonassistantsend:"assistant",alwaysonassistantstopstreaming:"assistant",alwaysonassistantresponsecompleted:"assistant",alwaysonassistantcopybuttonclick:"assistant",alwaysonassistantresponseartifactclick:"assistant",alwaysonassistantfeedbackformsubmit:"assistant",alwaysonassistantchathistoryopen:"assistant",alwaysonassistantaddcontext:"assistant",alwaysonassistantremovecontext:"assistant",alwaysonassistantcontextswitchbuttonclicked:"assistant",alwaysonassistantagentactivated:"assistant",alwaysonassistantagentdeactivated:"assistant",alwaysonassistantagentbenchitemclicked:"assistant",alwaysonassistantresponsesourceclick:"assistant",alwaysonassistantresponsesourceimpression:"assistant",alwaysonassistantnotchtoggle:"assistant",alwaysonassistantbrowserinforetrieved:"assistant",assistantpopupshow:"assistant",assistantpopupclose:"assistant",assistantpopupready:"assistant",assistantheadermessageupdate:"assistant",assistantprioritydropdownclick:"assistant",assistantpopupdrag:"assistant",assistantfeedbackbuttonclick:"assistant",assistantfeedbacksubmitbuttonclick:"assistant",assistantlensshow:"assistant",assistantlensbuttonclick:"assistant",assistantactionbuttonclick:"assistant",assistantactionbuttonrender:"assistant",assistantactionbuttonimpression:"assistant",signupinbuttonclick:"user_lifecycle",loginsuccess:"user_lifecycle",signupformsuccess:"user_lifecycle",signupformfail:"user_lifecycle",signinformsuccess:"user_lifecycle",signinformfail:"user_lifecycle",logoutsuccess:"user_lifecycle",logoutfail:"user_lifecycle",facebooksignupinbuttonclick:"user_lifecycle",googlesignupinbuttonclick:"user_lifecycle",unauthorizedstate:"user_lifecycle",authzgrauthexchange:"user_lifecycle",authzgrauthrefresh:"user_lifecycle",authzauthorizationcodeexchange:"user_lifecycle",onboardingpopupshow:"user_lifecycle",onboardingpopupshowwithreminder:"user_lifecycle",onboardingpopupclosebuttonclick:"user_lifecycle",onboardingoverlayshow:"user_lifecycle",onboardingstepshow:"user_lifecycle",onboardingoverlayskip:"user_lifecycle",onboardingoverlayclosebuttonclick:"user_lifecycle",onboardingoverlayletswritebuttonclick:"user_lifecycle",onboardingtakeatourbuttonclick:"user_lifecycle",getstarted:"user_lifecycle",getstarteditemexpand:"user_lifecycle",getstarteditemcollapse:"user_lifecycle",getstartedchecklistshow:"user_lifecycle",getstartedchecklistcompleted:"user_lifecycle",goalsdenaliformsuccess:"user_lifecycle",goalspopupshow:"user_lifecycle",assistantpersonalizationopen:"user_lifecycle",assistantpersonalizationrole:"user_lifecycle",assistantpersonalizationgoals:"user_lifecycle",getpremiumbuttonshow:"client_ui_interaction",getpremiumbuttonclick:"client_ui_interaction",dismissuphookbuttonclick:"client_ui_interaction",freepremiuminlinecardshow:"client_ui_interaction",freepremiumuphookpopupshow:"client_ui_interaction",freepremiumuphookpopupbuttonclick:"client_ui_interaction",businessuphookpopupshow:"client_ui_interaction",businessuphookpopupclick:"client_ui_interaction",businessuphookpopupdismiss:"client_ui_interaction",install:"client_lifecycle",update:"client_lifecycle",extensionloaded:"client_lifecycle",sessionendwithconnectionstats:"client_lifecycle",ping:"client_lifecycle",gbuttonshow:"client_lifecycle",gbuttoninitialized:"client_lifecycle",gbuttonclick:"client_lifecycle",textfielddetected:"client_lifecycle",siteisbrowserdisabled:"client_lifecycle",grantaccesstoallsites:"client_lifecycle",removeaccesstoallsites:"client_lifecycle",grantaccesstospecificsite:"client_lifecycle",removeaccesstospecificsite:"client_lifecycle",languagesettingupdate:"user_lifecycle",checkingtoggle:"user_lifecycle",definitiontoggle:"user_lifecycle",autocorrecttoggle:"user_lifecycle",fail:"crash",failwithoutuser:"crash",crash:"crash",contentscriptexception:"crash",persistentstoragevalueloaderror:"performance",persistentstoragevalueloadtimeout:"performance",persistentstoragevalueloaded:"performance",extensioninitialized:"client_lifecycle",standwithukrainesuspendextensioninit:"client_lifecycle",versionnotsavedcorrectly:"client_lifecycle",companionappstart:"client_lifecycle",mseditorinstalled:"client_lifecycle",msofficeinstalled:"client_lifecycle",localexperimentuserassign:"client_lifecycle",gbbillingmigrationupdatebilling:"client_ui_interaction",nopaymentmethodsubscriptionupdatebilling:"client_ui_interaction",premiumungatingrenewalcta:"client_ui_interaction",premiumungatingrenewaldismiss:"client_ui_interaction",brandtonesactivationuphook:"client_ui_interaction",feedbacksent:"client_ui_interaction",freepremiumsuggestionaccept:"client_ui_interaction"};function yc(e){if(!e)return"client_ui_interaction";const t=e.toLowerCase().replace(/[/-]/g,"");return bc[t]||"client_ui_interaction"}let _c;function vc(){return null!=_c?_c:_c={permissions:["cookies"],origins:[Xe()]}}const wc=q.create("Cookies");class Sc{constructor(e){this._api=e,this._rootPath="/",this._grammarlyUrl=Xe(this._rootPath),this._grauthCookieName="grauth",this._csrfTokenCookieName="csrf-token",this._grInstallSourceCookieName="grInstallSource",this._grChromeStoreInstallUtmName="grChromeStoreInstallUTM",this._containerIdCookieName="gnar_containerId",this._llamaInstalledCookieName="desktop_integration_installed",this._llamaRedirectUrlCookieName="desktop_integration_redirect_url",this._lastAuthnEvent="last_authn_event",this.deleteGrauth=()=>this._api.cookies.remove({name:this._grauthCookieName,url:this._grammarlyUrl}),this.getContainerIdFromCookie=async()=>this._api.cookies.get({name:this._containerIdCookieName,url:this._grammarlyUrl}).then((e=>{if(e)return e.value})),this.getInstallSource=()=>this._api.cookies.get({name:this._grInstallSourceCookieName,url:this._grammarlyUrl}),this.getChromeStoreInstallUTM=()=>this._api.cookies.get({name:this._grChromeStoreInstallUtmName,url:this._grammarlyUrl}),this.getLlamaInstalled=()=>(0,h.qO)((()=>this._api.cookies.get({url:this._grammarlyUrl,name:this._llamaInstalledCookieName})),(async()=>{})),this.getLlamaRedirectUrl=()=>(0,h.qO)((()=>this._api.cookies.get({url:this._grammarlyUrl,name:this._llamaRedirectUrlCookieName})),(async()=>{})),this.setLlamaInstalled=()=>(0,h.qO)((()=>{const e=new Date;return e.setUTCFullYear(e.getUTCFullYear()+10),this._api.cookies.set({value:"1",url:this._grammarlyUrl,name:this._llamaInstalledCookieName,expirationDate:e.valueOf()})}),(async()=>{})),this.deleteLlamaInstalled=()=>(0,h.qO)((()=>this._api.cookies.remove({name:this._llamaInstalledCookieName,url:this._grammarlyUrl})),(async()=>{})),this.deleteLlamaRedirectUrl=()=>(0,h.qO)((()=>this._api.cookies.remove({name:this._llamaRedirectUrlCookieName,url:this._grammarlyUrl})),(async()=>{})),this.getLastAuthenticationEvent=()=>this._api.cookies.get({name:this._lastAuthnEvent,url:this._grammarlyUrl}),this.getAllGrammarlyCookies=()=>this._api.cookies.getAll({domain:$e(),path:this._rootPath}),this.onUserAuthChange=()=>this._api.cookies.getChanges({url:this._grammarlyUrl,name:this._grauthCookieName}).pipe((0,Ki.h)((e=>!!e)))}async getCSRFToken(e){var t,n;try{if(!(null===(n=await(null===(t=this._api.permissions)||void 0===t?void 0:t.contains(vc())))||void 0===n||n))return wc.warn("No browser permissions to read CSRFToken cookie"),null;const r=await(0,h._N)((()=>this._api.cookies.get({name:this._csrfTokenCookieName,url:this._grammarlyUrl})),5,20,(t=>!!(e||t&&t.value))),i=r?r.value:null;return i||e||wc.error("CRF is null"),i}catch(e){return wc.error("failed to read a CSRFToken cookie",e),null}}async getGrauth(){try{return this._api.cookies.get({name:this._grauthCookieName,url:this._grammarlyUrl})}catch(e){return wc.error("failed to grauth cookie",e),Promise.resolve(null)}}async getCookieFromDomain(e,t){try{return await this._api.cookies.get({name:t,url:`https://${e}`})}catch(n){return wc.error(`failed to read cookie ${t} from domain ${e}`,n),null}}}class kc{nextPingDateWriteError(e){Kt().gnar.nextPingDateWriteError(JSON.stringify(e))}nextPingDateReadError(e){Kt().gnar.sendError(e,"nextPingDateReadError")}sendError(e,t){Kt().gnar.sendError(e,t.eventName)}trackBeforeSetUser(e){Kt().gnar.trackBeforeSetUser(e)}}function Ic(e,t=!1){const n=ae(self).fetch,r=e.bundleInfo.extensionType,i=e.appConfig.gnar,o=function(e,t){switch(e){case"safariWebExtension":case"safariIOSWebExtension":case"firefoxWebExtension":return new sc(t.url,t.domain);case"chromiumWebExtension":return new oc(t.url,t.domain);default:(0,h.vE)(e)}}(r,i),s="firefoxWebExtension"===r||"3"===e.buildInfo.manifestVersion?[new fc((()=>ZJ().browserApi.preferences))]:[new cc(i.domain),new ac,new lc],a=new rc(o,s,null,"chromiumWebExtension"===r?1e3:5e3);return{gnar:new pc(i.url,i.appName,e.buildInfo.version,n,{containerId:a},new kc,!0,void 0,"3"===e.buildInfo.manifestVersion?()=>({referrer:"",url:"",userAgent:navigator.userAgent,screenHeight:0,containerHeight:0,containerWidth:0,cc:0,screenWidth:0,devicePixelRatio:0,browserName:e.systemInfo.browser.name,browserVersion:e.systemInfo.browser.version||"unknown",deviceSystemName:e.systemInfo.os.name,deviceSystemVersion:e.systemInfo.os.version||"unknown"}):void 0,void 0,"3"===e.buildInfo.manifestVersion?new fc((()=>ZJ().browserApi.preferences)):void 0,t?100:void 0)}}function Cc(e,t,n=!1){var r,i,o,s;try{const a=Ic(N(),n);gc.gnar=a.gnar,null===(r=gc.gnar)||void 0===r||r.setUserGetter(t);if(null===(o=null===(i=de())||void 0===i?void 0:i.experimentClient)||void 0===o?void 0:o.isGateEnabled(De.EnableDoubleWriteToMint)){const t=(s=a.gnar,{track:async(e,t)=>{var n,r,i;if(mc){const t=e.client||"chromeExt",r=(null===(n=e.eventName)||void 0===n?void 0:n.replace(/^[^/]+\//,""))||e.eventName,{eventName:i,...o}=e;try{await mc.send({event_name:r,event_ts:Date.now(),client:t,dataset_name:yc(r),...o})}catch(e){Kt().tsMintSDK.error("sendEventCallFailed","Failed to send event to tsMintSDK")}}if(!(null===(i=null===(r=de())||void 0===r?void 0:r.experimentClient)||void 0===i?void 0:i.isGateEnabled(De.TSMintDeprecateGnar)))return s.track(e,t)}});return new e(t)}return new e(a.gnar)}catch(e){return void Kt().gnarClientInitFail(e&&e.message)}}const Ec=async()=>{try{if("firefox"===N().bundleInfo.browser){const e=ZJ().browserApi,t=new Sc(e);return await t.getContainerIdFromCookie()}return}catch(e){return}};var Ac;!function(e){e.legacy="legacy",e.withTracking="withTracking"}(Ac||(Ac={}));const xc=async(e,t=Ac.legacy)=>{switch(t){case Ac.legacy:return(async()=>{const e=await(0,h.qO)((async()=>gc.gnar?await gc.gnar.getContainerId():void 0),(async()=>{}));return null!=e?e:await Ec()})();case Ac.withTracking:return(async e=>{const t=await(0,h.qO)((async()=>gc.gnar?await gc.gnar.getContainerId().then((e=>e?{containerId:e,status:"ok"}:{status:"fail",reason:"empty_container_id"})):{status:"fail",reason:"gnar_in_not_initialised"}),(async e=>({error:e,reason:"gnar_error",status:"fail"})));if("ok"===t.status)return t.containerId;{if(Kt().gnar.failToLoadContainerId("gnar",e,t.reason,null==t?void 0:t.error),"empty_container_id"===t.reason)return"";const n=await Ec();return n||Kt().gnar.failToLoadContainerId("cookies",e,"cookies_fail"),n}})(e);default:(0,h.vE)(t)}};function Tc(){const e=new Date;return e.getHours()>2&&e.setDate(e.getDate()+1),e.setHours(3),e.setMinutes(Math.floor(60*Math.random())),e.getTime()}function Oc(e){if(!e)return{domain:"",scheme:"",pathname:"",uri:""};const t=new URL(e),n=/^v[\d.]+$/,r=/^[a-zA-Z.-]+$/,i=e=>e.length>0,o=t.pathname.split("/").filter(i).map((e=>{return t=e,r.test(t)||(e=>n.test(e))(e)?e:"{id}";var t})).join("/");return{domain:t.hostname,scheme:t.protocol,pathname:o,uri:[t.hostname,o].filter(i).join("/")}}const Pc={async"daily-ping"(e,t=Tc,n=null){if(!e)return;const r=ZJ();r.telemetryCallProvider.call("gnar.pingMaybe");const i=new Ps(r.browserApi.preferences);let o=await i.get("pingDate");"string"!=typeof o&&(o="");const[s,a]=o.split("|"),c=e;if(s&&s>Date.now()&&a===c)return;const l=r.browserApi;void 0!==l.isExtensionInstalled&&await l.isExtensionInstalled("mseditor")&&await Nc.MSEditorInstalled(),void 0!==l.isExtensionInstalled&&await l.isExtensionInstalled("office")&&await Nc.MSOfficeInstalled(n&&n.isEditorEnabledInMSOffice||!1),Kt().sendFemetricsRate("pingDaily",{},["firstInstall","registrationDate","browserName","browserVersion","userOrganizationType"]),await i.set("pingDate",[t(),c].join("|"))},"login-attempt"(e){ZJ().telemetryCallProvider.call("gnar.track","signInClicked",{placement:e})},"tab-connected"({user:e,enabledByUserSettings:t,enabledForDomain:n,isGrammarlyEditorPage:r,environmentState:i}){this["daily-ping"](e.id,void 0,i),n||!0===r||Kt().disabledTabLoad(e.type),!0===n&&!1===t&&Kt().disabledTabByUserLoad(e.type)},"session-invalidate"(e,t,n,r,i){var o;const{id:s,anonymous:a,isTest:c}=e,l=Kt();l.setUserInfo({userId:s,userType:e.anonymous?"Anonymous":e.type,extensionInstallDate:r,registrationDate:new Date(e.registrationDate).getTime(),userOrganizationType:null===(o=e.institutionInfo)||void 0===o?void 0:o.onboardingType});const u=i&&e.institutionInfo?`${e.institutionInfo.id}`:void 0;ZJ().telemetryCallProvider.call("gnar.setUserWithParams",s,{isTest:c,...u?{institutionId:u}:{}});try{ZJ().productMetricsClient.updateUserInfo({user_id:s,user_type:e.anonymous?"Anonymous":e.type,institution_id:u?String(u):void 0})}catch(e){Kt().productMetricsClient.updateConfigurationFailed(e.message,"setUserInfoOnSessionInvalidate")}this["daily-ping"](s),(null==t?void 0:t.email)&&!(null==t?void 0:t.anonymous)&&a&&l.unexpectedAnonymous({reason:n||"N/A"})},"set-dapi-prop"(e,t){if("dialectWeak"===e){const e=t+"English";Nc.languageSettingUpdate(e,"capi")}},"cookie-overflow"(e,t){Kt().cookieOverflow(e,t)}},Rc=q.create("lib.tracking"),Dc=Ts.createCompletionSource(),Nc=new Proxy({},{get:(e,t)=>(...e)=>Dc.promise.then((async n=>{Rc.info("gnar",[t,...e]);try{await n[t](...e)}catch(e){Rc.warn("failed to invoke gnar method",e,{method:t})}})).catch((e=>{Rc.error(e)}))});function Uc(e,t,n=!1){const r=Kt();try{const i=Cc(e,t,n);i?Dc.resolve(i):(r.bgTrackingInitFail(),Dc.reject("failed to send tracking event: gnarSpec init failed"))}catch(e){r.bgTrackingInitFail(),Dc.reject("failed to send tracking event: tracking init failed")}}function Mc(e,...t){if(!Pc[e])return Rc.error(`No handler specified for message: ${e}`);!function(e,t=10){setTimeout(e,t)}((()=>Pc[e](...t)),20)}var jc;function Fc(e){return e.type===jc.SetAssistantCapiToken&&!!e.data}!function(e){e.IsReady="isReady",e.SetAssistantId="setAssistantId",e.SetAssistantCapiToken="setAssistantCapiToken"}(jc||(jc={}));var Lc=__webpack_require__(50750),Gc=__webpack_require__(17869),Bc=__webpack_require__(63532);const zc="assistantOnboarding_";class Vc{constructor(){this.logger=q.create("AssistantOnboardingStorage"),this.changes$=new bi.y((e=>{const t=de().browserApi.preferences.changes.subscribe({next:t=>e.next(t),error:t=>e.error(t),complete:()=>e.complete()});return()=>t.unsubscribe()})).pipe((0,Ki.h)((e=>Object.keys(e).some((e=>e.startsWith(zc))))),(0,Gc.z)((e=>{const t=Object.entries(e).filter((([e])=>e.startsWith(zc))).map((([e,t])=>({key:e.replace(zc,""),newValue:t.newValue,oldValue:t.oldValue})));return(0,Lc.D)(t)})),(0,Bc.b)((e=>this.logger.debug("Onboarding storage change emitted",{key:e.key,newValue:e.newValue,oldValue:e.oldValue}))))}_prefixKey(e){return`assistantOnboarding_${e}`}async get(e){const t=this._prefixKey(e),n=(await de().browserApi.preferences.get(t))[t],r=null==n?void 0:n;return this.logger.debug("Storage get operation",{key:e,value:r}),r}async set(e){this.logger.debug("Storage set operation",{data:e});const t={};for(const[n,r]of Object.entries(e))t[this._prefixKey(n)]=r;return de().browserApi.preferences.set(t)}async remove(e){const t=this._prefixKey(e);return de().browserApi.preferences.remove(t)}async getAll(){const e=await de().browserApi.preferences.getAll(),t={};for(const[n,r]of Object.entries(e))if(n.startsWith(zc)){t[n.slice(zc.length)]=r}return t}async clear(){const e=await de().browserApi.preferences.getAll(),t=Object.keys(e).filter((e=>e.startsWith(zc)));if(t.length>0)return de().browserApi.preferences.remove(t)}async markDismissed(e){return this.logger.debug("Marking as dismissed",{key:e}),this.set({[`${e}_dismissed`]:!0,[`${e}_dismissedAt`]:Date.now()})}async isDismissed(e){var t;return null!==(t=await this.get(`${e}_dismissed`))&&void 0!==t&&t}async getDismissedAt(e){return await this.get(`${e}_dismissedAt`)}async markCompleted(e){return this.logger.debug("Marking as completed",{key:e}),this.set({[`${e}_completed`]:!0,[`${e}_completedAt`]:Date.now()})}async isCompleted(e){var t;return null!==(t=await this.get(`${e}_completed`))&&void 0!==t&&t}async getCompletedAt(e){return await this.get(`${e}_completedAt`)}async incrementShowCount(e){var t;const n=await this.getShowCount(e),r=n+1;this.logger.debug("Incrementing show count",{key:e,currentCount:n,newCount:r});const i=null!==(t=await this.get(`${e}_showTimestamps`))&&void 0!==t?t:[];return i.push(Date.now()),await this.set({[`${e}_showCount`]:r,[`${e}_showTimestamps`]:i,[`${e}_lastShownAt`]:Date.now()}),r}async getShowCount(e){var t;return null!==(t=await this.get(`${e}_showCount`))&&void 0!==t?t:0}async getShowTimestamps(e){var t;return null!==(t=await this.get(`${e}_showTimestamps`))&&void 0!==t?t:[]}async getLastShownAt(e){return await this.get(`${e}_lastShownAt`)}async isUnderShowLimit(e,t){return await this.getShowCount(e)<t}async clearByKeyPrefix(e){const t=await de().browserApi.preferences.getAll(),n=this._prefixKey(e),r=Object.keys(t).filter((e=>e.startsWith(n)));if(r.length>0)return de().browserApi.preferences.remove(r)}}class qc{constructor(){this.assistantOnboardingStorage=new Vc,this.isEnabled()?this.eligibilityChanged$=this.assistantOnboardingStorage.changes$.pipe((0,Ki.h)((e=>e.key.startsWith(qc.KEY))),(0,Gr.U)((()=>{}))):this.eligibilityChanged$=new bi.y}isEnabled(){var e;return!!(null===(e=de().experimentClient)||void 0===e?void 0:e.isGateEnabled(Te.ChatAgentOnboardingHeader))}async isEligible(){if(!this.isEnabled())return!1;return!await this.assistantOnboardingStorage.isCompleted(qc.KEY)}async recordAsCompleted(){if(!this.isEnabled())return;return await this.isEligible()?this.assistantOnboardingStorage.markCompleted(qc.KEY):void 0}async reset(){if(this.isEnabled())return this.assistantOnboardingStorage.clearByKeyPrefix(qc.KEY)}}qc.KEY="superhumanGoChatAgentOnboardingHeader";var Hc,Wc,$c,Xc,Kc,Yc,Zc=__webpack_require__(92054);function Jc(e){const{actionId:t,content:n,selectedText:r="",backendBlob:i,extensionDOMTree:o,predefinedPromptKind:s,activeEditorId:a,selectedAgentId:c,textFieldContent:l,packChoice:u,targetLanguage:d,vBarSupported:h}=e,p=function(e){const{actionId:t,predefinedPromptKind:n}=e;if(t)return t;if(n&&(r=n,!["helpBrainstorm","createResearchPlan","makeFriendlier","shortenAndRemoveJargon","makeNextStepsClear"].includes(r)))return Xc[n];var r;return Xc.userPrompt}({actionId:t,predefinedPromptKind:s});return{actionId:{id:p},args:{...u&&{packChoice:{json:JSON.stringify(u)}},...p===Xc.userPrompt&&{userPrompt:{json:JSON.stringify(n)}},...d&&{targetLanguage:{json:d},originalLanguage:{json:d}}},additionalContext:Qc({backendBlob:i,extensionDOMTree:o,activeEditorId:a,selectedAgentId:c,textFieldContent:l,vBarSupported:h}),entrypoint:{name:Wc.Assistant,family:"g2"},correlationId:(0,Zc.Z)(),metadata:{},scope:{text:r,kind:"otherText"}}}function Qc(e){const{backendBlob:t,extensionDOMTree:n,activeEditorId:r,selectedAgentId:i,textFieldContent:o,vBarSupported:s}=e;return{...t&&{backendBlob:{blob:t}},...r&&{activeEditorId:r},...o&&{activeEditorContent:o},...i&&{agentInstanceId:i},...void 0!==s&&{vBarSupported:s},extraProperties:el({extensionDOMTree:n})}}function el({extensionDOMTree:e}){return e?{ExtensionDOMTree:{json:JSON.stringify(e)}}:{}}function tl({logger:e=q.create("sidePanelCloseStatus"),felog:t=Kt(),denaliCapiRpcApi:n}={}){const r=ZJ().browserApi.message,i=ZJ().browserApi.sessionStorage;let o;e.debug("add port listener for side panel close status");const s=[];s.push({dispose:r.listenToRuntimeMessage(Fc,(async t=>(e.debug("Received CAPI connection token from side panel for Assistant",t.data.capiToken),o=t.data.capiToken,Promise.resolve())))});return s.push({dispose:r.onPortConnection((r=>{if(r.name!==bs.sidePanelCloseStatus)return;const a=performance.now();let c,l="",u=0;e.debug("bg start listening side panel close status"),r.onMessage((e=>{(function(e){return e.type===jc.SetAssistantId&&!!e.data})(e)&&(l=e.data.assistantSessionId)})),i.get("isSidePanelOpen").then((e=>{c=e.isSidePanelOpen})),s.push({dispose:i.onChange((e=>{c=e.isSidePanelOpen}))}),r.onDisconnect((()=>{var r,s;if(u++,u>1)return t.sidePanel.sidePanelCloseDuplication(e.name,u,l,!!c),void i.set({isSidePanelOpen:!1});e.debug("side panel closed"),i.set({isSidePanelOpen:!1});const d=Math.round(performance.now()-a);Nc.alwaysOnAssistantSidePanelClose(l,d),function(e){const{capiToken:t,denaliCapiRpcApi:n,logger:r=q.create("sendCloseAssistantCommand"),isLifecycleEventsEnabled:i,felog:o=Kt()}=e;if(!i)return void r.debug("Lifecycle events are not enabled, skipping closeAssistant");if(!t)return r.warn("CAPI token not found, skipping closeAssistant"),void o.sidePanel.closeAssistantFailure(r.name,"CAPI token not found");if(!n)return r.warn("Denali CAPI RPC API not found, skipping closeAssistant"),void o.sidePanel.closeAssistantFailure(r.name,"Denali CAPI RPC API not found");const s=n.getInstance(t);s?s.client.isClosed()?(r.warn("Assistant CAPI client is closed, skipping closeAssistant"),o.sidePanel.closeAssistantFailure(r.name,"Assistant CAPI client is closed")):s.sendMessage("text_actions:invokeCommand",Jc({actionId:"assistant:closeAssistant"}),!1)():(r.warn("Assistant CAPI instance not found, skipping closeAssistant"),o.sidePanel.closeAssistantFailure(r.name,"Assistant CAPI instance not found"))}({capiToken:o,denaliCapiRpcApi:n,logger:e,isLifecycleEventsEnabled:null!==(s=null===(r=ZJ().experimentClient)||void 0===r?void 0:r.isGateEnabled(De.AssistantLifecycleEvents))&&void 0!==s&&s});(new qc).recordAsCompleted()})),r.postMessage({type:jc.IsReady})}))}),{dispose:()=>{s.forEach((e=>e.dispose()))}}}!function(e){e.Rewrite="rewrite",e.Ideate="ideate"}(Hc||(Hc={})),function(e){e.VbarCard="vbar_card",e.Assistant="assistant"}(Wc||(Wc={})),function(e){e.Final="final",e.Partial="partial"}($c||($c={})),function(e){e.userPrompt="assistant:chatPrompt",e.improve="launcher:improve",e.replyEmail="launcher:replyEmail",e.replyChat="launcher:replyChat",e.summarize="launcher:summarize",e.summarizeChat="launcher:summarizeChat",e.summarizeEmail="launcher:summarizeEmail",e.summarizeWindow="launcher:summarizeWindow",e.translate="reader:translate",e.comprehension="reader:comprehension"}(Xc||(Xc={})),(Kc||(Kc={})).Base=class{},(Yc||(Yc={})).toHeaderAppender=function(e){return function(e){async function t(e){if(Array.isArray(e)){const[t,n]=e,r=await("function"==typeof n?n():n);return r?[t,r].join(" "):void 0}return await("function"==typeof e?e():e)}return n=>async()=>{for(const r in e){const i=await t(e[r]);void 0!==i&&n.header(r,i)}return n}}({"X-Client-Version":e.clientVersion.toString(),"X-Client-Type":()=>e.clientName,"X-Container-Id":e.containerId,"X-CSRF-Token":e.csrfToken,...void 0!==e.accessToken&&{Authorization:["Bearer",e.accessToken]}})};var nl,rl,il,ol,sl,al=__webpack_require__(43351),cl=__webpack_require__(2084),ll=__webpack_require__(28338),ul=__webpack_require__(48886);(e=>{e.extend=function(e){return ul.I_((t=>({...t,requestExtender:t.requestExtender?gl.Extender.compose(e,t.requestExtender):e})))};class t extends ll.sH{constructor(e,t){super(e),this.message=e,this.details=t,this.name="ParseError"}toString(){return`Ajax response parsing error\n        Message ${this.message}\n        Details ${al.Rn(this.details).join("\n")}`}}var n;e.ParseError=t,(n=e.MimeType||(e.MimeType={})).json="application/json",n.form="application/x-www-form-urlencoded",n.multipart="multipart/form-data",n.pdf="application/pdf",n.txt="text/plain",n.stream="application/octet-stream",n.vnd="application/vnd",n.zip="application/zip",n.any="*/*",e.mapToHTTPErrorWithoutBody=function(t,n,r){return r.removeBody(),e.mapToHTTPError(t,n,r)},e.mapToHTTPError=function(e,t,n){return new hl({request:n,code:t.status,status:t.statusText,url:t.url,body:e})}})(nl||(nl={}));class dl extends ll.sH{constructor(e,t){super(e),this.message=e,this.details=t,this.name="RequestError"}toString(){return`Request error\n      Message: ${this.message}\n      details: ${this.details}`}static fromError(e,t){const n=new dl(e,t.message);return n.stack=t.stack,n}}class hl extends ll.sH{constructor({code:e,status:t,url:n,message:r,body:i,request:o}){super(r||(t||i?t||i:"HTTPError")),this.name="HTTPError",this.url=n,this.code=e,this.body=i,this.status=t,this.request=o}toString(){return`Response\n      Message: ${this.message}\n      Status: ${this.status}\n      Code: ${this.code}\n      Body: ${this.body}\n      ${void 0!==this.request?"\n"+this.request.toString():`Url: ${this.url}`}`}}class pl{constructor(e,t,n,r,i,o){this._url=e,this._method=t,this._headers=n,this._mime=r,this._body=i,this._keepalive=o}static get(...e){return gl.get(...e).build()}static post(...e){return gl.post(...e).build()}static put(...e){return gl.put(...e).build()}static del(...e){return gl.del(...e).build()}static head(...e){return gl.head(...e).build()}get url(){return this._url}get method(){return this._method}get headers(){return this._headers}get mime(){return this._mime}get keepalive(){var e;return null!=(e=this._keepalive)&&e}get body(){return kr.ij(this._body)}toString(){return`Request\n    Method: ${this.method.toUpperCase()}\n    Url: ${this.url}\n    Mime: ${this.mime}\n    Headers: ${JSON.stringify(this.headers,void 0,2)}\n    Body:${cl.dH((e=>{return t=JSON.stringify(e instanceof URLSearchParams?function(e){const t={};return e.forEach(((e,n)=>t[n]=e)),t}(e):e,void 0,2),n=200,t.length<=n?t:t.slice(0,n)+"....";var t,n}),"empty")(this.body)}\n    `}removeBody(){this._body=void 0}}rl=pl||(pl={}),(il=rl.Method||(rl.Method={})).GET="GET",il.POST="POST",il.PATCH="PATCH",il.PUT="PUT",il.OPTIONS="OPTIONS",il.HEAD="HEAD",il.TRACE="TRACE",il.DELETE="DELETE",il.CONNECT="CONNECT";class gl{constructor(e="",t=new URLSearchParams,n=[],r={},i,o,s,a=!1,c=!1){this._url=e,this._queryParams=t,this._cookies=n,this._headers=r,this._method=i,this._mime=o,this._body=s,this._preserveUrl=a,this._keepalive=c}static join(...e){const t=[].slice.call(e.filter((e=>e.length>0)),0).join("/");return gl._normalize(t)}static _normalize(e){return e=(e=(e=e.replace(/:\//g,"://")).replace(/([^:\s])\/+/g,"$1/")).replace(/\/(\?|#)/g,"$1")}static get(...e){return gl.url(...e).method("GET")}static post(...e){return gl.url(...e).method("POST")}static put(...e){return gl.url(...e).method("PUT")}static patch(...e){return gl.url(...e).method("PATCH")}static del(...e){return gl.url(...e).method("DELETE")}static head(...e){return gl.url(...e).method("HEAD")}static url(...e){return new gl(gl.join(...e))}url(...e){if(""!==this._url)throw new Error("URL already set to "+this._url+", use join(string) to add additional parts to it");return this.join(gl.join(...e))}static create(){return new gl}method(e){if(Boolean(this._method)&&this._method!==e)throw new Error("Method already set to "+this._method+", but was overwritten by "+e);return this._method=e,this}join(e){return this._url=gl.join(this._url,e),this}pathParam(e){return this._url=gl.join(this._url,encodeURIComponent(e)),this}body(e){if(this._body)throw new Error("Body already set to "+this._body+", but was overwritten by "+e);return this._body=e,this}formParam(e,t){return(this._body=this._body instanceof URLSearchParams?this._body:new URLSearchParams).append(e,t),this}multipartFormData(e,t,n){const r=this._body instanceof FormData?this._body:new FormData;return n?r.append(e,t,n):r.append(e,t),this._body=r,this}header(e,t){return this._headers[e]=t,this}queryParam(e,t){return this._queryParams.append(e,t),this}queryParams(e){return Object.entries(e).forEach((([e,t])=>this._queryParams.append(e,t))),this}cookie(e,t){return this._cookies.push(e+"="+t),this}mime(e){if(Boolean(this._mime)&&this._mime!==e)throw new Error("MIME already set to "+this._mime+", but was overwritten by "+e);return this._mime=e,this}keepalive(){return this._keepalive=!0,this}json(e){return e?this.body(e).mime("application/json"):this.mime("application/json")}preserveUrl(){return this._preserveUrl=!0,this}build(){var e;if(!this._url||0===this._url.length)throw new Error("URL cannot be empty");if(this._preserveUrl||(this._url=this._url.replace(/\/$/,"")),`${this._queryParams}`.length>0&&(this._url+="?"+this._queryParams),this._body instanceof URLSearchParams){if(Boolean(this._mime)&&"application/x-www-form-urlencoded"!==this._mime)throw new Error("Only application/x-www-form-urlencoded can be used for form requests, don't specify it mandatory in mime() method");this._mime="application/x-www-form-urlencoded"}else if(this._body instanceof FormData&&Boolean(this._mime)&&"multipart/form-data"!==this._mime)throw new Error("Only multipart/form-data can be used for multipart form data requests, don't specify it mandatory in mime() method");if("application/json"===this._mime&&Boolean(this._body)&&(this._body=JSON.stringify(this._body)),!this._method)throw new Error("HTTP method was not set");if("GET"===this._method&&this._body)throw new Error("Body is not supported for GET");if(this._mime&&(this._headers["Content-Type"]=this._mime),this._cookies.length>0){const e="Cookie";this._headers[e]=this._cookies.join("; ")}return new pl(this._url,this._method,this._headers,this._mime||null,this._body,null!=(e=this._keepalive)&&e)}}ol=gl||(gl={}),(sl=ol.Extender||(ol.Extender={})).identity=e=>Dr.oE.of(e),sl.compose=(...e)=>t=>e.reduce(Dr.oE.chain,(0,sl.identity)(t));var fl=__webpack_require__(93769),ml=(e=>(e.Enabled="ENABLED",e.OptedOutByUser="OPTED_OUT_BY_USER",e.OptedOutByInstitution="OPTED_OUT_BY_INSTITUTION",e.DeactivatedForUserByGrammarly="DEACTIVATED_FOR_USER_BY_GRAMMARLY",e.DeactivatedForInstitutionByGrammarly="DEACTIVATED_FOR_INSTITUTION_BY_GRAMMARLY",e.DisabledForInstitutionUserGroup="DISABLED_FOR_INSTITUTION_USER_GROUP",e.DisabledWhenUserDataControlEnabled="DISABLED_WHEN_USER_DATA_CONTROL_ENABLED",e.DisabledForAnonymous="DISABLED_FOR_ANONYMOUS",e.NotAvailable="NOT_AVAILABLE",e))(ml||{});const bl=class e extends Kc.Base{constructor(e,t,n){super(),this._url=e,this._ajaxFactory=t,this._fingerprints=n,this._ajax=this._ajaxFactory({requestExtender:Yc.toHeaderAppender(this._fingerprints)})}static getDefaultUrl(e){return`https://capi${e}/api/configuration/cheetah/v1/settings`}getStatus(t=!1){const n=t?gl.post(`${this._url}/get`):gl.get(this._url);return this._ajax.json(n,e.StatusResponseIOType)}setStatus(e){const t=gl.post(this._url).json(e);return this._ajax.empty(t)}};bl.EntryPointsConfigIOType=Ur.OT(Ur.dt({inlineQuickReplyEnabled:Ur.O7,inlineRewriteEnabled:Ur.O7})),bl.FeaturesConfigIOType=Ur.OT(Ur.r$({promptStorageEnabled:Ur.O7})),bl.StatusRequestIOType=Ur.OT(Ur.jV([Ur.dt({cheetahEnabled:Ur.O7}),Ur.r$({entryPointsConfig:bl.EntryPointsConfigIOType,featuresConfig:bl.FeaturesConfigIOType})])),bl.StatusResponseIOType=Ur.OT(Ur.jV([Ur.dt({cheetahEnabled:Ur.O7,status:fl.Dy.createStringEnum(ml,"status")}),Ur.r$({entryPointsConfig:bl.EntryPointsConfigIOType,featuresConfig:bl.FeaturesConfigIOType})]));let yl=bl;(yl||(yl={})).Status=ml;var _l=(e=>(e.DeactivatedForInstitutionByGrammarly="DEACTIVATED_FOR_INSTITUTION_BY_GRAMMARLY",e))(_l||{}),vl=(e=>(e.OptedOut="OPTED_OUT",e.OptedInOrgWide="OPTED_IN_ORG_WIDE",e.OptedInForSelectedGroups="OPTED_IN_FOR_SELECTED_GROUPS",e.Unconfigured="UNCONFIGURED",e))(vl||{});const wl=class e extends Kc.Base{constructor(e,t,n){super(),this._url=e,this._ajaxFactory=t,this._fingerprints=n,this._ajax=this._ajaxFactory({requestExtender:Yc.toHeaderAppender(this._fingerprints)})}static getDefaultUrl(e){return`https://goldengate${e}/configuration/cheetah/v1/institution/settings`}getStatus(){const t=gl.get(this._url);return this._ajax.json(t,e.StatusResponseIOType)}optIn(){const e=gl.post(this._url).json({optIn:"OPTED_IN_ORG_WIDE"});return this._ajax.empty(e)}optInGroups(e){const t={optIn:"OPTED_IN_FOR_SELECTED_GROUPS",optInGroups:e},n=gl.post(this._url).json(t);return this._ajax.empty(n)}optOut(){const e=gl.post(this._url).json({optIn:"OPTED_OUT"});return this._ajax.empty(e)}};wl.StatusRequestIOType=Ur.jV([Ur.dt({optIn:fl.Dy.literalUnion("optIn",fl.Dy.literalArray(["OPTED_OUT","OPTED_IN_ORG_WIDE","OPTED_IN_FOR_SELECTED_GROUPS"]))}),Ur.r$({optInGroups:Ur.IX(Ur.pk)})]),wl.CheetahOptedInStatusIOType=fl.Dy.literalUnion("status",fl.Dy.literalArray(["OPTED_IN_ORG_WIDE","OPTED_IN_FOR_SELECTED_GROUPS","OPTED_OUT","DEACTIVATED_FOR_INSTITUTION_BY_GRAMMARLY","UNCONFIGURED"])),wl.StatusResponseIOType=Ur.jV([Ur.dt({cheetahEnabled:Ur.O7,status:wl.CheetahOptedInStatusIOType}),Ur.r$({optInGroups:Ur.IX(Ur.pk)})]);let Sl=wl;var kl,Il,Cl;(kl=wl||(Sl={})).DeactivatedStatus=_l,kl.OptInStatus=vl;class El{constructor(e,t,n,r,i,o=q.create("CheetahSettingsServiceImpl")){this._url=e,this._actions=t,this._store=n,this._apiService=r,this._telemetry=i,this._log=o,this._api=(0,h.Vo)((()=>new yl(this._url,this._apiService.ajaxFactory,this._apiService.fingerprints))),this.fetchStatus=async()=>{try{const e=await this._api.get().getStatus(!0);return this._log.info("fetched cheetah status",e),await this._actions.cheetahSettings.setStatus(e),Tr.F2(void 0)}catch(e){return this._log.warn("CHEETAH SETTINGS SERVICE | fetch status fail. Message: ",e.message),this._telemetry.getCheetahStatusError(e.statusCode,e.body),Tr.t$(new Error(e))}},this.setStatus=async e=>{var t,n;const r=null===(n=null===(t=(await this._store.get(["extensionSettings"])).extensionSettings)||void 0===t?void 0:t.common.cheetah)||void 0===n?void 0:n.status;try{return this._log.info("setting cheetah status",e),await Promise.all([this._actions.cheetahSettings.setStatus(e),this._api.get().setStatus(e)]),Tr.F2(null)}catch(e){return await this._actions.cheetahSettings.setStatus(r||{}),this._telemetry.getCheetahStatusError(e.statusCode,e.body),Tr.t$(new Error(e))}}}}!function(e){e.isGranted=function(e,t=de().browserApi.permissions){return t?t.contains({permissions:[e]}):Promise.resolve(!1)},e.request=function(e,t=de().browserApi.permissions){return t?t.request({permissions:[e]}):Promise.resolve(!1)}}(Il||(Il={})),function(e){e.nativeMessaging="nativeMessaging",e.clipboardRead="clipboardRead"}(Cl||(Cl={}));const Al=Ta(5);class xl extends Error{toJSON(){return{message:this.message}}}class Tl extends xl{constructor(){super("Native messaging port not available")}}class Ol extends xl{constructor(){super("Connector cannot be used after it has been disposed")}}class Pl extends xl{constructor(e){super(`Unknown action: ${e}`),this.action=e}toJSON(){return{message:this.message,action:this.action}}}class Rl extends xl{constructor(e){super(`Unsupported protocol version: ${e}`),this.protocolVersion=e}toJSON(){return{message:this.message,protocolVersion:this.protocolVersion}}}class Dl extends xl{constructor(){super("Handshake error")}}class Nl extends Error{constructor(e){super(`Document not available: ${e}`),this.documentID=e}toJSON(){return{documentID:this.documentID,message:this.message}}}class Ul extends Error{constructor(e){super(`Unknown document: ${e}`),this.documentID=e}toJSON(){return{documentID:this.documentID,message:this.message}}}function Ml(e,t){if(!e||"object"!=typeof e)return e;try{const t=JSON.stringify(e,((e,t)=>Ze(t)));return JSON.parse(t)}catch(n){return null==t||t(),e}}class jl{constructor(e,t,n=Kt()){this._rpcMessageName=e,this._message=t,this._telemetry=n,this.inbound=new bi.y((e=>{const t=(t,n,r)=>{const i=JSON.stringify([r.tabId,r.frameId,t.clientId]);e.next({clientId:i,data:t.data})};return this._message.on(this._rpcMessageName,t),()=>this._message.off(this._rpcMessageName,t)})),this.outbound=e=>{const{tabId:t,frameId:n,clientId:r}=jl.decodeClientId(e.clientId);this._message.sendTo({tabId:t,frameId:n},this._rpcMessageName,{clientId:r,data:Ml(e.data,(()=>{var e;return null===(e=this._telemetry)||void 0===e?void 0:e.serializeTransportMsgFailed()}))})}}static decodeClientId(e){const[t,n,r]=JSON.parse(e);return{tabId:t,frameId:n,clientId:r}}}class Fl{constructor(e,t){this._transport=e,this._api=t,this._disposed=!1,this._sub=this._transport.inbound.subscribe({next:async e=>{try{const t=this._api[e.data.method];if("function"!=typeof t)throw{message:`invalid method name ${String(e.data.method)}`};{const n={clientId:e.clientId},r=await t.call(this._api,n,...e.data.args);this._transport.outbound({clientId:e.clientId,data:{id:e.data.id,res:r}})}}catch(t){this._transport.outbound({clientId:e.clientId,data:{id:e.data.id,err:t}})}}})}dispose(){this._disposed||(this._disposed=!0,this._sub.unsubscribe())}}var Ll,Gl=__webpack_require__(32073);class Bl{constructor(){this._connectors=new Map,this._cancellationTokenToConnectorMap=new Map,this._documentToConnectorMap=new Map}add(e){this._connectors.set(e.id,e)}delete(e){e.dispose(),this._connectors.delete(e.id);const t=e.id;this._documentToConnectorMap.forEach(((e,n)=>{e===t&&this._documentToConnectorMap.delete(n)}))}get(e){var t;return null!==(t=this._connectors.get(e))&&void 0!==t?t:null}forEach(e){this._connectors.forEach(e)}getConnectorForDocument(e){const t=this._documentToConnectorMap.get(e);if(null==t)throw new Ul(e);const n=this.get(t);if(null==n)throw new Nl(e);return n}getConnectorForCancellationToken(e){const t=this._cancellationTokenToConnectorMap.get(e);return null!=t?this.get(t):null}linkDocumentToConnector(e,t){this._documentToConnectorMap.set(e,t)}async withCancellationToken(e,t,n){try{return this._cancellationTokenToConnectorMap.set(e,t),await n()}finally{this._cancellationTokenToConnectorMap.delete(e)}}dispose(){this._connectors.forEach((e=>e.dispose())),this._connectors.clear(),this._cancellationTokenToConnectorMap.clear(),this._documentToConnectorMap.clear()}}class zl extends jl{constructor(e=ZJ().message){super("fg-connector-d7c96f",e),this._logger=q.create("BackgroundToForegroundTransport")}filterByClientId(e){return{inbound:this.inbound.pipe(Ki.h((t=>t.clientId===e)),Gr.U((e=>(this._logger.debug("inbound",e),e.data)))),outbound:t=>{this._logger.debug("outbound",t),this.outbound({clientId:e,data:t})}}}}class Vl{constructor(e,t){this._transport=e,this._log=t,this._calls=new Map,this._sub=this._transport.inbound.subscribe({next:e=>{var t;const n=this._calls.get(e.id);if(n)try{"err"in e?n.reject(e.err):n.resolve(e.res)}finally{this._calls.delete(e.id)}else null===(t=this._log)||void 0===t||t.warn(`received rpc call response for unregistered call ${e.id}`)}}),this.api=new Proxy({},{get:(e,t)=>"then"===t?void 0:(...e)=>this._handleCall(t,e)})}_handleCall(e,t){let n=h.iy.create();for(;this._calls.has(n);)n=h.iy.create();const r=Ts.createCompletionSource();return this._calls.set(n,r),this._transport.outbound({id:n,method:e,args:t}),r.promise}dispose(){this._sub.unsubscribe()}}class ql{constructor(e,t){this.id=e,this._isDisposed=!1,this._client=new Vl(t.filterByClientId(e),void 0)}async connectionStateChanged(e){return this._client.api.connectionStateChanged(e)}async cancel(e){return this._client.api.cancel(e)}async getDocumentText(e,t){return this._client.api.getDocumentText(e,t)}async getDocumentGeometry(e,t){return this._client.api.getDocumentGeometry(e,t)}async getBoundingBoxesForTextRanges(e,t){return this._client.api.getBoundingBoxesForTextRanges(e,t)}async setDocumentSelectedTextRanges(e,t){return this._client.api.setDocumentSelectedTextRanges(e,t)}async applyChangesToDocument(e,t){return this._client.api.applyChangesToDocument(e,t)}dispose(){this._isDisposed||(this._isDisposed=!0,this._client.dispose())}}class Hl{constructor(e,t){this._hostHandle=e,this._activeDocumentState=t,this._logger=q.create("ForegroundConnectorEvents")}_isActiveDocument(e,t){const n=this._activeDocumentState.getActiveDocument();return(null==n?void 0:n.connectorID)===e&&n.event.documentID===t}async documentDidFocus(e,t){return this._logger.debug("documentDidFocus",t),null!=t?(this._activeDocumentState.setActiveDocument(e,t),this._logger.debug(`activeDocument: ${t.documentID}`)):(this._logger.debug("activeDocument: null"),this._activeDocumentState.setActiveDocument(e,null)),this._hostHandle.executeRemoteMethod("documentDidFocus",t)}async documentGeometryWillChange(e,t){if(this._logger.debug("documentGeometryWillChange",t),this._isActiveDocument(e,t.documentID))return this._hostHandle.executeRemoteMethod("documentGeometryWillChange",t);this._logger.debug("documentGeometryWillChange: ignored")}async documentGeometryDidChange(e,t){if(this._logger.debug("documentGeometryDidChange",t),this._isActiveDocument(e,t.documentID))return this._hostHandle.executeRemoteMethod("documentGeometryDidChange",t);this._logger.debug("documentGeometryDidChange: ignored")}async documentTextDidChange(e,t){var n;if(this._logger.debug("documentTextDidChange",t),this._isActiveDocument(e,t.documentID))return this._activeDocumentState.setActiveDocument(e,{...null===(n=this._activeDocumentState.getActiveDocument())||void 0===n?void 0:n.event,documentID:t.documentID,revision:t.revision}),this._hostHandle.executeRemoteMethod("documentTextDidChange",t);this._logger.debug("documentTextDidChange: ignored")}async documentSelectedTextRangesDidChange(e,t){if(this._logger.debug("documentSelectedTextRangesDidChange",t),this._isActiveDocument(e,t.documentID))return this._hostHandle.executeRemoteMethod("documentSelectedTextRangesDidChange",t);this._logger.debug("documentSelectedTextRangesDidChange: ignored")}async documentDidDestroy(e,t){if(this._logger.debug("documentDidDestroy",t),this._isActiveDocument(e,t.documentID))return this._hostHandle.executeRemoteMethod("documentDidDestroy",t);this._logger.debug("documentDidDestroy: ignored")}}function Wl(e=""){return e?((Number(e)^16*Math.random())>>Number(e)/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,Wl)}!function(e){e.INCOMING="incoming",e.OUTGOING="outgoing",e.UNEXPECTED="unexpected"}(Ll||(Ll={}));class $l{_defaultRequestTimeout=3e4;_pendingRequests=new Map;_transport;requestHandler;debugHandler;constructor(e,t,n){this._transport=e,this.requestHandler=t,this.debugHandler=n,e.onMessage=e=>{"response"===e.type?this._handleIncomingResponse(e):"request"===e.type&&this._handleIncomingRequest(e)}}_lastId=0;_prefix=Wl();_generateId(){return`${this._prefix}-${++this._lastId}`}async call(e,t,n=this._defaultRequestTimeout){const r=this._generateId();return new Promise(((i,o)=>{const s=setTimeout((()=>{this._pendingRequests.has(r)&&(this._pendingRequests.delete(r),o(new Yl(r,e,t)))}),n);this._pendingRequests.set(r,{complete:e=>{clearTimeout(s),this.debugHandler?.(Ll.INCOMING,e),this._pendingRequests.delete(r);const t=e.data;if("success"===t.status)i(t.data);else{const e="object"==typeof t.data&&null!=t.data&&"errorMessage"in t.data?String(t.data.errorMessage):"Unknown error";o(Object.assign(new Error(e),t.data))}},timerId:s});const a={id:r,type:"request",action:e,data:t};this.debugHandler?.(Ll.OUTGOING,a),this._transport.sendMessage(a)}))}dispose(){for(const e of this._pendingRequests.values())clearTimeout(e.timerId);this._pendingRequests.clear(),this._transport.onMessage=void 0}_handleIncomingResponse(e){const t=this._pendingRequests.get(e.id);null!=t?t.complete(e):this.debugHandler?.(Ll.UNEXPECTED,e)}async _handleIncomingRequest(e){try{if(this.debugHandler?.(Ll.INCOMING,e),null==this.requestHandler)throw new Kl(e.action);const t=await this.requestHandler(e);if(t===Symbol.for("gOS:rpc:skipResponse"))return;const n={id:e.id,action:e.action,type:"response",data:{status:"success",data:t}};this.debugHandler?.(Ll.OUTGOING,n),this._transport.sendMessage(n)}catch(t){const n={id:e.id,action:e.action,type:"response",data:{status:"failure",data:Object.assign({errorMessage:t.message},JSON.parse(JSON.stringify(t)))}};this.debugHandler?.(Ll.INCOMING,n),this._transport.sendMessage(n)}}}class Xl extends Error{}class Kl extends Xl{action;constructor(e){super(`No handler for RPC call ${e}`),this.action=e}}class Yl extends Xl{id;action;data;constructor(e,t,n){super(`RPC call ${t} timed out`),this.id=e,this.action=t,this.data=n}}class Zl{_outgoing;constructor(e){this._outgoing=e}_listener;get onMessage(){return this._listener}set onMessage(e){if(this._listener=e,null!=e){for(const t of this._queue)e(t);this._queue.length=0}}async sendMessage(e){await this._outgoing.sendMessage(e)}_queue=[];receiveMessage(e){if(null==this._listener){if(this._queue.length>100)throw new Jl;this._queue.push(e)}else this._listener(e)}}class Jl extends Error{constructor(){super("Buffer overrun")}}class Ql extends Zl{constructor(e){var t,n;super({sendMessage:async e=>(this.getPort().postMessage(e),Promise.resolve())}),this._port=null,this._onDisconnect=null!==(t=e.onDisconnect)&&void 0!==t?t:h.EI,this._connectNative=null!==(n=e.connectNative)&&void 0!==n?n:e=>ZJ().browserApi.connectNative(e),this._port=this.createPort()}getPort(){return this._port||(this._port=this.createPort()),this._port}createPort(){const e=this._connectNative("com.grammarly.desktop");if(!e)throw new Tl;return e.onMessage((e=>{this.receiveMessage(e)})),e.onDisconnect((e=>{this._port=null,this._onDisconnect(e)})),e}}class eu{constructor(e){this._options=e,this._logger=q.create("ConnectorHostHandleImpl"),this._state={kind:"disconnected"},this._rpc=new $l(this._createTransport(this._options),this._createRequestHandler(this._options),this._createMessageObserver(this._options)),this.reconnect()}_setConnectionState(e){"disposed"!==this._state.kind&&("connecting"===this._state.kind&&this._state.controller.abort(),this._state=e)}_createTransport(e){return new Ql({onDisconnect:t=>{var n;this._setConnectionState({kind:"disconnected"}),null===(n=e.onDisconnect)||void 0===n||n.call(e,t)}})}_createRequestHandler(e){const t=function(e){const{connector:t}=e;return async e=>{const n=e.action;switch(n){case"cancel":{const{requestID:n}=e.data;return t.cancel(n)}case"getDocumentText":{const n=e.data;return t.getDocumentText(n,e.id)}case"getDocumentGeometry":{const n=e.data;return t.getDocumentGeometry(n,e.id)}case"getBoundingBoxesForTextRanges":{const n=e.data;return t.getBoundingBoxesForTextRanges(n,e.id)}case"setDocumentSelectedTextRanges":{const n=e.data;return t.setDocumentSelectedTextRanges(n,e.id)}case"applyChangesToDocument":{const n=e.data;return t.applyChangesToDocument(n,e.id)}default:try{(0,ll.vE)(n)}catch(e){throw new Pl(n)}}}}(e);return async e=>{if("echo"===e.action)return e;switch(this._state.kind){case"connected":return await t(e);case"connecting":return await this._ensureActiveConnection(),await t(e);case"disconnected":throw new Dl;case"disposed":throw new Ol;default:(0,ll.L0)(this._state)}}}_createMessageObserver(e){return function(e){const{onIncomingMessage:t,onOutgoingMessage:n}=e,r=q.create("NativeMessaging");return(e,i)=>{switch(e){case"incoming":null==t||t(i);break;case"outgoing":null==n||n(i);break;case"unexpected":r.error("unexpected message",i);break;default:(0,ll.vE)(e)}}}(e)}get isConnected(){return this._isNativeHostConnected()}async _isNativeHostConnected(){if("connected"!==this._state.kind)try{await this._ensureActiveConnection()}catch(e){this._logger.error("Error checking connection state",e),this._options.telemetry.checkConnectionFailed(e.message)}return"connected"===this._state.kind}async _ensureActiveConnection(){switch(this._state.kind){case"connected":return;case"connecting":return this._state.promise.then((()=>(0,Ke.gw)(0)));case"disconnected":return this._connect();case"disposed":throw new Ol;default:(0,ll.L0)(this._state)}}async _connect(){var e,t;try{const n=this._handshake(),r=new AbortController;if(this._setConnectionState({kind:"connecting",promise:n,controller:r}),await n,r.signal.aborted)return;this._setConnectionState({kind:"connected"}),null===(t=(e=this._options).onConnect)||void 0===t||t.call(e)}catch(e){throw this._setConnectionState({kind:"disconnected"}),e}}async _handshake(){this._logger.error("Connector handshake is not implemented yet. This should not be used in production.");const e={client:this._options.clientName,version:this._options.clientVersion,protocolVersion:0,options:{viewportAndWindowFrameStrategy:"browser"}};try{const t=await this._rpc.call("handshake",e,1e3);if(t.protocolVersion!==e.protocolVersion)throw new Rl(t.protocolVersion)}catch(e){throw this._logger.error("handshake failed",e),this._options.telemetry.handshakeFailed(e.message),new Dl}}reconnect(){"disposed"!==this._state.kind&&this._ensureActiveConnection().catch((e=>{this._options.telemetry.connectionFailed(e.message),this._logger.error("Failed to connect",e)}))}async executeRemoteMethod(e,t){return await this._ensureActiveConnection(),this._rpc.call(e,t)}dispose(){"disposed"!==this._state.kind&&(this._setConnectionState({kind:"disposed"}),this._rpc.dispose())}}class tu extends Bl{get isHostConnected(){return this._logger.debug("checking connection state"),this._hostHandle.isConnected}constructor(e,t){super(),this._actions=e,this._isHostConnected=U.h.create(!1),this._subscription=new Gl.w0,this._logger=q.create("ConnectorManager"),this._connector=this._createCancellableConnector(),this._bgToFgTransport=new zl,this._reconnectSubscription=new Gl.w0,this._activeDocument=null,this._failedConnectionCount=0;const n=N(),r=(i={telemetry:t,clientName:n.bundleInfo.extensionType,clientVersion:n.buildInfo.version,connector:this._connector,onConnect:()=>{this._actions.setConnectionState(!0),this._isHostConnected.set(!0),this._logger.debug("connected"),this._sendActiveDocument(),this._failedConnectionCount=0,t.connected()},onDisconnect:e=>{this._actions.setConnectionState(!1),this._isHostConnected.set(!1),this._logger.debug("disconnected"),this._tryReconnect(),this._failedConnectionCount++,t.disconnected(e)},onIncomingMessage:e=>{this._logger.debug("incoming message",e)},onOutgoingMessage:e=>{this._logger.debug("outgoing message",e)}},new eu(i));var i;this._hostHandle=r,this.events=new Hl(r,{getActiveDocument:()=>this._activeDocument,setActiveDocument:(e,t)=>{var n;null===t&&(null===(n=this._activeDocument)||void 0===n?void 0:n.connectorID)!==e||(null!==t?(this.linkDocumentToConnector(t.documentID,e),this._activeDocument={connectorID:e,event:t}):this._activeDocument=null)}}),this._subscription.add(this._isHostConnected.subscribe((e=>{this.forEach((t=>{t.connectionStateChanged(e).catch((e=>{this._logger.debug(e)}))}))})))}_createCancellableConnector(){return{cancel:e=>{var t;return null===(t=this.getConnectorForCancellationToken(e))||void 0===t?void 0:t.cancel(e)},getDocumentText:(e,t)=>{const n=this.getConnectorForDocument(e.documentID);return this.withCancellationToken(t,n.id,(()=>n.getDocumentText(e,t)))},getBoundingBoxesForTextRanges:(e,t)=>{const n=this.getConnectorForDocument(e.documentID);return this.withCancellationToken(t,n.id,(()=>n.getBoundingBoxesForTextRanges(e,t)))},getDocumentGeometry:(e,t)=>{const n=this.getConnectorForDocument(e.documentID);return this.withCancellationToken(t,n.id,(()=>n.getDocumentGeometry(e,t)))},setDocumentSelectedTextRanges:(e,t)=>{const n=this.getConnectorForDocument(e.documentID);return this.withCancellationToken(t,n.id,(()=>n.setDocumentSelectedTextRanges(e,t)))},applyChangesToDocument:(e,t)=>{const n=this.getConnectorForDocument(e.documentID);return this.withCancellationToken(t,n.id,(()=>n.applyChangesToDocument(e,t)))}}}createConnectorForDocument(e,t){var n;const r=null!==(n=this.get(e))&&void 0!==n?n:new ql(e,this._bgToFgTransport);return this.linkDocumentToConnector(t,e),this.add(r),r}_tryReconnect(){this._failedConnectionCount<1&&null!=this._activeDocument?this._hostHandle.reconnect():(this._reconnectSubscription.unsubscribe(),this._reconnectSubscription=Zi.timer(Al).pipe(Ki.h((()=>!this._isHostConnected.get()))).subscribe((()=>this._hostHandle.reconnect())))}_sendActiveDocument(){this._activeDocument&&this._hostHandle.executeRemoteMethod("documentDidFocus",this._activeDocument.event)}deleteAllForTab(e){this.forEach((t=>{let n=null;try{n=parseInt(jl.decodeClientId(t.id).tabId,10),Number.isSafeInteger(n)||(n=null)}catch(e){this._logger.error("Failed to parse connector ID",e)}n===e&&this.delete(t)}))}dispose(){this._actions.setConnectionState(!1),this._logger.debug("disposing"),this._subscription.unsubscribe(),this._hostHandle.dispose(),this._activeDocument=null,super.dispose()}}class nu extends Fl{constructor(e,t,n){super(new jl("bg-connector-d7c96f",e),{isConnected:()=>{if(this._isDisposed)throw new Ol;return this._manager.isHostConnected},documentDidFocus:(e,t)=>(t&&this._manager.createConnectorForDocument(e.clientId,t.documentID),this._manager.events.documentDidFocus(e.clientId,t)),documentGeometryDidChange:(e,t)=>this._manager.events.documentGeometryDidChange(e.clientId,t),documentTextDidChange:(e,t)=>this._manager.events.documentTextDidChange(e.clientId,t),documentGeometryWillChange:(e,t)=>this._manager.events.documentGeometryWillChange(e.clientId,t),documentSelectedTextRangesDidChange:(e,t)=>this._manager.events.documentSelectedTextRangesDidChange(e.clientId,t),documentDidDestroy:(e,t)=>this._manager.events.documentDidDestroy(e.clientId,t)}),this._isDisposed=!1,this._manager=new tu(t,n)}dispose(){this._isDisposed||(this._isDisposed=!0,this._manager.dispose(),super.dispose())}}async function ru(e,t,n,r){return await async function(e){const t=e.isGateEnabled(De.ConnectorGdocs)||e.isGateEnabled(De.ConnectorNonGdocs),n=ZJ().config.systemInfo.os.isMac,r=await Il.isGranted(Cl.nativeMessaging);return Ue()&&t&&n&&r}(n)?new nu(e,t,r):(t.setConnectionState(!1),{dispose:h.EI})}class iu{constructor(e){this._params=e,this._logger=function(e){return q.create(`vBars.${e}`)}(iu.name),this._logger.debug("Register resetG2VBarSettings debug helper."),(0,ao.iR)("resetG2VBarSettings",(e=>{this._logger.debug("Resetting G2 vBar settings.");const{patchCommonSettings:t}=this._params.storeActions.settings;t({g2Settings:e})}))}markVBarUsed(e){return this._logger.debug("Marking vBar as used.",e),this._params.storeActions.g2Settings.markVBarUsed(e)}setOnboardingAcceptCount(e){return this._logger.debug("Setting vBars onboarding accept count.",e),this._params.storeActions.g2Settings.setOnboardingAcceptCount(e)}setOnboardingCompletedStep(e){return this._logger.debug("Setting vBars onboarding completed step",e),this._params.storeActions.g2Settings.setOnboardingCompletedStep(e)}setOnboardingDismissed(e){return this._logger.debug("Setting vBars onboarding as dismissed.",e),this._params.storeActions.g2Settings.setOnboardingDismissed(e)}setOnboardingPulsatingSeen(e){return this._logger.debug("Setting vBars onboarding pulsating seen.",e),this._params.storeActions.g2Settings.setOnboardingPulsatingSeen(e)}setOnboardingRevertPresentedCount(e){return this._logger.debug("Setting vBars onboarding revert presented count.",e),this._params.storeActions.g2Settings.setOnboardingRevertPresentedCount(e)}setVBarTypeDeactivated(e){return this._logger.debug("Setting vBar type as deactivated per domain.",e),this._params.storeActions.g2Settings.setVBarTypeDeactivated(e)}setVBarTypesActivated(e){return this._logger.debug("Setting vBar types as activated per domain.",e),this._params.storeActions.g2Settings.setVBarTypesActivated(e)}recordTranslationLanguages(e){return this._logger.debug("Recording vBars translation languages.",e),this._params.storeActions.g2Settings.recordTranslationLanguages(e)}markTranslateOnboardingAsSeen(e){return this._logger.debug('Marking vBars\' "Translate" onboarding as seen.'),this._params.storeActions.g2Settings.markTranslateOnboardingAsSeen(e)}setMultilingualOnboardingShowsCount(e){return this._logger.debug("Recording vBars multilingual onboarding shows count.",e),this._params.storeActions.g2Settings.setMultilingualOnboardingShowsCount(e)}}var ou=__webpack_require__(64443);function su(e){return J(e)&&e>0}const au=(e,t)=>{var n;const r=[...t].sort(((e,t)=>e-t));return Number.isNaN(e)?null:r.find((t=>t>e))||(null!==(n=r[t.length-1])&&void 0!==n?n:null)},cu=(e,t)=>{const n=[...t.keys()],r=au(e,n);return r?t.get(r):null};var lu,uu,du,hu,pu,gu;!function(e){e.refreshIterableToken="refreshIterableToken",e.refreshDynamicConfig="refreshDynamicConfig",e.refreshUser="refreshUser",e.sendFeMetrics="sendFeMetrics",e.sendServiceAvailabilityMetrics="sendServiceAvailabilityMetrics",e.refreshVBarsSettings="refreshVBarsSettings",e.sessionKeepAlive="sessionKeepAlive"}(lu||(lu={})),function(e){e.merge=function(e,t){return!t||e.isDefault||e.periodInMinutes===t.periodInMinutes?e:t},e.getRandomMinutes=function(e){return Math.floor(Ta(Math.random()*(e+1)))},e.shouldModifyAlarm=function(e,t){return J(t.periodInMinutes)&&e.periodInMinutes!==t.periodInMinutes},e.modify=function(t,n){var r;return e.shouldModifyAlarm(t,n)?{execTimestamp:Math.min(t.execTimestamp,Date.now()+(n.execRandomly?e.getRandomMinutes(n.periodInMinutes):Ta(n.periodInMinutes))),periodInMinutes:n.periodInMinutes,...n.execRandomly?{periodEndTimestamp:Math.min(null!==(r=t.periodEndTimestamp)&&void 0!==r?r:1/0,Date.now()+Ta(n.periodInMinutes))}:{},isDefault:!!n.isDefault}:t},e.create=function(t){const n=t.execRandomly&&su(t.periodInMinutes);return{periodInMinutes:t.periodInMinutes,execTimestamp:Date.now()+(J(t.delayInMinutes)?Ta(t.delayInMinutes):n?e.getRandomMinutes(t.periodInMinutes):Ta(t.periodInMinutes)),isDefault:!!t.isDefault,...n?{periodEndTimestamp:Date.now()+Ta(t.periodInMinutes)}:{}}}}(uu||(uu={}));class fu{constructor(e,t,n=h.W3){this._getAlarms=e,this._setAlarms=t,this._debounce=n,this._alarmState={},this._alarmHandlersList=[],this._alarmTimers={},this.update=(e,t)=>{uu.shouldModifyAlarm(this._alarmState[e],t)&&(this._alarmState[e]=uu.modify(this._alarmState[e],t),this._updateStore(),this._waitFoAlarm(e,this._alarmState[e]))},this.register=(e,t)=>!this._isInitialized&&(this._alarmState[e]=uu.create(t),!0),this._updateStore=this._debounce((()=>{this._setAlarms({...this._alarmState})}),xa(3)),this.onAlarm=e=>{const t=this._isInitialized;this._alarmHandlersList.push(e),t||this._init()}}get _isInitialized(){return!!this._alarmHandlersList.length}async _init(){var e;const t=null!==(e=await this._getAlarms())&&void 0!==e?e:{};Object.keys(t).forEach((e=>{this._alarmState[e]&&(this._alarmState[e]=uu.merge(t[e],this._alarmState[e]))})),Object.keys(this._alarmState).forEach((e=>this._waitFoAlarm(e,this._alarmState[e]))),this._updateStore()}_waitFoAlarm(e,t){clearInterval(this._alarmTimers[e]);const n=Math.max(0,t.execTimestamp-Date.now());this._alarmTimers[e]=setTimeout((()=>{const n=su(t.periodInMinutes),r=J(t.periodEndTimestamp);if(this._emitAlarm({name:e}),n&&r){const n=Math.max(t.periodEndTimestamp,Date.now());this._alarmState[e]={periodInMinutes:t.periodInMinutes,execTimestamp:n+uu.getRandomMinutes(t.periodInMinutes),periodEndTimestamp:n+Ta(t.periodInMinutes)}}else n?this._alarmState[e]={periodInMinutes:t.periodInMinutes,execTimestamp:Date.now()+Ta(t.periodInMinutes)}:delete this._alarmState[e];this._updateStore(),n&&this._waitFoAlarm(e,this._alarmState[e])}),n)}_emitAlarm(e){this._alarmHandlersList.forEach((t=>t(e)))}}!function(e){e.bgWakeUp="bgWakeUp",e.bgFirstStart="bgFirstStart",e.alarm="alarm",e.storeChange="storeChange",e.activeTabChange="activeTabChange",e.windowOrActiveTabChange="windowOrActiveTabChange",e.refreshUser="refreshUser",e.logoutUser="logoutUser"}(du||(du={})),function(e){e.isBgWakeUp=e=>e.type===du.bgWakeUp,e.isBgFirstStart=e=>e.type===du.bgFirstStart,e.isStoreChange=e=>e.type===du.storeChange&&X(e.change),e.isReady=t=>{var n,r;return e.isStoreChange(t)&&"ready"===(null===(r=null===(n=t.change.extensionFSM)||void 0===n?void 0:n.newValue)||void 0===r?void 0:r.stage)},e.isDataControl=t=>{var n,r;return e.isStoreChange(t)&&"data_control"===(null===(r=null===(n=t.change.extensionFSM)||void 0===n?void 0:n.newValue)||void 0===r?void 0:r.stage)},e.isRefreshUser=e=>e.type===du.refreshUser,e.isAlarm=e=>e.type===du.alarm&&X(e.alarm),e.isActiveTabChange=e=>e.type===du.activeTabChange&&X(e.tab),e.isWindowOrActiveTabChange=e=>e.type===du.windowOrActiveTabChange,e.isUserSwitched=t=>{var n,r,i,o;return e.isStoreChange(t)&&(null===(r=null===(n=t.change.user)||void 0===n?void 0:n.newValue)||void 0===r?void 0:r.id)!==(null===(o=null===(i=t.change.user)||void 0===i?void 0:i.oldValue)||void 0===o?void 0:o.id)},e.isLogoutUserEvent=e=>e.type===du.logoutUser}(hu||(hu={})),function(e){e.activeTabChange="activeTabChange",e.connectionInit="connectionInit",e.checkOnline="checkOnline",e.openDataControl="openDataControl",e.desktopIntegrationInit="desktopIntegrationInit",e.dynamicConfigAlarm="dynamicConfigAlarm",e.dynamicConfigInit="dynamicConfigInit",e.dynamicConfigNotExists="dynamicConfigNotExists",e.dynamicConfigUserSwitch="dynamicConfigUserSwitch",e.fsmInit="fsmInit",e.settingsInit="settingsInit",e.trackingInitOnBgInit="trackingInitOnBgInit",e.trackingInitOnFSMChangeReady="trackingInitOnFSMChangeReady",e.trackingSetUserOnBgWakeUp="trackingSetUserOnBgWakeUp",e.pageConfigInit="pageConfigInit",e.pageConfigUpdateFromCDN="pageConfigUpdateFromCDN",e.reminderNotificationUpdate="reminderNotificationUpdate",e.renderBadge="renderBadge",e.updateUninstallUrl="updateUninstallUrl",e.safariLogoutUser="safariLogoutUser",e.safariUserInfoReporter="safariUserInfoReporter",e.userUpdateOnBgInit="userUpdateOnBgInit",e.userUpdateOnFSMChangeReady="userUpdateOnFSMChangeReady",e.userUpdateOnEmitRefresh="userUpdateOnEmitRefresh",e.userUpdateOnAlarm="userUpdateOnAlarm",e.legacyBgFirstStart="legacyBgFirstStart",e.iterableInit="iterableInit",e.iterableUpdateOnUserSwitch="iterableUpdateOnUserSwitch",e.iterableUpdateOnAlarm="iterableUpdateOnAlarm",e.backendManagedStorageClearOnUserLogout="backendManagedStorageClearOnUserLogout",e.monitorCookiesAccessibility="monitorCookiesAccessibility",e.serviceAvailabilityTracking="serviceAvailabilityTracking",e.viewDurationTracking="viewDurationTracking",e.vBarsSettingsRefresh="vBarsSettingsRefresh",e.brandingChange="brandingChange",e.aaaCleanupChatHistory="aaaCleanupChatHistory",e.sessionKeepAlive="sessionKeepAlive"}(pu||(pu={})),function(e){function t(e,t,n,r){return{name:e,kind:t,condition:n,effect:r}}function n(e,n,r,i){const o=i=>({kind:n,create:()=>t(e,n,r,i)});return i?o(i):o}e.createEffect=n,e.alarm=function(e,n,r){const i=r=>({kind:du.alarm,create:i=>(i.register(n.name,n),t(e,du.alarm,(e=>hu.isAlarm(e)&&n.name===e.alarm.name),r))});return r?i(r):i},e.storeChange=function(e,t,r){return r?n(e,du.storeChange,t,r):n(e,du.storeChange,t)},e.refreshUser=function(e,t){return t?n(e,du.refreshUser,hu.isRefreshUser,t):n(e,du.refreshUser,hu.isRefreshUser)},e.bgWakeUp=function(e,t){return t?n(e,du.bgWakeUp,hu.isBgWakeUp,t):n(e,du.bgWakeUp,hu.isBgWakeUp)},e.bgFirstStart=function(e,t){return t?n(e,du.bgFirstStart,hu.isBgFirstStart,t):n(e,du.bgFirstStart,hu.isBgFirstStart)},e.logoutUser=function(e,t){return t?n(e,du.logoutUser,hu.isLogoutUserEvent,t):n(e,du.logoutUser,hu.isLogoutUserEvent)},e.activeTabChange=function(e,t){return t?n(e,du.activeTabChange,hu.isActiveTabChange,t):n(e,du.activeTabChange,hu.isActiveTabChange)},e.windowOrActiveTabChange=function(e,t){return t?n(e,du.windowOrActiveTabChange,hu.isWindowOrActiveTabChange,t):n(e,du.windowOrActiveTabChange,hu.isWindowOrActiveTabChange)},e.compose=function(...e){return t=>e.map((e=>e(t)))}}(gu||(gu={}));const mu=Aa(7),bu=Aa(1),yu=(e,t,n,r)=>{var i,o;const s=ou.C8.Logging.getLogger("g2.getVBarsReactivationSideEffect");s.debug("Creating side effect to cancel G2 vBar types deactivation by timeout");const a=(null!==(o=null===(i=null==t?void 0:t.vBars)||void 0===i?void 0:i.coolDownDeactivationCheckIntervalMs)&&void 0!==o?o:bu)/Ia;return gu.compose(gu.alarm(pu.vBarsSettingsRefresh,{name:lu.refreshVBarsSettings,delayInMinutes:0,periodInMinutes:a}),gu.storeChange(pu.vBarsSettingsRefresh,hu.isUserSwitched))((async({state:t})=>{var i,o,a,c;if(!r())return;const l=null!==(a=null===(o=null===(i=t.dynamicConfig)||void 0===i?void 0:i.vBars)||void 0===o?void 0:o.coolDownDeactivationTimeoutMs)&&void 0!==a?a:mu;s.debug("Canceling G2 vBar types deactivation by timeout - checking data...");const u=null===(c=t.extensionSettings)||void 0===c?void 0:c.common.g2Settings;if(!u||!u.deactivatedVBarTypes)return s.debug("No deactivation to cancel because no G2 Settings found"),Promise.resolve();const d=function(e,t){const n=Object.keys(e),r=[];return n.forEach((n=>{const i=e[n],o=Date.now();i.idle.deactivated&&o-i.idle.lastChangeTimestamp>t&&r.push({domain:n,vBarType:"idle",deactivated:!1,lastChangeTimestamp:Date.now()}),i.pushed_content.deactivated&&o-i.pushed_content.lastChangeTimestamp>t&&r.push({domain:n,vBarType:"pushed_content",deactivated:!1,lastChangeTimestamp:Date.now()})})),r}(u.deactivatedVBarTypes,l);if(0!==d.length){const t="Reactivating vBar types; cooldown period has elapsed.";return s.debug(t,{activationInfos:d}),n.g2LoggerFactory({integrationName:"_bg",level:ft.INFO})({message:t,data:{activationInfos:d}}),e(d).then((()=>{s.info("Deactivation by timeout canceled successfully",{activationInfos:d})})).catch((e=>{const t="Failed to cancel deactivation by timeout";n.g2LoggerFactory({integrationName:"_bg",level:ft.ERROR})({message:t,error:e}),s.error(t,{error:e})}))}s.debug("No deactivation to cancel")}))};var _u=__webpack_require__(14527),vu=__webpack_require__(95869);const wu="https://gateway.grammarly.com/authorship/v1/";__webpack_require__(72138);function Su(e,t){const n=`${wu}user/${e}/encryption/keys`;return t?`${n}/${t}`:n}var ku,Iu,Cu;!function(e){e.getNumInsertedLetters=function(e){return e.ops.reduce(((e,t)=>vu.s.isInsertString(t)?e+vu.s.getInsertLength(t):e),0)},e.getNumDeletedLetters=function(e){const t=e.ops.filter((e=>vu.s.isDelete(e)));let n=0;return t.forEach((e=>{vu.s.isDelete(e)&&(n+=e.delete)})),n},e.getSummary=function(e,t){return t.ops.reduce(((t,n)=>{let{retained:r,retainedPrefix:i,deleted:o,inserted:s,maximalReplacement:a}=t.summary,c=t.pointer;return vu.s.isRetain(n)&&(r=`${r}${e.substring(c,c+n.retain)}`,i=0===o.length&&0===s.length?`${i}${e.substring(c,c+n.retain)}`:i,a=a.length?`${a}${e.substring(t.pointer,t.pointer+n.retain)}`:a,c+=n.retain),vu.s.isDelete(n)&&(o=`${o}${e.substring(c,c+n.delete)}`,c+=n.delete),vu.s.isInsertString(n)&&(s=`${s}${n.insert}`,a=`${a}${n.insert}`),{pointer:c,summary:{retained:r,retainedPrefix:i,deleted:o,inserted:s,maximalReplacement:a}}}),{pointer:0,summary:{retained:"",retainedPrefix:"",deleted:"",inserted:"",maximalReplacement:""}}).summary},e.extractMaximalReplacementString=function(e,t){return t.ops.reduce(((t,n)=>(vu.s.isInsertString(n)?t.text=`${t.text}${n.insert}`:vu.s.isDelete(n)?t.originalTextPointer+=n.delete:vu.s.isRetain(n)&&(t.text.length&&(t.text=`${t.text}${e.substring(t.originalTextPointer,t.originalTextPointer+n.retain)}`),t.originalTextPointer+=n.retain),t)),{text:"",originalTextPointer:0}).text||null},e.singleDelta=function(e,t){if(e===t)return new _u.i([]);let n=0;const r=Math.min(e.length,t.length);for(;n<r&&e[n]===t[n];)n++;let i=0;for(;n+i<r&&t[t.length-i-1]===e[e.length-i-1];)i++;const o=e.length-(n+i),s=t.length-(n+i),a=[...n>0?[{retain:n}]:[],...o>0?[{delete:o}]:[],...s>0?[{insert:t.substring(n,n+s)}]:[]];return new _u.i(a)},e.isNoTextChangesDelta=function(e){return e.ops.every((e=>vu.s.isInsertString(e)?!e.insert.length:!vu.s.isDelete(e)||!e.delete))}}(ku||(ku={})),function(e){e.isTextEqual=function(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;++n)if(e[n].character!=t[n].character)return!1;return!0},e.isContentEqual=function(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;++n)if(e[n].character!=t[n].character||e[n].sourceContentId!=t[n].sourceContentId||e[n].isSelfAuthored!=t[n].isSelfAuthored)return!1;return!0}}(Iu||(Iu={})),function(e){e.hasPerLetterTags=function(e){return e.isSelfAuthoredTags.length==e.text.length},e.toLoggableString=function(e){const t=function(e,t){if(e.length<=t)return e;if(t<=3)return"...";const n=Math.ceil((t-3)/2),r=Math.floor((t-3)/2);return`${e.substring(0,n)}...${e.substring(e.length-r,e.length)}`}(e.text,40);return`CopiedContent [text length=${e.text.length}, has per letter tags=$hasPerLetterTags({sourcedContent)}, text=${t}]`},e.eq=function(e,t){if(e.length!==t.length)return!1;const n=e.slice().sort(((e,t)=>e.text.localeCompare(t.text)||e.sourceName.localeCompare(t.sourceName))),r=t.slice().sort(((e,t)=>e.text.localeCompare(t.text)||e.sourceName.localeCompare(t.sourceName)));return n.every(((e,t)=>e.text===r[t].text&&e.sourceName===r[t].sourceName))}}(Cu||(Cu={}));new Set(["'","","","","",""]),new Set(['"',"","","","","","","","","","","","","","","","","",""]),new Set([""]),new Set([""]),new Set(["\v","\r","\v","\f"]);class Eu{constructor(e,t,n=q.create(`HWR-${Eu.name}`)){this._getUserOrUndefined=e,this._apiService=t,this._log=n,this._settings=U.h.create(null),this.settings=this._settings.view(),this.getSettings().catch((e=>{"User is not logged in"!==e?this._logError(e):this._log.debug("Could not get settings:",e)}))}async generateReport(e){const t=this._getUserOrUndefined();if(!t||t.anonymous)return Promise.reject("User is not logged in");try{const i=gl.post((r=t.id,`${wu}user/${r}/upload`));i.body(JSON.stringify(e)),i.header("Content-Type","application/json");const o=await this._apiService.ajax.json(i);return this._log.debug("Response:",o),"object"==typeof o&&null!==o&&"reportId"in o?(n=String(o.reportId),`https://authorship.grammarly.com/reports/${encodeURIComponent(n)}`):Promise.reject("500: Bad response")}catch(e){return this._log.debug("Could not generate report:",e),Promise.reject(e)}var n,r}async getSettings(){const e=this._getUserOrUndefined();if(!e||e.anonymous)return Promise.reject("User is not logged in");try{const n=gl.get((t=e.id,`${wu}user/${t}/settings`));n.header("Content-Type","application/json");const r=await this._apiService.ajax.json(n);return this._settings.set(r),r}catch(e){return this._logError(e),Promise.reject(e)}var t}_logError(e){this._log.debug("Could not get settings:",e);Kt().humanWritingReport.error("pageIntegrationFailed",`Could not get settings: ${e.message||"Unknown error"}`)}}class Au{constructor(e,t){this._storeActions=e,this._logger=q.create(`HWR-${Au.name}`),this._subs=new Gl.w0,this._subs.add(t.pipe(Ki.h((e=>null!==e))).subscribe((e=>{this._processBackendSettings(e)})))}_setInitial(e){return this._logger.debug("Relaying HWR initial state to store actions.",{enabled:e}),this._storeActions.humanWritingReport.setInitial(e)}setEnabled(e){return this._logger.debug("Relaying HWR enabled state to store actions.",{enabled:e}),this._storeActions.humanWritingReport.setEnabled(e)}startTracking(e){return this._logger.debug("Relaying HWR start tracking document state to store actions.",e),this._storeActions.humanWritingReport.startTracking(e)}stopTracking(e){return this._logger.debug("Relaying HWR stop tracking document state to store actions.",e),this._storeActions.humanWritingReport.stopTracking(e)}startTrackingDomain(e){return this._logger.debug("Relaying HWR start tracking all documents state to store actions.",e),this._storeActions.humanWritingReport.startTrackingDomain(e)}stopTrackingDomain(e){return this._logger.debug("Relaying HWR stop tracking all documents state to store actions.",e),this._storeActions.humanWritingReport.stopTrackingDomain(e)}optOut(){return this._logger.debug("Relaying HWR opt out state to store actions."),this._storeActions.humanWritingReport.optOut()}optIn(){return this._logger.debug("Relaying HWR opt in state to store actions."),this._storeActions.humanWritingReport.optIn()}optInPopupShown(){return this._logger.debug("Relaying HWR opt-in popup shown state to store actions."),this._storeActions.humanWritingReport.optInPopupShown()}denyClipboardAccess(){return this._logger.debug("Relaying HWR denied clipboard state to store actions."),this._storeActions.humanWritingReport.denyClipboardAccess()}allowClipboardAccess(){return this._logger.debug("Relaying HWR allowed clipboard state to store actions."),this._storeActions.humanWritingReport.allowClipboardAccess()}setAllDomainsTrackingEnabled(e){return this._logger.debug("Relaying HWR allowed copy tracking on all domains to store actions."),this._storeActions.humanWritingReport.setAllDomainsTrackingEnabled(e)}_processBackendSettings(e){return e.isAvailable?this._setInitial(!0):this._setInitial(!1)}dispose(){this._subs.unsubscribe()}}function xu(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function Tu(e,t){return e.get(xu(e,t))}function Ou(e,t,n){return e.set(xu(e,t),n),n}function Pu(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ru(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Du(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ru(Object(n),!0).forEach((function(t){Pu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ru(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Nu,Uu,Mu="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ju={};function Fu(){if(Uu)return Nu;Uu=1;var e=function(e){return e&&e.Math===Math&&e};return Nu=e("object"==typeof globalThis&&globalThis)||e("object"==typeof self&&self)||e("object"==typeof self&&self)||e("object"==typeof Mu&&Mu)||e("object"==typeof Nu&&Nu)||function(){return this}()||Function("return this")()}var Lu,Gu,Bu,zu,Vu,qu,Hu,Wu,$u={};function Xu(){return Gu?Lu:(Gu=1,Lu=function(e){try{return!!e()}catch(e){return!0}})}function Ku(){if(zu)return Bu;zu=1;var e=Xu();return Bu=!e((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))}function Yu(){if(qu)return Vu;qu=1;var e=Xu();return Vu=!e((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))}function Zu(){if(Wu)return Hu;Wu=1;var e=Yu(),t=Function.prototype.call;return Hu=e?t.bind(t):function(){return t.apply(t,arguments)},Hu}var Ju,Qu,ed,td,nd,rd,id,od,sd,ad,cd,ld,ud,dd,hd,pd,gd,fd,md,bd,yd,_d,vd,wd,Sd,kd,Id,Cd,Ed,Ad,xd,Td,Od,Pd,Rd,Dd,Nd,Ud,Md,jd,Fd,Ld={};function Gd(){return ed?Qu:(ed=1,Qu=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}})}function Bd(){if(nd)return td;nd=1;var e=Yu(),t=Function.prototype,n=t.call,r=e&&t.bind.bind(n,n);return td=e?r:function(e){return function(){return n.apply(e,arguments)}},td}function zd(){if(id)return rd;id=1;var e=Bd(),t=e({}.toString),n=e("".slice);return rd=function(e){return n(t(e),8,-1)},rd}function Vd(){return cd||(cd=1,ad=function(e){return null==e}),ad}function qd(){if(ud)return ld;ud=1;var e=Vd(),t=TypeError;return ld=function(n){if(e(n))throw new t("Can't call method on "+n);return n},ld}function Hd(){if(hd)return dd;hd=1;var e=function(){if(sd)return od;sd=1;var e=Bd(),t=Xu(),n=zd(),r=Object,i=e("".split);return od=t((function(){return!r("z").propertyIsEnumerable(0)}))?function(e){return"String"===n(e)?i(e,""):r(e)}:r,od}(),t=qd();return dd=function(n){return e(t(n))},dd}function Wd(){if(gd)return pd;gd=1;var e="object"==typeof document&&document.all;return pd=void 0===e&&void 0!==e?function(t){return"function"==typeof t||t===e}:function(e){return"function"==typeof e}}function $d(){if(md)return fd;md=1;var e=Wd();return fd=function(t){return"object"==typeof t?null!==t:e(t)},fd}function Xd(){if(yd)return bd;yd=1;var e=Fu(),t=Wd(),n=function(e){return t(e)?e:void 0};return bd=function(t,r){return arguments.length<2?n(e[t]):e[t]&&e[t][r]},bd}function Kd(){if(vd)return _d;vd=1;var e=Bd();return _d=e({}.isPrototypeOf)}function Yd(){if(Sd)return wd;Sd=1;var e=Fu().navigator,t=e&&e.userAgent;return wd=t?String(t):""}function Zd(){if(Id)return kd;Id=1;var e,t,n=Fu(),r=Yd(),i=n.process,o=n.Deno,s=i&&i.versions||o&&o.version,a=s&&s.v8;return a&&(t=(e=a.split("."))[0]>0&&e[0]<4?1:+(e[0]+e[1])),!t&&r&&(!(e=r.match(/Edge\/(\d+)/))||e[1]>=74)&&(e=r.match(/Chrome\/(\d+)/))&&(t=+e[1]),kd=t}function Jd(){if(Ed)return Cd;Ed=1;var e=Zd(),t=Xu(),n=Fu().String;return Cd=!!Object.getOwnPropertySymbols&&!t((function(){var t=Symbol("symbol detection");return!n(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&e&&e<41}))}function Qd(){if(xd)return Ad;xd=1;var e=Jd();return Ad=e&&!Symbol.sham&&"symbol"==typeof Symbol.iterator}function eh(){if(Od)return Td;Od=1;var e=Xd(),t=Wd(),n=Kd(),r=Qd(),i=Object;return Td=r?function(e){return"symbol"==typeof e}:function(r){var o=e("Symbol");return t(o)&&n(o.prototype,i(r))},Td}function th(){if(Rd)return Pd;Rd=1;var e=String;return Pd=function(t){try{return e(t)}catch(e){return"Object"}}}function nh(){if(Nd)return Dd;Nd=1;var e=Wd(),t=th(),n=TypeError;return Dd=function(r){if(e(r))return r;throw new n(t(r)+" is not a function")}}function rh(){if(Md)return Ud;Md=1;var e=nh(),t=Vd();return Ud=function(n,r){var i=n[r];return t(i)?void 0:e(i)},Ud}function ih(){if(Fd)return jd;Fd=1;var e=Zu(),t=Wd(),n=$d(),r=TypeError;return jd=function(i,o){var s,a;if("string"===o&&t(s=i.toString)&&!n(a=e(s,i)))return a;if(t(s=i.valueOf)&&!n(a=e(s,i)))return a;if("string"!==o&&t(s=i.toString)&&!n(a=e(s,i)))return a;throw new r("Can't convert object to primitive value")}}var oh,sh,ah,ch,lh,uh,dh,hh,ph,gh,fh,mh,bh,yh,_h,vh,wh,Sh,kh,Ih,Ch,Eh,Ah,xh,Th={exports:{}};function Oh(){return sh?oh:(sh=1,oh=!1)}function Ph(){if(ch)return ah;ch=1;var e=Fu(),t=Object.defineProperty;return ah=function(n,r){try{t(e,n,{value:r,configurable:!0,writable:!0})}catch(t){e[n]=r}return r},ah}function Rh(){if(lh)return Th.exports;lh=1;var e=Oh(),t=Fu(),n=Ph(),r="__core-js_shared__",i=Th.exports=t[r]||n(r,{});return(i.versions||(i.versions=[])).push({version:"3.38.0",mode:e?"pure":"global",copyright:" 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.38.0/LICENSE",source:"https://github.com/zloirock/core-js"}),Th.exports}function Dh(){if(dh)return uh;dh=1;var e=Rh();return uh=function(t,n){return e[t]||(e[t]=n||{})},uh}function Nh(){if(ph)return hh;ph=1;var e=qd(),t=Object;return hh=function(n){return t(e(n))}}function Uh(){if(fh)return gh;fh=1;var e=Bd(),t=Nh(),n=e({}.hasOwnProperty);return gh=Object.hasOwn||function(e,r){return n(t(e),r)},gh}function Mh(){if(bh)return mh;bh=1;var e=Bd(),t=0,n=Math.random(),r=e(1..toString);return mh=function(e){return"Symbol("+(void 0===e?"":e)+")_"+r(++t+n,36)},mh}function jh(){if(_h)return yh;_h=1;var e=Fu(),t=Dh(),n=Uh(),r=Mh(),i=Jd(),o=Qd(),s=e.Symbol,a=t("wks"),c=o?s.for||s:s&&s.withoutSetter||r;return yh=function(e){return n(a,e)||(a[e]=i&&n(s,e)?s[e]:c("Symbol."+e)),a[e]}}function Fh(){if(wh)return vh;wh=1;var e=Zu(),t=$d(),n=eh(),r=rh(),i=ih(),o=jh(),s=TypeError,a=o("toPrimitive");return vh=function(o,c){if(!t(o)||n(o))return o;var l,u=r(o,a);if(u){if(void 0===c&&(c="default"),l=e(u,o,c),!t(l)||n(l))return l;throw new s("Can't convert object to primitive value")}return void 0===c&&(c="number"),i(o,c)}}function Lh(){if(kh)return Sh;kh=1;var e=Fh(),t=eh();return Sh=function(n){var r=e(n,"string");return t(r)?r:r+""},Sh}function Gh(){if(Ch)return Ih;Ch=1;var e=Fu(),t=$d(),n=e.document,r=t(n)&&t(n.createElement);return Ih=function(e){return r?n.createElement(e):{}},Ih}function Bh(){if(Ah)return Eh;Ah=1;var e=Ku(),t=Xu(),n=Gh();return Eh=!e&&!t((function(){return 7!==Object.defineProperty(n("div"),"a",{get:function(){return 7}}).a}))}function zh(){if(xh)return $u;xh=1;var e=Ku(),t=Zu(),n=function(){if(Ju)return Ld;Ju=1;var e={}.propertyIsEnumerable,t=Object.getOwnPropertyDescriptor,n=t&&!e.call({1:2},1);return Ld.f=n?function(e){var n=t(this,e);return!!n&&n.enumerable}:e,Ld}(),r=Gd(),i=Hd(),o=Lh(),s=Uh(),a=Bh(),c=Object.getOwnPropertyDescriptor;return $u.f=e?c:function(e,l){if(e=i(e),l=o(l),a)try{return c(e,l)}catch(e){}if(s(e,l))return r(!t(n.f,e,l),e[l])},$u}var Vh,qh,Hh,Wh,$h,Xh,Kh,Yh={};function Zh(){if(qh)return Vh;qh=1;var e=Ku(),t=Xu();return Vh=e&&t((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))}function Jh(){if(Wh)return Hh;Wh=1;var e=$d(),t=String,n=TypeError;return Hh=function(r){if(e(r))return r;throw new n(t(r)+" is not an object")}}function Qh(){if($h)return Yh;$h=1;var e=Ku(),t=Bh(),n=Zh(),r=Jh(),i=Lh(),o=TypeError,s=Object.defineProperty,a=Object.getOwnPropertyDescriptor,c="enumerable",l="configurable",u="writable";return Yh.f=e?n?function(e,t,n){if(r(e),t=i(t),r(n),"function"==typeof e&&"prototype"===t&&"value"in n&&u in n&&!n.writable){var o=a(e,t);o&&o.writable&&(e[t]=n.value,n={configurable:l in n?n.configurable:o.configurable,enumerable:c in n?n.enumerable:o.enumerable,writable:!1})}return s(e,t,n)}:s:function(e,n,a){if(r(e),n=i(n),r(a),t)try{return s(e,n,a)}catch(e){}if("get"in a||"set"in a)throw new o("Accessors not supported");return"value"in a&&(e[n]=a.value),e},Yh}function ep(){if(Kh)return Xh;Kh=1;var e=Ku(),t=Qh(),n=Gd();return Xh=e?function(e,r,i){return t.f(e,r,n(1,i))}:function(e,t,n){return e[t]=n,e},Xh}var tp,np,rp,ip,op,sp,ap,cp,lp,up,dp,hp,pp,gp,fp,mp={exports:{}};function bp(){if(np)return tp;np=1;var e=Ku(),t=Uh(),n=Function.prototype,r=e&&Object.getOwnPropertyDescriptor,i=t(n,"name"),o=i&&"something"===function(){}.name,s=i&&(!e||e&&r(n,"name").configurable);return tp={EXISTS:i,PROPER:o,CONFIGURABLE:s}}function yp(){if(ip)return rp;ip=1;var e=Bd(),t=Wd(),n=Rh(),r=e(Function.toString);return t(n.inspectSource)||(n.inspectSource=function(e){return r(e)}),rp=n.inspectSource}function _p(){if(cp)return ap;cp=1;var e=Dh(),t=Mh(),n=e("keys");return ap=function(e){return n[e]||(n[e]=t(e))},ap}function vp(){return up?lp:(up=1,lp={})}function wp(){if(hp)return dp;hp=1;var e,t,n,r=function(){if(sp)return op;sp=1;var e=Fu(),t=Wd(),n=e.WeakMap;return op=t(n)&&/native code/.test(String(n))}(),i=Fu(),o=$d(),s=ep(),a=Uh(),c=Rh(),l=_p(),u=vp(),d="Object already initialized",h=i.TypeError,p=i.WeakMap;if(r||c.state){var g=c.state||(c.state=new p);g.get=g.get,g.has=g.has,g.set=g.set,e=function(e,t){if(g.has(e))throw new h(d);return t.facade=e,g.set(e,t),t},t=function(e){return g.get(e)||{}},n=function(e){return g.has(e)}}else{var f=l("state");u[f]=!0,e=function(e,t){if(a(e,f))throw new h(d);return t.facade=e,s(e,f,t),t},t=function(e){return a(e,f)?e[f]:{}},n=function(e){return a(e,f)}}return dp={set:e,get:t,has:n,enforce:function(r){return n(r)?t(r):e(r,{})},getterFor:function(e){return function(n){var r;if(!o(n)||(r=t(n)).type!==e)throw new h("Incompatible receiver, "+e+" required");return r}}},dp}function Sp(){if(pp)return mp.exports;pp=1;var e=Bd(),t=Xu(),n=Wd(),r=Uh(),i=Ku(),o=bp().CONFIGURABLE,s=yp(),a=wp(),c=a.enforce,l=a.get,u=String,d=Object.defineProperty,h=e("".slice),p=e("".replace),g=e([].join),f=i&&!t((function(){return 8!==d((function(){}),"length",{value:8}).length})),m=String(String).split("String"),b=mp.exports=function(e,t,n){"Symbol("===h(u(t),0,7)&&(t="["+p(u(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!r(e,"name")||o&&e.name!==t)&&(i?d(e,"name",{value:t,configurable:!0}):e.name=t),f&&n&&r(n,"arity")&&e.length!==n.arity&&d(e,"length",{value:n.arity});try{n&&r(n,"constructor")&&n.constructor?i&&d(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var s=c(e);return r(s,"source")||(s.source=g(m,"string"==typeof t?t:"")),e};return Function.prototype.toString=b((function(){return n(this)&&l(this).source||s(this)}),"toString"),mp.exports}function kp(){if(fp)return gp;fp=1;var e=Wd(),t=Qh(),n=Sp(),r=Ph();return gp=function(i,o,s,a){a||(a={});var c=a.enumerable,l=void 0!==a.name?a.name:o;if(e(s)&&n(s,l,a),a.global)c?i[o]=s:r(o,s);else{try{a.unsafe?i[o]&&(c=!0):delete i[o]}catch(e){}c?i[o]=s:t.f(i,o,{value:s,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return i},gp}var Ip,Cp,Ep,Ap,xp,Tp,Op,Pp,Rp,Dp,Np,Up,Mp,jp,Fp,Lp,Gp,Bp={};function zp(){if(Ap)return Ep;Ap=1;var e=function(){if(Cp)return Ip;Cp=1;var e=Math.ceil,t=Math.floor;return Ip=Math.trunc||function(n){var r=+n;return(r>0?t:e)(r)},Ip}();return Ep=function(t){var n=+t;return n!=n||0===n?0:e(n)},Ep}function Vp(){if(Tp)return xp;Tp=1;var e=zp(),t=Math.max,n=Math.min;return xp=function(r,i){var o=e(r);return o<0?t(o+i,0):n(o,i)},xp}function qp(){if(Pp)return Op;Pp=1;var e=zp(),t=Math.min;return Op=function(n){var r=e(n);return r>0?t(r,9007199254740991):0}}function Hp(){if(Dp)return Rp;Dp=1;var e=qp();return Rp=function(t){return e(t.length)}}function Wp(){if(jp)return Mp;jp=1;var e=Bd(),t=Uh(),n=Hd(),r=function(){if(Up)return Np;Up=1;var e=Hd(),t=Vp(),n=Hp(),r=function(r){return function(i,o,s){var a=e(i),c=n(a);if(0===c)return!r&&-1;var l,u=t(s,c);if(r&&o!=o){for(;c>u;)if((l=a[u++])!=l)return!0}else for(;c>u;u++)if((r||u in a)&&a[u]===o)return r||u||0;return!r&&-1}};return Np={includes:r(!0),indexOf:r(!1)}}().indexOf,i=vp(),o=e([].push);return Mp=function(e,s){var a,c=n(e),l=0,u=[];for(a in c)!t(i,a)&&t(c,a)&&o(u,a);for(;s.length>l;)t(c,a=s[l++])&&(~r(u,a)||o(u,a));return u},Mp}function $p(){return Lp?Fp:(Lp=1,Fp=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"])}function Xp(){if(Gp)return Bp;Gp=1;var e=Wp(),t=$p().concat("length","prototype");return Bp.f=Object.getOwnPropertyNames||function(n){return e(n,t)},Bp}var Kp,Yp,Zp,Jp,Qp,eg,tg,ng,rg,ig,og,sg,ag,cg,lg,ug,dg,hg,pg,gg,fg,mg,bg,yg,_g,vg,wg,Sg,kg,Ig,Cg,Eg,Ag,xg,Tg,Og,Pg,Rg,Dg,Ng,Ug,Mg,jg={};function Fg(){if(Zp)return Yp;Zp=1;var e=Xd(),t=Bd(),n=Xp(),r=(Kp||(Kp=1,jg.f=Object.getOwnPropertySymbols),jg),i=Jh(),o=t([].concat);return Yp=e("Reflect","ownKeys")||function(e){var t=n.f(i(e)),s=r.f;return s?o(t,s(e)):t},Yp}function Lg(){if(Qp)return Jp;Qp=1;var e=Uh(),t=Fg(),n=zh(),r=Qh();return Jp=function(i,o,s){for(var a=t(o),c=r.f,l=n.f,u=0;u<a.length;u++){var d=a[u];e(i,d)||s&&e(s,d)||c(i,d,l(o,d))}},Jp}function Gg(){if(tg)return eg;tg=1;var e=Xu(),t=Wd(),n=/#|\.prototype\./,r=function(n,r){var c=o[i(n)];return c===a||c!==s&&(t(r)?e(r):!!r)},i=r.normalize=function(e){return String(e).replace(n,".").toLowerCase()},o=r.data={},s=r.NATIVE="N",a=r.POLYFILL="P";return eg=r}function Bg(){if(rg)return ng;rg=1;var e=Fu(),t=zh().f,n=ep(),r=kp(),i=Ph(),o=Lg(),s=Gg();return ng=function(a,c){var l,u,d,h,p,g=a.target,f=a.global,m=a.stat;if(l=f?e:m?e[g]||i(g,{}):e[g]&&e[g].prototype)for(u in c){if(h=c[u],d=a.dontCallGetSet?(p=t(l,u))&&p.value:l[u],!s(f?u:g+(m?".":"#")+u,a.forced)&&void 0!==d){if(typeof h==typeof d)continue;o(h,d)}(a.sham||d&&d.sham)&&n(h,"sham",!0),r(l,u,h,a)}},ng}function zg(){if(og)return ig;og=1;var e=Yu(),t=Function.prototype,n=t.apply,r=t.call;return ig="object"==typeof Reflect&&Reflect.apply||(e?r.bind(n):function(){return r.apply(n,arguments)}),ig}function Vg(){if(ag)return sg;ag=1;var e=Bd(),t=nh();return sg=function(n,r,i){try{return e(t(Object.getOwnPropertyDescriptor(n,r)[i]))}catch(e){}},sg}function qg(){if(lg)return cg;lg=1;var e=$d();return cg=function(t){return e(t)||null===t}}function Hg(){if(dg)return ug;dg=1;var e=qg(),t=String,n=TypeError;return ug=function(r){if(e(r))return r;throw new n("Can't set "+t(r)+" as a prototype")}}function Wg(){if(pg)return hg;pg=1;var e=Vg(),t=$d(),n=qd(),r=Hg();return hg=Object.setPrototypeOf||("__proto__"in{}?function(){var i,o=!1,s={};try{(i=e(Object.prototype,"__proto__","set"))(s,[]),o=s instanceof Array}catch(e){}return function(e,s){return n(e),r(s),t(e)?(o?i(e,s):e.__proto__=s,e):e}}():void 0)}function $g(){if(fg)return gg;fg=1;var e=Qh().f;return gg=function(t,n,r){r in t||e(t,r,{configurable:!0,get:function(){return n[r]},set:function(e){n[r]=e}})},gg}function Xg(){if(bg)return mg;bg=1;var e=Wd(),t=$d(),n=Wg();return mg=function(r,i,o){var s,a;return n&&e(s=i.constructor)&&s!==o&&t(a=s.prototype)&&a!==o.prototype&&n(r,a),r}}function Kg(){if(_g)return yg;_g=1;var e={};return e[jh()("toStringTag")]="z",yg="[object z]"===String(e)}function Yg(){if(wg)return vg;wg=1;var e=Kg(),t=Wd(),n=zd(),r=jh()("toStringTag"),i=Object,o="Arguments"===n(function(){return arguments}());return vg=e?n:function(e){var s,a,c;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(a=function(e,t){try{return e[t]}catch(e){}}(s=i(e),r))?a:o?n(s):"Object"===(c=n(s))&&t(s.callee)?"Arguments":c},vg}function Zg(){if(Cg)return Ig;Cg=1;var e=function(){if(kg)return Sg;kg=1;var e=Yg(),t=String;return Sg=function(n){if("Symbol"===e(n))throw new TypeError("Cannot convert a Symbol value to a string");return t(n)}}();return Ig=function(t,n){return void 0===t?arguments.length<2?"":n:e(t)},Ig}function Jg(){if(Ag)return Eg;Ag=1;var e=$d(),t=ep();return Eg=function(n,r){e(r)&&"cause"in r&&t(n,"cause",r.cause)}}function Qg(){if(Dg)return Rg;Dg=1;var e=ep(),t=function(){if(Tg)return xg;Tg=1;var e=Bd(),t=Error,n=e("".replace),r=String(new t("zxcasd").stack),i=/\n\s*at [^:]*:[^\n]*/,o=i.test(r);return xg=function(e,r){if(o&&"string"==typeof e&&!t.prepareStackTrace)for(;r--;)e=n(e,i,"");return e}}(),n=function(){if(Pg)return Og;Pg=1;var e=Xu(),t=Gd();return Og=!e((function(){var e=new Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",t(1,7)),7!==e.stack)})),Og}(),r=Error.captureStackTrace;return Rg=function(i,o,s,a){n&&(r?r(i,o):e(i,"stack",t(s,a)))},Rg}function ef(){if(Ug)return Ng;Ug=1;var e=Xd(),t=Uh(),n=ep(),r=Kd(),i=Wg(),o=Lg(),s=$g(),a=Xg(),c=Zg(),l=Jg(),u=Qg(),d=Ku(),h=Oh();return Ng=function(p,g,f,m){var b="stackTraceLimit",y=m?2:1,_=p.split("."),v=_[_.length-1],w=e.apply(null,_);if(w){var S=w.prototype;if(!h&&t(S,"cause")&&delete S.cause,!f)return w;var k=e("Error"),I=g((function(e,t){var i=c(m?t:e,void 0),o=m?new w(e):new w;return void 0!==i&&n(o,"message",i),u(o,I,o.stack,2),this&&r(S,this)&&a(o,this,I),arguments.length>y&&l(o,arguments[y]),o}));if(I.prototype=S,"Error"!==v?i?i(I,k):o(I,k,{name:!0}):d&&b in w&&(s(I,w,b),s(I,w,"prepareStackTrace")),o(I,w),!h)try{S.name!==v&&n(S,"name",v),S.constructor=I}catch(e){}return I}},Ng}function tf(){if(Mg)return ju;Mg=1;var e=Bg(),t=Fu(),n=zg(),r=ef(),i="WebAssembly",o=t.WebAssembly,s=7!==new Error("e",{cause:7}).cause,a=function(t,n){var i={};i[t]=r(t,n,s),e({global:!0,constructor:!0,arity:1,forced:s},i)},c=function(t,n){if(o&&o[t]){var a={};a[t]=r("WebAssembly."+t,n,s),e({target:i,stat:!0,constructor:!0,arity:1,forced:s},a)}};return a("Error",(function(e){return function(t){return n(e,this,arguments)}})),a("EvalError",(function(e){return function(t){return n(e,this,arguments)}})),a("RangeError",(function(e){return function(t){return n(e,this,arguments)}})),a("ReferenceError",(function(e){return function(t){return n(e,this,arguments)}})),a("SyntaxError",(function(e){return function(t){return n(e,this,arguments)}})),a("TypeError",(function(e){return function(t){return n(e,this,arguments)}})),a("URIError",(function(e){return function(t){return n(e,this,arguments)}})),c("CompileError",(function(e){return function(t){return n(e,this,arguments)}})),c("LinkError",(function(e){return function(t){return n(e,this,arguments)}})),c("RuntimeError",(function(e){return function(t){return n(e,this,arguments)}})),ju}var nf,rf,of,sf={};function af(){if(rf)return nf;rf=1;var e=Ku(),t=Xu(),n=Jh(),r=Zg(),i=Error.prototype.toString,o=t((function(){if(e){var t=Object.create(Object.defineProperty({},"name",{get:function(){return this===t}}));if("true"!==i.call(t))return!0}return"2: 1"!==i.call({message:1,name:2})||"Error"!==i.call({})}));return nf=o?function(){var e=n(this),t=r(e.name,"Error"),i=r(e.message);return t?i?t+": "+i:t:i}:i}function cf(){if(of)return sf;of=1;var e=kp(),t=af(),n=Error.prototype;return n.toString!==t&&e(n,"toString",t),sf}var lf,uf,df,hf={};function pf(){if(df)return hf;df=1;var e=Kg(),t=kp(),n=function(){if(uf)return lf;uf=1;var e=Kg(),t=Yg();return lf=e?{}.toString:function(){return"[object "+t(this)+"]"}}();return e||t(Object.prototype,"toString",n,{unsafe:!0}),hf}var gf,ff,mf,bf,yf={};function _f(){if(bf)return mf;bf=1;var e=Uh(),t=Wd(),n=Nh(),r=_p(),i=function(){if(ff)return gf;ff=1;var e=Xu();return gf=!e((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))}(),o=r("IE_PROTO"),s=Object,a=s.prototype;return mf=i?s.getPrototypeOf:function(r){var i=n(r);if(e(i,o))return i[o];var c=i.constructor;return t(c)&&i instanceof c?c.prototype:i instanceof s?a:null}}var vf,wf,Sf,kf,If,Cf,Ef,Af,xf={};function Tf(){if(wf)return vf;wf=1;var e=Wp(),t=$p();return vf=Object.keys||function(n){return e(n,t)}}function Of(){if(If)return kf;If=1;var e=Xd();return kf=e("document","documentElement")}function Pf(){if(Ef)return Cf;Ef=1;var e,t=Jh(),n=function(){if(Sf)return xf;Sf=1;var e=Ku(),t=Zh(),n=Qh(),r=Jh(),i=Hd(),o=Tf();return xf.f=e&&!t?Object.defineProperties:function(e,t){r(e);for(var s,a=i(t),c=o(t),l=c.length,u=0;l>u;)n.f(e,s=c[u++],a[s]);return e},xf}(),r=$p(),i=vp(),o=Of(),s=Gh(),a=_p(),c=a("IE_PROTO"),l=function(){},u=function(e){return"<script>"+e+"</"+"script>"},d=function(e){e.write(u("")),e.close();var t=e.parentWindow.Object;return e=null,t},h=function(){try{e=new ActiveXObject("htmlfile")}catch(e){}var t,n;h="undefined"!=typeof document?document.domain&&e?d(e):((n=s("iframe")).style.display="none",o.appendChild(n),n.src=String("javascript:"),(t=n.contentWindow.document).open(),t.write(u("document.F=Object")),t.close(),t.F):d(e);for(var i=r.length;i--;)delete h.prototype[r[i]];return h()};return i[c]=!0,Cf=Object.create||function(e,r){var i;return null!==e?(l.prototype=t(e),i=new l,l.prototype=null,i[c]=e):i=h(),void 0===r?i:n.f(i,r)}}function Rf(){if(Af)return yf;Af=1;var e=Bg(),t=Fu(),n=Kd(),r=_f(),i=Wg(),o=Lg(),s=Pf(),a=ep(),c=Gd(),l=Qg(),u=Zg(),d=jh(),h=Xu(),p=Oh(),g=t.SuppressedError,f=d("toStringTag"),m=Error,b=!!g&&3!==g.length,y=!!g&&h((function(){return 4===new g(1,2,3,{cause:4}).cause})),_=b||y,v=function(e,t,o){var c,d=n(w,this);return i?c=!_||d&&r(this)!==w?i(new m,d?r(this):w):new g:(c=d?this:s(w),a(c,f,"Error")),void 0!==o&&a(c,"message",u(o)),l(c,v,c.stack,1),a(c,"error",e),a(c,"suppressed",t),c};i?i(v,m):o(v,m,{name:!0});var w=v.prototype=_?g.prototype:s(m.prototype,{constructor:c(1,v),message:c(1,""),name:c(1,"SuppressedError")});return _&&!p&&(w.constructor=v),e({global:!0,constructor:!0,arity:3,forced:_},{SuppressedError:v}),yf}var Df,Nf,Uf,Mf,jf,Ff,Lf,Gf,Bf,zf,Vf,qf,Hf,Wf={};function $f(){if(Nf)return Df;Nf=1;var e=Kd(),t=TypeError;return Df=function(n,r){if(e(r,n))return n;throw new t("Incorrect invocation")},Df}function Xf(){if(Mf)return Uf;Mf=1;var e=kp();return Uf=function(t,n,r){for(var i in n)e(t,i,n[i],r);return t},Uf}function Kf(){if(Ff)return jf;Ff=1;var e=Sp(),t=Qh();return jf=function(n,r,i){return i.get&&e(i.get,r,{getter:!0}),i.set&&e(i.set,r,{setter:!0}),t.f(n,r,i)}}function Yf(){if(zf)return Bf;zf=1;var e=function(){if(Gf)return Lf;Gf=1;var e=zd(),t=Bd();return Lf=function(n){if("Function"===e(n))return t(n)}}(),t=nh(),n=Yu(),r=e(e.bind);return Bf=function(e,i){return t(e),void 0===i?e:n?r(e,i):function(){return e.apply(i,arguments)}},Bf}function Zf(){if(qf)return Vf;qf=1;var e=Zu(),t=Bd(),n=Yf(),r=Jh(),i=nh(),o=Vd(),s=rh(),a=jh(),c=a("asyncDispose"),l=a("dispose"),u=t([].push),d=function(t,n){if("async-dispose"===n){var r=s(t,c);return void 0!==r||void 0===(r=s(t,l))?r:function(){e(r,this)}}return s(t,l)},h=function(e,t,s){return arguments.length<3&&!o(e)&&(s=i(d(r(e),t))),void 0===s?function(){}:n(s,e)};return Vf=function(e,t,n,r){var i;if(arguments.length<4){if(o(t)&&"sync-dispose"===n)return;i=h(t,n)}else i=h(void 0,n,r);u(e.stack,i)},Vf}var Jf,Qf,em,tm,nm,rm,im,om={};function sm(){if(Qf)return Jf;Qf=1;var e,t,n,r=Xu(),i=Wd(),o=$d(),s=Pf(),a=_f(),c=kp(),l=jh(),u=Oh(),d=l("iterator"),h=!1;return[].keys&&("next"in(n=[].keys())?(t=a(a(n)))!==Object.prototype&&(e=t):h=!0),!o(e)||r((function(){var t={};return e[d].call(t)!==t}))?e={}:u&&(e=s(e)),i(e[d])||c(e,d,(function(){return this})),Jf={IteratorPrototype:e,BUGGY_SAFARI_ITERATORS:h}}function am(){if(em)return om;em=1;var e=Zu(),t=kp(),n=rh(),r=Uh(),i=jh(),o=sm().IteratorPrototype,s=i("dispose");return r(o,s)||t(o,s,(function(){var t=n(this,"return");t&&e(t,this)})),om}function cm(){if(nm)return tm;nm=1;var e=Fu();return tm=e}!function(){if(im)return rm;im=1,tf(),cf(),pf(),Rf(),function(){if(Hf)return Wf;Hf=1;var e=Bg(),t=Ku(),n=Xd(),r=nh(),i=$f(),o=kp(),s=Xf(),a=Kf(),c=jh(),l=wp(),u=Zf(),d=n("SuppressedError"),h=ReferenceError,p=c("dispose"),g=c("toStringTag"),f="DisposableStack",m=l.set,b=l.getterFor(f),y="sync-dispose",_="disposed",v=function(e){var t=b(e);if(t.state===_)throw new h("DisposableStack already disposed");return t},w=function(){m(i(this,S),{type:f,state:"pending",stack:[]}),t||(this.disposed=!1)},S=w.prototype;s(S,{dispose:function(){var e=b(this);if(e.state!==_){e.state=_,t||(this.disposed=!0);for(var n,r=e.stack,i=r.length,o=!1;i;){var s=r[--i];r[i]=void 0;try{s()}catch(e){o?n=new d(e,n):(o=!0,n=e)}}if(e.stack=void 0,o)throw n}},use:function(e){return u(v(this),e,y),e},adopt:function(e,t){var n=v(this);return r(t),u(n,void 0,y,(function(){t(e)})),e},defer:function(e){var t=v(this);r(e),u(t,void 0,y,e)},move:function(){var e=v(this),n=new w;return b(n).stack=e.stack,e.stack=[],e.state=_,t||(this.disposed=!0),n}}),t&&a(S,"disposed",{configurable:!0,get:function(){return b(this).state===_}}),o(S,p,S.dispose,{name:"dispose"}),o(S,g,f,{nonWritable:!0}),e({global:!0,constructor:!0},{DisposableStack:w})}(),am();var e=cm();rm=e.DisposableStack}();var lm,um,dm,hm,pm,gm,fm,mm,bm,ym,_m,vm,wm,Sm,km,Im,Cm,Em,Am,xm,Tm,Om,Pm,Rm,Dm,Nm,Um,Mm,jm,Fm,Lm,Gm,Bm,zm,Vm,qm,Hm,Wm,$m,Xm,Km={},Ym={};function Zm(){if(um)return lm;um=1;var e=Fu(),t=Yd(),n=zd(),r=function(e){return t.slice(0,e.length)===e};return lm=r("Bun/")?"BUN":r("Cloudflare-Workers")?"CLOUDFLARE":r("Deno/")?"DENO":r("Node.js/")?"NODE":e.Bun&&"string"==typeof Bun.version?"BUN":e.Deno&&"object"==typeof Deno.version?"DENO":"process"===n(e.process)?"NODE":e.window&&e.document?"BROWSER":"REST"}function Jm(){if(hm)return dm;hm=1;var e=Zm();return dm="NODE"===e}function Qm(){if(gm)return pm;gm=1;var e=Qh().f,t=Uh(),n=jh()("toStringTag");return pm=function(r,i,o){r&&!o&&(r=r.prototype),r&&!t(r,n)&&e(r,n,{configurable:!0,value:i})}}function eb(){if(mm)return fm;mm=1;var e=Xd(),t=Kf(),n=jh(),r=Ku(),i=n("species");return fm=function(n){var o=e(n);r&&o&&!o[i]&&t(o,i,{configurable:!0,get:function(){return this}})}}function tb(){if(ym)return bm;ym=1;var e=Bd(),t=Xu(),n=Wd(),r=Yg(),i=Xd(),o=yp(),s=function(){},a=i("Reflect","construct"),c=/^\s*(?:class|function)\b/,l=e(c.exec),u=!c.test(s),d=function(e){if(!n(e))return!1;try{return a(s,[],e),!0}catch(e){return!1}},h=function(e){if(!n(e))return!1;switch(r(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return u||!!l(c,o(e))}catch(e){return!0}};return h.sham=!0,bm=!a||t((function(){var e;return d(d.call)||!d(Object)||!d((function(){e=!0}))||e}))?h:d}function nb(){if(vm)return _m;vm=1;var e=tb(),t=th(),n=TypeError;return _m=function(r){if(e(r))return r;throw new n(t(r)+" is not a constructor")}}function rb(){if(Sm)return wm;Sm=1;var e=Jh(),t=nb(),n=Vd(),r=jh()("species");return wm=function(i,o){var s,a=e(i).constructor;return void 0===a||n(s=e(a)[r])?o:t(s)},wm}function ib(){if(Im)return km;Im=1;var e=Bd();return km=e([].slice)}function ob(){if(Em)return Cm;Em=1;var e=TypeError;return Cm=function(t,n){if(t<n)throw new e("Not enough arguments");return t},Cm}function sb(){if(xm)return Am;xm=1;var e=Yd();return Am=/(?:ipad|iphone|ipod).*applewebkit/i.test(e)}function ab(){if(Om)return Tm;Om=1;var e,t,n,r,i=Fu(),o=zg(),s=Yf(),a=Wd(),c=Uh(),l=Xu(),u=Of(),d=ib(),h=Gh(),p=ob(),g=sb(),f=Jm(),m=i.setImmediate,b=i.clearImmediate,y=i.process,_=i.Dispatch,v=i.Function,w=i.MessageChannel,S=i.String,k=0,I={},C="onreadystatechange";l((function(){e=i.location}));var E=function(e){if(c(I,e)){var t=I[e];delete I[e],t()}},A=function(e){return function(){E(e)}},x=function(e){E(e.data)},T=function(t){i.postMessage(S(t),e.protocol+"//"+e.host)};return m&&b||(m=function(e){p(arguments.length,1);var n=a(e)?e:v(e),r=d(arguments,1);return I[++k]=function(){o(n,void 0,r)},t(k),k},b=function(e){delete I[e]},f?t=function(e){y.nextTick(A(e))}:_&&_.now?t=function(e){_.now(A(e))}:w&&!g?(r=(n=new w).port2,n.port1.onmessage=x,t=s(r.postMessage,r)):i.addEventListener&&a(i.postMessage)&&!i.importScripts&&e&&"file:"!==e.protocol&&!l(T)?(t=T,i.addEventListener("message",x,!1)):t=C in h("script")?function(e){u.appendChild(h("script")).onreadystatechange=function(){u.removeChild(this),E(e)}}:function(e){setTimeout(A(e),0)}),Tm={set:m,clear:b}}function cb(){if(Rm)return Pm;Rm=1;var e=Fu(),t=Ku(),n=Object.getOwnPropertyDescriptor;return Pm=function(r){if(!t)return e[r];var i=n(e,r);return i&&i.value}}function lb(){if(Nm)return Dm;Nm=1;var e=function(){this.head=null,this.tail=null};return e.prototype={add:function(e){var t={item:e,next:null},n=this.tail;n?n.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&&(this.tail=null),e.item}},Dm=e}function ub(){if(Gm)return Lm;Gm=1;var e,t,n,r,i,o=Fu(),s=cb(),a=Yf(),c=ab().set,l=lb(),u=sb(),d=function(){if(Mm)return Um;Mm=1;var e=Yd();return Um=/ipad|iphone|ipod/i.test(e)&&"undefined"!=typeof Pebble}(),h=function(){if(Fm)return jm;Fm=1;var e=Yd();return jm=/web0s(?!.*chrome)/i.test(e)}(),p=Jm(),g=o.MutationObserver||o.WebKitMutationObserver,f=o.document,m=o.process,b=o.Promise,y=s("queueMicrotask");if(!y){var _=new l,v=function(){var t,n;for(p&&(t=m.domain)&&t.exit();n=_.get();)try{n()}catch(t){throw _.head&&e(),t}t&&t.enter()};u||p||h||!g||!f?!d&&b&&b.resolve?((r=b.resolve(void 0)).constructor=b,i=a(r.then,r),e=function(){i(v)}):p?e=function(){m.nextTick(v)}:(c=a(c,o),e=function(){c(v)}):(t=!0,n=f.createTextNode(""),new g(v).observe(n,{characterData:!0}),e=function(){n.data=t=!t}),y=function(t){_.head||e(),_.add(t)}}return Lm=y}function db(){return zm||(zm=1,Bm=function(e,t){try{1===arguments.length?console.error(e):console.error(e,t)}catch(e){}}),Bm}function hb(){return qm||(qm=1,Vm=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}),Vm}function pb(){if(Wm)return Hm;Wm=1;var e=Fu();return Hm=e.Promise}function gb(){if(Xm)return $m;Xm=1;var e=Fu(),t=pb(),n=Wd(),r=Gg(),i=yp(),o=jh(),s=Zm(),a=Oh(),c=Zd(),l=t&&t.prototype,u=o("species"),d=!1,h=n(e.PromiseRejectionEvent),p=r("Promise",(function(){var e=i(t),n=e!==String(t);if(!n&&66===c)return!0;if(a&&(!l.catch||!l.finally))return!0;if(!c||c<51||!/native code/.test(e)){var r=new t((function(e){e(1)})),o=function(e){e((function(){}),(function(){}))};if((r.constructor={})[u]=o,!(d=r.then((function(){}))instanceof o))return!0}return!(n||"BROWSER"!==s&&"DENO"!==s||h)}));return $m={CONSTRUCTOR:p,REJECTION_EVENT:h,SUBCLASSING:d}}var fb,mb,bb={};function yb(){if(fb)return bb;fb=1;var e=nh(),t=TypeError,n=function(n){var r,i;this.promise=new n((function(e,n){if(void 0!==r||void 0!==i)throw new t("Bad Promise constructor");r=e,i=n})),this.resolve=e(r),this.reject=e(i)};return bb.f=function(e){return new n(e)},bb}var _b,vb,wb,Sb,kb,Ib,Cb,Eb,Ab,xb,Tb,Ob,Pb,Rb,Db,Nb,Ub,Mb={};function jb(){return vb?_b:(vb=1,_b={})}function Fb(){if(Sb)return wb;Sb=1;var e=jh(),t=jb(),n=e("iterator"),r=Array.prototype;return wb=function(e){return void 0!==e&&(t.Array===e||r[n]===e)},wb}function Lb(){if(Ib)return kb;Ib=1;var e=Yg(),t=rh(),n=Vd(),r=jb(),i=jh()("iterator");return kb=function(o){if(!n(o))return t(o,i)||t(o,"@@iterator")||r[e(o)]},kb}function Gb(){if(Eb)return Cb;Eb=1;var e=Zu(),t=nh(),n=Jh(),r=th(),i=Lb(),o=TypeError;return Cb=function(s,a){var c=arguments.length<2?i(s):a;if(t(c))return n(e(c,s));throw new o(r(s)+" is not iterable")},Cb}function Bb(){if(xb)return Ab;xb=1;var e=Zu(),t=Jh(),n=rh();return Ab=function(r,i,o){var s,a;t(r);try{if(!(s=n(r,"return"))){if("throw"===i)throw o;return o}s=e(s,r)}catch(e){a=!0,s=e}if("throw"===i)throw o;if(a)throw s;return t(s),o},Ab}function zb(){if(Ob)return Tb;Ob=1;var e=Yf(),t=Zu(),n=Jh(),r=th(),i=Fb(),o=Hp(),s=Kd(),a=Gb(),c=Lb(),l=Bb(),u=TypeError,d=function(e,t){this.stopped=e,this.result=t},h=d.prototype;return Tb=function(p,g,f){var m,b,y,_,v,w,S,k=f&&f.that,I=!(!f||!f.AS_ENTRIES),C=!(!f||!f.IS_RECORD),E=!(!f||!f.IS_ITERATOR),A=!(!f||!f.INTERRUPTED),x=e(g,k),T=function(e){return m&&l(m,"normal",e),new d(!0,e)},O=function(e){return I?(n(e),A?x(e[0],e[1],T):x(e[0],e[1])):A?x(e,T):x(e)};if(C)m=p.iterator;else if(E)m=p;else{if(!(b=c(p)))throw new u(r(p)+" is not iterable");if(i(b)){for(y=0,_=o(p);_>y;y++)if((v=O(p[y]))&&s(h,v))return v;return new d(!1)}m=a(p,b)}for(w=C?p.next:m.next;!(S=t(w,m)).done;){try{v=O(S.value)}catch(e){l(m,"throw",e)}if("object"==typeof v&&v&&s(h,v))return v}return new d(!1)},Tb}function Vb(){if(Rb)return Pb;Rb=1;var e=jh()("iterator"),t=!1;try{var n=0,r={next:function(){return{done:!!n++}},return:function(){t=!0}};r[e]=function(){return this},Array.from(r,(function(){throw 2}))}catch(e){}return Pb=function(n,r){try{if(!r&&!t)return!1}catch(e){return!1}var i=!1;try{var o={};o[e]=function(){return{next:function(){return{done:i=!0}}}},n(o)}catch(e){}return i}}function qb(){if(Nb)return Db;Nb=1;var e=pb(),t=Vb(),n=gb().CONSTRUCTOR;return Db=n||!t((function(t){e.all(t).then(void 0,(function(){}))}))}var Hb,Wb={};var $b,Xb={};var Kb,Yb={};var Zb,Jb,Qb,ey,ty={};function ny(){if(Jb)return Zb;Jb=1;var e=Jh(),t=$d(),n=yb();return Zb=function(r,i){if(e(r),t(i)&&i.constructor===r)return i;var o=n.f(r);return(0,o.resolve)(i),o.promise},Zb}function ry(){return ey||(ey=1,function(){if(mb)return Ym;mb=1;var e,t,n,r=Bg(),i=Oh(),o=Jm(),s=Fu(),a=Zu(),c=kp(),l=Wg(),u=Qm(),d=eb(),h=nh(),p=Wd(),g=$d(),f=$f(),m=rb(),b=ab().set,y=ub(),_=db(),v=hb(),w=lb(),S=wp(),k=pb(),I=gb(),C=yb(),E="Promise",A=I.CONSTRUCTOR,x=I.REJECTION_EVENT,T=I.SUBCLASSING,O=S.getterFor(E),P=S.set,R=k&&k.prototype,D=k,N=R,U=s.TypeError,M=s.document,j=s.process,F=C.f,L=F,G=!!(M&&M.createEvent&&s.dispatchEvent),B="unhandledrejection",z=function(e){var t;return!(!g(e)||!p(t=e.then))&&t},V=function(e,t){var n,r,i,o=t.value,s=1===t.state,c=s?e.ok:e.fail,l=e.resolve,u=e.reject,d=e.domain;try{c?(s||(2===t.rejection&&X(t),t.rejection=1),!0===c?n=o:(d&&d.enter(),n=c(o),d&&(d.exit(),i=!0)),n===e.promise?u(new U("Promise-chain cycle")):(r=z(n))?a(r,n,l,u):l(n)):u(o)}catch(e){d&&!i&&d.exit(),u(e)}},q=function(e,t){e.notified||(e.notified=!0,y((function(){for(var n,r=e.reactions;n=r.get();)V(n,e);e.notified=!1,t&&!e.rejection&&W(e)})))},H=function(e,t,n){var r,i;G?((r=M.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),s.dispatchEvent(r)):r={promise:t,reason:n},!x&&(i=s["on"+e])?i(r):e===B&&_("Unhandled promise rejection",n)},W=function(e){a(b,s,(function(){var t,n=e.facade,r=e.value;if($(e)&&(t=v((function(){o?j.emit("unhandledRejection",r,n):H(B,n,r)})),e.rejection=o||$(e)?2:1,t.error))throw t.value}))},$=function(e){return 1!==e.rejection&&!e.parent},X=function(e){a(b,s,(function(){var t=e.facade;o?j.emit("rejectionHandled",t):H("rejectionhandled",t,e.value)}))},K=function(e,t,n){return function(r){e(t,r,n)}},Y=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,q(e,!0))},Z=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw new U("Promise can't be resolved itself");var r=z(t);r?y((function(){var n={done:!1};try{a(r,t,K(Z,n,e),K(Y,n,e))}catch(t){Y(n,t,e)}})):(e.value=t,e.state=1,q(e,!1))}catch(t){Y({done:!1},t,e)}}};if(A&&(D=function(t){f(this,N),h(t),a(e,this);var n=O(this);try{t(K(Z,n),K(Y,n))}catch(e){Y(n,e)}},N=D.prototype,(e=function(e){P(this,{type:E,done:!1,notified:!1,parent:!1,reactions:new w,rejection:!1,state:0,value:void 0})}).prototype=c(N,"then",(function(e,t){var n=O(this),r=F(m(this,D));return n.parent=!0,r.ok=!p(e)||e,r.fail=p(t)&&t,r.domain=o?j.domain:void 0,0===n.state?n.reactions.add(r):y((function(){V(r,n)})),r.promise})),t=function(){var t=new e,n=O(t);this.promise=t,this.resolve=K(Z,n),this.reject=K(Y,n)},C.f=F=function(e){return e===D||void 0===e?new t(e):L(e)},!i&&p(k)&&R!==Object.prototype)){n=R.then,T||c(R,"then",(function(e,t){var r=this;return new D((function(e,t){a(n,r,e,t)})).then(e,t)}),{unsafe:!0});try{delete R.constructor}catch(e){}l&&l(R,N)}r({global:!0,constructor:!0,wrap:!0,forced:A},{Promise:D}),u(D,E,!1,!0),d(E)}(),function(){if(Ub)return Mb;Ub=1;var e=Bg(),t=Zu(),n=nh(),r=yb(),i=hb(),o=zb();e({target:"Promise",stat:!0,forced:qb()},{all:function(e){var s=this,a=r.f(s),c=a.resolve,l=a.reject,u=i((function(){var r=n(s.resolve),i=[],a=0,u=1;o(e,(function(e){var n=a++,o=!1;u++,t(r,s,e).then((function(e){o||(o=!0,i[n]=e,--u||c(i))}),l)})),--u||c(i)}));return u.error&&l(u.value),a.promise}})}(),function(){if(Hb)return Wb;Hb=1;var e=Bg(),t=Oh(),n=gb().CONSTRUCTOR,r=pb(),i=Xd(),o=Wd(),s=kp(),a=r&&r.prototype;if(e({target:"Promise",proto:!0,forced:n,real:!0},{catch:function(e){return this.then(void 0,e)}}),!t&&o(r)){var c=i("Promise").prototype.catch;a.catch!==c&&s(a,"catch",c,{unsafe:!0})}}(),function(){if($b)return Xb;$b=1;var e=Bg(),t=Zu(),n=nh(),r=yb(),i=hb(),o=zb();e({target:"Promise",stat:!0,forced:qb()},{race:function(e){var s=this,a=r.f(s),c=a.reject,l=i((function(){var r=n(s.resolve);o(e,(function(e){t(r,s,e).then(a.resolve,c)}))}));return l.error&&c(l.value),a.promise}})}(),function(){if(Kb)return Yb;Kb=1;var e=Bg(),t=yb();e({target:"Promise",stat:!0,forced:gb().CONSTRUCTOR},{reject:function(e){var n=t.f(this);return(0,n.reject)(e),n.promise}})}(),function(){if(Qb)return ty;Qb=1;var e=Bg(),t=Xd(),n=Oh(),r=pb(),i=gb().CONSTRUCTOR,o=ny(),s=t("Promise"),a=n&&!i;e({target:"Promise",stat:!0,forced:n||i},{resolve:function(e){return o(a&&this===s?r:this,e)}})}()),Km}var iy,oy={};var sy,ay,cy,ly,uy,dy={};function hy(){if(cy)return dy;cy=1;var e=Zu(),t=kp(),n=Xd(),r=rh(),i=Uh(),o=jh(),s=function(){if(ay)return sy;ay=1;var e,t,n=Fu(),r=Rh(),i=Wd(),o=Pf(),s=_f(),a=kp(),c=jh(),l=Oh(),u=c("asyncIterator"),d=n.AsyncIterator,h=r.AsyncIteratorPrototype;if(h)e=h;else if(i(d))e=d.prototype;else if(r.USE_FUNCTION_CONSTRUCTOR||n.USE_FUNCTION_CONSTRUCTOR)try{t=s(s(s(Function("return async function*(){}()")()))),s(t)===Object.prototype&&(e=t)}catch(e){}return e?l&&(e=o(e)):e={},i(e[u])||a(e,u,(function(){return this})),sy=e}(),a=o("asyncDispose"),c=n("Promise");return i(s,a)||t(s,a,(function(){var t=this;return new c((function(n,i){var o=r(t,"return");o?c.resolve(e(o,t)).then((function(){n(void 0)}),i):n(void 0)}))})),dy}!function(){if(uy)return ly;uy=1,tf(),cf(),pf(),ry(),Rf(),function(){if(iy)return oy;iy=1;var e=Bg(),t=Ku(),n=Xd(),r=nh(),i=$f(),o=kp(),s=Xf(),a=Kf(),c=jh(),l=wp(),u=Zf(),d=n("Promise"),h=n("SuppressedError"),p=ReferenceError,g=c("asyncDispose"),f=c("toStringTag"),m="AsyncDisposableStack",b=l.set,y=l.getterFor(m),_="async-dispose",v="disposed",w=function(e){var t=y(e);if(t.state===v)throw new p("AsyncDisposableStack already disposed");return t},S=function(){b(i(this,k),{type:m,state:"pending",stack:[]}),t||(this.disposed=!1)},k=S.prototype;s(k,{disposeAsync:function(){var e=this;return new d((function(n,r){var i=y(e);if(i.state===v)return n(void 0);i.state=v,t||(e.disposed=!0);var o,s=i.stack,a=s.length,c=!1,l=function(e){c?o=new h(e,o):(c=!0,o=e),u()},u=function(){if(a){var e=s[--a];s[a]=void 0;try{d.resolve(e()).then(u,l)}catch(e){l(e)}}else i.stack=void 0,c?r(o):n(void 0)};u()}))},use:function(e){return u(w(this),e,_),e},adopt:function(e,t){var n=w(this);return r(t),u(n,void 0,_,(function(){return t(e)})),e},defer:function(e){var t=w(this);r(e),u(t,void 0,_,e)},move:function(){var e=w(this),n=new S;return y(n).stack=e.stack,e.stack=[],e.state=v,t||(this.disposed=!0),n}}),t&&a(k,"disposed",{configurable:!0,get:function(){return y(this).state===v}}),o(k,g,k.disposeAsync,{name:"disposeAsync"}),o(k,f,m,{nonWritable:!0}),e({global:!0,constructor:!0},{AsyncDisposableStack:S})}(),hy(),am();var e=cm();ly=e.AsyncDisposableStack}();var py,gy,fy,my,by,yy,_y={},vy={};function wy(){if(py)return vy;py=1;var e=jh();return vy.f=e,vy}function Sy(){if(fy)return gy;fy=1;var e=cm(),t=Uh(),n=wy(),r=Qh().f;return gy=function(i){var o=e.Symbol||(e.Symbol={});t(o,i)||r(o,i,{value:n.f(i)})}}!function(){if(yy)return by;yy=1,function(){if(my)return _y;my=1;var e=Fu(),t=Sy(),n=Qh().f,r=zh().f,i=e.Symbol;if(t("asyncDispose"),i){var o=r(i,"asyncDispose");o.enumerable&&o.configurable&&o.writable&&n(i,"asyncDispose",{value:o.value,enumerable:!1,configurable:!1,writable:!1})}}();var e=wy();by=e.f("asyncDispose")}();var ky,Iy,Cy,Ey={};!function(){if(Cy)return Iy;Cy=1,function(){if(ky)return Ey;ky=1;var e=Fu(),t=Sy(),n=Qh().f,r=zh().f,i=e.Symbol;if(t("dispose"),i){var o=r(i,"dispose");o.enumerable&&o.configurable&&o.writable&&n(i,"dispose",{value:o.value,enumerable:!1,configurable:!1,writable:!1})}}();var e=wy();Iy=e.f("dispose")}();var Ay,xy,Ty,Oy,Py,Ry,Dy,Ny,Uy,My,jy,Fy,Ly,Gy,By,zy,Vy,qy,Hy,Wy,$y={},Xy={exports:{}},Ky={};function Yy(){if(Ay)return Ky;Ay=1;var e=zd(),t=Hd(),n=Xp().f,r=ib(),i="object"==typeof self&&self&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(self):[];return Ky.f=function(o){return i&&"Window"===e(o)?function(e){try{return n(e)}catch(e){return r(i)}}(o):n(t(o))},Ky}function Zy(){if(Py)return Oy;Py=1;var e=Xu(),t=$d(),n=zd(),r=function(){if(Ty)return xy;Ty=1;var e=Xu();return xy=e((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}))}(),i=Object.isExtensible,o=e((function(){}));return Oy=o||r?function(e){return!!t(e)&&((!r||"ArrayBuffer"!==n(e))&&(!i||i(e)))}:i,Oy}function Jy(){if(Ny)return Xy.exports;Ny=1;var e=Bg(),t=Bd(),n=vp(),r=$d(),i=Uh(),o=Qh().f,s=Xp(),a=Yy(),c=Zy(),l=Mh(),u=function(){if(Dy)return Ry;Dy=1;var e=Xu();return Ry=!e((function(){return Object.isExtensible(Object.preventExtensions({}))}))}(),d=!1,h=l("meta"),p=0,g=function(e){o(e,h,{value:{objectID:"O"+p++,weakData:{}}})},f=Xy.exports={enable:function(){f.enable=function(){},d=!0;var n=s.f,r=t([].splice),i={};i[h]=1,n(i).length&&(s.f=function(e){for(var t=n(e),i=0,o=t.length;i<o;i++)if(t[i]===h){r(t,i,1);break}return t},e({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:a.f}))},fastKey:function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,h)){if(!c(e))return"F";if(!t)return"E";g(e)}return e[h].objectID},getWeakData:function(e,t){if(!i(e,h)){if(!c(e))return!0;if(!t)return!1;g(e)}return e[h].weakData},onFreeze:function(e){return u&&d&&c(e)&&!i(e,h)&&g(e),e}};return n[h]=!0,Xy.exports}function Qy(){if(Gy)return Ly;Gy=1;var e=Bg(),t=Zu(),n=Oh(),r=bp(),i=Wd(),o=function(){if(Fy)return jy;Fy=1;var e=sm().IteratorPrototype,t=Pf(),n=Gd(),r=Qm(),i=jb(),o=function(){return this};return jy=function(s,a,c,l){var u=a+" Iterator";return s.prototype=t(e,{next:n(+!l,c)}),r(s,u,!1,!0),i[u]=o,s}}(),s=_f(),a=Wg(),c=Qm(),l=ep(),u=kp(),d=jh(),h=jb(),p=sm(),g=r.PROPER,f=r.CONFIGURABLE,m=p.IteratorPrototype,b=p.BUGGY_SAFARI_ITERATORS,y=d("iterator"),_="keys",v="values",w="entries",S=function(){return this};return Ly=function(r,d,p,k,I,C,E){o(p,d,k);var A,x,T,O=function(e){if(e===I&&U)return U;if(!b&&e&&e in D)return D[e];switch(e){case _:case v:case w:return function(){return new p(this,e)}}return function(){return new p(this)}},P=d+" Iterator",R=!1,D=r.prototype,N=D[y]||D["@@iterator"]||I&&D[I],U=!b&&N||O(I),M="Array"===d&&D.entries||N;if(M&&(A=s(M.call(new r)))!==Object.prototype&&A.next&&(n||s(A)===m||(a?a(A,m):i(A[y])||u(A,y,S)),c(A,P,!0,!0),n&&(h[P]=S)),g&&I===v&&N&&N.name!==v&&(!n&&f?l(D,"name",v):(R=!0,U=function(){return t(N,this)})),I)if(x={values:O(v),keys:C?U:O(_),entries:O(w)},E)for(T in x)(b||R||!(T in D))&&u(D,T,x[T]);else e({target:d,proto:!0,forced:b||R},x);return n&&!E||D[y]===U||u(D,y,U,{name:I}),h[d]=U,x}}function e_(){return zy?By:(zy=1,By=function(e,t){return{value:e,done:t}})}function t_(){return Wy||(Wy=1,Hy||(Hy=1,function(){if(My)return Uy;My=1;var e=Bg(),t=Fu(),n=Bd(),r=Gg(),i=kp(),o=Jy(),s=zb(),a=$f(),c=Wd(),l=Vd(),u=$d(),d=Xu(),h=Vb(),p=Qm(),g=Xg();return Uy=function(f,m,b){var y=-1!==f.indexOf("Map"),_=-1!==f.indexOf("Weak"),v=y?"set":"add",w=t[f],S=w&&w.prototype,k=w,I={},C=function(e){var t=n(S[e]);i(S,e,"add"===e?function(e){return t(this,0===e?0:e),this}:"delete"===e?function(e){return!(_&&!u(e))&&t(this,0===e?0:e)}:"get"===e?function(e){return _&&!u(e)?void 0:t(this,0===e?0:e)}:"has"===e?function(e){return!(_&&!u(e))&&t(this,0===e?0:e)}:function(e,n){return t(this,0===e?0:e,n),this})};if(r(f,!c(w)||!(_||S.forEach&&!d((function(){(new w).entries().next()})))))k=b.getConstructor(m,f,y,v),o.enable();else if(r(f,!0)){var E=new k,A=E[v](_?{}:-0,1)!==E,x=d((function(){E.has(1)})),T=h((function(e){new w(e)})),O=!_&&d((function(){for(var e=new w,t=5;t--;)e[v](t,t);return!e.has(-0)}));T||((k=m((function(e,t){a(e,S);var n=g(new w,e,k);return l(t)||s(t,n[v],{that:n,AS_ENTRIES:y}),n}))).prototype=S,S.constructor=k),(x||O)&&(C("delete"),C("has"),y&&C("get")),(O||A)&&C(v),_&&S.clear&&delete S.clear}return I[f]=k,e({global:!0,constructor:!0,forced:k!==w},I),p(k,f),_||b.setStrong(k,f,y),k},Uy}()("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),function(){if(qy)return Vy;qy=1;var e=Pf(),t=Kf(),n=Xf(),r=Yf(),i=$f(),o=Vd(),s=zb(),a=Qy(),c=e_(),l=eb(),u=Ku(),d=Jy().fastKey,h=wp(),p=h.set,g=h.getterFor;return Vy={getConstructor:function(a,c,l,h){var f=a((function(t,n){i(t,m),p(t,{type:c,index:e(null),first:void 0,last:void 0,size:0}),u||(t.size=0),o(n)||s(n,t[h],{that:t,AS_ENTRIES:l})})),m=f.prototype,b=g(c),y=function(e,t,n){var r,i,o=b(e),s=_(e,t);return s?s.value=n:(o.last=s={index:i=d(t,!0),key:t,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=s),r&&(r.next=s),u?o.size++:e.size++,"F"!==i&&(o.index[i]=s)),e},_=function(e,t){var n,r=b(e),i=d(t);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key===t)return n};return n(m,{clear:function(){for(var t=b(this),n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),n=n.next;t.first=t.last=void 0,t.index=e(null),u?t.size=0:this.size=0},delete:function(e){var t=this,n=b(t),r=_(t,e);if(r){var i=r.next,o=r.previous;delete n.index[r.index],r.removed=!0,o&&(o.next=i),i&&(i.previous=o),n.first===r&&(n.first=i),n.last===r&&(n.last=o),u?n.size--:t.size--}return!!r},forEach:function(e){for(var t,n=b(this),i=r(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:n.first;)for(i(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!_(this,e)}}),n(m,l?{get:function(e){var t=_(this,e);return t&&t.value},set:function(e,t){return y(this,0===e?0:e,t)}}:{add:function(e){return y(this,e=0===e?0:e,e)}}),u&&t(m,"size",{configurable:!0,get:function(){return b(this).size}}),f},setStrong:function(e,t,n){var r=t+" Iterator",i=g(t),o=g(r);a(e,t,(function(e,t){p(this,{type:r,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?c("keys"===t?n.key:"values"===t?n.value:[n.key,n.value],!1):(e.target=void 0,c(void 0,!0))}),n?"entries":"values",!n,!0),l(t)}},Vy}()))),$y}var n_,r_,i_,o_,s_,a_,c_,l_,u_,d_,h_,p_,g_,f_,m_,b_,y_,__,v_,w_,S_,k_,I_,C_,E_,A_={};function x_(){if(r_)return n_;r_=1;var e=Bd(),t=Set.prototype;return n_={Set,add:e(t.add),has:e(t.has),remove:e(t.delete),proto:t}}function T_(){if(o_)return i_;o_=1;var e=x_().has;return i_=function(t){return e(t),t},i_}function O_(){if(a_)return s_;a_=1;var e=Zu();return s_=function(t,n,r){for(var i,o,s=r?t:t.iterator,a=t.next;!(i=e(a,s)).done;)if(void 0!==(o=n(i.value)))return o},s_}function P_(){if(l_)return c_;l_=1;var e=Bd(),t=O_(),n=x_(),r=n.Set,i=n.proto,o=e(i.forEach),s=e(i.keys),a=s(new r).next;return c_=function(e,n,r){return r?t({iterator:s(e),next:a},n):o(e,n)},c_}function R_(){return f_?g_:(f_=1,g_=function(e){return{iterator:e,next:e.next,done:!1}})}function D_(){if(b_)return m_;b_=1;var e=nh(),t=Jh(),n=Zu(),r=zp(),i=R_(),o="Invalid size",s=RangeError,a=TypeError,c=Math.max,l=function(t,n){this.set=t,this.size=c(n,0),this.has=e(t.has),this.keys=e(t.keys)};return l.prototype={getIterator:function(){return i(t(n(this.keys,this.set)))},includes:function(e){return n(this.has,this.set,e)}},m_=function(e){t(e);var n=+e.size;if(n!=n)throw new a(o);var i=r(n);if(i<0)throw new s(o);return new l(e,i)}}function N_(){if(__)return y_;__=1;var e=T_(),t=x_(),n=function(){if(d_)return u_;d_=1;var e=x_(),t=P_(),n=e.Set,r=e.add;return u_=function(e){var i=new n;return t(e,(function(e){r(i,e)})),i},u_}(),r=function(){if(p_)return h_;p_=1;var e=Vg(),t=x_();return h_=e(t.proto,"size","get")||function(e){return e.size},h_}(),i=D_(),o=P_(),s=O_(),a=t.has,c=t.remove;return y_=function(t){var l=e(this),u=i(t),d=n(l);return r(l)<=u.size?o(l,(function(e){u.includes(e)&&c(d,e)})):s(u.getIterator(),(function(e){a(l,e)&&c(d,e)})),d},y_}function U_(){if(w_)return v_;w_=1;var e=Xd(),t=function(e){return{size:e,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}};return v_=function(n){var r=e("Set");try{(new r)[n](t(0));try{return(new r)[n](t(-1)),!1}catch(e){return!0}}catch(e){return!1}}}function M_(){if(I_)return k_;I_=1;var e=Fu(),t=Bd();return k_=function(n,r){return t(e[n].prototype[r])}}!function(){if(E_)return C_;E_=1,t_(),function(){if(S_)return A_;S_=1;var e=Bg(),t=N_();e({target:"Set",proto:!0,real:!0,forced:!U_()("difference")},{difference:t})}();var e=M_();C_=e("Set","difference")}();var j_,F_,L_,G_={};!function(){if(L_)return F_;L_=1,ry(),function(){if(j_)return G_;j_=1;var e=Bg(),t=yb();e({target:"Promise",stat:!0},{withResolvers:function(){var e=t.f(this);return{promise:e.promise,resolve:e.resolve,reject:e.reject}}})}();var e=Zu(),t=Wd(),n=cm().Promise,r=n.withResolvers;F_=function(){return e(r,t(this)?this:n)}}();const B_=!1;class z_{constructor(e,t){Pu(this,"name",void 0),Pu(this,"message",void 0),Pu(this,"cause",void 0),Pu(this,"stack",void 0),this.name=this.constructor===z_?"Error":this.constructor.name,this.message=e,this.cause=t,this.stack=z_.isStackTraceEnabled?function(e,t){if(!e)return;const n=e.split("\n");return n.splice(1,t.skip),n.join("\n")}(new Error(e).stack,{skip:1}):void 0}toString(){return $_(this,!1)}[Symbol.toStringTag](){return this.toString()}toJSON(){return{name:this.name,message:this.message,stack:this.stack,cause:this.cause instanceof z_?this.cause:V_(this.cause)}}}function V_(e){if(void 0!==e)return e instanceof z_?e.toJSON():{name:e.name,message:e.message,stack:e.stack,cause:e.cause instanceof Error?V_(e.cause):e.cause}}function q_(e){if(e instanceof z_)return e;if(e instanceof Error){const t=new z_(e.message);return Reflect.set(t,"name",e.name),Reflect.set(t,"stack",e.stack),e.cause&&Reflect.set(t,"cause",q_(e.cause)),t}return"object"==typeof(t=e)&&null!==t&&"message"in t&&"string"==typeof t.message?H_(e):new W_(e);var t}function H_(e){const{message:t,name:n,cause:r,stack:i}=e,o=new z_(String(null!=t?t:"Unknown error"));return n&&Reflect.set(o,"name",String(n)),i&&Reflect.set(o,"stack",String(i)),r&&Reflect.set(o,"cause",H_(r)),o}Pu(z_,"isStackTraceEnabled",!0);class W_ extends z_{constructor(e){super("An unknown error occurred: "+String(e)),Pu(this,"thrownError",void 0),this.thrownError=e}toJSON(){return Du(Du({},super.toJSON()),{},{thrownError:this.thrownError})}}function $_(e){var t;let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(n&&e instanceof z_)return e.toString();const r="CustomError"===e.name?"Error":null!==(t=Reflect.get(e,"kind"))&&void 0!==t?t:e.name;let i="".concat(r,": ").concat(e.message);if(e.stack){const t=X_({stack:e.stack,message:e.message});i+="\n".concat(t)}return e.cause&&(i+="\nCaused by ".concat(K_($_(q_(e.cause)),2))),i}function X_(e){let{stack:t,message:n}=e;const r=t.indexOf(n);return(-1===r?t:t.slice(r+n.length)).replace(/^\s*\n/,"")}function K_(e,t){const n=" ".repeat(t);return e.replace(/\r?\n/g,(e=>e+n)).trimStart()}new Map;const Y_={patterns:{email:{regex:'(([^<>()[\\]\\\\.,;:\\s@"]+(\\.[^<>()[\\]\\\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))',prefixes:[],priority:0,description:"Email"},url:{regex:"[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b((([-a-zA-Z0-9()@%_\\+~#&//=\\[\\]])|([.:?](?!$|\\s)))*)?",prefixes:["http://","https://"],priority:1,description:"URL"},creditCardNumber:{regex:"(\\d{4}\\d{4}\\d{4}\\d{4})|(\\d{4}\\-\\d{4}\\-\\d{4}\\-\\d{4})|(\\d{4}\\s\\d{4}\\s\\d{4}\\s\\d{4})",prefixes:[],priority:2,description:"Credit card number"},phoneNumber:{regex:"[\\+]?[(]?[0-9]{3}[)]?[-\\s\\.]?[0-9]{3}[-\\s\\.]?[0-9]{4,6}",prefixes:[],priority:3,description:"Phone number"},usSSN:{regex:"[0-9]{3}[-]*[0-9]{2}[-]*[0-9]{4}",prefixes:[],priority:4,description:"US SSN"},caSSN:{regex:"[0-9]{3}[\\s\\-]?[0-9]{3}[\\s\\-]?[0-9]{3}",prefixes:[],priority:5,description:"CA SIN"},ukSSN:{regex:"[A-Z]{2}[\\s\\-]?\\d{2}[\\s\\-]?\\d{2}[\\s\\-]?\\d{2}[\\s\\-]?[A-Z]",prefixes:[],priority:6,description:"UK NI NO"},iban:{regex:"[A-Z]{2}(-?|\\ )\\d{2}-?(?:\\ ?[A-Z]{4}-?)?(?:\\d{13,}|(?:\\ \\d{4}){3,5}\\ \\d{1,4})",prefixes:[],priority:7,description:"IBAN number"},variousID:{regex:"[A-Z]{0,2}(?:\\d{3,8}[\\ -])(?:\\d{2,8}[\\ -]){1,4}\\d{2,4}|\\d{7}[A-Z]?|\\d{5,18}",prefixes:[],priority:8,description:"Various ID number"}}};const Z_="a".charCodeAt(0),J_="z".charCodeAt(0),Q_="A".charCodeAt(0),ev="Z".charCodeAt(0),tv="0".charCodeAt(0),nv="9".charCodeAt(0),rv=e=>e>=Z_&&e<=J_,iv=e=>e>=Q_&&e<=ev,ov=e=>e>=tv&&e<=nv;function sv(e,t){const n=new Array(e.length);let r=t;for(let t=e.length-1;t>=0;t--){const i=e.charCodeAt(t);rv(i)?(n[t]=Z_+(t+r)%26,r/=26):iv(i)?(n[t]=Q_+(t+r)%26,r/=26):ov(i)?(n[t]=tv+(t+1+r)%10,r/=10):n[t]=i}return String.fromCharCode(...n)}function av(e,t){let{groups:n,index:r}=t;const[i,o]=Object.entries(n).find((e=>{let[,t]=e;return void 0!==t}));return Du(Du({id:i},e.patterns[i]),{},{text:o,start:r,end:r+o.length})}class cv{constructor(e){Pu(this,"dlpConfiguration",void 0),Pu(this,"dlpRegex",void 0),Pu(this,"seed",0),this.dlpConfiguration=e,this.dlpRegex=function(e){let{patterns:t}=e;return new RegExp(Object.entries(t).sort(((e,t)=>{let[,{priority:n}]=e,[,{priority:r}]=t;return n-r})).map((e=>{let[t,{regex:n,prefixes:r}]=e;return n=r.length?"(".concat(r.join("|"),")").concat(n):n,"(?<".concat(t,">").concat(n,")")})).join("|"),"g")}(this.dlpConfiguration)}matchAll(e){const t=[];for(this.dlpRegex.lastIndex=0;;){const n=this.dlpRegex.exec(e);if(!n)break;const r={groups:n.groups,index:n.index};t.push(av(this.dlpConfiguration,r))}return this.dlpRegex.lastIndex=0,t}sanitizedReplacement(e){return function(e,t){let{prefixes:n,text:r}=e;const i=n.find((e=>0===r.indexOf(e)));return void 0!==i?"".concat(i).concat(sv(r.slice(i.length),t)):sv(r,t)}(e,this.seed++)}sanitize(e){var t=this;return e.replace(this.dlpRegex,(function(){var e,n;const r={groups:(e=arguments.length-1,e<0||arguments.length<=e?void 0:arguments[e]),index:(n=arguments.length-3,n<0||arguments.length<=n?void 0:arguments[n])},i=av(t.dlpConfiguration,r);return t.sanitizedReplacement(i)}))}unsanitize(e){return e}}class lv extends cv{sanitize(e){const t=super.sanitize(e);return this.seed=0,t}}const uv=new lv(Y_),dv=uv.sanitize.bind(uv),hv={error:"ERROR",warn:"WARN",info:"INFO",verbose:"DEBUG"};var pv=new WeakMap,gv=new WeakMap,fv=new WeakMap,mv=new WeakMap,bv=new WeakSet;class yv{constructor(e){_classPrivateMethodInitSpec(this,bv),_classPrivateFieldInitSpec(this,pv,new Map),_classPrivateFieldInitSpec(this,gv,void 0),_classPrivateFieldInitSpec(this,_sampler,void 0),_classPrivateFieldInitSpec(this,fv,0),_classPrivateFieldInitSpec(this,mv,null),Ou(gv,this,e),Ou(_sampler,this,new RateLimiter({eventsPerSecond:e.logsPerSecond,eventsPerMinute:e.logsPerMinute}))}write(e){var t;"verbose"!==e.level&&("info"===e.level&&void 0===e.delivery||!1!==e.delivery&&(Tu(_sampler,this).shouldSelect()?xu(bv,this,_queue).call(this,!0===e.delivery?{}:e.delivery,xu(bv,this,_v).call(this,e)):Ou(fv,this,(Tu(fv,this),++t))))}[Symbol.dispose](){null!==Tu(mv,this)&&(clearTimeout(Tu(mv,this)),Ou(mv,this,null)),xu(bv,this,vv).call(this)}toTransferable(){return{kind:"FeLogWriter",options:Tu(gv,this)}}static fromTransferable(e){return new yv(e.options)}}function _v(e){var t;return JSON.stringify({timestamp:e.timestamp,level:hv[e.level],message:e.text,logger:null!==(t=e.logger)&&void 0!==t?t:"root",application:Tu(gv,this).application,version:Tu(gv,this).version,client:Tu(gv,this).client,env:Tu(gv,this).environment,session:Tu(gv,this).sessionId,extra:"error"===e.level?e.args.slice(1):e.args,exception:"error"===e.level?e.args[0]:void 0},((e,t)=>"string"==typeof t?dv(t):t))}function vv(){for(const e of Tu(pv,this).values())xu(bv,this,wv).call(this,e.options,e.messages);Tu(fv,this)>0&&(xu(bv,this,wv).call(this,{retentionInDays:30,dataTier:"infrequent"},[xu(bv,this,_v).call(this,{timestamp:Date.now(),level:"warn",logger:"FeLogWriter",context:null,text:"Dropped log messages due to rate limiting.",delivery:!0,args:[{count:Tu(fv,this)}]})]),Ou(fv,this,0)),Tu(pv,this).clear()}function wv(e,t){let{retentionInDays:n=30,dataTier:r="infrequent"}=e;if(0===t.length)return;const i="[".concat(t.join(","),"]"),o=new URL("https://f-log-inkwell.grammarly.io/batch/log");o.searchParams.set("retention",String(n)),o.searchParams.set("datatier",r),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return new Promise(((n,r)=>{let i=0;const o=()=>{e().then(n).catch((e=>{i++<t?setTimeout(o,2**i*1e3):r(e)}))};o()}))}((async()=>{var e;const t=await fetch(o,{body:i,method:"POST",cache:"no-store",headers:{"Content-Type":"application/json"},keepalive:!0});if(null===(e=t.body)||void 0===e||e.cancel(),!t.ok)throw new Error("Failed to send logs: ".concat(t.status," ").concat(t.statusText))})).catch((e=>{B_}))}var Sv=function(e,t){return Sv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Sv(e,t)};function kv(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Sv(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function Iv(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Cv(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function Ev(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function Av(e){return"function"==typeof e}function xv(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Tv=xv((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function Ov(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Pv=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var e,t,n,r,i;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var s=Iv(o),a=s.next();!a.done;a=s.next()){a.value.remove(this)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}else o.remove(this);var c=this.initialTeardown;if(Av(c))try{c()}catch(e){i=e instanceof Tv?e.errors:[e]}var l=this._finalizers;if(l){this._finalizers=null;try{for(var u=Iv(l),d=u.next();!d.done;d=u.next()){var h=d.value;try{Nv(h)}catch(e){i=null!=i?i:[],e instanceof Tv?i=Ev(Ev([],Cv(i)),Cv(e.errors)):i.push(e)}}}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}if(i)throw new Tv(i)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)Nv(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&Ov(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&Ov(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),Rv=Pv.EMPTY;function Dv(e){return e instanceof Pv||e&&"closed"in e&&Av(e.remove)&&Av(e.add)&&Av(e.unsubscribe)}function Nv(e){Av(e)?e():e.unsubscribe()}var Uv={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Mv={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,Ev([e,t],Cv(n)))},clearTimeout:function(e){var t=Mv.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function jv(e){Mv.setTimeout((function(){throw e}))}function Fv(){}function Lv(e){e()}var Gv=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,Dv(t)&&t.add(n)):n.destination=Wv,n}return kv(t,e),t.create=function(e,t,n){return new qv(e,t,n)},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(Pv),Bv=Function.prototype.bind;function zv(e,t){return Bv.call(e,t)}var Vv=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){Hv(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){Hv(e)}else Hv(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){Hv(e)}},e}(),qv=function(e){function t(t,n,r){var i,o,s=e.call(this)||this;Av(t)||!t?i={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:s&&Uv.useDeprecatedNextContext?((o=Object.create(t)).unsubscribe=function(){return s.unsubscribe()},i={next:t.next&&zv(t.next,o),error:t.error&&zv(t.error,o),complete:t.complete&&zv(t.complete,o)}):i=t;return s.destination=new Vv(i),s}return kv(t,e),t}(Gv);function Hv(e){jv(e)}var Wv={closed:!0,next:Fv,error:function(e){throw e},complete:Fv},$v="function"==typeof Symbol&&Symbol.observable||"@@observable";function Xv(e){return e}function Kv(e){return 0===e.length?Xv:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var Yv=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r,i=this,o=(r=e)&&r instanceof Gv||function(e){return e&&Av(e.next)&&Av(e.error)&&Av(e.complete)}(r)&&Dv(r)?e:new qv(e,t,n);return Lv((function(){var e=i,t=e.operator,n=e.source;o.add(t?t.call(o,n):n?i._subscribe(o):i._trySubscribe(o))})),o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=Zv(t))((function(t,r){var i=new qv({next:function(t){try{e(t)}catch(e){r(e),i.unsubscribe()}},error:r,complete:t});n.subscribe(i)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[$v]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Kv(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=Zv(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function Zv(e){var t;return null!==(t=null!=e?e:Uv.Promise)&&void 0!==t?t:Promise}!function(e){function t(t,n,r,i,o,s){var a=e.call(this,t)||this;return a.onFinalize=o,a.shouldUnsubscribe=s,a._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,a._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,a}kv(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}(Gv);var Jv=xv((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),Qv=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return kv(t,e),t.prototype.lift=function(e){var t=new ew(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new Jv},t.prototype.next=function(e){var t=this;Lv((function(){var n,r;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var i=Iv(t.currentObservers),o=i.next();!o.done;o=i.next()){o.value.next(e)}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}}))},t.prototype.error=function(e){var t=this;Lv((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}}))},t.prototype.complete=function(){var e=this;Lv((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this,r=n.hasError,i=n.isStopped,o=n.observers;return r||i?Rv:(this.currentObservers=null,o.push(e),new Pv((function(){t.currentObservers=null,Ov(o,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,r=t.thrownError,i=t.isStopped;n?e.error(r):i&&e.complete()},t.prototype.asObservable=function(){var e=new Yv;return e.source=this,e},t.create=function(e,t){return new ew(e,t)},t}(Yv),ew=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return kv(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:Rv},t}(Qv),tw=(function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}kv(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){var e=this,t=e.hasError,n=e.thrownError,r=e._value;if(t)throw n;return this._throwIfClosed(),r},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)}}(Qv),function(){return Date.now()}),nw=function(e){function t(t,n){return e.call(this)||this}return kv(t,e),t.prototype.schedule=function(e,t){return this},t}(Pv),rw={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setInterval.apply(void 0,Ev([e,t],Cv(n)))},clearInterval:function(e){var t=rw.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},iw=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return kv(t,e),t.prototype.schedule=function(e,t){var n;if(void 0===t&&(t=0),this.closed)return this;this.state=e;var r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,t)),this.pending=!0,this.delay=t,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(i,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),rw.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&rw.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n,r=!1;try{this.work(e)}catch(e){r=!0,n=e||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),n},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,r=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Ov(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(nw),ow=function(){function e(t,n){void 0===n&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=tw,e}(),sw=function(e){function t(t,n){void 0===n&&(n=ow.now);var r=e.call(this,t,n)||this;return r.actions=[],r._active=!1,r}return kv(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var n;this._active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(ow);new sw(iw),new Yv((function(e){return e.complete()}));"function"==typeof Symbol&&Symbol.iterator&&Symbol.iterator;xv((function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}}));Array.isArray;var aw=new WeakMap;class cw{constructor(e,t){var n,r,i,o,s;_classPrivateMethodInitSpec(this,_RPC_brand),_classPrivateFieldInitSpec(this,aw,new DisposableStack),_classPrivateFieldInitSpec(this,_idSequence,new IdSequence),_classPrivateFieldInitSpec(this,_logger,void 0),_classPrivateFieldInitSpec(this,_transport,void 0),_classPrivateFieldInitSpec(this,_handlers,void 0),_classPrivateFieldInitSpec(this,_report,void 0),_classPrivateFieldInitSpec(this,_allowClientsToDispose,void 0),_classPrivateFieldInitSpec(this,_inboundRequests,new Qv),_classPrivateFieldInitSpec(this,_outbound,new Map),Ou(_transport,this,e),Ou(_handlers,this,t.handler);const a=null===t.logger||void 0===n?void 0:n.name,c=null===t.logger||void 0===r?void 0:r.location;Ou(_logger,this,logger.createLogger(["RPC",c,a].filter(Boolean).join("/"),null===t.logger||void 0===i?void 0:i.context)),Ou(_report,this,null!==t.report&&void 0!==o?o:null),Ou(_allowClientsToDispose,this,null!==t.allowClientsToDispose&&void 0!==s&&s);const l=new AbortController;Tu(aw,this).defer((()=>{Tu(_logger,this).verbose("RPC disposed."),l.abort(),Tu(_outbound,this).forEach((e=>e(failure$1(new ReferenceError$1))))})),Tu(aw,this).use(dist_pipe(Tu(_inboundRequests,this),dist_mergeMap((e=>xu(_RPC_brand,this,_execute).call(this,e))),subscribe({next:e=>{let[t,n]=e;"failure"===t.data.status&&Tu(_logger,this).error("Outbound ".concat(t.action," error response:"),q_(t.data.data),{delivery:!1});try{"transferable"===Tu(_transport,this).kind?Tu(_transport,this).port.postMessage(t,null!=n?n:[]):Tu(_transport,this).port.postMessage(t)}catch(e){Tu(_logger,this).error("Unexpected error calling postMessage",q_(e),{delivery:!1})}},error:e=>{Tu(_logger,this).error("Unexpected error responding to inbound RPC message",e,{delivery:!1})}}))),Tu(_transport,this).port.addEventListener("message",(e=>{switch(e.data.type){case"request":B_,Tu(_inboundRequests,this).next(e.data);break;case"response":{B_,"failure"===e.data.data.status&&Tu(_logger,this).error("Inbound ".concat(e.data.action," error response:"),q_(e.data.data.data),{delivery:!1});const t=Tu(_outbound,this).get(e.data.id);t?t(success$1(e.data)):(Tu(_logger,this).warn('Unexpected response with "'.concat(e.data.action,'" action.'),{delivery:!1}),Tu(_logger,this).verbose("Unexpected response:",e.data));break}default:throw new UnreachableCaseError(e.data)}}),{signal:l.signal});const u=Tu(_transport,this).port;u instanceof MessagePort&&(u.addEventListener("messageerror",(e=>Tu(_logger,this).error("MessagePort error:",q_(e),{delivery:!1})),{signal:l.signal}),u.addEventListener("error",(e=>Tu(_logger,this).error("MessagePort error:",q_(e),{delivery:!1})),{signal:l.signal}),u.addEventListener("close",(()=>Tu(_logger,this).verbose("MessagePort closed.")),{signal:l.signal})),Tu(_transport,this).port.start()}createClient(){const e=new Set(["then","toJSON"]);return new Proxy({},{get:(t,n)=>{if(e.has(n))return;const r=n;return e.has(n)?void 0:(e,t)=>{var n;if(Tu(aw,this).disposed)return dist_failure(new ReferenceError$1);const i=Tu(_idSequence,this).next(),o=Promise.withResolvers(),s=performance.now();let a=!1;const c=setTimeout((()=>{!0,o.resolve(failure$1(new TimeoutWaitingForRPCResponseError(i,String(r),e)))}),null!==(null==t?void 0:t.timeout)&&void 0!==n?n:6e4),l=()=>{Tu(_outbound,this).delete(i),clearTimeout(c)},u=t=>{if(l(),a)return Tu(_logger,this).warn('RPC response for "'.concat(String(r),'" was received after timeout.'),{delivery:!1}),void Tu(_logger,this).verbose("RPC response after timeout:",{action:r,request:e,response:t});if(isFailure(t))return void o.resolve(t);const n=t.value;if("failure"===n.data.status){var i;const e=function(e){var t;const n=e.data.data,r=new dist_RPCError(null!==n.errorMessage&&void 0!==t?t:"Unknown error");return Object.assign(r,n),r}(n);null===Tu(_report,this)||void 0===i||i.call(this,{kind:"outbound",action:r,durationInMs:performance.now()-s,error:e}),o.resolve(failure$1(e))}else{var c;null===Tu(_report,this)||void 0===c||c.call(this,{kind:"outbound",action:r,durationInMs:performance.now()-s}),o.resolve(success$1(n.data.data))}},d={id:i,type:"request",action:String(r),data:e};var h;return Tu(_outbound,this).set(i,u),dist_pipe(unsafe$1((()=>{var e;"transferable"===Tu(_transport,this).kind?Tu(_transport,this).port.postMessage(d,null!==(null==t?void 0:t.transfer)&&void 0!==e?e:[]):Tu(_transport,this).port.postMessage(d)})),(sideEffect((e=>{Tu(_logger,this).error("Failed to send request:",e,{delivery:!1}),u(failure$1(e))})),e=>e.ok?e:failure$1(h(e.error)))),o.promise}},has:(e,t)=>"string"==typeof t||t===Symbol.asyncDispose,set:()=>!1})}[Symbol.dispose](){return Tu(aw,this).dispose()}}Math.ceil(1e3/30);class lw extends(null){constructor(e,t,n){super(t,n),_classPrivateFieldInitSpec(this,_disposable,void 0),Ou(_disposable,this,e)}dispose(){return Tu(_disposable,this).dispose()}[Symbol.dispose](){return this.dispose()}}function uw(e){let t=null;e.listenToRuntimeMessage((e=>"InkwellSecureKeyRequestMessage"===e),(()=>(t||(t=crypto&&crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).substring(2)),Promise.resolve(t))))}function dw(e){return e.isGateEnabled(De.InkwellSubscribeToSecureKeyRequests)}const hw=class e extends Kc.Base{constructor(e,t,n){super(),this._url=e,this._ajaxFactory=t,this._fingerprints=n,this._ajax=this._ajaxFactory({requestExtender:Yc.toHeaderAppender(this._fingerprints)})}static getDefaultUrl(e){return`https://goldengate${e}/knowledge-hub/v1/institution`}getTerms(t,n=["PUBLISHED"]){const r=gl.get(this._url,t,"term");return n.forEach((e=>r.queryParam("state",e))),this._ajax.json(r,e.TermsIOType)}getTermsAsCSV(e){const t=gl.get(this._url,e,"term/csv");return this._ajax.file(t)}getPresets(t){const n=gl.get(this._url,t,"presets");return this._ajax.json(n,e.PresetsIOType)}batchTerms(t,n){const r=gl.post(this._url,t,"term/batch").json(n);return this._ajax.json(r,e.TermsIOType)}createTerm(t,n){const r=gl.post(this._url,t,"term").json(n);return this._ajax.json(r,e.TermIOType)}updateTerm(t,n,r){const i=gl.patch(this._url,t,"term",n).json(r);return this._ajax.json(i,e.TermIOType)}deleteTerm(e,t){const n=gl.del(this._url,e,"term",t);return this._ajax.empty(n)}publishTerms(e,t){const n=gl.post(this._url,e,"term/publish").json({termIds:t});return this._ajax.empty(n)}bulkDeleteTerms(e,t){const n=gl.post(this._url,e,"term/bulkDelete").json({termIds:t});return this._ajax.empty(n)}bulkCreatePeople(t,n){const r=gl.post(this._url,t,"people/bulk").json(n);return this._ajax.json(r,e.KeyPeopleIOType)}bulkTermsUpload(e,t){const n=gl.post(this._url,e,"term/csv").multipartFormData("file",t);return this._ajax.json(n)}getSettings(t){const n=gl.get(this._url,t,"settings");return this._ajax.json(n,e.SettingsIOType)}setSettings(e,t){const n=gl.put(this._url,e,"settings").json(t);return this._ajax.json(n)}getInstitutionSettings(t){const n=gl.get(this._url,t,"organization/settings");return this._ajax.json(n,e.InstitutionSettingsIOType)}setInstitutionSettings(e,t){const n=gl.put(this._url,e,"organization/settings").json(t);return this._ajax.json(n)}};hw.KeyPersonIOType=Ur.w3({id:Ur.Z_,displayName:Ur.Z_}),hw.KeyPeopleIOType=Ur.IX(hw.KeyPersonIOType),hw.KeyPeopleBulkCreateRequestIOType=Ur.w3({peopleDetails:Ur.IX(Ur.w3({displayName:Ur.Z_}))}),hw.TermSourceIOType=Ur.G0([Ur.i0("SAMPLE"),Ur.i0("PRESET"),Ur.i0("MANUAL"),Ur.i0("BULK_UPLOAD"),Ur.i0("GENERATED"),Ur.i0("SUGGESTED_TERM"),Ur.S1]),hw.TermStateIOType=Ur.G0([Ur.i0("PUBLISHED"),Ur.i0("DRAFT")]),hw.TermIOType=Ur.w3({id:Ur.Z_,name:Ur.Z_,aliases:Ur.IX(Ur.Z_),matchPhrases:Ur.IX(Ur.Z_),description:Ur.G0([Ur.Z_,Ur.S1]),relatedMaterials:Ur.IX(Ur.w3({title:Ur.Z_,link:Ur.Z_,createdAt:fl.Dy.date()})),keyPeopleIds:Ur.IX(Ur.Z_),keyPeople:hw.KeyPeopleIOType,isIgnored:Ur.O7,createdAt:fl.Dy.date(),updatedAt:fl.Dy.date(),source:hw.TermSourceIOType,state:hw.TermStateIOType}),hw.TermsIOType=Ur.IX(hw.TermIOType),hw.SettingsIOType=Ur.w3({isEnabled:Ur.O7}),hw.InstitutionSettingsIOType=Ur.w3({globalState:Ur.G0([Ur.i0("ON"),Ur.i0("OFF")]),publishingPermissions:Ur.w3({allowedRoles:Ur.IX(Ur.G0([Ur.i0("ADMIN"),Ur.i0("ACCOUNT_MANAGER"),Ur.i0("INSTITUTION_USER"),Ur.i0("GROUP_MANAGER")]))}),termAutoGenerationSettings:Ur.w3({isEnabled:Ur.O7,reviewMode:Ur.G0([Ur.i0("AUTO_PUBLISH"),Ur.i0("SAVE_AS_DRAFT")])}),termManagementPermissions:Ur.w3({allowedRoles:Ur.IX(Ur.G0([Ur.i0("ADMIN"),Ur.i0("ACCOUNT_MANAGER"),Ur.i0("INSTITUTION_USER"),Ur.i0("GROUP_MANAGER")]))})}),hw.TermCreateRequestIOType=Ur.w3({aliases:Ur.IX(Ur.Z_),description:Ur.Z_,relatedMaterials:Ur.IX(Ur.w3({title:Ur.Z_,link:Ur.Z_})),keyPeopleIds:Ur.IX(Ur.Z_),source:hw.TermSourceIOType}),hw.TermsBatchRequestIOType=Ur.w3({terms:Ur.IX(hw.TermCreateRequestIOType)}),hw.PresetTermIOType=Ur.w3({aliases:Ur.IX(Ur.Z_),description:Ur.Z_,exists:Ur.O7}),hw.PresetIOType=Ur.w3({name:Ur.Z_,terms:Ur.IX(hw.PresetTermIOType)}),hw.PresetsIOType=Ur.IX(hw.PresetIOType),hw.TermUpdateRequestIOType=Ur.w3({id:Ur.Z_,aliases:Ur.IX(Ur.Z_),description:Ur.Z_,relatedMaterials:Ur.IX(Ur.w3({title:Ur.Z_,link:Ur.Z_})),keyPeopleIds:Ur.IX(Ur.Z_),createdAt:fl.Dy.date(),updatedAt:fl.Dy.date()}),hw.TermsBulkUploadResultIOType=Ur.w3({uploadedTermsCount:Ur.pk,failedTermsCount:Ur.pk,errors:Ur.IX(Ur.w3({lineNumber:Ur.pk,line:Ur.IX(Ur.Z_),message:Ur.Z_}))});let pw=hw;const gw=Object.assign({},{},{common:{enabledDefs:!1,historyLoggerEnabledUntil:null,historyLoggerEnabled:!1,advancedHistoryLoggerEnabledUntil:null,advancedHistoryLoggerEnabled:!1,isDebugMenuVisible:!1,isEnhancedScreenReaderUXSupported:!1,knowledgeHubSettings:{enabled:!0,onboardingSeen:!1,suggestedTermOnboardingSeen:!1},alwaysAvailableAssistantSettings:{},touchTypistState:{accessibilityOnboardingAlertsCount:0,userAcceptedCount:0,lastUserAcceptedAt:""},touchTypistSettings:{enabled:!0,hotkey:"Tab",snoozedUntil:null}},field:{}}),fw={id:0,url:""};function mw(e,t){return Object.assign({},e,{common:{...e.common,...t}})}function bw(e,t,n){return Object.assign({},e,{[t]:{...e[t],...n}})}const yw=e=>()=>{var t;return null!==(t=e.view("extensionSettings").get())&&void 0!==t?t:gw};class _w{constructor(e,t,n,r,i,o,s=q.create("knowledgeHub.bgService")){this._url=e,this._actions=t,this._store=n,this._apiService=r,this._getUser=i,this._telemetry=o,this._log=s,this._api=(0,h.Vo)((()=>new pw(this._url,this._apiService.ajaxFactory,this._apiService.fingerprints))),this._loadingSettingsPromise=null}async setKnowledgeHubSettings(e){var t,n,r,i,o;const s=null===(n=null===(t=this._getUser())||void 0===t?void 0:t.institutionInfo)||void 0===n?void 0:n.id;if(!s)return this._log.error("User institution id is not defined"),null;const a=null!==(i=null===(r=yw(this._store)().common.knowledgeHubSettings)||void 0===r?void 0:r.enabled)&&void 0!==i&&i;try{return this._log.info(`setting Knowledge Hub feature ${e.isEnabled?"enabled":"disabled"}}`),await Promise.all([this._actions.knowledgeHubSettings.setKnowledgeHubSettings(e),this._api.get().setSettings(String(s),e)]),e}catch(e){return await this._actions.knowledgeHubSettings.setKnowledgeHubSettings({isEnabled:a}),e instanceof hl&&this._telemetry.knowledgeHub.bgApiError(e.code,null!==(o=e.body)&&void 0!==o?o:""),null}}async getKnowledgeHubSettings(){return this._loadingSettingsPromise||(this._loadingSettingsPromise=this._loadSettings(),this._loadingSettingsPromise.finally((()=>{this._loadingSettingsPromise=null}))),this._loadingSettingsPromise}async _loadSettings(){var e,t,n;const r=null===(t=null===(e=this._getUser())||void 0===e?void 0:e.institutionInfo)||void 0===t?void 0:t.id;if(!r)return this._log.error("User institution id is not defined"),null;try{const e=await this._api.get().getSettings(String(r));return await this._actions.knowledgeHubSettings.setKnowledgeHubSettings(e),e}catch(e){return this._log.error("Knowledge Hub Settings loading error",e),e instanceof hl&&this._telemetry.knowledgeHub.bgApiError(e.code,null!==(n=e.body)&&void 0!==n?n:""),null}}}var vw;!function(e){e.requestToPromise=function(e){return new Promise(((t,n)=>{e.onsuccess=()=>t(e.result),e.onerror=()=>n(e.error)}))}}(vw||(vw={}));class ww{constructor(e,t){this._openDB=e,this._tableName=t,this._log=q.create("IndexDBTableImpl")}async _performTransaction(e,t){try{const n=await this._openDB;if(0===n.objectStoreNames.length)throw new Error("Database is closed or not available");const r=n.transaction([this._tableName],e),i=t(r.objectStore(this._tableName));return await vw.requestToPromise(i)}catch(t){throw this._log.error("IndexDB transaction failed",{error:t,tableName:this._tableName,mode:e}),t}}get(e,t){return this._performTransaction("readonly",(n=>n.index(e).get(t)))}put(e,t){return this._performTransaction("readwrite",(n=>n.put(e,t))).then()}getAll(){return this._performTransaction("readonly",(e=>e.getAll()))}getAllByIndex(e,t){return this._performTransaction("readonly",(n=>n.index(e).getAll(IDBKeyRange.only(t))))}clear(){return this._performTransaction("readwrite",(e=>e.clear()))}delete(e){return this._performTransaction("readwrite",(t=>t.delete(e)))}}class Sw{constructor(e){this._openDB=this._initOpenDB(e)}_initOpenDB(e){const t=indexedDB.open(e.name,e.version);return t.onupgradeneeded=()=>{this._handleDBUpgrade(t,e)},vw.requestToPromise(t)}_handleDBUpgrade(e,t){const n=e.result;Object.entries(t.schema).forEach((([t,r])=>{var i;const o=n.objectStoreNames.contains(t)?null===(i=e.transaction)||void 0===i?void 0:i.objectStore(t):n.createObjectStore(t,r.options);o&&Array.isArray(r.indexList)&&r.indexList.filter((e=>!o.indexNames.contains(e.indexName))).forEach((e=>{var t;return o.createIndex(e.indexName,null!==(t=e.keyPath)&&void 0!==t?t:e.indexName,e.options)}))}))}getTable(e){return new ww(this._openDB,e)}}const kw={integrated:0,disabled_by_user:0,disabled_by_grammarly:0,disabled_by_enterprise:0,disabled_due_to_desktop_integration:0,integrated_via_connector:0,disabled_due_to_network_connection:0},Iw=["integrationType","integrationName","isIframe","primaryLanguage","unsupportedReason","isCheckingTextForeign","fieldType"];var Cw,Ew,Aw;!function(e){e.DB_NAME="duration_service_availability_metrics_db_v1",e.DB_VERSION=2,e.VIEW_DURATION_TABLE="view",e.TYPING_DURATION_TABLE="typing",e.TABLE_SCHEMA={options:{autoIncrement:!0},indexList:[{indexName:"domain"}]}}(Cw||(Cw={}));class xw{constructor(e=q.create("DurationMetricsStorageImpl")){this._log=e,this.addViewDuration=async(e,t,n)=>{var r;try{const i=await this._viewDurationTable.get("domain",e),o=null!==(r=null==i?void 0:i.integrationTypeDuration)&&void 0!==r?r:kw,s={domain:e,integrationTypeDuration:{...o,[t]:o[t]+n}};await this._viewDurationTable.put(s,e),this._log.debug(`update _viewDurationTable for ${e}:`,s)}catch(t){this._log.error(`Failed to add view duration for domain ${e}:`,t)}},this.addTypingDuration=async(e,t)=>{try{const n=await this._typingDurationTable.get("domain",e),r=(null==n?void 0:n.integrationList)||[],i=r.findIndex((e=>Iw.every((n=>t[n]===e[n]))));-1!==i?r[i]={...r[i],duration:r[i].duration+t.duration,textLength:r[i].textLength+t.textLength}:r.push(t);const o={domain:e,integrationList:r};await this._typingDurationTable.put(o,e),this._log.debug(`update _typingDurationTable for ${e}:`,o)}catch(t){this._log.error(`Failed to add typing duration for domain ${e}:`,t)}},this.getState=async()=>{const[e,t]=await Promise.all([this._viewDurationTable.getAll(),this._typingDurationTable.getAll()]),n=e=>Math.round(e/ka);return{view:e.map((e=>({domain:e.domain,integrationTypeDuration:W(((e,t)=>t>0),H(((e,t)=>n(t)),e.integrationTypeDuration))}))).filter((e=>Object.keys(e.integrationTypeDuration).length>0)).map((e=>({...e,totalDuration:Object.entries(e.integrationTypeDuration).reduce(((e,[,t])=>e+t),0)}))),typing:t.map((e=>({...e,integrationList:e.integrationList.map((e=>({...e,duration:n(e.duration)})))}))).map((e=>({...e,totalDuration:e.integrationList.reduce(((e,t)=>e+t.duration),0),totalTextLength:e.integrationList.reduce(((e,t)=>e+t.textLength),0)})))}},this.clear=async()=>{try{await Promise.all([this._viewDurationTable.clear(),this._typingDurationTable.clear()])}catch(e){this._log.error("Failed to clear duration metrics storage:",e)}};const t=new Sw({name:Cw.DB_NAME,version:Cw.DB_VERSION,schema:{[Cw.VIEW_DURATION_TABLE]:Cw.TABLE_SCHEMA,[Cw.TYPING_DURATION_TABLE]:Cw.TABLE_SCHEMA}});this._viewDurationTable=t.getTable(Cw.VIEW_DURATION_TABLE),this._typingDurationTable=t.getTable(Cw.TYPING_DURATION_TABLE)}}function Tw(e,t){return e.has(t)?t:xt(t)}!function(e){e.isViewEnabled=function(e){return e.isGateEnabled(De.ServiceAvailabilityViewMetrics)&&!je()},e.isTypingEnabled=function(e){return e.isGateEnabled(De.ServiceAvailabilityTypingMetrics)&&!je()}}(Ew||(Ew={})),function(e){e.trackViewMetrics=function(e,t,n){t.forEach((t=>{const r=Tw(n,t.domain);e.totalViewDuration({domain:r},t.totalDuration),Object.entries(t.integrationTypeDuration).forEach((([t,n])=>e.viewDuration({domain:r,integrationType:t},n)))})),e.amountOfViewedDomains(lt(ut,t.length))},e.trackTypingMetrics=function(e,t,n){t.forEach((t=>{const r=Tw(n,t.domain);e.totalTypingDuration({domain:r},t.totalDuration),e.totalTypingLength({domain:r},t.totalTextLength),t.integrationList.forEach((t=>{const n={domain:r,isIframe:t.isIframe,integrationName:t.integrationName,integrationType:t.integrationType,primaryLanguage:t.primaryLanguage,unsupportedReason:t.unsupportedReason,isCheckingTextForeign:t.isCheckingTextForeign};e.typingDuration(n,t.duration),e.typingLength(n,t.textLength)}))})),e.amountOfTypedDomains(lt(ut,t.length))}}(Aw||(Aw={}));const Ow=(e,t,n,r=q.create("ServiceAvailabilityTracking"))=>gu.alarm(pu.serviceAvailabilityTracking,{name:lu.sendServiceAvailabilityMetrics,isDefault:!0,periodInMinutes:60})((async i=>{var o,s;const a=Ew.isViewEnabled(t),c=Ew.isTypingEnabled(t);if(a||c){try{const t=await e.getState(),l=function(e){var t;return new Set(null===(t=null==e?void 0:e.domainAliasRules)||void 0===t?void 0:t.map((e=>e.alias)))}(null===(s=null===(o=null==i?void 0:i.state)||void 0===o?void 0:o.dynamicConfig)||void 0===s?void 0:s.serviceAvailabilityMetrics);a&&Aw.trackViewMetrics(n,t.view,l),c&&Aw.trackTypingMetrics(n,t.typing,l),ZJ().telemetryCallProvider.sendFemetrics(),r.debug("service availability stats:",{durationStats:t})}catch(e){r.error("failed to send service availability stats:",e)}await e.clear()}})),Pw=()=>({ORGANIZATION_CONTROLS:{title:"Browser extension unavailable",message:"Your organization has turned off the Grammarly browser extension."},SERVER_UNAVAILABLE:{title:"Grammarly is temporarily unavailable",message:`There is an issue connecting to your organizations security settings. Please try again later\n                or <a href="${qe().support}">contact support</a> if the issue persists.`}});class Rw{constructor(e){this._clientControlsService=e}async fetchConfigOrFallback(){return this.mapClientControlsToBlocklistConfig(await this._clientControlsService.fetchOrFallback())}async getConfigFromStorage(){return this.mapClientControlsToBlocklistConfig(await this._clientControlsService.getFromStorage())}mapClientControlsToBlocklistConfig({clients:e,domains:t,allowedDomains:n,allowedDomainsEnabled:r}){const i=Pw();return{clientConfig:e.reduce(((e,{client:t,blocked:n,reason:r})=>(e[t]={enabled:!n,unsupportedMessage:i[r]},e)),{}),pageConfig:r?{}:t.reduce(((e,{domain:t,subdomains:n,blocked:r,reason:o})=>(e[t]={enabled:!r,matchSubdomains:n,unsupportedMessage:i[o],isEnterpriseConfig:!0},e)),{}),allowedDomainsEnabled:r,allowedPageConfig:n.reduce(((e,{domain:t,subdomains:n,enabled:r})=>(e[t]={enabled:r,matchSubdomains:n,unsupportedMessage:i.ORGANIZATION_CONTROLS,isEnterpriseConfig:!0},e)),{})}}}var Dw;!function(e){function t(e,t){if(!e||!t)return!0;return!t.includes(e)}function n(e,t){var n;return Boolean((null==t?void 0:t.isDesktopIntegrationEnabled)&&(null===(n=e.llamaIntegration)||void 0===n?void 0:n.enabled))}function r(e,n,r,i){var o,s;const a=i?Ct(i):void 0,c=n.isLlamaInstalled&&(null===(o=r.llamaIntegration)||void 0===o?void 0:o.enabled);return t(a,null===(s=r.llamaIntegration)||void 0===s?void 0:s.disabledByDomain)&&(c||"true"===e.showDesktopIntegrationExtensionToggle)}e.isEnabled=n,e.showSettingPopupToggle=r,e.showDisabledByDesktopExtensionGButton=function(e,t,i,o){return r(t,e,i,o)&&n(i,e)},e.isIntegrationEnabled=function(e,r,i){var o;return!(!e||!i)&&(t(r,null===(o=i.llamaIntegration)||void 0===o?void 0:o.disabledByDomain)&&n(i,e))}}(Dw||(Dw={}));function Nw(e,t){var n;const r=e[t],i=null===(n=null==r?void 0:r.enabled)||void 0===n||n;return{...e.common,...r,enabled:i}}const Uw=["connection","extensionSettings","dynamicConfig","connectorSettings","dapi"];function Mw(e){return hu.isStoreChange(e)&&Uw.some((t=>(0,h.fQ)(e.change[t])))}const jw=xa(30);class Fw{constructor(e,t){this._durationMetricStorage=e,this._getPageConfig=t,this._domainState=null,this._syncTimeoutId=void 0}_updateDuration(e,t){if(this._domainState){const t=e-this._domainState.startTimestamp;this._durationMetricStorage.addViewDuration(this._domainState.domain,this._domainState.integrationType,t)}t&&this._startSyncTimeout(),this._domainState=t}_getIntegrationType(e,t,n){return function(e,t,n,r){var i,o,s,a,c,l,u;if(!(null===(i=e.connection)||void 0===i?void 0:i.online))return"disabled_due_to_network_connection";const d=Pw();return t.isEnterpriseConfig&&(null===(o=t.unsupportedMessage)||void 0===o?void 0:o.message)===d.ORGANIZATION_CONTROLS.message?"disabled_by_enterprise":t.enabled||t.servicePage?null===(c=null===(a=null===(s=e.extensionSettings)||void 0===s?void 0:s[n])||void 0===a?void 0:a.enabled)||void 0===c||c?(null===(l=e.connectorSettings)||void 0===l?void 0:l.isConnected)?"integrated_via_connector":e.dynamicConfig&&e.extensionSettings&&Dw.showDisabledByDesktopExtensionGButton(Nw(e.extensionSettings,n),null!==(u=e.dapi)&&void 0!==u?u:{},e.dynamicConfig,r)?"disabled_due_to_desktop_integration":"integrated":"disabled_by_user":"disabled_by_grammarly"}(e,this._getPageConfig(t,n),t,n)}_startSyncTimeout(){clearTimeout(this._syncTimeoutId),this._syncTimeoutId=setTimeout(this._handleSyncTimeout.bind(this),jw)}_handleSyncTimeout(){if(!this._domainState)return;const e=Date.now();this._updateDuration(e,{...this._domainState,startTimestamp:e})}handleStateChange(e){if(!this._domainState)return;const t=Date.now(),n=this._getIntegrationType(e,this._domainState.domain,this._domainState.url);this._domainState.integrationType!==n&&this._updateDuration(t,{...this._domainState,integrationType:n,startTimestamp:t})}handleDomainChange(e,t){var n;const r=Date.now();if(!t)return void this._updateDuration(r,null);const{originalDomain:i,domainAlias:o}=function(e,t){var n,r;const i=kt(new URL(e).hostname),o=null===(n=null==t?void 0:t.domainAliasRules)||void 0===n?void 0:n.find((t=>new RegExp(t.pattern).test(e)));return{originalDomain:i,domainAlias:null!==(r=null==o?void 0:o.alias)&&void 0!==r?r:i}}(t,null===(n=e.dynamicConfig)||void 0===n?void 0:n.serviceAvailabilityMetrics),s=this._getIntegrationType(e,i,t);this._domainState&&this._domainState.domain===o&&this._domainState.integrationType===s?this._domainState={...this._domainState,url:t}:this._updateDuration(r,{url:t,integrationType:s,domain:o,startTimestamp:r})}}const Lw=class extends Kc.Base{constructor(e,t,n){super(),this._url=e,this._ajaxFactory=t,this._fingerprints=n,this._ajax=this._ajaxFactory({requestExtender:Yc.toHeaderAppender(this._fingerprints)}),this._jsonOrEmpty=e=>(0,Ir.zG)(this._ajax.text(e),this._ajax.map((e=>e?(0,kr.G)(JSON.parse(e)):kr.YP)))}static getDefaultUrl(e){return`https://goldengate${e}/settings-registry/v1`}getSetting(e,t,n){const r=gl.get(this._url,`/settings/${n}/resource/${e}/${t}`);return this._jsonOrEmpty(r)}getSettings(e,t,n){const r=gl.post(this._url,`/settings/resource/${e}/${t}`).json(n);return this._jsonOrEmpty(r)}getMergedSettings(e){const t=gl.post(this._url,"/settings/merged").json(e);return this._jsonOrEmpty(t)}saveSetting(e,t,n,r){const i=gl.put(this._url,`/settings/${n}/resource/${e}/${t}`).json(r);return this._ajax.empty(i)}updateSetting(e,t,n,r){const i=gl.patch(this._url,`/settings/${n}/resource/${e}/${t}`).json(r);return this._ajax.empty(i)}deleteSetting(e,t,n){const r=gl.del(this._url,`/settings/${n}/resource/${e}/${t}`);return this._ajax.empty(r)}getBatchSettings(e){const t=gl.post(this._url,"/settings/batch-get").json(e);return this._ajax.json(t)}saveBatchSettings(e,t){const n=gl.put(this._url,`/settings/batch/${e}`).json(t);return this._ajax.json(n)}updateBatchSettings(e,t){const n=gl.patch(this._url,`/settings/batch/${e}`).json(t);return this._ajax.json(n)}deleteBatchSettings(e,t){const n=gl.post(this._url,`/settings/batch-delete/${e}`).json(t);return this._ajax.empty(n)}};Lw.targetTag="settingsRegistry",Lw.ResourceTypeIOType=Ur.G0([Ur.i0("INSTITUTION"),Ur.i0("USER"),Ur.i0("USER_GROUP")]),Lw.SettingValueIOType=Ur.IM(Ur.Z_,Ur._4),Lw.GetSettingsRequestIOType=Ur.dt({settings:Ur.IX(Ur.Z_)}),Lw.GetBatchSettingsRequestIOType=Ur.IX(Ur.dt({resourceType:Lw.ResourceTypeIOType,resourceId:Ur.Z_,settingName:Ur.Z_})),Lw.GetBatchSettingsResponseIOType=Ur.IX(Ur.dt({resourceType:Lw.ResourceTypeIOType,resourceId:Ur.Z_,settingName:Ur.Z_,settingValue:Lw.SettingValueIOType})),Lw.SaveBatchSettingsRequestIOType=Ur.IX(Ur.dt({resourceType:Lw.ResourceTypeIOType,resourceId:Ur.Z_,settingValue:Lw.SettingValueIOType})),Lw.SaveBatchSettingsResponseIOType=Ur.IX(Ur.dt({resourceType:Lw.ResourceTypeIOType,resourceId:Ur.Z_,settingValue:Lw.SettingValueIOType})),Lw.SaveSettingRequestIOType=Lw.SettingValueIOType,Lw.UpdateSettingRequestIOType=Lw.SettingValueIOType,Lw.GetSettingResponseIOType=Lw.SettingValueIOType,Lw.GetSettingsResponseIOType=Ur.IM(Ur.Z_,Lw.SettingValueIOType),Lw.DeleteBatchSettingsRequestIOType=Ur.IX(Ur.dt({type:Lw.ResourceTypeIOType,id:Ur.Z_}));let Gw=Lw;class Bw extends Error{constructor(e){super(e),this.name="SettingSchemaMismatchError"}}class zw{constructor(e,t,n=q.create("Settings Registry Service")){this._log=n,this._api=(0,h.Vo)((()=>new Gw(e,t.ajaxFactory,t.fingerprints)))}async fetchMergedSettings(e,t){const n=await this._api.get().getMergedSettings({settings:e}),r=(0,Ir.zG)(n,kr.fS((()=>({}))));if(t.is(r))return r;throw this._log.error("Schema mismatch in settings registry response ",r),new Bw("Schema mismatch in settings registry response")}async updateSetting(e,t,n,r){await this._api.get().updateSetting(e,t,n,r)}setApiOverride(e){this._api=(0,h.Vo)((()=>e))}}class Vw{constructor(){this._log=q.create("TouchTypistBgServiceImpl"),this._cache=new Map}async fetchFileAsByteArray(e){try{if(this._cache.has(e))return this._cache.get(e);const t=await fetch(e);if(!t.ok)throw new Error(`Failed to fetch file. HTTP status: ${t.status} ${t.statusText}`);const n=await t.arrayBuffer(),r=Array.from(new Uint8Array(n));return this._cache.set(e,r),r}catch(t){throw this._log.error("Error fetching file.",t,{url:e}),t}}}var qw=__webpack_require__(33806);const Hw=/%([0-9A-Fa-f]{2})/g,Ww=/[^\x20-\x7e\xa0-\xff]/g,$w=/\\([\u0000-\u007f])/g,Xw=/;[\x09\x20]*([!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*=[\x09\x20]*("(?:[\x20!\x23-\x5b\x5d-\x7e\x80-\xff]|\\[\x20-\x7e])*"|[!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*/g,Kw=/^([A-Za-z0-9!#$%&+\-^_`{}~]+)'(?:[A-Za-z]{2,3}(?:-[A-Za-z]{3}){0,3}|[A-Za-z]{4,8}|)'((?:%[0-9A-Fa-f]{2}|[A-Za-z0-9!#$&+.^_`|~-])+)$/,Yw=/^([!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*(?:$|;)/;class Zw{constructor(e,t){this.type=e,this.parameters=t}}const Jw=(e,t)=>String.fromCharCode(parseInt(t,16));function Qw(e){const t=Kw.exec(e);if(!t)throw new TypeError("invalid extended field value");const n=t[1].toLowerCase(),r=t[2];let i;switch(n){case"iso-8859-1":o=r.replace(Hw,Jw),i=String(o).replace(Ww,"?");break;case"utf-8":try{i=decodeURIComponent(r)}catch{throw new TypeError("invalid encoded utf-8")}break;default:throw new TypeError("unsupported charset in extended field")}var o;return i}function eS(e){let t=Yw.exec(e);if(!t)throw new TypeError("invalid type format");let n=t[0].length;const r=t[1].toLowerCase();let i;const o=[],s={};let a;for(n=Xw.lastIndex=";"===t[0].slice(-1)?n-1:n;t=Xw.exec(e);){if(t.index!==n)throw new TypeError("invalid parameter format");if(n+=t[0].length,i=t[1].toLowerCase(),a=t[2],-1!==o.indexOf(i))throw new TypeError("invalid duplicate parameter");o.push(i),i.indexOf("*")+1!==i.length?"string"!=typeof s[i]&&('"'===a[0]&&(a=a.slice(1,a.length-1).replace($w,"$1")),s[i]=a):(i=i.slice(0,-1),a=Qw(a),s[i]=a)}if(-1!==n&&n!==e.length)throw new TypeError("invalid parameter format");return new Zw(r,s)}var tS=__webpack_require__(39953),nS=__webpack_require__(73823);function rS(e){return e().then(nS.MH)}(0,Ir.MZ)(Nr.tS);function iS(e,t,n){return(0,Ir.zG)(e,(0,Nr.g_)((r=>{const i=(0,Ir.zG)((0,Nr.t$)(r),Dr.gw(n));return(0,Ir.zG)(t(r),(0,kr.g_)((()=>(0,Nr.t$)(r)),(t=>{const n=(0,Ir.zG)(t,Dr.tS((()=>(0,Nr.F2)(void 0)))),r=Dr.W2().concat(i,n);return(0,Ir.zG)(r,(0,Nr.tS)((()=>e)))})))}),(e=>(0,Nr.F2)(e))))}const oS={URI:"Promise",map:(e,t)=>e.then(t),of:Promise.resolve.bind(Promise),ap:(e,t)=>Promise.all([e,t]).then((([e,t])=>e(t))),chain:(e,t)=>e.then(t),mapLeft:(e,t)=>e.catch((e=>Promise.reject(t(e)))),bimap:(e,t,n)=>e.then(n,(e=>Promise.reject(t(e)))),throwError:e=>Promise.reject(e)};function sS(e){return function(t){return t.catch(e)}}const aS=(0,no.TS)(oS,{ap:(e,t)=>e.then((e=>t.then(e)))}),{ap:cS,apFirst:lS,apSecond:uS,chain:dS,chainFirst:hS,map:pS}=(0,tS.iz)(oS);var gS=__webpack_require__(24332),fS=__webpack_require__(14911),mS=gS._e(kr.$4({concat:(0,fS.oQ)(Rr.Mh).concat,empty:0}))();function bS(e){return function(t){return t.iterNumber>=e?kr.YP:kr.G(0)}}function yS(e){return function(t){return kr.G(e*Math.pow(2,t.iterNumber))}}var _S={iterNumber:0,cumulativeDelay:0,previousDelay:kr.YP};function vS(e,t){var n=e(t);return{iterNumber:t.iterNumber+1,cumulativeDelay:t.cumulativeDelay+kr.fS((function(){return 0}))(n),previousDelay:n}}var wS,SS=mS;function kS(e,t,n){var r=function(i){return(0,tS.zG)(i,t,Dr.tS((function(t){return n(t)?(0,tS.zG)(function(e,t){var n=vS(e,t);return(0,tS.zG)(n.previousDelay,kr.g_((function(){return Dr.oE.of(n)}),(function(e){return Dr.gw(e)(Dr.oE.of(n))})))}(e,i),Dr.tS((function(e){return(0,tS.zG)(e.previousDelay,kr.g_((function(){return Dr.oE.of(t)}),(function(){return r(e)})))}))):Dr.oE.of(t)})))};return r(_S)}function IS(e,t=(()=>!0),n=Ir.Q1){const r=gS.g_(mS)(e);let i;return e=>kS(r,(t=>(0,Ir.zG)(t.previousDelay,kr.g_((()=>e),(r=>(0,Ir.zG)(Nr.dk((()=>n(`retryWithDelay: count ${t.iterNumber}, timeout: ${r}`))),Nr.a1(e),Nr.Vn((e=>{var n;return null!==(n=e)&&"object"==typeof n&&"stack"in n&&void 0!==n.stack&&(1===t.iterNumber?i=e.stack:void 0!==i&&(e.stack=i)),e}))))))),(e=>Tr.nM(e)&&t(e.left)))}(e=>{let t;let n;let r,i;var o;e.create=function(e){return(0,tS.zG)(e,t.fromFetch,n.fromExecutor,ul.UI(i.forPromise))},e.createTE=function(e){return(0,tS.zG)(e,t.fromFetch,n.fromExecutor,ul.UI(i.forTaskEither))},(t||(t={})).fromFetch=e=>(t,n,r)=>i=>{return(0,tS.zG)(Nr.Y3((()=>e(i.url,{body:cl.Fc(i.body),method:i.method,headers:i.headers,keepalive:i.keepalive,mode:t,credentials:n})),s("request failed on client side")),Nr.tS((o=i,a=r,e=>e.ok?Nr.F2(e):(0,tS.zG)((()=>e.text()),Nr.lk,Nr.Vn((t=>a(t,e,o)))))));var o,a},(n||(n={})).fromExecutor=function(e){return ul.VF((({credentials:t="include",errorMapper:n=nl.mapToHTTPError,requestExtender:r=gl.Extender.identity})=>i=>o=>(0,tS.zG)(i,gl.Extender.compose(r,o),Dr.UI((e=>e.build())),Nr.QM,Nr.tS(e("cors",t,n)))))},(e=>{e.forTaskEither=function(e){function t(t,i){return(0,tS.zG)(t,e,n(nl.MimeType.json),r((e=>e.json())),(e=>Dr.UI((0,nS.VS)(e)))(i?e=>(0,tS.zG)(i.decode(e.result),Tr.Pd((e=>new nl.ParseError("json parse error",e)),(t=>({headers:e.headers,result:t})))):Tr.F2))}function i(t){return(0,tS.zG)(t,e,n(nl.MimeType.txt,nl.MimeType.stream,nl.MimeType.vnd,nl.MimeType.pdf,nl.MimeType.json,nl.MimeType.zip),r((e=>e.blob())),Nr.UI((({headers:e,result:t})=>({headers:e,result:{title:eS(e.get("Content-Disposition")||"downloadedDocument").parameters.filename,data:t}}))))}function o(t){return(0,tS.zG)(t,e,n(nl.MimeType.any),r((e=>e.text())))}function s(t){return(0,tS.zG)(t,e,n(nl.MimeType.any),Nr.UI((e=>({headers:e.headers}))))}return{json:function(e,n){return(0,tS.zG)(t(e,n),Nr.UI((({result:e})=>e)))},file:function(e){return(0,tS.zG)(e,i,Nr.UI((({result:e})=>e)))},text:function(e){return(0,tS.zG)(e,o,Nr.UI((({result:e})=>e)))},empty:function(e){return(0,tS.zG)(e,s,Nr.UI(Ir.Q1))},jsonWithHeaders:t,fileWithHeaders:i,textWithHeaders:o,headers:s}};const t=e=>e.headers.get("Content-Type")||e.headers.get("content-type");function n(...e){const n=function(e,t){return n=>Dr.oE.of(n.header(e,t))}("Accept",e.join(","));return r=>(0,tS.zG)(r(n),Nr.tS(function(...e){return Nr.DT((n=>{if(201===n.status||204===n.status)return!0;{const r=t(n)||nl.MimeType.any;return Boolean(r)&&e.some((e=>e===nl.MimeType.any||r.indexOf(e)>-1))}}),(n=>new hl({code:-1,message:"Unexpected Content-Type",status:`Expected: ${e.join()}\nActual: ${t(n)}`})))}(...e)))}function r(e){return Nr.tS((t=>Nr.Y3((()=>e(t).then((e=>({result:e,headers:t.headers})))),s("client parse error"))))}})(r||(r={})),(o=i||(i={})).forTaskEither=ul.VF((e=>({...(0,tS.iz)(Nr.Ij),of:Nr.Ij.of,throwError:Nr.Ij.throwError,ApplicativePar:Nr.Ij,ApplicativeSeq:Nr.dg,orElse:Nr.vx,retry:c,...r.forTaskEither(e)}))),o.forPromise=ul.VF((e=>{const t=r.forTaskEither(e);return{...(0,tS.iz)(oS),of:oS.of,throwError:oS.throwError,ApplicativePar:oS,ApplicativeSeq:aS,orElse:sS,retry:a,json:(0,Ir.ls)(t.json,rS),file:(0,Ir.ls)(t.file,rS),text:(0,Ir.ls)(t.text,rS),empty:(0,Ir.ls)(t.empty,rS),jsonWithHeaders:(0,Ir.ls)(t.jsonWithHeaders,rS),fileWithHeaders:(0,Ir.ls)(t.fileWithHeaders,rS),textWithHeaders:(0,Ir.ls)(t.textWithHeaders,rS),headers:(0,Ir.ls)(t.headers,rS)}}));const s=e=>t=>{if("string"==typeof t)return new dl(e,t);if(t instanceof Error||(null!=(n=t).name||null!=n.code))return dl.fromError(e,t);{let n="";try{n=JSON.stringify(t)}catch(e){n=String(t)}return new dl(e,`unexpected result: ${n}`)}var n};function a(...e){return t=>(0,tS.zG)(Nr.Y3(t,Ir.yR),IS(e),rS)}function c(...e){return t=>(0,tS.zG)(t(),IS(e))}})(wS||(wS={}));const CS=class{constructor(e,t,n){this._url=e,this._ajaxFactory=t,this._fingerprints=n,this._ajax=this._ajaxFactory({errorMapper:nl.mapToHTTPErrorWithoutBody,requestExtender:Yc.toHeaderAppender(this._fingerprints)})}orAnonymous(...e){const t=gl.get(this._url,"user/oranonymous").queryParam("app",this._fingerprints.clientName);return e.forEach((e=>t.queryParam("field",e))),(0,Ir.zG)(this._ajax.json(t),this._ajax.map(GS))}signup(e){const t=gl.post(this._url,"api/signup").json(e);return this._ajax.json(t)}getAuthInfo(e){const t=gl.post(this._url,"/auth/info").json({email:e});return this._ajax.json(t)}login(e,t){const n={email_login:{email:e,password:t}};return this.loginGeneric(n)}loginGeneric(e){const t=gl.post(this._url,"api/login").json(e);return this._ajax.json(t)}captchaVerify(e){const t=gl.post(this._url,"api/login/captcha-verify").json({googleReCaptchaToken:e});return this._ajax.json(t)}logout(){const e=gl.post(this._url,"/logout");return this._ajax.empty(e)}changeName(e){const t=gl.post(this._url,"/user").json({name:e});return this._ajax.empty(t)}changeEmail(e,t){const n=gl.post(this._url,"/user/email/change").json({newEmail:e,password:t});return this._ajaxCheckLegacyOk(n)}confirmEmailChangeRequest(e){const t=gl.get(this._url,"user/email/change/confirm").queryParam("follow",(!1).toString());return e&&t.queryParam("confirm_key",e),this._ajax.empty(t)}migrateAccountToNewEmailLogin(e,t){const n=gl.post(this._url,"account/authentication/migrate-to-email-login").json({loginRequest:e,newPassword:t});return this._ajax.json(n)}cancelEmailChangeRequest(e){const t=gl.post(this._url,"/user/email/cancel").json({email:e});return this._ajaxCheckLegacyOk(t)}changePassword(e,t,n){const r=gl.post(this._url,"/user/password/change").formParam("email",e).formParam("new_pwd",n).formParam("old_pwd",t);return this._ajaxCheckLegacyOk(r)}resetPassword(e){const t=gl.post(this._url,"/user/password/reset").formParam("email",e);return this._ajaxCheckLegacyOk(t)}setPassword(e,t){const n=gl.post(this._url,"/user/password/set").formParam("new_pwd",e);return t&&n.queryParam("reset_key",t),this._ajaxCheckLegacyOk(n)}validatePasswordResetKey(e){const t=gl.get(this._url,"/user/validate_reset_key");return e&&t.queryParam("reset_key",e),this._ajaxCheckLegacyOk(t)}validatePassword(e,t){const n=gl.post(this._url,"/user/validate-password").json({password:e,invisibleCaptchaToken:t});return this._ajax.json(n)}getUser(e,t){const n=gl.get(this._url,"user").queryParam("app",this._fingerprints.clientName);return null==e||e.forEach((e=>n.queryParam("field",e))),t&&n.queryParams(t),(0,Ir.zG)(this._ajax.json(n),this._ajax.map(GS))}isEligibleForCoda(){const e=gl.get(this._url,"user/bridge/check-eligibility/coda");return(0,Ir.zG)(this._ajax.json(e),this._ajax.map((e=>e.isEligible)))}addGroup(e){const t=gl.post(this._url,"user/group").formParam("group",e);return this._ajaxCheckLegacyOk(t)}setUserData(e){const t=gl.post(this._url,"user/userdata").json(e);return this._ajaxCheckLegacyOk(t)}getAccountSettings(){const e=gl.get(this._url,"/account/settings");return(0,Ir.zG)(this._ajax.json(e),this._ajax.map((({trusted:e,modes:t,enabledAt:n})=>({trusted:e,modes:new Set(t),enabledAt:(0,Ir.zG)(n,kr.ij,kr.UI((e=>new Date(e))))}))))}startAdminEmailChange(e){const t=gl.post(this._url,"user/admin_change/email").json({newEmail:e});return this._ajaxCheckLegacyOk(t)}approveAdminEmailChangeRequest(e){const t=gl.post(this._url,"user/admin_email/approve_change");return t.json(e?{confirmKey:e}:void 0),this._ajax.json(t)}sendConfirmationEmail(e){const t=gl.post(this._url,"user/email/confirmation/send").json({source:e});return this._ajax.empty(t)}confirm(e){const t=gl.post(this._url,"user/email/confirmation/confirm");return t.json(e?{confirmKey:e}:void 0),this._ajax.empty(t)}sendVerificationEmail(e){const t=gl.post(this._url,"user/email/verification/send").json({source:e});return this._ajax.empty(t)}verifySignupEmailVerificationByLink(){const e=gl.post(this._url,"user/email/verification/signup-verify-link").json();return this._ajax.json(e)}verifyVerificationEmail(e){const t=gl.post(this._url,"user/email/verification/verify").json({code:e});return this._ajax.empty(t)}sendEmailVerificationByLink(e){const t=gl.post(this._url,"user/email/verification/send-link").json({source:e});return this._ajax.empty(t)}verifyEmailVerificationByLink(e){const t=gl.post(this._url,"/user/email/verification/verify-link").json();return e&&t.cookie("confirm_key",e),this._ajax.empty(t)}sendEmailChangeCode(e){const t=gl.post(this._url,"account/email/change/send-email-change-code").json({newEmail:e});return this._ajax.empty(t)}verifyEmailChangeCode(e,t,n){const r=gl.post(this._url,"account/email/change/confirm-email-change").json({newEmail:e,password:t,code:n});return this._ajax.json(r)}getUserEmailByConfirmKey(e){const t=gl.post(this._url,"user/confirm_key_email");return t.json(e?{confirmKey:e}:void 0),(0,Ir.zG)(this._ajax.json(t),this._ajax.map((e=>e.email)))}unlinkSocial(e){const t=gl.del(this._url,`user/unlinkSocial/${e}`);return this._ajax.empty(t)}verifyEmail(e){const t=gl.post(this._url,"signup/verify/email").formParam("email",e);return this._ajax.json(t)}oAuthAuthorizationRequest(e,t,n){const r=gl.post(this._url,"api/unified-login/code/generate").json({client_id:e,code_challenge:t,action:n});return this._ajax.json(r)}oAuthCodeExchangeRequest(e,t,n){const r=gl.post(this._url,"api/unified-login/code/exchange").json({client_id:e,code:t,code_verifier:n});return this._ajax.json(r)}getBackupCodes(){const e=gl.get(this._url,"account/mfa/backup");return this._ajax.json(e)}generateNewCodes(){const e=gl.post(this._url,"account/mfa/setup/backup");return this._ajax.json(e)}startSmsSetup(e,t){const n=gl.post(this._url,"account/mfa/setup/sms").json({deviceKey:e,countryCode:t});return(0,Ir.zG)(this._ajax.json(n),this._ajax.map((({lastDigits:e})=>e)))}startTotpSetup(){const e=gl.post(this._url,"account/mfa/setup/totp");return this._ajax.json(e)}verifyMfaCode(e,t="sms"){const n=gl.post(this._url,"account/mfa/setup/complete").json({code:e,mode:t});return(0,Ir.zG)(this._ajax.json(n),this._ajax.map((e=>e||[])))}removeMode(e){const t=gl.post(this._url,`account/mfa/remove/${e}`);return this._ajax.empty(t)}revokeAll(){const e=gl.post(this._url,"account/mfa/revokeAll");return this._ajax.empty(e)}turnOffMfa(){const e=gl.post(this._url,"account/mfa/removeAll");return this._ajax.empty(e)}setDataControl(e){const t=gl.post(this._url,"account/data-control").json({enabled:e});return this._ajax.empty(t)}_ajaxCheckLegacyOk(e){return(0,Ir.zG)(this._ajax.json(e),this._ajax.filterOrElse((e=>e.ok),(()=>new LS("response not ok"))),this._ajax.map(Ir.Q1))}deleteAccount(e){const t=gl.post(this._url,"account/delete").json(e);return this._ajax.empty(t)}getSecurityOverview(){const e=gl.get(this._url,"account/overview");return this._ajax.json(e)}getDeviceSessions(e,t){const n=gl.get(this._url,"account/relations").queryParam("limit",e.toString()).queryParam("offset",t.toString());return this._ajax.json(n)}getSecurityActivity(e,t){const n=gl.get(this._url,"account/activity").queryParam("limit",e.toString()).queryParam("offset",t.toString());return this._ajax.json(n)}revokeDeviceSession(e){const t=gl.del(this._url,"account/relations").pathParam(e);return this._ajax.empty(t)}revokeAllDeviceSessions(){const e=gl.del(this._url,"account/relations");return this._ajax.empty(e)}getAuthenticationOptions(){const e=gl.post(this._url,"api/authentication/options").json();return this._ajax.json(e)}removeAccounts(e){const t=gl.put(this._url,"api/authentication/options/remove-accounts").json({emails:e});return this._ajax.empty(t)}getSocialProof(){const e=gl.get(this._url,"/user/social-proof");return this._ajax.json(e)}getDataRegulation(){const e=gl.get(this._url,"/user/location/data-regulation");return this._ajax.json(e)}resendSocialVerificationCode(e){const t=gl.post(this._url,"user/social/verification/send").json({token:e});return this._ajax.empty(t)}};CS.targetTag="auth";let ES=CS;var AS,xS,TS,OS,PS,RS,DS,NS,US,MS,jS,FS;xS=AS||(AS={}),(TS=xS.PrimaryLanguage||(xS.PrimaryLanguage={})).Afrikaans="Afrikaans",TS.Akan="Akan",TS.AlgerianSpokenArabic="Algerian Spoken Arabic",TS.Amharic="Amharic",TS.Assamese="Assamese",TS.Awadhi="Awadhi",TS.Bamanankan="Bamanankan",TS.Baoule="Baoul",TS.Bavarian="Bavarian",TS.Bemba="Bemba",TS.Bengali="Bengali",TS.Betawi="Betawi",TS.Bhojpuri="Bhojpuri",TS.BoranaArsiGujiOromo="Borana-Arsi-Guji Oromo",TS.Bugis="Bugis",TS.Bulgarian="Bulgarian",TS.Bundeli="Bundeli",TS.Burmese="Burmese",TS.CameroonPidgin="Cameroon Pidgin",TS.Catalan="Catalan",TS.Cebuano="Cebuano",TS.CentralAtlasTamazight="Central Atlas Tamazight",TS.CentralKurdish="Central Kurdish",TS.CentralPashto="Central Pashto",TS.Chhattisgarhi="Chhattisgarhi",TS.Chichewa="Chichewa",TS.Chittagonian="Chittagonian",TS.CongoSwahili="Congo Swahili",TS.Croatian="Croatian",TS.Czech="Czech",TS.Danish="Danish",TS.Dari="Dari",TS.Deccan="Deccan",TS.Dholuo="Dholuo",TS.Dutch="Dutch",TS.EasternOromo="Eastern Oromo",TS.EasternPunjabi="Eastern Punjabi",TS.EgyptianSpokenArabic="Egyptian Spoken Arabic",TS.English="English",TS["we"]="w",TS.Filipino="Filipino",TS.Finnish="Finnish",TS.French="French",TS.GanChinese="Gan Chinese",TS.Ganda="Ganda",TS.GhanaianPidginEnglish="Ghanaian Pidgin English",TS.Gikuyu="Gikuyu",TS.Greek="Greek",TS.Gujarati="Gujarati",TS.GulfSpokenArabic="Gulf Spoken Arabic",TS.HadramiSpokenArabic="Hadrami Spoken Arabic",TS.HaitianCreole="Haitian Creole",TS.HakkaChinese="Hakka Chinese",TS.Haryanvi="Haryanvi",TS.Hassaniyya="Hassaniyya",TS.Hausa="Hausa",TS.Hebrew="Hebrew",TS.HijaziSpokenArabic="Hijazi Spoken Arabic",TS.Hiligaynon="Hiligaynon",TS.Hindi="Hindi",TS.HuizhouChinese="Huizhou Chinese",TS.Hungarian="Hungarian",TS.Ibibio="Ibibio",TS.Igbo="Igbo",TS.Ilocano="Ilocano",TS.IndianSignLanguage="Indian Sign Language",TS.Indonesian="Indonesian",TS.IranianPersian="Iranian Persian",TS.Italian="Italian",TS.Japanese="Japanese",TS.Javanese="Javanese",TS.JinyuChinese="Jinyu Chinese",TS.Jula="Jula",TS.Kabyle="Kabyle",TS.Kamba="Kamba",TS.Kanauji="Kanauji",TS.Kannada="Kannada",TS.Kashmiri="Kashmiri",TS.Kazakh="Kazakh",TS.Khmer="Khmer",TS.Kinyarwanda="Kinyarwanda",TS.Kituba="Kituba",TS.Koongo="Koongo",TS.Korean="Korean",TS.Krio="Krio",TS.Kyrgyz="Kyrgyz",TS.Lambadi="Lambadi",TS.Lao="Lao",TS.LibyanSpokenArabic="Libyan Spoken Arabic",TS.Lombard="Lombard",TS.LubaKasai="Luba-Kasai",TS.Madura="Madura",TS.Magahi="Magahi",TS.Maithili="Maithili",TS.Malay="Malay",TS.Malayalam="Malayalam",TS.Malvi="Malvi",TS.MandarinChinese="Mandarin Chinese",TS.Marathi="Marathi",TS.Marwari="Marwari",TS.MesopotamianSpokenArabic="Mesopotamian Spoken Arabic",TS.Mewari="Mewari",TS.MinBeiChinese="Min Bei Chinese",TS.MinDongChinese="Min Dong Chinese",TS.MinNanChinese="Min Nan Chinese",TS.Minangkabau="Minangkabau",TS["More"]="Mor",TS.MoroccanSpokenArabic="Moroccan Spoken Arabic",TS.NajdiSpokenArabic="Najdi Spoken Arabic",TS.NapoletanoCalabrese="Napoletano-Calabrese",TS.Nepali="Nepali",TS.NigerianFulfulde="Nigerian Fulfulde",TS.NigerianPidgin="Nigerian Pidgin",TS.NorthAzerbaijani="North Azerbaijani",TS.NorthLevantineSpokenArabic="North Levantine Spoken Arabic",TS.NorthMesopotamianSpokenArabic="North Mesopotamian Spoken Arabic",TS.NortheasternThai="Northeastern Thai",TS.NorthernKurdish="Northern Kurdish",TS.NorthernPashto="Northern Pashto",TS.NorthernSotho="Northern Sotho",TS.NorthernThai="Northern Thai",TS.NorthernUzbek="Northern Uzbek",TS.Norwegian="Norwegian",TS.Odia="Odia",TS.ParaguayanGuarani="Paraguayan Guaran",TS.PlateauMalagasy="Plateau Malagasy",TS.Polish="Polish",TS.Portuguese="Portuguese",TS.Pulaar="Pulaar",TS.Pular="Pular",TS.Rangpuri="Rangpuri",TS.Romanian="Romanian",TS.Rundi="Rundi",TS.Russian="Russian",TS.SaidiSpokenArabic="Saidi Spoken Arabic",TS.Sadri="Sadri",TS.SanaaniSpokenArabic="Sanaani Spoken Arabic",TS.Sango="Sango",TS.Sanskrit="Sanskrit",TS.Santhali="Santhali",TS.Saraiki="Saraiki",TS.Serbian="Serbian",TS.Setswana="Setswana",TS.Shona="Shona",TS.Sicilian="Sicilian",TS.Sindhi="Sindhi",TS.Sinhala="Sinhala",TS.Slovak="Slovak",TS.Somali="Somali",TS.SouthAzerbaijani="South Azerbaijani",TS.SouthLevantineSpokenArabic="South Levantine Spoken Arabic",TS.SouthernBalochi="Southern Balochi",TS.SouthernPashto="Southern Pashto",TS.SouthernSotho="Southern Sotho",TS.SouthernThai="Southern Thai",TS.SouthernUzbek="Southern Uzbek",TS.Spanish="Spanish",TS.StandardArabic="Standard Arabic",TS.StandardGerman="Standard German",TS.SudaneseSpokenArabic="Sudanese Spoken Arabic",TS.Sukuma="Sukuma",TS.Sunda="Sunda",TS.Swahili="Swahili",TS.Swati="Swati",TS.Swedish="Swedish",TS.SwissGerman="Swiss German",TS.Sylheti="Sylheti",TS.TaizziAdeniSpokenArabic="Taizzi-Adeni Spoken Arabic",TS.Tachelhit="Tachelhit",TS.Tagalog="Tagalog",TS.Tajik="Tajik",TS.Tamil="Tamil",TS.Tarifit="Tarifit",TS.Tatar="Tatar",TS.Telugu="Telugu",TS.Thai="Thai",TS.Tigrigna="Tigrigna",TS.Tiv="Tiv",TS.TokPisin="Tok Pisin",TS.Tsonga="Tsonga",TS.TunisianSpokenArabic="Tunisian Spoken Arabic",TS.Turkish="Turkish",TS.Turkmen="Turkmen",TS.Ukrainian="Ukrainian",TS.Umbundu="Umbundu",TS.Urdu="Urdu",TS.Uyghur="Uyghur",TS.VarhadiNagpuri="Varhadi-Nagpuri",TS.Venetian="Venetian",TS.Vietnamese="Vietnamese",TS.WestCentralOromo="West Central Oromo",TS.WesternPunjabi="Western Punjabi",TS.Wolof="Wolof",TS.WuChinese="Wu Chinese",TS.Xhosa="Xhosa",TS.XiangChinese="Xiang Chinese",TS.YerwaKanuri="Yerwa Kanuri",TS.Yoruba="Yoruba",TS.YueChinese="Yue Chinese",TS.Zulu="Zulu",TS.Other="Other",OS=ES||(ES={}),(PS=OS.ClientType||(OS.ClientType={})).webChrome="webeditor_chrome",PS.webFirefox="webeditor_firefox",PS.webSafari="webeditor_safari",PS.webIE="webeditor_ie",PS.webEdge="webeditor_edge",PS.desktop="desktopeditor",PS.webTest="webeditor_test",PS.unknown="webeditor_unknown",PS.crossPlatformOfficeAddin="crossPlatformOfficeAddin",PS.ipadEditor="mobile-ios",(RS=OS.PasswordValidationReason||(OS.PasswordValidationReason={})).PasswordTooShort="PasswordTooShort",RS.PasswordTooShortUnifiedValidationFalse="PasswordTooShortUnifiedValidationFalse",RS.PasswordTooLong="PasswordTooLong",RS.PasswordEqualsEmail="PasswordEqualsEmail",RS.PasswordEqualsName="PasswordEqualsName",RS.PasswordEqualsNameFromEmail="PasswordEqualsNameFromEmail",RS.PasswordInCustomFields="PasswordInCustomFields",RS.PasswordLeaked="PasswordLeaked",RS.PasswordReused="PasswordReused",RS.ValidationPassed="ValidationPassed";class LS extends ll.sH{constructor(){super(...arguments),this.name="AuthApiError"}}function GS(e){const{institutionInfo:t,...n}=e;return void 0!==t?{...n,institutionInfo:BS(t)}:e}function BS(e){const{voxInfo:t,voxEnabled:n,...r}=e;return{...r,voxEnabled:n,vox:(0,Ir.zG)(kr.ij(t),kr.tS((e=>n&&e.styleGuideEnabled?kr.G({companyName:e.companyName?e.companyName:"Company",logoUrl:kr.ij(e.logoUrl)}):kr.YP))),trueUpSchedule:kr.YP}}NS=DS||(DS={}),(US=NS.ClientId||(NS.ClientId={})).BrowserExtension="browserExtension",US.MobileIOS="mobile-ios",US.MobileAndroid="mobile-android",US.AndroidSDK="androidSDK",US.SafariExtension="extension-safari",US.OfficeAddin="office-addin",US.DesktopEditor="desktopeditor",US.DesktopEditorOSX="desktopEditorOsx",US.DesktopEditorWindows="desktopEditorWindows",US.WindowsExtension="windowsExtension",US.MacExtension="macExtension",US.MacSensei="macSensei",US.ExtensionVSCode="extensionVSCode",US.ExtensionVSCodeInsiders="extensionVSCodeInsiders",US.Funnel="funnel",US.DeveloperHub="developerHub",US.DemoEditor="demoEditor",US.Identity="identity",US.AndroidAlpaca="android-alpaca",US.Skills="skills",US.Demo="demo-client",jS=MS||(MS={}),(FS=jS.Mode||(jS.Mode={})).phone="sms",FS.totp="totp",FS.backup="backup",FS.email="email",(e=>{let t;let n;var r;let i;let o;let s;let a;let c;var l,u;(t=e.InstitutionSubscription||(e.InstitutionSubscription={})).codec=Ur.dt({expirationDate:Ur.Z_,isOnTrial:Ur.O7,volume:Ur.pk,migrationState:Ur.G0([Ur.i0("NONE"),Ur.i0("BILLING_FLOW_MIGRATION_STARTED"),Ur.i0("BILLING_FLOW_MIGRATION_ENDED")])},"InstitutionSubscription"),(r=n=e.PartialInstitutionInfo||(e.PartialInstitutionInfo={})).organizationTypeCodec=Ur.G0([Ur.i0("BUSINESS"),Ur.i0("EDU"),Ur.i0("GOV"),Ur.i0("K12"),Ur.i0("NGO")],"OrganizationType"),r.institutionUserStateCodec=Ur.G0([Ur.i0("Success"),Ur.i0("Removed"),Ur.i0("Invited")],"InstitutionUserState"),r.onboardingTypeCodec=Ur.G0([Ur.i0("SELF_SERVE"),Ur.i0("MANAGED")],"OnboardingType"),r.codec=Ur.dt({id:Ur.pk,name:Ur.Z_,licenseDiscountinued:Ur.O7,domainValidation:Ur.O7,admin:Ur.O7,business:Ur.O7,organizationType:r.organizationTypeCodec,onboardingType:r.onboardingTypeCodec,expired:Ur.O7,ssoEnabled:Ur.O7,ssoActivated:Ur.O7,voxEnabled:Ur.O7,subscriptionInfo:t.codec},"PartialInstitutionInfo"),(i=e.TrueUpSchedule||(e.TrueUpSchedule={})).codec=Ur.dt({isTrueUpEligible:Ur.O7,overageSeats:Ur.pk,nextTrueUpBillingDate:fl.Dy.option(fl.Dy.date())},"TrueUpSchedule"),(o=e.WithTrueUp||(e.WithTrueUp={})).codec=Ur.dt({trueUpSchedule:fl.Dy.option(i.codec)},"WithTrueUp"),(s=e.VoxInfo||(e.VoxInfo={})).codec=Ur.dt({companyName:Ur.Z_,logoUrl:fl.Dy.option(Ur.Z_)},"VoxInfo"),(a=e.WithVox||(e.WithVox={})).codec=Ur.dt({vox:fl.Dy.option(s.codec)},"WithVox"),(e.InstitutionInfo||(e.InstitutionInfo={})).codec=Ur.jV([n.codec,a.codec,o.codec],"InstitutionInfo"),(e.EditorFeatures||(e.EditorFeatures={})).codec=Ur.dt({fullCards:Ur.O7,plagiarismDisabled:Ur.O7,proofit:Ur.O7,quickReplacement:Ur.O7,scoreDisabled:Ur.O7},"EditorFeatures"),e.emptyInstitutionInfo={id:-1,name:"",licenseDiscountinued:!1,domainValidation:!1,admin:!1,business:!1,expired:!1},e.emptyUserEditorFeatures={fullCards:!1,plagiarismDisabled:!1,proofit:!1,quickReplacement:!1,scoreDisabled:!1},(l=c=e.InstitutionRoleName||(e.InstitutionRoleName={})).Admin="OWNER",l.AccountManager="CONTRIBUTOR",l.InstitutionUser="INSTITUTION_USER",(e.UserGroupRoleName||(e.UserGroupRoleName={})).GroupManager="GROUP_CONTRIBUTOR",(u=e.ResourceType||(e.ResourceType={})).Institution="INSTITUTION",u.UserGroup="USER_GROUP";const d=Ur.dt({externalId:Ur.Z_},"GenericRole");let h;let p;(h||(h={})).codec=Ur.jV([d,Ur.dt({role:fl.Dy.createStringEnum(c,"InstitutionRoleName"),type:Ur.i0("INSTITUTION")})],"InstitutionRole"),(p||(p={})).codec=Ur.jV([d,Ur.dt({role:fl.Dy.createStringEnum(e.UserGroupRoleName,"UserGroupRoleName"),type:Ur.i0("USER_GROUP")})],"UserGroupRole"),(e.Role||(e.Role={})).codec=Ur.G0([h.codec,p.codec],"Role")})(AS||(AS={}));var zS,VS,qS,HS=__webpack_require__(2953);(e=>{e.parse=function(e){return new t(String(e))};class t{constructor(e){this.value=Tr.t$(new Error("Version is unset")),this.value=(0,Ir.zG)(Tr.Y3((()=>new HS.SemVer(e.replace(/_/g,"-"))),Tr.KC),Tr.vx((()=>Tr.ij(new Error(`Failed to parse version from ${e}`))((0,HS.coerce)(e)))))}gte(e){return this._test(HS.gte,e)}gt(e){return this._test(HS.gt,e)}lt(e){return this._test(HS.lt,e)}lte(e){return this._test(HS.lte,e)}eq(e){return this._test(HS.eq,e)}toString(){return(0,Ir.zG)(this.value,Tr.UI((e=>e.build.length>0?`${e.toString()}+${e.build.join("-")}`:e.toString())),Tr.fS((()=>"unknown")))}_test(t,n){const r=(0,Ir.zG)(e.parse(n.toString()).value,Tr.fS((()=>null)));return(0,ll.kG)(null!==r,`invalid version provided: ${n}`),(0,Ir.zG)(this.value,Tr.UI((e=>t(e,r))),Tr.fS((()=>!1)))}}})(zS||(zS={})),function(e){e.anonymous="anonymous",e.registered="registered",e.premium="premium",e.business="business",e.edu="edu",e.ngo="ngo",e.k12="k12",e.gov="gov"}(VS||(VS={})),function(e){function t(e){return!e.anonymous&&e.premium}function n(e){var t;return["BUSINESS","NGO","GOV"].includes((null===(t=e.institutionInfo)||void 0===t?void 0:t.organizationType)||"")}function r(e){return!!e.institutionInfo}function i(e){var t;return"EDU"===(null===(t=e.institutionInfo)||void 0===t?void 0:t.organizationType)}function o(e){var t;return"K12"===(null===(t=e.institutionInfo)||void 0===t?void 0:t.organizationType)}function s(e){var t;return"NGO"===(null===(t=e.institutionInfo)||void 0===t?void 0:t.organizationType)}function a(e){var t;return"GOV"===(null===(t=e.institutionInfo)||void 0===t?void 0:t.organizationType)}e.getType=function(e){return r(e)?s(e)?VS.ngo:i(e)?VS.edu:a(e)?VS.gov:o(e)?VS.k12:VS.business:e.premium?VS.premium:e.anonymous?VS.anonymous:VS.registered},e.isFree=function(e){return!e.anonymous&&!e.premium},e.isPremium=t,e.isFreeTrial=function(e){return!!(t(e)&&e.customFields&&e.customFields.frontend_premiumTrialEndDate)&&new Date<new Date(e.customFields.frontend_premiumTrialEndDate)},e.getUserRole=function(e,t){var n;return null===(n=e.roles)||void 0===n?void 0:n.find((e=>e.type===t))},e.isEdcBlocked=function(e){return!!e.edc&&!e.edc.compliant},e.isDocsDisabled=function(e){var t,n;return null!==(n=null===(t=e.editorFeatures)||void 0===t?void 0:t.docsDisabled)&&void 0!==n&&n},e.hasRole=function(e){return!!e.customFields&&(void 0!==e.customFields.frontend_role&&""!==e.customFields.frontend_role)},e.hasSoundFluentGoals=function(e){return!!e.customFields&&(void 0!==e.customFields.frontend_soundFluent&&""!==e.customFields.frontend_soundFluent)},e.hasPrimaryLanguage=function(e){return!!e.customFields&&(void 0!==e.customFields.frontend_primaryLanguage&&""!==e.customFields.frontend_primaryLanguage)},e.isBusinessAdmin=function(e){var t;return Boolean(n(e)&&(null===(t=null==e?void 0:e.institutionInfo)||void 0===t?void 0:t.admin))},e.shouldUserSeeLegacyGBBranding=function(e,t){return n(e)&&["BUSINESS","ENTERPRISE"].includes(t)},e.doesUserBelongToBusinessInstitution=n,e.doesUserBelongToInstitution=r,e.doesUserBelongToEDUInstitution=i,e.doesUserBelongToK12Institution=o,e.doesUserBelongToNGOInstitution=s,e.doesUserBelongToGOVInstitution=a,e.isClaimed=function(e){return e.groups.includes("claimed-invitation")};e.isGrammarlyEmployee=function(e){var t;return e.email.endsWith("@grammarly.com")&&624392205===(null===(t=e.institutionInfo)||void 0===t?void 0:t.id)},e.isTestUser=function(e){return e.email.endsWith("@bh.exacttarget.com")},e.isConsumerUser=function(e){return!r(e)},e.defaultUser={anonymous:!0,groups:[],id:"",premium:!1,isTest:!1,settings:{},subscriptionFree:!1,type:"anonymous",email:"",registrationDate:(new Date).toString(),firstName:"",lastName:""}}(qS||(qS={}));class WS{constructor(e,t,n=ou.C8.Logging.getLogger("OAuth.v2",ou.zW.i.WARN),r=Kt(),i=Nc){this._getUser=e,this._authSuccessTracker=t,this._logger=n,this._telemetry=r,this._gnar=i,this._isInternalExchangeReason=e=>["MissingRefreshToken","InvalidRefreshToken"].includes(e)}trackTokenRefreshSuccess(){this._logger.debug("TOKEN_REFRESH_SUCCESS"),this._gnar.authzGrauthRefresh(!this._authSuccessTracker.getInitialRefreshDone(),"success",void 0,200)}trackTokenRefreshFailed(e){this._logger.error("TOKEN_REFRESH_FAILED",e),this._gnar.authzGrauthRefresh(!this._authSuccessTracker.getInitialRefreshDone(),"fail",e.name,e instanceof qn?e.status:-1)}trackInvalidRefreshToken(e){this._logger.error("INVALID_REFRESH_TOKEN",e),this._gnar.authzGrauthRefresh(!this._authSuccessTracker.getInitialRefreshDone(),"fail",e.name,e instanceof qn?e.status:-1)}trackTokenExchangeSuccess(e){this._logger.debug("TOKEN_EXCHANGE_SUCCESS",{reason:e}),this._authSuccessTracker.registerAuthSuccess(),this._gnar.authzGrauthExchange(!this._isInternalExchangeReason(e),"success",void 0,200,!0)}trackTokenExchangeFailed(e,t){this._logger.warn("TOKEN_EXCHANGE_FAILED",e,{reason:t}),this._telemetry.sendFemetricsRate("authClientMigration.tokenExchangeFailed",{sdkVersion:"v2",implicit:!1,reason:t,errorName:e.name,errorMessage:e.message}),this._gnar.authzGrauthExchange(!this._isInternalExchangeReason(t),"fail",e.name,e instanceof qn?e.status:-1,!0)}trackTokenExchangeImplicitSuccess(e){this._logger.debug("TOKEN_EXCHANGE_IMPLICIT_SUCCESS",{reason:e}),this._gnar.authzGrauthExchange(!this._isInternalExchangeReason(e),"success",void 0,200,!1)}trackTokenExchangeImplicitFailed(e,t){this._logger.error("TOKEN_EXCHANGE_IMPLICIT_FAILED",e,{reason:t}),this._telemetry.sendFemetricsRate("authClientMigration.tokenExchangeFailed",{sdkVersion:"v2",implicit:!0,reason:t,errorName:e.name,errorMessage:e.message}),this._gnar.authzGrauthExchange(!this._isInternalExchangeReason(t),"fail",e.name,e instanceof qn?e.status:-1,!1)}trackTokenAnonymousFetchSuccess(){this._logger.debug("TOKEN_ANONYMOUS_FETCH_SUCCESS")}trackTokenAnonymousFetchFailed(e){this._logger.error("TOKEN_ANONYMOUS_FETCH_FAILED",{error:e})}trackTokenRevokeSuccess(){this._logger.debug("TOKEN_REVOKE_SUCCESS")}trackTokenRevokeFailed(e){this._logger.error("TOKEN_REVOKE_FAILED",e)}trackLogoutSuccess(e){this._logger.debug("LOGOUT_SUCCESS",{reason:e}),this._authSuccessTracker.setInitialRefreshDone(!1)}trackTokenServiceDegraded(e){this._logger.warn("TOKEN_SERVICE_DEGRATED",{reason:e})}trackUnauthenticatedError(e,t){this._logger.warn("UNAUTHENTICATED_ERROR",e,{reason:t})}trackUnintentionalLogoutError(e){const t=this._getUser(),n=qS.getType(t),r=this._authSuccessTracker.getLastAuthSuccessTimestamp();this._gnar.authUnauthorizedState(qS.getType(t),null!=r?r:void 0),this._telemetry.sendFemetricsRate("authz_failure_state",{lastSuccess:this._getLastSuccessBucket(r)}),this._logger.error("UNINTENTIONAL_LOGOUT_ERROR",e,{userType:n,lastSuccess:r})}trackFetchRequestError(e){this._logger.error("FETCH_REQUEST_ERROR",e)}trackHttpRequestSuccess(e,t){this._logger.debug("HTTP_REQUEST_SUCCESS",{url:e,method:t})}trackHttpRequestError(e){this._logger.warn("HTTP_REQUEST_ERROR",e)}trackHttpJsonParseError(e){this._logger.error("HTTP_JSON_PARSE_ERROR",e)}_getLastSuccessBucket(e){if(null===e)return null;const t=Date.now()-e;return t<Ta(5)?"<5m":t<Ta(30)?"<30m":t<Oa(1)?"<1h":t<Oa(2)?"<2h":t<Oa(4)?"<4h":t<Oa(8)?"<8h":t<Aa(1)?"<1d":t<Aa(30)?"<30d":t<Aa(60)?"<60d":">60d"}trackAuthorizationCodeExchangeSuccess(){this._gnar.authzAuthorizationCodeExchange("success",void 0,200),this._logger.debug("AUTHORIZATION_CODE_EXCHANGE_SUCCESS"),this._telemetry.sendFemetricsRate("authClientMigration.authorizationCodeExchangeSuccess",{httpStatusCode:200})}trackAuthorizationCodeExchangeFailed(e){this._logger.error("AUTHORIZATION_CODE_EXCHANGE_FAILED",e),this._telemetry.sendFemetricsRate("authClientMigration.authorizationCodeExchangeFailed",{errorName:e.name,errorMessage:e.message,httpStatusCode:e instanceof qn?e.status:-1}),this._gnar.authzAuthorizationCodeExchange("fail",e.name,e instanceof qn?e.status:-1)}}const $S="gr-oauth-key";class XS{constructor(e,t,n,r=Kt(),i){this._state=e,this._getOAuthClientImplicitExchange=t,this._getOAuthClientExplicitExchange=n,this._telemetry=r,this._experimentClient=i,this._logger=ou.C8.Logging.getLogger("CompositeTransitionalOAuthClient")}async getAccessTokenOrRenew(){var e,t;try{const n=await this._getOAuthClient();if((null===(e=this._experimentClient)||void 0===e?void 0:e.isGateEnabled(De.OAuthCheckTokenServiceState))&&await this._isTokenServiceDegraded()&&(this._logger.warn("Tokens service is degraded"),this._telemetry.sendFemetricsRate("authClientMigration.tokenServiceDegraded"),null===(t=this._experimentClient)||void 0===t?void 0:t.isGateEnabled(De.OAuthTokenServiceStateFallback)))return this._logger.warn("Proceeding without access token"),this._telemetry.sendFemetricsRate("authClientMigration.tokenServiceDegraded"),"";const r=await n.getAccessTokenOrRenew();return this._telemetry.sendFemetricsRate("authClientMigration.getAccessTokenOrRenewSuccess"),r}catch(e){throw this._logger.error(e),this._telemetry.sendFemetricsRate("authClientMigration.getAccessTokenOrRenewError"),e}}async loginWithTokenExchangeOrAnonymous(e){try{const t=await this._getOAuthClient(),n=await t.loginWithTokenExchangeOrAnonymous(e);return this._telemetry.sendFemetricsRate("authClientMigration.loginWithTokenExchangeOrAnonymousSuccess"),n}catch(e){throw this._logger.error(e),this._telemetry.sendFemetricsRate("authClientMigration.loginWithTokenExchangeOrAnonymousError"),e}}async logout(e){try{const t=await this._getOAuthClient();await t.logout(e),this._telemetry.sendFemetricsRate("authClientMigration.logoutSuccess")}catch(e){throw this._logger.error(e),this._telemetry.sendFemetricsRate("authClientMigration.logoutError"),e}}async getTokensServiceState(){return(await this._getOAuthClient()).getTokensServiceState()}async createAuthorizationRequestUrl(e,t,n){return(await this._getOAuthClient()).createAuthorizationRequestUrl(e,t,n)}async handleRedirect(e,t){return(await this._getOAuthClient()).handleRedirect(e,t)}async _getOAuthClient(){const e=await this._state.getTokenExchangeMethod();return e!==this._currentTokenExchangeMethod&&(this._currentTokenExchangeMethod=e,this._currentOAuthClient="explicit"===e?this._getOAuthClientExplicitExchange():this._getOAuthClientImplicitExchange(),this._logger.info("Initialized OAuth client",{tokenExchangeMethod:e}),this._telemetry.sendFemetricsRate("authClientMigration.clientInitialized")),this._currentOAuthClient}async _isTokenServiceDegraded(){const e=await this.getTokensServiceState(),t=!!e.tokens_service_last_degraded_ts&&(new Date).getTime()-e.tokens_service_last_degraded_ts<18e5;return t&&this._logger.warn(`Tokens service is degraded, proceeding without access token: ${e.tokens_service_last_degraded_reason}`),t}}const KS={...{VBarsMultilingual:new ge.KS("multilingual",["control","test"]),VBarsMultilingualV2:new ge.KS("extension_vbars_multilingual",["control","without_onboarding","with_onboarding"]),VBarsMultilingualV3:new ge.KS("extension_vbars_multilingual_v2",["control","multilingual_only","multilingual_and_translate"])},...{VBarsUphookHub:new ge.KS("vbars_classic_uphookhub",["control","test"]),VBarsSampleCounterRemoval:new ge.KS("vbars_remove_sample_counter",["control","test"]),VBarsShimmerOnOpen:new ge.KS("vbar_locked_ui_motion_ext",["control","test"]),VBarsShimmerAfterLoad:new ge.KS("vbar_locked_ui_motion_v2",["control","test"]),VBarsUphookButtonInTitle:new ge.KS("vbar_uphook_in_title_ext",["control","test"]),VBarsCopyRotationText:new ge.KS("vbar_copy_rotation_text",["control","test"])},VBarsSelectionGoogleDocs:new ge.KS("vbars_selection_extension_gdocs",["control","test"]),VBarsSelectionNonGdocs:new ge.KS("vbars_selection_extension_top_sites",["control","test"]),VBarsIdleGoogleDocsThreeArms:new ge.KS("vbars_idle_extension_gdocs_v2",["control","test_static","test_dynamic"]),VBarsIdleNonGdocs:new ge.KS("vbars_idle_extension_non_gdocs",["control","test"]),VBarsEmailFlexRewrite:new ge.KS("vbars_emails_flex_rewrite_extension",["control","flex_rephrase","flex_rephrase_agressive"])},YS={...me,...{PromptEnhancementExperiment:new ge.KS("prompt_enhancement_external",["control","test"])},...Na,...KS,ClientControlsDlp:new ge.KS("client_controls_dlp_manakin",["enabled"]),ClientControlsDlpBuffering:new ge.KS("client_controls_dlp_buffering_manakin",["enabled"]),KnowledgeHubAtlassian:new ge.KS("extension_knowledge_hub_atlassian",["control","test"]),BusinessUphookQtLogic:new ge.KS("ext_business_uphook_qt_logic",["control","test"]),GetStartedChecklist:new ge.KS("in_product_checklist",["control","auto_open","existing_tour"]),ChecklistUX:new ge.KS("checklist_ux",["control","test"]),GbUpgradeHookSharedDocumentFreeV2:new ge.KS("gb_upgrade_hook_shared_document_free_v2",["control","test"]),GbUpgradeHookSharedDocumentPremiumV2:new ge.KS("gb_upgrade_hook_shared_document_premium_v2",["control","test"]),GbUpgradeHookWorkplaceAppsFreeV2:new ge.KS("gb_upgrade_hook_workplace_apps_free_v2",["control","test"]),GbUpgradeHookWorkplaceAppsPremiumV2:new ge.KS("gb_upgrade_hook_workplace_apps_premium_v2",["control","test"]),SingleCardAssistantNextToTextField:new ge.KS("sca_positioned_next_to_text_field",["control","test"]),LockedUIChrome:new ge.KS("locked_ui_chrome_ext_2",["control","unlimited_pool"]),LockedUIGDoc:new ge.KS("locked_ui_ext_gdoc_2",["control","unlimited_pool"]),LockedUIWithNewUx:new ge.KS("locked_ui_iteration_1",["control","published_limit","non_published_limit"]),ProgressiveExposure:new ge.KS("progressive_exposure",["control","test"]),Iterable:new ge.KS("iterable_experiment_ext",["enabled"]),InkwellBundle:new ge.KS("extension_inkwell_hidden_v2",["control","test"]),GDocsInternalsForReplacementExperiment:new ge.KS("gdocs_internals_replacement",["disabled"]),GDocsForceFullRenderExperiment:new ge.KS("gdocs_force_full_render",["control","test"]),CheetahSelectionContextUpdates:new ge.KS("ggo_context_management_selection_changes",["control","test"]),PerformanceScoreSuccessState:new ge.KS("performance_score_success_state",["control","test"]),CAPICheckingInProgressTimeout:new ge.KS("extension_gbutton_spinner_timeout",["control","test"]),QualityScore:new ge.KS("quality_score",["control","progress_bar","text"]),RemoveSetGoalsGDocs:new ge.KS("remove_set_goals_gdocs",["control","test"]),FullySignedInExperience:new ge.KS("fully_signedin",["control","suggestions","friction","privacy","same"]),FullySignedInQuickSignup:new ge.KS("fully_signed_in_quick_signup",["control","test"]),FullySignedInQuickSignupOnLaunch:new ge.KS("fully_signed_in_quick_signup_on_launch",["control","test"]),GOSRollout:new ge.KS("extension_gos_rollout_exp",["control","test"]),OggyOnGOS:new ge.KS("extension_oggy_on_gos_exp",["control","test"]),PreserveFormatting:new ge.KS("extension_preserve_formatting",["control","test"]),GhostProtocol:new ge.KS("ghost_protocol",["control","test"]),TranslationDiscoverability:new ge.KS("ext_translation_discoverability",["control","test"]),RecentAppActions:new ge.KS("recent_app_actions",["control","test"]),LockedUiDebouncedHoverUnlock:new ge.KS("locked_ui_debounced_hover_unlock",["control","test1","test2","test3","test4","test5"]),FullySignedInExperienceInGDocs:new ge.KS("fully_signedin_gdocs",["control","test"]),ChromeStoreSignupV2:new ge.KS("chrome_store_signup_v2",["control","popup_once","popup_persistent"]),TouchTypistExternalFree:new ge.KS("extension_touchtypist_external_v5_free",["control","test"]),TouchTypistProminentTooltip:new ge.KS("extension_touchtypist_web_prominent_tooltip",["control","snooze","red"]),TouchTypistAutoOptOut:new ge.KS("extension_touchtypist_default_disable",["control","disable","dynamic"]),OAuthSDKV2:new ge.KS("extensions_oauth2_sdk_v2",["control","test"]),GDocsInviteNudgeExp:new ge.KS("invite_nudge_gdoc_v1",["control","test"]),FullySignedInAccountChooser:new ge.KS("fully_signedin_account_chooser",["control","test"]),OAuth2Phase2:new ge.KS("extensions_oauth2_phase2",["control","test"]),OAuthExplicitTokenExchange:new ge.KS("extensions_oauth2_explicit_token_exchange",["control","test"]),InProductDiscount:new ge.KS("in_product_discount",["control","enabled"]),ExtensionIframeEnabled:new ge.KS("extension_iframe_enabled",["control","test"]),OAuth2Phase2Interactive:new ge.KS("extensions_oauth2_phase2_interactive",["control","test"]),V5UserInfo:new ge.KS("extension_oauth2_v5_userinfo",["control","test"]),FsrIndividualUndoRedoV1:new ge.KS("extension_fsr_individual_undos_v1",["control","state_preservation","undo_redo","undo_redo_no_state_preservation"]),CleanUxUiFree:new ge.KS("clean_ux_ui_colors_free",["control","test"]),CleanUxUiPro:new ge.KS("clean_ux_ui_colors_pro",["control","test"]),SafariWebCompanionAppProtocol:new ge.KS("extensions_safari_web_companion_app_protocol",["control","test"]),LockedUIAnonymous:new ge.KS("locked_ui_for_anonymous_users",["control","test_advanced_uphook","test_advanced_fsi"])};class ZS{constructor(e){this._storage=e,this._experimentClient=null}registerExperimentClient(e){this._experimentClient=e}async getTokenExchangeMethod(){var e;if(null!==this._experimentClient){const e="test"===this._experimentClient.getTreatment(YS.OAuthExplicitTokenExchange)?"explicit":"implicit";return await this._storage.patch({oauthSDKTokenExchangeMethod:{version:e}}),e}const t=null===(e=(await this._storage.get(["oauthSDKTokenExchangeMethod"])).oauthSDKTokenExchangeMethod)||void 0===e?void 0:e.version;return null!=t?t:"implicit"}}class JS{constructor(e){this._method=e}setTokenExchangeMethod(e){this._method=e}getTokenExchangeMethod(){return Promise.resolve(this._method)}}const QS=async e=>{const t=gl.get("dummy_url");await Yc.toHeaderAppender(e)(t)();const{headers:n}=t.build();return n},ek=(e,t,n,r,i)=>{const o=ou.C8.Logging.getLogger("OAuth",ou.zW.i.ERROR),s=ZJ().experimentClient,a=ZJ().browserApi,c=a.preferences,l=new Sc(a),{authEnvironment:u,networkLeeway:d}=(()=>{const e=N().bundleInfo.env;let t;return t="qa"===e||"dev-qa"===e?Ln.QA:"dev-preprod"===e?Ln.PreProd:Ln.Prod,{authEnvironment:t,networkLeeway:t===Ln.Prod?void 0:50}})(),h={getItem:async e=>(await c.get(e))[e],async setItem(e,t){await c.set({[e]:t})},async removeItem(e){await c.remove(e)}},p=new XS(t,(()=>new fr(e.clientName,u,h,(()=>QS(e)),new WS(n,r,o,i,Nc))),(()=>new fr(e.clientName,u,h,(()=>QS(e)),new WS(n,r,o,i,Nc),(async()=>{var e;try{const t=await l.getGrauth();return null!==(e=null==t?void 0:t.value)&&void 0!==e?e:""}catch(e){return o.error("GRAUTH_COOKIE_ERROR",e),""}}),!1,d)),i,s);return p};class tk{constructor(e,t,n,r,i,o,s,a,c,l,u=new JS("implicit")){this._getCsrfToken=e,this._getContainerIdOrUndefined=t,this._clientName=n,this._clientVersion=r,this._telemetry=i,this._authApiStatusTracker=o,this._authSuccessStatusTracker=s,this._getUser=a,this._store=c,this._isAuthenticationOptionsApiEnabled=l,this._oauthClientmigrationState=u,this.oauthClient=ek(this.withoutAccessToken,this._oauthClientmigrationState,this._getUser,this._authSuccessStatusTracker,this._telemetry),this._subs=[],this._hasEverLoadedRecentAccount=!1,this.getRecentAccount=()=>{var e;return null===(e=this._store.view("authenticationOptions").get())||void 0===e?void 0:e.accounts.at(-1)},this._clearAuthenticationOptions=async()=>{await this._store.patch({authenticationOptions:void 0})},this._getAuthenticationOptions=async()=>{try{let{authenticationOptions:e}=await this._store.get(["authenticationOptions"]);return e||this._hasEverLoadedRecentAccount||(this._hasEverLoadedRecentAccount=!0,e=await this._auth.getAuthenticationOptions(),await this._store.patch({authenticationOptions:e})),e}catch(e){const t={accounts:[]};return this._telemetry.authAccountChooserOptionsError(e),await this._store.patch({authenticationOptions:t}),t}},this._getAccessToken=async()=>{const e=await async function(){try{const e=await ZJ().browserApi.preferences.get($S);if(!e||!e["gr-oauth-key"])return"init";const t=JSON.parse(e["gr-oauth-key"]);return isNaN(t.expires_at)?"error":t.expires_at-(new Date).getTime()<=0?"expired":"valid"}catch(e){return"error"}}();try{const t=await this.oauthClient.getAccessTokenOrRenew();return"init"===e&&this._telemetry.initializeAccessTokenSuccess(),this._telemetry.getAccessTokenSuccess({ignoreCache:!1,tokenStatus:e}),t}catch(t){const{errorName:n,errorCode:r,httpErrorStatusCode:i}=function(e){let t,n,r;return e instanceof un?(n=e.code,r=e.status,t="OAuthClientHTTPException"):e instanceof ln?(n=e.code,t="OAuthClientException"):t=e instanceof Error?e.name:"Unknown",{errorName:t,errorCode:n,httpErrorStatusCode:r}}(t);return void this._telemetry.getAccessTokenError({tokenStatus:e,errorName:n,errorCode:r,httpErrorStatusCode:i,ignoreCache:!1})}},this.logout=async e=>{try{await this.oauthClient.logout(function(e){switch(e){case"logout":return"UserInitiatedLogout";case"last_authn_event_logout":return"SessionMismatch";case"changed-user":case"oauth":return"UserInitiatedLogin";case"not_authorized":return"CAPIError";default:return"Other"}}(e)),this._telemetry.oauthLogout({reason:e,status:"success"}),this._store.patch({authTokenInitialRefreshDone:!1}),this._hasEverLoadedRecentAccount=!1,this._clearAuthenticationOptions()}catch(e){this._telemetry.oauthLogout({status:"fail"})}},this._auth=new ES(qe().auth,this.ajaxFactory,this.withoutAccessToken),this._subs.push(this._isAuthenticationOptionsApiEnabled.subscribe((e=>{e&&this._getUser().anonymous&&this._getAuthenticationOptions()})))}get fingerprints(){return this._fingerprints||(this._fingerprints={...this.withoutAccessToken,accessToken:this._getAccessToken}),this._fingerprints}get withoutAccessToken(){return this._withoutAccessToken||(this._withoutAccessToken={csrfToken:this._getCsrfToken,containerId:this._getContainerIdOrUndefined("ApiService:withoutAccessToken"),clientName:this._clientName,clientVersion:zS.parse(this._clientVersion)}),this._withoutAccessToken}get ajaxFactory(){if(!this._ajaxFactory){const e=this._authApiStatusTracker.watchFetch(self.fetch);this._ajaxFactory=wS.create((async(t,n)=>e(t,n)))}return this._ajaxFactory}get ajax(){return this._ajax||(this._ajax=this.ajaxFactory({requestExtender:Yc.toHeaderAppender(this.fingerprints)})),this._ajax}dispose(){this._subs.forEach((e=>e.unsubscribe()))}}class nk{constructor(e,t){this._url=e,this._apiService=t,this._logger=q.create("SpecialOfferService"),this._api=Nr.Uo(Tr.t$(new Error("API not initialized"))),this.getSpecialOffer=e=>(0,Ir.zG)(this._api,Nr.vx((()=>this._init())),Nr.tS((t=>Nr.Y3((()=>t.specialOffersGet(e)),Tr.KC))),Nr.Vn((e=>(this._logger.error(e.message),e))))()}_init(){return this._api=(0,Ir.zG)(Nr.Y3((()=>QS(this._apiService.fingerprints)),Tr.KC),Nr.tS((e=>(0,Ir.zG)(e["X-CSRF-Token"],Tr.ij(new Error("CSRF token not found")),Tr.UI((()=>e)),Nr.Uo))),Nr.UI((e=>new qw.VitoApi(new qw.Configuration({basePath:this._url,fetchApi:fetch,headers:{...e},credentials:"include"}))))),this._api}}function rk(e,t){return JSON.stringify({clientId:e,instanceId:t})}function ik(e){return JSON.parse(e)}function ok(e){return e.isGateEnabled(De.GOSRollout)||"test"===e.getTreatment(YS.GOSRollout)}class sk extends Fl{constructor(e){super(new jl("gOS-bg-d5ccc5edf7e1",ZJ().message),{dispatchAction:async({clientId:t},n,r,i)=>await e.dispatchAction(rk(t,n),r,i),dispose:async({clientId:t},n)=>await e.dispose(rk(t,n))})}}class ak{implementation;static objectName="host.authorizedHttpClient";constructor(e){this.implementation=e}async handleMessage(e,t){const n="host.authorizedHttpClient.";if(e.startsWith(n)&&(e=e.slice(n.length)),"sendRequest"===e){const e=t??null;return await this.implementation.sendRequest(e)??null}throw new Error(`Unknown action: ${e}`)}}class ck{implementation;static objectName="host.focusContext";constructor(e){this.implementation=e}async handleMessage(e,t){const n="host.focusContext.";if(e.startsWith(n)&&(e=e.slice(n.length)),"getFocusContext"===e){const e=t??null;return await this.implementation.getFocusContext(e)??null}throw new Error(`Unknown action: ${e}`)}}class lk{implementation;static objectName="host.indexedDB";constructor(e){this.implementation=e}async handleMessage(e,t){const n="host.indexedDB.";switch(e.startsWith(n)&&(e=e.slice(n.length)),e){case"beginVersionChange":{const e=t??null;return await this.implementation.beginVersionChange(e)??null}case"finishVersionChange":{const e=t??null;return await this.implementation.finishVersionChange(e)??null}case"createObjectStore":{const e=t??null;return await this.implementation.createObjectStore(e)??null}case"deleteObjectStore":{const e=t??null;return await this.implementation.deleteObjectStore(e)??null}case"createIndex":{const e=t??null;return await this.implementation.createIndex(e)??null}case"createFullTextIndex":{const e=t??null;return await this.implementation.createFullTextIndex(e)??null}case"deleteIndex":{const e=t??null;return await this.implementation.deleteIndex(e)??null}case"connect":{const e=t??null;return await this.implementation.connect(e)??null}case"disconnect":{const e=t??null;return await this.implementation.disconnect(e)??null}case"set":{const e=t??null;return await this.implementation.set(e)??null}case"get":{const e=t??null;return await this.implementation.get(e)??null}case"delete":{const e=t??null;return await this.implementation.delete(e)??null}default:throw new Error(`Unknown action: ${e}`)}}}class uk{implementation;static objectName="host.userAccount";constructor(e){this.implementation=e}async handleMessage(e,t){const n="host.userAccount.";switch(e.startsWith(n)&&(e=e.slice(n.length)),e){case"getInfo":{const e=t??null;return await this.implementation.getInfo(e)??null}case"setDialect":{const e=t??null;return await this.implementation.setDialect(e)??null}case"subscribeToUserInfoChanged":{const e=t??null;return await this.implementation.subscribeToUserInfoChanged(e)??null}case"unsubscribeToUserInfoChanged":{const e=t??null;return await this.implementation.unsubscribeToUserInfoChanged(e)??null}default:throw new Error(`Unknown action: ${e}`)}}}class dk{_sendMessage;constructor(e){this._sendMessage=e}async userInfoChanged(e){return await this._sendMessage("applet.userAccount.userInfoChanged",e)??null}}const hk={version:11},pk={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},gk=new RegExp(`^(?<stem>.+?)(${Object.keys(pk).join("|")})$`),fk={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},mk=new RegExp(`^(?<stem>.+?)(${Object.keys(fk).join("|")})$`),bk=/^(?<stem>.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize|(?<=[st])ion)$/,yk="(?:(?:[^aeiouy]|(?<=[aeiou])y)+)",_k="(?:(?:[aeiou]|(?<![aeiou])y)+)",vk=new RegExp(`^${yk}?${_k}${yk}`),wk=new RegExp(`^${yk}?${_k}${yk}${_k}?$`),Sk=new RegExp(`^${yk}?(?:${_k}${yk}){2,}`),kk=new RegExp(`^${yk}?[aeiouy]`),Ik=/([^aeiouylsz])\1$/,Ck=new RegExp(`^${yk}[aeiouy][^aeiouwxy]$`);function Ek(e){const{stem:t}=e.groups;if(null==t)throw new Error("stem is null");return t}function Ak(e,t){return"en"===t.toLowerCase().slice(0,2)?function(e){if(e.length<3)return e;let t,n=e.toLowerCase();return n=n.replace(/^y/,"Y"),n=n.replace(/^(.+?)(?:(ss|i)es|([^s])s)$/,((e,t,n,r)=>t+(n||r))),/eed$/.test(n)?vk.test(n.slice(0,-3))&&(n=n.slice(0,-1)):(t=/^(?<stem>.+?)(ed|ing)$/.exec(n))&&kk.test(Ek(t))&&(n=Ek(t),/(at|bl|iz)$/.test(n)||Ck.test(n)?n+="e":Ik.test(n)&&(n=n.slice(0,-1))),(t=/^(?<stem>.+?)y$/.exec(n))&&kk.test(Ek(t))&&(n=Ek(t)+"i"),(t=gk.exec(n))&&vk.test(Ek(t))&&(n=n.slice(0,-t[2].length)+pk[t[2]]),(t=mk.exec(n))&&vk.test(Ek(t))&&(n=n.slice(0,-t[2].length)+fk[t[2]]),(t=bk.exec(n))&&Sk.test(Ek(t))&&(n=Ek(t)),(t=/^(?<stem>.+?)e$/.exec(n))&&(Sk.test(Ek(t))||wk.test(Ek(t))&&!Ck.test(Ek(t)))&&(n=Ek(t)),n.endsWith("ll")&&Sk.test(n)&&(n=n.slice(0,-1)),n.toLowerCase()}(e):e}class xk extends Error{oldVersion;newVersion;constructor(e,t){super("upgrade needed"),this.oldVersion=e,this.newVersion=t}}class Tk{static FULL_TEXT_INDEX_NAME="__full_text_search";static FULL_TEXT_INDEX_TERMS_KEY_PATH="__full_text_search_terms";connections=new Map;migrations=new Map;async connect({name:e,version:t}){const n=(await indexedDB.databases()).find((t=>t.name===e));if(null==n||n.version!==t)throw new xk(n?.version??0,t);const r=`${e}/${Math.random().toString(36).slice(2)}`,i=await new Promise(((n,r)=>{const i=indexedDB.open(e,t);i.onerror=()=>r(i.error),i.onsuccess=()=>n(i.result)}));return this.connections.set(r,i),{connectionId:r,version:i.version}}async disconnect({connectionId:e}){const t=this._getConnection(e);this.connections.delete(e),t.close()}async beginVersionChange({name:e,version:t}){const n=`version/${e}/${Math.random().toString(36).slice(2)}`;return this.migrations.set(n,{name:e,version:t,migrations:[],objectStores:{},postUpgradeTasks:[]}),{versionChangeId:n}}async finishVersionChange({versionChangeId:e,abort:t}){const n=this._getVersionChange(e);!0!==t?await new Promise(((e,t)=>{const r=indexedDB.open(n.name,n.version);let i=!1;r.onerror=()=>t(r.error),r.onsuccess=async()=>{if(i){for(const e of n.postUpgradeTasks)await e(r.result);e()}else t(new Error("Attempted to finish version change without upgrading"));r.result.close()},r.onupgradeneeded=()=>{const e=r.result,t=r.transaction;if(null==t)throw new Error("Expected transaction");n.migrations.forEach((n=>n(e,t))),i=!0}})):this.migrations.delete(e)}async createObjectStore({versionChangeId:e,name:t,autoIncrement:n,keyPath:r}){const i=this._getVersionChange(e);i.migrations.push((e=>{i.objectStores[t]=e.createObjectStore(t,{autoIncrement:n??!1,keyPath:r})}))}async deleteObjectStore({versionChangeId:e,name:t}){const n=this._getVersionChange(e);n.migrations.push((e=>{e.deleteObjectStore(t),delete n.objectStores[t]}))}async createIndex({versionChangeId:e,objectStoreName:t,name:n,keyPath:r,multiEntry:i,unique:o}){const s=this._getVersionChange(e);s.migrations.push(((e,a)=>{(s.objectStores[t]??a.objectStore(t)).createIndex(n,r,{multiEntry:i??!1,unique:o??!1})}))}async createFullTextIndex({versionChangeId:e,objectStoreName:t,keyPaths:n}){const r=this._getVersionChange(e);r.migrations.push(((e,n)=>{const i=r.objectStores[t]??n.objectStore(t),o=Tk.FULL_TEXT_INDEX_NAME,s=Tk.FULL_TEXT_INDEX_TERMS_KEY_PATH;i.indexNames.contains(o)||i.createIndex(o,s,{multiEntry:!0,unique:!1})})),r.postUpgradeTasks.push((async e=>{const r=e.transaction(t,"readwrite"),i=r.objectStore(t);for await(const e of Ok(i.openCursor()))e.update(this._toStoredValue(e.value,n));r.commit()}))}async deleteIndex({versionChangeId:e,objectStoreName:t,name:n}){const r=this._getVersionChange(e);r.migrations.push(((e,i)=>{(r.objectStores[t]??i.objectStore(t)).deleteIndex(n)}))}async set({connectionId:e,objectStoreName:t,key:n,value:r,fullTextIndexKeyPaths:i}){const o=this._getConnection(e).transaction(t,"readwrite"),s=o.objectStore(t),a=null==i?r:this._toStoredValue(r,i);let c;if(null!=s.keyPath){const e=s.keyPath;a[e]??=this._toIDBValidKey(n)}else c=this._toIDBValidKey(n);const l=await Pk(s.put(a,c));return o.commit(),{key:this._toKey(l)}}async get({connectionId:e,objectStoreName:t,query:n}){const r=this._getConnection(e).transaction(t,"readonly"),i=r.objectStore(t),o=[],s=n.limit??1/0;for await(const e of this._createIteratorFromQuery(i,n)){const t=this._toKey(e.primaryKey),n=this._toValue(e.value);if(o.push({key:t,value:n}),o.length>=s)break}return r.commit(),{results:o}}async delete({connectionId:e,objectStoreName:t,query:n}){const r=this._getConnection(e).transaction(t,"readwrite"),i=r.objectStore(t),o=[],s=n.limit??1/0;for await(const e of this._createIteratorFromQuery(i,n))if(o.push(this._toKey(e.primaryKey)),e.delete(),o.length>=s)break;return r.commit(),{keys:o}}dispose(){this.connections.forEach((e=>e.close())),this.connections.clear(),this.migrations.clear()}_getVersionChange(e){const t=this.migrations.get(e);if(null==t)throw new Error(`Version change ${e} not found`);return t}_getConnection(e){const t=this.connections.get(e);if(null==t)throw new Error(`Connection ${e} not found`);return t}_toIDBValidKey(e){if(null!=e)return null!=e.intKey?e.intKey:null!=e.stringKey?e.stringKey:void 0}_toKey(e){if("number"==typeof e)return{intKey:e};if("string"==typeof e)return{stringKey:e};throw new Error(`Unexpected key type: ${e}`)}_toValue(e){const{[Tk.FULL_TEXT_INDEX_TERMS_KEY_PATH]:t,...n}=e;return n}_toStoredValue(e,t){const n=t.map((t=>e[t])).filter((e=>null!=e)).join(" ");return{...e,[Tk.FULL_TEXT_INDEX_TERMS_KEY_PATH]:Rk(n)}}_createIteratorFromQuery(e,t){const n=["key","keyPrefix","search","range"];if(1!==n.filter((e=>null!=t[e])).length)throw new Error(`Exactly one of ${n.join(", ")} must be specified.`);if(null!=t.key){const n=this._toIDBValidKey(t.key);if(null==n)throw new Error("Invalid key");return Ok(e.openCursor(IDBKeyRange.only(n)))}if(null!=t.keyPrefix)return Ok(this._createKeyPrefixCursor(e,t.keyPrefix));if(null!=t.search){return function(e){let t=e;return{[Symbol.asyncIterator]:async function*(){for(;;){const e=await n();if(null==e)return;e.sort(((e,t)=>indexedDB.cmp(e.result.primaryKey,t.result.primaryKey)));const r=e[0].result,i=e[e.length-1].result;if(0===indexedDB.cmp(r.primaryKey,i.primaryKey))yield r,e.forEach((e=>e.result?.continue())),t=e;else{const n=e[0];n.result.continue(),t=[n]}}}};async function n(){return await Promise.all(t.map((e=>Pk(e)))),e.every((e=>null!=e.result))?e:null}}(this._createFullTextSearchCursors(e,t.search.query))}if(null!=t.range)return Ok(this._createIndexRangeCursor(e,t.range));throw new Error(`One of ${n.join(", ")} must be specified.`)}_createKeyPrefixCursor(e,t){const n=IDBKeyRange.bound(t,`${t}`);return e.openCursor(n)}_createFullTextSearchCursors(e,t){const n=e.index(Tk.FULL_TEXT_INDEX_NAME),r=Rk(t);if(0===r.length)throw new Error("Empty search query");return r.map((e=>n.openCursor(e)))}_createIndexRangeCursor(e,{indexName:t,lowerBound:n,upperBound:r}){const i=e.index(t);if(null==n&&null==r)throw new Error("At least one of lowerBound or upperBound must be specified");const o=null!=n&&null!=r?IDBKeyRange.bound(n,r):null!=n?IDBKeyRange.lowerBound(n):IDBKeyRange.upperBound(r);return i.openCursor(o)}}function Ok(e){return{[Symbol.asyncIterator]:async function*(){for(;;){const t=await Pk(e);if(null==t)return;yield t,t.continue()}}}}function Pk(e){return new Promise(((t,n)=>{e.onerror=()=>n(e.error),e.onsuccess=()=>t(e.result)}))}function Rk(e,t="en"){const n=new Set,r=new Intl.Segmenter(t,{granularity:"word"});for(const{segment:i,isWordLike:o}of r.segment(e))o&&n.add(Ak(i.toLowerCase(),t));return Array.from(n)}var Dk,Nk;!function(e){e.UI="ui",e.BACKGROUND="background"}(Dk||(Dk={})),function(e){e.GLOBAL="global",e.EDIT_SESSION="editSession"}(Nk||(Nk={}));class Uk extends Error{}var Mk,jk;!function(e){e.INCOMING="incoming",e.OUTGOING="outgoing",e.UNEXPECTED="unexpected"}(Mk||(Mk={}));class Fk extends Error{}!function(e){e.TRACE="trace",e.DEBUG="debug",e.INFO="info",e.WARN="warn",e.ERROR="error"}(jk||(jk={}));class Lk extends Error{constructor(){super("Buffer overrun")}}class Gk{_parent;_objects=new Map;_resolving=new Map;_resolver;constructor(e=null,t){this._parent=e,this._resolver=t}register(e,t){this._objects.set(e,t)}unregister(e){this._objects.delete(e)}get(e){return this._objects.get(e)??null}execute(e,t){const n=e.split("."),r=n.pop(),i=n.join(".");if(null==i||null==r)throw new zk(e);return this._handleWithResolver({target:i,method:r,data:t})}dispose(){this._objects.clear(),this._resolving.clear()}_handleWithResolver(e){const t=this._resolve(e.target);return t instanceof Promise?t.then((()=>this._handle(e))):this._handle(e)}_handle(e){const t=this._objects.get(e.target);if(null!=t)return t.handleMessage(e.method,e.data);if(null!=this._parent)return this._parent._handle(e);throw new Vk(e.target)}_isResolved(e){return this._objects.has(e)||(this._parent?._isResolved(e)??!1)}_resolve(e){if(!this._isResolved(e)){if(this._resolving.has(e))return this._resolving.get(e);if(null!=this._resolver){const t=this._resolver(e);if(t instanceof Promise){const n=t.then((t=>{if(!!this._resolving.has(e))return null==t?this._parent?._resolve(e):void this._objects.set(e,t)})).finally((()=>{this._resolving.delete(e)}));return this._resolving.set(e,n),n}if(null!=t)return void this._objects.set(e,t)}return this._parent?._resolve(e)}}}class Bk extends Error{}class zk extends Bk{action;constructor(e){super(`Malformed action: ${e}`),this.action=e}}class Vk extends Bk{action;constructor(e){super(`Object not found: ${e}`),this.action=e}}function qk(e){const t=e.replace(/[^A-Za-z0-9+/]/g,""),n=t.length,r=3*n+1>>2,i=new Uint8Array(r);let o,s,a=0,c=0;for(let e=0;e<n;e++)if(s=3&e,a|=((l=t.charCodeAt(e))>64&&l<91?l-65:l>96&&l<123?l-71:l>47&&l<58?l+4:43===l?62:47===l?63:0)<<6*(3-s),3===s||n-e==1){for(o=0;o<3&&c<r;)i[c]=a>>>(16>>>o&24)&255,o++,c++;a=0}var l;return i}function Hk(e){return e<26?e+65:e<52?e+71:e<62?e-4:62===e?43:63===e?47:65}function Wk(e){let t=2,n="";const r=e.length;let i=0;for(let o=0;o<r;o++)t=o%3,i|=e[o]<<(16>>>t&24),2!==t&&e.length-o!=1||(n+=String.fromCodePoint(Hk(i>>>18&63),Hk(i>>>12&63),Hk(i>>>6&63),Hk(63&i)),i=0);return n.substring(0,n.length-2+t)+(2===t?"":1===t?"=":"==")}class $k{constructor(e){this._fingerprints=e,this._disallowedDomainList=["auth.grammarly.com","tokens.grammarly.com"],this._allowedDomainList=["grammarly.com","grammarly.io","qagr.io","ppgr.io"],this._disallowedHeaders=new Set(["cookie","set-cookie"])}async _getAccessToken(){var e;const t=this._fingerprints.accessToken;return Q(t)?t:null!=t&&null!==(e=await t())&&void 0!==e?e:null}_validateDomain(e){const t=t=>e.hostname.toLowerCase()===t.toLowerCase()||e.hostname.toLowerCase().endsWith(`.${t}`.toLowerCase());if(this._disallowedDomainList.some(t))throw new Error("Authorized request must not target disallowed domains");if(!this._allowedDomainList.some(t))throw new Error("Authorized request must not target foreign domains")}async sendRequest(e){const t=new URL(e.url);this._validateDomain(t);const n=new Headers;for(const{name:t,value:r}of e.headers){const e=t.toLowerCase();if(this._disallowedHeaders.has(e))throw new Error(`Header "${t}" is not allowed`);n.append(t,r)}if("https:"===t.protocol){const e=await this._getAccessToken();null!=e&&n.set("Authorization",`Bearer ${e}`);const t=await this._fingerprints.csrfToken();null!=t&&n.set("X-CSRF-Token",t)}n.set("X-Client-Version",this._fingerprints.clientVersion.toString()),n.set("X-Client-Type",this._fingerprints.clientName),n.set("X-Container-Id",await this._fingerprints.containerId);const r=null!=e.body&&e.body.length>0?qk(e.body):void 0,i=new Request(t,{method:e.method,headers:n,body:r,credentials:"omit",redirect:"error"}),o=await fetch(i),s=null!=o.body?Wk(new Uint8Array(await o.arrayBuffer())):null,a=Array.from(o.headers.entries()).map((([e,t])=>({name:e,value:t}))).filter((({name:e})=>!this._disallowedHeaders.has(e.toLowerCase())));return{statusCode:o.status,headers:a,body:s}}}const Xk={appName:"",pid:-1};class Kk{constructor(e=ZJ().browserApi){this._ext=e}async getFocusContext(){var e;if("web-extension"!==this._ext.tabs.kind)return Xk;const t=await this._ext.tabs.getActiveTab();return null==t?Xk:{pid:null!==(e=t.id)&&void 0!==e?e:-1,appName:"",url:t.url}}}class Yk{constructor(e,t,n=ZJ().browserApi.i18n){this._store=e,this._client=t,this._i18n=n,this._subscriptions=new Gl.w0,this.defaultDialectSettings={dialect:void 0,dialectLockedByInstitution:!1}}get defaultDialect(){var e;switch(null===(e=this._i18n)||void 0===e?void 0:e.getUILanguage()){case"en-US":default:return"american";case"en-AU":case"en-NZ":return"australian";case"en-GB":case"en-BZ":case"en-IE":return"british";case"en-CA":case"fr-CA":return"canadian";case"en-IN":return"indian"}}async getInfo(){var e;const{user:t,dialectSettings:n=this.defaultDialectSettings}=await this._store.get(["user","dialectSettings"]);if(null==t)throw new Error("User not loaded");return{userId:t.id,email:t.email,isPremium:t.premium,dialect:null!==(e=n.dialect)&&void 0!==e?e:this.defaultDialect,dialectLockedByInstitution:n.dialectLockedByInstitution,institutionInfo:null!=t.institutionInfo?{id:t.institutionInfo.id,name:t.institutionInfo.name}:void 0}}async setDialect(e){const{dialectSettings:t=this.defaultDialectSettings}=await this._store.get(["dialectSettings"]);await this._store.patch({dialectSettings:{...t,dialect:Zk(e.dialect)}})}async _sendUserInfoUpdate(){var e,t,n;const{user:r,dialectSettings:i=this.defaultDialectSettings}=await this._store.get(["user","dialectSettings"]);null!=r&&this._client.userInfoChanged(r.anonymous?{signedOutUser:{kind:this._getUserKind(r),institutionType:this._getInstitutionType(r)}}:{loggedInUser:{dialect:null!==(e=i.dialect)&&void 0!==e?e:this.defaultDialect,dialectLockedByInstitution:i.dialectLockedByInstitution,isPremium:r.premium,userId:r.id,email:r.email,institutionInfo:null!=r.institutionInfo?{id:r.institutionInfo.id,name:r.institutionInfo.name,logoUrl:null===(t=r.institutionInfo.voxInfo)||void 0===t?void 0:t.logoUrl,styleGuideEnabled:null===(n=r.institutionInfo.voxInfo)||void 0===n?void 0:n.styleGuideEnabled}:void 0}})}_getUserKind(e){return null!=e.institutionInfo?"institution":e.premium?"premium":"free"}_getInstitutionType(e){if(null!=e.institutionInfo)switch(e.institutionInfo.organizationType){case"BUSINESS":case"EDU":case"GOV":case"K12":case"NGO":return e.institutionInfo.organizationType.toLowerCase();default:return}}async subscribeToUserInfoChanged(){this._subscriptions.add(this._store.changes.subscribe({next:e=>{null==e.user&&null==e.dialectSettings||this._sendUserInfoUpdate()}})),await this._sendUserInfoUpdate()}async unsubscribeToUserInfoChanged(){this._subscriptions.unsubscribe()}dispose(){this._subscriptions.unsubscribe()}}function Zk(e){switch(e){case"american":case"australian":case"british":case"canadian":case"indian":return e;default:throw new Error(`Unknown dialect: ${e}`)}}class Jk{constructor(e,t,n){this._fingerprints=e,this._store=t,this._foreground=n,this._scopedByContextId=new Map,this._subscriptionsByContextId=new Map,this._root=new Gk}async dispatchAction(e,t,n){return await this._getOrCreateObjectBrokerForContext(e).execute(t,n)}dispose(e){var t,n;return null===(t=this._scopedByContextId.get(e))||void 0===t||t.dispose(),this._scopedByContextId.delete(e),null===(n=this._subscriptionsByContextId.get(e))||void 0===n||n.unsubscribe(),this._subscriptionsByContextId.delete(e),Promise.resolve()}_getOrCreateObjectBrokerForContext(e){return this._scopedByContextId.has(e)||this._scopedByContextId.set(e,new Gk(this._root,(t=>this._createObject(e,t)))),this._scopedByContextId.get(e)}async _createObject(e,t){switch(t){case uk.objectName:{const t=new Yk(this._store,new dk(this._createRemoteFunctionCaller(e)));return this._registerDisposeFn(e,(()=>t.dispose())),new uk(t)}case ak.objectName:this._root.register(t,new ak(new $k(this._fingerprints)));break;case lk.objectName:this._root.register(t,new lk(new Tk));break;case ck.objectName:this._root.register(t,new ck(new Kk))}return this._root.get(t)}_registerDisposeFn(e,t){var n;const r=null!==(n=this._subscriptionsByContextId.get(e))&&void 0!==n?n:new Gl.w0;r.add(t),this._subscriptionsByContextId.set(e,r)}_createRemoteFunctionCaller(e){const t=this._foreground(e),{instanceId:n}=ik(e);return async(e,r)=>await t.dispatchAction(n,e,r)}}class Qk extends Vl{constructor(e){super(eI.shared.filterByClientId(e))}}class eI extends jl{static get shared(){var e;return null!==(e=this._instance)&&void 0!==e?e:this._instance=new eI}constructor(e=ZJ().message){super("gOS-fg-d5ccc5edf7e1",e)}filterByClientId(e){return{inbound:this.inbound.pipe((0,Ki.h)((t=>t.clientId===e)),(0,Gr.U)((e=>e.data))),outbound:t=>{this.outbound({clientId:e,data:t})}}}}eI._instance=null;class tI{constructor(){this._clients=new Map}get(e){return this._clients.has(e)||this._clients.set(e,new Qk(e)),this._clients.get(e)}dispose(){for(const e of this._clients.values())e.dispose();this._clients.clear()}}class nI extends Error{validationErrors;constructor(e){super(`Unprocessable Entity. validationErrors:${e.length}`),this.validationErrors=e}}class rI{type;connection;schema;constructor(e,t,n){this.type=e,this.connection=t,this.schema=n}parse(e){const t=[];for(const n in e)if(n in this.schema.columns){let r=!0;const i=this.schema.columns[n];switch(typeof e[n]){case"string":r="string"===i.type;break;case"number":case"bigint":r="number"===i.type;break;case"boolean":r="boolean"===i.type;break;case"object":r=null==e[n]&&(i.optional??!0);break;case"undefined":r=(i.optional??!0)||this.schema.primaryKey.column===n&&"autoIncrement"===this.schema.primaryKey.strategy;break;default:r=!1}r||t.push({column:n,error:"INVALID_TYPE"})}else t.push({column:n,error:"UNMAPPED"});for(const n in this.schema.columns)n in e||this.schema.columns[n].optional||t.push({column:n,error:"MISSING"});if(t.length>0)throw new nI(t)}async get(e){const t=await this.query({key:e});if(1===t?.length)return t[0][1]}async create(e,t={}){this.set(void 0,e,t)}async set(e,t,n={}){this.parse({...t,[this.schema.primaryKey.column]:e}),this.connection.set(this.type,e,t,n)}async delete(e){this.connection.delete(this.type,e)}async deleteQuery(e){this.connection.deleteQuery(this.type,e)}async query(e){return this.connection.query(this.type,e)}async queryMap(e){return(await this.query(e)).reduce(((e,[t,n])=>(e[t]=n,e)),{})}async disconnect(){this.connection.disconnect()}}class iI{schema;connectionPromise;constructor(e,t,n){this.schema=n,this.connectionPromise=e.connect(t,n)}async connect(){const e=await this.connectionPromise,t={};for(const n of Object.keys(this.schema.types))t[n]=new rI(n,e,this.schema.types[n]);return t}async disconnect(){(await this.connectionPromise).disconnect()}}class oI{native;constructor(e){this.native=e}create(e,t){return new iI(this.native,e,t)}}class sI{static create(e){return new oI(e)}}class aI{name;from;to;_isNew=!1;_newColumns=[];_updatedColumns=[];_deletedColumns=[];constructor(e,t,n){if(this.name=e,this.from=t,this.to=n,null==this.from)this._isNew=!0,this._newColumns=Object.entries(this.to.columns).map((([e,t])=>({[e]:t})));else{for(const[e,t]of Object.entries(this.to.columns))null==this.from.columns[e]&&this._newColumns.push({[e]:t});for(const[e,t]of Object.entries(this.from.columns))null==this.to.columns[e]?this._deletedColumns.push({[e]:t}):aI.isUpdated(t,this.to.columns[e])&&this._updatedColumns.push({[e]:t})}}static isUpdated(e,t){return e.type!==t.type||e.optional!==t.optional||e.fullText!==t.fullText}get isNewEntity(){return this._isNew}get isValidUpgrade(){return(this._newColumns.length>0||this._updatedColumns.length>0)&&0===this._deletedColumns.length}get newColumns(){return this._newColumns}get updatedColumns(){return this._updatedColumns}}class cI extends Error{oldVersion;newVersion;constructor(e,t){super("upgrade needed"),this.oldVersion=e,this.newVersion=t}}const lI=new RegExp("[~`!@#$%^&*(){}\\[\\];:\"'<,.>?\\/\\\\|_+=\\-]","g");class uI{async connect(e,t){return new Promise(((n,r)=>{if(void 0===globalThis.indexedDB)throw new Error("IndexedDB is not supported in this browser.");const i=globalThis.indexedDB.open(e,t.version??1);i.onsuccess=()=>n(new dI(i.result,t)),i.onerror=()=>r(i.error),i.onupgradeneeded=async e=>{if(0===e.oldVersion)this._createInitialSchema(i.result,t);else{const e=await this._evaluateCurrentSchema(i.result,t);e.length>0&&this._upgradeSchema(i.result,e)}}}))}async _upgradeSchema(e,t){throw new Error("Method not implemented.")}async _evaluateCurrentSchema(e,t){const n=e.transaction("schema","readonly").objectStore("schema"),r=[];for(const[e,i]of Object.entries(t.types))r.push(new Promise(((t,r)=>{const o=n.get(e);o.onsuccess=()=>{const r=new aI(e,o.result,i);if(!r.isValidUpgrade)throw new Error(`${e} schema on client is incompatible with schema.`);n.put({...i},e),t(r)},o.onerror=()=>r(o.error)})));const i=await Promise.all(r);if(i.some((e=>!e?.isValidUpgrade)))throw new Error("Schema on client is incompatible with schema.");return await Promise.all(i.map((e=>{new Promise(((t,r)=>{const i=n.put({...e.to},e.name);i.onsuccess=()=>t(e),i.onerror=()=>r(i.error)}))}))),i}_createInitialSchema(e,t){for(const[n,r]of Object.entries(t.types)){const t="autoIncrement"===r.primaryKey.strategy?{keyPath:r.primaryKey.column,autoIncrement:!0}:{},i=e.createObjectStore(n,t);Object.entries(r.columns).forEach((([e,t])=>{i.createIndex(e,e,{unique:r.primaryKey.column===e})}))}e.createObjectStore("schema").transaction.oncomplete=()=>{const n=e.transaction("schema","readwrite").objectStore("schema");for(const[e,r]of Object.entries(t.types))n.add({...r},e)}}}class dI{db;schema;constructor(e,t){this.db=e,this.schema=t}set(e,t,n,r={}){new Promise(((r,i)=>{const o=this.db.transaction(e,"readwrite").objectStore(e);if(o.autoIncrement){const s=this.schema.types[e],a={...n};null!=t?(a[s.primaryKey.column]=t,o.put(a)):o.add(a),o.transaction.oncomplete=()=>r(),o.transaction.onerror=e=>i(e)}else{if(null==t)throw new Error("Cannot set a record without an id when the primary key is not auto-incrementing");const e=new Promise(((e,n)=>{const r=o.get(t);r.onsuccess=()=>e(r.result),r.onerror=()=>n(r.error)}));e.then((e=>{e?o.put({...e,...n},t):o.put(n,t),o.transaction.oncomplete=()=>r(),o.transaction.onerror=()=>i()}))}}))}delete(e,t){new Promise(((n,r)=>{const i=this.db.transaction(e,"readwrite").objectStore(e).delete(t);i.onsuccess=()=>n(),i.onerror=()=>r(i.error)}))}async deleteQuery(e,t){const n=this.schema.types[e];if(void 0===n)throw new Error(`Type ${e} not found in schema`);const r=this.db.transaction(e,"readwrite").objectStore(e);if(t.key){const e=r.delete(t.key);e.onerror=()=>{throw e.error}}else{const e=this._getFilterFn(n,t),i=t.limit??0;let o=0;await this._forEachResult(n,r,t,(async t=>{if(t){const[n,r]=[t.primaryKey,t.value];return e([n,r])&&await new Promise(((e,n)=>{const r=t.delete();r.onsuccess=()=>{o++,e()},r.onerror=()=>n(r.error)})),0===i||i>0&&o<=i}return!1}))}}async _forEachResult(e,t,n,r){return await new Promise(((i,o)=>{const s=this._getCursor(e,t,n);s.onsuccess=async()=>{const e=s.result;e&&await r(e)?e.continue():i()},s.onerror=()=>o(s.error)}))}_getCursor(e,t,n){if(n.keyPrefix)return t.openCursor(IDBKeyRange.bound(n.keyPrefix,n.keyPrefix+""));if(n.range){const r=t.index(n.range.column);if("number"!==e.columns[n.range.column].type)throw new Error(`Range query requires column ${n.range.column} to be of type number`);let i;if(n.range.lowerBound&&n.range.upperBound?i=IDBKeyRange.bound(n.range.lowerBound,n.range.upperBound):n.range.lowerBound?i=IDBKeyRange.lowerBound(n.range.lowerBound):n.range.upperBound&&(i=IDBKeyRange.upperBound(n.range.upperBound)),void 0===i)throw new Error("Range query requires at least one bound to be specified");return r.openCursor(i)}return t.openCursor()}_getFilterFn(e,t){if(t.search){const n=Object.entries(e.columns).filter((([e,t])=>t.fullText)).map((([e,t])=>e));if(n.length>0)return([e,r])=>{const i=t.search?.toLowerCase()??"";return n.map((e=>r[e]?.toLowerCase().replace(lI,"").split(" ").filter((e=>e.length>0)))).some((e=>e?.includes(i)))}}return()=>!0}async query(e,t){const n=this.schema.types[e];if(void 0===n)throw new Error(`Type ${e} not found in schema`);const r=this.db.transaction(e,"readwrite").objectStore(e);if(t.key){const e=t.key,n=await new Promise(((t,n)=>{const i=r.get(e);i.onsuccess=()=>t(i.result),i.onerror=()=>n(i.error)}));return n?[[e,n]]:void 0}{const e=t.limit??0,i=[];let o=0;if(await this._forEachResult(n,r,t,(async t=>!!t&&(i.push([t.primaryKey,t.value]),o++,0===e||e>0&&o<=e))),i)return i.filter(this._getFilterFn(n,t))}}disconnect(){}}const hI={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},pI=(new RegExp(`^(?<stem>.+?)(${Object.keys(hI).join("|")})$`),{icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""}),gI=(new RegExp(`^(?<stem>.+?)(${Object.keys(pI).join("|")})$`),"(?:(?:[^aeiouy]|(?<=[aeiou])y)+)"),fI="(?:(?:[aeiou]|(?<![aeiou])y)+)";new RegExp(`^${gI}?${fI}${gI}`),new RegExp(`^${gI}?${fI}${gI}${fI}?$`),new RegExp(`^${gI}?(?:${fI}${gI}){2,}`),new RegExp(`^${gI}?[aeiouy]`),new RegExp(`^${gI}[aeiouy][^aeiouwxy]$`);const mI=Ur.dt({blockedDomains:Ur.IX(Ur.dt({domain:Ur.Z_,enabled:Ur.O7,withSubdomains:Ur.O7}))}),bI=Ur.dt({allowedDomains:Ur.IX(Ur.dt({domain:Ur.Z_,enabled:Ur.O7,withSubdomains:Ur.O7}))}),yI=Ur.dt({blockedClients:Ur.IX(Ur.dt({client:Ur.Z_,enabled:Ur.O7}))}),_I=Ur.dt({regex:Ur.Z_,priority:Ur.pk,description:Ur.Z_,prefixes:Ur.IX(Ur.Z_)}),vI=Ur.dt({patterns:Ur.IM(Ur.Z_,_I)}),wI=Ur.dt({clientControlsEnabled:Ur.O7,confidentialModeEnabled:Ur.O7,allowedDomainsEnabled:Ur.O7,dlpEnabled:Ur.O7,dlpConfiguration:vI,touchTypistAvailable:Ur.O7}),SI=Ur.jV([Ur.dt({clientControls:wI}),Ur.r$({blockedDomains:mI,allowedDomains:bI,blockedClients:yI})]),kI=["clientControls","blockedDomains","allowedDomains","blockedClients"],II="appActions",CI=Ur.dt({appActions:Ur.dt({appsMetadata:Ur.IM(Ur.Z_,Ur.dt({dateLastAccessed:Ur.pk}))})}),EI={version:1,types:{ClientStore:{columns:{key:{type:"string",optional:!1,fullText:!1},value:{type:"string",optional:!1,fullText:!1}},primaryKey:{strategy:"supply",column:"key",_ts:void 0},_ts:void 0},AppActivity:{columns:{appId:{type:"string",optional:!1,fullText:!1},dateLastAccessed:{type:"number",optional:!1,fullText:!1}},primaryKey:{strategy:"supply",column:"appId",_ts:void 0},_ts:void 0}}},AI=Ta(5);class xI extends Fl{constructor(e,t,n,r,i,o=sI.create(new uI)){super(new jl("skills-bg-d5ccc5edf7e1",ZJ().message),{getSkills:async()=>{var e,t;if("test"===this._experimentClient.getTreatment(YS.RecentAppActions)&&(this._appsMetadataFromSettingsRegistry=await this._getAppsMetadataFromSettigsRegistry()),this._refreshAt<Date.now()&&(this._skills=null,this._refreshAt=Date.now()+AI),null!=this._skills)return await this._sortSkills(this._skills);if(null!=this._promise)return await this._promise;try{const n=null===(e=(await this._store.get(["user"])).user)||void 0===e?void 0:e.id;if(null==n)throw new Error("User not loaded");let r=gl.get(`${this._url}/users/${n}/skills`);this._experimentClient.isGateEnabled(De.LoadAppActionsFromAppletCdn)&&(r=r.queryParam("gosApiVersion",hk.version.toString()));const i=await this._getSkillsRankCache();return this._promise=this._apiService.ajax.json(r).then((e=>{const{skills:t}=e;return t.map((e=>({id:e.id,displayName:e.displayInfo.name,iconUrl:e.displayInfo.iconUrl,srcUrl:e.currentVersion.srcUrl,tags:e.displayInfo.tags,dateLastAccessed:this._getDateLastAccessed(e.id,i),label:e.displayInfo.label})))})),this._skills=await this._sortSkills(null!==(t=await this._promise)&&void 0!==t?t:[]),this._skills}finally{this._promise=null}},onSkillLaunch:async(e,t)=>{await this._setSkillsRankCache(t,Date.now()),"test"===this._experimentClient.getTreatment(YS.RecentAppActions)&&(this._appsMetadataFromSettingsRegistry[t]={...this._appsMetadataFromSettingsRegistry[t],dateLastAccessed:Date.now()},this._updateAppsMetadataInSettingsRegistry(this._appsMetadataFromSettingsRegistry))}}),this._url=e,this._apiService=t,this._store=n,this._experimentClient=r,this._settingsRegistryService=i,this._gstoreBuilder=o,this._refreshAt=0,this._skills=null,this._promise=null,this._appsMetadataFromSettingsRegistry={},this._gstore=this._gstoreBuilder.create("appActions",EI)}async _getAppsMetadataFromSettigsRegistry(){try{const e=await this._settingsRegistryService.fetchMergedSettings([II],CI),{appActions:t}=e;return t.appsMetadata}catch(e){return{}}}async _updateAppsMetadataInSettingsRegistry(e){var t;const n=null===(t=(await this._store.get(["user"])).user)||void 0===t?void 0:t.id;n&&this._settingsRegistryService.updateSetting("USER",n,II,{appsMetadata:e})}async _getSkillsRankCache(){const{AppActivity:e}=await this._gstore.connect();try{return await e.queryMap({})}catch(e){return{}}finally{await e.disconnect()}}async _setSkillsRankCache(e,t){const{AppActivity:n}=await this._gstore.connect();try{await n.set(e,{dateLastAccessed:t})}finally{await n.disconnect()}}_getDateLastAccessed(e,t){var n,r,i,o;return null!==(o=null!==(r=null===(n=this._appsMetadataFromSettingsRegistry[e])||void 0===n?void 0:n.dateLastAccessed)&&void 0!==r?r:null===(i=t[e])||void 0===i?void 0:i.dateLastAccessed)&&void 0!==o?o:0}async _sortSkills(e){const t=await this._getSkillsRankCache();return e.map((e=>({...e,dateLastAccessed:this._getDateLastAccessed(e.id,t)}))).sort(((e,t)=>t.dateLastAccessed-e.dateLastAccessed))}}function TI(e,t,n,r){const i=q.create("gOS-bg-start");let o=!1,s=null;return e.fetchTreatments().then((()=>ok(e))).then((a=>{o||(a?s=function(e,t,n,r){const i=new tI,o=new sk(new Jk(e.fingerprints,t,(e=>i.get(ik(e).clientId).api))),s=new xI(N().appConfig.url.skills,e,t,n,r);return{dispose(){s.dispose(),o.dispose(),i.dispose()}}}(t,n,e,r):i.debug("gOS is disabled"))})).catch((e=>{i.error("failed to start gOS",e)})),{dispose(){o=!0,null==s||s.dispose()}}}function OI(e,t){return e.statusCode===t||e.status===t||e.code===t}class PI extends Error{constructor(e,t){super(e),this._reason=t}get reason(){return this._reason}}class RI extends PI{}class DI extends PI{}class NI extends PI{}class UI extends PI{}function MI(e,t=NI){return e instanceof PI?e:new t(e.message,e)}class jI{constructor(e){this._json=e,this._cache=new Map}async getEncryptionKey(e){const t=this._cache.get(e.keyId);if(t)return t;try{const t=await this._json(gl.get(Su(e.userId,e.keyId)));return t&&this._cache.set(e.keyId,t),t}catch(e){if(OI(e,404))return null;if(OI(e,500))throw new DI("Server error",e);throw MI(e)}}async createEncryptionKeys(e){try{await this._json(gl.post(Su(e.userId)).json(e.keys));for(const t of e.keys)this._cache.set(t.id,t)}catch(e){if(OI(e,400)){const t=e;if(t.body&&t.body.toLowerCase().includes("already exists"))throw new UI("Already exists",e);throw new NI("Invalid request",e)}if(OI(e,500))throw new DI("Server error",e);if(OI(e,207))throw new DI("Partial success",e);throw MI(e)}}}const FI="document_state_enc";var LI,GI,BI;(e=>{e.parse=function(e){return null===e?null:typeof e.character<"u"&&null!==e.character&&null!=e&&e.character.length&&e.timestamp&&typeof e.isSelfAuthored<"u"?{character:String(e.character),timestamp:Number(e.timestamp),sourceContentId:e.sourceContentId?String(e.sourceContentId):void 0,isSelfAuthored:!!e.isSelfAuthored}:null},e.is=function(e){return null!==e}})(LI||(LI={})),(e=>{e.parse=function(e){if(null===e)return null;try{return e.timestamp&&!isNaN(e.timestamp)&&e.delta?{timestamp:Number(e.timestamp),delta:{ops:e.delta.ops.map((e=>"retain"in e&&null!==e.retain&&typeof e.retain<"u"?{retain:e.retain}:"insert"in e&&null!==e.insert&&typeof e.insert<"u"?{insert:e.insert}:"delete"in e&&null!==e.delete&&typeof e.delete<"u"&&e.delete>0?{delete:e.delete}:null)).filter((e=>null!==e))},sourceContentId:e.sourceContentId?String(e.sourceContentId):void 0,isSelfAuthored:typeof e.isSelfAuthored<"u"&&null!==e.isSelfAuthored?e.isSelfAuthored:void 0,clientInfo:typeof e.clientInfo<"u"&&null!==e.clientInfo?e.clientInfo:void 0,sessionId:typeof e.sessionId<"u"&&null!==e.sessionId?e.sessionId:void 0}:null}catch{return null}},e.is=function(e){return null!==e}})(GI||(GI={})),(e=>{e.create=function(e,t){return{documentId:e,title:t,chars:[],sourcedContentStore:{kind:"internal",data:[]},deltaEdits:[]}}})(BI||(BI={}));const zI=function(e="(nomessage)"){Error.call(this,e),"captureStackTrace"in Error?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name=this.constructor.name};zI.prototype=Object.create(Error.prototype);class VI extends zI{constructor(e,t="empty"){super("Invariant condition failed: "+(e||"(unnamed)")),this.input=t}toString(){return`${this.message} on input[${this.input}]`}}function qI(e,t,n){var r;if(!e){const e=new VI("string"==typeof t?t:t&&t(),n);throw e.stack=null==(r=e.stack)?void 0:r.split("\n").filter((e=>-1===e.indexOf("errors."))).join("\n"),e}}var HI,WI,$I,XI,KI,YI,ZI,JI;(e=>{e.create=function(e,t,n,r,i,o,s){let a=[],c=[],l=[];if(r){const e=[...n].length;qI(e===r.length,`Expected that the text length ${e} be the same as the Char[] length ${r.length}`),a=r.map((e=>e.timestamp)),c=r.map((e=>e.isSelfAuthored)),l=r.map((e=>e.sourceContentId||null))}return{id:crypto.randomUUID(),url:e,sourceName:t,text:n,timestamps:a,isSelfAuthoredTags:c,originalSourceContentIds:l,prompt:i,promptDescription:o,sourceAccess:s}},e.is=function(e){return null!==e}})(HI||(HI={}));!function(e){e.create=function(e){return{char:e.character,timestamp:e.timestamp,isSelfAuthored:e.isSelfAuthored,sourceContentId:e.sourceContentId}},e.parse=function(e){return{character:e.char,timestamp:e.timestamp,isSelfAuthored:e.isSelfAuthored,sourceContentId:e.sourceContentId}}}(WI||(WI={})),function(e){e.create=function(e){return{...e}}}($I||($I={})),function(e){e.create=function(e){return{id:e.documentId,chars:e.chars.map(WI.create),sourcedContentStore:e.sourcedContentStore,deltaEdits:e.deltaEdits,title:e.title}},e.parse=function(e){return{documentId:e.id,chars:e.chars.map(WI.parse),sourcedContentStore:e.sourcedContentStore,deltaEdits:e.deltaEdits,title:e.title}}}(XI||(XI={})),function(e){e.create=function(e){return{id:e.documentId,chararray:e.chars.map(ZI.create),copyStore:{storeType:e.sourcedContentStore.kind,data:e.sourcedContentStore.data.map(JI.create)},deltas:e.deltaEdits.map(YI.create)}},e.parse=function(e){try{const t=e;if(t.id&&Array.isArray(t.chararray)&&t.copyStore&&t.copyStore.storeType&&Array.isArray(t.copyStore.data)&&Array.isArray(t.deltas)){const e=t.chararray.map(ZI.parse).filter(LI.is),n=t.copyStore.data.map(JI.parse).filter((e=>null!==e)),r=t.deltas.map(YI.parse).filter(GI.is);return e.length!==t.chararray.length||n.length!==t.copyStore.data.length||r.length!==t.deltas.length?null:{documentId:t.id,chars:e,sourcedContentStore:{kind:t.copyStore.storeType,data:n},deltaEdits:r}}return null}catch(e){return null}}}(KI||(KI={})),function(e){e.create=function(e){return{timestamp:e.timestamp,delta:e.delta,copyContentId:e.sourceContentId,isSelfAuthored:e.isSelfAuthored}},e.parse=function(e){try{const t=e;return t.timestamp&&!isNaN(t.timestamp)&&t.delta?{timestamp:Number(t.timestamp),delta:t.delta,sourceContentId:t.copyContentId?String(t.copyContentId):void 0,isSelfAuthored:t.isSelfAuthored}:null}catch(e){return null}}}(YI||(YI={})),function(e){e.create=function(e){return{timestamp:e.timestamp,text:e.character,copiedContentId:void 0!==e.sourceContentId&&null!==e.sourceContentId&&""!==e.sourceContentId?e.sourceContentId:void 0,isSelfAuthored:e.isSelfAuthored}},e.parse=function(e){try{const t=e;return void 0!==t.text&&t.text.length&&t.timestamp&&void 0!==t.isSelfAuthored?{character:String(t.text),timestamp:Number(t.timestamp),sourceContentId:t.copiedContentId?String(t.copiedContentId):void 0,isSelfAuthored:Boolean(t.isSelfAuthored)}:null}catch(e){return null}}}(ZI||(ZI={})),function(e){e.create=function(e){return{id:e.id,url:e.url,sourceName:e.sourceName,text:e.text,timestamps:e.timestamps,isSelfAuthoredTags:e.isSelfAuthoredTags,originalCopiedContentIds:e.originalSourceContentIds,prompt:e.prompt||null}},e.parse=function(e){try{const t=e;if(t.id&&t.url&&t.sourceName&&t.text&&Array.isArray(t.timestamps)&&Array.isArray(t.isSelfAuthoredTags)&&Array.isArray(t.originalCopiedContentIds)){const e=t.timestamps.filter((e=>!isNaN(e))),n=t.isSelfAuthoredTags.map(Boolean),r=t.originalCopiedContentIds.filter((e=>null===e||"string"==typeof e));return e.length===n.length&&n.length===r.length?{id:t.id,url:t.url,sourceName:t.sourceName,text:t.text,timestamps:e,isSelfAuthoredTags:n,originalSourceContentIds:r,prompt:t.prompt||void 0}:null}return null}catch(e){return null}}}(JI||(JI={}));const QI="AES-GCM",eC={name:QI},tC={length:256,...eC};function nC(e){return{iv:e,...eC}}function rC(){if(!self.crypto)throw new NI("Crypto API is not supported in this browser")}async function iC(e){rC();const t=await self.crypto.subtle.exportKey("raw",e);return new Uint8Array(t)}class oC{static ofRequest(e){return new Promise(((t,n)=>{e.onsuccess=n=>t(e.result),e.onerror=t=>n(e.error)}))}static ofTransaction(e){return new Promise(((t,n)=>{e.oncomplete=e=>t(),e.onerror=t=>n(e.error)}))}}class sC{constructor(e,t){this.keychain=t,this.textEncoder=new TextEncoder,this.textDecoder=new TextDecoder,this.uniqId=function(e){return t=>`${e}-${t}`}(e),this.userId=e}async serialize(e){try{const t=await this.keychain.getOrProvisionKey(e.documentId,this.userId),n=JSON.stringify(XI.create(e)),r=this.textEncoder.encode(n),i=await async function(e,t){rC();const n=self.crypto.getRandomValues(new Uint8Array(12));return{iv:n,encrypted:await self.crypto.subtle.encrypt(nC(n),t,e)}}(r,t);return{id:this.uniqId(e.documentId),documentId:e.documentId,data:i}}catch(e){throw MI(e,NI)}}async deserialize(e){const{documentId:t,data:n}=e,r=await this.keychain.getKey(t,this.userId);if(!r)throw new RI("Key not found for document");try{const e=await function(e,t){rC();const{iv:n,encrypted:r}=e;return self.crypto.subtle.decrypt(nC(n),t,r)}(n,r);return XI.parse(JSON.parse(this.textDecoder.decode(e)))}catch(e){throw MI(e,RI)}}}class aC{constructor(e,t){this._userId=e,this._keychain=t,this._log=q.create(`HWR-${aC.name}`),this._db=(0,h.Vo)((()=>this._openDb())),this._encryptionSerializer=e.view((e=>e?new sC(e,t):null))}_openDb(){const e=indexedDB.open("human_writing_report",2);return e.onupgradeneeded=this._onUpgradeNeeded.bind(this),oC.ofRequest(e)}_onUpgradeNeeded(e){const t=e.target.result;t.objectStoreNames.contains(FI)||t.createObjectStore(FI,{keyPath:"id",autoIncrement:!1})}_getEntityId(e,t){return`${e}-${t}`}async retrieve(e){const t=this._encryptionSerializer.get(),n=this._userId.get();if(!t||!n)return Promise.reject(MI(new Error("User is undefined")));try{const r=await this._db.get(),i=this._getEntityId(n,e),o=r.transaction([FI],"readonly"),s=o.objectStore(FI),a=await oC.ofRequest(s.get(i));return await oC.ofTransaction(o),a?t.deserialize(a):null}catch(e){return Promise.reject(MI(e))}}async store(e){const t=this._encryptionSerializer.get(),n=this._userId.get();if(!t||!n)return Promise.reject(MI(new Error("User is undefined")));try{const r=await t.serialize(e),i=(await this._db.get()).transaction([FI],"readwrite");return i.objectStore(FI).put({...r,documentId:e.documentId,id:this._getEntityId(n,e.documentId)}),oC.ofTransaction(i)}catch(e){return Promise.reject(MI(e))}}async delete(e){const t=this._userId.get();if(!t)return Promise.reject(MI(new Error("User is undefined")));try{const n=(await this._db.get()).transaction([FI],"readwrite");return n.objectStore(FI).delete(this._getEntityId(t,e)),await oC.ofTransaction(n)}catch(e){return Promise.reject(MI(e))}}}class cC{constructor(e){this._client=e}async getKey(e,t){const n=cC.createKeyId(e),r=await this.fetchKey(n,t);if(!r)return null;const i=qk(r);return await function(e,t=!1,n=["encrypt","decrypt"]){return rC(),self.crypto.subtle.importKey("raw",e,QI,t,n)}(i)}async getOrProvisionKey(e,t){let n=0;for(;n<=3;)try{return await this.getKey(e,t)||await this.provisionKey(e,t)}catch(e){if(e instanceof UI){if(n++<=2)continue;if(e.reason)throw MI(e.reason,NI);throw new NI("Too many retries")}throw MI(e)}throw new NI("Too many retries")}async provisionKey(e,t){const n=cC.createKeyId(e),r=await(rC(),self.crypto.subtle.generateKey(tC,!0,["encrypt","decrypt"]));return await this.storeKeys([{keyId:n,key:r}],t),r}static createKeyId(e){return Xi("key-"+e)}async fetchKey(e,t){const n=await this._client.getEncryptionKey({keyId:e,userId:t});return null==n?void 0:n.keyMaterial}async storeKeys(e,t){const n=[];for(const t of e){const e=await iC(t.key);n.push({id:t.keyId,keyMaterial:Wk(e)})}await this._client.createEncryptionKeys({keys:n,userId:t})}}class lC{constructor(e,t,n){this._url=e,this._apiService=t,this._experimentClient=n,this._log=q.create("TranslateServiceImpl")}async checkAvailability(e){if(!this._experimentClient.isGateEnabled(De.FetchSkills))return!1;try{const t=gl.get(`${this._url}/users/${e}/skills`),n=await this._apiService.ajax.json(t);return this._log.info("Fetched skills list",n),n.skills.some((e=>"Translate with Grammarly"===e.displayInfo.name))}catch(t){return this._log.warn(`Failed to fetch skills for userId=${e}. Error: ${t.message}`),!1}}}class uC{constructor(e){this._factory=e,this._instance=null}_getInstance(){return this._instance||(this._instance=this._factory()),this._instance}checkAvailability(e){return this._getInstance().checkAvailability(e)}}function dC(e,t,n){var r;(null===(r=de().experimentClient)||void 0===r?void 0:r.isGateEnabled(De.LogAssistantNotchStatus))&&e.alwaysOnAssistantNotchToggle(hC(n),!!t,hC(t))}function hC(e){return"boolean"==typeof e?e?"true":"false":"defaultOn"===e?"defaultOn":String(e)}const pC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function gC(e,t,n,r){let i,o,s;const a=t||[0],c=(n=n||0)>>>3,l=-1===r?3:0;for(i=0;i<e.length;i+=1)s=i+c,o=s>>>2,a.length<=o&&a.push(0),a[o]|=e[i]<<8*(l+r*(s%4));return{value:a,binLen:8*e.length+n}}function fC(e,t,n){switch(t){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw new Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(e){case"HEX":return function(e,t,r){return function(e,t,n,r){let i,o,s,a;if(0!=e.length%2)throw new Error("String of HEX type must be in byte increments");const c=t||[0],l=(n=n||0)>>>3,u=-1===r?3:0;for(i=0;i<e.length;i+=2){if(o=parseInt(e.substr(i,2),16),isNaN(o))throw new Error("String of HEX type contains invalid characters");for(a=(i>>>1)+l,s=a>>>2;c.length<=s;)c.push(0);c[s]|=o<<8*(u+r*(a%4))}return{value:c,binLen:4*e.length+n}}(e,t,r,n)};case"TEXT":return function(e,r,i){return function(e,t,n,r,i){let o,s,a,c,l,u,d,h,p=0;const g=n||[0],f=(r=r||0)>>>3;if("UTF8"===t)for(d=-1===i?3:0,a=0;a<e.length;a+=1)for(o=e.charCodeAt(a),s=[],128>o?s.push(o):2048>o?(s.push(192|o>>>6),s.push(128|63&o)):55296>o||57344<=o?s.push(224|o>>>12,128|o>>>6&63,128|63&o):(a+=1,o=65536+((1023&o)<<10|1023&e.charCodeAt(a)),s.push(240|o>>>18,128|o>>>12&63,128|o>>>6&63,128|63&o)),c=0;c<s.length;c+=1){for(u=p+f,l=u>>>2;g.length<=l;)g.push(0);g[l]|=s[c]<<8*(d+i*(u%4)),p+=1}else for(d=-1===i?2:0,h="UTF16LE"===t&&1!==i||"UTF16LE"!==t&&1===i,a=0;a<e.length;a+=1){for(o=e.charCodeAt(a),!0===h&&(c=255&o,o=c<<8|o>>>8),u=p+f,l=u>>>2;g.length<=l;)g.push(0);g[l]|=o<<8*(d+i*(u%4)),p+=2}return{value:g,binLen:8*p+r}}(e,t,r,i,n)};case"B64":return function(e,t,r){return function(e,t,n,r){let i,o,s,a,c,l,u,d=0;const h=t||[0],p=(n=n||0)>>>3,g=-1===r?3:0,f=e.indexOf("=");if(-1===e.search(/^[a-zA-Z0-9=+/]+$/))throw new Error("Invalid character in base-64 string");if(e=e.replace(/=/g,""),-1!==f&&f<e.length)throw new Error("Invalid '=' found in base-64 string");for(o=0;o<e.length;o+=4){for(c=e.substr(o,4),a=0,s=0;s<c.length;s+=1)i=pC.indexOf(c.charAt(s)),a|=i<<18-6*s;for(s=0;s<c.length-1;s+=1){for(u=d+p,l=u>>>2;h.length<=l;)h.push(0);h[l]|=(a>>>16-8*s&255)<<8*(g+r*(u%4)),d+=1}}return{value:h,binLen:8*d+n}}(e,t,r,n)};case"BYTES":return function(e,t,r){return function(e,t,n,r){let i,o,s,a;const c=t||[0],l=(n=n||0)>>>3,u=-1===r?3:0;for(o=0;o<e.length;o+=1)i=e.charCodeAt(o),a=o+l,s=a>>>2,c.length<=s&&c.push(0),c[s]|=i<<8*(u+r*(a%4));return{value:c,binLen:8*e.length+n}}(e,t,r,n)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch(e){throw new Error("ARRAYBUFFER not supported by this environment")}return function(e,t,r){return function(e,t,n,r){return gC(new Uint8Array(e),t,n,r)}(e,t,r,n)};case"UINT8ARRAY":try{new Uint8Array(0)}catch(e){throw new Error("UINT8ARRAY not supported by this environment")}return function(e,t,r){return gC(e,t,r,n)};default:throw new Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}function mC(e,t,n,r){switch(e){case"HEX":return function(e){return function(e,t,n,r){let i,o,s="";const a=t/8,c=-1===n?3:0;for(i=0;i<a;i+=1)o=e[i>>>2]>>>8*(c+n*(i%4)),s+="0123456789abcdef".charAt(o>>>4&15)+"0123456789abcdef".charAt(15&o);return r.outputUpper?s.toUpperCase():s}(e,t,n,r)};case"B64":return function(e){return function(e,t,n,r){let i,o,s,a,c,l="";const u=t/8,d=-1===n?3:0;for(i=0;i<u;i+=3)for(a=i+1<u?e[i+1>>>2]:0,c=i+2<u?e[i+2>>>2]:0,s=(e[i>>>2]>>>8*(d+n*(i%4))&255)<<16|(a>>>8*(d+n*((i+1)%4))&255)<<8|c>>>8*(d+n*((i+2)%4))&255,o=0;o<4;o+=1)l+=8*i+6*o<=t?pC.charAt(s>>>6*(3-o)&63):r.b64Pad;return l}(e,t,n,r)};case"BYTES":return function(e){return function(e,t,n){let r,i,o="";const s=t/8,a=-1===n?3:0;for(r=0;r<s;r+=1)i=e[r>>>2]>>>8*(a+n*(r%4))&255,o+=String.fromCharCode(i);return o}(e,t,n)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch(e){throw new Error("ARRAYBUFFER not supported by this environment")}return function(e){return function(e,t,n){let r;const i=t/8,o=new ArrayBuffer(i),s=new Uint8Array(o),a=-1===n?3:0;for(r=0;r<i;r+=1)s[r]=e[r>>>2]>>>8*(a+n*(r%4))&255;return o}(e,t,n)};case"UINT8ARRAY":try{new Uint8Array(0)}catch(e){throw new Error("UINT8ARRAY not supported by this environment")}return function(e){return function(e,t,n){let r;const i=t/8,o=-1===n?3:0,s=new Uint8Array(i);for(r=0;r<i;r+=1)s[r]=e[r>>>2]>>>8*(o+n*(r%4))&255;return s}(e,t,n)};default:throw new Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}const bC=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],yC=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],_C=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],vC="Chosen SHA variant is not supported";function wC(e,t){let n,r;const i=e.binLen>>>3,o=t.binLen>>>3,s=i<<3,a=4-i<<3;if(i%4!=0){for(n=0;n<o;n+=4)r=i+n>>>2,e.value[r]|=t.value[n>>>2]<<s,e.value.push(0),e.value[r+1]|=t.value[n>>>2]>>>a;return(e.value.length<<2)-4>=o+i&&e.value.pop(),{value:e.value,binLen:e.binLen+t.binLen}}return{value:e.value.concat(t.value),binLen:e.binLen+t.binLen}}function SC(e){const t={outputUpper:!1,b64Pad:"=",outputLen:-1},n=e||{},r="Output length must be a multiple of 8";if(t.outputUpper=n.outputUpper||!1,n.b64Pad&&(t.b64Pad=n.b64Pad),n.outputLen){if(n.outputLen%8!=0)throw new Error(r);t.outputLen=n.outputLen}else if(n.shakeLen){if(n.shakeLen%8!=0)throw new Error(r);t.outputLen=n.shakeLen}if("boolean"!=typeof t.outputUpper)throw new Error("Invalid outputUpper formatting option");if("string"!=typeof t.b64Pad)throw new Error("Invalid b64Pad formatting option");return t}function kC(e,t,n,r){const i=e+" must include a value and format";if(!t){if(!r)throw new Error(i);return r}if(void 0===t.value||!t.format)throw new Error(i);return fC(t.format,t.encoding||"UTF8",n)(t.value)}class IC{constructor(e,t,n){const r=n||{};if(this.t=t,this.i=r.encoding||"UTF8",this.numRounds=r.numRounds||1,isNaN(this.numRounds)||this.numRounds!==parseInt(this.numRounds,10)||1>this.numRounds)throw new Error("numRounds must a integer >= 1");this.s=e,this.o=[],this.h=0,this.u=!1,this.l=0,this.A=!1,this.H=[],this.S=[]}update(e){let t,n=0;const r=this.p>>>5,i=this.m(e,this.o,this.h),o=i.binLen,s=i.value,a=o>>>5;for(t=0;t<a;t+=r)n+this.p<=o&&(this.C=this.R(s.slice(t,t+r),this.C),n+=this.p);this.l+=n,this.o=s.slice(n>>>5),this.h=o%this.p,this.u=!0}getHash(e,t){let n,r,i=this.U;const o=SC(t);if(this.v){if(-1===o.outputLen)throw new Error("Output length must be specified in options");i=o.outputLen}const s=mC(e,i,this.K,o);if(this.A&&this.T)return s(this.T(o));for(r=this.F(this.o.slice(),this.h,this.l,this.g(this.C),i),n=1;n<this.numRounds;n+=1)this.v&&i%32!=0&&(r[r.length-1]&=16777215>>>24-i%32),r=this.F(r,i,0,this.B(this.s),i);return s(r)}setHMACKey(e,t,n){if(!this.L)throw new Error("Variant does not support HMAC");if(this.u)throw new Error("Cannot set MAC key after calling update");const r=fC(t,(n||{}).encoding||"UTF8",this.K);this.M(r(e))}M(e){const t=this.p>>>3,n=t/4-1;let r;if(1!==this.numRounds)throw new Error("Cannot set numRounds with MAC");if(this.A)throw new Error("MAC key already set");for(t<e.binLen/8&&(e.value=this.F(e.value,e.binLen,0,this.B(this.s),this.U));e.value.length<=n;)e.value.push(0);for(r=0;r<=n;r+=1)this.H[r]=909522486^e.value[r],this.S[r]=1549556828^e.value[r];this.C=this.R(this.H,this.C),this.l=this.p,this.A=!0}getHMAC(e,t){const n=SC(t);return mC(e,this.U,this.K,n)(this.k())}k(){let e;if(!this.A)throw new Error("Cannot call getHMAC without first setting MAC key");const t=this.F(this.o.slice(),this.h,this.l,this.g(this.C),this.U);return e=this.R(this.S,this.B(this.s)),e=this.F(t,this.U,this.p,e,this.U),e}}function CC(e,t){return e<<t|e>>>32-t}function EC(e,t){return e>>>t|e<<32-t}function AC(e,t){return e>>>t}function xC(e,t,n){return e^t^n}function TC(e,t,n){return e&t^~e&n}function OC(e,t,n){return e&t^e&n^t&n}function PC(e){return EC(e,2)^EC(e,13)^EC(e,22)}function RC(e,t){const n=(65535&e)+(65535&t);return(65535&(e>>>16)+(t>>>16)+(n>>>16))<<16|65535&n}function DC(e,t,n,r){const i=(65535&e)+(65535&t)+(65535&n)+(65535&r);return(65535&(e>>>16)+(t>>>16)+(n>>>16)+(r>>>16)+(i>>>16))<<16|65535&i}function NC(e,t,n,r,i){const o=(65535&e)+(65535&t)+(65535&n)+(65535&r)+(65535&i);return(65535&(e>>>16)+(t>>>16)+(n>>>16)+(r>>>16)+(i>>>16)+(o>>>16))<<16|65535&o}function UC(e){return EC(e,7)^EC(e,18)^AC(e,3)}function MC(e){return EC(e,6)^EC(e,11)^EC(e,25)}function jC(e){return[1732584193,4023233417,2562383102,271733878,3285377520]}function FC(e,t){let n,r,i,o,s,a,c;const l=[];for(n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],c=0;c<80;c+=1)l[c]=c<16?e[c]:CC(l[c-3]^l[c-8]^l[c-14]^l[c-16],1),a=c<20?NC(CC(n,5),TC(r,i,o),s,1518500249,l[c]):c<40?NC(CC(n,5),xC(r,i,o),s,1859775393,l[c]):c<60?NC(CC(n,5),OC(r,i,o),s,2400959708,l[c]):NC(CC(n,5),xC(r,i,o),s,3395469782,l[c]),s=o,o=i,i=CC(r,30),r=n,n=a;return t[0]=RC(n,t[0]),t[1]=RC(r,t[1]),t[2]=RC(i,t[2]),t[3]=RC(o,t[3]),t[4]=RC(s,t[4]),t}function LC(e,t,n,r){let i;const o=15+(t+65>>>9<<4),s=t+n;for(;e.length<=o;)e.push(0);for(e[t>>>5]|=128<<24-t%32,e[o]=4294967295&s,e[o-1]=s/4294967296|0,i=0;i<e.length;i+=16)r=FC(e.slice(i,i+16),r);return r}class GC extends IC{constructor(e,t,n){if("SHA-1"!==e)throw new Error(vC);super(e,t,n);const r=n||{};this.L=!0,this.T=this.k,this.K=-1,this.m=fC(this.t,this.i,this.K),this.R=FC,this.g=function(e){return e.slice()},this.B=jC,this.F=LC,this.C=[1732584193,4023233417,2562383102,271733878,3285377520],this.p=512,this.U=160,this.v=!1,r.hmacKey&&this.M(kC("hmacKey",r.hmacKey,this.K))}}function BC(e){let t;return t="SHA-224"==e?yC.slice():_C.slice(),t}function zC(e,t){let n,r,i,o,s,a,c,l,u,d,h;const p=[];for(n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],c=t[6],l=t[7],h=0;h<64;h+=1)p[h]=h<16?e[h]:DC(EC(g=p[h-2],17)^EC(g,19)^AC(g,10),p[h-7],UC(p[h-15]),p[h-16]),u=NC(l,MC(s),TC(s,a,c),bC[h],p[h]),d=RC(PC(n),OC(n,r,i)),l=c,c=a,a=s,s=RC(o,u),o=i,i=r,r=n,n=RC(u,d);var g;return t[0]=RC(n,t[0]),t[1]=RC(r,t[1]),t[2]=RC(i,t[2]),t[3]=RC(o,t[3]),t[4]=RC(s,t[4]),t[5]=RC(a,t[5]),t[6]=RC(c,t[6]),t[7]=RC(l,t[7]),t}class VC extends IC{constructor(e,t,n){if("SHA-224"!==e&&"SHA-256"!==e)throw new Error(vC);super(e,t,n);const r=n||{};this.T=this.k,this.L=!0,this.K=-1,this.m=fC(this.t,this.i,this.K),this.R=zC,this.g=function(e){return e.slice()},this.B=BC,this.F=function(t,n,r,i){return function(e,t,n,r,i){let o,s;const a=15+(t+65>>>9<<4),c=t+n;for(;e.length<=a;)e.push(0);for(e[t>>>5]|=128<<24-t%32,e[a]=4294967295&c,e[a-1]=c/4294967296|0,o=0;o<e.length;o+=16)r=zC(e.slice(o,o+16),r);return s="SHA-224"===i?[r[0],r[1],r[2],r[3],r[4],r[5],r[6]]:r,s}(t,n,r,i,e)},this.C=BC(e),this.p=512,this.U="SHA-224"===e?224:256,this.v=!1,r.hmacKey&&this.M(kC("hmacKey",r.hmacKey,this.K))}}class qC{constructor(e,t){this.Y=e,this.N=t}}function HC(e,t){let n;return t>32?(n=64-t,new qC(e.N<<t|e.Y>>>n,e.Y<<t|e.N>>>n)):0!==t?(n=32-t,new qC(e.Y<<t|e.N>>>n,e.N<<t|e.Y>>>n)):e}function WC(e,t){let n;return t<32?(n=32-t,new qC(e.Y>>>t|e.N<<n,e.N>>>t|e.Y<<n)):(n=64-t,new qC(e.N>>>t|e.Y<<n,e.Y>>>t|e.N<<n))}function $C(e,t){return new qC(e.Y>>>t,e.N>>>t|e.Y<<32-t)}function XC(e,t,n){return new qC(e.Y&t.Y^e.Y&n.Y^t.Y&n.Y,e.N&t.N^e.N&n.N^t.N&n.N)}function KC(e){const t=WC(e,28),n=WC(e,34),r=WC(e,39);return new qC(t.Y^n.Y^r.Y,t.N^n.N^r.N)}function YC(e,t){let n,r;n=(65535&e.N)+(65535&t.N),r=(e.N>>>16)+(t.N>>>16)+(n>>>16);const i=(65535&r)<<16|65535&n;return n=(65535&e.Y)+(65535&t.Y)+(r>>>16),r=(e.Y>>>16)+(t.Y>>>16)+(n>>>16),new qC((65535&r)<<16|65535&n,i)}function ZC(e,t,n,r){let i,o;i=(65535&e.N)+(65535&t.N)+(65535&n.N)+(65535&r.N),o=(e.N>>>16)+(t.N>>>16)+(n.N>>>16)+(r.N>>>16)+(i>>>16);const s=(65535&o)<<16|65535&i;return i=(65535&e.Y)+(65535&t.Y)+(65535&n.Y)+(65535&r.Y)+(o>>>16),o=(e.Y>>>16)+(t.Y>>>16)+(n.Y>>>16)+(r.Y>>>16)+(i>>>16),new qC((65535&o)<<16|65535&i,s)}function JC(e,t,n,r,i){let o,s;o=(65535&e.N)+(65535&t.N)+(65535&n.N)+(65535&r.N)+(65535&i.N),s=(e.N>>>16)+(t.N>>>16)+(n.N>>>16)+(r.N>>>16)+(i.N>>>16)+(o>>>16);const a=(65535&s)<<16|65535&o;return o=(65535&e.Y)+(65535&t.Y)+(65535&n.Y)+(65535&r.Y)+(65535&i.Y)+(s>>>16),s=(e.Y>>>16)+(t.Y>>>16)+(n.Y>>>16)+(r.Y>>>16)+(i.Y>>>16)+(o>>>16),new qC((65535&s)<<16|65535&o,a)}function QC(e,t){return new qC(e.Y^t.Y,e.N^t.N)}function eE(e){const t=WC(e,19),n=WC(e,61),r=$C(e,6);return new qC(t.Y^n.Y^r.Y,t.N^n.N^r.N)}function tE(e){const t=WC(e,1),n=WC(e,8),r=$C(e,7);return new qC(t.Y^n.Y^r.Y,t.N^n.N^r.N)}function nE(e){const t=WC(e,14),n=WC(e,18),r=WC(e,41);return new qC(t.Y^n.Y^r.Y,t.N^n.N^r.N)}const rE=[new qC(bC[0],3609767458),new qC(bC[1],602891725),new qC(bC[2],3964484399),new qC(bC[3],2173295548),new qC(bC[4],4081628472),new qC(bC[5],3053834265),new qC(bC[6],2937671579),new qC(bC[7],3664609560),new qC(bC[8],2734883394),new qC(bC[9],1164996542),new qC(bC[10],1323610764),new qC(bC[11],3590304994),new qC(bC[12],4068182383),new qC(bC[13],991336113),new qC(bC[14],633803317),new qC(bC[15],3479774868),new qC(bC[16],2666613458),new qC(bC[17],944711139),new qC(bC[18],2341262773),new qC(bC[19],2007800933),new qC(bC[20],1495990901),new qC(bC[21],1856431235),new qC(bC[22],3175218132),new qC(bC[23],2198950837),new qC(bC[24],3999719339),new qC(bC[25],766784016),new qC(bC[26],2566594879),new qC(bC[27],3203337956),new qC(bC[28],1034457026),new qC(bC[29],2466948901),new qC(bC[30],3758326383),new qC(bC[31],168717936),new qC(bC[32],1188179964),new qC(bC[33],1546045734),new qC(bC[34],1522805485),new qC(bC[35],2643833823),new qC(bC[36],2343527390),new qC(bC[37],1014477480),new qC(bC[38],1206759142),new qC(bC[39],344077627),new qC(bC[40],1290863460),new qC(bC[41],3158454273),new qC(bC[42],3505952657),new qC(bC[43],106217008),new qC(bC[44],3606008344),new qC(bC[45],1432725776),new qC(bC[46],1467031594),new qC(bC[47],851169720),new qC(bC[48],3100823752),new qC(bC[49],1363258195),new qC(bC[50],3750685593),new qC(bC[51],3785050280),new qC(bC[52],3318307427),new qC(bC[53],3812723403),new qC(bC[54],2003034995),new qC(bC[55],3602036899),new qC(bC[56],1575990012),new qC(bC[57],1125592928),new qC(bC[58],2716904306),new qC(bC[59],442776044),new qC(bC[60],593698344),new qC(bC[61],3733110249),new qC(bC[62],2999351573),new qC(bC[63],3815920427),new qC(3391569614,3928383900),new qC(3515267271,566280711),new qC(3940187606,3454069534),new qC(4118630271,4000239992),new qC(116418474,1914138554),new qC(174292421,2731055270),new qC(289380356,3203993006),new qC(460393269,320620315),new qC(685471733,587496836),new qC(852142971,1086792851),new qC(1017036298,365543100),new qC(1126000580,2618297676),new qC(1288033470,3409855158),new qC(1501505948,4234509866),new qC(1607167915,987167468),new qC(1816402316,1246189591)];function iE(e){return"SHA-384"===e?[new qC(3418070365,yC[0]),new qC(1654270250,yC[1]),new qC(2438529370,yC[2]),new qC(355462360,yC[3]),new qC(1731405415,yC[4]),new qC(41048885895,yC[5]),new qC(3675008525,yC[6]),new qC(1203062813,yC[7])]:[new qC(_C[0],4089235720),new qC(_C[1],2227873595),new qC(_C[2],4271175723),new qC(_C[3],1595750129),new qC(_C[4],2917565137),new qC(_C[5],725511199),new qC(_C[6],4215389547),new qC(_C[7],327033209)]}function oE(e,t){let n,r,i,o,s,a,c,l,u,d,h,p;const g=[];for(n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],c=t[6],l=t[7],h=0;h<80;h+=1)h<16?(p=2*h,g[h]=new qC(e[p],e[p+1])):g[h]=ZC(eE(g[h-2]),g[h-7],tE(g[h-15]),g[h-16]),u=JC(l,nE(s),(m=a,b=c,new qC((f=s).Y&m.Y^~f.Y&b.Y,f.N&m.N^~f.N&b.N)),rE[h],g[h]),d=YC(KC(n),XC(n,r,i)),l=c,c=a,a=s,s=YC(o,u),o=i,i=r,r=n,n=YC(u,d);var f,m,b;return t[0]=YC(n,t[0]),t[1]=YC(r,t[1]),t[2]=YC(i,t[2]),t[3]=YC(o,t[3]),t[4]=YC(s,t[4]),t[5]=YC(a,t[5]),t[6]=YC(c,t[6]),t[7]=YC(l,t[7]),t}class sE extends IC{constructor(e,t,n){if("SHA-384"!==e&&"SHA-512"!==e)throw new Error(vC);super(e,t,n);const r=n||{};this.T=this.k,this.L=!0,this.K=-1,this.m=fC(this.t,this.i,this.K),this.R=oE,this.g=function(e){return e.slice()},this.B=iE,this.F=function(t,n,r,i){return function(e,t,n,r,i){let o,s;const a=31+(t+129>>>10<<5),c=t+n;for(;e.length<=a;)e.push(0);for(e[t>>>5]|=128<<24-t%32,e[a]=4294967295&c,e[a-1]=c/4294967296|0,o=0;o<e.length;o+=32)r=oE(e.slice(o,o+32),r);return s="SHA-384"===i?[r[0].Y,r[0].N,r[1].Y,r[1].N,r[2].Y,r[2].N,r[3].Y,r[3].N,r[4].Y,r[4].N,r[5].Y,r[5].N]:[r[0].Y,r[0].N,r[1].Y,r[1].N,r[2].Y,r[2].N,r[3].Y,r[3].N,r[4].Y,r[4].N,r[5].Y,r[5].N,r[6].Y,r[6].N,r[7].Y,r[7].N],s}(t,n,r,i,e)},this.C=iE(e),this.p=1024,this.U="SHA-384"===e?384:512,this.v=!1,r.hmacKey&&this.M(kC("hmacKey",r.hmacKey,this.K))}}const aE=[new qC(0,1),new qC(0,32898),new qC(2147483648,32906),new qC(2147483648,2147516416),new qC(0,32907),new qC(0,2147483649),new qC(2147483648,2147516545),new qC(2147483648,32777),new qC(0,138),new qC(0,136),new qC(0,2147516425),new qC(0,2147483658),new qC(0,2147516555),new qC(2147483648,139),new qC(2147483648,32905),new qC(2147483648,32771),new qC(2147483648,32770),new qC(2147483648,128),new qC(0,32778),new qC(2147483648,2147483658),new qC(2147483648,2147516545),new qC(2147483648,32896),new qC(0,2147483649),new qC(2147483648,2147516424)],cE=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]];function lE(e){let t;const n=[];for(t=0;t<5;t+=1)n[t]=[new qC(0,0),new qC(0,0),new qC(0,0),new qC(0,0),new qC(0,0)];return n}function uE(e){let t;const n=[];for(t=0;t<5;t+=1)n[t]=e[t].slice();return n}function dE(e,t){let n,r,i,o;const s=[],a=[];if(null!==e)for(r=0;r<e.length;r+=2)t[(r>>>1)%5][(r>>>1)/5|0]=QC(t[(r>>>1)%5][(r>>>1)/5|0],new qC(e[r+1],e[r]));for(n=0;n<24;n+=1){for(o=lE(),r=0;r<5;r+=1)s[r]=(c=t[r][0],l=t[r][1],u=t[r][2],d=t[r][3],h=t[r][4],new qC(c.Y^l.Y^u.Y^d.Y^h.Y,c.N^l.N^u.N^d.N^h.N));for(r=0;r<5;r+=1)a[r]=QC(s[(r+4)%5],HC(s[(r+1)%5],1));for(r=0;r<5;r+=1)for(i=0;i<5;i+=1)t[r][i]=QC(t[r][i],a[r]);for(r=0;r<5;r+=1)for(i=0;i<5;i+=1)o[i][(2*r+3*i)%5]=HC(t[r][i],cE[r][i]);for(r=0;r<5;r+=1)for(i=0;i<5;i+=1)t[r][i]=QC(o[r][i],new qC(~o[(r+1)%5][i].Y&o[(r+2)%5][i].Y,~o[(r+1)%5][i].N&o[(r+2)%5][i].N));t[0][0]=QC(t[0][0],aE[n])}var c,l,u,d,h;return t}function hE(e){let t,n,r=0;const i=[0,0],o=[4294967295&e,e/4294967296&2097151];for(t=6;t>=0;t--)n=o[t>>2]>>>8*t&255,0===n&&0===r||(i[r+1>>2]|=n<<8*(r+1),r+=1);return r=0!==r?r:1,i[0]|=r,{value:r+1>4?i:[i[0]],binLen:8+8*r}}function pE(e){return wC(hE(e.binLen),e)}function gE(e,t){let n,r=hE(t);r=wC(r,e);const i=t>>>2,o=(i-r.value.length%i)%i;for(n=0;n<o;n++)r.value.push(0);return r.value}class fE extends IC{constructor(e,t,n){let r=6,i=0;super(e,t,n);const o=n||{};if(1!==this.numRounds){if(o.kmacKey||o.hmacKey)throw new Error("Cannot set numRounds with MAC");if("CSHAKE128"===this.s||"CSHAKE256"===this.s)throw new Error("Cannot set numRounds for CSHAKE variants")}switch(this.K=1,this.m=fC(this.t,this.i,this.K),this.R=dE,this.g=uE,this.B=lE,this.C=lE(),this.v=!1,e){case"SHA3-224":this.p=i=1152,this.U=224,this.L=!0,this.T=this.k;break;case"SHA3-256":this.p=i=1088,this.U=256,this.L=!0,this.T=this.k;break;case"SHA3-384":this.p=i=832,this.U=384,this.L=!0,this.T=this.k;break;case"SHA3-512":this.p=i=576,this.U=512,this.L=!0,this.T=this.k;break;case"SHAKE128":r=31,this.p=i=1344,this.U=-1,this.v=!0,this.L=!1,this.T=null;break;case"SHAKE256":r=31,this.p=i=1088,this.U=-1,this.v=!0,this.L=!1,this.T=null;break;case"KMAC128":r=4,this.p=i=1344,this.I(n),this.U=-1,this.v=!0,this.L=!1,this.T=this.X;break;case"KMAC256":r=4,this.p=i=1088,this.I(n),this.U=-1,this.v=!0,this.L=!1,this.T=this.X;break;case"CSHAKE128":this.p=i=1344,r=this._(n),this.U=-1,this.v=!0,this.L=!1,this.T=null;break;case"CSHAKE256":this.p=i=1088,r=this._(n),this.U=-1,this.v=!0,this.L=!1,this.T=null;break;default:throw new Error(vC)}this.F=function(e,t,n,o,s){return function(e,t,n,r,i,o,s){let a,c,l=0;const u=[],d=i>>>5,h=t>>>5;for(a=0;a<h&&t>=i;a+=d)r=dE(e.slice(a,a+d),r),t-=i;for(e=e.slice(a),t%=i;e.length<d;)e.push(0);for(a=t>>>3,e[a>>2]^=o<<a%4*8,e[d-1]^=2147483648,r=dE(e,r);32*u.length<s&&(c=r[l%5][l/5|0],u.push(c.N),!(32*u.length>=s));)u.push(c.Y),l+=1,0==64*l%i&&(dE(null,r),l=0);return u}(e,t,0,o,i,r,s)},o.hmacKey&&this.M(kC("hmacKey",o.hmacKey,this.K))}_(e,t){const n=function(e){const t=e||{};return{funcName:kC("funcName",t.funcName,1,{value:[],binLen:0}),customization:kC("Customization",t.customization,1,{value:[],binLen:0})}}(e||{});t&&(n.funcName=t);const r=wC(pE(n.funcName),pE(n.customization));if(0!==n.customization.binLen||0!==n.funcName.binLen){const e=gE(r,this.p>>>3);for(let t=0;t<e.length;t+=this.p>>>5)this.C=this.R(e.slice(t,t+(this.p>>>5)),this.C),this.l+=this.p;return 4}return 31}I(e){const t=function(e){const t=e||{};return{kmacKey:kC("kmacKey",t.kmacKey,1),funcName:{value:[1128353099],binLen:32},customization:kC("Customization",t.customization,1,{value:[],binLen:0})}}(e||{});this._(e,t.funcName);const n=gE(pE(t.kmacKey),this.p>>>3);for(let e=0;e<n.length;e+=this.p>>>5)this.C=this.R(n.slice(e,e+(this.p>>>5)),this.C),this.l+=this.p;this.A=!0}X(e){const t=wC({value:this.o.slice(),binLen:this.h},function(e){let t,n,r=0;const i=[0,0],o=[4294967295&e,e/4294967296&2097151];for(t=6;t>=0;t--)n=o[t>>2]>>>8*t&255,0===n&&0===r||(i[r>>2]|=n<<8*r,r+=1);return r=0!==r?r:1,i[r>>2]|=r<<8*r,{value:r+1>4?i:[i[0]],binLen:8+8*r}}(e.outputLen));return this.F(t.value,t.binLen,this.l,this.g(this.C),e.outputLen)}}var mE,bE;!function(e){const t=q.create("desktop-integration.gdocs.redirect");async function n(e,n,r,i,o="web-store",s=t){if(i){await e.gdocs.gdocsOptedIn(),await e.settings.setLlamaInstalled();try{await n.setLlamaInstalled(),r.tabs.reload(i),i.id&&"web-extension"===r.tabs.kind&&await r.tabs.focusTab(i.id),Nc.desktopIntegrationGDocsRedirect(o)}catch(e){s.error("redirect error",e)}}}e.findTab=async function(e,n,r=t){try{const t=(await e.tabs.getAllTabs()||[]).find((e=>{if(!e.url)return;const t=new class{constructor(e,t,n){if("SHA-1"==e)this.O=new GC(e,t,n);else if("SHA-224"==e||"SHA-256"==e)this.O=new VC(e,t,n);else if("SHA-384"==e||"SHA-512"==e)this.O=new sE(e,t,n);else{if("SHA3-224"!=e&&"SHA3-256"!=e&&"SHA3-384"!=e&&"SHA3-512"!=e&&"SHAKE128"!=e&&"SHAKE256"!=e&&"CSHAKE128"!=e&&"CSHAKE256"!=e&&"KMAC128"!=e&&"KMAC256"!=e)throw new Error(vC);this.O=new fE(e,t,n)}}update(e){this.O.update(e)}getHash(e,t){return this.O.getHash(e,t)}setHMACKey(e,t,n){this.O.setHMACKey(e,t,n)}getHMAC(e,t){return this.O.getHMAC(e,t)}}("SHA-256","TEXT",{encoding:"UTF8"});return t.update(e.url),t.getHash("HEX")===n}));return t?r.info("tab with hash found"):r.warn("tab with hash not found"),t}catch(e){return void r.error("find tab by hash error",e)}},e.activateTab=n,e.activateTabByHash=async function(t,r,i,o,s="web-store"){const a=await e.findTab(i,o);await n(t,r,i,a,s)},e.initialEnable=async function(t,r,i,o){var s,a;const{extensionSettings:c}=await o.get(["extensionSettings"]);if(null===(s=null==c?void 0:c.common)||void 0===s?void 0:s.desktopIntegrationRedirectUrlHash)return;const l=null===(a=await r.getLlamaRedirectUrl())||void 0===a?void 0:a.value;if(!l)return;const u=await e.findTab(i,l);u&&(await n(t,r,i,u,"web-store"),await t.settings.setDesktopIntegrationRedirectUrlHash(l),await r.deleteLlamaRedirectUrl())}}(mE||(mE={})),function(e){e[e.nonEmptyMigration=0]="nonEmptyMigration",e[e.emptyMigration=1]="emptyMigration"}(bE||(bE={}));class yE{constructor(e,t,n,r=[],i=((e,t,n)=>t)){this._name=e,this._source=t,this._destination=n,this._destValuesToKeep=r,this._valuesMapper=i,this._migrationFlagSuccessfulValue="ok",this._migrationFlagKey=`__migration-${yE.migrationFlagUniqueKey}:(${this._name})`,this._migrationInProgress=!1,this.migrationAwareDestination=function(e,t){const{get:n,set:r,getAll:i,remove:o}=ae(e);return{get:n,set:r,getAll:i,remove:o,removeAll:Ts.fromAsync((async()=>{const n=await e.getAll();await e.removeAll(),await e.set(W(t,n))})),changes:e.changes,dispose:()=>{}}}(this._destination,(e=>e===this._migrationFlagKey))}async _getMigrated(){return(await this._destination.get(this._migrationFlagKey))[this._migrationFlagKey]===this._migrationFlagSuccessfulValue}async _setMigrated(){await this._destination.set({[this._migrationFlagKey]:this._migrationFlagSuccessfulValue});const e=await this._destination.get(this._migrationFlagKey);if(e[this._migrationFlagKey]!==this._migrationFlagSuccessfulValue)throw new Error(`Could not verify status write, actual value: ${e}`)}async _runMigration(){g(!this._migrationInProgress,"migration already in progress"),this._migrationInProgress=!0;try{const e=await this._source.getAll(),t=W(((e,t)=>void 0!==t),H(((t,n)=>this._valuesMapper(t,n,e)),e)),n=0===Object.keys(t).length,r=await this._destination.get(this._destValuesToKeep),i={...t,...r};if(await this._destination.removeAll(),await this._destination.set(i),!(0,h.fS)(i,await this._destination.getAll()))throw new Error("Could not verify write");return this._migrationInProgress=!1,n?bE.emptyMigration:bE.nonEmptyMigration}catch(e){throw this._migrationInProgress=!1,e}}async ensureMigrationCompleted(){if(await this._getMigrated())return Is.alreadyMigrated;{const e=await this._runMigration();switch(await this._setMigrated(),e){case bE.nonEmptyMigration:return Is.success;case bE.emptyMigration:return Is.successWithEmpty;default:(0,ll.vE)(e)}}}}yE.migrationFlagUniqueKey="104ccd8c-9919-9ae4-931f-782fb197486c";const _E=As();function vE(e,t,n,r,i=!1){if(null==e)return;const o=e;if("string"!=typeof t)return Object.keys(t).forEach((e=>{t[e]&&vE(o,e,t[e],r)}));{if(!n)return;const e=o[_E]||[];return o[_E]=e,r?(o[_E]=e.filter((e=>!(e.event===t&&e.cb===n))),o.removeEventListener(t,n,i)):(e.push({event:t,cb:n}),o.addEventListener(t,n,i)),{el:o,event:t,cb:n,bubble:i}}}function wE(e,t,n,r){const i=e;t||null==i[_E]?vE(i,t,n,!0,r):i[_E].forEach((e=>wE(i,e.event,e.cb,e.bubble)))}function SE(e,t,n=self){const r=void 0===self.document;return(0,ao.iR)("setOnlineState",(n=>{n?e():t()})),r?function(e,t){const n=(0,oo.F)(xa(5)).pipe((0,Gr.U)((()=>navigator.onLine)),(0,ea.x)()).subscribe((n=>n?e():t()));return{stop:()=>n.unsubscribe()}}(e,t):function(e,t,n){return vE(n,{online:e,offline:t}),{stop:()=>wE(n,{online:e,offline:t})}}(e,t,n)}var kE,IE;function CE(e,t,n,r,i){const o=function(e,t,n,r,i){return{"external:changed-plan":()=>{Kt().externalChangePlan(),i.refreshUser("changed-plan")},"external:changed-dialect":()=>{Kt().externalChangeDialect(),i.refreshUser("changed-dialect")},"external:changed-user":()=>{Kt().externalChangeUser(),i.refreshUser("changed-user")},"external:cleanup":async()=>{Kt().externalLogout();const e=[...kE.allPersistentKeys,"extensionInstallDate","serializedUserInfo"],n=await t.all(),r=Object.keys(n).filter((t=>!e.includes(t)||t.includes(yE.migrationFlagUniqueKey)));await t.remove(r),i.refreshUser("logout")},"external:llama-action":async t=>{if(t&&t.action)switch(t.action){case"llama-installed":e.settings.setLlamaInstalled(),Nc.desktopIntegrationEnabled("funnel-callback");break;case"llama-uninstalled":e.settings.setLlamaUninstalled(),r.deleteLlamaInstalled(),i.refreshUser("llama-uninstalled"),Nc.desktopIntegrationDisabled();break;case"llama-redirect-url":await mE.activateTabByHash(e,r,n,t.redirectUrl,"funnel-page")}},"external:close-current-tab":async()=>{await n.tabs.closeCurrentTab()},"external:enable-superhuman-go":async()=>{await async function(e,t,n){var r,i,o,s;if(!(null===(r=ZJ().experimentClient)||void 0===r?void 0:r.isGateEnabled(De.EnableAssistantForGoUsers)))return;const a=await t.all(),c=a.user,l=a.extensionSettings;if(!c||c.anonymous)return;await e.base.setUser({...c,go_experience:!0});const u=((null==l?void 0:l.common)||{}).alwaysAvailableAssistantSettings||{};!0===u.enabled||"defaultOn"===u.enabled||(await e.quickSettings.toggleAlwaysAvailableAssistant("defaultOn"),dC(Nc,"defaultOn",u.enabled));const d=(null===(i=ZJ().experimentClient)||void 0===i?void 0:i.isGateEnabled(Te.SuperhumanWelcomePageUseQaUrl))?qe().superhumanGoWelcome.qa:qe().superhumanGoWelcome.production;await(null===(s=(o=n.tabs).create)||void 0===s?void 0:s.call(o,{url:d}))}(e,t,n)}}}(e,t,n,r,i);Object.keys(o).forEach((e=>ZJ().message.on(e,o[e]))),SE((()=>e.connection.setOffline(!1)),(()=>e.connection.setOffline(!0)))}!function(e){e.allPersistentKeys=["user","version","dynamicConfig","extensionSettings","dynamicConfigOverrideKey","environmentState","connection","activeTab","extensionFSM","fieldsSettings","alarms","clickToRunEnabledOnce","dapi","growthSettings","extensionMeta","gnarInternalStorage","extensionInstallDate","extensionInstallSource","lastAuthnEvent","copiedTextMessage","passport","mise","iterable","connectorSettings","oauthSDKTokenExchangeMethod",$S,"authenticationOptions","authTokenInitialRefreshDone","authenticationStarted","claimedUserSettings","inviteNudgeFirstTimestamp"];const t=["user","dapi","dynamicConfig","alarms","lastAuthnEvent","mise",$S];e.parse=(t,n=e.allPersistentKeys)=>$(n.map((e=>[e,t[e]]))),e.parseChange=t=>W(((e,t)=>void 0!==t),$(e.allPersistentKeys.map((e=>[e,t[e]])))),e.hasProtectedKeys=e=>t.some((t=>t in e))}(kE||(kE={})),function(e){const t=e=>"src/js/"+e;e.MAIN=t("Grammarly.js"),e.STYLES=t("Grammarly.styles.js"),e.CHECK=t("Grammarly-check.js"),e.GDOCS=t("Grammarly-gDocs.js")}(IE||(IE={}));const EE=q.create("lib.bg.chrome"),AE=self.chrome;let xE=!1;function TE(){!Le()&&!Ne()||xE||(AE.runtime.onUpdateAvailable&&AE.runtime.onUpdateAvailable.addListener((e=>{EE.info(`Detected the next extension version ${e.version}`),xE=!0;const t=(n=1,r=20,Math.floor(Math.random()*(r-n+1))+n);var n,r;EE.info(`Going to update in minutes: ${t}`),setTimeout(AE.runtime.reload,Ta(t))})),OE())}function OE(){AE.runtime.requestUpdateCheck&&AE.runtime.requestUpdateCheck((e=>"update_available"===e?EE.info("update pending..."):"no_update"===e?EE.info("no update found"):"throttled"===e?EE.info("Oops, I'm asking too frequently - I need to back off."):void 0)),setTimeout(OE,Oa(2))}async function PE(e,t,n){if(!Le()&&!Ne())return;const r=e.tabs;if("web-extension"!==r.kind)throw new Error(`Unexpected tabs kind "${r.kind}"`);const i=AE.runtime.getManifest();if(!i)return;const o=i.content_scripts;if(!o)return;const s=o.pop();if(!s)return;const{js:a,css:c}=s;if(!a||!c)return;const l=await jE(r,t,!0,n);if(!l.length)return;EE.info("Load content scripts to",l);const u=(e,t)=>{Kt().chromeContentScriptLoadError(e&&e.message,t),EE.error(`cs ${t} loaded with error: ${e.message}`)},d=performance.now();await Promise.all(l.map((e=>e.id)).map((e=>Promise.all([a.reduce(((t,n)=>t.then((()=>r.executeScript(n,e)))),Promise.resolve()).then((()=>EE.info("scripts loaded"))).catch((e=>u(e,"js"))),c.reduce(((t,n)=>t.then((()=>r.insertCSS(e,n,void 0)))),Promise.resolve()).then((()=>EE.info("css loaded"))).catch((e=>u(e,"css")))]))));const h=performance.now();EE.trace(`Content scripts load time: ${h-d} ms`)}async function RE(e,t){const n=e.tabs;if(!Le()||"web-extension"!==n.kind)return;const r=function(){const e=AE.runtime.getManifest();if(!e)return;const t=e.content_scripts;if(!t)return;const n=IE;return{version:e.version,cs:{check:t.find((e=>{var t;return null===(t=e.js)||void 0===t?void 0:t.includes(n.CHECK)})),main:t.find((e=>{var t;return null===(t=e.js)||void 0===t?void 0:t.includes(n.MAIN)})),gDocs:t.find((e=>{var t;return null===(t=e.js)||void 0===t?void 0:t.includes(n.GDOCS)}))}}}();if(r)try{const e=await jE(n,t),i=await async function(e,t,n){const r=[];for(const i of e)try{const e=await ME(i,t,n);e&&r.push({cs:e,tab:i})}catch(e){EE.warn(`skip tab since couldn't access css on tab with id ${String(i.id)} and url ${String(i.url)}`,e)}return r}(e,r,n);await Promise.all(i.map((({tab:e,cs:t})=>Promise.all([t.js.reduce(((t,r)=>t.then((()=>n.executeScript(r,e.id)))),Promise.resolve())])))),EE.info("cs is updated on",e.map((e=>e.url)))}catch(e){const t=e&&e.message||e;EE.error("cs is updated with error",t)}}function DE(e,t){return t.executeFunction((()=>document.body.dataset.newGrCSLoaded),e)}function NE(e,t){return t.executeFunction((()=>document.body.dataset.newGrCSCheckLoaded),e)}function UE(e,t,n){return e===t?void 0:n}async function ME(e,t,n){const r=e.id;if(!r)return;const i=await DE(r,n),o=await NE(r,n);if(e.url&&t.cs.gDocs){const[n]=t.cs.gDocs.matches||[];if(n&&e.url.match(n.replace("*","^.*")))return!!i&&UE(i,t.version,t.cs.gDocs)}return i?UE(i,t.version,t.cs.main):UE(o,t.version,t.cs.check)}async function jE(e,t,n,r){const i=await e.getAllTabs(),o=await e.getActiveTabUrl(),s=r?e=>e.url&&e.url.includes(r):({url:e})=>{if(e&&0===e.indexOf("http"))return!!e.includes("grammarly")||t.get(Ct(e),e).enabled},a=i.filter(s);return(await Promise.all(a.map(n?async t=>{const n=t.id;if(n){const r=await DE(n,e),i=await NE(n,e);return r||i?void 0:t}}:e=>Promise.resolve(e)))).filter((e=>!!e)).sort((({url:e})=>e===o?-1:1))}const FE="superhumanGoFirstTimeToggle",LE=q.create("openWelcomePage");async function GE(e){var t;const n=new Vc;LE.debug("request to open");try{if(await n.isCompleted(FE))return void LE.debug("user has completed welcome page, skipping")}catch(e){return void LE.warn("failure to check welcome page status",e)}try{const n=(null===(t=ZJ().experimentClient)||void 0===t?void 0:t.isGateEnabled(Te.SuperhumanWelcomePageUseQaUrl))?qe().superhumanGoWelcome.qa:qe().superhumanGoWelcome.production;LE.debug("opening welcome page",{url:n}),await e.open(n,!0)}catch(e){return void LE.warn("failure to open welcome page",e)}LE.debug("welcome page opened");try{await n.markCompleted(FE),LE.debug("welcome page marked as completed")}catch(e){LE.warn("failure to mark welcome page as completed",e)}}const BE="data-enable-grammarly",zE=["id","email","firstName","lastName","anonymous","type","subscriptionFree","isTest","premium","settings","registrationDate","groups","extensionInstallDate","edc","institutionInfo","roles","editorFeatures","customSessionTimeoutInfo"],VE=q.create("universal.bg.user.manger.utils");async function qE(e,t=!1){var n,r;if(!t){if(!(null!==(r=null===(n=ZJ().experimentClient)||void 0===n?void 0:n.isGateEnabled(Te.EnableAssistantForGoUsers))&&void 0!==r&&r))return!1}const i=["superhuman.com","pp-sh.io","staging-superhuman.com"];for(const t of i)try{const n=await e.getCookieFromDomain(t,"sh_installation_flow_source");if(n&&"superhuman"===n.value)return VE.info(`Found sh_installation_flow_source=superhuman from ${t}`),!0}catch(e){VE.warn(`Failed to read sh_installation_flow_source cookie from ${t}:`,e)}return!1}var HE;!function(e){e.MAX_COOKIE_HEADER_LENGTH=7168,e.trackCookieHeaderSize=async function(t){try{const n=await t.getAllGrammarlyCookies(),r=n.reduce(((e,{value:t})=>e+t.length),0);if(r>e.MAX_COOKIE_HEADER_LENGTH){const{name:e,value:{length:t}}=n.reduce(((e,t)=>e.value.length>t.value.length?e:t),{name:"",value:""});Mc("cookie-overflow",r,{name:e,length:t})}}catch(e){VE.warn("fetch grammarly cookies fail. Message: ",e.message)}},e.fetchUser=async function(e,t,n){const r=(n?gl.get(qe().userOrAnonymousV5):gl.post(qe().userOrAnonymousV4)).queryParam("field","frontend_primaryLanguage").queryParam("field","frontend_soundFluent").queryParam("field","frontend_role").queryParam("field","frontend_premiumTrialEndDate"),i=e.ajaxFactory({requestExtender:gl.Extender.compose(Yc.toHeaderAppender({...e.fingerprints,csrfToken:()=>t.getCSRFToken(!0).then((e=>null!=e?e:void 0))}),(e=>async()=>{const t=await async function(){try{const e=ZJ().browserApi.managedStorage;if(void 0===e)return"";const[t,n]=await e.get("GrammarlyEnrollmentToken");if(n)throw n;return t?`enrollment-token ${t}`:""}catch(e){return Kt().auth.manageModeTimeoutFail(e.message),VE.error("Fail to get GrammarlyEnrollmentToken from managedStore",e),""}}();return t&&e.header("Grammarly-Auth-Policy",t),e}))});return await i.json(r)},e.prepareUser=function(e={},t){e.premium="Premium"===e.type;const{customFields:n}=e,r=zE.reduce(((t,n)=>{const r=e[n];return void 0!==r&&Object.assign(t,{[n]:r}),t}),{settings:{},customFields:n});return void 0!==t&&Object.assign(r,{go_experience:t}),r}}(HE||(HE={}));class WE{static isEnabled(){return!1}}const $E="%appName%",XE={extensionSettingsToolbar:"%appName%SettingsToolbar",gdocsSidebarCardList:"%appName%AdvancedIssues",assistantCardList:"%appName%AdvancedIssues",extensionSettingsAssistant:"%appName%AssistantSettings",gdocsGoals:"%appName%AssistantGoals",extensionBusinessUphookPopup:"gb%appName%UphookPopup",gbExtensionSettingsToolbar:"gb%appName%SettingsToolbar",gbExtensionSettingsAssistant:"gb%appName%AssistantSettings",extensionGButton:"%appName%GButton",extPreviewsPopup:"%appName%PreviewsPopup",toneSuggestion:"%appName%ToneDetector",grammarlyGoPrompts:"%appName%GrammarlyGoPrompts",plagiarism:"%appName%_plagiarism_plagiarismView_premium"};function KE(e,t){return{key:e,value:t}}function YE(e){var t;return(null!==(t=XE[e])&&void 0!==t?t:e).replace($E,((e,t)=>{const n=o.getAppName(Be(),N().bundleInfo.extensionType,N().bundleInfo.deploymentType);return 0===t?n:(r=n).charAt(0).toUpperCase()+r.slice(1);var r}))}function ZE(e,t){return KE(e,t)}function JE(e){return e.map((e=>[e.key,e.value].map(encodeURIComponent).join("="))).join("&")}function QE(e,t){if(0===t.length)return e;const[n,r]=e.split("#"),i=n.includes("?");return[n,JE(t)].join(i?"&":"?")+(r?`#${r}`:"")}function eA(e){const t=[];return void 0!==e.medium&&t.push(ZE("utm_medium",e.medium)),void 0!==e.source&&t.push(ZE("utm_source",e.source)),void 0!==e.campaign&&t.push(ZE("utm_campaign",YE(e.campaign))),e.clickToRun&&t.push(ZE("click_to_run","true")),t}function tA(e){return eA(e)}KE("fromExtension","true"),KE("acr_values","idp:google");eA({medium:"internal"})[0];function nA(e,t){return QE(qe().uninstall,[...void 0===e?[]:[KE("domain",e)],...eA({medium:"internal",campaign:"extensionUninstall"}),KE("extensionName","chrome"),KE("extensionVersion","14.1264.0"),...t?[KE("product",t)]:[]])}async function rA(e,t,n){if(Me())return;if(Le()&&e)return;if(t)return;await qE(n,!0)?await GE(ZJ().browserApi.tabs):await async function(e,t){const n=await t.getChromeStoreInstallUTM(),r=!!n&&"true"===n.value,i=Le()?(a=r,c=WE.isEnabled(),QE(qe().extensionSuccess,eA({medium:a?"navigation":"store",source:Be(),clickToRun:c}))):(s=e,QE(qe().afterInstall,[KE("extension_install","true"),...eA({medium:s?"navigation":"store",source:s?void 0:Be()})])),{tabs:o}=ZJ().browserApi;var s;var a,c;Nc.welcomePageShow(i);const l=await(e?o.updateCurrent(i):o.open(i,!0));Nc.welcomePageOpened(null==l?void 0:l.id,null==l?void 0:l.url)}(e,n)}const iA={},oA={start(e){iA[e]=Date.now()},stop(e){const t=this.passed(e);return delete iA[e],t},passed:e=>e&&iA[e]?Date.now()-iA[e]:0},sA=q.create("lib.profiler");class aA{constructor(){this.timings={},this.track=async(e,...t)=>this._track(!1,e,...t),this.trackAsync=async(e,...t)=>this._track(!0,e,...t),this._track=async(e,t,...n)=>{const r=t.name+(e?"__sync":"");oA.start(r);try{e?await t(...n):t(...n)}finally{this.timings[r]=oA.stop(r)}}}static start(e){oA.start(e)}static stop(e,t=3e4){const n=oA.stop(e),r=Kt();return n>t&&(sA.warn(`profiler_${e}_time_exceeded ${n}`),"pageConfig_init"===e&&r.tooLongPageConfigInit(n),"updateUser"===e&&r.tooLongUserUpdateTime(n)),n}start(e){oA.start(e)}stop(e){this.timings[e]=oA.stop(e)}}var cA=__webpack_require__(8146),lA=(__webpack_require__(651),__webpack_require__(92379));const uA=class e{constructor(e,t,n){this.tenantId=e,this.provider=t,this.eventEmitter=n,this.localOrder=[],this.syncTimer=null}updateLocalOrderFromInstances(e){this.localOrder=[...e]}getCurrentOrder(){return[...this.localOrder]}getCurrentOrderAgentIds(){return this.localOrder.map((e=>e.agentId))}async reorderWithOptimisticUpdate(e,t){if(!this.localOrder.find((t=>t.agentInstanceId===e.agentInstanceId)))throw new Error(`Cannot reorder: Agent instance with id '${e.agentInstanceId}' not found`);const n=[...this.localOrder];try{this.updateLocalOrder(e,t),this.emit(this.localOrder),await this.provider.saveInstalledAgentsOrder(this.tenantId,e.agentInstanceId,null==t?void 0:t.agentInstanceId),this.scheduleDeferredSync()}catch(e){throw this.localOrder=n,this.emit(n),e}}updateLocalOrder(e,t){const n=this.localOrder.findIndex((t=>t.agentInstanceId===e.agentInstanceId));if(-1===n)return;this.localOrder.splice(n,1);let r=this.localOrder.length;if(t){const e=this.localOrder.findIndex((e=>e.agentInstanceId===t.agentInstanceId));-1!==e&&(r=e)}this.localOrder.splice(r,0,e)}scheduleDeferredSync(){this.syncTimer&&clearTimeout(this.syncTimer),this.syncTimer=setTimeout((()=>{this.syncOrderFromBackend()}),e.SYNC_DEBOUNCE_DELAY_MS)}async syncOrderFromBackend(){try{const e=[...(await this.provider.listAgentInstances(this.tenantId)).agentInstances];this.arraysEqual(this.localOrder,e)||(this.localOrder=e,this.emit(e))}catch(e){console.error("Error syncing agent order from backend:",e)}}emit(e){this.eventEmitter.emit("installedAgentsOrderChanged",{agentIds:e.map((e=>e.agentId))})}arraysEqual(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n].agentInstanceId!==t[n].agentInstanceId)return!1;return!0}dispose(){this.syncTimer&&(clearTimeout(this.syncTimer),this.syncTimer=null)}};uA.SYNC_DEBOUNCE_DELAY_MS=2e3;(0,lA.lazy)((()=>Promise.all([__webpack_require__.e(3806),__webpack_require__.e(7297),__webpack_require__.e(6214),__webpack_require__.e(9566),__webpack_require__.e(9718),__webpack_require__.e(5120),__webpack_require__.e(9453),__webpack_require__.e(2120),__webpack_require__.e(5079)]).then(__webpack_require__.bind(__webpack_require__,99278)).then((e=>({default:e.ThirdPartyAgent})))));cA.km.all;const dA=Object.freeze({PROD:"https://coda.io",STAGING:"https://staging.coda.io",HEAD:"https://head.coda.io",DEV:"https://dev.coda.io:8080"}),hA=(Object.freeze({PROD:"https://coda.grammarly.com",STAGING:"https://coda.ppgr.io",HEAD:"https://coda.qagr.io",DEV:"https://coda-local.ppgr.io:8080"}),Object.freeze({ListPacks:{path:"/apis/v1/packs/listings",queryParams:{CertifiedAgentsOnly:"certifiedAgentsOnly",Direction:"direction",IncludeBrainOnlyPacks:"includeBrainOnlyPacks",Limit:"limit",PageToken:"pageToken",PackIds:"packIds",SortBy:"sortBy"}},SearchPacks:{path:"/internalAppApi/packs/search",queryParams:{ExcludePackIds:"excludePackIds",IncludeBrainOnlyPacks:"includeBrainOnlyPacks",IncludePackIds:"includePackIds",Limit:"limit",Offset:"offset",Q:"q",CertifiedAgentsOnly:"certifiedAgentsOnly",PrioritizeAgentCertified:"prioritizeAgentCertified"}},CreateAgentInstance:{path:e=>`/internalAppApi/agentInstances/${e}`},DeleteAgentInstance:{path:(e,t)=>`/internalAppApi/agentInstances/${e}/${encodeURIComponent(t)}`},UserAccountInfo:{path:"/internalAppApi/account/userAccountInfo"},ListAgentInstances:{path:e=>`/internalAppApi/agentInstances/${e}`,queryParams:{Limit:"limit",Offset:"offset",IncludePackListings:"includePackListings"}},GetExternalConnections:{path:"/internalAppApi/account/externalConnections",queryParams:{PackId:"packId",IgnoreVersionsAfterLive:"ignoreVersionsAfterLive"}},BrainTenantId:{path:"/internalAppApi/agentInstances/brainTenantId"},ReorderAgents:{path:(e,t)=>`/internalAppApi/agentInstances/${e}/${encodeURIComponent(t)}/reorder`},CreateDefaultAgentInstances:{path:e=>`/internalAppApi/agentInstances/${e}/createDefaultAgentInstances`},ListPack:{path:e=>`/apis/v1/packs/${e}/listing`},GetCreateAgentInstanceContext:{path:e=>`/internalAppApi/agentInstances/${e}/createAgentInstanceContext`,queryParams:{PackId:"packId"}},ListIngestions:{path:e=>`/internalAppApi/csb/${e}/ingestions`,queryParams:{RootCsbIngestionId:"rootCsbIngestionId",IngestionName:"ingestionName",PackId:"packId",Limit:"limit",PageToken:"pageToken",OrderBy:"orderBy",Direction:"direction",Context:"context"}}}));function pA(e){var t,n,r;const i=(null==(n=null==(t=e.makers)?void 0:t[0])?void 0:n.name)||cA.eh.UNKNOWN;return{id:(0,cA.QZ)(e.packId.toString()),name:e.name,icon:e.logoUrl||"https://coda.io/favicon.ico",logo:e.logo,creator:i,description:e.agentDescription||"No description available",shortDescription:e.agentShortDescription||"No short description available",agentImages:null==(r=e.agentImages)?void 0:r.map((e=>({imageUrl:e.imageUrl,assetId:e.assetId,filename:e.filename,mimeType:e.mimeType,altText:e.altText}))),privacyPolicyUrl:e.privacyPolicyUrl,termsOfServiceUrl:e.termsOfServiceUrl,externalMetadataUrl:e.externalMetadataUrl,certifiedAgent:e.certifiedAgent||!1,isPaidAgentFreeInBeta:e.isPaidAgentFreeInBeta||!1,releaseId:e.releaseId,lastReleasedAt:e.lastReleasedAt,supportEmail:e.supportEmail}}const gA=class extends Kc.Base{constructor(e,t,n){super(),this._url=e,this._ajaxFactory=t,this._fingerprints=n,this._ajax=this._ajaxFactory({credentials:"omit",requestExtender:Yc.toHeaderAppender(this._fingerprints)})}static getDefaultUrl(e){switch(e){case".qagr.io":return dA.HEAD;case".ppgr.io":return dA.STAGING;default:return dA.PROD}}async fetchAgents(e){if(e)return(await this.searchAgents(e)).map((e=>({...e,status:cA._W.Uninstalled})));try{const{path:e,queryParams:t}=hA.ListPacks,n=gl.get(`${this._url}${e}`).queryParam(t.Limit,100..toString());return(await this._ajax.json(n)).items.map((e=>({...pA(e),status:cA._W.Uninstalled})))}catch(e){throw console.error("Error fetching agents from Coda API:",e),e}}async listAgents(e={}){const t=e.nextPageToken?this.buildPaginatedRequest(e.nextPageToken):this.buildInitialRequest(e),n=await this._ajax.json(t);return{items:n.items.map((e=>pA(e))),nextPageToken:n.nextPageToken}}buildInitialRequest(e){const t=this.applyDefaultOptions(e),{path:n,queryParams:r}=hA.ListPacks,i=gl.get(`${this._url}${n}`);return this.addQueryParamsToRequest(i,r,t),i}buildPaginatedRequest(e){const{path:t,queryParams:n}=hA.ListPacks,r=gl.get(`${this._url}${t}`);return r.queryParam(n.PageToken,e),r}applyDefaultOptions(e){const t=Object.fromEntries(Object.entries(e).filter((([,e])=>void 0!==e)));return{limit:cA.Cn,includeBrainOnlyPacks:!0,sortBy:"agentDirectorySort",direction:"ascending",...t}}addQueryParamsToRequest(e,t,n){e.queryParam(t.CertifiedAgentsOnly,"true"),n.packIds&&e.queryParam(t.PackIds,n.packIds.join(",")),void 0!==n.limit&&e.queryParam(t.Limit,n.limit.toString()),n.sortBy&&e.queryParam(t.SortBy,n.sortBy),n.direction&&e.queryParam(t.Direction,n.direction),void 0!==n.includeBrainOnlyPacks&&e.queryParam(t.IncludeBrainOnlyPacks,n.includeBrainOnlyPacks.toString())}async searchAgents(e,t={},n){try{const n={limit:cA.Cn,offset:0,includeBrainOnlyPacks:!0,prioritizeAgentCertified:!0},r=Object.fromEntries(Object.entries(t).filter((([,e])=>void 0!==e))),i={...n,...r},{path:o,queryParams:s}=hA.SearchPacks,a=gl.get(`${this._url}${o}`).queryParam(s.Q,(null==e?void 0:e.trim())??"");return void 0!==i.limit&&a.queryParam(s.Limit,i.limit.toString()),void 0!==i.offset&&a.queryParam(s.Offset,i.offset.toString()),i.includePackIds&&a.queryParam(s.IncludePackIds,i.includePackIds.join(",")),i.excludePackIds&&a.queryParam(s.ExcludePackIds,i.excludePackIds.join(",")),void 0!==i.includeBrainOnlyPacks&&a.queryParam(s.IncludeBrainOnlyPacks,i.includeBrainOnlyPacks.toString()),a.queryParam(s.CertifiedAgentsOnly,"true"),void 0!==i.prioritizeAgentCertified&&a.queryParam(s.PrioritizeAgentCertified,i.prioritizeAgentCertified.toString()),(await this._ajax.json(a)).hits.map((e=>pA(e.listing)))}catch(e){throw console.error("Error searching agents from Coda API:",e),e}}async listAgentInstances(e,t){var n;const{path:r,queryParams:i}=hA.ListAgentInstances,o=(null==t?void 0:t.limit)??100,s=(null==t?void 0:t.offset)??0,a=gl.get(`${this._url}${r(e)}`).queryParam(i.Limit,o.toString()).queryParam(i.Offset,s.toString());null!=t&&t.includePackListings&&a.queryParam(i.IncludePackListings,"true");const c=await this._ajax.json(a);return{agentInstances:c.agentInstances.sort(((e,t)=>{const n=e.assistantBenchDisplayOrder,r=t.assistantBenchDisplayOrder;return void 0===n&&void 0===r?0:void 0===n?1:void 0===r?-1:n-r})).map((e=>({...e,agentId:(0,cA.QZ)(`${e.packId??""}`)}))),packListings:null==(n=c.packListings)?void 0:n.map((e=>pA(e))),total:c.total}}async addAgent(e){return{agentId:e,agentInstanceId:"1",tenantId:"tenant-1",userId:"user-1",canReorder:!0,canDelete:!0}}async createAgentInstance(e,t){try{const n=`${this._url}${hA.CreateAgentInstance.path(e)}`,r=gl.post(n).json(t),i=await this._ajax.json(r);return{agentId:(0,cA.QZ)(t.packId.toString()),agentInstanceId:i.agentInstanceId,tenantId:e,userId:"current-user",canReorder:!0,canDelete:!0}}catch(e){throw console.error("Error creating agent instance:",e),e}}async createDefaultAgentInstances(e,t){try{const n=`${this._url}${hA.CreateDefaultAgentInstances.path(e)}`,r=gl.post(n).json({userRole:t});return await this._ajax.json(r),[]}catch(e){return console.error("Error creating default agent instances:",e),[]}}async editAgentInstance(e,t,n){return{agentId:e,agentInstanceId:"1",tenantId:"tenant-1",userId:"user-1",canReorder:!0,canDelete:!0}}async removeAgentInstance(e,t){try{const n=hA.DeleteAgentInstance.path(t,e),r=gl.del(`${this._url}${n}`);if(!(await this._ajax.json(r)).success)throw new Error(`Failed to delete agent instance: ${e}`)}catch(e){throw console.error("Error removing agent instance:",e),e}}async getUserAccountInfo(){try{const e=`${this._url}${hA.UserAccountInfo.path}`,t=gl.get(e).json();return await this._ajax.json(t)}catch(e){throw console.error("Error fetching user account info:",e),e}}async getBrainTenantId(){try{const e=`${this._url}${hA.BrainTenantId.path}`,t=gl.post(e).json();return await this._ajax.json(t)}catch(e){throw console.error("Error fetching brain tenant ID:",e),e}}async saveInstalledAgentsOrder(e,t,n){try{const r=hA.ReorderAgents.path(e,t),i=gl.post(`${this._url}${r}`),o={};if(n&&(o.nextAgentInstanceId=n),i.json(o),!(await this._ajax.json(i)).success)throw new Error(`Failed to reorder agent instance: ${t}${n?` before ${n}`:" to the end"}`)}catch(e){throw console.error("Error reordering agent instances:",e),e}}async getConnectionsInfoForUser(e){try{const{path:t,queryParams:n}=hA.GetExternalConnections,r=gl.get(`${this._url}${t}`);return r.queryParam(n.PackId,e.packId),void 0!==e.ignoreVersionsAfterLive&&r.queryParam(n.IgnoreVersionsAfterLive,e.ignoreVersionsAfterLive.toString()),await this._ajax.json(r)}catch(e){throw console.error("Error fetching connections info for user:",e),e}}async getExternalPackMetadata(e){try{const t=gl.get(e);return await this._ajax.json(t)}catch(e){throw console.error("Error fetching external pack metadata:",e),e}}async getAgentPackListing(e){const t=(0,cA.Oo)(e),n=`${this._url}${hA.ListPack.path(t)}`,r=gl.get(n);return pA(await this._ajax.json(r))}async getAgentInstallationContext(e,t){try{const n=(0,cA.Oo)(t),r=`${this._url}${hA.GetCreateAgentInstanceContext.path(e)}`,i=gl.get(r).queryParam(hA.GetCreateAgentInstanceContext.queryParams.PackId,n.toString());return await this._ajax.json(i)}catch(e){throw console.error("Error fetching agent installation context:",e),e}}async listIngestions(e,t){try{const{path:n,queryParams:r}=hA.ListIngestions,i=gl.get(`${this._url}${n(e)}`);return null!=t&&t.rootCsbIngestionId&&i.queryParam(r.RootCsbIngestionId,t.rootCsbIngestionId),null!=t&&t.ingestionName&&i.queryParam(r.IngestionName,t.ingestionName),void 0!==(null==t?void 0:t.packId)&&i.queryParam(r.PackId,t.packId.toString()),void 0!==(null==t?void 0:t.limit)&&i.queryParam(r.Limit,t.limit.toString()),null!=t&&t.pageToken&&i.queryParam(r.PageToken,t.pageToken),null!=t&&t.orderBy&&i.queryParam(r.OrderBy,t.orderBy),null!=t&&t.direction&&i.queryParam(r.Direction,t.direction),null!=t&&t.context&&i.queryParam(r.Context,t.context),await this._ajax.json(i)}catch(e){throw console.error("Error listing ingestions:",e),e}}};gA.ID="CodaAgentDirectory";let fA=gA;class mA{constructor(e,t=q.create("AgentDirectoryService")){this._log=t;const n=qe().codaAgentDirectory.apiUrl;this._log.info("AgentDirectoryService initialized",{codaApiUrl:n}),this._provider=new fA(n,e.ajaxFactory,e.fingerprints)}async fetchAgents(e){try{this._log.debug("Fetching agents",{query:e});const t=await this._provider.fetchAgents(e);return this._log.debug("Successfully fetched agents",{count:(null==t?void 0:t.length)||0}),t||[]}catch(t){return this._log.error("Failed to fetch agents",{error:t,query:e}),[]}}async listAgents(e){var t;try{this._log.debug("Listing agents",{options:e});const n=await this._provider.listAgents(e);return this._log.debug("Successfully listed agents",{count:(null===(t=n.items)||void 0===t?void 0:t.length)||0}),n}catch(t){throw this._log.error("Failed to list agents",{error:t,options:e}),t}}async searchAgents(e,t,n){try{this._log.debug("Searching agents",{query:e});const r=await this._provider.searchAgents(e,t,n);return this._log.debug("Successfully searched agents",{count:(null==r?void 0:r.length)||0}),r||[]}catch(t){return this._log.error("Failed to search agents",{error:t,query:e}),[]}}async createAgentInstance(e,t){try{this._log.debug("Creating agent instance",{tenantId:e,options:t});const n=await this._provider.createAgentInstance(e,t);return this._log.info("Successfully created agent instance",{result:n}),n}catch(n){throw this._log.error("Failed to create agent instance",{error:n,tenantId:e,options:t}),n}}async createDefaultAgentInstances(e,t){try{this._log.debug("Creating default agent instance",{tenantId:e,userRole:t});const n=await this._provider.createDefaultAgentInstances(e,t);return this._log.info("Successfully created default agent instance",{result:n}),n}catch(n){throw this._log.error("Failed to create agent instance",{error:n,tenantId:e,userRole:t}),n}}async editAgentInstance(e,t,n){try{this._log.debug("Editing agent instance",{agentId:e,agentInstanceId:t,options:n});const r=await this._provider.editAgentInstance(e,t,n);return this._log.info("Successfully edited agent instance",{agentId:e,agentInstanceId:t}),r}catch(r){throw this._log.error("Failed to edit agent instance",{error:r,agentId:e,agentInstanceId:t,options:n}),r}}async addAgent(e){try{this._log.debug("Adding agent",{agentId:e});const t=await this._provider.addAgent(e);return this._log.info("Successfully added agent",{agentId:e}),t}catch(t){throw this._log.error("Failed to add agent",{error:t,agentId:e}),t}}async removeAgentInstance(e,t){try{this._log.debug("Removing agent instance",{agentId:e,agentInstanceId:t}),await this._provider.removeAgentInstance(e,t),this._log.debug("Successfully removed agent instance",{agentId:e,agentInstanceId:t})}catch(n){throw this._log.error("Failed to remove agent instance",{error:n,agentId:e,agentInstanceId:t}),n}}async saveInstalledAgentsOrder(e,t,n){try{this._log.debug(`Saving agents order for tenantId: ${e}, ${t}, ${null!=n?n:"undefined"}`),await this._provider.saveInstalledAgentsOrder(e,t,n),this._log.debug(`Successfully saved agents order for ${e}, ${t}, ${null!=n?n:"undefined"}`)}catch(t){throw this._log.error("Failed to save agents order",{error:t,tenantId:e}),t}}async listAgentInstances(e,t){var n;try{this._log.debug("Listing agent instances",{tenantId:e,options:t});const r=await this._provider.listAgentInstances(e,t);return this._log.debug("Successfully listed agent instances",{count:(null===(n=null==r?void 0:r.agentInstances)||void 0===n?void 0:n.length)||0}),r||{agentInstances:[]}}catch(e){return this._log.error("Failed to list agent instances",{error:e}),{agentInstances:[]}}}async getUserAccountInfo(){try{this._log.debug("Getting user account info");const e=await this._provider.getUserAccountInfo();return this._log.debug("Successfully got user account info",{result:e}),e}catch(e){throw this._log.error("Failed to get user account info",{error:e}),e}}async getConnectionsInfoForUser(e){try{this._log.debug("Getting connections info for user",{options:e});const t=await this._provider.getConnectionsInfoForUser(e);return this._log.debug("Successfully got connections info for user",{result:t}),t}catch(t){throw this._log.error("Failed to get connections info for user",{error:t,options:e}),t}}async getBrainTenantId(){try{this._log.debug("Getting brain tenant id");const e=await this._provider.getBrainTenantId();return this._log.debug("Successfully got brain tenant id",{result:e}),e}catch(e){throw this._log.error("Failed to get brain tenant id",{error:e}),e}}async getExternalPackMetadata(e){try{this._log.debug("Getting external pack metadata",{externalMetadataUrl:e});const t=await this._provider.getExternalPackMetadata(e);return this._log.debug("Successfully got external pack metadata",{result:t}),t}catch(t){throw this._log.error("Failed to get external pack metadata",{error:t,externalMetadataUrl:e}),t}}async getAgentPackListing(e){try{this._log.debug("Getting agent pack listing",{agentId:e});const t=await this._provider.getAgentPackListing(e);return this._log.debug("Successfully got agent pack listing",{agentId:e}),t}catch(t){throw this._log.error("Failed to get agent pack listing",{error:t,agentId:e}),t}}async getAgentInstallationContext(e,t){try{this._log.debug("Getting agent installation context",{tenantId:e,agentId:t});const n=await this._provider.getAgentInstallationContext(e,t);return this._log.debug("Successfully got agent installation context",{tenantId:e,agentId:t}),n}catch(n){throw this._log.error("Failed to get agent installation context",{error:n,tenantId:e,agentId:t}),n}}async listIngestions(e,t){try{this._log.debug("Listing ingestions",{tenantId:e,options:t});const n=await this._provider.listIngestions(e,t);return this._log.debug("Successfully listed ingestions",{result:n}),n}catch(n){throw this._log.error("Failed to list ingestions",{error:n,tenantId:e,options:t}),n}}}var bA,yA,_A,vA,wA;!function(e){e.contractions=new Set(["n't","'ve","'d","'s","'m","'re","'ll","N'T","'VE","'D","'S","'M","'RE","'LL","nt","ve","d","s","m","re","ll","NT","VE","D","S","M","RE","LL"]),e.personalPronouns=new Set(["i","you","he","she","it","we","they","me","him","her","us","them"]),e.subjPronouns=new Set(["i","you","he","she","it","we","they","what","who"]),e.objPronouns=new Set(["me","him","her","it","us","you","them","whom"]),e.possDepPronouns=new Set(["her","his","my","their","your","our"]),e.possIndepPronouns=new Set(["hers","his","mine","theirs","yours","ours"]),e.possPronouns=new Set([...e.possDepPronouns,...e.possIndepPronouns,"whose"]),e.demPronouns=new Set(["this","that","these","those"]),e.condClause=new Set(["if","when","then"]),e.greetings=new Set(["hi","hey","hello","howdy","sup","whazzup","hiya","yo","whatup","greetings"]),e.toBeForms=new Set(["is","am","'m","'s","be","was","were"]),e.modalVerbs=new Set(["can","could","may","might","shall","should","will","would","must"]),e.interPronouns=new Set(["who","whom","which","what","whose","whoever","whatever","whichever","whomever"]),e.timeRelated=new Set(["week","month","tomorrow","yesterday","today","weekend","time","someday","evening","night","morning","midnight","hour","minute","day","second","then","before","after"]),e.numerals=new Set(["two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen","twenty","twenty-one","twenty-two","twenty-three","twenty-four","twenty-five","twenty-six","twenty-seven","twenty-eight","twenty-nine","thirty","thirty-one","forty","fifty","sixty","seventy","eighty","ninety","hundred","thousand","many","multiple","few","million"]),e.identifyingPronouns=new Set(["anything","everybody","another","each","few","many","none","some","all","any","anybody","anyone","everyone","everything","no one","nobody","nothing","none","other","others","several","somebody","someone","something","most","enough","little","more","both","either","neither","one","much","such"])}(bA||(bA={})),function(e){e._=""}(yA||(yA={})),function(e){e._=""}(_A||(_A={})),function(e){e._=""}(vA||(vA={})),function(e){e.sentenceStartTag="<S>",e.sentenceEndTag="</S>",e.urlTag="<URL>",e.emailTag="<EMAIL>",e.basicPunctuationExceptPeriod=",:;!?",e.basicPunctuationChars="."+e.basicPunctuationExceptPeriod;const t=new RegExp(`(${Array.from(bA.contractions.values()).map((e=>`${e}$`)).concat("^'","'$").join("|")})`);e.urlReString="(\\S+:\\/\\/)?[^\\s,\\.]+(\\.[^\\s,\\.]+)*(\\.\\w[^\\s,\\.]+)";const n=new RegExp(`^${e.urlReString}$`);e.emailReString="[^\\s@]+@[^\\s,\\.]+(\\.[^\\s,\\.]+)+";const r=new RegExp(`^${e.emailReString}$`);e.numeralReString="[\\d\\.,:-]+(st|nd|rd|th|s)?";const i=new RegExp(`^${e.numeralReString}$`),o=new RegExp([e.numeralReString,e.emailReString,e.urlReString,`[^\\s${(0,h.hr)(e.basicPunctuationChars)}]+`,"[()\\[\\]<>|\"']",`[{}${(0,h.hr)(e.basicPunctuationChars)}\\-/\\\\]+`,"\\s+",".+?"].join("|"),"g");function*s(e,n){if(0!==e.length)for(const r of e.match(o))if(!/^\s*$/.test(r))for(const e of r.split(t))""!==e&&(yield n?n(e):e)}function a(t){const o=t.replace(/\d(?![^\d]*$)|[04-9]/g,"0");return i.test(o)?o:r.test(o)&&e.emailTag||n.test(o)&&e.urlTag||o}function c(e){return Array.from(s(e,a))}function l(e){return e.join(" ")}e.normalizeToken=a,e.tokenize=function(e){return Array.from(s(e))},e.tokenizeNorm=c,e.join=l,e.normalize=function(e){return l(c(e))},e.isUpper=e=>e.toUpperCase()===e,e.isLower=e=>e.toLowerCase()===e,e.isAcronym=t=>t.length>1&&e.isUpper(t),e.isCapitalized=t=>t.length>0&&e.isUpper(t[0])&&e.isLower(t.slice(1)),e.isNamelike=t=>e.isCapitalized(t),e.isMaybeNamelike=t=>t.length>0&&e.isUpper(t[0]),e.isNumeral=e=>bA.numerals.has(e)||i.test(e),e.containsContractions=e=>bA.contractions.has(e)||e.includes("'"),e.isContractionPart=e=>bA.contractions.has(e)}(wA||(wA={}));var SA=__webpack_require__(948);class kA{constructor(e,t,n=new Set,r=new Map,i=null,o=q.create("AutocorrectCheckingServiceImpl")){this._model=e,this._feedback=t,this._bannedSuggestions=n,this._bannedCorrections=r,this._felog=i,this._log=o,this._uidPrefix=h.iy.create().slice(0,6),this._nextAlertId=0,this._tokenBoundary={checkTrigger:new RegExp(`^([\\s${(0,h.hr)(wA.basicPunctuationChars)}"\\[\\]()<>]+)$`),precedingToken:new RegExp(`(${[wA.numeralReString,wA.emailReString,wA.urlReString,`[^\\s${(0,h.hr)(wA.basicPunctuationChars)}"\\[\\]()<>]+`].join("|")})$`),triggerToken:new RegExp(`([\\s${(0,h.hr)(wA.basicPunctuationChars)}"\\[\\]()<>]+)$`)}}async check(e,t,n,r){var i,o;if(1===t.length){const s=t[0];if(SA.q.isIns(s)&&s.text.match(this._tokenBoundary.checkTrigger)&&n&&n.end-n.start==0&&s.pos+s.text.length===n.start)if(e.slice(s.pos,s.pos+s.text.length)===s.text){const t=null===(i=e.slice(0,s.pos+s.text.length).match(this._tokenBoundary.triggerToken))||void 0===i?void 0:i[1],n=void 0!==t?s.pos-t.length+s.text.length:void 0,a=null===(o=e.slice(0,n).match(this._tokenBoundary.precedingToken))||void 0===o?void 0:o[1];if(void 0!==a&&void 0!==n&&void 0!==t){if("."!==t){const i=function(e,t,n){const r=e.slice(Math.max(0,t-n),t);return t-n>0?r.slice(r.split(/\W+/,1)[0].length+r.split(/\w+/,2).reduce(((e,t)=>e||t.length),0)):r}(e,n-a.length,60),o={start:n-a.length,end:n};try{const e=await(this._felog&&this._felog.predictTime.measureAsync||(e=>e()))((()=>this._model.checkToken(i,a,t)));if(e&&!this._bannedSuggestions.has(e)&&null!==this._bannedCorrections.get(a)&&this._bannedCorrections.get(a)!==e)return{alerts:[{range:o,originalText:a,replacement:e,revision:r,context:i,id:`ac-${this._uidPrefix}-${(this._nextAlertId++).toString(10)}`}],revision:r}}catch(e){this._log.error("model crashed",e)}}}else this._log.warn("couldn't extract preceding or trigger token")}else this._log.warn(`last change not consistent with actual text, ${e.slice(s.pos,s.pos+s.text.length)} <> ${s.text}`)}else this._log.warn(`Unsupported changes of length ${t.length} (only length 1 is supported), changes:`,JSON.stringify(t));return{alerts:[],revision:r}}onCorrectionRejected({original:e,suggested:t}){this._log.info(`feedback: REJECTED {${e}=>${t}}`),this._feedback.onCorrectionRejected(e)}onCorrectionAccepted({original:e,suggested:t}){this._log.info(`feedback: accepted {${e}=>${t}}`),this._feedback.onCorrectionAccepted(e)}dispose(){}}class IA{check(e,t,n,r){return Promise.resolve({alerts:[],revision:r})}onCorrectionRejected(e){}onCorrectionAccepted(e){}dispose(){}}var CA=__webpack_require__(51255);const EA=__webpack_require__(93281),AA={american:new Map(EA.american),australian:new Map(EA.australian),british:new Map(EA.british),canadian:new Map(EA.canadian),indian:new Map(EA.indian)};var xA,TA,OA;!function(e){e.load=function(e){return new Map(e)}}(xA||(xA={}));class PA{constructor(e,t=q.create("FeedbackStorage")){this._prefs=e,this._log=t,this._feedbackStorageKey="apollo-feedback"}async read(){try{return new Map(await this._prefs.get(this._feedbackStorageKey))}catch(e){return this._log.warn("failed to read feedback storage",e),new Map}}async write(e){try{await this._prefs.set(this._feedbackStorageKey,Array.from(e.entries()))}catch(e){this._log.warn("failed to write feedback storage",e)}}}class RA{constructor(e=new Map,t=(e=>{})){this._data=e,this._onChanged=t,this._maxSize=1e4}isRejected(e){return this._data.get(e)||null}reject(e){var t;this._data.size>this._maxSize&&(this._data=new Map([...this._data.entries()].slice(this._maxSize/2))),this._data.set(e,{times:((null===(t=this._data.get(e))||void 0===t?void 0:t.times)||0)+1,lastTime:Date.now()}),this._onChanged(this._data)}accept(e){this._data.has(e)&&(this._data.delete(e),this._onChanged(this._data))}}class DA{constructor(e,t=new Set){this._persistentFeedback=e,this._sessionRejects=t,this._persistentRejectTimesThreshold=3}isRejected(e){var t;return this._sessionRejects.has(e)||((null===(t=this._persistentFeedback.isRejected(e))||void 0===t?void 0:t.times)||0)>=this._persistentRejectTimesThreshold}onCorrectionRejected(e){this._sessionRejects.add(e),this._persistentFeedback.reject(e)}onCorrectionAccepted(e){this._sessionRejects.has(e)||this._persistentFeedback.accept(e)}}class NA{constructor(e){this._source=e,this._possDepProns=new Set(["his","her"]),this._objProns=new Set(["him","her"]),this._subjProns=new Set(["he","she"])}_getPossOrObjSubsts(e){if(e.length>1){const t=e[e.length-2],n=!0,r=!0,i=!0;return[...this._possDepProns.has(t)&&(n||r)?this._possDepProns.values():this._objProns.has(t)&&i?this._objProns.values():[]].map((t=>[...e.slice(0,-2),t,...e.slice(-1)]))}return[]}_getSubjSubsts(e){if(e.length>2){const t=!0,n=!0,r=!0,i=!0,o=e[e.length-3];return[...this._subjProns.has(o)&&(t&&r||n&&(r||i))?this._subjProns.values():[]].map((t=>[...e.slice(0,-3),t,...e.slice(-2)]))}return[]}getProbability(e){const t=this._getPossOrObjSubsts(e),n=this._getSubjSubsts(e),r=t.length>0?t:n.length>0?n:[e],[i,o]=r.reduce(((e,t)=>{var n;return(null===(n=this._source.getFreq(t))||void 0===n?void 0:n.map(((t,n)=>t+e[n])))||e}),[0,0]);return o>0?i/o:0}}function UA(e){let t=e-(e>>1&1431655765);return t=(858993459&t)+(t>>2&858993459),16843009*(t+(t>>4)&252645135)>>24}class MA{constructor(){this._mkBitMap=e=>{const t={};let n=0;for(const[r,i]of e)t[r]=[n,i],t[r.toUpperCase()]=t[r],n+=i;return t},this._bitMap=this._mkBitMap([..."eioantrslcp".split("").map((e=>(0,h.bc)(e,3))),..."bdfghjkmquvwxyz".split("").map((e=>(0,h.bc)(e,2)))])}toRepr(e){const t=[0,0];for(let n=0;n<e.length;n++){const[r=null,i=null]=this._bitMap[e[n]]||[];if(null===r||null===i)continue;let o=r;for(;t[o>>5]&1<<(31&o)>>>0&&o<r+i;)o++;o<r+i&&(t[o>>5]|=1<<(31&o))}return t}getDistance(e,t){return UA(e[0]^t[0])+UA(e[1]^t[1])}}!function(e){const t=-16;e.toVector=function(e){return(0,h.bc)(1,Math.max(t,Math.log(e.lm1)),Math.max(t,Math.log(e.lm2)),Math.max(t,Math.log(e.lm3)),e.lenDiffRatio,e.inLen,e.replLen,Number(e.capChange),Number(e.pwCondClause),Number(e.pwDemP),Number(e.pwGreet),Number(e.pwIdP),Number(e.pwInterP),Number(e.pwModalV),Number(e.pwNum),Number(e.pwSubjP),Number(e.pwTemporal),Number(e.pwToBeForm),Number(e.pwIng),Number(e.pwEd),Number(e.inCap),Number(e.pwCap),Number(e.replPlural),Number(e.replSameLength),Number(e.replSameAsPW),Number(e.inFirstInSent),Number(e.addingContraction),Number(e.pwPossOrObjP),e.editDist.ds,e.editDist.is,e.editDist.caps,e.editDist.subs,e.editDist.xp,e.editDist.len,e.keyShapeDist[0],e.keyShapeDist[1],e.keyShapeDist[2],e.hausdorffDist,Math.max(t,e.noisyChanP))}}(TA||(TA={})),function(e){let t;!function(e){e.add=(e,t)=>[e[0]+t[0],e[1]+t[1],e[2]+t[2]],e.subtract=(e,t)=>[e[0]-t[0],e[1]-t[1],e[2]-t[2]],e.abs=e=>[Math.abs(e[0]),Math.abs(e[1]),Math.abs(e[2])],e.zero=[0,0,0],e.length=e=>e.reduce(((e,t)=>e+t**2),0)}(t=e.KeySpace||(e.KeySpace={}));const n=new Map([].concat(...[(0,h.bc)(0,["`1234567890-=","~!@#$%^&*()_+"]),(0,h.bc)(2,["qwertyuiop[]\\","QWERTYUIOP{}|"]),(0,h.bc)(2,["asdfghjkl;'",'ASDFGHJKL:"']),(0,h.bc)(3,["zxcvbnm,./","ZXCVBNM<>?"])].map((([e,t],n)=>[].concat(...t.map(((t,r)=>t.split("").map(((t,i)=>(0,h.bc)(t,(0,h.bc)(n,e+i,r)))))))))));function r(e){return n.get(e)||null}function i(e,t){const r=n.get(e),i=n.get(t);return r&&i?r.map(((e,t)=>Math.abs(e-i[t]))):[0,0,0]}function o(e,n){return e.reduce(((e,r)=>{const i=n.reduce(((e,n)=>null===e||t.subtract(r,n).reduce(((e,t)=>e+t**2),0)<t.subtract(r,e).reduce(((e,t)=>e+t**2),0)?n:e),null)||[0,0,0];return t.add(e,t.abs(t.subtract(i,r)))}),t.zero)}function s(e,t){let n,r=0;for(const i of e){n=1/0;for(const e of t){const t=i.reduce(((t,n,r)=>t+(n-e[r])**2),0);if(t<n&&(n=t),n<r)break}n>r&&1/0>n&&(r=n)}return Math.sqrt(r)}e.getKeyPosition=r,e.getKeyDistance=i,e.getLength=function(e){if(e.length>0){let t=(0,h.bc)(0,0,0);for(let n=1;n<e.length;n++)t=i(e[n],e[n-1]).map(((e,n)=>e+t[n]));return t}return(0,h.bc)(0,0,0)},e.getStringVector=function(e){return e.split("").map(r).filter((e=>null!==e))},e.getShapeDistance=function(e,n){return t.add(o(e,n),o(n,e))},e.getDirectedHausdorffDist=s,e.getHausdorffDist=function(e,t){return Math.max(s(e,t),s(t,e))}}(OA||(OA={}));class jA{constructor(e,t,n,r,i){this.ds=e,this.is=t,this.caps=n,this.subs=r,this.xp=i,this.len=this.ds+this.is+this.caps+this.subs+this.xp}add(e){return new jA(this.ds+e.ds,this.is+e.is,this.caps+e.caps,this.subs+e.subs,this.xp+e.xp)}toVector(){return(0,h.bc)(this.ds,this.is,this.caps,this.subs,this.xp,this.len)}equals(e){return this.len===e.len&&this.ds===e.ds&&this.is===e.is&&this.caps===e.caps&&this.subs===e.subs&&this.xp===e.xp}static min(...e){return e.length>1?e.reduce(((e,t)=>t.len<e.len?t:e)):e[0]}}function FA(e,t){const n=Array.from(new Array(e.length+1),((e,n)=>Array.from(new Array(t.length+1),((e,t)=>0===n?new jA(0,t,0,0,0):new jA(0===t?n:0,0,0,0,0)))));for(let r=1;r<e.length+1;r++)for(let i=1;i<t.length+1;i++){const o=e[r-1]!==t[i-1]?1===r&&1===i&&e[r-1].toLowerCase()===t[i-1].toLowerCase()?new jA(0,0,1,0,0):new jA(0,0,0,1,0):new jA(0,0,0,0,0);n[r][i]=jA.min(n[r-1][i].add(new jA(1,0,0,0,0)),n[r-1][i-1].add(o),n[r][i-1].add(new jA(0,1,0,0,0))),r>1&&i>1&&e[r-2]===t[i-1]&&e[r-1]===t[i-2]&&(n[r][i]=jA.min(n[r][i],n[r-2][i-2].add(new jA(0,0,0,0,1))))}return n}function LA(e,t,n=FA(e,t)){return 0===e.length?new jA(0,t.length,0,0,0):0===t.length?new jA(e.length,0,0,0,0):n[e.length][t.length]}class GA{static isBigEndianArch(){return 43707===new Uint16Array(new Uint8Array([170,187]).buffer)[0]}constructor(e,t=0){if(this._buf=e,this._offset=t,this._view=new DataView(this._buf),this.readInt32=this._mkReader((e=>[this._view.getInt32(e,!0),4])),this.readFloat32=this._mkReader((e=>[this._view.getFloat32(e,!0),4])),this.readUint16Array=()=>{const e=this.readInt32(),t=new Uint16Array(this._buf,this._offset,e);return this._offset+=Uint16Array.BYTES_PER_ELEMENT*e,t},this.readInt32Array=()=>{const e=this.readInt32(),t=new Int32Array(this._buf,this._offset,e);return this._offset+=Int32Array.BYTES_PER_ELEMENT*e,t},this.readFloat32Array=()=>{const e=this.readInt32(),t=new Float32Array(this._buf,this._offset,e);return this._offset+=Float32Array.BYTES_PER_ELEMENT*e,t},GA.isBigEndianArch())throw new Error("big endian architecture is not supported")}_mkReader(e){return()=>{const[t,n]=e(this._offset);return this._offset+=n,t}}*readArray(e,t){const n=e();for(let e=0;e<n;e++)yield t()}}function BA(e,t){return(65535&e)*t+(((e>>>16)*t&65535)<<16)}function zA(e,t){return e<<t|e>>>32-t}const VA=3432918353,qA=461845907;class HA{getHash(e,t=0){const n=(new TextEncoder).encode(e),r=n.length%4,i=n.length-r;let o,s=t,a=0;for(o=0;o<i;o+=4)s=BA(zA(s^BA(zA(BA(n[o]|n[o+1]<<8|n[o+2]<<16|n[o+3]<<24,VA),15),qA),13),5)+3864292196;switch(a=0,r){case 3:a^=n[o+2]<<16;case 2:a^=n[o+1]<<8;case 1:a^=n[o],s^=BA(zA(BA(a,VA),15),qA)}return function(e){return e=BA(e^e>>>16,2246822507),(e=BA(e^e>>>13,3266489909))^e>>>16}(s^n.length)>>>0}}var WA,$A,XA,KA;!function(e){e.preferred=HA}(WA||(WA={}));class YA{constructor(e,t=new WA.preferred,n=65535){if(this._data=e,this._hashFun=t,this._parityHashSize=n,this._data.values.length!==this._data.hashes.length)throw new TypeError(`values and hashes buffer size don't match (${this._data.values.length} !== ${this._data.hashes.length})`)}get(e){const t=this._data.displacement[this._hashFun.getHash(e,0)%this._data.displacement.length],n=t<0?-t-1:this._hashFun.getHash(e,t)%this._data.values.length,r=this._data.values[n];return this._data.hashes[n]===this._hashFun.getHash(e,r)%this._parityHashSize?r:null}}class ZA{constructor(e,t){this._hash=e,this._vals=t}get(e){const t=this._hash.get(e);return null!==t&&t<this._vals.length?this._vals[t]:null}}!function(e){e.load=function(e){const t=new GA(new Uint8Array(e).buffer);return{totals:new Map(t.readArray(t.readInt32,(()=>(0,h.bc)(t.readInt32(),t.readFloat32())))),freqs:t.readFloat32Array(),perfHash:{displacement:t.readInt32Array(),values:t.readUint16Array(),hashes:t.readUint16Array()}}}}($A||($A={}));class JA{static load(e){const t=$A.load(e);return new JA(new YA(t.perfHash),t.totals,t.freqs)}constructor(e,t,n){this._ngrams=e,this._totals=t,this._freqs=n}getFreq(e){if(0===e.length)return null;const t=wA.join(e.slice(void 0,-1)),n=1===e.length?this._totals.get(1):this._freqs[this._ngrams.get(t)||-1]||null,r=this._ngrams.get(""!==t?wA.join([t,e[e.length-1]]):e[e.length-1]);return r&&n&&r<this._freqs.length?(0,h.bc)(this._freqs[r]+1,n):null}getProbability(e){const t=this.getFreq(e);return t?t[0]/t[1]:0}}class QA{constructor(e,t=-16,n=t,r=0){this._logProbs=e,this._minLogProb=t,this._unknownLogProb=n,this._maxLogProb=r}getLogProb(e,t,n){const r=function(e,t,n){var r,i,o,s,a,c,l;let u=e.length,d=t.length;const h=[];for(;d>0||u>0;){h.push({x:d,y:u,a:e[u-1],b:t[d-1],l:n[u][d].len,e:n[u][d]});const p=n[u][d].len,g=null===(i=null===(r=n[u-1])||void 0===r?void 0:r[d])||void 0===i?void 0:i.len,f=null===(o=n[u][d-1])||void 0===o?void 0:o.len,m=null===(a=null===(s=n[u-1])||void 0===s?void 0:s[d-1])||void 0===a?void 0:a.len,b=null===(l=null===(c=n[u-2])||void 0===c?void 0:c[d-2])||void 0===l?void 0:l.len;d>0&&u>0&&void 0!==m&&m<p&&m<=b&&m<=g&&m<=f?(u-=1,d-=1):d>0&&void 0!==f&&f<p&&f<=b&&f<=g&&f<=m?d-=1:u>0&&void 0!==g&&g<p&&g<=b&&g<=f&&g<=m?u-=1:(u=Math.max(0,u-1),d=Math.max(0,d-1))}h.push({x:d,y:u,a:e[u-1],b:t[d-1],l:n[u][d].len,e:n[u][d]});const p=[];let g=["","",""],f=!1;const m=()=>{!g||""===g[1]&&""===g[2]||p.push(g),g=["","",""]};for(let e=h.length-2;e>=0;e--)h[e].e.equals(h[e+1].e)?(f||m(),f=!0,g[0]+=h[e].a):(f=!1,h[e].y!==h[e+1].y&&(g[1]+=h[e].a),h[e].x!==h[e+1].x&&(g[2]+=h[e].b));return m(),p}(e,t,n);return Math.max(r.length>0?r.map((e=>{const t=this._logProbs.get(this.editToString(e));return null!==t?t:this._unknownLogProb})).reduce(((e,t)=>e+t),0):this._maxLogProb,this._minLogProb)}editToString(e){return QA.editToString(e)}static load(e){const t=$A.load(e);return new QA(new ZA(new YA(t.perfHash),t.freqs))}}!function(e){function t([e]){return e.slice(-1)}e.getContext=t,e.editToTotal=function(e){return t(e)+e[1]},e.editToString=function(n){const r=t(n);return r+n[1]+e.editSepChar+r+n[2]},e.splitEditString=function(t){return t.split(e.editSepChar)},e.preprocToken=function(t){return e.tokenStartChar+t+e.tokenEndChar},e.tokenStartChar="^",e.tokenEndChar="$",e.editSepChar="|"}(QA||(QA={}));class ex{constructor(e,t,n,r,i,o=new DA(new RA(new Map)),s=(e=>e),a=ex.defaultCorrectionCandidates){this._lm=e,this._replaceDict=t,this._vocab=n,this._noisyChan=r,this._spellModel=i,this._feedback=o,this._applyDialectFilter=s,this._correctionCandidates=a,this._config={spellModelThresh:this._spellModel.threshold,maxInputLen:25,maxHammingDistThresh:[[5,2],[9,3],[11,4],[12,5]],candidates:this._correctionCandidates}}_getMaxHammingDist(e){return(this._config.maxHammingDistThresh.find((([t])=>e<=t))||this._config.maxHammingDistThresh[this._config.maxHammingDistThresh.length-1])[1]}_shouldUseModel(e,t,n){return(e.length>1||"i"===e)&&e.length<=this._config.maxInputLen&&/^\w+$/.test(e)&&!n&&!/^[haHA]+$/.test(e)&&!wA.isAcronym(e)&&!wA.isMaybeNamelike(e)&&!this._vocab.contains(e.toLowerCase())&&!this._vocab.contains(e)&&(!/-/g.test(e)||e.split("-").some((e=>!this._vocab.contains(e))))&&!(wA.tokenize(e).length>1)&&!this._vocab.isPossiblyOffensive(e)}async _predict(e,t,n,r,i){var o,s;const a=this._getMaxHammingDist(t.length),c=this._vocab.getClosest(t,a,this._config.candidates,a).filter((e=>!wA.isContractionPart(e)&&!this._vocab.isPossiblyOffensive(e))),l=(null===(o=e[e.length-1])||void 0===o?void 0:o.toLowerCase())||"",u=e[e.length-1]||"",d=c.map((n=>{const o=wA.tokenizeNorm(n),s=QA.preprocToken(t),a=QA.preprocToken(n),c=FA(s,a),d=OA.getStringVector(t),p=OA.getStringVector(n),g={lm1:this._lm.getProbability(o),lm2:this._lm.getProbability([...e.slice(-1),...o]),lm3:this._lm.getProbability([...e.slice(-2),...o]),editDist:LA(s,a,c),noisyChanP:this._noisyChan.getLogProb(s,a,c),lenDiffRatio:(n.length-t.length)/t.length,inLen:t.length,replLen:n.length,pwIdP:bA.identifyingPronouns.has(l),pwModalV:bA.modalVerbs.has(l),pwGreet:bA.greetings.has(l),pwDemP:bA.demPronouns.has(l),pwCondClause:bA.condClause.has(l),pwInterP:bA.interPronouns.has(l),pwNum:wA.isNumeral(l),pwSubjP:bA.subjPronouns.has(l),pwPossOrObjP:bA.possDepPronouns.has(l)||bA.possIndepPronouns.has(l)||bA.objPronouns.has(l),pwTemporal:bA.timeRelated.has(l),pwToBeForm:bA.toBeForms.has(l),pwIng:l.endsWith("ing"),pwEd:l.endsWith("ed"),capChange:n.toLowerCase()===t||t.toLowerCase()===n,inCap:wA.isCapitalized(t),pwCap:wA.isCapitalized(u),replPlural:n.endsWith("s"),replSameLength:n.length===t.length,replSameAsPW:l===n,inFirstInSent:r,addingContraction:!i&&wA.containsContractions(n),keyShapeDist:OA.getShapeDistance(d,p),hausdorffDist:OA.getHausdorffDist(d,p)};return(0,h.bc)(n,g)})),p=(await this._spellModel.predictVector(d.map((([e,t])=>TA.toVector(t))))).map(((e,t)=>(0,h.bc)(d[t][0],e,d[t][1])));return(0,h.bc)((null===(s=function(e,t){return 0===e.length?void 0:e.reduce(((e,n)=>{const r=t(n);return r>e[1]?[n,r]:e}),[e[0],t(e[0])])[0]}(p.filter((([e,t])=>t>=this._config.spellModelThresh)),(([,e])=>e)))||void 0===s?void 0:s[0])||null,p)}async checkTokenVerbose(e,t,n){if(this._feedback.isRejected(t))return(0,h.bc)(null);if(this._replaceDict.has(t))return(0,h.bc)(this._replaceDict.get(t)||null);{const r=[wA.sentenceStartTag,...wA.tokenizeNorm(e)],i=r[r.length-1]===wA.sentenceStartTag||!!r[r.length-1].match(/^[.!?]+$/),o=wA.containsContractions(t);return this._shouldUseModel(t,i,o)?await this._predict(r,t,wA.tokenizeNorm(n),i,o):(0,h.bc)(null)}}async checkToken(e,t,n){const[r]=await this.checkTokenVerbose(e,t,n);return r&&this._applyDialectFilter(r)}}ex.defaultCorrectionCandidates=50;class tx{constructor(e,t,n){this._model=e,this._batchSize=t,this.threshold=n,this._serializedRun=function(e){let t=Promise.resolve();return(...n)=>{const r=t.then((t=>e(...n)));return t=r,r}}(((...e)=>this._model.run(...e)))}predict(e,t){throw new Error("synchronous prediction is not supported")}async predictVector(e){if(0===e.length)return[];const t=e.map((e=>e.slice(1))),n=Array.from(new Array(this._batchSize-t.length),(()=>new Array(t[0].length).fill(0))),r=(await this._serializedRun([new CA.Tensor([].concat(...t,...n),"float32",[this._batchSize,t[0].length])])).get("output");return r.data instanceof Float32Array?Array.from(r.data).slice(0,t.length):new Array(t.length)}static createDefault(e,t){return new tx(e,t,.95)}}!function(e){e.base="data",e.replaceDict="a0.pt",e.vocabulary="b1.pt",e.ngrams="c2.pt",e.noisyChannel="d3.pt",e.nnClassifierModel="e4.pt"}(XA||(XA={})),function(e){const t=new Map([["child","children"],["goose","geese"],["man","men"],["woman","women"],["tooth","teeth"],["foot","feet"],["mouse","mice"],["person","people"],["photo","photos"],["piano","pianos"],["halo","halos"],["sheep","sheep"],["series","series"],["species","species"],["deer","deer"],["fish","fish"]]),n=new Set("aeouiy".split(""));e.pluralize=function(e){return t.get(e)||e.replace(/(on|o|\wy|fe|f|sh|ch|x|z|[ius]?s|)$/g,(t=>"s"===t||"ss"===t||"sh"===t||"ch"===t||"x"===t||"z"===t?`${e}es`:"f"===t||"fe"===t?`${e}ves`:t.endsWith("y")?`${e}${t[0]}${n.has(t[0])?"ies":"s"}`:"o"===t?`${e}es`:"us"===t?`${e}i`:"is"===t?`${e}es`:"on"===t?`${e}a`:`${e}s`))},e.singularize=function(e){return e.replace(/(ies|es|s)$/g,(e=>"ies"===e?"y":""))},e.isProperNoun=function(e){return/^[A-Z]/.test(e)||/^[a-z]+-[A-Z]/.test(e)}}(KA||(KA={}));const nx=(0,h.Vo)((()=>{try{return new Set(__webpack_require__(56013))}catch(e){return new Set}})),rx=(0,h.Vo)((()=>{try{return new Set(__webpack_require__(79725))}catch(e){return new Set}}));class ix{isPossiblyOffensive(e){return nx.get().has(ix.hash.getHash(e))||nx.get().has(ix.hash.getHash(KA.singularize(e)))}isContextuallyOffensive(e){return rx.get().has(ix.hash.getHash(e))}}var ox,sx;ix.hash=new WA.preferred,function(e){e.load=function(e){return new Map(e.map((([e,t])=>[e,new Map(t.map((([e,t,n,r])=>[e,{word:e,freq:t,repr:[n,r]}])))])))}}(ox||(ox={}));class ax{constructor(e,t,n=new ix){this._hamDist=e,this._dict=t,this._offensive=n}contains(e){const t=this._dict.get(e.length);return t&&t.has(e)}isPossiblyOffensive(e){return this._offensive.isPossiblyOffensive(e)}getClosest(e,t,n,r=t){const i=this._hamDist.toRepr(e),o=e.length,s=[];for(let e=Math.max(0,o-r);e<o+r;e++)if(this._dict.get(e))for(const n of this._dict.get(e).values()){const e=this._hamDist.getDistance(i,n.repr);e<=t&&s.push((0,h.bc)(n,e))}const a=([e])=>e.freq;return s.sort(((e,t)=>a(t)-a(e))).slice(0,n).map((e=>e[0].word))}getFrequency(e){var t,n;return(null===(n=null===(t=this._dict.get(e.length))||void 0===t?void 0:t.get(e))||void 0===n?void 0:n.freq)||0}}!function(e){let t=null;e.create=async function(e,n,r,i,o,s=q.create("AutocorrectCheckingServiceFactory")){var a;t||(t=async function(e,t,n,r){const i=await t.fetchInternalResource(`${XA.base}/${XA.replaceDict}`,"json").then((e=>xA.load(e))).catch((e=>(r.error("failed loading replace dict",e),null))),o=await e.getLengthGroupedDict(),s=o&&new ax(new MA,o),a=await e.getNgrams(),c=a&&new NA(a),l=await t.fetchInternalResource(`${XA.base}/${XA.noisyChannel}`,"buffer").then((e=>QA.load(e))).catch((e=>(r.error("failed loading noisy channel",e),null))),u=await(async()=>{const e=new CA.InferenceSession({backendHint:"cpu"});return await e.loadModel(await t.fetchInternalResource(`${XA.base}/${XA.nnClassifierModel}`,"buffer")),e})().catch((e=>(r.error("failed to init onnx model",e),null))),d=new PA(n),h=new RA(await d.read(),(e=>d.write(e)));return{sharedReplaceDict:i,sharedVocabulary:s,sharedNgramModel:c,sharedNoisyChan:l,sharedNnClassifierModel:u,sharedFeedbackSet:h}}(e,n,r,s));const{sharedReplaceDict:c,sharedVocabulary:l,sharedNgramModel:u,sharedNoisyChan:d,sharedNnClassifierModel:h,sharedFeedbackSet:p}=await t;if(c&&l&&u&&d&&h){const e=new DA(p),t=null===(a=i.view("dynamicConfig").get())||void 0===a?void 0:a.autocorrect;return new kA(new ex(u,c,l,d,tx.createDefault(h,ex.defaultCorrectionCandidates),e,(e=>{const t=i.view("dapi").get();return function(e,t="american"){const n=AA[t];return n.has(e)?n.get(e):e}(e,(null==t?void 0:t.dialectStrong)||(null==t?void 0:t.dialectWeak))})),e,new Set(null==t?void 0:t.bannedDict),new Map(null==t?void 0:t.bannedCorrections),o.autocorrect)}throw new Error("autocorrect backend unavailable")}}(sx||(sx={}));class cx{constructor(e){this._extensionApi=e,this._log=q.create("NlpResources")}async getLengthGroupedDict(){return void 0===this._lengthGroupedDict&&(this._lengthGroupedDict=await this._extensionApi.fetchInternalResource(`${XA.base}/${XA.vocabulary}`,"json").then((e=>ox.load(e))).catch((e=>(this._log.error("Failed to create length-grouped dictionary",e),null)))),this._lengthGroupedDict}async getNgrams(){return void 0===this._ngrams&&(this._ngrams=await this._extensionApi.fetchInternalResource(`${XA.base}/${XA.ngrams}`,"buffer").then((e=>JA.load(e))).catch((e=>(this._log.error("Failed to create ngram model",e),null)))),this._ngrams}}class lx{constructor(e,t=q.create("AutocorrectCheckingServiceRpcApi")){this._factory=e,this._log=t,this._instances=new Map,this.api=this._createApi(["check","onCorrectionRejected","onCorrectionAccepted"])}_createApi(e){return $(e.map((e=>[e,({token:t,args:n})=>{const r=this._instances.get(t);if(r)return r[e](...n);throw new Error(`no instance for ${t}`)}])))}async startSession(){const e=h.iy.create(),t=await this._factory();return this._instances.set(e,t),e}closeSession(e){const t=this._instances.get(e);t?(t.dispose(),this._instances.delete(e)):this._log.warn(`no instance for ${e}, ignoring`)}dispose(){for(const[e,t]of this._instances.entries())try{t.dispose()}catch(t){this._log.error(`failed trying to dispose instance ${e}`,t)}this._instances.clear()}}var ux=__webpack_require__(54784);function dx(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function px(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){hx(e,t,n[t])}))}return e}function gx(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function fx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mx(e,t){if(e){if("string"==typeof e)return fx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fx(e,t):void 0}}function bx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(e){a=!0,i=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}}(e,t)||mx(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yx(e){return function(e){if(Array.isArray(e))return fx(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||mx(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var _x=function(e){return{_tag:"Of",value:e}},vx=function(e,t){return{_tag:"Concat",left:e,right:t}};var wx="required",Sx="optional",kx=function(e,t,n){return{_tag:"Key",key:e,kind:t,errors:n}},Ix=function(e,t,n){return{_tag:"Index",index:e,kind:t,errors:n}},Cx=function(e,t){return{_tag:"Member",index:e,errors:t}};function Ex(){return{concat:vx}}var Ax=__webpack_require__(6824),xx=__webpack_require__(21622);function Tx(e){return function(t,n){return{decode:function(r){return t(r)?e.of(r):e.throwError(n(r))}}}}function Ox(e){return function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return{decode:function(r){return Ax.literal.apply(Ax,n).is(r)?e.of(r):e.throwError(t(r,n))}}}}}function Px(e){return function(t){return function(n){return{decode:function(r){return null===r?e.of(null):e.bimap(n.decode(r),(function(e){return t(r,e)}),(function(e){return e}))}}}}}function Rx(e){var t=Lx(e);return function(n){return function(r){return{decode:function(i){return t(r,(function(t,r){return e.mapLeft(r.decode(i[t]),(function(e){return n(t,e)}))}))}}}}}function Dx(e){var t=Fx(e);return function(n){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return{decode:function(i){return t(r,(function(t,r){return e.mapLeft(r.decode(i[t]),(function(e){return n(t,e)}))}))}}}}}function Nx(e){return function(t){return function(n){return{decode:function(r){return e.ap(e.map(n.decode(r),(function(e){return function(t){return xx.U(e,t)}})),t.decode(r))}}}}}function Ux(e){return function(t){return function(n,r){var i=xx.H(r);return{decode:function(r){return e.mapLeft(i().decode(r),(function(e){return t(n,e)}))}}}}}function Mx(e){return function(t){return function(n){return{decode:function(r){return e.chain(n.decode(r),t.decode)}}}}}var jx,Fx=function(e){return function(t,n){return t.reduce((function(t,r,i){return e.ap(e.map(t,(function(e){return function(t){return e.push(t),e}})),n(i,r))}),e.of([]))}},Lx=function(e){return function(t,n){var r=Object.keys(t);if(0===r.length)return e.of({});for(var i=e.of({}),o=function(r){i=e.ap(e.map(i,(function(e){return function(t){return e[r]=t,e}})),n(r,t[r]))},s=0,a=r;s<a.length;s++){o(a[s])}return i}},Gx=function(e){var t={};for(var n in e){var r=e[n];Tr.tO(r)&&(t[n]=r.right)}return t},Bx=Ex(),zx={URI:Tr.ov,_E:void 0,map:function(e,t){return(0,tS.zG)(e,Tr.UI(t))},ap:function(e,t){return Tr.nM(e)?Tr.nM(t)?Tr.t$(Bx.concat(e.left,t.left)):e:Tr.nM(t)?t:Tr.F2(e.right(t.right))},of:Tr.F2,chain:function(e,t){return(0,tS.zG)(e,Tr.tS(t))},throwError:Tr.t$,bimap:function(e,t,n){return(0,tS.zG)(e,Tr.Pd(t,n))},mapLeft:function(e,t){return(0,tS.zG)(e,Tr.Vn(t))},alt:function(e,t){if(Tr.tO(e))return e;var n=t();return Tr.nM(n)?Tr.t$(Bx.concat(e.left,n.left)):n}},Vx=function(e,t){return _x(function(e,t){return{_tag:"Leaf",actual:e,error:t}}(e,t))},qx=(Tr.F2,function(e,t){return function(e,t){return Tx(zx)(e,(function(e){return Vx(e,t)}))}(e.is,t)}),Hx=Ox(zx)((function(e,t){return Vx(e,t.map((function(e){return JSON.stringify(e)})).join(" | "))})),Wx=qx(Ax.string,"string"),$x=qx(Ax.number,"number"),Xx=qx(Ax.boolean,"boolean"),Kx=qx(Ax.UnknownArray,"Array<unknown>"),Yx=qx(Ax.UnknownRecord,"Record<string, unknown>"),Zx=Px(zx)((function(e,t){return vx(_x(Cx(0,Vx(e,"null"))),_x(Cx(1,t)))})),Jx=function(e){return Rx(zx)((function(e,t){return _x(kx(e,wx,t))}))(e)},Qx=function(e){return(0,tS.zG)(Yx,lT(Jx(e)))},eT=Qx,tT=function(e){return function(e){var t=Lx(e),n=e.of(Tr.F2(void 0)),r=e.of(Tr.t$(void 0));return function(i){return function(o){return{decode:function(s){return e.map(t(o,(function(t,o){var a=s[t];return void 0===a?t in s?n:r:e.bimap(o.decode(a),(function(e){return i(t,e)}),(function(e){return Tr.F2(e)}))})),Gx)}}}}}(zx)((function(e,t){return _x(kx(e,Sx,t))}))(e)},nT=function(e){return function(e){var t=Fx(e);return function(n){return function(r){return{decode:function(i){return t(i,(function(t,i){return e.mapLeft(r.decode(i),(function(e){return n(t,e)}))}))}}}}}(zx)((function(e,t){return _x(Ix(e,Sx,t))}))(e)},rT=function(e){return function(e){var t=Lx(e);return function(n){return function(r){return{decode:function(i){return t(i,(function(t,i){return e.mapLeft(r.decode(i),(function(e){return n(t,e)}))}))}}}}}(zx)((function(e,t){return _x(kx(e,Sx,t))}))(e)},iT=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Dx(zx)((function(e,t){return _x(Ix(e,wx,t))})).apply(void 0,e)},oT=Nx(zx),sT=function(e){return function(t){return function(e){return function(t){return function(n){return function(r){var i=Object.keys(r);return{decode:function(o){var s=o[n];return Object.prototype.hasOwnProperty.call(r,s)?r[s].decode(o):e.throwError(t(n,s,i))}}}}}}(zx)((function(e,t,n){return _x(kx(e,wx,Vx(t,0===n.length?"never":n.map((function(e){return JSON.stringify(e)})).join(" | "))))}))(e)(t)}},aT=Ux(zx)((function(e,t){return _x(function(e,t){return{_tag:"Lazy",id:e,errors:t}}(e,t))})),cT=Ir.yR,lT=Mx(zx),uT="io-ts/Decoder",dT={URI:uT,literal:Hx,string:Wx,number:$x,boolean:Xx,nullable:Zx,type:eT,struct:Qx,partial:function(e){return(0,tS.zG)(Yx,lT(tT(e)))},record:function(e){return(0,tS.zG)(Yx,lT(rT(e)))},array:function(e){return(0,tS.zG)(Kx,lT(nT(e)))},tuple:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,tS.zG)(Kx,lT(iT.apply(void 0,e)))},intersect:oT,sum:function(e){return function(t){return(0,tS.zG)(Yx,lT(sT(e)(t)))}},lazy:aT,readonly:cT},hT=[],pT=function(e,t){return void 0===t&&(t=hT),{value:e,forest:t}},gT=function(e){return e.value+fT("\n",e.forest)},fT=function(e,t){for(var n,r="",i=t.length,o=0;o<i;o++){var s=o===i-1;r+=e+(s?"":"")+" "+(n=t[o]).value,r+=fT(e+(i>1&&!s?"  ":"   "),n.forest)}return r},mT=(jx={Leaf:function(e,t){return pT("cannot decode ".concat(JSON.stringify(e),", should be ").concat(t))},Key:function(e,t,n){return pT("".concat(t," property ").concat(JSON.stringify(e)),bT(n))},Index:function(e,t,n){return pT("".concat(t," index ").concat(e),bT(n))},Member:function(e,t){return pT("member ".concat(e),bT(t))},Lazy:function(e,t){return pT("lazy type ".concat(e),bT(t))},Wrap:function(e,t){return pT(e,bT(t))}},function(e){switch(e._tag){case"Leaf":return jx.Leaf(e.actual,e.error);case"Key":return jx.Key(e.key,e.kind,e.errors);case"Index":return jx.Index(e.index,e.kind,e.errors);case"Member":return jx.Member(e.index,e.errors);case"Lazy":return jx.Lazy(e.id,e.errors);case"Wrap":return jx.Wrap(e.error,e.errors)}}),bT=function(e){for(var t=[],n=e,r=[];;)switch(n._tag){case"Of":r.push(mT(n.value));var i=t.pop();if(void 0===i)return r;n=i;break;case"Concat":t.push(n.right),n=n.left}},yT=function(e){return bT(e).map(gT).join("\n")},_T=__webpack_require__(59833),vT=__webpack_require__(21147),wT=__webpack_require__(38538),ST=vT.yv,kT=vT.lr,IT=vT.vD;vT.f7((function(e,t){return e.length===t.length})),vT.f7((function(e,t){for(var n in e)if(!(n in t))return!1;for(var n in t)if(!(n in e))return!1;return!0}));var CT=vT.MW,ET=CT;var AT=wT.Eh,xT=_T.Eh,TT=vT.IP;var OT=Ir.yR,PT={URI:vT.ov,literal:function(){return vT.w4},string:ST,number:kT,boolean:IT,nullable:function(e){return{equals:function(t,n){return null===t||null===n?t===n:e.equals(t,n)}}},type:ET,struct:CT,partial:function(e){return{equals:function(t,n){for(var r in e){var i=t[r],o=n[r];if(!(void 0===i||void 0===o?i===o:e[r].equals(i,o)))return!1}return!0}}},record:AT,array:xT,tuple:TT,intersect:function(e){return function(t){return{equals:function(n,r){return t.equals(n,r)&&e.equals(n,r)}}}},sum:function(e){return function(t){return{equals:function(n,r){var i=n[e];return i===r[e]&&t[i].equals(n,r)}}}},lazy:function(e,t){return function(e){var t=(0,xx.H)(e);return{equals:function(e,n){return t().equals(e,n)}}}(t)},readonly:OT};const RT="#0E101A",DT="#1F243C",NT="#333954",UT="#4D536E",MT="#6D758D",jT="#9FA6BF",FT="#C6CBDE",LT="#E7E9F5",GT="#F0F2FC",BT="#F9FAFF",zT="#FFFFFF",VT="#0D8065",qT="#11A683",HT="#15C39A",WT="#41D9B5",$T="#87E8D1",XT="#AAF2E1",KT="#D7F7F0",YT="#EBFFFA",ZT="#26307D",JT="#3659B5",QT="#4A6EE0",eO="#638EEB",tO="#79A8F2",nO="#99C2FF",rO="#DBEBFF",iO="#EDF5FF",oO="#A50018",sO="#CE1331",aO="#EA1537",cO="#EE445F",lO="#F27388",uO="#FF99AB",dO="#FFDBE3",hO="#FDF0F3",pO="#8C5404",gO="#BB6E00",fO="#F29100",mO="#FFA600",bO="#FFB619",yO="#FFC940",_O="#FFDF80",vO="#FFF0D4",wO="#FFF8EC",SO="#7E3DAD",kO="#8F4CBF",IO="#A963DA",CO="#BD79ED",EO="#D3A1F7",AO="#F2E0FF",xO="#F9F0FF",TO="#09A4B2",OO="#28BAC7",PO="#4DD0DB",RO="#75E1EB",DO="#93EDF5",NO="#DBFCFF",UO="#EDFEFF",MO="#10627B",jO="#157C9B",FO="#1995BB",LO="#40A7C7",GO="#67B9D2",BO="#8ECBDE",zO="#B5DDE9",VO="#DDEFF5",qO="#494393",HO="#5B55B8",WO="#6E66DE",$O="#8780E4",XO="#9F9AE9",KO="#B8B4EF",YO="#D1CEF4",ZO="#E9E8FA",JO="#9A335C",QO="#C24173",eP="#EE6C9F",tP="#F18AB2",nP="#F8C6DA",rP="#FCE4EE",iP="#C44242",oP="#EC5050",sP="#EF6E6E",aP="#F28C8C",cP="#F9C7C7",lP="#FCE5E5",uP="#F6DF6C",dP="#F8E485",hP="#F9EA9E",pP="#FBEFB7",gP="#FCF5D0",fP="#FEFAE9",mP="#ADD04F",bP="#BBD86D",yP="#C9E08B",_P="#D7E8A9",vP="#E5F0C7",wP="#F3F8E5";var SP,kP,IP,CP,EP,AP,xP,TP,OP,PP,RP,DP,NP,UP,MP,jP,FP,LP,GP,BP,zP,VP,qP,HP,WP,$P,XP,KP,YP=__webpack_require__(92135);!function(e){e.Click="click",e.SelectSliderChoice="selectSliderChoice",e.Focus="focus",e.CloseAssistant="closeAssistant"}(SP||(SP={})),function(e){e.Dismiss="dismiss",e.Fulfill="fulfill"}(kP||(kP={})),function(e){e.Ideation="ideation",e.QuickReply="quickReply",e.QuickRewrite="quickRewrite",e.Rewrite="rewrite",e.PushRewrite="pushRewrite"}(IP||(IP={})),function(e){e.FadeIn="fadeIn",e.FadeOut="fadeOut",e.SlideLeft="slideLeft",e.SlideRight="slideRight"}(CP||(CP={})),function(e){e.D1="1",e.D2="2",e.D3="3",e.D4="4",e.D5="5",e.D6="6",e.D7="7",e.D8="8",e.D9="9",e.Infinite="infinite"}(EP||(EP={})),function(e){e.Low="low",e.Medium="medium",e.High="high"}(AP||(AP={})),function(e){e.Primary="primary",e.Secondary="secondary",e.Toggle="toggle",e.Yellow="yellow",e.Outlined="outlined",e.Link="link",e.DarkPrimary="darkPrimary",e.DarkSecondary="darkSecondary",e.GgoPrimary="ggoPrimary"}(xP||(xP={})),function(e){e.Round="round",e.Square="square"}(TP||(TP={})),function(e){e.Enabled="enabled",e.Disabled="disabled",e.Deselected="deselected",e.Selected="selected",e.Hidden="hidden"}(OP||(OP={})),function(e){e.V6SemanticBackgroundBaseDefault="V6_SemanticBackgroundBaseDefault",e.V6SemanticBackgroundBaseSubdued="V6_SemanticBackgroundBaseSubdued",e.V6SemanticBackgroundBaseInverse="V6_SemanticBackgroundBaseInverse",e.V6SemanticBackgroundBrandDefault="V6_SemanticBackgroundBrandDefault",e.V6SemanticBackgroundBrandSubdued="V6_SemanticBackgroundBrandSubdued",e.V6SemanticBackgroundClarityDefault="V6_SemanticBackgroundClarityDefault",e.V6SemanticBackgroundCorrectnessDefault="V6_SemanticBackgroundCorrectnessDefault",e.V6SemanticBackgroundCriticalDefault="V6_SemanticBackgroundCriticalDefault",e.V6SemanticBackgroundCriticalSubdued="V6_SemanticBackgroundCriticalSubdued",e.V6SemanticBackgroundEnterpriseDefault="V6_SemanticBackgroundEnterpriseDefault",e.V6SemanticBackgroundNeutralDefault="V6_SemanticBackgroundNeutralDefault",e.V6SemanticBackgroundProDefault="V6_SemanticBackgroundProDefault",e.V6SemanticBackgroundSuccessDefault="V6_SemanticBackgroundSuccessDefault",e.V6SemanticBackgroundSuccessSubdued="V6_SemanticBackgroundSuccessSubdued",e.V6SemanticBackgroundWarningDefault="V6_SemanticBackgroundWarningDefault",e.V6SemanticBackgroundWarningSubdued="V6_SemanticBackgroundWarningSubdued",e.V6SemanticBorderAdditionDefault="V6_SemanticBorderAdditionDefault",e.V6SemanticBorderBaseDefault="V6_SemanticBorderBaseDefault",e.V6SemanticBorderBaseSubdued="V6_SemanticBorderBaseSubdued",e.V6SemanticBorderBaseInverse="V6_SemanticBorderBaseInverse",e.V6SemanticBorderBrandDefault="V6_SemanticBorderBrandDefault",e.V6SemanticBorderBrandSubdued="V6_SemanticBorderBrandSubdued",e.V6SemanticBorderBusinessDefault="V6_SemanticBorderBusinessDefault",e.V6SemanticBorderBusinessSubdued="V6_SemanticBorderBusinessSubdued",e.V6SemanticBorderClarityDefault="V6_SemanticBorderClarityDefault",e.V6SemanticBorderCorrectnessDefault="V6_SemanticBorderCorrectnessDefault",e.V6SemanticBorderCriticalDefault="V6_SemanticBorderCriticalDefault",e.V6SemanticBorderCriticalSubdued="V6_SemanticBorderCriticalSubdued",e.V6SemanticBorderDeletionDefault="V6_SemanticBorderDeletionDefault",e.V6SemanticBorderDeliveryDefault="V6_SemanticBorderDeliveryDefault",e.V6SemanticBorderElevatedDefault="V6_SemanticBorderElevatedDefault",e.V6SemanticBorderEngagementDefault="V6_SemanticBorderEngagementDefault",e.V6SemanticBorderPlagiarismDefault="V6_SemanticBorderPlagiarismDefault",e.V6SemanticBorderProDefault="V6_SemanticBorderProDefault",e.V6SemanticBorderSuccessDefault="V6_SemanticBorderSuccessDefault",e.V6SemanticBorderSuccessSubdued="V6_SemanticBorderSuccessSubdued",e.V6SemanticBorderWarningDefault="V6_SemanticBorderWarningDefault",e.V6SemanticBorderWarningSubdued="V6_SemanticBorderWarningSubdued",e.V6SemanticElevationBaseDefault="V6_SemanticElevationBaseDefault",e.V6SemanticElevationOutlineDefault="V6_SemanticElevationOutlineDefault",e.V6SemanticHighlightAdditionDefault="V6_SemanticHighlightAdditionDefault",e.V6SemanticHighlightDeletionDefault="V6_SemanticHighlightDeletionDefault",e.V6SemanticIconAdditionInverse="V6_SemanticIconAdditionInverse",e.V6SemanticIconBaseDefault="V6_SemanticIconBaseDefault",e.V6SemanticIconBaseSubdued="V6_SemanticIconBaseSubdued",e.V6SemanticIconBaseInverse="V6_SemanticIconBaseInverse",e.V6SemanticIconBrandDefault="V6_SemanticIconBrandDefault",e.V6SemanticIconCriticalDefault="V6_SemanticIconCriticalDefault",e.V6SemanticIconCriticalInverse="V6_SemanticIconCriticalInverse",e.V6SemanticIconDeliveryDefault="V6_SemanticIconDeliveryDefault",e.V6SemanticIconDeliveryInverse="V6_SemanticIconDeliveryInverse",e.V6SemanticIconProDefault="V6_SemanticIconProDefault",e.V6SemanticIconProInverse="V6_SemanticIconProInverse",e.V6SemanticIconSuccessDefault="V6_SemanticIconSuccessDefault",e.V6SemanticIconWarningDefault="V6_SemanticIconWarningDefault",e.V6SemanticIconWarningInverse="V6_SemanticIconWarningInverse",e.V6SemanticIllustrationFill1="V6_SemanticIllustrationFill1",e.V6SemanticIllustrationFill2="V6_SemanticIllustrationFill2",e.V6SemanticIllustrationFillDefault="V6_SemanticIllustrationFillDefault",e.V6SemanticIllustrationShadowDefault="V6_SemanticIllustrationShadowDefault",e.V6SemanticIllustrationStroke1="V6_SemanticIllustrationStroke1",e.V6SemanticIllustrationStroke2="V6_SemanticIllustrationStroke2",e.V6SemanticIllustrationStroke3="V6_SemanticIllustrationStroke3",e.V6SemanticIllustrationStrokeDefault="V6_SemanticIllustrationStrokeDefault",e.V6SemanticTextAdditionDefault="V6_SemanticTextAdditionDefault",e.V6SemanticTextBaseDefault="V6_SemanticTextBaseDefault",e.V6SemanticTextBaseSubdued="V6_SemanticTextBaseSubdued",e.V6SemanticTextBaseInverse="V6_SemanticTextBaseInverse",e.V6SemanticTextBrandDefault="V6_SemanticTextBrandDefault",e.V6SemanticTextCriticalDefault="V6_SemanticTextCriticalDefault",e.V6SemanticTextDarkDefault="V6_SemanticTextDarkDefault",e.V6SemanticTextDeletionDefault="V6_SemanticTextDeletionDefault",e.V6SemanticTextEnterpriseDefault="V6_SemanticTextEnterpriseDefault",e.V6SemanticTextLightDefault="V6_SemanticTextLightDefault",e.V6SemanticTextProDefault="V6_SemanticTextProDefault",e.V6SemanticTextSuccessDefault="V6_SemanticTextSuccessDefault",e.V6SemanticTextWarningDefault="V6_SemanticTextWarningDefault",e.V6CoreBlue0="V6_CoreBlue0",e.V6CoreBlue10="V6_CoreBlue10",e.V6CoreBlue20="V6_CoreBlue20",e.V6CoreBlue30="V6_CoreBlue30",e.V6CoreBlue40="V6_CoreBlue40",e.V6CoreBlue60="V6_CoreBlue60",e.V6CoreBlue80="V6_CoreBlue80",e.V6CoreBlue90="V6_CoreBlue90",e.V6CoreBlue100="V6_CoreBlue100",e.V6CoreGold0="V6_CoreGold0",e.V6CoreGold10="V6_CoreGold10",e.V6CoreGold20="V6_CoreGold20",e.V6CoreGold30="V6_CoreGold30",e.V6CoreGold40="V6_CoreGold40",e.V6CoreGold60="V6_CoreGold60",e.V6CoreGold80="V6_CoreGold80",e.V6CoreGold90="V6_CoreGold90",e.V6CoreGold100="V6_CoreGold100",e.V6CoreGreen0="V6_CoreGreen0",e.V6CoreGreen10="V6_CoreGreen10",e.V6CoreGreen20="V6_CoreGreen20",e.V6CoreGreen30="V6_CoreGreen30",e.V6CoreGreen40="V6_CoreGreen40",e.V6CoreGreen60="V6_CoreGreen60",e.V6CoreGreen80="V6_CoreGreen80",e.V6CoreGreen90="V6_CoreGreen90",e.V6CoreGreen100="V6_CoreGreen100",e.V6CoreLightGreen="V6_CoreLightGreen",e.V6CoreNeutralGray0="V6_CoreNeutralGray0",e.V6CoreNeutralGray10="V6_CoreNeutralGray10",e.V6CoreNeutralGray20="V6_CoreNeutralGray20",e.V6CoreNeutralGray30="V6_CoreNeutralGray30",e.V6CoreNeutralGray40="V6_CoreNeutralGray40",e.V6CoreNeutralGray60="V6_CoreNeutralGray60",e.V6CoreNeutralGray80="V6_CoreNeutralGray80",e.V6CoreNeutralGray90="V6_CoreNeutralGray90",e.V6CoreNeutralGray100="V6_CoreNeutralGray100",e.V6CorePurple0="V6_CorePurple0",e.V6CorePurple10="V6_CorePurple10",e.V6CorePurple20="V6_CorePurple20",e.V6CorePurple30="V6_CorePurple30",e.V6CorePurple40="V6_CorePurple40",e.V6CorePurple60="V6_CorePurple60",e.V6CorePurple80="V6_CorePurple80",e.V6CorePurple90="V6_CorePurple90",e.V6CorePurple100="V6_CorePurple100",e.V6CoreRed0="V6_CoreRed0",e.V6CoreRed10="V6_CoreRed10",e.V6CoreRed20="V6_CoreRed20",e.V6CoreRed30="V6_CoreRed30",e.V6CoreRed40="V6_CoreRed40",e.V6CoreRed60="V6_CoreRed60",e.V6CoreRed80="V6_CoreRed80",e.V6CoreRed90="V6_CoreRed90",e.V6CoreRed100="V6_CoreRed100",e.V6CoreTeal0="V6_CoreTeal0",e.V6CoreTeal10="V6_CoreTeal10",e.V6CoreTeal20="V6_CoreTeal20",e.V6CoreTeal30="V6_CoreTeal30",e.V6CoreTeal40="V6_CoreTeal40",e.V6CoreTeal60="V6_CoreTeal60",e.V6CoreTeal80="V6_CoreTeal80",e.V6CoreTeal90="V6_CoreTeal90",e.V6CoreTeal100="V6_CoreTeal100",e.V6CoreTransparent="V6_CoreTransparent",e.V6CoreWhite="V6_CoreWhite",e.V6CoreYellowGreen="V6_CoreYellowGreen",e.CoreNeutral90="CoreNeutral90",e.CoreNeutral80="CoreNeutral80",e.CoreNeutral70="CoreNeutral70",e.CoreNeutral60="CoreNeutral60",e.CoreNeutral50="CoreNeutral50",e.CoreNeutral40="CoreNeutral40",e.CoreNeutral30="CoreNeutral30",e.CoreNeutral20="CoreNeutral20",e.CoreNeutral10="CoreNeutral10",e.CoreNeutral1="CoreNeutral1",e.CoreNeutral0="CoreNeutral0",e.CoreGreen70="CoreGreen70",e.CoreGreen60="CoreGreen60",e.CoreGreen50="CoreGreen50",e.CoreGreen40="CoreGreen40",e.CoreGreen30="CoreGreen30",e.CoreGreen20="CoreGreen20",e.CoreGreen10="CoreGreen10",e.CoreGreen1="CoreGreen1",e.CoreBlue70="CoreBlue70",e.CoreBlue60="CoreBlue60",e.CoreBlue50="CoreBlue50",e.CoreBlue40="CoreBlue40",e.CoreBlue30="CoreBlue30",e.CoreBlue20="CoreBlue20",e.CoreBlue10="CoreBlue10",e.CoreBlue1="CoreBlue1",e.CoreRed70="CoreRed70",e.CoreRed60="CoreRed60",e.CoreRed50="CoreRed50",e.CoreRed40="CoreRed40",e.CoreRed30="CoreRed30",e.CoreRed20="CoreRed20",e.CoreRed10="CoreRed10",e.CoreRed1="CoreRed1",e.CoreYellow80="CoreYellow80",e.CoreYellow70="CoreYellow70",e.CoreYellow60="CoreYellow60",e.CoreYellow50="CoreYellow50",e.CoreYellow40="CoreYellow40",e.CoreYellow30="CoreYellow30",e.CoreYellow20="CoreYellow20",e.CoreYellow10="CoreYellow10",e.CoreYellow1="CoreYellow1",e.CorePurple60="CorePurple60",e.CorePurple50="CorePurple50",e.CorePurple40="CorePurple40",e.CorePurple30="CorePurple30",e.CorePurple20="CorePurple20",e.CorePurple10="CorePurple10",e.CorePurple1="CorePurple1",e.CoreCyan60="CoreCyan60",e.CoreCyan50="CoreCyan50",e.CoreCyan40="CoreCyan40",e.CoreCyan30="CoreCyan30",e.CoreCyan20="CoreCyan20",e.CoreCyan10="CoreCyan10",e.CoreCyan1="CoreCyan1",e.CoreSky70="CoreSky70",e.CoreSky60="CoreSky60",e.CoreSky50="CoreSky50",e.CoreSky40="CoreSky40",e.CoreSky30="CoreSky30",e.CoreSky20="CoreSky20",e.CoreSky10="CoreSky10",e.CoreSky1="CoreSky1",e.CoreIndigo70="CoreIndigo70",e.CoreIndigo60="CoreIndigo60",e.CoreIndigo50="CoreIndigo50",e.CoreIndigo40="CoreIndigo40",e.CoreIndigo30="CoreIndigo30",e.CoreIndigo20="CoreIndigo20",e.CoreIndigo10="CoreIndigo10",e.CoreIndigo1="CoreIndigo1",e.CoreMagenta70="CoreMagenta70",e.CoreMagenta60="CoreMagenta60",e.CoreMagenta40="CoreMagenta40",e.CoreMagenta30="CoreMagenta30",e.CoreMagenta10="CoreMagenta10",e.CoreMagenta1="CoreMagenta1",e.CoreCoral60="CoreCoral60",e.CoreCoral50="CoreCoral50",e.CoreCoral40="CoreCoral40",e.CoreCoral30="CoreCoral30",e.CoreCoral10="CoreCoral10",e.CoreCoral1="CoreCoral1",e.CoreYellowBrand50="CoreYellowBrand50",e.CoreYellowBrand40="CoreYellowBrand40",e.CoreYellowBrand30="CoreYellowBrand30",e.CoreYellowBrand20="CoreYellowBrand20",e.CoreYellowBrand10="CoreYellowBrand10",e.CoreYellowBrand1="CoreYellowBrand1",e.CoreLime50="CoreLime50",e.CoreLime40="CoreLime40",e.CoreLime30="CoreLime30",e.CoreLime20="CoreLime20",e.CoreLime10="CoreLime10",e.CoreLime1="CoreLime1"}(PP||(PP={})),function(e){e.ButtonPrev="button:prev",e.ButtonNext="button:next",e.ButtonAccept="button:accept",e.ButtonDismiss="button:dismiss",e.StrongAlertRefBulkAccept="strongAlertRef:BulkAccept",e.StrongAlertRefBulkDismiss="strongAlertRef:BulkDismiss",e.StrongAlertRefBulkDismissBufferOuter="strongAlertRef:BulkDismissBufferOuter",e.StrongAlertRefUpgradeHook="strongAlertRef:UpgradeHook",e.StrongAlertRefConsolidatedLockedCard="strongAlertRef:ConsolidatedLockedCard",e.ButtonGoPremiumYellow="button:goPremiumYellow",e.AssistantCardToneInsights="assistantCard:toneInsights",e.AssistantCardPerformanceScore="assistantCard:performanceScore",e.AssistantFeedPerformanceScore="assistantFeed:performanceScore",e.ButtonPerformanceScore="button:performanceScore",e.GlobalPartPlagiarismWinFooter="globalPart:plagiarismWinFooter",e.GlobalPartPlagiarismWinHeader="globalPart:plagiarismWinHeader",e.GlobalPartWritingExpertWinFooter="globalPart:writingExpertWinFooter",e.GlobalPartWritingExpertWinHeader="globalPart:writingExpertWinHeader",e.GlobalPartPerformanceScoreCard="globalPart:performanceScoreCard",e.GlobalPartPerformanceScoreButton="globalPart:performanceScoreButton",e.GlobalPartWritingExpertState="globalPart:writingExpertState",e.GlobalPartAiStudioState="globalPart:aiStudioState"}(RP||(RP={})),function(e){e.Asc="asc",e.Desc="desc"}(DP||(DP={})),function(e){e.EqualTo="equalTo",e.NotEqualTo="notEqualTo"}(NP||(NP={})),function(e){e.Default="default",e.Loading="loading"}(UP||(UP={})),function(e){e.Left="left",e.Center="center",e.Right="right"}(MP||(MP={})),function(e){e.Close="close",e.ArrowRight="arrow-right",e.ArrowLeft="arrow-left",e.Dictionary="dictionary",e.Gear="gear",e.Clarity="clarity",e.Correctness="correctness",e.Engagement="engagement",e.Delivery="delivery",e.Diamond="diamond",e.DiamondSmall="diamondSmall",e.Feedback="feedback",e.Sensitivity="sensitivity",e.ExternalLink="external-link",e.Sparkles="sparkles",e.Ignore="ignore",e.Info="info",e.Proofreader="proofreader",e.More="more",e.Mute="mute",e.Report="report",e.Controls="controls",e.Performance="performance",e.BulletList="bullet-list",e.Accept="accept",e.Copy="copy",e.GButtonSmall="gButtonSmall",e.NewSmall="newSmall",e.Edit="edit",e.User="user",e.Plagiarism="plagiarism",e.QuestionMark="questionMark",e.NewFeature="newFeature",e.Assistant="assistant",e.Warning="warning"}(jP||(jP={})),function(e){e.AllSuggestions="allSuggestions",e.Correctness="correctness",e.Clarity="clarity",e.Engagement="engagement",e.Delivery="delivery",e.StyleGuide="styleGuide",e.SmartGuidelines="smartGuidelines",e.Premium="premium"}(FP||(FP={})),function(e){e.D0="0",e.D01="0.1",e.D02="0.2",e.D03="0.3",e.D04="0.4",e.D05="0.5",e.D06="0.6",e.D07="0.7",e.D08="0.8",e.D09="0.9",e.D1="1"}(LP||(LP={})),function(e){e.Insert="Insert",e.Delete="Delete",e.Retain="Retain"}(GP||(GP={})),function(e){e.Top="top",e.Right="right",e.Bottom="bottom",e.Left="left"}(BP||(BP={})),function(e){e.Radius0="Radius0",e.RadiusHalf="RadiusHalf",e.Radius1="Radius1",e.Radius2="Radius2",e.Radius3="Radius3"}(zP||(zP={})),function(e){e.Low="low",e.Medium="medium",e.High="high",e.BottomPanel="bottomPanel",e.TopPanel="topPanel"}(VP||(VP={})),function(e){e.D0="0",e.D0125="0.125",e.D025="0.25",e.D03125="0.3125",e.D0375="0.375",e.D05="0.5",e.D075="0.75",e.D1="1",e.D125="1.25"}(qP||(qP={})),function(e){e.Italic="italic",e.Bold="bold",e.StrikeoutHorizontal="strikeoutHorizontal",e.StrikeoutDiagonal="strikeoutDiagonal",e.Outline="outline"}(HP||(HP={})),function(e){e.Small="small",e.Regular="regular",e.Medium="medium",e.HeadingLevel1="headingLevel1",e.HeadingLevel3="headingLevel3",e.HeadingLevel4="headingLevel4"}(WP||(WP={})),function(e){e.Linear="linear",e.EaseIn="easeIn",e.EaseOut="easeOut",e.EaseInOut="easeInOut"}($P||($P={})),function(e){e.Auto="auto",e.Center="center",e.Top="top",e.Bottom="bottom",e.Left="left",e.Right="right",e.TopCenter="topCenter",e.TopLeft="topLeft",e.TopRight="topRight",e.BottomCenter="bottomCenter",e.BottomLeft="bottomLeft",e.BottomRight="bottomRight"}(XP||(XP={})),function(e){e.Top="top",e.Middle="middle",e.Bottom="bottom"}(KP||(KP={}));(0,Yr.S)((function(e){return LD(e)}));var ZP,JP,QP,eR,tR,nR,rR,iR,oR,sR,aR,cR,lR,uR,dR,hR,pR,gR,fR,mR,bR,yR,_R,vR,wR,SR=(0,Yr.S)((function(e){var t;return e.sum("type")(((t={}).notify=IR(e),t.openSettings=CR(e),t.openLearnMore=ER(e),t.openPerformanceScore=AR(e),t.openToneDetector=xR(e),t.upgradeToPremium=TR(e),t.showHighlights=OR(e),t.hideHighlights=PR(e),t.openFeedback=RR(e),t.openCreateSnippetModal=DR(e),t.closeCard=NR(e),t.nextCard=UR(e),t.prevCard=MR(e),t.removeRoot=jR(e),t.removeAlerts=FR(e),t.applyAlerts=LR(e),t.selectAlternative=GR(e),t.transition=BR(e),t.openLink=zR(e),t.copyToClipboard=VR(e),t.nativeOpenAssistant=qR(e),t.pushAssistantFeed=HR(e),t.popAssistantFeed=WR(e),t.focusAssistantCard=$R(e),t.switchView=XR(e),t.newRevision=KR(e),t.highlightAlert=YR(e),t.stopApplyingAlerts=ZR(e),t.closePopover=JR(e),t.interactPopover=eD(e),t.openGrammarlyGo=nD(e),t.enablePlagiarismCheck=rD(e),t.disablePlagiarismCheck=iD(e),t.enableWritingExpertCheck=oD(e),t.disableWritingExpertCheck=sD(e),t.enableAudienceAdaptCheck=aD(e),t.disableAudienceAdaptCheck=cD(e),t.enableAiStudioCheck=lD(e),t.disableAiStudioCheck=uD(e),t.nativeOpenUserSatisfactionFeedback=dD(e),t))})),kR=(0,Kr.Dd)(SP),IR=(0,Yr.S)((function(e){return e.intersect(e.partial({sourceId:eM(e)}))(e.struct({type:e.literal("notify"),userAction:kR(e)}))})),CR=(0,Yr.S)((function(e){return e.struct({type:e.literal("openSettings")})})),ER=(0,Yr.S)((function(e){return e.struct({type:e.literal("openLearnMore")})})),AR=(0,Yr.S)((function(e){return e.struct({type:e.literal("openPerformanceScore")})})),xR=(0,Yr.S)((function(e){return e.struct({type:e.literal("openToneDetector")})})),TR=(0,Yr.S)((function(e){return e.intersect(e.partial({url:e.string}))(e.struct({type:e.literal("upgradeToPremium")}))})),OR=(0,Yr.S)((function(e){return e.struct({type:e.literal("showHighlights")})})),PR=(0,Yr.S)((function(e){return e.struct({type:e.literal("hideHighlights")})})),RR=(0,Yr.S)((function(e){return e.struct({type:e.literal("openFeedback")})})),DR=(0,Yr.S)((function(e){return e.struct({type:e.literal("openCreateSnippetModal"),snippetContent:e.string})})),NR=(0,Yr.S)((function(e){return e.struct({type:e.literal("closeCard")})})),UR=(0,Yr.S)((function(e){return e.struct({type:e.literal("nextCard")})})),MR=(0,Yr.S)((function(e){return e.struct({type:e.literal("prevCard")})})),jR=(0,Yr.S)((function(e){return e.struct({type:e.literal("removeRoot")})})),FR=(0,Yr.S)((function(e){return e.struct({type:e.literal("removeAlerts")})})),LR=(0,Yr.S)((function(e){return e.struct({type:e.literal("applyAlerts"),alternativeIndex:e.number})})),GR=(0,Yr.S)((function(e){return e.struct({type:e.literal("selectAlternative"),alternativeIndex:e.number})})),BR=(0,Yr.S)((function(e){return e.struct({type:e.literal("transition"),fromName:e.string,toName:e.string,animateFrom:pD(e),animateTo:pD(e)})})),zR=(0,Yr.S)((function(e){return e.struct({type:e.literal("openLink"),url:e.string})})),VR=(0,Yr.S)((function(e){return e.struct({type:e.literal("copyToClipboard"),text:e.string})})),qR=(0,Yr.S)((function(e){return e.intersect(e.partial({cardId:e.string}))(e.struct({type:e.literal("nativeOpenAssistant")}))})),HR=(0,Yr.S)((function(e){return e.intersect(e.partial({cardId:e.string}))(e.struct({type:e.literal("pushAssistantFeed"),feedId:e.string}))})),WR=(0,Yr.S)((function(e){return e.intersect(e.partial({fallbackFeed:YU(e)}))(e.struct({type:e.literal("popAssistantFeed")}))})),$R=(0,Yr.S)((function(e){return e.struct({type:e.literal("focusAssistantCard"),cardId:e.string})})),XR=(0,Yr.S)((function(e){return e.struct({type:e.literal("switchView"),where:eM(e),selected:_M(e)})})),KR=(0,Yr.S)((function(e){return e.struct({type:e.literal("newRevision")})})),YR=(0,Yr.S)((function(e){return e.struct({type:e.literal("highlightAlert"),highlightIndex:e.number})})),ZR=(0,Yr.S)((function(e){return e.struct({type:e.literal("stopApplyingAlerts")})})),JR=(0,Yr.S)((function(e){return e.struct({type:e.literal("closePopover"),rootPopoverId:eM(e)})})),QR=(0,Kr.Dd)(kP),eD=(0,Yr.S)((function(e){return e.struct({type:e.literal("interactPopover"),rootPopoverId:eM(e),popoverViewId:eM(e),interaction:QR(e)})})),tD=(0,Kr.Dd)(IP),nD=(0,Yr.S)((function(e){return e.intersect(e.partial({alertId:e.number}))(e.struct({type:e.literal("openGrammarlyGo"),entryPoint:tD(e)}))})),rD=(0,Yr.S)((function(e){return e.struct({type:e.literal("enablePlagiarismCheck")})})),iD=(0,Yr.S)((function(e){return e.struct({type:e.literal("disablePlagiarismCheck")})})),oD=(0,Yr.S)((function(e){return e.struct({type:e.literal("enableWritingExpertCheck")})})),sD=(0,Yr.S)((function(e){return e.struct({type:e.literal("disableWritingExpertCheck")})})),aD=(0,Yr.S)((function(e){return e.struct({type:e.literal("enableAudienceAdaptCheck"),personaId:e.string})})),cD=(0,Yr.S)((function(e){return e.struct({type:e.literal("disableAudienceAdaptCheck")})})),lD=(0,Yr.S)((function(e){return e.struct({type:e.literal("enableAiStudioCheck"),playbookId:e.string})})),uD=(0,Yr.S)((function(e){return e.struct({type:e.literal("disableAiStudioCheck")})})),dD=(0,Yr.S)((function(e){return e.struct({type:e.literal("nativeOpenUserSatisfactionFeedback")})})),hD=(0,Yr.S)((function(e){return e.readonly(e.array(SR(e)))})),pD=(0,Kr.Dd)(CP),gD=(0,Yr.S)((function(e){return e.lazy("Behavior",(function(){return fD(e)}))})),fD=(0,Yr.S)((function(e){var t;return e.sum("type")(((t={})["behavior:strongAlertRef"]=mD(e),t["behavior:animation:fadeIn"]=bD(e),t["behavior:animation:fadeOut"]=yD(e),t["behavior:animation:textShimmer"]=vD(e),t["behavior:animation:progressiveBlur"]=wD(e),t["behavior:popoverAnchor"]=SD(e),t["behavior:lifecycle"]=ID(e),t))})),mD=(0,Yr.S)((function(e){return e.intersect(e.partial({name:MD(e)}))(e.struct({type:e.literal("behavior:strongAlertRef"),id:eM(e),alertIds:e.readonly(e.array(e.string)),onEmpty:hD(e)}))})),bD=(0,Yr.S)((function(e){return e.struct({type:e.literal("behavior:animation:fadeIn"),id:eM(e),timeCurve:CM(e)})})),yD=(0,Yr.S)((function(e){return e.struct({type:e.literal("behavior:animation:fadeOut"),id:eM(e),timeCurve:CM(e)})})),_D=(0,Kr.Dd)(EP),vD=(0,Yr.S)((function(e){return e.struct({type:e.literal("behavior:animation:textShimmer"),id:eM(e),duration:e.number,delay:e.number,shimmerColor:DD(e),timeCurve:CM(e),iterationCount:_D(e)})})),wD=(0,Yr.S)((function(e){return e.struct({type:e.literal("behavior:animation:progressiveBlur"),id:eM(e),timeCurve:CM(e)})})),SD=(0,Yr.S)((function(e){return e.lazy("BehaviorPopoverAnchor",(function(){return kD(e)}))})),kD=(0,Yr.S)((function(e){return e.intersect(e.partial({view:hM(e)}))(e.struct({type:e.literal("behavior:popoverAnchor"),id:eM(e),positionHint:gM(e)}))})),ID=(0,Yr.S)((function(e){return e.struct({type:e.literal("behavior:lifecycle"),onMount:hD(e),onUnmount:hD(e)})})),CD=(0,Yr.S)((function(e){return e.lazy("Behaviors",(function(){return ED(e)}))})),ED=(0,Yr.S)((function(e){return e.readonly(e.array(gD(e)))})),AD=(0,Kr.Dd)(AP),xD=(0,Yr.S)((function(e){return e.struct({topLeft:fM(e),topRight:fM(e),bottomRight:fM(e),bottomLeft:fM(e)})})),TD=(0,Yr.S)((function(e){return e.struct({offsetX:e.number,offsetY:e.number,blurRadius:e.number,color:DD(e),opacity:oM(e)})})),OD=(0,Kr.Dd)(xP),PD=(0,Kr.Dd)(TP),RD=(0,Kr.Dd)(OP),DD=(0,Kr.Dd)(PP),ND=(0,Kr.Dd)(RP),UD=(0,Yr.S)((function(e){return e.intersect(e.partial({label:e.string}))(e.intersect(e.partial({description:e.string}))(e.struct({})))})),MD=(0,Yr.S)((function(e){var t;return e.sum("kind")(((t={}).unknown=jD(e),t.known=FD(e),t))})),jD=(0,Yr.S)((function(e){return e.struct({kind:e.literal("unknown"),value:e.string})})),FD=(0,Yr.S)((function(e){return e.struct({kind:e.literal("known"),value:ND(e)})})),LD=(0,Yr.S)((function(e){return e.lazy("Content",(function(){return GD(e)}))})),GD=(0,Yr.S)((function(e){var t;return e.sum("type")(((t={}).text=BD(e),t.assistantFeed=$D(e),t.assistantCard=KD(e),t.popoverStack=ZD(e),t.inlineCard=QD(e),t["gButton:default"]=tN(e),t["gButton:tone"]=nN(e),t["gButton:proofit"]=rN(e),t["gButton:get-started"]=iN(e),t["gButton:plagiarism"]=oN(e),t["gButton:writingExpert"]=sN(e),t["gButton:audienceAdapt"]=aN(e),t["gButton:aiStudio"]=cN(e),t.gButton=lN(e),t.proofitButton=uN(e),t.lensesSwitchPanel=hN(e),t.strongAlertRef=pN(e),t.column=fN(e),t.row=bN(e),t.block=vN(e),t.box=SN(e),t.scroll=IN(e),t.list=RN(e),t.selectableDropDownMenu=NN(e),t.dropDownMenuButton=UN(e),t.icon=LN(e),t.image=GN(e),t.button=BN(e),t.sticker=VN(e),t.overlay=XN(e),t.tooltip=YN(e),t.clickableText=JN(e),t.count=QN(e),t.alertsCount=eU(e),t.alternativeChoice=rU(e),t.slider=lU(e),t.alternativeSlider=pU(e),t.nativeSkillsModal=fU(e),t.nativeSkillsList=mU(e),t.nativeSkillsView=bU(e),t.nativeToneInsightsModal=yU(e),t.nativeLearnMoreModal=_U(e),t.nativeSettingsModal=vU(e),t.nativeFeedbackModal=wU(e),t.nativeGetStartedChecklistModal=SU(e),t.nativeProofitModal=kU(e),t.nativeKeyTakeawaysAssistantCard=IU(e),t.nativeInlineCardContent=CU(e),t.nativePerformanceScoreButton=EU(e),t.viewStack=AU(e),t.nativeExperimentalGBConsistencyUpsellFooter=TU(e),t.radioButtonsGroup=PU(e),t.nativeExperimentalGBToneInsightsUpsellFooter=RU(e),t.collapsedCard=DU(e),t.shortFormCard=UU(e),t.longFormCard=jU(e),t.progressBar=GU(e),t.horizontalRule=BU(e),t.globalPart=zU(e),t.globalPartPlaceholder=qU(e),t.nativeUndoableTextChanges=XU(e),t))})),BD=(0,Yr.S)((function(e){return e.lazy("ContentText",(function(){return zD(e)}))})),zD=(0,Yr.S)((function(e){return e.intersect(e.partial({backgroundColor:DD(e)}))(e.intersect(e.partial({outlineColor:DD(e)}))(e.intersect(e.partial({behaviors:CD(e)}))(e.struct({type:e.literal("text"),id:eM(e),meta:UD(e),size:IM(e),text:e.string,textColor:DD(e),format:e.readonly(e.array(kM(e))),selectable:e.boolean}))))})),VD=(0,Kr.Dd)(DP),qD=(0,Yr.S)((function(e){return e.struct({orderBy:e.string,direction:VD(e)})})),HD=(0,Kr.Dd)(NP),WD=(0,Yr.S)((function(e){return e.struct({property:e.string,condition:HD(e),value:e.number})})),$D=(0,Yr.S)((function(e){return e.lazy("ContentAssistantFeed",(function(){return XD(e)}))})),XD=(0,Yr.S)((function(e){return e.intersect(e.partial({footer:LD(e)}))(e.intersect(e.partial({onEmpty:hD(e)}))(e.intersect(e.partial({onAssistantClose:hD(e)}))(e.intersect(e.partial({name:MD(e)}))(e.struct({type:e.literal("assistantFeed"),id:eM(e),header:LD(e),ordering:e.readonly(e.array(qD(e))),filtering:e.readonly(e.array(WD(e))),onRemove:hD(e)})))))})),KD=(0,Yr.S)((function(e){return e.lazy("ContentAssistantCard",(function(){return YD(e)}))})),YD=(0,Yr.S)((function(e){return e.intersect(e.partial({properties:e.readonly(e.record(e.nullable(e.number)))}))(e.intersect(e.partial({footer:LD(e)}))(e.intersect(e.partial({name:MD(e)}))(e.struct({type:e.literal("assistantCard"),id:eM(e),meta:UD(e),child:LD(e),onFocus:hD(e),onBlur:hD(e)}))))})),ZD=(0,Yr.S)((function(e){return e.lazy("ContentPopoverStack",(function(){return JD(e)}))})),JD=(0,Yr.S)((function(e){return e.struct({type:e.literal("popoverStack"),id:eM(e),views:e.readonly(e.record(hM(e))),selected:_M(e)})})),QD=(0,Yr.S)((function(e){return e.lazy("ContentInlineCard",(function(){return eN(e)}))})),eN=(0,Yr.S)((function(e){return e.intersect(e.partial({minWidth:mM(e)}))(e.intersect(e.partial({maxWidth:mM(e)}))(e.intersect(e.partial({behaviors:CD(e)}))(e.struct({type:e.literal("inlineCard"),id:eM(e),meta:UD(e),child:LD(e),onFocus:hD(e)}))))})),tN=(0,Yr.S)((function(e){return e.struct({type:e.literal("gButton:default"),id:eM(e),meta:UD(e),actions:hD(e)})})),nN=(0,Yr.S)((function(e){return e.struct({type:e.literal("gButton:tone"),id:eM(e),meta:UD(e),actions:hD(e)})})),rN=(0,Yr.S)((function(e){return e.struct({type:e.literal("gButton:proofit"),id:eM(e),meta:UD(e),actions:hD(e)})})),iN=(0,Yr.S)((function(e){return e.struct({type:e.literal("gButton:get-started"),id:eM(e),meta:UD(e),actions:hD(e)})})),oN=(0,Yr.S)((function(e){return e.struct({type:e.literal("gButton:plagiarism"),id:eM(e),meta:UD(e),actions:hD(e)})})),sN=(0,Yr.S)((function(e){return e.struct({type:e.literal("gButton:writingExpert"),id:eM(e),meta:UD(e),actions:hD(e)})})),aN=(0,Yr.S)((function(e){return e.struct({type:e.literal("gButton:audienceAdapt"),id:eM(e),meta:UD(e),actions:hD(e)})})),cN=(0,Yr.S)((function(e){return e.struct({type:e.literal("gButton:aiStudio"),id:eM(e),meta:UD(e),actions:hD(e)})})),lN=(0,Yr.S)((function(e){return e.struct({type:e.literal("gButton"),id:eM(e),meta:UD(e),actions:hD(e)})})),uN=(0,Yr.S)((function(e){return e.struct({type:e.literal("proofitButton"),id:eM(e),meta:UD(e),actions:hD(e)})})),dN=(0,Yr.S)((function(e){return e.struct({id:eM(e),meta:UD(e),kind:tM(e),label:e.string,onClickActions:hD(e)})})),hN=(0,Yr.S)((function(e){return e.struct({type:e.literal("lensesSwitchPanel"),id:eM(e),meta:UD(e),lensSwitchButtons:e.readonly(e.array(dN(e)))})})),pN=(0,Yr.S)((function(e){return e.lazy("ContentStrongAlertRef",(function(){return gN(e)}))})),gN=(0,Yr.S)((function(e){return e.intersect(e.partial({name:MD(e)}))(e.struct({type:e.literal("strongAlertRef"),id:eM(e),alertIds:e.readonly(e.array(e.string)),onEmpty:hD(e),child:LD(e)}))})),fN=(0,Yr.S)((function(e){return e.lazy("ContentColumn",(function(){return mN(e)}))})),mN=(0,Yr.S)((function(e){return e.intersect(e.partial({name:MD(e)}))(e.intersect(e.partial({behaviors:CD(e)}))(e.struct({type:e.literal("column"),id:eM(e),children:e.readonly(e.array(LD(e)))})))})),bN=(0,Yr.S)((function(e){return e.lazy("ContentRow",(function(){return yN(e)}))})),yN=(0,Yr.S)((function(e){return e.intersect(e.partial({name:MD(e)}))(e.intersect(e.partial({spacing:SM(e)}))(e.intersect(e.partial({behaviors:CD(e)}))(e.struct({type:e.literal("row"),id:eM(e),left:e.readonly(e.array(LD(e))),right:e.readonly(e.array(LD(e))),verticalAlign:AM(e)}))))})),_N=(0,Yr.S)((function(e){return e.struct({vertical:wM(e),horizontal:wM(e)})})),vN=(0,Yr.S)((function(e){return e.lazy("ContentBlock",(function(){return wN(e)}))})),wN=(0,Yr.S)((function(e){return e.intersect(e.partial({name:MD(e)}))(e.intersect(e.partial({fraction:e.number}))(e.intersect(e.partial({spacing:SM(e)}))(e.intersect(e.partial({innerSpacing:_N(e)}))(e.intersect(e.partial({horizontalAlign:ZU(e)}))(e.intersect(e.partial({verticalAlign:AM(e)}))(e.intersect(e.partial({maxLines:e.number}))(e.struct({type:e.literal("block"),id:eM(e),parts:e.readonly(e.array(LD(e)))}))))))))})),SN=(0,Yr.S)((function(e){return e.lazy("ContentBox",(function(){return kN(e)}))})),kN=(0,Yr.S)((function(e){return e.intersect(e.partial({name:MD(e)}))(e.intersect(e.partial({padding:SM(e)}))(e.intersect(e.partial({borderRadius:xD(e)}))(e.intersect(e.partial({backgroundColor:DD(e)}))(e.intersect(e.partial({minWidth:mM(e)}))(e.intersect(e.partial({behaviors:CD(e)}))(e.intersect(e.partial({shadow:vM(e)}))(e.intersect(e.partial({boxShadow:TD(e)}))(e.struct({type:e.literal("box"),id:eM(e),child:LD(e)})))))))))})),IN=(0,Yr.S)((function(e){return e.lazy("ContentScroll",(function(){return CN(e)}))})),CN=(0,Yr.S)((function(e){return e.intersect(e.partial({name:MD(e)}))(e.struct({type:e.literal("scroll"),id:eM(e),child:LD(e),maxHeight:mM(e)}))})),EN=(0,Yr.S)((function(e){var t;return e.sum("type")(((t={}).text=AN(e),t.icon=xN(e),t))})),AN=(0,Yr.S)((function(e){return e.struct({type:e.literal("text"),text:e.string})})),xN=(0,Yr.S)((function(e){return e.struct({type:e.literal("icon"),icon:JU(e)})})),TN=(0,Yr.S)((function(e){return e.intersect(e.partial({tooltip:e.string}))(e.struct({id:eM(e),meta:UD(e),label:EN(e),onClickActions:hD(e)}))})),ON=(0,Yr.S)((function(e){return e.lazy("ContentListItem",(function(){return PN(e)}))})),PN=(0,Yr.S)((function(e){return e.intersect(e.partial({behaviors:CD(e)}))(e.intersect(e.partial({tooltip:e.string}))(e.struct({id:eM(e),meta:UD(e),label:LD(e),actions:hD(e),secondaryButtons:e.readonly(e.array(TN(e)))})))})),RN=(0,Yr.S)((function(e){return e.lazy("ContentList",(function(){return DN(e)}))})),DN=(0,Yr.S)((function(e){return e.intersect(e.partial({name:MD(e)}))(e.intersect(e.partial({itemFocusedColor:DD(e)}))(e.intersect(e.partial({itemHoveredColor:DD(e)}))(e.struct({type:e.literal("list"),id:eM(e),meta:UD(e),items:e.readonly(e.array(ON(e)))}))))})),NN=(0,Yr.S)((function(e){return e.intersect(e.partial({name:MD(e)}))(e.intersect(e.partial({selectedItem:eM(e)}))(e.intersect(e.partial({placeholder:e.string}))(e.struct({type:e.literal("selectableDropDownMenu"),id:eM(e),meta:UD(e),onSelectActions:hD(e),select:yM(e)}))))})),UN=(0,Yr.S)((function(e){return e.intersect(e.partial({name:MD(e)}))(e.struct({type:e.literal("dropDownMenuButton"),id:eM(e),meta:UD(e),icon:JU(e),onClickActions:hD(e),menu:iM(e)}))})),MN=(0,Yr.S)((function(e){var t;return e.sum("kind")(((t={}).known=jN(e),t.url=FN(e),t))})),jN=(0,Yr.S)((function(e){return e.struct({kind:e.literal("known"),name:QU(e)})})),FN=(0,Yr.S)((function(e){return e.intersect(e.partial({size:wM(e)}))(e.struct({kind:e.literal("url"),name:e.string,url:e.string}))})),LN=(0,Yr.S)((function(e){return e.intersect(e.partial({backgroundColor:DD(e)}))(e.struct({type:e.literal("icon"),id:eM(e),meta:UD(e),source:MN(e)}))})),GN=(0,Yr.S)((function(e){return e.intersect(e.partial({backgroundColor:DD(e)}))(e.intersect(e.partial({borderRadius:mM(e)}))(e.struct({type:e.literal("image"),id:eM(e),meta:UD(e),name:MD(e),url:e.string,width:mM(e),height:mM(e)})))})),BN=(0,Yr.S)((function(e){return e.lazy("ContentButton",(function(){return zN(e)}))})),zN=(0,Yr.S)((function(e){return e.intersect(e.partial({tooltip:e.string}))(e.intersect(e.partial({horizontalAlign:ZU(e)}))(e.intersect(e.partial({behaviors:CD(e)}))(e.struct({type:e.literal("button"),id:eM(e),meta:UD(e),name:MD(e),kind:OD(e),state:RD(e),label:LD(e),actions:hD(e),shape:PD(e)}))))})),VN=(0,Yr.S)((function(e){return e.lazy("ContentSticker",(function(){return qN(e)}))})),qN=(0,Yr.S)((function(e){return e.struct({type:e.literal("sticker"),id:eM(e),meta:UD(e),name:MD(e),label:LD(e),child:LD(e),stickerColor:DD(e),stickerReverseColor:DD(e),onClickActions:hD(e)})})),HN=(0,Yr.S)((function(e){return e.lazy("ContentOverlayObscuredContent",(function(){return WN(e)}))})),WN=(0,Yr.S)((function(e){return e.intersect(e.partial({blur:AD(e)}))(e.struct({content:LD(e)}))})),$N=(0,Yr.S)((function(e){return e.intersect(e.partial({opacity:oM(e)}))(e.intersect(e.partial({borderRadius:xD(e)}))(e.struct({color:DD(e)})))})),XN=(0,Yr.S)((function(e){return e.lazy("ContentOverlay",(function(){return KN(e)}))})),KN=(0,Yr.S)((function(e){return e.intersect(e.partial({visibleContent:LD(e)}))(e.struct({type:e.literal("overlay"),id:eM(e),meta:UD(e),name:MD(e),obscuredContent:HN(e),overlay:$N(e)}))})),YN=(0,Yr.S)((function(e){return e.lazy("ContentTooltip",(function(){return ZN(e)}))})),ZN=(0,Yr.S)((function(e){return e.struct({type:e.literal("tooltip"),id:eM(e),meta:UD(e),name:MD(e),text:e.string,child:LD(e),alignment:EM(e)})})),JN=(0,Yr.S)((function(e){return e.struct({type:e.literal("clickableText"),id:eM(e),meta:UD(e),name:MD(e),onClickActions:hD(e),text:e.string,size:IM(e),textColor:DD(e),format:e.readonly(e.array(kM(e)))})})),QN=(0,Yr.S)((function(e){return e.intersect(e.partial({textColor:DD(e)}))(e.struct({type:e.literal("count"),id:eM(e),meta:UD(e),value:e.string,backgroundColor:DD(e)}))})),eU=(0,Yr.S)((function(e){return e.intersect(e.partial({backgroundColor:DD(e)}))(e.intersect(e.partial({outlineColor:DD(e)}))(e.struct({type:e.literal("alertsCount"),id:eM(e),meta:UD(e),size:IM(e),textColor:DD(e),format:e.readonly(e.array(kM(e)))})))})),tU=(0,Yr.S)((function(e){return e.lazy("ContentAlternativeChoiceAlterna",(function(){return nU(e)}))})),nU=(0,Yr.S)((function(e){return e.struct({label:LD(e),preview:LD(e)})})),rU=(0,Yr.S)((function(e){return e.lazy("ContentAlternativeChoice",(function(){return iU(e)}))})),iU=(0,Yr.S)((function(e){return e.struct({type:e.literal("alternativeChoice"),id:eM(e),meta:UD(e),alternatives:e.readonly(e.array(tU(e)))})})),oU=(0,Yr.S)((function(e){var t;return e.sum("type")(((t={}).icon=aU(e),t))})),sU=(0,Yr.S)((function(e){var t;return e.sum("kind")(((t={}).known=jN(e),t.url=FN(e),t))})),aU=(0,Yr.S)((function(e){return e.intersect(e.partial({backgroundColor:DD(e)}))(e.struct({type:e.literal("icon"),id:eM(e),source:sU(e)}))})),cU=(0,Yr.S)((function(e){return e.struct({id:eM(e),icon:oU(e),label:e.string,actions:hD(e)})})),lU=(0,Yr.S)((function(e){return e.struct({type:e.literal("slider"),id:eM(e),meta:UD(e),segmentSize:mM(e),fillColor:DD(e),choices:e.readonly(e.array(cU(e)))})})),uU=(0,Yr.S)((function(e){var t;return e.sum("type")(((t={}).icon=aU(e),t))})),dU=(0,Yr.S)((function(e){return e.lazy("ContentAlternativeSliderChoice",(function(){return hU(e)}))})),hU=(0,Yr.S)((function(e){return e.struct({id:eM(e),icon:uU(e),label:e.string,actions:hD(e),preview:LD(e)})})),pU=(0,Yr.S)((function(e){return e.lazy("ContentAlternativeSlider",(function(){return gU(e)}))})),gU=(0,Yr.S)((function(e){return e.struct({type:e.literal("alternativeSlider"),id:eM(e),meta:UD(e),segmentSize:mM(e),fillColor:DD(e),choices:e.readonly(e.array(dU(e)))})})),fU=(0,Yr.S)((function(e){return e.struct({type:e.literal("nativeSkillsModal"),id:eM(e)})})),mU=(0,Yr.S)((function(e){return e.struct({type:e.literal("nativeSkillsList"),id:eM(e),onSelect:hD(e)})})),bU=(0,Yr.S)((function(e){return e.struct({type:e.literal("nativeSkillsView"),id:eM(e)})})),yU=(0,Yr.S)((function(e){return e.struct({type:e.literal("nativeToneInsightsModal"),id:eM(e)})})),_U=(0,Yr.S)((function(e){return e.struct({type:e.literal("nativeLearnMoreModal"),id:eM(e)})})),vU=(0,Yr.S)((function(e){return e.struct({type:e.literal("nativeSettingsModal"),id:eM(e)})})),wU=(0,Yr.S)((function(e){return e.struct({type:e.literal("nativeFeedbackModal"),id:eM(e)})})),SU=(0,Yr.S)((function(e){return e.struct({type:e.literal("nativeGetStartedChecklistModal"),id:eM(e),onComplete:hD(e)})})),kU=(0,Yr.S)((function(e){return e.struct({type:e.literal("nativeProofitModal"),id:eM(e)})})),IU=(0,Yr.S)((function(e){return e.struct({type:e.literal("nativeKeyTakeawaysAssistantCard"),id:eM(e)})})),CU=(0,Yr.S)((function(e){return e.struct({type:e.literal("nativeInlineCardContent"),id:eM(e),onDetailsClick:hD(e)})})),EU=(0,Yr.S)((function(e){return e.struct({type:e.literal("nativePerformanceScoreButton"),id:eM(e)})})),AU=(0,Yr.S)((function(e){return e.lazy("ContentViewStack",(function(){return xU(e)}))})),xU=(0,Yr.S)((function(e){return e.struct({type:e.literal("viewStack"),id:eM(e),views:e.readonly(e.record(LD(e))),selected:_M(e)})})),TU=(0,Yr.S)((function(e){return e.struct({type:e.literal("nativeExperimentalGBConsistencyUpsellFooter"),id:eM(e)})})),OU=(0,Yr.S)((function(e){return e.struct({id:eM(e),meta:UD(e),label:e.string,onSelect:hD(e)})})),PU=(0,Yr.S)((function(e){return e.struct({type:e.literal("radioButtonsGroup"),id:eM(e),meta:UD(e),options:e.readonly(e.array(OU(e)))})})),RU=(0,Yr.S)((function(e){return e.struct({type:e.literal("nativeExperimentalGBToneInsightsUpsellFooter"),id:eM(e)})})),DU=(0,Yr.S)((function(e){return e.lazy("ContentCollapsedCard",(function(){return NU(e)}))})),NU=(0,Yr.S)((function(e){return e.intersect(e.partial({quickActions:LD(e)}))(e.struct({type:e.literal("collapsedCard"),id:eM(e),meta:UD(e),child:LD(e)}))})),UU=(0,Yr.S)((function(e){return e.lazy("ContentShortFormCard",(function(){return MU(e)}))})),MU=(0,Yr.S)((function(e){return e.struct({type:e.literal("shortFormCard"),id:eM(e),child:LD(e)})})),jU=(0,Yr.S)((function(e){return e.lazy("ContentLongFormCard",(function(){return FU(e)}))})),FU=(0,Yr.S)((function(e){return e.struct({type:e.literal("longFormCard"),id:eM(e),collapsedContent:LD(e),fullContent:LD(e),behaviors:CD(e),feedProperties:KU(e)})})),LU=(0,Kr.Dd)(UP),GU=(0,Yr.S)((function(e){return e.intersect(e.partial({pinPointValue:aM(e)}))(e.intersect(e.partial({borderColor:DD(e)}))(e.intersect(e.partial({height:mM(e)}))(e.struct({type:e.literal("progressBar"),id:eM(e),meta:UD(e),backgroundColor:DD(e),fillColor:DD(e),value:aM(e),state:LU(e)}))))})),BU=(0,Yr.S)((function(e){return e.struct({type:e.literal("horizontalRule"),id:eM(e),meta:UD(e)})})),zU=(0,Yr.S)((function(e){return e.lazy("ContentGlobalPart",(function(){return VU(e)}))})),VU=(0,Yr.S)((function(e){return e.struct({type:e.literal("globalPart"),id:eM(e),content:LD(e),name:MD(e)})})),qU=(0,Yr.S)((function(e){return e.lazy("ContentGlobalPartPlaceholder",(function(){return HU(e)}))})),HU=(0,Yr.S)((function(e){return e.intersect(e.partial({child:LD(e)}))(e.struct({type:e.literal("globalPartPlaceholder"),id:eM(e),globalPartId:eM(e)}))})),WU=(0,Yr.S)((function(e){return e.intersect(e.partial({position:e.number}))(e.intersect(e.partial({text:e.string}))(e.struct({type:sM(e)})))})),$U=(0,Yr.S)((function(e){return e.intersect(e.partial({id:e.string}))(e.struct({textOperation:e.readonly(e.array(WU(e)))}))})),XU=(0,Yr.S)((function(e){return e.struct({type:e.literal("nativeUndoableTextChanges"),id:eM(e),meta:UD(e),onUndoChange:hD(e),groupedDiffs:e.readonly(e.array($U(e))),showDeletions:e.boolean,showRetainsAsInserts:e.boolean})})),KU=(0,Yr.S)((function(e){return e.readonly(e.record(e.nullable(e.number)))})),YU=(0,Yr.S)((function(e){return e.intersect(e.partial({cardId:e.string}))(e.struct({feedId:e.string}))})),ZU=(0,Kr.Dd)(MP),JU=(0,Yr.S)((function(e){var t;return e.sum("type")(((t={}).icon=LN(e),t))})),QU=(0,Kr.Dd)(jP),eM=(0,Yr.S)((function(e){return e.string})),tM=(0,Kr.Dd)(FP),nM=(0,Yr.S)((function(e){return e.intersect(e.partial({icon:JU(e)}))(e.struct({id:eM(e),meta:UD(e),text:e.string,onClickActions:hD(e)}))})),rM=(0,Yr.S)((function(e){return e.intersect(e.partial({title:e.string}))(e.struct({items:e.readonly(e.array(nM(e)))}))})),iM=(0,Yr.S)((function(e){return e.struct({meta:UD(e),label:e.string,sections:e.readonly(e.array(rM(e)))})})),oM=(0,Kr.Dd)(LP),sM=(0,Kr.Dd)(GP),aM=(0,Yr.S)((function(e){return e.number})),cM=(0,Yr.S)((function(e){var t;return e.sum("kind")(((t={}).component=lM(e),t.gButton=uM(e),t.nativeComponent=dM(e),t))})),lM=(0,Yr.S)((function(e){return e.struct({kind:e.literal("component"),id:eM(e)})})),uM=(0,Yr.S)((function(e){return e.struct({kind:e.literal("gButton")})})),dM=(0,Yr.S)((function(e){return e.struct({kind:e.literal("nativeComponent"),knownName:ND(e)})})),hM=(0,Yr.S)((function(e){return e.lazy("PopoverView",(function(){return pM(e)}))})),pM=(0,Yr.S)((function(e){return e.intersect(e.partial({onShow:hD(e)}))(e.intersect(e.partial({onDismiss:hD(e)}))(e.intersect(e.partial({onFulfill:hD(e)}))(e.struct({id:eM(e),rootPopoverId:eM(e),anchor:cM(e),child:LD(e)}))))})),gM=(0,Kr.Dd)(BP),fM=(0,Kr.Dd)(zP),mM=(0,Yr.S)((function(e){return e.number})),bM=(0,Yr.S)((function(e){return e.struct({id:eM(e),meta:UD(e),label:e.string,onClickActions:hD(e)})})),yM=(0,Yr.S)((function(e){return e.struct({meta:UD(e),label:e.string,items:e.readonly(e.array(bM(e)))})})),_M=(0,Yr.S)((function(e){return e.string})),vM=(0,Kr.Dd)(VP),wM=(0,Kr.Dd)(qP),SM=(0,Yr.S)((function(e){return e.struct({top:wM(e),right:wM(e),bottom:wM(e),left:wM(e)})})),kM=(0,Kr.Dd)(HP),IM=(0,Kr.Dd)(WP),CM=(0,Kr.Dd)($P),EM=(0,Kr.Dd)(XP),AM=(0,Kr.Dd)(KP),xM="4.53.19",TM=["proofitButton","newRevision","gButton:default","gButton:tone","gButton:proofit","gButton:get-started","gButton:plagiarism","gButton:writingExpert","gButton:audienceAdapt","gButton:aiStudio","nativePerformanceScoreButton","globalPart","enableWritingExpertCheck","disableWritingExpertCheck"],OM=__webpack_require__(83816);function PM(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function RM(e){if(Array.isArray(e))return e}function DM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NM(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function UM(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function MM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){DM(e,t,n[t])}))}return e}function jM(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function FM(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function LM(e,t){return RM(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(e){a=!0,i=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}}(e,t)||BM(e,t)||UM()}function GM(e){return function(e){if(Array.isArray(e))return PM(e)}(e)||NM(e)||BM(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function BM(e,t){if(e){if("string"==typeof e)return PM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?PM(e,t):void 0}}function zM(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function VM(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function qM(e){return TM.includes(e.type)}!function(e){e.isStrongAlertRefComponent=function(e){return"child"in e},e.isStrongAlertRefBehavior=function(e){return!("child"in e)}}(ZP||(ZP={})),function(e){e.isStrongAlertRef=function(e){return"strongAlertRef"===e.type},e.create=function(e,t,n){return{type:"strongAlertRef",alertIds:t,child:e,onEmpty:n,id:mR.from("strongAlertRef")}}}(JP||(JP={})),function(e){e.isLongFormCard=function(e){return"longFormCard"===e.type},e.create=function(e,t,n){return{type:"longFormCard",fullContent:e,collapsedContent:t,id:mR.from("longFormCard"),behaviors:[eR.StrongAlertRef.create(n,[])],feedProperties:{}}}}(QP||(QP={})),function(e){e.isStrongAlertRef=function(e){return"behavior:strongAlertRef"===e.type},function(e){e.create=function(e,t){return{id:mR.from("behavior:strongAlertRef"),type:"behavior:strongAlertRef",alertIds:e,onEmpty:t}};e.eq=Yr.n(PT)(mD)}(e.StrongAlertRef||(e.StrongAlertRef={})),e.isPopoverAnchor=function(e){return"behavior:popoverAnchor"===e.type},function(e){e.create=function(e,t){return{type:"behavior:popoverAnchor",id:e,positionHint:t}};e.nonEmpty=function(e){return!!e.view}}(e.PopoverAnchor||(e.PopoverAnchor={})),function(e){e.isTextShimmer=function(e){return"behavior:animation:textShimmer"===e.type}}(e.TextShimmer||(e.TextShimmer={})),function(e){e.isProgressiveBlur=function(e){return"behavior:animation:progressiveBlur"===e.type}}(e.ProgressiveBlur||(e.ProgressiveBlur={}))}(eR||(eR={})),function(e){e.create=function(e,t,n,r,i){return{type:"row",left:e,right:t,spacing:n,verticalAlign:r,id:mR.from("row"),behaviors:i?[eR.PopoverAnchor.create(i,BP.Top)]:void 0}},e.isRow=function(e){return"row"===e.type}}(tR||(tR={})),function(e){e.create=function(e){return{type:"column",children:e,id:mR.from("column")}}}(nR||(nR={})),function(e){var t=e.Type="block";e.create=function(e,n,r){for(var i=arguments.length,o=new Array(i>3?i-3:0),s=3;s<i;s++)o[s-3]=arguments[s];return{type:t,name:bR.unknown(e),parts:o,spacing:n,innerSpacing:r,id:mR.from(e)}},e.isBlock=function(e){return e.type===t},e.hasOnlyTextParts=function(e){return e.parts.every(iR.isText)}}(rR||(rR={})),function(e){var t=e.Type="text";e.create=function(e,n,r,i,o,s,a){var c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{};return{type:t,text:e,size:n,format:r,textColor:i,backgroundColor:o,outlineColor:s,id:mR.from(t),selectable:a,meta:c}},e.isText=function(e){return e.type===t}}(iR||(iR={})),function(e){e.create=function(e,t){return{label:e,preview:t}}}(oR||(oR={})),function(e){e.create=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return{type:"alternativeChoice",alternatives:n,id:mR.from("alternativeChoice"),meta:e}}}(sR||(sR={})),function(e){e.create=function(e,t){return{type:"viewStack",id:mR.from("ViewStack"),views:t,selected:e}}}(aR||(aR={})),function(e){var t=e.Type="button";!function(e){e.isTransitionAction=function(e){return"transition"===e.type},e.isApplyAlertsAction=function(e){return"applyAlerts"===e.type},e.createSelectAlternativeAction=function(e){return{type:"selectAlternative",alternativeIndex:e}}}(e.Action||(e.Action={})),e.isButton=function(e){return"button"===e.type},e.create=function(e,n,r,i,o,s){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:TP.Square,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},l=mR.from(e);return{type:t,id:l,name:bR.unknown(e),tooltip:o,kind:i,state:OP.Enabled,label:{type:rR.Type,name:bR.unknown(""),parts:[iR.create(n,WP.Regular,[],PP.CoreNeutral0,void 0,void 0,!1)],spacing:s,id:mR.from("label-button-"+l)},actions:r,shape:a,meta:c}},e.createIcon=function(e,n,r,i,o){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:TP.Square,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},c=mR.from(e),l="icon-button-"+e;return{type:t,id:c,name:bR.unknown(e),tooltip:o,kind:i,state:OP.Enabled,label:{type:rR.Type,name:bR.unknown(l),spacing:uR.create("0","0.25","0","0.25"),parts:[lR.create(n,void 0)],id:mR.from(l)},actions:r,shape:s,meta:a}}}(cR||(cR={})),function(e){var t=e.Type="icon";!function(e){e.createKnown=function(e){return{kind:"known",name:e}},e.createUrl=function(e,t,n){return{kind:"url",name:t,url:e,size:n}}}(e.Source||(e.Source={})),e.create=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{type:t,source:e,backgroundColor:n,id:mR.from(t),meta:r}}}(lR||(lR={})),function(e){e.create=function(e,t,n,r){return{top:e,bottom:n,left:r,right:t}}}(uR||(uR={})),function(e){e.create=function(e,t){return{vertical:t,horizontal:e}}}(dR||(dR={})),function(e){var t=e.Type="count";e.create=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;return{type:"count",backgroundColor:n,value:e,id:mR.from(t),meta:r,textColor:i}}}(hR||(hR={})),function(e){!function(e){e.create=function(e,t,n){return{type:"sliderChoice",id:mR.from("slider-choice-"+t.toLowerCase()),icon:e,label:t,actions:n}}}(e.Choice||(e.Choice={})),e.create=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{type:"slider",segmentSize:e,fillColor:t,choices:n,id:mR.from("slider"),meta:r}}}(pR||(pR={})),function(e){!function(e){e.create=function(e,t,n,r){return{id:mR.from("alternative-slider-choice-"+t.toLowerCase()),icon:e,label:t,actions:n,preview:r}}}(e.Choice||(e.Choice={})),e.create=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{type:"alternativeSlider",segmentSize:e,fillColor:t,choices:n,id:mR.from("alternativeSlider"),meta:r}}}(gR||(gR={})),function(e){e.create=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:"list",items:e,id:mR.from("list"),meta:t}},function(e){e.create=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return{id:mR.from("listItem"),label:e,behaviors:n,actions:t,secondaryButtons:r,meta:i}}}(e.Item||(e.Item={}))}(fR||(fR={})),function(e){e.from=function(e){return e+"#"+(0,OM.fg)(6)}}(mR||(mR={})),function(e){e.unknown=function(e){return{kind:"unknown",value:e}}}(bR||(bR={})),function(e){e.create=function(e,t,n){return{type:"popoverStack",id:e,views:n,selected:t}},e.createView=function(e,t,n,r){return{id:e,rootPopoverId:t,child:n,anchor:{kind:"component",id:r||(0,OM.fg)(3)}}}}(yR||(yR={})),function(e){var t=e.Type="globalPart";e.create=function(e,n,r){return{type:t,id:e,content:n,name:bR.unknown(r)}},e.isGlobalPart=function(e){return e.type===t}}(_R||(_R={})),function(e){var t=e.Type="globalPartPlaceholder";e.create=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mR.from(t),r=arguments.length>2?arguments[2]:void 0;return{type:t,id:n,globalPartId:e,child:r}},e.isGlobalPartPlaceholder=function(e){return e.type===t}}(vR||(vR={})),function(e){var t,n=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.PreOrder,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=GM(i).concat([e.id]);switch(r){case t.PreOrder:return n(e,o),C(e,n,r,o);case t.PostOrder:return C(e,n,r,o),n(e,o);default:(0,ll.vE)(r)}},r=function(e){var n,r=arguments;return zM(this,(function(i){switch(i.label){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:t.PreOrder,[5,VM(u(e,n,[]))];case 1:return i.sent(),[2]}}))},i=function(e,t,n,r){var i=r;return wR.forEach(e,(function(e,n){return i=t(i,e,n)}),n),i},o=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wR.TreeTraversal.PreOrder,i=!0,o=!1,s=void 0;try{for(var a,c=r(e,n)[Symbol.iterator]();!(i=(a=c.next()).done);i=!0){var l=a.value;if(l.type===t)return kr.G(l)}}catch(e){o=!0,s=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw s}}return kr.YP},s=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.PreOrder;switch(r){case t.PreOrder:return(0,Ir.zG)(n(e),(function(e){return _(e,n,r)}));case t.PostOrder:return(0,Ir.zG)(_(e,n,r),kr.UI(n));default:(0,ll.vE)(r)}},a=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.PreOrder;switch(r){case t.PreOrder:return(0,Ir.zG)(e,kr.DT(n),kr.tS((function(e){return(0,Ir.zG)(v(e,n,r),kr.UI((function(t){return MM({},e,t)})))})));case t.PostOrder:return(0,Ir.zG)(v(e,n,r),kr.tS((function(t){return kr.DT(n)(MM({},e,t))})));default:(0,ll.vE)(r)}},c=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.PreOrder;switch(r){case t.PreOrder:return(0,Ir.zG)(n(e),kr.tS((function(e){return(0,Ir.zG)(w(e,n,r),kr.UI((function(t){return MM({},e,t)})))})));case t.PostOrder:return(0,Ir.zG)(w(e,n,r),kr.tS((function(t){return n(MM({},e,t))})));default:(0,ll.vE)(r)}},l=function(e){return a(e,(0,ao.ff)(y),t.PostOrder)},u=function(e){var n,r,i,o=arguments;return zM(this,(function(s){switch(s.label){case 0:switch(n=o.length>1&&void 0!==o[1]?o[1]:t.PreOrder,r=o.length>2&&void 0!==o[2]?o[2]:[],i=GM(r).concat([e.id]),n){case t.PreOrder:return[3,1];case t.PostOrder:return[3,4]}return[3,7];case 1:return[4,e];case 2:return s.sent(),[5,VM(h(e,n,i))];case 3:return s.sent(),[3,8];case 4:return[5,VM(h(e,n,i))];case 5:return s.sent(),[4,e];case 6:return s.sent(),[3,8];case 7:(0,ll.vE)(n),s.label=8;case 8:return[2]}}))},d=function(e){var n,r,i,o=arguments;return zM(this,(function(s){switch(s.label){case 0:n=o.length>1&&void 0!==o[1]?o[1]:t.PreOrder,r=o.length>2?o[2]:void 0,i=0,s.label=1;case 1:return i<e.length?[5,VM(u(e[i],n,r))]:[3,4];case 2:s.sent(),s.label=3;case 3:return i++,[3,1];case 4:return[2]}}))},h=function(e){var n,r,i,o,s,a,c,l,h=arguments;return zM(this,(function(p){switch(p.label){case 0:switch(n=h.length>1&&void 0!==h[1]?h[1]:t.PreOrder,r=h.length>2?h[2]:void 0,e.type){case"column":return[3,1];case"assistantCard":return[3,3];case"popoverStack":return[3,8];case"strongAlertRef":return[3,10];case"row":return[3,12];case"block":return[3,15];case"box":case"scroll":case"inlineCard":case"shortFormCard":return[3,17];case"globalPart":return[3,19];case"globalPartPlaceholder":return[3,21];case"list":return[3,23];case"button":return[3,25];case"alternativeChoice":return[3,27];case"alternativeSlider":return[3,32];case"assistantFeed":return[3,37];case"viewStack":return[3,42];case"collapsedCard":return[3,44];case"longFormCard":return[3,49];case"sticker":return[3,52];case"overlay":return[3,55];case"tooltip":return[3,60];case"icon":case"image":case"text":case"clickableText":case"count":case"alertsCount":case"slider":case"gButton":case"lensesSwitchPanel":case"proofitButton":case"nativeSkillsModal":case"nativeSkillsList":case"nativeSkillsView":case"nativeToneInsightsModal":case"nativeLearnMoreModal":case"nativeSettingsModal":case"nativeFeedbackModal":case"nativeGetStartedChecklistModal":case"nativeKeyTakeawaysAssistantCard":case"nativeProofitModal":case"nativeExperimentalGBToneInsightsUpsellFooter":case"nativeExperimentalGBConsistencyUpsellFooter":case"nativeInlineCardContent":case"progressBar":case"horizontalRule":case"dropDownMenuButton":case"selectableDropDownMenu":case"radioButtonsGroup":case"nativeUndoableTextChanges":return[3,62]}return[3,63];case 1:return[5,VM(d(e.children,n,r))];case 2:return p.sent(),[3,64];case 3:return null==e.footer?[3,5]:[5,VM(u(e.footer,n,r))];case 4:return p.sent(),[3,6];case 5:null,p.label=6;case 6:return[5,VM(u(e.child,n,r))];case 7:return p.sent(),[3,64];case 8:return[5,VM(d(Object.values(e.views).map((function(e){return e.child})),n,r))];case 9:return p.sent(),[3,64];case 10:return[5,VM(u(e.child,n,r))];case 11:return p.sent(),[3,64];case 12:return[5,VM(d(e.left,n,r))];case 13:return p.sent(),[5,VM(d(e.right,n,r))];case 14:return p.sent(),[3,64];case 15:return[5,VM(d(e.parts,n,r))];case 16:return p.sent(),[3,64];case 17:return[5,VM(u(e.child,n,r))];case 18:return p.sent(),[3,64];case 19:return[5,VM(u(e.content,n,r))];case 20:return p.sent(),[3,64];case 21:return e.child?[5,VM(u(e.child,n,r))]:[2];case 22:return p.sent(),[3,64];case 23:return[5,VM(d(e.items.map((function(e){return e.label})),n,r))];case 24:return p.sent(),[3,64];case 25:return[5,VM(u(e.label,n,r))];case 26:return p.sent(),[3,64];case 27:i=0,p.label=28;case 28:return i<e.alternatives.length?(o=e.alternatives[i],s=o.label,a=o.preview,[5,VM(d([s,a],n,r))]):[3,31];case 29:p.sent(),p.label=30;case 30:return i++,[3,28];case 31:return[3,64];case 32:c=0,p.label=33;case 33:return c<e.choices.length?(l=e.choices[c].preview,[5,VM(u(l,n,r))]):[3,36];case 34:p.sent(),p.label=35;case 35:return c++,[3,33];case 36:return[3,64];case 37:return null==e.footer?[3,39]:[5,VM(u(e.footer,n,r))];case 38:return p.sent(),[3,40];case 39:null,p.label=40;case 40:return[5,VM(u(e.header,n,r))];case 41:return p.sent(),[3,64];case 42:return[5,VM(d(Object.values(e.views),n,r))];case 43:return p.sent(),[3,64];case 44:return null==e.quickActions?[3,46]:[5,VM(u(e.quickActions,n,r))];case 45:return p.sent(),[3,47];case 46:null,p.label=47;case 47:return[5,VM(u(e.child,n,r))];case 48:return p.sent(),[3,64];case 49:return[5,VM(u(e.collapsedContent,n,r))];case 50:return p.sent(),[5,VM(u(e.fullContent,n,r))];case 51:return p.sent(),[3,64];case 52:return[5,VM(u(e.child,n,r))];case 53:return p.sent(),[5,VM(u(e.label,n,r))];case 54:return p.sent(),[3,64];case 55:return null==e.visibleContent?[3,57]:[5,VM(u(e.visibleContent,n,r))];case 56:return p.sent(),[3,58];case 57:null,p.label=58;case 58:return[5,VM(u(e.obscuredContent.content,n,r))];case 59:return p.sent(),[3,64];case 60:return[5,VM(u(e.child,n,r))];case 61:return p.sent(),[3,64];case 62:return[2];case 63:if(qM(e))return[2];(0,ll.vE)(e),p.label=64;case 64:return[2]}}))};!function(e){e.PreOrder="PreOrder",e.PostOrder="PstOrder"}(t=e.TreeTraversal||(e.TreeTraversal={})),e.forEach=n,e.traverse=r,e.reduce=i,e.findFirst=o,e.findFirstWithPredicate=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wR.TreeTraversal.PreOrder,i=!0,o=!1,s=void 0;try{for(var a,c=r(e,n)[Symbol.iterator]();!(i=(a=c.next()).done);i=!0){var l=a.value;if(t(l))return kr.G(l)}}catch(e){o=!0,s=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw s}}return kr.YP};var p=e.over=function(e,n,r){var i,o=RM(i=n)||NM(i)||BM(i)||UM(),s=o[0],a=o.slice(1);return _T.xb(a)&&s===e.id?r(e):k(e,Ir.Q1,t.PreOrder,(function(t){return e.id===s&&t.id===a[0]?p(t,a,r):kr.G(t)}))};e.map=s,e.filter=a,e.filterMap=c,e.compact=l;var g=e.getAlertRefs=function(e){switch(e.type){case"alternativeChoice":case"alternativeSlider":case"block":case"button":case"count":case"alertsCount":case"icon":case"image":case"row":case"box":case"slider":case"text":case"clickableText":case"column":case"scroll":case"assistantFeed":case"assistantCard":case"popoverStack":case"gButton":case"lensesSwitchPanel":case"nativeSkillsModal":case"nativeSkillsList":case"nativeSkillsView":case"nativeToneInsightsModal":case"nativeLearnMoreModal":case"nativeSettingsModal":case"nativeFeedbackModal":case"nativeGetStartedChecklistModal":case"nativeKeyTakeawaysAssistantCard":case"nativeProofitModal":case"viewStack":case"proofitButton":case"dropDownMenuButton":case"selectableDropDownMenu":case"radioButtonsGroup":case"nativeExperimentalGBToneInsightsUpsellFooter":case"nativeExperimentalGBConsistencyUpsellFooter":case"collapsedCard":case"nativeInlineCardContent":case"progressBar":case"horizontalRule":case"tooltip":case"globalPartPlaceholder":case"sticker":case"overlay":case"nativeUndoableTextChanges":return kr.YP;case"shortFormCard":return g(e.child);case"longFormCard":return(0,Ir.zG)(e.behaviors,Or.hX(eR.isStrongAlertRef),YP.nI);case"strongAlertRef":return kr.G([e]);case"inlineCard":return(0,Ir.zG)((0,Ir.zG)(e.behaviors,kr.ij,kr.tS((0,Ir.ls)(Or.hX(eR.isStrongAlertRef),YP.nI))));case"list":return(0,Ir.zG)(e.items,Or.UI((function(e){return(0,Ir.zG)(e.behaviors,kr.ij,kr.tS((0,Ir.ls)(_T.hX(eR.isStrongAlertRef),YP.nI)))})),kr.RD,kr.UI(YP.xH));default:if(qM(e))return kr.YP;(0,ll.vE)(e)}},f=(e.getAlertIds=(0,Ir.ls)(g,kr.tS((0,Ir.ls)(Or.tS((0,no.ei)("alertIds")),YP.c2))),e.getAllAlertIds=function(e){return i(e,(function(e,t){return(0,Ir.zG)(wR.getAlertIds(t),kr.UI((function(t){return e.concat(t)})),kr.fS((function(){return e})))}),t.PreOrder,[])},e.getSDUIId=function(e){return kr.ij(e.id)},e.setPopoverView=function(e,t){return s(e,(function(e){switch(e.type){case"box":case"row":case"button":return(0,Ir.zG)(kr.ij(e.behaviors),kr.tS(Or.Ew(eR.isPopoverAnchor)),kr.g_((0,Ir.a9)(e),(function(n){var r=n.view,i=FM(n,["view"]);return(0,Ir.zG)(kr.ij(r),kr.g_((function(){return(0,Ir.zG)(t,kr.hX((function(e){return"component"===e.anchor.kind&&e.anchor.id===i.id})),kr.g_((0,Ir.a9)(e),(function(t){return jM(MM({},e),{behaviors:[jM(MM({},i),{view:t})]})})))}),(function(n){return(0,Ir.zG)(t,kr.hX((function(e){return(0,no.Xy)(e.anchor,n.anchor)})),kr.g_((function(){return jM(MM({},e),{behaviors:[i]})}),(function(t){return t.rootPopoverId===n.rootPopoverId&&t.id===n.id?e:jM(MM({},e),{behaviors:[jM(MM({},i),{view:t})]})})))})))})));default:return e}}))},e.setGlobalPartPlaceholderContent=function(e,t){return s(e,(function(e){return"globalPartPlaceholder"===e.type?(0,Ir.zG)(t(e.globalPartId),kr.g_((function(){return e}),(function(t){return jM(MM({},e),{child:t.content})}))):e}))},e.removeStrongAlertRef=function(e){return function(t){var n=(0,Ir.zG)(t,Or.UI((function(e){return e.alertIds})),Or.xH,(function(e){return new Set(e)})),r=(0,Ir.zG)(t,YP.hX(ZP.isStrongAlertRefComponent)),i=(0,Ir.zG)(t,YP.hX(ZP.isStrongAlertRefBehavior));return(0,Ir.zG)(c(e,m(n,r,i)),kr.tS(l))}},function(e,t){var n;return jM(MM({},e),{behaviors:null===(n=e.behaviors)||void 0===n?void 0:n.map((function(e){return"behavior:strongAlertRef"===e.type?jM(MM({},e),{alertIds:e.alertIds.filter((function(e){return!t.has(e)}))}):e}))})}),m=function(e,t,n){return function(r){switch(r.type){case"alternativeChoice":case"alternativeSlider":case"box":case"block":case"button":case"count":case"alertsCount":case"icon":case"image":case"row":case"slider":case"text":case"column":case"scroll":case"assistantFeed":case"assistantCard":case"popoverStack":case"gButton":case"lensesSwitchPanel":case"clickableText":case"nativeExperimentalGBToneInsightsUpsellFooter":case"nativeExperimentalGBConsistencyUpsellFooter":case"nativeGetStartedChecklistModal":case"nativeToneInsightsModal":case"nativeLearnMoreModal":case"nativeSettingsModal":case"nativeFeedbackModal":case"nativeKeyTakeawaysAssistantCard":case"nativeProofitModal":case"nativeSkillsModal":case"nativeSkillsList":case"nativeSkillsView":case"viewStack":case"proofitButton":case"dropDownMenuButton":case"selectableDropDownMenu":case"radioButtonsGroup":case"collapsedCard":case"nativeInlineCardContent":case"progressBar":case"horizontalRule":case"tooltip":case"globalPartPlaceholder":case"sticker":case"overlay":case"nativeUndoableTextChanges":return kr.G(r);case"shortFormCard":return m(e,t,n)(r.child);case"longFormCard":return kr.G(jM(MM({},r),{behaviors:r.behaviors.map((function(t){return eR.isStrongAlertRef(t)?jM(MM({},t),{alertIds:t.alertIds.filter((function(t){return!e.has(t)}))}):t}))}));case"strongAlertRef":return(0,Ir.zG)(t,kr.Gg((function(e){return e.some((function(e){return b.equals(r,e)}))})))?kr.YP:kr.G(jM(MM({},r),{alertIds:r.alertIds.filter((function(t){return!e.has(t)}))}));case"inlineCard":return r.behaviors&&r.behaviors.some((function(e){return eR.isStrongAlertRef(e)&&(0,Ir.zG)(n,kr.Gg((function(t){return t.some((function(t){return eR.StrongAlertRef.eq.equals(e,t)}))})))}))?kr.YP:kr.G(f(r,e));case"list":var i=r.items.filter((function(e){return!e.behaviors||!e.behaviors.some((function(e){return eR.isStrongAlertRef(e)&&(0,Ir.zG)(n,kr.Gg((function(t){return t.some((function(t){return eR.StrongAlertRef.eq.equals(e,t)}))})))}))}));return 0===i.length?kr.YP:kr.G(jM(MM({},r),{items:i.map((function(t){return f(t,e)}))}));default:if(qM(r))return kr.G(r);(0,ll.vE)(r)}}},b=(e.switchViewStack=function(e,t,n){return(0,Ir.zG)(p(e,t,(function(e){return"viewStack"!==e.type&&"popoverStack"!==e.type||null==e.views[n]?kr.G(e):kr.G(jM(MM({},e),{selected:n}))})),kr.g_((function(){return e}),Ir.yR))},e.toContentMap=function(e){return wR.reduce(e,(function(e,t,n){return e[t.id]={content:t,path:n},e}),t.PreOrder,{})},e.eq=Yr.n(PT)(LD)),y=e.isEmpty=function(e){if(null==e)return!0;switch(e.type){case"column":return Or.xb(e.children);case"assistantCard":return null==e.child&&null==e.footer;case"box":case"scroll":case"strongAlertRef":case"collapsedCard":case"inlineCard":case"shortFormCard":case"globalPartPlaceholder":case"tooltip":return null==e.child;case"row":return Or.xb(e.left)&&Or.xb(e.right);case"block":return Or.xb(e.parts);case"list":return Or.xb(e.items);case"button":return null==e.label;case"alternativeChoice":return Or.xb(e.alternatives);case"alternativeSlider":return Or.xb(e.choices);case"assistantFeed":return null==e.header&&null==e.footer;case"sticker":return null==e.label&&null==e.child;case"overlay":return null==e.obscuredContent.content&&null==e.visibleContent;case"viewStack":return(0,no.Qr)(e.views);case"longFormCard":return null==e.fullContent;case"globalPart":return null==e.content;case"count":case"alertsCount":case"icon":case"image":case"slider":case"text":case"clickableText":case"gButton":case"lensesSwitchPanel":case"proofitButton":case"nativeSkillsModal":case"nativeSkillsList":case"nativeSkillsView":case"nativeToneInsightsModal":case"nativeLearnMoreModal":case"nativeSettingsModal":case"nativeFeedbackModal":case"nativeGetStartedChecklistModal":case"nativeKeyTakeawaysAssistantCard":case"nativeProofitModal":case"dropDownMenuButton":case"selectableDropDownMenu":case"radioButtonsGroup":case"nativeExperimentalGBToneInsightsUpsellFooter":case"nativeExperimentalGBConsistencyUpsellFooter":case"nativeInlineCardContent":case"progressBar":case"horizontalRule":case"popoverStack":case"nativeUndoableTextChanges":return!1;default:if(qM(e))return!1;(0,ll.vE)(e)}};e.isSwitchViewAction=function(e){return"switchView"===e.type};e.bulkSwitchView=function(e,t,n){var r=null!=n?n:wR.toContentMap(e);return t.reduce((function(e,t){var n=t.selected,i=t.where;return(0,Ir.zG)(r[i],kr.ij,kr.UI((0,no.ei)("path")),kr.g_((function(){return e}),(function(t){return wR.switchViewStack(e,t,n)})))}),e)},e.getCardPropsForFeed=function(e){var t=e.filtering.filter((function(e){return e.condition===NP.EqualTo}));return t.reduce((function(e,t){return jM(MM({},e),DM({},t.property,t.value))}),{})};var _=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.PreOrder;return k(e,n,r,s)},v=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.PreOrder;return k(e,n,r,a)},w=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.PreOrder;return k(e,n,r,c)},S=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.PreOrder,i=arguments.length>3?arguments[3]:void 0;return(0,Ir.zG)(e,Or.u4(new Array,(function(e,t){return(0,Ir.zG)(i(t,n,r),kr.g_(Ir.Q1,(function(t){return e.push(t)}))),e})))},k=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.PreOrder,i=arguments.length>3?arguments[3]:void 0;switch(e.type){case"column":return(0,Ir.zG)(S(e.children,n,r,i),(function(t){return jM(MM({},e),{children:t})}),kr.G);case"assistantCard":var o=(0,Ir.zG)(kr.ij(e.footer),kr.tS((function(e){return i(e,n,r)})),kr.fS((function(){})));return(0,Ir.zG)(i(e.child,n,r),kr.UI((function(t){return jM(MM({},e),{child:t,footer:o})})));case"strongAlertRef":case"scroll":case"inlineCard":case"shortFormCard":case"box":case"tooltip":return(0,Ir.zG)(i(e.child,n,r),kr.UI((function(t){return jM(MM({},e),{child:t})})));case"row":var s=S(e.right,n,r,i),a=S(e.left,n,r,i);return kr.G(jM(MM({},e),{left:a,right:s}));case"block":return(0,Ir.zG)(S(e.parts,n,r,i),(function(t){return jM(MM({},e),{parts:t})}),kr.G);case"list":return(0,Ir.zG)(e.items,Or.UI((function(e){return(0,Ir.zG)(i(e.label,n,r),kr.UI((function(t){return jM(MM({},e),{label:t})})))})),Or.hX(kr.pC),Or.UI(cl.MH),(function(t){return jM(MM({},e),{items:t})}),kr.G);case"button":return(0,Ir.zG)(i(e.label,n,r),kr.UI((function(t){return jM(MM({},e),{label:t})})));case"alternativeChoice":return(0,Ir.zG)(e.alternatives,Or.UI((function(e){return(0,Ir.zG)([i(e.label,n,r),i(e.preview,n,r)],kr.RD,kr.UI((function(e){return e})),kr.UI((function(t){var n=LM(t,2),r=n[0],i=n[1];return jM(MM({},e),{label:r,preview:i})})))})),Or.hX(kr.pC),Or.UI(cl.MH),(function(t){return jM(MM({},e),{alternatives:t})}),kr.G);case"alternativeSlider":return(0,Ir.zG)(e.choices,Or.UI((function(e){return(0,Ir.zG)(i(e.preview,n,r),kr.UI((function(t){return jM(MM({},e),{preview:t})})))})),Or.hX(kr.pC),Or.UI(cl.MH),(function(t){return jM(MM({},e),{choices:t})}),kr.G);case"assistantFeed":return(0,Ir.zG)(kr.ij(e.footer),kr.tS((function(e){return i(e,n,r)})),kr.UI((function(t){return jM(MM({},e),{footer:t})})),kr.wp((function(){return kr.G(e)})),kr.tS((function(e){return(0,Ir.zG)(i(e.header,n,r),kr.UI((function(t){return jM(MM({},e),{header:t})})))})));case"popoverStack":return(0,Ir.zG)(Object.keys(e.views),Or.u4({},(function(t,o){return(0,Ir.zG)(i(e.views[o].child,n,r),kr.g_((function(){return delete t[o],t}),(function(n){return t[o]=jM(MM({},e.views[o]),{child:n}),t})))})),(function(t){return jM(MM({},e),{views:t})}),kr.G);case"viewStack":return(0,Ir.zG)(Object.keys(e.views),Or.u4({},(function(t,o){return(0,Ir.zG)(i(e.views[o],n,r),kr.g_((function(){return delete t[o],t}),(function(e){return t[o]=e,t})))})),(function(t){return jM(MM({},e),{views:t})}),kr.G);case"collapsedCard":var c=(0,Ir.zG)(kr.ij(e.quickActions),kr.tS((function(e){return i(e,n,r)})),kr.fS((function(){})));return(0,Ir.zG)(i(e.child,n,r),kr.UI((function(t){return jM(MM({},e),{child:t,quickActions:c})})));case"longFormCard":return(0,Ir.zG)(i(e.fullContent,n,r),kr.tS((function(t){return(0,Ir.zG)(i(e.collapsedContent,n,r),kr.UI((function(n){return jM(MM({},e),{fullContent:t,collapsedContent:n})})))})));case"sticker":return(0,Ir.zG)(i(e.child,n,r),kr.tS((function(t){return(0,Ir.zG)(i(e.label,n,r),kr.UI((function(n){return jM(MM({},e),{child:t,label:n})})))})));case"overlay":var l=(0,Ir.zG)(kr.ij(e.visibleContent),kr.tS((function(e){return i(e,n,r)})),kr.fS((function(){})));return(0,Ir.zG)(i(e.obscuredContent.content,n,r),kr.UI((function(t){return jM(MM({},e),{obscuredContent:jM(MM({},e.obscuredContent),{content:t}),visibleContent:l})})));case"globalPart":return(0,Ir.zG)(i(e.content,n,r),kr.UI((function(t){return jM(MM({},e),{content:t})})));case"globalPartPlaceholder":return e.child?(0,Ir.zG)(i(e.child,n,r),kr.UI((function(t){return jM(MM({},e),{child:t})}))):kr.G(e);case"icon":case"image":case"text":case"clickableText":case"count":case"alertsCount":case"slider":case"gButton":case"lensesSwitchPanel":case"proofitButton":case"nativeSkillsModal":case"nativeSkillsList":case"nativeSkillsView":case"nativeToneInsightsModal":case"nativeLearnMoreModal":case"nativeSettingsModal":case"nativeFeedbackModal":case"nativeGetStartedChecklistModal":case"nativeKeyTakeawaysAssistantCard":case"nativeProofitModal":case"nativeExperimentalGBToneInsightsUpsellFooter":case"nativeExperimentalGBConsistencyUpsellFooter":case"nativeInlineCardContent":case"progressBar":case"horizontalRule":case"dropDownMenuButton":case"selectableDropDownMenu":case"radioButtonsGroup":case"nativeUndoableTextChanges":return kr.G(e);default:if(qM(e))return kr.G(e);(0,ll.vE)(e)}},I=function(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.PreOrder,o=arguments.length>3?arguments[3]:void 0;return e.forEach((function(e){return n(e,r,i,o)}))},C=function(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.PreOrder,o=arguments.length>3?arguments[3]:void 0;switch(e.type){case"column":return I(e.children,r,i,o);case"assistantCard":return null!=e.footer&&n(e.footer,r,i,o),n(e.child,r,i,o);case"popoverStack":return I(Object.values(e.views).map((function(e){return e.child})),r,i,o);case"strongAlertRef":case"box":case"scroll":case"inlineCard":case"shortFormCard":case"tooltip":return n(e.child,r,i,o);case"row":return I(e.left,r,i,o),I(e.right,r,i,o);case"block":return I(e.parts,r,i,o);case"list":return I(e.items.map((function(e){return e.label})),r,i,o);case"button":return n(e.label,r,i,o);case"alternativeChoice":return e.alternatives.forEach((function(e){var t=e.label,n=e.preview;return I([t,n],r,i,o)}));case"alternativeSlider":return e.choices.forEach((function(e){var t=e.preview;return n(t,r,i,o)}));case"assistantFeed":return null!=e.footer&&n(e.footer,r,i,o),n(e.header,r,i,o);case"viewStack":return I(Object.values(e.views),r,i,o);case"collapsedCard":return null!=e.quickActions&&n(e.quickActions,r,i,o),n(e.child,r,i,o);case"longFormCard":return n(e.collapsedContent,r,i,o),n(e.fullContent,r,i,o);case"sticker":return n(e.label,r,i,o),n(e.child,r,i,o);case"overlay":return null!=e.visibleContent&&n(e.visibleContent,r,i,o),n(e.obscuredContent.content,r,i,o);case"globalPart":return n(e.content,r,i,o);case"globalPartPlaceholder":return e.child?n(e.child,r,i,o):void 0;case"icon":case"image":case"text":case"clickableText":case"count":case"alertsCount":case"slider":case"gButton":case"lensesSwitchPanel":case"proofitButton":case"nativeSkillsModal":case"nativeSkillsList":case"nativeSkillsView":case"nativeToneInsightsModal":case"nativeLearnMoreModal":case"nativeSettingsModal":case"nativeFeedbackModal":case"nativeGetStartedChecklistModal":case"nativeKeyTakeawaysAssistantCard":case"nativeProofitModal":case"nativeExperimentalGBToneInsightsUpsellFooter":case"nativeExperimentalGBConsistencyUpsellFooter":case"nativeInlineCardContent":case"progressBar":case"horizontalRule":case"dropDownMenuButton":case"selectableDropDownMenu":case"radioButtonsGroup":case"nativeUndoableTextChanges":return;default:if(qM(e))return;(0,ll.vE)(e)}},E=(e.Functor={map:function(e,n){return s(e,n,t.PreOrder)}},e.checkForGlobalPartWithPlaceholder=function(e){return _R.isGlobalPart(e)?(0,Ir.zG)(o(e,"globalPartPlaceholder"),kr.g_((function(){return Tr.F2(e)}),(function(t){return Tr.t$(new Error("globalPart can not contain globalPartPlaceholder. globalPartPlaceholder (id: ".concat(t.id,") found in globalPart (id: ").concat(e.id,")")))}))):Tr.F2(e)}),A=Yr.n(dT)(LD);e.dslRootParser=(0,Ir.ls)(A.decode,Tr.Vn((function(e){return new Error(yT(e))})),Tr.tS(E))}(wR||(wR={}));var HM;DM(HM={},PP.V6SemanticBackgroundBaseDefault,"#FFF"),DM(HM,PP.V6SemanticBackgroundBaseSubdued,"#F5F5F5"),DM(HM,PP.V6SemanticBackgroundBaseInverse,"#1C1C1C"),DM(HM,PP.V6SemanticBackgroundBrandDefault,"#027E6F"),DM(HM,PP.V6SemanticBackgroundBrandSubdued,"#EAFAF9"),DM(HM,PP.V6SemanticBackgroundClarityDefault,"#2551DA"),DM(HM,PP.V6SemanticBackgroundCorrectnessDefault,"#EB0A00"),DM(HM,PP.V6SemanticBackgroundCriticalDefault,"#EB0A00"),DM(HM,PP.V6SemanticBackgroundCriticalSubdued,"#FFEAE9"),DM(HM,PP.V6SemanticBackgroundEnterpriseDefault,"#1B0D6F"),DM(HM,PP.V6SemanticBackgroundNeutralDefault,"#707070"),DM(HM,PP.V6SemanticBackgroundProDefault,"#FFBF47"),DM(HM,PP.V6SemanticBackgroundSuccessDefault,"#016A5E"),DM(HM,PP.V6SemanticBackgroundSuccessSubdued,"#EAFAF9"),DM(HM,PP.V6SemanticBackgroundWarningDefault,"#BD5200"),DM(HM,PP.V6SemanticBackgroundWarningSubdued,"#FFF6E0"),DM(HM,PP.V6SemanticBorderAdditionDefault,"#016A5E"),DM(HM,PP.V6SemanticBorderBaseDefault,"#7F7F7F"),DM(HM,PP.V6SemanticBorderBaseSubdued,"#D9D9D9"),DM(HM,PP.V6SemanticBorderBaseInverse,"#FFF"),DM(HM,PP.V6SemanticBorderBrandDefault,"#027E6F"),DM(HM,PP.V6SemanticBorderBrandSubdued,"#73E1D4"),DM(HM,PP.V6SemanticBorderBusinessDefault,"#707070"),DM(HM,PP.V6SemanticBorderBusinessSubdued,"#D9D9D9"),DM(HM,PP.V6SemanticBorderClarityDefault,"#3E6CF4"),DM(HM,PP.V6SemanticBorderCorrectnessDefault,"#F00C00"),DM(HM,PP.V6SemanticBorderCriticalDefault,"#EB0A00"),DM(HM,PP.V6SemanticBorderCriticalSubdued,"#FFA8A8"),DM(HM,PP.V6SemanticBorderDeletionDefault,"#696969"),DM(HM,PP.V6SemanticBorderDeliveryDefault,"#5E47E5"),DM(HM,PP.V6SemanticBorderElevatedDefault,"#FFF0"),DM(HM,PP.V6SemanticBorderEngagementDefault,"#016A5E"),DM(HM,PP.V6SemanticBorderPlagiarismDefault,"#027D7D"),DM(HM,PP.V6SemanticBorderProDefault,"#FFA10A"),DM(HM,PP.V6SemanticBorderSuccessDefault,"#016A5E"),DM(HM,PP.V6SemanticBorderSuccessSubdued,"#73E1D4"),DM(HM,PP.V6SemanticBorderWarningDefault,"#BD5200"),DM(HM,PP.V6SemanticBorderWarningSubdued,"#FFDC85"),DM(HM,PP.V6SemanticElevationBaseDefault,"#707070"),DM(HM,PP.V6SemanticElevationOutlineDefault,"#D9D9D9"),DM(HM,PP.V6SemanticHighlightAdditionDefault,"#DEF6F3"),DM(HM,PP.V6SemanticHighlightDeletionDefault,"#EBEBEB"),DM(HM,PP.V6SemanticIconAdditionInverse,"#2CC9B6"),DM(HM,PP.V6SemanticIconBaseDefault,"#707070"),DM(HM,PP.V6SemanticIconBaseSubdued,"#BCBCBC"),DM(HM,PP.V6SemanticIconBaseInverse,"#FFF"),DM(HM,PP.V6SemanticIconBrandDefault,"#027E6F"),DM(HM,PP.V6SemanticIconCriticalDefault,"#CD0800"),DM(HM,PP.V6SemanticIconCriticalInverse,"#FF7A74"),DM(HM,PP.V6SemanticIconDeliveryDefault,"#5E47E5"),DM(HM,PP.V6SemanticIconDeliveryInverse,"#A598F0"),DM(HM,PP.V6SemanticIconProDefault,"#1C1C1C"),DM(HM,PP.V6SemanticIconProInverse,"#FFBF47"),DM(HM,PP.V6SemanticIconSuccessDefault,"#016A5E"),DM(HM,PP.V6SemanticIconWarningDefault,"#E57300"),DM(HM,PP.V6SemanticIconWarningInverse,"#FFBF47"),DM(HM,PP.V6SemanticIllustrationFill1,"#EBEBEB"),DM(HM,PP.V6SemanticIllustrationFill2,"#FFF"),DM(HM,PP.V6SemanticIllustrationFillDefault,"#1C1C1C"),DM(HM,PP.V6SemanticIllustrationShadowDefault,"#A8A8A8"),DM(HM,PP.V6SemanticIllustrationStroke1,"#1C1C1C"),DM(HM,PP.V6SemanticIllustrationStroke2,"#1C1C1C"),DM(HM,PP.V6SemanticIllustrationStroke3,"#FFF"),DM(HM,PP.V6SemanticIllustrationStrokeDefault,"#1C1C1C"),DM(HM,PP.V6SemanticTextAdditionDefault,"#016A5E"),DM(HM,PP.V6SemanticTextBaseDefault,"#1C1C1C"),DM(HM,PP.V6SemanticTextBaseSubdued,"#707070"),DM(HM,PP.V6SemanticTextBaseInverse,"#FFF"),DM(HM,PP.V6SemanticTextBrandDefault,"#027E6F"),DM(HM,PP.V6SemanticTextCriticalDefault,"#CD0800"),DM(HM,PP.V6SemanticTextDarkDefault,"#1C1C1C"),DM(HM,PP.V6SemanticTextDeletionDefault,"#696969"),DM(HM,PP.V6SemanticTextEnterpriseDefault,"#FFF"),DM(HM,PP.V6SemanticTextLightDefault,"#FFF"),DM(HM,PP.V6SemanticTextProDefault,"#1C1C1C"),DM(HM,PP.V6SemanticTextSuccessDefault,"#016A5E"),DM(HM,PP.V6SemanticTextWarningDefault,"#7A3500"),DM(HM,PP.V6CoreBlue0,"#F3F6FF"),DM(HM,PP.V6CoreBlue10,"#D1DBFE"),DM(HM,PP.V6CoreBlue20,"#ADBFF9"),DM(HM,PP.V6CoreBlue30,"#7D99F0"),DM(HM,PP.V6CoreBlue40,"#3E6CF4"),DM(HM,PP.V6CoreBlue60,"#2551DA"),DM(HM,PP.V6CoreBlue80,"#02379E"),DM(HM,PP.V6CoreBlue90,"#000A62"),DM(HM,PP.V6CoreBlue100,"#000A26"),DM(HM,PP.V6CoreGold0,"#FFF6E0"),DM(HM,PP.V6CoreGold10,"#FFEBB8"),DM(HM,PP.V6CoreGold20,"#FFDC85"),DM(HM,PP.V6CoreGold30,"#FFBF47"),DM(HM,PP.V6CoreGold40,"#FFA10A"),DM(HM,PP.V6CoreGold60,"#E57300"),DM(HM,PP.V6CoreGold80,"#BD5200"),DM(HM,PP.V6CoreGold90,"#7A3500"),DM(HM,PP.V6CoreGold100,"#1A0B00"),DM(HM,PP.V6CoreGreen0,"#EAFAF9"),DM(HM,PP.V6CoreGreen10,"#B1F0E8"),DM(HM,PP.V6CoreGreen20,"#73E1D4"),DM(HM,PP.V6CoreGreen30,"#2CC9B6"),DM(HM,PP.V6CoreGreen40,"#15A694"),DM(HM,PP.V6CoreGreen60,"#027E6F"),DM(HM,PP.V6CoreGreen80,"#016A5E"),DM(HM,PP.V6CoreGreen90,"#014C43"),DM(HM,PP.V6CoreGreen100,"#00231F"),DM(HM,PP.V6CoreLightGreen,"#00E0AC"),DM(HM,PP.V6CoreNeutralGray0,"#F5F5F5"),DM(HM,PP.V6CoreNeutralGray10,"#EBEBEB"),DM(HM,PP.V6CoreNeutralGray20,"#D9D9D9"),DM(HM,PP.V6CoreNeutralGray30,"#BCBCBC"),DM(HM,PP.V6CoreNeutralGray40,"#A8A8A8"),DM(HM,PP.V6CoreNeutralGray60,"#707070"),DM(HM,PP.V6CoreNeutralGray80,"#545454"),DM(HM,PP.V6CoreNeutralGray90,"#2E2E2E"),DM(HM,PP.V6CoreNeutralGray100,"#1C1C1C"),DM(HM,PP.V6CorePurple0,"#F7F6FE"),DM(HM,PP.V6CorePurple10,"#DDD9F9"),DM(HM,PP.V6CorePurple20,"#CAC3F7"),DM(HM,PP.V6CorePurple30,"#A598F0"),DM(HM,PP.V6CorePurple40,"#8675EB"),DM(HM,PP.V6CorePurple60,"#5E47E5"),DM(HM,PP.V6CorePurple80,"#3D27C0"),DM(HM,PP.V6CorePurple90,"#1B0D6F"),DM(HM,PP.V6CorePurple100,"#0E073B"),DM(HM,PP.V6CoreRed0,"#FFEAE9"),DM(HM,PP.V6CoreRed10,"#FFD1D0"),DM(HM,PP.V6CoreRed20,"#FFA8A8"),DM(HM,PP.V6CoreRed30,"#FF7A74"),DM(HM,PP.V6CoreRed40,"#FF4D45"),DM(HM,PP.V6CoreRed60,"#EB0A00"),DM(HM,PP.V6CoreRed80,"#CD0800"),DM(HM,PP.V6CoreRed90,"#8F0600"),DM(HM,PP.V6CoreRed100,"#510300"),DM(HM,PP.V6CoreTeal0,"#E6FDFD"),DM(HM,PP.V6CoreTeal10,"#CCFAFA"),DM(HM,PP.V6CoreTeal20,"#B3F8F8"),DM(HM,PP.V6CoreTeal30,"#80F3F3"),DM(HM,PP.V6CoreTeal40,"#00E6E6"),DM(HM,PP.V6CoreTeal60,"#00C4C4"),DM(HM,PP.V6CoreTeal80,"#027D7D"),DM(HM,PP.V6CoreTeal90,"#005C5C"),DM(HM,PP.V6CoreTeal100,"#001F1F"),DM(HM,PP.V6CoreTransparent,"#FFFFFF00"),DM(HM,PP.V6CoreWhite,"#FFFFFF"),DM(HM,PP.V6CoreYellowGreen,"#D5FF00");var WM,$M,XM,KM,YM,ZM,JM,QM=__webpack_require__(63332),ej=__webpack_require__(98921);(WM||(WM={})).split=(e,t)=>[e],(e=>{e.fromArrayOfDeltas=(t,n)=>{let r=n;return t.map((t=>{const n=e.delta(t,r);return r+=vu.s.calcDiffLength(t),n}))};class t{constructor(e,t){this.delta=e,this.prevLen=t,this.kind="delta",this._length=void 0,this._amount=void 0,this._text=void 0}get length(){return Boolean(this._length)?this._length:this._length=vu.s.calcDiffLength(this.delta)}get amount(){return Boolean(this._amount)?this._amount:this._amount=vu.s.calcAmountLength(this.delta)}get text(){return this._text||(this._text=nS.vM((()=>this.delta.ops.reduce(((e,t)=>vu.s.match((t=>`${e}${t.insert}`),(()=>{throw new Error("can not get text on delta with deletes")}),(()=>{throw new Error("can not get text on delta with retains")}))(t)),""))))}get isEmpty(){return 0===this.delta.ops.length}compose(e){const n=this.delta.compose(e.delta);return new t(n,this.prevLen)}transform(e,n=!0){const r=e.delta.transform(this.delta,n),i=this.prevLen+e.length;return new t(r,i)}toJSON(){return{kind:this.kind,delta:vu.s.anonymizeTextAndStringAttrs(this.delta),prevLen:this.prevLen,length:this.length,amount:this.amount}}toString(){return`Delta(${this.delta}, pl: ${this.prevLen})`}}class n{constructor(){this.kind="flush"}toString(){return"Flush()"}}class r{constructor(e){this.delta=e,this.kind="reset"}get text(){return this._text||(this._text=nS.vM((()=>this.delta.ops.reduce(((e,t)=>{if(vu.s.isInsert(t))return`${e}${t.insert}`;throw vu.s.isDelete(t)?new Error("can not get text on delta with deletes"):new Error("can not get text on delta with retains")}),""))))}get length(){return Boolean(this._length)?this._length:this._length=vu.s.calcDiffLength(this.delta)}compose(e){return o(this.delta.compose(e.delta))}toJSON(){return{kind:this.kind,delta:vu.s.anonymizeTextAndStringAttrs(this.delta),length:this.length}}toString(){return`Reset(${this.delta})`}}function i(e,n=0){return new t(e,n)}function o(e){return vu.s.containsInsertsOnly(e)?Tr.F2(new r(e)):Tr.t$(new Error(`Delta should contains only inserts to be Reset, but got ${JSON.stringify(vu.s.anonymizeTextAndStringAttrs(e))}`))}e.delta=i,e.ins=function(e,t,n=0){return i((new _u.i).retain(e).insert(t),n)},e.del=function(e,t,n=0){return i((new _u.i).retain(e).delete(t),n)},e.ret=function(e,t=0,n){return i((new _u.i).retain(e,n),t)},e.res=o,e.unsafeRes=(0,Ir.ls)(o,nS.MH),e.resFromText=function(e){return nS.MH(o((new _u.i).insert(e)))},e.flush=function(){return new n},e.isDelta=function(e){return"delta"===e.kind},e.isReset=function(e){return"reset"===e.kind},e.isFlush=function(e){return"flush"===e.kind}})($M||($M={})),(XM||(XM={})).diffAsChanges=function(e,t){const n=(new _u.i).insert(e),r=(new _u.i).insert(t);return $M.delta(n.diff(r),e.length)},function(e){e.interpreter=(0,Ir.MZ)(Yr.n);e.extend=function(e){return function(t){return px({},e,t)}}}(KM||(KM={})),function(e){e.codec=Ur.dt({description:Ur.Z_,regex:Ur.Z_,priority:Ur.pk,prefixes:Ur.IX(Ur.Z_)})}(YM||(YM={})),function(e){e.codec=Ur.dt({patterns:Ur.IM(Ur.Z_,YM.codec)})}(ZM||(ZM={})),function(e){e.codec=Ur.jV([YM.codec,Ur.dt({id:Ur.Z_,text:Ur.Z_,start:Ur.pk,end:Ur.pk})])}(JM||(JM={}));var tj,nj,rj,ij={patterns:{email:{regex:'(([^<>()[\\]\\\\.,;:\\s@"]+(\\.[^<>()[\\]\\\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))',prefixes:[],priority:0,description:"Email"},url:{regex:"[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b((([-a-zA-Z0-9()@%_\\+~#&//=\\[\\]])|([.:?](?!$|\\s)))*)?",prefixes:["http://","https://"],priority:1,description:"URL"},creditCardNumber:{regex:"(\\d{4}\\d{4}\\d{4}\\d{4})|(\\d{4}\\-\\d{4}\\-\\d{4}\\-\\d{4})|(\\d{4}\\s\\d{4}\\s\\d{4}\\s\\d{4})",prefixes:[],priority:2,description:"Credit card number"},phoneNumber:{regex:"[\\+]?[(]?[0-9]{3}[)]?[-\\s\\.]?[0-9]{3}[-\\s\\.]?[0-9]{4,6}",prefixes:[],priority:3,description:"Phone number"},usSSN:{regex:"[0-9]{3}[-]*[0-9]{2}[-]*[0-9]{4}",prefixes:[],priority:4,description:"US SSN"},caSSN:{regex:"[0-9]{3}[\\s\\-]?[0-9]{3}[\\s\\-]?[0-9]{3}",prefixes:[],priority:5,description:"CA SIN"},ukSSN:{regex:"[A-Z]{2}[\\s\\-]?\\d{2}[\\s\\-]?\\d{2}[\\s\\-]?\\d{2}[\\s\\-]?[A-Z]",prefixes:[],priority:6,description:"UK NI NO"},iban:{regex:"[A-Z]{2}(-?|\\ )\\d{2}-?(?:\\ ?[A-Z]{4}-?)?(?:\\d{13,}|(?:\\ \\d{4}){3,5}\\ \\d{1,4})",prefixes:[],priority:7,description:"IBAN number"},variousID:{regex:"[A-Z]{0,2}(?:\\d{3,8}[\\ -])(?:\\d{2,8}[\\ -]){1,4}\\d{2,4}|\\d{7}[A-Z]?|\\d{5,18}",prefixes:[],priority:8,description:"Various ID number"}}},oj=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ij,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=this;dx(this,e),hx(this,"_externalMessagesSchemas",void 0),hx(this,"_sanitizationSeed",void 0),hx(this,"_sensitiveToSanitizedMap",void 0),hx(this,"_sanitizedToSensitiveMap",void 0),hx(this,"_dlpRegexConfiguration",void 0),hx(this,"sanitizeMessage",void 0),hx(this,"sanitizeStaticMessage",void 0),hx(this,"sanitizeChange",void 0),hx(this,"sanitizeDelta",void 0),hx(this,"sanitizeSdui",void 0),hx(this,"sanitizeText",void 0),hx(this,"unsanitizeMessage",void 0),hx(this,"unsanitizeChange",void 0),hx(this,"unsanitizeDelta",void 0),hx(this,"unsanitizeSdui",void 0),hx(this,"unsanitizeText",void 0),hx(this,"matchInText",void 0),hx(this,"clear",void 0),hx(this,"_sanitizeDlpMatch",void 0),hx(this,"_unsanitizeDlpMatch",void 0),hx(this,"_sanitizingEncoder",void 0),hx(this,"_unsanitizingEncoder",void 0),hx(this,"_sensitiveGuard",void 0),hx(this,"_externalMessagesHandlers",void 0),this._externalMessagesSchemas=n,this._sanitizationSeed=-1,this._sensitiveToSanitizedMap=new Map,this._sanitizedToSensitiveMap=new Map,this.sanitizeMessage=function(e){var t=r._externalMessagesHandlers.find((function(t){return t.is(e)}));return t?t.sanitizer.encode(e):rj.replaceInRequest(e,r.sanitizeText,r.matchInText)},this.sanitizeStaticMessage=function(e){return rj.replaceInStaticRequest(e,r.sanitizeText,r.matchInText)},this.sanitizeChange=function(e){return rj.replaceInChangeWithAttributes(e,r.sanitizeText,r.matchInText)},this.sanitizeDelta=function(e){return rj.replaceInDeltaWithAttributes(e,r.sanitizeText,r.matchInText)},this.sanitizeSdui=function(e){return rj.replaceInSdui(e,r.sanitizeText)},this.sanitizeText=function(e){return tj.replaceInText(r._dlpRegexConfiguration,e,r._sanitizeDlpMatch)},this.unsanitizeMessage=function(e){var t=r._externalMessagesHandlers.find((function(t){return t.is(e)}));return t?t.unsanitizer.encode(e):rj.replaceInResponse(e,r.unsanitizeText)},this.unsanitizeChange=function(e){return rj.replaceInChange(e,r.unsanitizeText)},this.unsanitizeDelta=function(e){return rj.replaceInDelta(e,r.unsanitizeText)},this.unsanitizeSdui=function(e){return rj.replaceInSdui(e,r.unsanitizeText)},this.unsanitizeText=function(e){return tj.replaceInText(r._dlpRegexConfiguration,e,r._unsanitizeDlpMatch)},this.matchInText=function(e){return tj.matchInText(r._dlpRegexConfiguration,e)},this.clear=function(){r._sanitizationSeed=-1,r._sensitiveToSanitizedMap.clear(),r._sanitizedToSensitiveMap.clear()},this._sanitizeDlpMatch=function(e){var t=e.text;if(!r._sensitiveToSanitizedMap.has(t)){var n=nj.sanitizeDlpMatch(e,++r._sanitizationSeed);r._sensitiveToSanitizedMap.set(t,n),r._sanitizedToSensitiveMap.set(n,t)}return r._sensitiveToSanitizedMap.get(t)},this._unsanitizeDlpMatch=function(e){var t=e.text;return r._sanitizedToSensitiveMap.has(t)?r._sanitizedToSensitiveMap.get(t):t},this._sanitizingEncoder=KM.extend(Kr.HQ)({any:QM.id(),sensitiveString:{encode:this.sanitizeText},sensitiveDelta:{encode:this.sanitizeDelta}}),this._unsanitizingEncoder=KM.extend(Kr.HQ)({any:QM.id(),sensitiveString:{encode:this.unsanitizeText},sensitiveDelta:{encode:this.unsanitizeDelta}}),this._sensitiveGuard=KM.extend(Ax.Schemable)({any:Ax.id(),sensitiveString:Ax.string,sensitiveDelta:Ax.id()}),this._externalMessagesHandlers=this._externalMessagesSchemas.map((function(e){return gx(px({},KM.interpreter(r._sensitiveGuard)(e)),{sanitizer:KM.interpreter(r._sanitizingEncoder)(e),unsanitizer:KM.interpreter(r._unsanitizingEncoder)(e)})})),this._dlpRegexConfiguration=tj.getRegexConfiguration(t)};!function(e){e.getRegexConfiguration=function(e){return{dlpConfiguration:e,dlpRegex:t(e)}},e.replaceInText=function(e,t,r){var i=e.dlpConfiguration,o=e.dlpRegex;return t.replace(o,(function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return r(n(i,{groups:t[t.length-1],index:t[t.length-3]}))}))},e.matchInText=function(e,t){var i=e.dlpConfiguration,o=e.dlpRegex;return r(o,t).map((function(e){return n(i,e)}))};var t=function(e){var t=e.patterns;return new RegExp(Object.entries(t).sort((function(e,t){return bx(e,2)[1].priority-bx(t,2)[1].priority})).map((function(e){var t=bx(e,2),n=t[0],r=t[1],i=r.regex,o=r.prefixes;return i=o.length?"(".concat(o.join("|"),")").concat(i):i,"(?<".concat(n,">").concat(i,")")})).join("|"),"g")},n=function(e,t){var n=t.groups,r=t.index,i=bx(Object.entries(n).find((function(e){return void 0!==bx(e,2)[1]})),2),o=i[0],s=i[1];return gx(px({id:o},e.patterns[o]),{text:s,start:r,end:r+s.length})},r=function(e,t){var n=[];for(e.lastIndex=0;;){var r=e.exec(t);if(!r)break;n.push(r)}return e.lastIndex=0,n}}(tj||(tj={})),function(e){e.sanitizeDlpMatch=function(e,t){var n=e.prefixes,r=e.text,i=n.find((function(e){return 0===r.indexOf(e)}));return void 0!==i?"".concat(i).concat(u(r.slice(i.length),t)):u(r,t)};var t="a".charCodeAt(0),n="z".charCodeAt(0),r="A".charCodeAt(0),i="Z".charCodeAt(0),o="0".charCodeAt(0),s="9".charCodeAt(0),a=function(e){return e>=t&&e<=n},c=function(e){return e>=r&&e<=i},l=function(e){return e>=o&&e<=s},u=function(e,n){for(var i,s=new Array(e.length),u=n,d=e.length-1;d>=0;d--){var h=e.charCodeAt(d);a(h)?(s[d]=t+(d+u)%26,u/=26):c(h)?(s[d]=r+(d+u)%26,u/=26):l(h)?(s[d]=o+(d+1+u)%10,u/=10):s[d]=h}return(i=String).fromCharCode.apply(i,yx(s))}}(nj||(nj={})),function(e){e.replaceInRequest=function(e,t,n){return"submit_ot"===e.action?a(e,t,n):e},e.replaceInStaticRequest=function(e,n,r){return"update_context_info"===e.action?t(e,n,r):e},e.replaceInResponse=function(e,t){switch(e.action){case"alert":return d(e,t);case"alert_changes":return h(e,t);case"sdui:add":return p(e,t);case"sdui:update":return g(e,t);default:return e}};var t=e.replaceInUpdateContextInfoMessage=function(e,t,r){return"docContext"in e?gx(px({},e),{docContext:n(e.docContext,t,r)}):e},n=function(e,t,i){var o,s,a;return gx(px({},e),{delta:void 0!==e.delta?r(e.delta,t,i):void 0,siblings:null===(o=e.siblings)||void 0===o?void 0:o.map((function(e){return n(e,t,i)})),children:null===(s=e.children)||void 0===s?void 0:s.map((function(e){return n(e,t,i)})),parents:null===(a=e.parents)||void 0===a?void 0:a.map((function(e){return n(e,t,i)})),audience:void 0,authors:void 0})},r=(e.replaceInChangeWithAttributes=function(e,t,n){return $M.isDelta(e)?c(e,t,n):$M.isReset(e)?u(e,t):e},e.replaceInChange=function(e,t){return $M.isDelta(e)?l(e,t):$M.isReset(e)?u(e,t):e},e.replaceInDeltaWithAttributes=function(e,t,n){var r=s(e),i=r.text,o=r.ranges,a=t(i);return{ops:e.ops.map((function(e,t){return vu.s.match((function(e){if(vu.s.isInsertString(e)){var r=o[t],i=r.start,s=r.end,c=a.slice(i,s),l=gx(px({},e),{insert:c}),u=n(c);if(u.length>0){var d=Object.values(u).map((function(e){return{type:e.id,start:e.start,end:e.end}}));l=void 0!==l.attributes&&null!==l.attributes?gx(px({},l),{attributes:ej.x.compose(l.attributes,{sanitized:{matches:d}},!1)}):gx(px({},l),{attributes:{sanitized:{matches:d}}})}return l}return e}),Ir.yR,Ir.yR)(e)}))}}),i=e.replaceInDelta=function(e,t){var n=s(e),r=n.text,i=n.ranges,o=t(r);return{ops:e.ops.map((function(e,t){return vu.s.match((function(e){if(vu.s.isInsertString(e)){var n=i[t],r=n.start,s=n.end,a=o.slice(r,s);return gx(px({},e),{insert:a})}return e}),Ir.yR,Ir.yR)(e)}))}},o=e.replaceInSdui=function(e,t){return(0,Ir.zG)(e,wR.dslRootParser,Tr.UI((function(e){return m(e,t)})),Tr.fS((0,Ir.a9)(e)))},s=function(e){return e.ops.reduce((function(e,t){var n=e.text,r=e.ranges,i=vu.s.match((function(e){return vu.s.isInsertString(e)?e.insert:"\n"}),(0,Ir.a9)(""),(0,Ir.a9)("\n"))(t),o=0!==r.length?r[r.length-1].end:0;return{text:n+i,ranges:yx(r).concat([{start:o,end:o+i.length}])}}),{text:"",ranges:[]})},a=function(e,t,n){if("deltas"in e){var i=e.deltas.map((function(e){return r(e,t,n)}));return gx(px({},e),{deltas:i,deltasString:JSON.stringify(i)})}return e},c=function(e,t,n){return $M.delta(new _u.i(r(e.delta,t,n).ops),e.prevLen)},l=function(e,t){return $M.delta(new _u.i(i(e.delta,t).ops),e.prevLen)},u=function(e,t){return $M.unsafeRes(new _u.i(i(e.delta,t).ops))},d=function(e,t){var n=gx(px({},e),{replacements:e.replacements.map(t)});return void 0!==e.text&&(n.text=t(e.text)),void 0!==e.highlightText&&(n.highlightText=t(e.highlightText)),void 0!==e.transforms&&(n.transforms=e.transforms.map(t)),e.transformJson&&(n.transformJson=f(e.transformJson,t)),e.subalerts&&(n.subalerts=e.subalerts.map((function(e){return gx(px({},e),{highlightText:t(e.highlightText),transformJson:f(e.transformJson,t)})}))),n},h=function(e,t){return e.transformJson?gx(px({},e),{transformJson:f(e.transformJson,t)}):e},p=function(e,t){return gx(px({},e),{sdui:o(e.sdui,t)})},g=function(e,t){return gx(px({},e),{sdui:o(e.sdui,t)})},f=function(e,t){return e.alternatives?gx(px({},e),{alternatives:e.alternatives.map((function(e){return i(e,t)}))}):e},m=function(e,t){return(0,Ir.zG)(wR.map(e,(function(e){return b(e,t)})),kr.fS((0,Ir.a9)(e)))},b=function(e,t){return"text"===e.type?gx(px({},e),{text:t(e.text)}):e}}(rj||(rj={}));var sj=function e(t,n){var r=this;dx(this,e),hx(this,"_innerWSHandler",void 0),hx(this,"_dlpDataSanitizer",void 0),hx(this,"onConnecting",void 0),hx(this,"onConnect",void 0),hx(this,"onDisconnect",void 0),hx(this,"onMessage",void 0),hx(this,"connect",void 0),hx(this,"isDisconnected",void 0),this._innerWSHandler=t,this._dlpDataSanitizer=n,this.onConnecting=function(e){return r._innerWSHandler.onConnecting(e),r},this.onConnect=function(e){return r._innerWSHandler.onConnect(e),r},this.onDisconnect=function(e){return r._innerWSHandler.onDisconnect((function(t){return r._dlpDataSanitizer.clear(),e(t)})),r},this.onMessage=function(e){return r._innerWSHandler.onMessage((function(t,n){e(t,r._dlpDataSanitizer.unsanitizeMessage(n))})),r},this.connect=function(e){return r._innerWSHandler.connect(e)},this.isDisconnected=function(){return r._innerWSHandler.isDisconnected()}},aj=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ij,n=arguments.length>1?arguments[1]:void 0,r=this;dx(this,e),hx(this,"_dlpDataSanitizer",void 0),hx(this,"sanitizeWS",(function(e,t){return e.writer((function(e){return t(r._dlpDataSanitizer.sanitizeMessage(e))}))})),hx(this,"sanitizeStaticWS",(function(e,t){return e.writer((function(e){return t(r._dlpDataSanitizer.sanitizeStaticMessage(e))}))})),hx(this,"sanitizeWSHandler",(function(e){return new sj(e,r._dlpDataSanitizer)})),this._dlpDataSanitizer=new oj(t,n)},cj=__webpack_require__(29479),lj=__webpack_require__(954),uj=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(e){i(e)}},s=e=>{try{a(n.throw(e))}catch(e){i(e)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));class dj{constructor(e,t,n,r){this.from=e,this.to=t,this.event=n,this.args=r}toString(){return"Transition: From: "+this.from+" to: "+this.to+" (Args: "+this.args+")"}}const hj=class e{constructor(t,n,r){this._name=t,this._log=ou.C8.Logging.getLogger("coreclients.fsm"),this._parents={},this._transitions={},this._scheduled=[],this._listeners={},this._inTransition=!1,this._verbose=!1,this._id=++e._ids,this._current=n,this._final=null!=r?r:null}get current(){return this._current}get isFinal(){return this._final===this._current}transition(e,t,n){this._transitions[e<<11|n]=t}parent(e,t){this._parents[e]=t}is(...e){return e.findIndex((e=>e===this._current))>=0}from(...e){return new mj(this,...e)}with(e){return new fj(this,e)}verbose(e,t){return this._verbose=!0,this._states=e,this._events=t,this}on(e,t){return this._addCallback(this._listeners,e,t),this}event(e,t){return uj(this,null,(function*(){return new Promise(((n,r)=>uj(this,null,(function*(){if(this._verbose&&this._trace(`Handling event ${this._eventName(e)}, currently in ${this._stateName(this._current)}`),this._current===this._final)return this._trace(`Cannot handle event ${e}: FSM is in it's final state ${this._current}`),n(!1);if(this._inTransition)return void this._scheduled.push(new yj(e,t,n,r));let i=this._current,o=null;for(;void 0!==i;){const r=this._transitions[i<<11|e];if(void 0!==r){this._inTransition=!0;const i=Boolean(this._listeners[r])?this._listeners[r]:[],s=new dj(this._current,r,e,t);try{this._verbose&&this._trace(`Transition from ${this._stateName(s.from)} to ${this._stateName(s.to)} on ${this._eventName(e)} Arguments: `+t),this._current=r;const o=i.map((e=>Promise.resolve(e(s))));this._inTransition=!1;for(let e=this._scheduled.shift();void 0!==e;e=this._scheduled.shift())yield this.event(e.event,e.args).then((t=>e.done(t))).catch((t=>e.fail(t)));yield Promise.all(o).then((e=>n(!0)))}catch(e){o=e}finally{this._inTransition=!1}break}i=this._parents[i]}Boolean(o)?r(o):n(!1)}))))}))}_addCallback(e,t,n){let r=e[t];return Boolean(r)||(r=[],e[t]=r),r.push(n),this}_eventName(e){return void 0===this._events?e:this._events[e]}_stateName(e){return void 0===this._states?e:this._states[e]}_trace(e){this._log.trace(`FSM#${this._id}${this._name&&"_"+this._name} [VERBOSE]: `+e)}};hj._ids=0;let pj,gj=hj;class fj{constructor(e,t){this.hsm=e,this.state=t}childrenOf(...e){return e.forEach((e=>this.hsm.parent(this.state,e))),this.hsm}parentOf(...e){return e.forEach((e=>this.hsm.parent(e,this.state))),this.hsm}}class mj{constructor(e,...t){this.hsm=e,this._states=t}to(...e){return new bj(this.hsm,this._states,e)}}class bj{constructor(e,t,n){this.hsm=e,this.from=t,this.to=n}on(...e){return e.forEach((e=>this.from.forEach((t=>this.to.forEach((n=>this.hsm.transition(t,n,e))))))),this.hsm}}class yj{constructor(e,t,n,r){this.event=e,this.args=t,this.done=n,this.fail=r}}try{pj=null!=WebSocket?WebSocket:self.MozWebSocket}catch(e){}function _j(e,t){let n;return n=Boolean(t)?new pj(e,t):new pj(e),n}Boolean(pj)&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((e=>{Object.defineProperty(_j,e,{get:()=>pj[e]})}));const vj=Boolean(pj)?_j:null,wj=864e5;function Sj(e){const t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60);return{h:t,m:n,s:e-3600*t-60*n}}var kj,Ij;!function(e){const t=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.?\d*[Z]$/,n=/^(\d{4}-\d{2}-\d{2}).(\d{2}:\d{2}:\d{2}(?:.\d+)?)$/;function r(e){return e.getTime()}var i;e.create=function(e){return(0,ll.kG)(t.test(e),"provided string should have timezone",e),new Date(e)},e.copy=function(e){return new Date(e)},e.now=()=>new Date,e.add=function(e,t){return new Date(e.getTime()+t.getTime())},e.subtract=function(e,t){return new Date(e.getTime()-t.getTime())},e.toSeconds=function(e){return Math.round(e.getTime()/1e3)},e.toTimestamp=r,e.shortTime=function(e){let t=e.getHours();const n=t>=12?"pm":"am";return t=t%12||12,`${`0${t}`.slice(-2)}:${`0${e.getMinutes()}`.slice(-2)} ${n}`},e.fullDate=function(e){return`${e.toLocaleString("en-us",{month:"long"})} ${e.getDate()}, ${e.getFullYear()}`},(i=e.Timestamp||(e.Timestamp={})).now=()=>r(e.now()),i.add=function(e,t){return e+t},i.subtract=function(e,t){return e-t},i.toSeconds=function(e){return Math.round(e/1e3)},i.toLocal=function(e){return new Date(e)},i.toISODate=function(t){return e.Timestamp.toLocal(t).toISOString()},e.daysAgo=function(t,n){const r=n*wj;return e.Timestamp.subtract(e.toTimestamp(t),r)},e.monthsAgo=function(t,n){const r=e.copy(t);return r.setMonth(t.getMonth()-n),e.toTimestamp(r)},e.parseDate=function(r){let i=""+r;const o=i.match(n);if(o){const[,e,t]=o;i=`${e}T${t}Z`}if(o||i.match(t))return Tr.ij(new Error(`Failed to parse date from: ${r}`))(e.create(i));const s=new Date(i);return isNaN(s.getTime())?Tr.t$(new Error(`Failed to parse date from: ${r}`)):Tr.ij(new Error(`Failed to parse date from: ${r}`))(s)},e.Eq={equals:(e,t)=>e.getTime()===t.getTime()}}(kj||(kj={})),function(e){function t(e){return new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()))}(e.Timestamp||(e.Timestamp={})).now=()=>e.toTimestamp(e.now()),e.toTimestamp=function(e){return e.getTime()},e.now=function(){return t(kj.now())},e.fromLocal=t}(Ij||(Ij={}));class Cj{constructor(e=3e5){this._windowTime=e,this._count=0}inc(){this._count++,this._startCounter()}get count(){return this._count}_startCounter(){this._timer=this._timer||setTimeout((()=>{this._timer=void 0,this._count-- >0&&this._startCounter()}),this._windowTime)}}var Ej;(e=>{var t;let n;(t=e.WsCodes||(e.WsCodes={}))[t.NORMAL_CLOSURE=1e3]="NORMAL_CLOSURE",t[t.GOING_AWAY=1001]="GOING_AWAY",t[t.CLOSED_ABNORMALLY=1006]="CLOSED_ABNORMALLY",t[t.NOT_CONSISTENT=1007]="NOT_CONSISTENT",t[t.VIOLATED_POLICY=1008]="VIOLATED_POLICY",t[t.TOO_BIG=1009]="TOO_BIG",t[t.UNEXPECTED_CONDITION=1011]="UNEXPECTED_CONDITION",t[t.SERVICE_RESTART=1012]="SERVICE_RESTART",t[t.CLIENT_MALFUNCTION=3e3]="CLIENT_MALFUNCTION",t[t.BLOCKED_BY_CLIENT=4e3]="BLOCKED_BY_CLIENT",t[t.UNAUTHORIZED=4001]="UNAUTHORIZED",t[t.SERVER_SHUTDOWN=4002]="SERVER_SHUTDOWN",t[t.NOT_FOUND=4004]="NOT_FOUND",t[t.PRECONDITION_FAILED=4012]="PRECONDITION_FAILED",t[t.TOO_MANY_REQUESTS=4029]="TOO_MANY_REQUESTS",t[t.UNKNOWN_WS_ERROR=-1]="UNKNOWN_WS_ERROR",(e=>{e.capi="capi",e.dox="dox"})(n=e.ClientType||(e.ClientType={}));e.getIdleReconnect=function(e){const t=ou.C8.Logging.getLogger(`coreclients.${n[e]}.reconnect`,ou.zW.i.TRACE);return(n,r)=>{const i={client:e,code:n.code,reason:n.reason,reconnectCounter:r.retryStatus.iterNumber};return t.info("skipping reconnect ",i),Tr.F2({kind:"idle"})}},e.getDefaultReconnect=function(e,t=5){const r=ou.C8.Logging.getLogger(`coreclients.${n[e]}.reconnect`,ou.zW.i.TRACE),i=new Cj;return(n,o,s)=>((e=>"RUNTIME_ERROR"===e.error.status)(n)&&(r.debug("disconnected because of runtime error"),i.inc()),(0,Ir.zG)(function(e,t,n,r,i,o="backOffReconnect"){if(t.iterNumber>10)return Tr.t$(new Error("Maximum number (10) of reconnect attempts reached"));switch(e.code){case 1e3:case 1001:return(0,Ir.zG)(i.canGoIdle?"idle":"backOffReconnect",Tr.F2);case 1009:return Tr.t$(new Error("WS closed because message was too big"));case 1011:return(0,Ir.zG)(n>r?"idle":"backOffReconnect",Tr.F2);case 1006:case 1008:case 1012:case 4002:case 4029:return Tr.F2("backOffReconnect");case 4004:return Tr.t$(new Error("WS closed due to not found error"));case 4001:return Tr.t$(new Error("WS closed due to unauthorized error"));case 3e3:case 4e3:return!i.isStable&&t.iterNumber>1?Tr.t$(new Error("Failed to init connection for the second time")):Tr.F2("backOffReconnect");case 1007:return t.iterNumber>1?Tr.t$(new Error("Tried to send invalid message for the second time in a row")):Tr.F2("backOffReconnect");case 4012:return Tr.t$(new Error("Precondition failed"));default:return Tr.F2(o)}}(n,o.retryStatus,i.count,t,s),Tr.tS((t=>{const i={client:e,code:n.code,reason:n.reason,reconnectDecision:t,reconnectStatus:o.retryStatus},s=e=>{return t=this,n=null,i=function*(){try{yield o.scheduleReconnect(e)}catch(e){r.warn("Reconnect failed due to error ",e)}},new Promise(((e,r)=>{var o=e=>{try{a(i.next(e))}catch(e){r(e)}},s=e=>{try{a(i.throw(e))}catch(e){r(e)}},a=t=>t.done?e(t.value):Promise.resolve(t.value).then(o,s);a((i=i.apply(t,n)).next())}));var t,n,i};switch(t){case"idle":return r.debug("Skip reconnect, going idle",i),Tr.F2({kind:"idle"});case"backOffReconnect":return r.debug("Trying to reconnect",i),Tr.F2({kind:"scheduledReconnect",reconnect:s(o.retryStatus)});default:return Tr.t$(new Error("unsupported reconnect decision: "+t))}}))))},e.defaultRetryPolicy=(e=1e3,t=6e4)=>function(e,t){return function(n){return(0,tS.zG)(n,t,kr.UI((function(t){return Math.min(e,t)})))}}(t,yS(e));e.ReconnectSchedulerImpl=class{constructor(t,n=[(0,e.defaultRetryPolicy)()],r=6e4){this._reconnect=t,this.retryPolicies=n,this._resetTimeout=r,this._log=ou.C8.Logging.getLogger("coreclients.reconnect.scheduler"),this._resetTimeoutHandle=kr.YP,this._policy=gS.g_(SS)(n),this.retryStatus=_S}reset(){this.retryStatus=_S,this._resetTimeoutHandle=kr.YP}scheduleReconnect(e){return e=null!=e?e:this.retryStatus,this.retryStatus=vS(this._policy,e),this._abortReset(),(0,Ir.zG)(this.retryStatus.previousDelay,cl.bw((e=>this._log.debug(`Reconnecting after timeout ${e}`))),kr.g_(this._reconnect,(e=>(0,ao.gw)(e).then(this._reconnect))),(e=>e.then((e=>(this._scheduleReset(),e)))))}_scheduleReset(){this._resetTimeoutHandle=kr.G(+setTimeout((()=>{this._log.debug("Resetting reconnect scheduler due to a timeout"),this.reset()}),this._resetTimeout))}_abortReset(){(0,Ir.zG)(this._resetTimeoutHandle,cl.bw((e=>{this._resetTimeoutHandle=kr.YP,clearTimeout(e)})))}}})(Ej||(Ej={}));class Aj{constructor(e){this.error=e,this.reason="WebSocket [CLOSE]: statusCode="+e.code+" reason: "+e.status,this.code=e.code}toString(){return this.error.message}}var xj=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(e){i(e)}},s=e=>{try{a(n.throw(e))}catch(e){i(e)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())})),Tj=(e=>(e[e.CONNECTING=0]="CONNECTING",e[e.CONNECTED=1]="CONNECTED",e[e.DISCONNECTED=2]="DISCONNECTED",e[e.CLOSED=3]="CLOSED",e[e.ANY=4]="ANY",e))(Tj||{}),Oj=(e=>(e[e.CONNECT=0]="CONNECT",e[e.CONNECTED=1]="CONNECTED",e[e.DISCONNECT=2]="DISCONNECT",e[e.SEND=3]="SEND",e[e.CLOSE=4]="CLOSE",e))(Oj||{});const Pj=e=>{ou.C8.Logging.getLogger("coreclients.errPrintln").error("WebSocket Error",e)};class Rj{constructor(e){this._createWSInstance=e,this._log=ou.C8.Logging.getLogger("coreclients.ws"),this._ondisconnect=[],this._onconnecting=[],this._onconnect=[],this._onerror=[Pj],this._onmessage=[],this._read=e=>{try{const t=JSON.parse(e);if(Boolean(t)&&"object"==typeof t&&null!==t)return t}catch(e){}return e},this._write=e=>"string"==typeof e?e:JSON.stringify(e),this._createConnection=e=>new Dj(e,this._write),this._fsm=new gj("ws",2,3).with(4).parentOf(3,1,0,2).from(0).to(1).on(1).from(1,0).to(2).on(2).from(2).to(0).on(0).from(4).to(3).on(4).from(1).to(1).on(3).on(1,(e=>xj(this,null,(function*(){1!==e.from&&(yield Promise.all(this._onconnect.map((t=>Promise.resolve(t(e.args))))))})))).on(2,(e=>this._ondisconnect.forEach((t=>t(e.args))))),this._log.isEnabled(ou.zW.i.TRACE)&&this._fsm.verbose(Tj,Oj)}static create(e=(e=>new vj(e))){return new Rj(e)}reader(e){return this._read=e,this}writer(e){return this._write=e,this}withConnection(e){return this._createConnection=e,this}onConnecting(e){return this._onconnecting.push(e),this}onConnect(e){return this._onconnect.push(e),this}onDisconnect(e){return this._ondisconnect.push(e),this}onMessage(e){return this._onmessage.push(e),this}onError(e){return this._onerror.push(e),this}connect(e){return xj(this,null,(function*(){return(0,ll.kG)(this.isDisconnected(),`can only connect WS that is currently disconnected, was ${Tj[this._fsm.current]}`),this._createWebSocket(e,this._fsm)}))}isDisconnected(){return this._fsm.is(2)}isConnecting(){return this._fsm.is(0)}isConnected(){return this._fsm.is(1)}_createWebSocket(e,t){return this._log.trace(`_createWebSocket(${Tj[t.current]})`),t.event(0).then((n=>new Promise(((r,i)=>{if(!n){const n=new Gj({status:"Unknown",message:"Cannot connect",code:Ej.WsCodes.UNKNOWN_WS_ERROR,url:e});return t.event(2,new Aj(n)),void i(new Error(`\n            WebSocket [ERROR] FSM cannot be switched to CONNECTING state from ${Tj[t.current]}\n          `))}this._log.debug("Connecting to "+e),this._onconnecting.forEach((e=>e()));const o=this._createWSInstance(e),s=function(e){let t=cl.cS();return{scheduleIO:n=>{(0,Ir.zG)(t,kr.UI(self.clearTimeout)),t=(0,Ir.zG)(n,kr.UI((t=>self.setTimeout(t,e))))}}}(1e3);function a(e){const n=t.is(0);t.event(2,e),n&&i(e.error)}o.onopen=s=>xj(this,null,(function*(){this._log.debug(`Connection to ${e} opened`);const s=new Nj(t,this._createConnection(o,this._write));let a;try{(n=yield t.event(1,s))||(a=new Error(`WebSocket [ERROR] FSM cannot be switched to CONNECTED state from ${Tj[t.current]}`))}catch(e){this._log.warn("WebSocket [ERROR] FSM cannot be switched to CONNECTED state due to error in event handler",e),a=e}if(Boolean(a))return i(a),void o.close(Ej.WsCodes.BLOCKED_BY_CLIENT,"WebSocket lib initialized");o.onmessage=e=>{const t=this._read(e.data);this._onmessage.forEach((e=>e(s,t)))},r(s)})),o.onclose=n=>{this._log.debug(`Connection to ${e} closed`,{code:n.code,reason:n.reason,fsmState:Tj[t.current]}),s.scheduleIO(kr.YP);const r=new Gj({status:n.reason,message:"Connection closed: "+n.reason,code:n.code,url:e});a(new Aj(r))},o.onerror=()=>{this._log.debug(`Connection to ${e} errored`);const t=new Gj({status:"ws_error",message:"WebSocket error",url:e}),n=new Aj(t);s.scheduleIO(kr.G((()=>{try{this._onerror.forEach((e=>e(t)))}catch(e){this._log.error("OnError handler thrown an error",e)}a(n)})))}}))))}}class Dj{constructor(e,t){this._ws=e,this._serializer=t}send(e){return xj(this,null,(function*(){return this._ws.send(this._serializer(e))}))}close({code:e=Ej.WsCodes.NORMAL_CLOSURE,reason:t}={}){return new Promise((n=>{this._ws.close(e,t),n()}))}get state(){return this._ws.readyState}}class Nj{constructor(e,t){this._fsm=e,this._inner=t,this._log=ou.C8.Logging.getLogger("coreclients.ws.connection")}get _ws(){return this._inner._ws}send(e){return this._fsm.event(3).then((t=>{if(!t)throw new Error("WebSocket [ERROR]: Trying to send on invalid connection state: "+Tj[this._fsm.current]);if(this.state!==Uj.State.OPEN)throw new Error("WebSocket [ERROR]: Trying to send on invalid websocket state: "+Uj.State[this.state]);return this._inner.send(e)}))}close({code:e=Ej.WsCodes.NORMAL_CLOSURE,reason:t}={}){return this._fsm.event(4).then((n=>n?(this._log.debug("Closing connection",{code:e,reason:t,fsmState:Tj[this._fsm.current]}),this._inner.close({code:e,reason:t})):(this._log.warn("Tried to close connection which is already closed or closing",{fsmState:Tj[this._fsm.current]}),Promise.resolve())))}get state(){return this._inner.state}}var Uj,Mj,jj,Fj,Lj;Mj=Uj||(Uj={}),(jj=Mj.State||(Mj.State={}))[jj.CONNECTING=0]="CONNECTING",jj[jj.OPEN=1]="OPEN",jj[jj.CLOSING=2]="CLOSING",jj[jj.CLOSED=3]="CLOSED",(Fj||(Fj={})).is=function(e){return null!=e&&(void 0!==e.code||void 0!==e.reason)};class Gj extends ll.sH{constructor({code:e=-1,status:t,url:n,message:r,body:i}){super(r),this.name="WSError",this.url=void 0===n?void 0:n.split("?")[0],this.code=function(e,t){if(1005===e&&Boolean(t)){const n=t.toLowerCase();return n.indexOf("user not found")>=0?Ej.WsCodes.UNAUTHORIZED:n.indexOf("cannot find document")>=0?Ej.WsCodes.NOT_FOUND:n.indexOf("SERVER_SHUTDOWN")>=0?Ej.WsCodes.SERVER_SHUTDOWN:e}return e}(e,r),this.body=i,this.status=t}toString(){return`Websocket Error\n      Message: ${this.message}\n      Status: ${this.status}\n      Code: ${this.code}\n      Url: ${this.url}`}}(Lj||(Lj={})).getHandler=function(e=Ir.Q1){return{onSessionStarted:e,onSessionInbound:e,onAlert:e,onError:e,onPong:e,onAck:e,onConnect:e,onDisconnect:e,onMessageReceived:e,onMessageSent:e,onUpdateContextInfoFinished:e,onDocFinished:e,onReaderDocInfo:e,onReaderSummaryItem:e,onReaderSummaryFinished:e,onReaderMainPoint:e,onReaderActionItem:e,onReaderDebug:e,onReconnectInfo:e}};var Bj=__webpack_require__(26495);class zj{constructor(e,t=0,n=!0){this._capacity=e,this._start=t,this._allowOverflow=n,this._nextId=t}get id(){return this._nextId}newId(){let e=this._nextId;if(e>this._capacity){if(!this._allowOverflow)throw new ll.ej("ids limit reached: "+this._capacity);this._nextId=e=0}return this._nextId++,e}reset(){this._nextId=this._start}}var Vj,qj,Hj=__webpack_require__(2373);(qj=Vj||(Vj={})).codec=Ur.UQ(Ur.Z_,(e=>"string"==typeof e),"DocId"),qj.create=function(e){return e},qj.eq=vT.yv;var Wj,$j,Xj,Kj,Yj,Zj,Jj,Qj,eF,tF,nF,rF=Object.defineProperty,iF=Object.defineProperties,oF=Object.getOwnPropertyDescriptors,sF=Object.getOwnPropertySymbols,aF=Object.prototype.hasOwnProperty,cF=Object.prototype.propertyIsEnumerable,lF=(e,t,n)=>t in e?rF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,uF=(e,t)=>{for(var n in t||(t={}))aF.call(t,n)&&lF(e,n,t[n]);if(sF)for(var n of sF(t))cF.call(t,n)&&lF(e,n,t[n]);return e};(($j=Wj||(Wj={})).Id||($j.Id={})).create=function(e){return e},Kj=Xj||(Xj={}),((Yj=Kj.SummaryItem||(Kj.SummaryItem={})).Id||(Yj.Id={})).create=function(e){return String(e)},((Zj=Kj.MainPoint||(Kj.MainPoint={})).Id||(Zj.Id={})).create=function(e){return String(e)},((Jj=Kj.ActionItem||(Kj.ActionItem={})).Id||(Jj.Id={})).create=function(e){return String(e)},((Qj=Kj.Debug||(Kj.Debug={})).Id||(Qj.Id={})).create=function(e){return String(e)},eF=Kj.Feedback||(Kj.Feedback={}),(tF=eF.Type||(eF.Type={})).READER_IGNORE="READER_IGNORE",tF.READER_COPY="READER_COPY",tF.READER_CHECK="READER_CHECK",tF.READER_UNCHECK="READER_UNCHECK",tF.READER_LIKE="READER_LIKE",tF.READER_DISLIKE="READER_DISLIKE",tF.READER_REPLY="READER_REPLY",tF.READER_LOOKED="READER_LOOKED",tF.READER_PANEL_OPENED="READER_PANEL_OPENED",tF.READER_PANEL_READY="READER_PANEL_READY",(nF||(nF={})).fromAlertMessage=function(e){return((e,t)=>iF(e,oF(t)))(uF({},Hj.wQ.fromAlertMessage(uF({},e))),{docId:Vj.create(e.docId),updateContextInfoId:Wj.Id.create(e.updateContextInfoId)})};var dF=(e=>(e.knowledgeHub="knowledge_hub",e.reader="reader",e.reconnect="reconnect",e))(dF||{}),hF=Object.defineProperty,pF=Object.defineProperties,gF=Object.getOwnPropertyDescriptors,fF=Object.getOwnPropertySymbols,mF=Object.prototype.hasOwnProperty,bF=Object.prototype.propertyIsEnumerable,yF=(e,t,n)=>t in e?hF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_F=(e,t)=>{for(var n in t||(t={}))mF.call(t,n)&&yF(e,n,t[n]);if(fF)for(var n of fF(t))bF.call(t,n)&&yF(e,n,t[n]);return e},vF=(e,t)=>pF(e,gF(t)),wF=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(e){i(e)}},s=e=>{try{a(n.throw(e))}catch(e){i(e)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())})),SF=(e=>(e[e.DISCONNECTED=0]="DISCONNECTED",e[e.CONNECTING=1]="CONNECTING",e[e.CONNECTED=2]="CONNECTED",e[e.SESSION_INBOUND=3]="SESSION_INBOUND",e[e.WAITING_FOR_ACK=4]="WAITING_FOR_ACK",e[e.ANY=5]="ANY",e[e.CLOSED=6]="CLOSED",e))(SF||{});class kF{constructor({startSessionOptions:e,client:t,clientVersion:n,extDomain:r,clientSupports:i},o,s){this._log=ou.C8.Logging.getLogger("coreclients.capi",ou.zW.i.TRACE),this._idGenerator=new zj(Bj.d1,0,!1),this.setSessionOption=e=>()=>(this._log.trace("setSessionOption"),this._sessionInboundMessage({id:this._idGenerator.newId(),action:"option",name:e.kind,value:e.id})),this.ping=()=>(this._log.trace("Ping"),this._sessionInboundMessage({id:this._idGenerator.newId(),action:"ping"})),this.sendFeedback=e=>()=>{this._log.trace("sendFeedback");const t=this._idGenerator.newId();if(function(e){return(0,ao.CI)(Xj.Feedback.Type,e.kind)}(e))switch(e.kind){case Xj.Feedback.Type.READER_PANEL_READY:return this._sessionInboundMessage({id:t,action:"feedback",type:e.kind,docId:e.docId});case Xj.Feedback.Type.READER_PANEL_OPENED:return this._sessionInboundMessage({id:t,action:"feedback",type:e.kind,docId:e.docId,subtype:e.subtype,items:e.items});default:return this._sessionInboundMessage(_F({id:t,action:"feedback",type:e.kind},(0,no.CE)(e,"kind")))}return this._sessionInboundMessage({id:t,action:"feedback",type:e.kind,subtype:e.subtype,alertId:e.id})},this.updateContextInfo=e=>()=>{this._log.trace("updateContextInfo");const t=this._idGenerator.newId(),n=Wj.Id.create(t);return this._sessionInboundMessage({id:t,action:"update_context_info",docContext:e}).then(Tr.UI((()=>n)))},this.close=e=>wF(this,null,(function*(){if(this._log.trace("close"),this.isClosed())return void this._log.trace("close: CAPI already closed, skipping");this._log.trace("close: closing CAPI, current state: "+this._fsm.current);(yield this._fsm.event(6,e))||this._log.error("Cannot go to CLOSED state")})),this.isClosed=()=>this._fsm.is(6),this.isStable=e=>{const t=void 0===e?this._idGenerator.id:this._idGenerator.id+1;return(void 0===e||"error"!==e.action)&&t>5},this._startSession=()=>wF(this,null,(function*(){this._idGenerator.reset();const e=yield this._initReconnection(),t=_F(_F({id:this._idGenerator.newId(),action:"start",client:this._client.type,clientSubtype:this._client.sub,clientVersion:this._clientVersion,extDomain:this._extDomain,clientSupports:this._clientSupports,mode:"STATIC_ONLY"},this._startSessionOptions),null!==e?{reconnectInfo:e}:{});return yield this._fsm.event(4),this._sendMessage(t)})),this._isReady=()=>"ready"===this.status,this._supportsReconnect=()=>this._clientSupports.includes(dF.reconnect),this._sessionInboundMessage=e=>wF(this,null,(function*(){return this._isReady()?yield this._sendMessage(e).then(Tr.F2).catch(Tr.t$):(this._log.trace("CAPI can`t accept requests. It can process requests only when it`s connected, has sent a start message and received an ack for it.",{message:e.action,capiState:SF[this._fsm.current]}),Tr.t$(new Error(`CAPI can't accept requests in the current state: ${SF[this._fsm.current]}. CAPI can process requests only when it's connected, has sent a start message and received an ack for it.`)))})),this._sendMessage=e=>{this._log.trace(`Sending >>>> ${e.action}, id: ${e.id}`),this._handler.onMessageSent({kind:"message_sent",message:e});return(0,ll.CE)(this._conn,"_sendMessage should never be called without a connection").send(e).catch((e=>{throw this._log.debug("fail on send",e),e})).then((()=>{var e;if(void 0!==this._reconnectInfo){const t=null!=(e=this._reconnectInfo.messagesSent)?e:0;this._setReconnectInfo(vF(_F({},this._reconnectInfo),{messagesSent:t+1}))}}))},this._setReconnectInfo=e=>{this._reconnectInfo=e,this._handleReconnectInfo()},this._handleReconnectInfo=()=>{this._lastPublishedReconnectInfo!==this._reconnectInfo&&(this._handler.onReconnectInfo({kind:"reconnect_info_updated",reconnectInfo:this._reconnectInfo}),this._lastPublishedReconnectInfo=this._reconnectInfo)},this._initialSessionUuid=null,this._initReconnection=()=>wF(this,null,(function*(){return this._supportsReconnect()?(this._reconnectInfo||(this._startSessionOptions.reconnectInfo&&this._setReconnectInfo(this._startSessionOptions.reconnectInfo),this._idGenerator.reset()),this._reconnectInfo):(this._idGenerator.reset(),null!==this._initialSessionUuid?{sessionUuid:this._initialSessionUuid}:void 0)})),this._handleConnect=e=>wF(this,null,(function*(){let t;this._log.trace(`_handleConnect(${SF[this._fsm.current]}): received new ws connection`),this._conn=e;try{(yield this._fsm.event(1))||(t="failed to switch to CONNECTED state")}catch(e){t=e}if(Boolean(t))throw this._log.warn("Connection cannot be finalized.",t),t})),this._handleConnecting=()=>wF(this,null,(function*(){(yield this._fsm.event(0))||this._log.error("Can not enter CONNECTING state",{fsmState:SF[this._fsm.current]})})),this._handleStart=e=>{this._log.trace("_handleStart"),this._fsm.event(5);const{userMutedCategories:t,allowedFeatures:n,domainCategory:r,cheetahState:i,domainName:o,isEnterprise:s,sessionUuid:a}=e,c=void 0===this._reconnectInfo||a!==this._reconnectInfo.sessionUuid,l={kind:"session_started",userMutedCategories:t,allowedFeatures:n,domainCategory:r,domainName:o,cheetahState:i,isEnterprise:s,sessionUuid:a,defaultDocumentContext:kr.YP,isNewSession:c,maxWsMessageSize:e.maxWsMessageSize};this._initialSessionUuid=null===this._initialSessionUuid?a:this._initialSessionUuid,this._fsm.is(2)&&(this._log.trace("Transitioning to READY state"),this._fsm.event(3)),c?this._handleNewSession(a):this._handleExistingSession(a),this._handler.onSessionStarted(l)},this._handleExistingSession=e=>{this._log.debug(`Continuing session: ${e}`)},this._handleNewSession=e=>{void 0!==this._reconnectInfo&&this._log.debug(`Exited old session: ${this._reconnectInfo.sessionUuid}`),this._log.debug(`Starting new session: ${e}`),this._setReconnectInfo({sessionUuid:e,messagesReceived:1,messagesSent:1})},this._sessionInbound=()=>{this._log.trace("_sessionInbound"),this._handler.onSessionInbound({kind:"session_inbound"})},this._startSessionOptions=e,this._client=t,this._clientVersion=n,this._extDomain=r,this._handler=o,this._clientSupports=i,this._fsm=new gj("capi",0,6).with(5).parentOf(2,1,0,3).from(5).to(6).on(6).from(0).to(1).on(0).from(1).to(1).on(0).from(1).to(2).on(1).from(2,3,1).to(0).on(2).from(3).to(4).on(4).from(4).to(3).on(5).from(2).to(3).on(3).on(2,this._startSession).on(3,(()=>this._sessionInbound())),s.onConnecting((()=>this._handleConnecting())).onConnect((e=>this._handleConnect(e))).onDisconnect((e=>this._handleDisconnect(e))).onMessage(((e,t)=>this._handleMessage(t)))}get status(){switch(this._fsm.current){case 6:return"closed";case 2:case 1:case 4:return"starting";case 3:return"ready";case 0:return"disconnected";case 5:return this._log.error("Unknown fsm state",{state:this._fsm.current}),"closed";default:return(0,ll.vE)(this._fsm.current)}}_handleDisconnect(e){return wF(this,null,(function*(){this._log.trace(`_handleDisconnect(${SF[this._fsm.current]})`,e);const t=yield this._fsm.event(2,e.reason),n=this._fsm.is(6)?ou.zW.i.WARN:ou.zW.i.ERROR;t||this._log.log(n,"Can not enter DISCONNECTED state",{reason:e,fsmState:SF[this._fsm.current]})}))}_handleMessage(e){var t;if(void 0!==this._reconnectInfo){const e=null!=(t=this._reconnectInfo.messagesReceived)?t:0;this._setReconnectInfo(vF(_F({},this._reconnectInfo),{messagesReceived:e+1}))}switch(this._handler.onMessageReceived({kind:"message_received",message:e}),this._log.trace("Message <<< "+JSON.stringify(e).replace("\n"," ").substring(0,300)),e.action){case"start":this._handleStart(e);break;case"update_context_info_finished":this._log.trace("handle update_context_info_finished"),this._handler.onUpdateContextInfoFinished({kind:"update_context_info_finished",updateContextInfoId:Wj.Id.create(e.updateContextInfoId)});break;case"doc_finished":this._log.trace("handle doc_finished",{message:e}),this._handler.onDocFinished({kind:"doc_finished",updateContextInfoId:Wj.Id.create(e.updateContextInfoId),docId:e.docId,features:e.features,failed:e.failed});break;case"alert":this._log.trace("handle received alert",{message:e}),this._handler.onAlert({kind:"alert_received",alert:nF.fromAlertMessage(e)});break;case"reader_doc_info":this._log.trace("handle reader_doc_info",{message:e}),this._handler.onReaderDocInfo({kind:"reader_doc_info",docId:e.docId,updateContextInfoId:Wj.Id.create(e.updateContextInfoId),filtered:e.filtered,goodForAnnotations:e.goodForAnnotations});break;case"reader_summary_item":this._log.trace("handle reader_summary_item",{message:e}),this._handler.onReaderSummaryItem({kind:"reader_summary_item",docId:e.docId,updateContextInfoId:Wj.Id.create(e.updateContextInfoId),id:Xj.SummaryItem.Id.create(e.id),delta:e.delta});break;case"reader_summary_finished":this._log.trace("handle reader_summary_finished",{message:e}),this._handler.onReaderSummaryFinished({kind:"reader_summary_finished",docId:e.docId,updateContextInfoId:Wj.Id.create(e.updateContextInfoId),items:e.summaryItems.map(Xj.SummaryItem.Id.create)});break;case"reader_action_item":this._log.trace("handle reader_action_item",{message:e}),this._handler.onReaderActionItem({kind:"reader_action_item",docId:e.docId,updateContextInfoId:Wj.Id.create(e.updateContextInfoId),id:Xj.ActionItem.Id.create(e.id),span:e.span,delta:e.delta});break;case"reader_main_point":this._log.trace("handle reader_main_point",{message:e}),this._handler.onReaderMainPoint({kind:"reader_main_point",docId:e.docId,updateContextInfoId:Wj.Id.create(e.updateContextInfoId),id:Xj.MainPoint.Id.create(e.id),span:e.span});break;case"reader_debug":this._log.trace("handle reader_debug",{message:e}),this._handler.onReaderDebug({kind:"reader_debug",docId:e.docId,updateContextInfoId:Wj.Id.create(e.updateContextInfoId),id:Xj.Debug.Id.create(e.id),span:e.span,delta:e.delta});break;case"feedback":this._log.trace("handle feedback"),this._handler.onAck({kind:"feedback_ack"});break;case"pong":this._log.trace("handle pong"),this._handler.onPong({kind:"pong",latency:kr.YP});break;case"option":this._log.trace("handle acknowledge for option",{message:e}),this._handler.onAck({kind:"option_ack"});break;case"update_context_info":this._log.trace("handle acknowledge for update_context_info",{message:e}),this._handler.onAck({kind:"update_context_info_ack",updateContextInfoId:Wj.Id.create(e.id)});break;case"error":this._handler.onError(_F({kind:"error"},e)),this._log.error("Error",{message:e});break;default:this._log.error("Received unknown message",{message:e}),(0,ll.L0)(e)}}}var IF=Object.defineProperty,CF=Object.defineProperties,EF=Object.getOwnPropertyDescriptors,AF=Object.getOwnPropertySymbols,xF=Object.prototype.hasOwnProperty,TF=Object.prototype.propertyIsEnumerable,OF=(e,t,n)=>t in e?IF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,PF=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(e){i(e)}},s=e=>{try{a(n.throw(e))}catch(e){i(e)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));class RF{constructor(e,t,n){var r=e,{handler:i,reconnectHandler:o=Ej.getDefaultReconnect(Ej.ClientType.capi),maxReconnectDelay:s,baseReconnectDelay:a}=r,c=((e,t)=>{var n={};for(var r in e)xF.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&AF)for(var r of AF(e))t.indexOf(r)<0&&TF.call(e,r)&&(n[r]=e[r]);return n})(r,["handler","reconnectHandler","maxReconnectDelay","baseReconnectDelay"]);this._connect=t,this._ws=n,this._log=ou.C8.Logging.getLogger("coreclients.staticCapi.connection"),this._isIdle=!1,this._isStarted=!1,this._maxWsMessageSize=cl.cS();const l=((e,t)=>CF(e,EF(t)))(((e,t)=>{for(var n in t||(t={}))xF.call(t,n)&&OF(e,n,t[n]);if(AF)for(var n of AF(t))TF.call(t,n)&&OF(e,n,t[n]);return e})({},i||{}),{onError:e=>{var t;null==(t=null==i?void 0:i.onError)||t.call(i,e)},onSessionStarted:e=>{var t;this._maxWsMessageSize=kr.G(e.maxWsMessageSize),null==(t=null==i?void 0:i.onSessionStarted)||t.call(i,e)}});this._handler=Object.assign(Lj.getHandler(),l),this._ws.onMessage(((e,t)=>{this._capi.isStable(t)&&u.reset()})).onConnecting((()=>{this._isIdle=!1})).onConnect((()=>this._handler.onConnect({kind:"connect"}))).onDisconnect((e=>{if(this._capi.isClosed())return;const t={canGoIdle:!0,isStable:this._capi.isStable()};this._log.debug("calling reconnect handler:",t),(0,Ir.zG)(o(e,u,t),(t=>(this._handler.onDisconnect({kind:"disconnect",reason:e,reconnectCounter:u.retryStatus.iterNumber,reconnectResult:t}),t)),Tr.g_((e=>{this._log.warn("error reconnecting, closing CAPI:",e.message),this._capi.close("error reconnecting:"+e.message)}),(e=>{"idle"===e.kind&&(this._isIdle=!0)})))}));const u=new Ej.ReconnectSchedulerImpl((()=>this.connect()),[Ej.defaultRetryPolicy(a,s)]);this._capi=new kF(c,this._handler,this._ws)}connect(){return PF(this,null,(function*(){(0,ll.kG)(!this._capi.isClosed(),"cannot connect when CAPI is closed"),this._isIdle=!1,this._isStarted=!0,this._log.trace("connect: initializing new ws connection");const e=yield this._connect(this._ws);return this._conn=e,e}))}close(){return PF(this,arguments,(function*(e=Ej.WsCodes.NORMAL_CLOSURE,t){const n=Boolean(t)?t:"CAPI WS Close called";this._log.trace(`close: closing CAPI because: ${n}`),yield this._capi.close(n),this._conn&&(this._log.debug(`close: closing connection because: ${n}`),yield this._conn.close({code:e,reason:n}))}))}get isIdle(){return this._isIdle}get isDisconnected(){return this._ws.isDisconnected()}get wasStarted(){return this._isStarted}get client(){return this._capi}get maxWsMessageSize(){return this._maxWsMessageSize}}class DF{constructor(e,t){this._innerWSHandler=e,this.accessToken=t,this.onConnecting=e=>(this._innerWSHandler.onConnecting(e),this),this.onConnect=e=>(this._innerWSHandler.onConnect(e),this),this.onDisconnect=e=>(this._innerWSHandler.onDisconnect(e),this),this.onMessage=e=>(this._innerWSHandler.onMessage(e),this),this.connect=e=>{return t=this,n=null,r=function*(){const t="function"==typeof this.accessToken?yield this.accessToken():void 0;if(void 0!==t){const n=new URL(e);n.searchParams.append("accessToken",t),e=n.toString()}return this._innerWSHandler.connect(e)},new Promise(((e,i)=>{var o=e=>{try{a(r.next(e))}catch(e){i(e)}},s=e=>{try{a(r.throw(e))}catch(e){i(e)}},a=t=>t.done?e(t.value):Promise.resolve(t.value).then(o,s);a((r=r.apply(t,n)).next())}));var t,n,r},this.isDisconnected=()=>this._innerWSHandler.isDisconnected()}}var NF,UF,MF,jF=__webpack_require__(55709);class FF extends ll.sH{constructor(e){super(Boolean(e)?e:"Timeout"),this.name="TimeoutError"}static isTimeoutError(e){return e instanceof FF}}class LF extends ll.sH{constructor(e){super(Boolean(e)?e:"Dropped"),this.name="DroppedError"}static isDroppedError(e){return e instanceof LF}}class GF extends ll.sH{constructor(e){super(Boolean(e)?e:"Not Connected to WS"),this.name="NotConnectedError"}static isNotConnectedError(e){return e instanceof GF}}class BF extends ll.sH{constructor(e){super(Boolean(e)?e:"Not ready"),this.name="NotReady"}static isNotReadyError(e){return e instanceof BF}}class zF{constructor(e=5e3,t="",n=new FF){this._timeout=e,this._timeoutError=n,this._notifications=new Map,this._log=ou.C8.Logging.getLogger("coreclients.valueNotifier"+(t.length>0?"."+t:""))}waitFor(e,t){return()=>this._startNotificationWatch(e,t)}notify(e){this._stopNotification(e,Tr.F2(void 0))}error(e,t){this._log.trace(`onError:(${e})`),this._stopNotification(e,Tr.t$(t))}clear(e){this._log.trace("clearing notification watches: "+e),this._notifications.forEach(((t,n)=>{this.error(n,new LF("clearing value notifier and dropping all pending notification watches:"+e))}))}_startNotificationWatch(e,t){this._log.debug(`Starting notification watch: ${e}`),(0,ll.kG)(!this._notifications.has(e),"must not start watch for same notification twice, notification already watched: "+e);const n={};return n.promise=new Promise((e=>{n.notifyValue=()=>e(Tr.F2(t)),n.notifyError=t=>e(Tr.t$(t))})),n.timer=self.setTimeout((()=>this._stopNotification(e,Tr.t$(this._timeoutError))),this._timeout),this._notifications.set(e,n),n.promise}_stopNotification(e,t){this._log.trace(`_stopNotification: stopping notification watch: ${e}`,t);const n=this._notifications.get(e);void 0===n?this._log.error("Got result for unknown notification or notification has already expired.",{id:e,result:t}):(clearTimeout(n.timer),(0,Ir.zG)(t,Tr.g_((e=>n.notifyError(e)),(()=>n.notifyValue()))),this._notifications.delete(e))}}class VF{constructor(e=5e3,t="",n=new FF){this._timeout=e,this.name=t,this._timeoutError=n,this._requests=new Map,this._log=ou.C8.Logging.getLogger("coreclients.valueRequester"+(t.length>0?"."+t:""))}watchRequest(e,t=this._timeout){return this._startRequestWatch(e,t)}hasRequest(e){return this._requests.has(e)}onValue(e,t){this._stopRequest(e,Tr.F2(t))}onError(e,t){this._log.trace(`onError:(${e})`),this._stopRequest(e,Tr.t$(t))}clear(e){this._log.trace("clearing request watches: "+e),this._requests.forEach(((t,n)=>{this.onError(n,new LF(`command (${this.name}) can not be executed, reason: ${e}`))}))}_startRequestWatch(e,t){this._log.debug(`Starting request watch: ${e}`),(0,ll.kG)(!this._requests.has(e),"must not start watch for same request twice, request already watched: "+e);const n={};return n.promise=new Promise((e=>{n.resolve=e})),n.timer=self.setTimeout((()=>this._stopRequest(e,Tr.t$(this._timeoutError))),t),this._requests.set(e,n),n.promise}_stopRequest(e,t){this._log.trace(`_stopRequest: stopping request watch: ${e}`,t);const n=this._requests.get(e);void 0===n?this._log.warn("Got result for unknown request or request has already expired.",{id:e,result:t}):(clearTimeout(n.timer),n.resolve(t),this._requests.delete(e))}}UF=NF||(NF={}),(MF=UF.Result||(UF.Result={}))[MF.CONTINUE_HANDLING=0]="CONTINUE_HANDLING",MF[MF.STOP_HANDLING=1]="STOP_HANDLING";const qF=()=>{};class HF{constructor(){this.onSessionStarted=qF,this.onWaitForOT=qF,this.onReady=qF,this.onSessionInbound=qF,this.beforeAlert=qF,this.onAlert=qF,this.onRemove=qF,this.onChange=qF,this.onSynonyms=qF,this.onSnippets=qF,this.onPlagiarism=qF,this.onBeforeAsyncCheckFinish=qF,this.onAsyncCheckFinish=qF,this.onError=qF,this.onBeforeFinish=qF,this.onFinish=qF,this.onStats=qF,this.onTextMaps=qF,this.onTextInfo=qF,this.onEmotions=qF,this.onPong=qF,this.onDebugInfo=qF,this.onConnect=qF,this.onDisconnect=qF,this.onClose=qF,this.onQueueMsgAccepted=qF,this.onQueueMsgDropped=qF,this.onAck=qF,this.onMessageReceived=qF,this.onMessageSent=qF,this.onAutoComplete=qF,this.onAttentionHeatmap=qF,this.onAttentionInfo=qF,this.onProofitAvailability=qF,this.onProofitCancelled=qF,this.onProofitCompleted=qF,this.onProofitProgress=qF,this.onProofitProgressProblem=qF,this.onProofitSubmit=qF,this.onShortenItFinished=qF,this.onSDUI=qF,this.onPublishedAck=qF,this.onGbRuleCreated=qF,this.onReconnectInfo=qF,this.onCheetahSetContext=qF,this.onCheetahChunk=qF,this.onCheetahResult=qF,this.onCheetahSearchReferencesResult=qF,this.onCheetahError=qF,this.onCheetahUpdateState=qF,this.onShowSurvey=qF,this.onAsyncCheckProgress=qF,this.onTouchTypistTriggerResponse=qF}}var WF,$F,XF=__webpack_require__(72847);function KF(e,t){const n=e.charCodeAt(t),r=e.charCodeAt(t+1);return n>=55296&&n<57344&&r>=56320&&r<57344}function YF(e){return function(e){let t=0;const n=e.length;let r,i;for(let o=0;o<n;o++)r=e.charCodeAt(o),r>=55296&&r<57344&&r<56320&&o+1<n&&(i=e.charCodeAt(o+1),i>=56320&&i<57344)?(t+=4,o++):t+=r<128?1:r<2048?2:3;return t}(e)/1e3}($F=WF||(WF={})).transformPosition=(e,t)=>{const n=Hj.wQ.Position.rebase(e,t);return(!0===e.updatable?Hj.wQ.Position.isSquashed(n):!Hj.wQ.Position.hasEqualLength(e,n))?kr.YP:kr.G((0,no.Vx)(e,n))},$F.transformAlertChanged=(e,t)=>{if(0===t.delta.ops.length)return kr.G((0,no.Vx)(e,{rev:t.revision}));if(void 0!==e.transformJson){const n=Hj.lB.rebase(e.transformJson,t.delta);return Hj.lB.isSquashed(n)?kr.YP:kr.G((0,no.Vx)(e,{transformJson:n,rev:t.revision}))}return kr.G(e)},$F.transformAlert=(e,t)=>{if(0===t.delta.ops.length)return kr.G((0,no.Vx)(e,{rev:t.revision}));const n=(0,Ir.zG)(Hj.wQ.hasPosition(e)?(0,$F.transformPosition)(e,t.delta):kr.G(e),kr.UI((e=>(0,no.Vx)(e,{rev:t.revision}))));return(0,Ir.zG)(n,kr.tS(Hj.wQ.matchBy(kr.G,(e=>{const n=Hj.lB.rebase(e.transformJson,t.delta);return(!0===e.updatable?Hj.lB.isSquashed(n):!0!==Hj.lB.isValidAfterTransform(e.transformJson,n))?kr.YP:kr.G((0,no.Vx)(e,{transformJson:n}))}),(e=>{const n=Hj.lB.rebase(e.subalerts,t.delta);return Hj.lB.isSquashed(n)?kr.YP:kr.G((0,no.Vx)(e,{subalerts:n}))}))))},$F.transformAttentionHeatmap=(e,t)=>{const n=e=>e.map((e=>Hj.Vm.Range.rebase(e,t.delta))),r=n(e.update),i=r.filter(Hj.Vm.Range.isSquashed).map((e=>e.id));return(0,no.Vx)(e,{rev:t.revision,add:n(e.add).filter((0,Ir.ff)(Hj.Vm.Range.isSquashed)),update:r.filter((0,Ir.ff)(Hj.Vm.Range.isSquashed)),remove:[...e.remove,...i]})};const ZF=e=>1e3*e,JF=e=>e/1e3;var QF,eL=Object.defineProperty,tL=Object.defineProperties,nL=Object.getOwnPropertyDescriptors,rL=Object.getOwnPropertySymbols,iL=Object.prototype.hasOwnProperty,oL=Object.prototype.propertyIsEnumerable,sL=(e,t,n)=>t in e?eL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,aL=(e,t)=>{for(var n in t||(t={}))iL.call(t,n)&&sL(e,n,t[n]);if(rL)for(var n of rL(t))oL.call(t,n)&&sL(e,n,t[n]);return e},cL=(e,t)=>tL(e,nL(t));(e=>{function t(e){return"change"===e.kind}function n(e){return"change_chunked"===e.kind}e.isChange=(0,ao.Kg)(t,n),e.isFullChange=t,e.isChunkedChange=n,e.isCmd=function(e){return"cmd"===e.kind},e.isExternalCmd=function(e){return"externalCmd"===e.kind},e.isCmdIncRevision=function(e){return"cmdIncRevision"===e.kind}})(QF||(QF={}));class lL{constructor(e,t,n,r,i,o=100,s=.1){this._shouldIncreaseRevision=e,this._acceptHandler=t,this._dropHandler=n,this._stateChangeHandler=r,this._idGenerator=i,this._maxMessageSizeKb=o,this._messagePaddingKb=s,this._log=ou.C8.Logging.getLogger("coreclients.capi.queue",ou.zW.i.DEBUG),this._changes=[],this._staged=[],this._stagedOperationId=null,this._stagedAmount=0,this.transformChangeAgainstQueue=e=>{const t=this._getQueuedDeltaAndLatestRevision(e.rev);return WF.transformAlertChanged(e,t)},this._split=e=>{const t=JSON.stringify([e.delta]);return this._log.trace("change delta string",{deltasStr:t,size:YF(t)}),function(e,t,n=0){if((0,ll.kG)(n<t,"padding must be less than the max message size"),JF(3*e.length)+n<t)return[e];if(YF(e)<t-n)return[e];const r=Math.max(2,Math.floor(ZF(t-n)/3)),i=Math.ceil(e.length/r),o=new Array(i);let s=0,a=0;for(;s<e.length;){const t=KF(e,s+r-1)?r-1:r;o[a++]=e.substr(s,t),s+=t}return o}(t,this._maxMessageSizeKb,this._messagePaddingKb)},this._incRevision=()=>void 0===this._revision?this._revision=0:this._revision+=1,this._acceptMessage=e=>{this._updateCheckedTextSize(e),this._acceptHandler(e)},this._dropMessages=(e,t)=>{e.forEach(this._updateCheckedTextSize),this._dropHandler(e,t)},this._updateCheckedTextSize=e=>{QF.isChange(e)?this._changeStagedAmount(-e.change.amount):("externalCmd"!==e.kind&&this._shouldIncreaseRevision(e.cmd)||"externalCmd"===e.kind&&e.incrementsRevision)&&this._changeStagedAmount(-300)},this._log.debug("capi queue created",{maxMessageSizeKb:this._maxMessageSizeKb,messagePaddingKb:this._messagePaddingKb}),this.clear("init")}pushChanges(e){const t=(0,Ir.zG)(this._tail(),kr.hX(QF.isChange));return(0,Ir.zG)(t,kr.g_((()=>(this._log.trace("pushChanges() adding new change to queue"),this._enqueueChange(e,this._split(e)))),(t=>{this._log.trace("pushChanges() composing with latest change");const n=t.change.compose(e),r=this._split(n);if(this._replaceChange(this._changes.length-1,n,r),!0===n.isEmpty){const e=this._changes.pop();this._stateChangeHandler(this.isEmpty,this.isStaging),setTimeout((()=>this._acceptMessage(e)),0)}return t.id})))}pushCommand(e){const t=this._idGenerator();return this._shouldIncreaseRevision(e)?(this._changeStagedAmount(Hj.hD),this._changes.push({kind:"cmdIncRevision",cmd:e,id:t,rev:this._incRevision()})):this._changes.push({kind:"cmd",cmd:e,id:t,rev:this.localRevision}),this._stateChangeHandler(this.isEmpty,this.isStaging),t}pushExternalCommand(e,t){const n=this._idGenerator();let r=!1;const i=t({id:n,sessionId:e,currentRevision:this.localRevision,nextRevision:()=>(r=!0,this._incRevision())});r&&this._changeStagedAmount(Hj.hD);const o=this.localRevision;return this._changes.push({kind:"externalCmd",cmd:i,id:n,rev:o,incrementsRevision:r}),this._stateChangeHandler(this.isEmpty,this.isStaging),n}get isStaging(){return this._staged.length>0}get isEmpty(){return 0===this._changes.length}get hasCommitedChanges(){return this._changes.length>0}get localRevision(){return void 0!==this._revision?this._revision:0}get stagedAmount(){return this._stagedAmount}get hasChanges(){return this._changes.some(QF.isChange)}get size(){return this._changes.length}poll(){return(0,ll.kG)(null===this._stagedOperationId,"Should not be in staging mode"),(0,Ir.zG)(kr.ij(this._changes.shift()),kr.UI((e=>(QF.isCmd(e)||QF.isExternalCmd(e)&&!e.incrementsRevision||this._staged.push(e),this._stagedOperationId=e.id,this._stateChangeHandler(this.isEmpty,this.isStaging),e))))}shift(){const e=kr.ij(this._changes.shift());return this._stateChangeHandler(this.isEmpty,this.isStaging),e}peek(){return this.isEmpty?kr.YP:kr.ij(this._changes[0])}ackOperation(e){(0,ll.kG)(!!this._stagedOperationId&&e===this._stagedOperationId,`Cannot ack operation by wrong id. Expected: '${this._stagedOperationId}, got: '${e}'`),this._stagedOperationId=null}ackRevision(e){this._ackedRevisions.add(e),this._cleanStaged()}transformAlertAgainstQueue(e){const t=this._getQueuedDeltaAndLatestRevision(e.rev);return WF.transformAlert(e,t)}transformAttentionHeatmapAgainstQueue(e){const t=this._getQueuedDeltaAndLatestRevision(e.rev);return WF.transformAttentionHeatmap(e,t)}clear(e){const t=[...this._changes,...this._staged];this._changes=[],this._staged=[],this._stagedOperationId=null,this._ackedRevisions=new Set,this._revision=void 0,t.length>0&&this._dropMessages(t,e),this._stateChangeHandler(this.isEmpty,this.isStaging)}_tail(){return this.isEmpty?kr.YP:kr.ij(this._changes[this._changes.length-1])}_enqueueChange(e,t){let n;const r=this._incRevision();if(this._changeStagedAmount(e.amount),1===t.length)n=this._idGenerator(),this._changes.push({kind:"change",change:e,id:n,rev:r,deltasString:t[0]});else{this._log.trace("change is larger than maximum allowed size, splitting to chunks",t.length);const i=t.map((e=>({id:this._idGenerator(),chunk:e})));n=this._idGenerator(),this._changes.push({kind:"change_chunked",change:e,id:n,rev:r,chunks:i})}return this._stateChangeHandler(this.isEmpty,this.isStaging),n}_replaceChange(e,t,n){const r=this._changes[e];(0,ll.kG)(QF.isChange(r),"queued change should exist");const i=r;this._changeStagedAmount(-i.change.amount+t.amount),n.length>1?this._changes[e]=cL(aL({},i),{kind:"change_chunked",chunks:n.map((e=>({id:this._idGenerator(),chunk:e})))}):this._changes[e]=cL(aL({},i),{kind:"change",change:t,deltasString:n[0]})}_cleanStaged(){for(;void 0!==this._staged[0]&&this._ackedRevisions.has(this._staged[0].rev);){const e=this._staged.shift();this._ackedRevisions.delete(e.rev),this._stateChangeHandler(this.isEmpty,this.isStaging),this._acceptMessage(e)}}_changeStagedAmount(e){this._stagedAmount+=e}_getQueuedDeltaAndLatestRevision(e){const t=this._staged.filter((t=>t.rev>e)).concat(this._changes).filter(QF.isChange);return{delta:vu.s.squash(t.map((e=>e.change.delta))),revision:(0,Ir.zG)(_T.Z$(t),kr.UI((e=>e.rev)),kr.fS((()=>e)))}}toJSON(){return{isEmpty:this.isEmpty,isStaging:this.isStaging,changes:this._changes.map((e=>QF.isChange(e)?{kind:"change",prevLen:e.change.prevLen,changeDiff:e.change.length,changeAmount:e.change.amount}:e))}}}var uL,dL,hL=Object.defineProperty,pL=Object.defineProperties,gL=Object.getOwnPropertyDescriptors,fL=Object.getOwnPropertySymbols,mL=Object.prototype.hasOwnProperty,bL=Object.prototype.propertyIsEnumerable,yL=(e,t,n)=>t in e?hL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_L=(e,t)=>{for(var n in t||(t={}))mL.call(t,n)&&yL(e,n,t[n]);if(fL)for(var n of fL(t))bL.call(t,n)&&yL(e,n,t[n]);return e},vL=(e,t)=>pL(e,gL(t));(uL||(uL={})).fromRaw=function(e){return vL(_L({},e),{suggestionsCard:(0,Ir.zG)(kr.ij(e.suggestionsCard),kr.UI((e=>({title:e.title,miniTitle:kr.ij(e.miniTitle)})))),successCard:(0,Ir.zG)(kr.ij(e.successCard),kr.UI((e=>({title:e.title,miniTitle:kr.ij(e.miniTitle)})))),defaultCard:vL(_L({},e.defaultCard),{miniTitle:kr.ij(e.defaultCard.miniTitle),details:kr.ij(e.defaultCard.details)})})},(e=>{function t(e,t){const n=Sj(e/(t/60));return n.s=n.h>0&&n.m>10?0:Math.floor(n.s),n}e.calculateReadingTime=function(e){return t(e,250)},e.calculateSpeakingTime=function(e){return t(e,130)},e.generateStats=function(t,n){const r={words:t,chars:n,sentences:Math.floor(t/5),readingTime:{},speakingTime:{},uniqueWords:40*Math.random(),uniqueWordsIndex:100*Math.random(),rareWords:20*Math.random(),rareWordsIndex:100*Math.random(),wordLength:5.4,wordLengthIndex:100*Math.random(),sentenceLength:16.7,sentenceLengthIndex:100*Math.random(),readabilityScore:73,readabilityDescription:"Your text is likely to be understood by a reader who has at least 7th grade education (age 12)"};return r.readingTime=e.calculateReadingTime(r.words),r.speakingTime=e.calculateSpeakingTime(r.words),r}})(dL||(dL={}));var wL,SL=Object.defineProperty,kL=Object.defineProperties,IL=Object.getOwnPropertyDescriptors,CL=Object.getOwnPropertySymbols,EL=Object.prototype.hasOwnProperty,AL=Object.prototype.propertyIsEnumerable,xL=(e,t,n)=>t in e?SL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,TL=(e,t)=>{for(var n in t||(t={}))EL.call(t,n)&&xL(e,n,t[n]);if(CL)for(var n of CL(t))AL.call(t,n)&&xL(e,n,t[n]);return e},OL=(e,t)=>kL(e,IL(t)),PL=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(e){i(e)}},s=e=>{try{a(n.throw(e))}catch(e){i(e)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())})),RL=(e=>(e[e.DISCONNECTED=0]="DISCONNECTED",e[e.CONNECTING=1]="CONNECTING",e[e.CONNECTED=2]="CONNECTED",e[e.WAITING_FOR_OT=3]="WAITING_FOR_OT",e[e.WAITING_FOR_ACK=4]="WAITING_FOR_ACK",e[e.SESSION_INBOUND=5]="SESSION_INBOUND",e[e.ANY=6]="ANY",e[e.CLOSED=7]="CLOSED",e))(RL||{}),DL=(e=>(e[e.CONNECT=0]="CONNECT",e[e.CONNECTED=1]="CONNECTED",e[e.DISCONNECT=2]="DISCONNECT",e[e.WAIT=3]="WAIT",e[e.READY=4]="READY",e[e.SEND=5]="SEND",e[e.ACK=6]="ACK",e[e.CLOSE=7]="CLOSE",e))(DL||{});(wL||(wL={})).getUnsafe=()=>(0,Ir.ls)(Ir.MZ,Tr.F2);const NL=e=>{if("string"==typeof e)return e;if("submit_ot"===e.action&&"deltasString"in e){const t=OL(TL({},e),{deltasString:void 0,deltas:void 0}),n=JSON.stringify(t);return n.substring(0,n.length-1)+`,"deltas": ${e.deltasString}}`}return JSON.stringify(e)};var UL;(e=>{const t={stats:15e3,synonyms:15e3,snippets:15e3,text:15e3,commands:15e3,externalCommands:5e3,otChunks:15e3};e.withDefault=e=>TL(TL({},t),e)})(UL||(UL={}));class ML{constructor({context:e,dialect:t="undefined",client:n,clientVersion:r="",extDomain:i,sendDelay:o=50,docid:s="",docIdIsTransient:a,clientSupports:c=[],clientConfigs:l,isDemoDoc:u=!1,maxMessageSizeKb:d,messagePaddingKb:h,startSessionOptions:p={},idGenerator:g=new zj(Bj.d1,0,!1),shouldSendFeedback:f=Ir.W8,containerId:m},b,y,_,v=UL.withDefault()){this._connectionOptions=_,this._valueRequestTimeoutOptions=v,this._log=ou.C8.Logging.getLogger("coreclients.capi",ou.zW.i.TRACE),this._queueIdGenerator=new zj(Bj.d1,0,!1),this._textSize=0,this._asyncChecksManager=new jL,this._cachedSessionUuid=null,this._pingsMap=new Map,this._validateAlert=LL.validate,this._externalHandlers=[],this._statsRequester=new VF(this._valueRequestTimeoutOptions.stats,"CAPI.DocStats"),this._synonymsRequester=new VF(this._valueRequestTimeoutOptions.synonyms,"CAPI.Synonyms"),this._snippetsRequester=new VF(this._valueRequestTimeoutOptions.snippets,"CAPI.Snippets"),this._getTextRequester=new VF(this._valueRequestTimeoutOptions.text,"CAPI.Text"),this._commandsRequester=new VF(this._valueRequestTimeoutOptions.commands,"CAPI.Commands"),this._externalCommandsRequester=new VF(this._valueRequestTimeoutOptions.externalCommands,"CAPI.ExternalCommands"),this._otChunksNotifier=new zF(this._valueRequestTimeoutOptions.otChunks,"CAPI.OT.Chunks"),this.resetReconnectInfo=()=>{this._reconnectInfo=void 0,this._handleReconnectInfo()},this.reportLensFeedback=(e,t)=>this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:t,lens:e},this._commandsRequester),this.reportSystemFeedback=e=>this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:e},this._commandsRequester),this.reportEmotionFeedback=(e,t,n)=>this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:t,emotion:e,subtype:n},this._commandsRequester),this.reportWritingExpertFeedback=(e,t)=>this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:e,weStage:t},this._commandsRequester),this.reportAiStudioFeedback=(e,t)=>this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:e,aiStudioStage:t},this._commandsRequester),this.reportG2UxInteractionFeedback=(e,t,n)=>this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:e,userAction:n,vbarId:t},this._commandsRequester),this.reportTouchTypistPreviewFeedbacks=(e,t,n)=>this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:e,touchTypistId:t,previewId:n},this._commandsRequester),this.reportTouchTypistApplyFeedback=(e,t,n)=>this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:e,touchTypistId:t,location:n},this._commandsRequester),this.reportTouchTypistRevertFeedback=(e,t,n,r)=>this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:e,touchTypistId:t,location:r,revertId:n},this._commandsRequester),this.reportTouchTypistAppearedFeedback=(e,t)=>this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:e,touchTypistId:t},this._commandsRequester),this.reportTouchTypistCardPreviewLookedFeedback=(e,t)=>this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:e,touchTypistId:t},this._commandsRequester),this.reportTouchTypistRevertLookFeedback=(e,t,n)=>this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:e,touchTypistId:t,revertId:n},this._commandsRequester),this.reportEmotionSentenceFeedback=(e,t)=>this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:t,alertId:e},this._commandsRequester),this.reportMuteFeedback=(e,t,n)=>this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:n,userMuteScope:t,userMuteCategories:e},this._commandsRequester),this.reportAutocorrectFeedback=(e,t)=>this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:e,before:t.before,after:t.after,context:t.context,expected:t.expected},this._commandsRequester),this.reportAutocompleteFeedback=(e,t)=>this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:e,alertId:t.alertId,begin:t.begin,end:t.end,context:t.context,before:t.before,after:t.after,text:t.text,pname:t.pname},this._commandsRequester),this.reportAutocompleteRejectedFeedback=e=>this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:Hj._Y.COMPLETION_REJECTED,alertId:e.alertId,begin:e.begin,end:e.end,context:e.context,before:e.before,after:e.after,text:e.text,pname:e.pname,subtype:e.subtype},this._commandsRequester),this.reportSnippetFeedback=(e,t)=>this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:e,snippetUuid:t},this._commandsRequester),this.requestSynonyms=(e,t)=>this._sendInbandCommand({id:this._idGenerator.newId(),action:"synonyms",begin:e,token:t},this._synonymsRequester),this.requestSnippets=e=>this._sendInbandCommand({id:this._idGenerator.newId(),action:"get_snippets_list",institutionId:e},this._snippetsRequester),this.shortenItSubmit=e=>(0,Ir.zG)(Nr.dk((()=>{this._log.trace("shorten-it submit")})),Nr.tS((()=>this._sendInbandCommand({id:this._idGenerator.newId(),action:"shorten_it_submit",alertId:e},this._commandsRequester)))),this.requestDocStats=this._sendLazyInbandCommand((()=>({id:this._idGenerator.newId(),action:"get_text_stats"})),this._statsRequester),this.enablePlagiarismSearch=(0,Ir.zG)(Nr.dk((()=>{this._log.trace("Enable plagiarism search"),this._asyncChecksManager.resetCheck("plagiarism")})),Nr.tS((()=>this._sendInbandCommand({id:this._idGenerator.newId(),action:"toggle_checks",checks:{plagiarism:!0}},this._commandsRequester)))),this.disablePlagiarismSearch=this._sendLazyInbandCommand((()=>({id:this._idGenerator.newId(),action:"toggle_checks",checks:{plagiarism:!1}})),this._commandsRequester),this.enablePlagiarismAndAiDetectorSearch=(0,Ir.zG)(Nr.dk((()=>{this._log.trace("Enable plagiarism and ai detector search"),this._asyncChecksManager.resetCheck("plagiarism"),this._asyncChecksManager.resetCheck("ai_detector")})),Nr.tS((()=>this._sendInbandCommand({id:this._idGenerator.newId(),action:"toggle_checks",checks:{plagiarism:!0,ai_detector:!0}},this._commandsRequester)))),this.disablePlagiarismAndAiDetectorSearch=this._sendLazyInbandCommand((()=>({id:this._idGenerator.newId(),action:"toggle_checks",checks:{plagiarism:!1,ai_detector:!1}})),this._commandsRequester),this.enableWritingExpert=(0,Ir.zG)(Nr.dk((()=>{this._log.trace("Enable writing expert"),this._asyncChecksManager.resetCheck("writing_expert_check")})),Nr.tS((()=>this._sendInbandCommand({id:this._idGenerator.newId(),action:"toggle_checks",checks:{writing_expert_check:!0}},this._commandsRequester)))),this.disableWritingExpert=this._sendLazyInbandCommand((()=>({id:this._idGenerator.newId(),action:"toggle_checks",checks:{writing_expert_check:!1}})),this._commandsRequester),this.enableAudienceAdapt=e=>(0,Ir.zG)(Nr.dk((()=>{this._log.trace("Enable audience adapt"),this._asyncChecksManager.resetCheck("audience_adapt")})),Nr.tS((()=>this._sendInbandCommand({id:this._idGenerator.newId(),action:"toggle_checks",checks:{audience_adapt:!0},params:{audience_adapt:{persona_id:e}}},this._commandsRequester)))),this.disableAudienceAdapt=this._sendLazyInbandCommand((()=>({id:this._idGenerator.newId(),action:"toggle_checks",checks:{audience_adapt:!1}})),this._commandsRequester),this.enableAiStudio=e=>(0,Ir.zG)(Nr.dk((()=>{this._log.trace("Enable AI Studio"),this._asyncChecksManager.resetCheck("ai_studio")})),Nr.tS((()=>this._sendInbandCommand({id:this._idGenerator.newId(),action:"toggle_checks",checks:{ai_studio:!0},params:{ai_studio:{playbook_id:e}}},this._commandsRequester)))),this.disableAiStudio=this._sendLazyInbandCommand((()=>({id:this._idGenerator.newId(),action:"toggle_checks",checks:{ai_studio:!1}})),this._commandsRequester),this.realtimeProofitSubmit=e=>(this._log.trace("Submit real-time Proofit job"),this._sendInbandCommand({id:this._idGenerator.newId(),action:"realtime_proofit_submit",reconnect:e},this._commandsRequester)),this.realtimeProofitCancel=(0,Ir.zG)(Nr.dk((()=>{this._log.trace("Cancel real-time Proofit job")})),Nr.tS((()=>this._sendInbandCommand({id:this._idGenerator.newId(),action:"realtime_proofit_cancel"},this._commandsRequester)))),this.submitRecipients=e=>(this._log.trace("Submit recipients for better suggestions!"),this._sendInbandCommand({id:this._idGenerator.newId(),action:"submit_recipients",recipients:e},this._commandsRequester)),this.submitScoreSurveyResult=(e,t,n)=>(this._log.trace("Submit score survey result:",{placement:e,score:t,detailed_placement:n}),this._sendInbandCommand({id:this._idGenerator.newId(),action:"submit_survey_result",type:Bj.v0.Survey.Data.ScoreSurvey.type,placement:e,score:t,detailed_placement:n},this._commandsRequester)),this.submitSurvey=e=>(this._log.trace("Submit survey result:",TL({},e)),this._sendInbandCommand(TL({id:this._idGenerator.newId(),action:"submit_survey_result"},e),this._commandsRequester)),this.ping=this._sendLazyInbandCommand((()=>({id:this._idGenerator.newId(),action:"ping"})),this._commandsRequester),this.canGoIdle=()=>this._changesQueue.isEmpty&&!this._changesQueue.isStaging,this.isStable=e=>{const t=void 0===e?this._idGenerator.id:this._idGenerator.id+1;return(void 0===e||"error"!==e.action)&&t>5},this.updateContextInfo=e=>(this._log.trace("Update thread context info"),this._sendInbandCommand({id:this._idGenerator.newId(),action:"update_context_info",docContext:e},this._commandsRequester)),this.published=()=>(this._log.trace("Send published event"),this._sendInbandCommand({id:this._idGenerator.newId(),action:"published"},this._commandsRequester)),this.registerExternalMessageHandler=e=>{this._externalHandlers.push(e)},this.unregisterExternalMessageHandler=e=>{this._externalHandlers=this._externalHandlers.filter((t=>t!==e))},this.enqueueExternalCommand=e=>()=>PL(this,null,(function*(){const t=this._connectionOptions.getSessionId();if(this._canSend()){if(kr.Wi(t))return Tr.t$(new GF("Unexpected empty sessionId, while WS connection is up"));{const n=this._changesQueue.isEmpty,r=this._changesQueue.pushExternalCommand(t.value,e),i=this._externalCommandsRequester.watchRequest(r);return n?(this._log.trace("enqueueExternalCommand: Q.isEmpty, sending command immediately"),this._send()):(this._log.trace("enqueueExternalCommand: Q.notEmpty, delaying sending command"),this._trySend(this._fsm.current)),yield i.then(Tr.UI((()=>r)))}}return Tr.t$(new GF("Cannot send commands as WS connection is down"))})),this._handleReconnectInfo=()=>{var e,t;!(null==(e=this._changesQueue)?void 0:e.isEmpty)||(null==(t=this._changesQueue)?void 0:t.isStaging)?void 0!==this._lastPublishedReconnectInfo&&(this._lastPublishedReconnectInfo=void 0,this._handler.onReconnectInfo({kind:"reconnect_info_updated"})):this._lastPublishedReconnectInfo!==this._reconnectInfo&&(this._handler.onReconnectInfo({kind:"reconnect_info_updated",reconnectInfo:this._reconnectInfo}),this._lastPublishedReconnectInfo=this._reconnectInfo)},this._setReconnectInfo=e=>{this._reconnectInfo=e,this._handleReconnectInfo()},this._setReconnecInfoForNewSession=()=>{null!==this._cachedSessionUuid?this._setReconnectInfo({sessionUuid:this._cachedSessionUuid}):this.resetReconnectInfo()},this._resetIdGenerators=()=>{this._idGenerator.reset(),this._queueIdGenerator.reset(),this._queueIdGenerator.newId()},this._cleanupOldSession=e=>{this._clear(e),this._commandsRequester.clear(e),this._externalCommandsRequester.clear(e),this._statsRequester.clear(e),this._synonymsRequester.clear(e),this._getTextRequester.clear(e)},this._supportsReconnect=()=>this._clientSupports.includes(Bj.zV.reconnect),this._initReconnection=()=>PL(this,null,(function*(){if(!this._supportsReconnect())return this._resetIdGenerators(),null!==this._cachedSessionUuid?{sessionUuid:this._cachedSessionUuid}:void 0;if(this._reconnectInfo)this._changesQueue.isEmpty&&!this._changesQueue.isStaging||(this._setReconnecInfoForNewSession(),this._resetIdGenerators());else{if(null!==this._cachedSessionUuid)this._setReconnectInfo({sessionUuid:this._cachedSessionUuid});else{const e="function"==typeof this._startSessionOptions?yield this._startSessionOptions():this._startSessionOptions;e.reconnectInfo&&this._setReconnectInfo(e.reconnectInfo)}this._resetIdGenerators()}return this._reconnectInfo})),this._startSession=()=>PL(this,null,(function*(){this._log.trace("_startSession");const e="function"==typeof this._startSessionOptions?yield this._startSessionOptions():this._startSessionOptions,t=yield this._initReconnection(),n=OL(TL(OL(TL({id:this._idGenerator.newId(),action:"start",client:this._client.type,clientSubtype:this._client.sub,clientVersion:this._clientVersion,dialect:this._dialect,docid:this._docid,docIdIsTransient:this._docIdIsTransient,extDomain:this._extDomain,documentContext:this._context&&jF.R$.serialize(this._context),clientSupports:this._clientSupports,isDemoDoc:this._isDemoDoc},null!==t?{reconnectInfo:t}:{}),{clientConfigs:this._clientConfigs}),e),{containerId:this._containerId});yield this._fsm.event(5),this._sendMessage(n)})),this._handleNewSession=e=>{void 0!==this._reconnectInfo&&this._log.debug(`Exited old session: ${this._reconnectInfo.sessionUuid}`),this._log.debug(`Starting new session: ${e}`),this._fsm.is(2)&&(this._cleanupOldSession("new session"),this._fsm.event(3)),this._setReconnectInfo({sessionUuid:e,messagesReceived:1,messagesSent:1})},this._handleExistingSession=e=>{this._log.debug(`Continuing session: ${e}`),this._fsm.is(2)?(this._fsm.event(4),this._handler.onReady({kind:"ready"})):this._fsm.event(6)},this._handleStart=e=>{this._log.trace("_handleStart"),this._fsm.event(6);const{userMutedCategories:t,allowedFeatures:n,domainCategory:r,domainName:i,isEnterprise:o,defaultDocumentContext:s,sessionUuid:a,reconnectedInfo:c,cheetahState:l}=e,u=void 0===this._reconnectInfo||a!==this._reconnectInfo.sessionUuid;(null===this._cachedSessionUuid||this._supportsReconnect())&&(this._cachedSessionUuid=a),u?this._handleNewSession(a):this._handleExistingSession(a),this._handler.onSessionStarted({kind:"session_started",userMutedCategories:t,allowedFeatures:n,domainCategory:r,domainName:i,isEnterprise:o,cheetahState:l,defaultDocumentContext:(0,Ir.zG)(s,kr.ij,kr.tS(jF.R$.parseDefault)),sessionUuid:a,reconnectedInfo:c,isNewSession:u,maxWsMessageSize:e.maxWsMessageSize})},this._waitForSubmitOt=()=>{this._handler.onWaitForOT({kind:"wait_for_ot"})},this._sessionInbound=e=>{this._handler.onSessionInbound({kind:"session_inbound"}),this._trySend(e)},this._canSend=()=>!this._fsm.is(0,1,7),this._send=()=>PL(this,null,(function*(){if(this._resetTimer(),this._fsm.is(5)&&this._changesQueue.hasCommitedChanges){yield this._fsm.event(5);try{const e=this._changesQueue.poll();yield(0,Ir.zG)(e,kr.UI((e=>PL(this,null,(function*(){const t=QF.isChange(e);yield this._sendMessage(this._processQueueMessage(e)),t||(this._log.trace("message sent is not Change, firing CAPI FSM ACK immediately"),(yield this._fsm.event(6))?(this._changesQueue.ackOperation(e.id),"externalCmd"===e.kind&&this._externalCommandsRequester.onValue(e.id)):this._log.debug("can not do ack for non change msg because we are in unexpected state",{state:RL[this._fsm.current]}))})))),kr.fS((()=>Promise.resolve())))}catch(e){this._log.error("unexpected error on sending",e)}}else this._trySend(this._fsm.current)})),this._processQueueMessage=e=>QF.isChange(e)?this._processSubmitOTMessage(e):"externalCmd"===e.kind?e.cmd:"rev"in e.cmd?OL(TL({},e.cmd),{rev:e.rev,id:e.id}):OL(TL({},e.cmd),{id:e.id}),this._resetTimer=()=>{void 0!==this._timeout&&(clearTimeout(this._timeout),this._timeout=void 0)},this._onQueueMsgAccepted=e=>{this._handler.onQueueMsgAccepted({kind:"queue_msg_accepted",message:e})},this._onQueueStateChanged=()=>{this._handleReconnectInfo()},this._onQueueMsgDropped=(e,t)=>{e.filter(QF.isCmd).forEach((e=>{const n=new LF("message dropped from queue:"+t);switch(e.cmd.action){case"ping":case"option":case"toggle_checks":case"set_context":case"feedback":this._commandsRequester.onError(e.id,n);break;case"get_text_stats":this._statsRequester.onError(e.id,n);break;case"synonyms":this._synonymsRequester.onError(e.id,n);break;case"get_debug_info":this._getTextRequester.onError(e.id,n)}})),this._handler.onQueueMsgDropped({kind:"queue_msgs_dropped",messages:e,reason:t})},this._handler=b,this._context=e,this._dialect=t,this._client=n,this._clientVersion=r,this._extDomain=i,this._sendDelay=o,this._docid=s,this._docIdIsTransient=a,this._clientSupports=c,this._clientConfigs=l,this._isDemoDoc=u,this._containerId=m,this._startSessionOptions=p,this._idGenerator=g,this._shouldSendFeedback=f,this._changesQueue=new lL(this._shouldHaveSeparateRevision,this._onQueueMsgAccepted,this._onQueueMsgDropped,this._onQueueStateChanged,(()=>this._queueIdGenerator.newId()),d,h),this._fsm=new gj("capi",0,7).with(6).parentOf(2,1,0,3,4,5).from(6).to(7).on(7).from(0).to(1).on(0).from(1).to(1).on(0).from(1).to(2).on(1).from(2,3,4,5,1).to(0).on(2).from(2).to(3).on(3).from(2,3).to(5).on(4).from(5).to(4).on(5).from(4).to(5).on(6).on(2,this._startSession).on(3,this._waitForSubmitOt).on(5,(e=>this._sessionInbound(e.to))),this._log.isEnabled(ou.zW.i.TRACE)&&this._fsm.verbose(RL,DL),y.onConnecting((()=>this._handleConnecting())).onConnect((e=>this._handleConnect(e))).onDisconnect((e=>this._handleDisconnect(e))).onMessage(((e,t)=>this._handleMessage(t))),(0,ao.iR)("closeCapiSocket",((e=1e3,t)=>{null!==this._conn&&this._conn._ws.close(e,t)})),(0,ao.iR)("capiState",this),(0,ao.iR)("capiReadyToReceive",(()=>this._fsm.is(5)&&this._changesQueue.isEmpty)),(0,ao.iR)("capiRuntimeError",(()=>{const e=$M.ins(0,"test",100500);this.pushChanges(e)}))}pushChanges(e){return this._pushChangesTask(e)}get checkingState(){return 0===this._checkedTextSize||1===this._textSize?"idle":this._checkedTextSize>Hj.hD&&this._textSize>Hj.hD/3?"full":"checking"}get asyncChecksState(){return this._asyncChecksManager.getState()}setSessionOption(e){switch(e.kind){case Hj.rP.Context:return this.setContext(e.context);case Hj.rP.GnarContainerId:return this.setOption(e.kind,e.id);default:return(0,ll.vE)(e)}}setContext(e){return this._log.debug("setContext(...)"),this._context=e,this._sendInbandCommand({action:"set_context",id:this._idGenerator.newId(),rev:-1,documentContext:jF.R$.serialize(e)},this._commandsRequester)}setOption(e,t){return this._log.trace("Set option "+t),this._sendInbandCommand({id:this._idGenerator.newId(),action:"option",name:e,value:t},this._commandsRequester)}sendUserAction(e,t){return this._log.debug("sendUserAction",{componentId:e,userAction:t}),this._canSend()?(0,Ir.zG)(this._connectionOptions.getSessionId(),Tr.Yo((()=>new Error("Can not sendUserAction because sessionId is empty"))),Nr.Uo,Nr.tS((n=>(0,Ir.zG)(this._sendTrackedInbandCommand({id:this._idGenerator.newId(),action:"user_action",sessionId:n,componentId:e,userAction:t},this._commandsRequester),Nr.UI((0,no.ei)("queuedId")))))):Nr.t$(new GF("Can not sendUserAction because connection is down"))}sendDebugReport(e,t){return this._log.debug("sendDebugReport",{componentId:e,errorMessage:t}),this._sendInbandCommand({id:this._idGenerator.newId(),action:"debug_report",type:"sdui_decode_error",componentId:e,errorMessage:t},this._commandsRequester)}sendFeedback(e){if(this._log.debug("sendFeedback",e.kind),!this._shouldSendFeedback(e))return this._log.debug(`Skip sending ${e.kind} based on CAPI Client configured, see 'shouldSendFeedback'`),Nr.of(void 0);switch(e.kind){case Hj.PZ.ACCEPTED:return this._sendAlertAcceptedFeedback(e);case Hj.PZ.IGNORE:return this.reportIgnoreFeedback(e.id,e.reason,e.subtype,e.pnameQualifier,e.drilldownSuggestionIds);case Hj.PZ.ACKNOWLEDGED:return this.reportAcknowledgeFeedback(e.id,e.subtype,e.text,e.pnameQualifier);case Hj.PZ.ADD_TO_DICTIONARY:case Hj.PZ.RENDERED:case Hj.PZ.LOOKED:case Hj.PZ.CLOSED:case Hj.PZ.LIKE:case Hj.PZ.DISLIKE:case Hj.PZ.WRONG_SUGGESTION:case Hj.PZ.OFFENSIVE_CONTENT:case Hj.PZ.EXPANDED:case Hj.PZ.IGNORE_BULK_ACCEPTED:case Hj.PZ.HIDE:case Hj.PZ.UNLOCK:return this.reportAlertFeedback(e.id,e.kind,e.subtype);case Hj.PZ.USER_SATISFACTION_FEEDBACK:return this.reportAlertSatisfactionFeedback(e.id,e.kind,e.userSatisfactionDescription,e.subtype);case Hj.P2.DRILLDOWN:return this._reportDrilldownFeedback(e.id,e.alternativeIndex,e.drilldownSuggestionIds,e.subtype);case Hj.at.SYNONYM_ACCEPTED:return this.reportSynonymFeedback(e.id,e.kind,e.replacementText,e.subtype);case Hj.at.SYNONYM_DISMISSED:return this.reportSynonymFeedback(e.id,e.kind,e.subtype);case Hj.y_.EMOTION_LIKE:case Hj.y_.EMOTION_DISLIKE:case Hj.y_.EMOTION_OFFENSIVE:return this.reportEmotionFeedback(e.emotionName,e.kind,e.subtype);case Hj.fA.EMOTION_SENTENCE_LIKE:case Hj.fA.EMOTION_SENTENCE_DISLIKE:return this.reportEmotionSentenceFeedback(e.id,e.kind);case Hj.Mw.MUTE:case Hj.Mw.UNMUTE:return this.reportMuteFeedback(e.userMuteCategories,e.userMuteScope,e.kind);case Hj.KI.RECHECK_SHOWN:return this.reportSystemFeedback(e.kind);case Hj.KX.LENS_CLOSE:case Hj.KX.LENS_OPEN:case Hj.KX.DISMISS_BY_LENS:return this.reportLensFeedback(e.lensName,e.kind);case Hj.VD.AUTOCORRECT_ACCEPT:case Hj.VD.AUTOCORRECT_DISMISS:case Hj.VD.AUTOCORRECT_REPLACE:return this.reportAutocorrectFeedback(e.kind,e);case Hj._Y.COMPLETION_REJECTED:return this.reportAutocompleteRejectedFeedback(e);case Hj._Y.COMPLETION_ACCEPTED:case Hj._Y.COMPLETION_IGNORED:case Hj._Y.COMPLETION_SHOWN:return this.reportAutocompleteFeedback(e.kind,e);case Hj.DI.BULK_ACCEPTED:return this.reportAlertsBatchFeedback(e.alertIds,e.kind,e.subtype);case Hj.JE.SNIPPET_ACCEPTED:return this.reportSnippetFeedback(e.kind,e.snippetUuid);case Hj._l.ASSISTANT_OPENED:return this._reportAssistantFeedback(e.kind);case Hj.Q1.AUTOAPPLY_TRIGGERED:case Hj.Q1.AUTOAPPLY_LOOKED:case Hj.Q1.AUTOAPPLY_REVERTED:case Hj.Q1.AUTOAPPLY_ACCEPT:case Hj.Q1.AUTOAPPLY_AFFECTED_BY_TEXTCHANGE:return this._reportAutoapplyFeedback(e.alertId,e.kind,e.subtype);case Hj.Fj.WritingExpert:return this.reportWritingExpertFeedback(e.kind,e.weStage);case Hj.dt.AiStudio:return this.reportAiStudioFeedback(e.kind,e.aiStudioStage);case Hj.r0.G2_UI:return this.reportG2UxInteractionFeedback(e.kind,e.vbarId,e.userAction);case Hj.XN.IndividualPreviewApply:case Hj.XN.IndividualPreviewDismiss:case Hj.XN.IndividualPreviewLook:return this.reportTouchTypistPreviewFeedbacks(e.kind,e.touchTypistId,e.previewId);case Hj.XN.Apply:return this.reportTouchTypistApplyFeedback(e.kind,e.touchTypistId,e.location);case Hj.XN.Revert:return this.reportTouchTypistRevertFeedback(e.kind,e.touchTypistId,e.revertId,e.location);case Hj.XN.Appeared:return this.reportTouchTypistAppearedFeedback(e.kind,e.touchTypistId);case Hj.XN.CardPreviewLooked:return this.reportTouchTypistCardPreviewLookedFeedback(e.kind,e.touchTypistId);case Hj.XN.RevertLook:return this.reportTouchTypistRevertLookFeedback(e.kind,e.touchTypistId,e.revertId);default:return(0,ll.vE)(e)}}requestWritingExpert(){return this._sendInbandCommand({id:this._idGenerator.newId(),correlationId:"QWEQWEQWE",action:"disposable_cheetah:invokeCommand",generationMode:"rewrite",textScope:{start:0,end:100},command:{kind:"predefinedAction",actionIdentifier:{kind:"label",value:"Improve it"}}},this._commandsRequester)}sendTouchTypistCommand(e){return this._sendInbandCommand(e,this._commandsRequester)}_reportDrilldownFeedback(e,t,n,r){return this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:Hj.P2.DRILLDOWN,alertId:e,alternativeIndex:t,drilldownSuggestionIds:n,subtype:r},this._commandsRequester)}_reportAssistantFeedback(e){return this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:e},this._commandsRequester)}_sendAlertAcceptedFeedback(e){return"replacementText"in e?this._reportTextAlertAcceptedFeedback(e.id,e.replacementText,e.subtype,e.reason,e.gbPrompt):"alternativeIndex"in e?this._reportTransformJsonAlertAcceptedFeedback(e.id,e.alternativeIndex,e.gapValue,e.subtype,e.drilldownSuggestionIds,e.dismissedTransformGroups,e.reason,e.gbPrompt):(0,ll.vE)(e)}reportIgnoreFeedback(e,t,n,r,i){return this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:Hj.PZ.IGNORE,alertId:e,userReason:t,subtype:n,pnameQualifier:r,drilldownSuggestionIds:i},this._commandsRequester)}reportAcknowledgeFeedback(e,t,n,r){return this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:Hj.PZ.ACKNOWLEDGED,alertId:e,subtype:t,pnameQualifier:r,text:n},this._commandsRequester)}reportAlertFeedback(e,t,n){return this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:t,alertId:e,subtype:n},this._commandsRequester)}reportAlertSatisfactionFeedback(e,t,n,r){return this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:t,alertId:e,userSatisfactionDescription:n,subtype:r},this._commandsRequester)}reportAlertsBatchFeedback(e,t,n){return this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:t,alertIds:e,subtype:n},this._commandsRequester)}_reportTextAlertAcceptedFeedback(e,t,n,r,i){return this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:Hj.PZ.ACCEPTED,alertId:e,text:t,subtype:n,userReason:r,gbPrompt:i},this._commandsRequester)}_reportTransformJsonAlertAcceptedFeedback(e,t,n,r,i,o,s,a){return this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:Hj.PZ.ACCEPTED,alertId:e,alternativeIndex:t,gapValue:n,subtype:r,drilldownSuggestionIds:i,dismissedTransformGroups:o,userReason:s,gbPrompt:a},this._commandsRequester)}reportSynonymFeedback(e,t,n,r){switch(t){case Hj.at.SYNONYM_ACCEPTED:const i={id:this._idGenerator.newId(),action:"feedback",type:Hj.at.SYNONYM_ACCEPTED,text:n,alertId:e,subtype:r};return this._sendInbandCommand(i,this._commandsRequester);case Hj.at.SYNONYM_DISMISSED:return this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:Hj.at.SYNONYM_DISMISSED,alertId:e,subtype:r},this._commandsRequester);default:return(0,ll.vE)(t)}}_reportAutoapplyFeedback(e,t,n){return this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:t,alertId:e,subtype:n},this._commandsRequester)}isClosed(){return this._fsm.is(7)}close(e){return PL(this,null,(function*(){if(this.isClosed())return void this._log.trace("close: CAPI already closed, skipping");this._log.trace("close: closing CAPI");(yield this._fsm.event(7,e))?this._clear(e):this._log.error("Cannot go to CLOSED state")}))}getText(){return rS(this._sendInbandCommand({id:this._idGenerator.newId(),action:"get_debug_info"},this._getTextRequester))}_handleConnecting(){return PL(this,null,(function*(){(yield this._fsm.event(0))||this._log.error("Can not enter CONNECTING state",{fsmState:RL[this._fsm.current]})}))}_handleConnect(e){return PL(this,null,(function*(){let t;this._log.trace(`_handleConnect(${RL[this._fsm.current]}): received new ws connection`),this._conn=e;try{(yield this._fsm.event(1))||(t="failed to switch to CONNECTED state")}catch(e){t=e}if(Boolean(t))throw this._log.warn("Connection cannot be finalized.",t),t}))}_handleDisconnect(e){return PL(this,null,(function*(){this._log.trace(`_handleDisconnect(${RL[this._fsm.current]})`,e);const t=yield this._fsm.event(2,e.reason),n=this._fsm.is(7)?ou.zW.i.WARN:ou.zW.i.ERROR;t||this._log.log(n,"Can not enter DISCONNECTED state",{reason:e,fsmState:RL[this._fsm.current]})}))}_handleMessage(e){var t,n,r,i,o,s,a,c;const l=null==(n=null==(t=this._clientConfigs)?void 0:t.sdui)?void 0:n.config;if(void 0!==this._reconnectInfo){const e=null!=(r=this._reconnectInfo.messagesReceived)?r:0;this._setReconnectInfo(OL(TL({},this._reconnectInfo),{messagesReceived:e+1}))}if(this._handler.onMessageReceived({kind:"message_received",message:e}),this._log.isEnabled(ou.zW.i.TRACE)&&this._log.trace(`Message <<< ${e.action}, id: ${e.id}`),this._externalHandlers.some((t=>t(e)===NF.Result.STOP_HANDLING)))this._log.trace("Message was handled by external handler",e.action);else switch(e.action){case"start":this._handleStart(e);break;case"alert":this._handleAlert(e);break;case"remove":this._handler.onRemove({kind:"alert_removed",alertId:Hj.wQ.Id.create(e.id),hint:(0,Ir.zG)(kr.ij(e.hint),kr.hX((e=>e===XF.AF.NotFixed))),mergedIn:(0,Ir.zG)(kr.ij(e.mergedIn),kr.UI((e=>Hj.wQ.Id.create(e))))});break;case"alert_changes":this._handleAlertChange(e);break;case"finished":this._handleFinish(e);break;case"async_check_finished":this._handleAsyncCheckFinished(e);break;case"async_check_progress":this._handleAsyncCheckProgress(e);break;case"complete":this._handleComplete(e);break;case"heatmap":this._handleAttentionHeatmap(e);break;case"attention_widget":this._handleAttentionInfo(e);break;case"submit_ot":this._handleSubmitOtAck(e);break;case"submit_ot_chunk":this._handleSubmitOtChunkAck(e);break;case"feedback":case"option":case"toggle_checks":case"set_context":case"submit_recipients":case"user_action":case"debug_report":case"shorten_it_submit":case"update_context_info":case"submit_survey_result":this._handleCommandAck(e);break;case"perfstats":this._handleAck(e);break;case"error":this._handleError(e);break;case"pong":this._handlePong(e);break;case"synonyms":this._handleSynonyms(e);break;case"get_snippets_list_response":this._handleSnippets(e);break;case"text_stats":this._handleTextStats(e);break;case"text_maps":this._handleTextMaps(e);break;case"text_info":this._handleTextInfo(e);break;case"emotions":this._handleEmotions(e);break;case"debug_info":this._handler.onDebugInfo({kind:"debug_info",info:e}),this._getTextRequester.onValue(e.id,e.text);break;case"realtime_proofit_availability":this._handleProofitAvailability(e);break;case"realtime_proofit_submit_resp":this._handleProofitSubmit(e);break;case"realtime_proofit_progress":this._handleProofitProgress(e);break;case"realtime_proofit_cancel_resp":this._handleProofitCancelled(e);break;case"shorten_it_finished":this._handleShortenItFinished(e);break;case"published":this._handlePublishedAck(e);break;case"sdui:add":null!=(null==(i=null==l?void 0:l[e.viewId])?void 0:i.dslParser)?this._handleSDUIAdd(e,null==(o=null==l?void 0:l[e.viewId])?void 0:o.dslParser):this._handleUnexpectedSDUIMessage(e);break;case"sdui:update":null!=(null==(s=null==l?void 0:l[e.viewId])?void 0:s.dslParser)?this._handleSDUIUpdate(e,null==(a=null==l?void 0:l[e.viewId])?void 0:a.dslParser):this._handleUnexpectedSDUIMessage(e);break;case"sdui:remove":null!=(null==(c=null==l?void 0:l[e.viewId])?void 0:c.dslParser)?this._handleSDUIRemove(e):this._handleUnexpectedSDUIMessage(e);break;case"gb_rule_created":this._handler.onGbRuleCreated({kind:"gb_rule_created",categoryTitle:e.categoryTitle,styleGuideId:e.styleGuideId,descriptionLength:e.descriptionLength});break;case"show_survey":this._handleShowSurvey(e);break;case"g_debug_event":this._log.debug("g_debug_event",{message:e});break;case"trigger_touch_typist":this._handleTouchTypistTriggerResponse(e);break;case"touch_typist_action":break;default:this._log.debug("Unknown message",{message:e}),(0,ll.vE)(e,{action:e.action,id:e.id})}}_handleAlert(e){this._handler.beforeAlert({kind:"before_alert"});const t=Hj.wQ.fromAlertMessage(e);this._log.trace("_handleAlert",e.id);const n=this._changesQueue.transformAlertAgainstQueue(t);(0,Ir.zG)(n,Tr.Yo((()=>new Error(`alert ${t.id} position overlap: ${JSON.stringify(t).substring(0,200)}`))),Tr.tS(this._validateAlert),Tr.g_((e=>{this._log.isEnabled(ou.zW.i.TRACE)&&this._log.trace("OT ALERT: discarding alert due to error",e)}),(e=>{this._handler.onAlert({kind:"alert_received",alert:e})})))}_handleAlertChange(e){return(0,Ir.zG)({kind:"alert_changed",alertId:Hj.wQ.Id.create(e.id),rev:e.rev,extraProperties:e.extra_properties&&Hj.wQ.parseExtraProperties(e.extra_properties),transformJson:e.transformJson&&Hj.A1.toAbs(e.transformJson),muted:e.muted},this._changesQueue.transformChangeAgainstQueue,kr.g_(Ir.Q1,this._handler.onChange))}_handleComplete(e){this._handler.onAutoComplete({kind:"autocomplete_received",complete:e})}_handleAttentionHeatmap(e){const t=Hj.Vm.fromAttentionHeatmapMessage(e);this._handler.onAttentionHeatmap({kind:"attention_heatmap_received",heatmap:this._changesQueue.transformAttentionHeatmapAgainstQueue(t)})}_handleAttentionInfo(e){var t;2===e.version?this._handler.onAttentionInfo({kind:"attention_info_received",rev:e.rev,wordsCount:e.wordsCount,checklist:e.checklist.map(uL.fromRaw),headerMessage:e.headerMessage,predictionMessage:e.predictionMessage,hidden:null!=(t=e.hidden)&&t}):this._log.error("Got an unsupported attention_widget message version",e)}_handleTextMaps({score:e,generalScore:t,textMaps:n}){const r={score:e,generalScore:t,textMaps:n};this._handler.onTextMaps({kind:"text_maps",data:r})}_handleTextInfo(e){const t={wordsCount:e.wordsCount,charsCount:e.charsCount-1,readingTime:dL.calculateReadingTime(e.wordsCount),speakingTime:dL.calculateSpeakingTime(e.wordsCount),readabilityScore:e.readabilityScore,messages:kr.ij(e.messages),sessionStats:e.sessionStats};this._handler.onTextInfo({kind:"text_info",data:t})}_handleEmotions(e){this._handler.onEmotions({kind:"emotions",emotions:e.emotions,institutionLogo:e.institutionLogo,brandTonesEnabled:e.brandTonesEnabled,brandTonesConfigured:e.brandTonesConfigured,hidden:e.hidden})}_handleProofitAvailability(e){this._handler.onProofitAvailability({id:e.id,kind:"realtime_proofit_availability",available:e.available,quota:e.quota})}_handleProofitSubmit(e){this._handler.onProofitSubmit({id:e.id,kind:"realtime_proofit_submit_resp",status:e.status})}_handleProofitProgress(e){"in_progress"===e.status?this._handler.onProofitProgress(TL({kind:"realtime_proofit_in_progress"},e)):"completed"===e.status?this._handler.onProofitCompleted(TL({kind:"realtime_proofit_completed"},e)):"error"===e.status?this._handler.onProofitProgressProblem(TL({kind:"realtime_proofit_progress_error"},e)):"rejected"===e.status&&this._handler.onProofitProgressProblem(TL({kind:"realtime_proofit_progress_rejected"},e))}_handleProofitCancelled(e){this._handler.onProofitCancelled({id:e.id,kind:"realtime_proofit_cancel_resp",refunded:e.refunded,quota:e.quota})}_handleShortenItFinished(e){this._handler.onShortenItFinished({kind:"shorten_it_finished",alertId:Hj.wQ.Id.create(e.alertId)})}_handlePublishedAck(e){this._handleCommandAck(e),this._handler.onPublishedAck({kind:"published_ack",survey:e.survey})}_handleShowSurvey(e){this._handler.onShowSurvey({kind:"show_survey",survey:e.survey})}_handleFinish(e){this._log.trace("_handleFinish"),this._handler.onBeforeFinish({kind:"before_finish"}),this._changesQueue.ackRevision(e.rev);const t=this._createFinishEvent(e);this._handler.onFinish(t)}_handleAsyncCheckProgress(e){this._handler.onAsyncCheckProgress({kind:"async_check_progress",check:e.check,revision:e.rev,progress:e.progress})}_handleAsyncCheckFinished(e){this._handler.onBeforeAsyncCheckFinish({kind:"before_async_check_finish"}),this._asyncChecksManager.finish(e),this._handler.onAsyncCheckFinish({kind:"async_check_finished",check:e.check,revision:e.rev,outcomeScores:e.outcomeScores})}_handleSubmitOtAck(e){this._log.trace("<<< Acknowledge for "+e.action,{message:e}),this._fsm.is(4)?(this._handleAck(e),this._changesQueue.ackOperation(e.id),this._fsm.event(6)):this._log.error("Got an unexpected submit_ot ack",{curentState:RL[this._fsm.current]})}_sendNextOtChunk(e){return 0===e.chunks.length?(this._log.trace("no more chunks, sending final submit_ot message"),Nr.Y3((()=>PL(this,null,(function*(){return yield this._sendMessage(e.submitOt)}))),(e=>new Error(`failed to send final submit_ot message: ${e}`)))):(this._log.trace("sending next submit_ot chunk"),(0,Ir.zG)(Nr.Y3((()=>PL(this,null,(function*(){const t=e.chunks.splice(0,1)[0];return yield this._sendMessage(t),t}))),(e=>new Error(`failed to send next chunk message: ${e}`))),Nr.tS((t=>this._waitForOtChunkAck(t,e)))))}_waitForOtChunkAck(e,t){return(0,Ir.zG)(this._otChunksNotifier.waitFor(e.id,t),Nr.tS(this._sendNextOtChunk.bind(this)),Nr.Vn((e=>(this._log.error("failed sending OT chunks",e),e))))}_handleSubmitOtChunkAck(e){this._log.trace("<<< Acknowledge for "+e.action,{message:e}),this._otChunksNotifier.notify(e.id)}_handleCommandAck(e){this._log.trace("<<< Acknowledge for "+e.action,{message:e}),this._commandsRequester.onValue(e.id),this._handleAck(e)}_handleAck(e){(0,Ir.zG)(FL(e,this._asyncChecksManager),kr.g_(Ir.gn,this._handler.onAck))}_handlePong(e){const t=self.performance.now();this._handler.onPong({kind:"pong",latency:(0,Ir.zG)(kr.ij(this._pingsMap.get(e.id)),kr.UI((e=>t-e)))})}_handleSynonyms(e){const t=this._parseSynonymsResult(e);this._handler.onSynonyms({kind:"synonyms",synonyms:t,word:e.token,position:e.synonyms.pos}),this._synonymsRequester.onValue(e.id,t)}_handleTouchTypistTriggerResponse(e){this._handler.onTouchTypistTriggerResponse(TL({kind:"trigger_touch_typist"},e))}_handleSnippets(e){this._handler.onSnippets({kind:"get_snippets_list_response",snippets:e}),this._snippetsRequester.onValue(e.id,e)}_handleTextStats(e){e.readingTime=dL.calculateReadingTime(e.words),e.speakingTime=dL.calculateSpeakingTime(e.words),this._handler.onStats({kind:"stats",stats:e}),this._statsRequester.onValue(e.id,e)}_handleSDUIAdd(e,t){(0,Ir.zG)(this._toSduiIdDslSchemaTuple(e,t),kr.UI((([t,n])=>this._handler.onSDUI({kind:"sdui_add",sdui:n,sduiRootId:t,rev:e.rev}))))}_handleSDUIRemove(e){this._handler.onSDUI({kind:"sdui_remove",sduiRootId:Hj.t_.Id.create(e.sduiRootId)})}_handleSDUIUpdate(e,t){(0,Ir.zG)(this._toSduiIdDslSchemaTuple(e,t),kr.UI((([t,n])=>this._handler.onSDUI({kind:"sdui_update",sdui:n,sduiRootId:t,rev:e.rev}))))}_handleUnexpectedSDUIMessage(e){var t;(null==(t=this._clientConfigs)?void 0:t.sdui)?this._log.error(`skip ${e.id} due to not configured dslParser.`):this.sendDebugReport(String(e.id),"got unexpected sdui message without sending sduiConfig")()}_toSduiIdDslSchemaTuple({sdui:e,rev:t,id:n,sduiRootId:r},i){const o=Hj.t_.Id.create(r);return void 0===e?(this.sendDebugReport(String(n),`got unexpected empty sdui content for ${t}`)(),this._log.error(`skip ${n} due to empty sdui content`,{messageId:n,rev:t}),kr.YP):(0,Ir.zG)(i(e),Tr.g_((r=>(this.sendDebugReport(String(n),r.message)(),this._log.error(`skip ${n} due to incorrect sdui content`,{messageId:n,message:r.message,rawSdui:e,rev:t}),kr.YP)),(e=>kr.G([o,e]))))}_createFinishEvent(e){return{kind:"finish",revision:e.rev,score:(0,Ir.zG)(kr.ij(e.generalScore),kr.hX((e=>e>=0)),kr.UI((t=>({errorRateScore:e.score,rank:t})))),lowestScore:(0,Ir.zG)(kr.ij(e.lowestGeneralScore),kr.hX((e=>e>=0)),kr.UI((t=>({errorRateScore:e.score,rank:t})))),scoreStatus:kr.ij(e.scoresStatus),removed:new Set(e.removed),dialect:e.dialect,outcomeScores:Bj.v0.OutcomeScores.normalize(e.outcomeScores),foreign:e.foreign}}_parseSynonymsResult(e){const t=e=>e.derived;return{id:e.id.toString(),originalWord:e.token,synonymsOrGroups:(e=>0===e.synonyms.meanings.length?kr.YP:1===e.synonyms.meanings.length?kr.G(Tr.t$(e.synonyms.meanings[0].synonyms.map(t))):kr.G(Tr.F2(e.synonyms.meanings.map((n=>(void 0===n.meaning&&this._log.warn("Absent meaning in synonyms group.",{token:e.token}),{meaning:Boolean(n.meaning)?n.meaning:"",words:n.synonyms.map(t)}))))))(e),pname:e.synonyms.pname}}_trySend(e){void 0===this._timeout&&5===e?this._timeout=self.setTimeout(this._send,this._sendDelay):3!==e||this._changesQueue.isEmpty?this._log.trace(`_trySend(${RL[e]}) send timeout already set or not waiting for ot, ignoring`):(this._log.trace(`_trySend(${RL[e]}) moving to READY`),this._fsm.event(4),this._handler.onReady({kind:"ready"}))}_shouldHaveSeparateRevision(e){return"set_context"===e.action}_pushChangesTask(e){this._log.debug(`pushChanges(${RL[this._fsm.current]}):`,JSON.stringify(e));const t=()=>PL(this,null,(function*(){this._log.debug(`pushChanges(${RL[this._fsm.current]}): starting new session`);try{return this.resetReconnectInfo(),this._resetIdGenerators(),this._cleanupOldSession("new session started by pushing RESET state"),yield this._startSession(),this._pushChanges(e)}catch(e){return this._log.warn(`pushChanges(${RL[this._fsm.current]}): failed sending start message: `,e),Tr.t$(e)}}));return $M.isReset(e)&&this._fsm.is(5,4)?(this._log.debug(`pushChanges(${RL[this._fsm.current]}): got reset while active session, starting new session`),t):(n=()=>this._pushChanges(e),()=>Promise.resolve(n()));var n}_pushChanges(e){if(!this._canSend())return this._log.debug("pushChanges: cannot send, rejecting changes",e.kind),Tr.t$(new GF("Cannot accepts changes as WS connection is down"));const t=e=>{this._asyncChecksManager.stage(this._changesQueue.localRevision);const t=this._changesQueue.pushChanges(e);return this._textSize=e.prevLen+e.length,this._trySend(this._fsm.current),Tr.F2(kr.G(t))};return $M.isDelta(e)?this._fsm.is(3)?Tr.t$(new BF("Capi is waiting for reset change but got a delta, dropping change")):t(e):$M.isReset(e)?t($M.delta(e.delta)):(this._changesQueue.isEmpty||this.ping(),Tr.F2(kr.YP))}_sendInbandCommand(e,t){return this._sendLazyInbandCommand((()=>e),t)}_sendTrackedInbandCommand(e,t){return this._sendLazyTrackedInbandCommand((()=>e),t)}_sendLazyInbandCommand(e,t){return(0,Ir.zG)(this._sendLazyTrackedInbandCommand(e,t),Nr.UI((0,no.ei)("result")))}_sendLazyTrackedInbandCommand(e,t){return()=>{const n=e();if(this._log.trace(`_sendInbandCommand(${RL[this._fsm.current]}): `,n.action),this._canSend()){const e=this._changesQueue.isEmpty,r=this._changesQueue.pushCommand(n),i=t.watchRequest(r);return e?(this._log.trace("_sendInbandCommand: Q.isEmpty, sending command immediately"),this._send()):(this._log.trace("_sendInbandCommand: Q.notEmpty, delaying sending command"),this._trySend(this._fsm.current)),i.then(Tr.UI((e=>({result:e,queuedId:r}))))}return this._log.debug("_sendInbandCommand: cannot send, rejecting command",n.action),Promise.resolve(Tr.t$(new GF("Cannot send commands as WS connection is down")))}}_processSubmitOTMessage(e){if(QF.isChunkedChange(e)){const t=e.chunks.map((e=>({id:e.id,action:"submit_ot_chunk",chunk:e.chunk}))),n=t.splice(0,1)[0],r={chunks:t,submitOt:{id:e.id,action:"submit_ot",rev:e.rev,doc_len:e.change.prevLen,chunked:!0}};return this._waitForOtChunkAck(n,r)(),n}return{id:e.id,action:"submit_ot",rev:e.rev,doc_len:e.change.prevLen,deltas:[e.change.delta],deltasString:e.deltasString,chunked:!1}}_sendMessage(e){this._log.isEnabled(ou.zW.i.TRACE)&&this._log.trace(`Sending >>>> ${e.action}, id: ${e.id}`),this._handler.onMessageSent({kind:"message_sent",message:e}),"ping"===e.action&&this._pingsMap.set(e.id,self.performance.now());return(0,ll.CE)(this._conn,"_sendMessage should never be called without a connection").send(e).catch((e=>this._log.debug("fail on send",e))).then((()=>{var e;if(void 0!==this._reconnectInfo){const t=null!=(e=this._reconnectInfo.messagesSent)?e:0;this._setReconnectInfo(OL(TL({},this._reconnectInfo),{messagesSent:t+1}))}}))}get _checkedTextSize(){return this._changesQueue.stagedAmount}_clear(e){this._log.debug("clearing message queue, reason: "+e),this._pingsMap.clear(),this._changesQueue.isEmpty||this._log.warn("clean queue with messages",{reason:e,queue:this._changesQueue.toJSON()}),this._changesQueue.clear(e),this._externalCommandsRequester.clear(e),this._asyncChecksManager.reset(),this._resetTimer()}_handleError(e){return PL(this,null,(function*(){switch(e.error){case Hj.jK.CANNOT_GET_TEXT_STATS:this._statsRequester.onError(e.id,new Error("Server Error"));break;case Hj.jK.CANNOT_FIND_SYNONYM:this._synonymsRequester.onError(e.id,new Error("can not find synonym"));break;case Hj.jK.RUNTIME_ERROR:this._fsm.is(4)?(this._log.error("Got runtime_error for submit_ot",{message:e}),this._clear("runtime_error on submit_ot")):(this._handler.onError(TL({kind:"error"},e)),this._clear("runtime_error"));break;default:this._handler.onError(TL({kind:"error"},e)),this._log.error("Error",{message:e})}}))}}class jL{constructor(){this._wasChecked={plagiarism:!1,ai_detector:!1,writing_expert_check:!1,ai_studio:!1,audience_adapt:!1},this._toggleChecksRequests=new Map,this.reset()}getCheckState(e){return this._pendingRevision>this._finishedRevisions[e]?this._wasChecked[e]?"checking":"full":"idle"}getState(){return{plagiarism:this.getCheckState("plagiarism"),ai_detector:this.getCheckState("ai_detector"),writing_expert_check:this.getCheckState("writing_expert_check"),ai_studio:this.getCheckState("ai_studio"),audience_adapt:this.getCheckState("audience_adapt")}}stage(e){this._pendingRevision=Math.max(this._pendingRevision,e)}finish(e){this._finishedRevisions[e.check]=Math.max(this._finishedRevisions[e.check],e.rev),this._wasChecked[e.check]=!0}reset(){this._pendingRevision=0,this._finishedRevisions={plagiarism:-1,ai_detector:-1,writing_expert_check:-1,ai_studio:-1,audience_adapt:-1}}resetCheck(e){this._finishedRevisions[e]=-1}pushChecksByMessageId(e,t){this._toggleChecksRequests.set(e,t)}popChecksByMessageId(e){const t=this._toggleChecksRequests.get(e)||{};return this._toggleChecksRequests.delete(e),t}}const FL=(e,t)=>{switch(e.action){case"option":return kr.G({kind:"option_ack"});case"set_context":case"submit_ot":return kr.G({kind:"set_context_ack",revision:e.rev});case"submit_recipients":return kr.G({kind:"submit_recipients_ack"});case"toggle_checks":return kr.G({kind:"toggle_checks_ack",checks:t.popChecksByMessageId(e.id)});case"feedback":return kr.G({kind:"feedback_ack",outcomeScores:e.scores?Bj.v0.OutcomeScores.normalize(e.scores):void 0,scoreStatus:e.scoresStatus});case"published":return kr.G({kind:"published_ack",survey:e.survey});case"submit_survey_result":return kr.G({kind:"submit_survey_result_ack"});case"submit_ot_chunk":case"shorten_it_submit":case"perfstats":case"user_action":case"debug_report":case"update_context_info":return kr.YP;default:return(0,ll.vE)(e)}};var LL,GL,BL;(LL||(LL={})).validate=e=>{const t=e.extra_properties.drilldownTree;return void 0===t?Tr.F2(e):(0,Ir.zG)(e,Tr.DT(Hj.wQ.withTransformJson,(()=>n("no transformJSON"))),Tr.tS((({transformJson:{alternatives:e}})=>(0,Ir.zG)(e,Tr.Yo((()=>n("no alternatives")))))),Tr.tS((({alternatives:i})=>t.length>0&&r(i)(t)?Tr.F2(e):Tr.t$(n("incomplete tree")))));function n(t){return new Error(`Incorrect drilldownTree: ${JSON.stringify(e.extra_properties.drilldownTree)} - ${t}`)}function r(e){return t=>t.every((([t,n])=>void 0!==e[t]&&(!!Hj.H5.isLeaf(n)||r(e)(n))))}};class zL{constructor(e,t,n,r=q.create("StaticCAPIConnectionManager")){this._events=e,this._capi=t,this._capiConnection=n,this._log=r,this._subs=new Gl.w0,this._checkConnected=(0,Ir.zG)((()=>this._capiConnection.isIdle||!this._capiConnection.wasStarted?(this._log.debug(this._capiConnection.isIdle?"received new command while CAPI connection is idle, connecting":"received first command, triggering new connection"),this._capiConnection.connect().then((()=>Tr.F2(void 0))).catch((e=>(this._log.warn("failed to connect to CAPI",e),Tr.t$(new Error(`failed to connect to CAPI: ${e}`)))))):Promise.resolve(Tr.F2(void 0))),Nr.tS((()=>{switch(this._capi.status){case"starting":return()=>function(e,t){var n="object"==typeof t;return new Promise((function(r,i){var o,s=!1;e.subscribe({next:function(e){o=e,s=!0},error:i,complete:function(){s?r(o):n?r(t.defaultValue):i(new ux.K)}})}))}(this.statusObs.pipe(Ki.h((e=>"ready"===e)),Pr.q(1),cj.h(Tr.F2(void 0))));case"ready":return Nr.of(void 0);case"disconnected":case"closed":return this._log.warn(`connection is ${this._capi.status}`),Nr.t$(new Error(`connection is ${this._capi.status}`));default:(0,ll.L0)(this._capi.status)}}))),this.ping=(0,Ir.zG)(this._checkConnected,Nr.tS((()=>this._capi.ping))),this.close=e=>this._capi.close(e),this.setSessionOption=e=>(0,Ir.zG)(this._checkConnected,Nr.tS((()=>this._capi.setSessionOption(e)))),this.sendFeedback=e=>(0,Ir.zG)(this._checkConnected,Nr.tS((()=>this._capi.sendFeedback(e)))),this.updateContextInfo=e=>(0,Ir.zG)(this._checkConnected,Nr.tS((()=>this._capi.updateContextInfo({...e,delta:new _u.i(e.delta)}))))}get statusObs(){return this._events.pipe(Gr.U((()=>this._capi.status)),lj.O(this._capi.status),ea.x())}get status(){return this._capi.status}dispose(){this._subs.unsubscribe()}}!function(e){e.create=function(){return h.iy.create()}}(GL||(GL={})),function(e){e.create=function(e,t){const n=new Er.x,r=function(e,t,n){const r=e=>new(WebSocket||self.MozWebSocket)(e),i=new aj(n,[]);return new DF(e?i.sanitizeStaticWS(Rj.create(r),NL):Rj.create(r),t)}(e.useDlp,t,e.dlpConfiguration),i=new RF({client:{type:e.clientName,sub:e.clientSubType},extDomain:e.domain,clientSupports:e.supportedFeatures,handler:Lj.getHandler((e=>n.next(e))),clientVersion:e.clientVersion,startSessionOptions:e.startSessionOptions||{}},(t=>t.connect(e.capiUrl)),r),o=new zL(n,i.client,i);return{client:o,getStatus:()=>o.status,getStatusObs:()=>o.statusObs,getEventsObs:()=>n,connect:()=>{i.connect()},dispose:()=>{n.complete(),n.unsubscribe(),o.close("Disposed")}}}}(BL||(BL={}));class VL{constructor(e,t=q.create("StaticCAPIRpcApi")){this._factory=e,this._log=t,this._instances=new Map,this.api={sendFeedback:this._callClientMethod("sendFeedback",((e,t)=>e.sendFeedback(...t))),close:this._callClientMethod("close",((e,t)=>e.close(...t))),setSessionOption:this._callClientMethod("setSessionOption",((e,t)=>e.setSessionOption(...t))),ping:this._callClientMethod("ping",(e=>e.ping())),updateContextInfo:this._callClientMethod("updateContextInfo",((e,t)=>e.updateContextInfo(...t))),getStatus:this._callWrapperMethod("getStatus",(e=>e.getStatus())),getStatusObs:this._callWrapperMethod("getStatusObs",(e=>e.getStatusObs())),getEventsObs:this._callWrapperMethod("getEventsObs",(e=>e.getEventsObs())),connect:this._callWrapperMethod("connect",(e=>e.connect()))}}_callClientMethod(e,t){return({token:n,args:r})=>{const i=this._instances.get(n);if(!i)throw new Error(`no instance for ${n}`);try{return t(i.client,r)}catch(t){throw new Error(`method ${e} of instance ${n} threw an error: ${t.message?t.message:t}`)}}}_callWrapperMethod(e,t){return({token:n,args:r})=>{const i=this._instances.get(n);if(!i)throw new Error(`no instance for ${n}`);try{return t(i,r)}catch(t){throw new Error(`method ${e} of instance ${n} threw an error: ${t.message?t.message:t}`)}}}startSession(e){const t=GL.create();return this._instances.set(t,this._factory(e)),t}stopSession(e){const t=this._instances.get(e);t?(t.dispose(),this._instances.delete(e)):this._log.warn(`no instance for ${e}, ignoring`)}dispose(){for(const e of this._instances.keys())try{this.stopSession(e)}catch(t){this._log.error(`failed trying to dispose instance ${e}`,t)}this._instances.clear()}}class qL{constructor(e,t,n,r,i){this._extensionApi=e,this._oauthClient=t,this._logger=n,this._telemetry=r,this._gnar=i}get redirectUri(){var e;return(null===(e=this._extensionApi.identity)||void 0===e?void 0:e.getRedirectURL)?this._extensionApi.identity.getRedirectURL().replace(/\/$/,""):(this._logger.debug("getRedirectURL not available"),Me()?"https://www.grammarly.com/safariWebExt/auth/callback":"")}async getAuthUrl(e,t,n){const r={...e?{}:{prompt:"none"},...t?{screen_hint:"signup"}:{},...n};return await this._oauthClient.createAuthorizationRequestUrl(this.redirectUri,["grammarly.capi.all"],r)}handleRedirectCallback(e=self.location.href){const t=new URL(e),n=t.searchParams.get("error"),r=t.searchParams.get("error_description");if(n)throw new Error(null!=r?r:n);const i=t.searchParams.get("code"),o=t.searchParams.get("state");if(!i||!o)throw new Error("Missing code or state");return this._oauthClient.handleRedirect(i,o)}reportCodeExchangeError(e){this._telemetry.sendFemetricsRate("authClientMigration.authorizationCodeExchangeFailed",{errorName:e.name,errorMessage:e.message,httpStatusCode:e instanceof qn?e.status:-1}),this._gnar.authzAuthorizationCodeExchange("fail",e.message,e instanceof qn?e.status:-1),this._logger.error("Error exchanging auth code",e)}}class HL extends qL{constructor(e,t,n,r,i){super(e,t,n,r,i),this._authTabState={status:"none"}}async launchAuthFlow(e,t,n){try{if("creating"===this._authTabState.status||"cleaning-up"===this._authTabState.status)return void this._logger.debug("Auth flow is in progress, skipping");"active"===this._authTabState.status&&(this._logger.debug("Replacing existing active auth tab with new one"),await this.cleanupAuthTab()),this._authTabState={status:"creating"};const r=await this.getAuthUrl(!0,e,n);return this._logger.debug("Launching interactive auth flow",{authUrl:r,isSignUp:e,extraParams:n}),void this.launchInteractiveAuthFlow(r,e,(e=>{var n,r;null==t||t(e),!e||je()||Me()||null===(r=(n=this._extensionApi.tabs).create)||void 0===r||r.call(n,{url:qe().signupSuccess})}))}catch(e){return void this.reportCodeExchangeError(e)}finally{this.cleanupAuthTab()}}async launchInteractiveAuthFlow(e,t=!1,n){this._logger.info("Launching tab auth flow"),await this.cleanupAuthTab();try{const r=await this.createAuthTab(e),i=this.setupTabListeners(r,t,n);this._authTabState={status:"active",id:r,openTimestamp:Date.now(),...i}}catch(e){this._logger.error(`Error starting interactive auth flow: ${e}`)}}async createAuthTab(e){var t,n;const r=await(null===(n=(t=this._extensionApi.tabs).create)||void 0===n?void 0:n.call(t,{url:e}));if(!(null==r?void 0:r.id))throw new Error("Failed to create tab for auth flow");return this._logger.debug(`Created auth tab with ID: ${r.id}`),r.id}setupTabListeners(e,t,n){var r,i;const o=this.createTabUpdateListener(e,this.redirectUri,n),s=this.createTabCloseListener(e,t);return null===(r=this._extensionApi.tabs.onUpdated)||void 0===r||r.addListener(o),null===(i=this._extensionApi.tabs.onRemoved)||void 0===i||i.addListener(s),{updateListener:o,tabCloseListener:s}}createTabUpdateListener(e,t,n){return(r,i)=>{if(r===e&&i.url&&(this._logger.debug(`Tab URL updated: ${i.url}`),i.url.startsWith(t))){if(this._logger.info("Detected redirect URL, processing auth response"),"cleaning-up"===this._authTabState.status)return;this.cleanupAuthTab(),this.handleRedirectCallback(i.url).then((()=>null==n?void 0:n(this.isSignUpAction(i.url)))).catch((()=>{}))}}}createTabCloseListener(e,t){return n=>{if(n===e){if(this._logger.debug("Auth tab was closed manually"),"cleaning-up"===this._authTabState.status)return;"active"===this._authTabState.status&&this._gnar.logInFormClose(t,Math.round(Date.now()-this._authTabState.openTimestamp)),this.cleanupAuthTab(!0)}}}async cleanupAuthTab(e=!1){var t,n;"none"!==this._authTabState.status&&("creating"!==this._authTabState.status?("active"===this._authTabState.status&&(this._authTabState={...this._authTabState,status:"cleaning-up"}),this._logger.debug("Cleaning up auth tab"),null===(t=this._extensionApi.tabs.onUpdated)||void 0===t||t.removeListener(this._authTabState.updateListener),null===(n=this._extensionApi.tabs.onRemoved)||void 0===n||n.removeListener(this._authTabState.tabCloseListener),e||await this.closeAuthTab(this._authTabState.id),this._authTabState={status:"none"}):this._authTabState={status:"none"})}async closeAuthTab(e){var t,n;try{await(null===(n=(t=this._extensionApi.tabs).remove)||void 0===n?void 0:n.call(t,e)),this._logger.debug("Closed auth tab")}catch(e){this._logger.error(`Failed to close auth tab: ${e}`)}}get currentAuthTabId(){return"active"===this._authTabState.status?this._authTabState.id:void 0}isSignUpAction(e){return"signup"===new URL(e).searchParams.get("action")}}var WL,$L,XL,KL;function YL(e){return $(Object.entries(e).map((([t,n])=>[t,(t,...r)=>n.apply(e,r)])))}!function(e){let t;!function(e){e.disableOnTab="disableOnTab",e.reloadTab="reloadTab",e.showOnboardingDialog="showOnboardingDialog",e.hideGdocsSigninPopupMessage="hideGdocsSigninPopupMessage",e.sendCsLogsToPopup="sendCsLogsToPopup",e.downloadDebugReportsFromCS="downloadDebugReportsFromCS"}(t=e.Kind||(e.Kind={}))}(WL||(WL={})),function(e){let t;!function(e){e.sendCsLogs="sendCsLogs",e.brandingChanged="brandingChanged"}(t=e.Kind||(e.Kind={}))}($L||($L={})),function(e){e.requestGrantPermissionAndReloadExtOnAccept=function(e,t=ZJ()){const n=Kt();return Il.request(e).then((e=>{e?(n.connector.permissionPromptAccepted("settingPopup"),t.message.sendToFocusedTab({kind:WL.Kind.reloadTab}).then((()=>t.browserApi.reload()))):n.connector.permissionPromptDenied("settingPopup")})).catch((e=>n.connector.permissionPromptFailed("settingPopup",e.message)))}}(XL||(XL={})),function(e){e.trackGnar=function(e,t){Nc[e](...t)},e.trackFire=function(e,t){Mc(e,...t)},e.trackProductMetric=function(e){ZJ().productMetricsClient.send(...e)},e.trackCall=function(e,t){ZJ().telemetryCallProvider.call.apply(ZJ().telemetryCallProvider,[e,...t])}}(KL||(KL={}));var ZL,JL;!function(e){e.rpcLegacyMessageName="cs-to-bg-rpc-1557421403805"}(ZL||(ZL={}));class QL{constructor(e,t,n,r,i,o,s,a,c,l,u,d,h,p,g,f,m,b,y,_,v,w,S,k,I,C,E,A,x,O,P,R,D=q.create("CsToBgRpcApiImpl")){this._persistentStore=e,this._storeActions=t,this._extensionApi=n,this._experimentClient=r,this._autocorrectApi=i,this._apiService=o,this._snippetsService=s,this._knowledgeHubBGService=a,this._touchTypistBgService=c,this._g2BgSettingsService=l,this._bgTreatmentService=u,this._bgGatesService=d,this._pageConfig=h,this._settingsActions=p,this._cookiesHelper=g,this._sideEffectEmitter=f,this._dapiService=m,this._dictionaryService=b,this._iterableService=y,this._institutionAdminService=_,this._cheetahSettingsService=v,this._dataSharingService=w,this._humanWritingReportBackendService=S,this._humanWritingReportSettingsService=k,this._humanWritingReportEncryptionKeysService=I,this._humanWritingReportStorageService=C,this._translateService=E,this._specialOfferService=A,this._uphookHubService=x,this._durationMetricStorage=O,this._authFlowClient=P,this._agentDirectoryService=R,this._log=D,this.publicApi={...YL({log:e=>{this._log.debug(` log via CS-BG rpc: ${e}`)},getTime:()=>Date.now(),logout:()=>{this._sideEffectEmitter.logoutUser()},openDataControl:()=>{this._extensionApi.openDataControl&&this._extensionApi.openDataControl()},acceptDataControl:async()=>{await mE.initialEnable(this._storeActions,this._cookiesHelper,this._extensionApi,this._persistentStore)},uninstallExtension:()=>{this._extensionApi.management.uninstallSelf()},getDefinition:this._dictionaryService.getDefinition,iterableGetInAppMessages:this._iterableService.getInAppMessages,iterableTrackInAppOpen:this._iterableService.trackInAppOpen,iterableTrackInAppClose:this._iterableService.trackInAppClose,iterableTrackInAppConsume:this._iterableService.trackInAppConsume,iterableTrackInAppClick:this._iterableService.trackInAppClick,iterableUserUpdate:this._iterableService.userUpdate,getEligibleInvitees:ae(this._institutionAdminService).getEligibleInvitees,clearEligibleInviteesCache:ae(this._institutionAdminService).clearEligibleInviteesCache,translateCheckAvailability:ae(this._translateService).checkAvailability,autocorrectStartSession:()=>this._autocorrectApi.startSession(),autocorrectCloseSession:ae(this._autocorrectApi).closeSession,autocorrectCheck:this._autocorrectApi.api.check,autocorrectOnCorrectionRejected:this._autocorrectApi.api.onCorrectionRejected,autocorrectOnCorrectionAccepted:this._autocorrectApi.api.onCorrectionAccepted,addSnippet:ae(this._snippetsService).addSnippet,getSnippets:ae(this._snippetsService).getSnippets,getRecentAccount:ae(this._apiService).getRecentAccount,getKnowledgeHubSettings:ae(this._knowledgeHubBGService).getKnowledgeHubSettings,setKnowledgeHubSettings:ae(this._knowledgeHubBGService).setKnowledgeHubSettings,fetchFileAsByteArray:ae(this._touchTypistBgService).fetchFileAsByteArray,markG2VBarUsed:ae(this._g2BgSettingsService).markVBarUsed,setG2OnboardingAcceptCount:ae(this._g2BgSettingsService).setOnboardingAcceptCount,setG2OnboardingCompletedStep:ae(this._g2BgSettingsService).setOnboardingCompletedStep,setG2OnboardingDismissed:ae(this._g2BgSettingsService).setOnboardingDismissed,setG2OnboardingPulsatingSeen:ae(this._g2BgSettingsService).setOnboardingPulsatingSeen,setG2OnboardingRevertPresentedCount:ae(this._g2BgSettingsService).setOnboardingRevertPresentedCount,setVBarTypeDeactivated:ae(this._g2BgSettingsService).setVBarTypeDeactivated,setVBarTypesActivated:ae(this._g2BgSettingsService).setVBarTypesActivated,recordG2TranslationLanguages:ae(this._g2BgSettingsService).recordTranslationLanguages,markG2TranslateOnboardingAsSeen:ae(this._g2BgSettingsService).markTranslateOnboardingAsSeen,setG2MultilingualOnboardingShowsCount:ae(this._g2BgSettingsService).setMultilingualOnboardingShowsCount,fetchCheetahStatus:this._cheetahSettingsService.fetchStatus,setCheetahStatus:this._cheetahSettingsService.setStatus,generateHumanWritingReport:ae(this._humanWritingReportBackendService).generateReport,getHumanWritingReportSettings:ae(this._humanWritingReportBackendService).getSettings,hwrSetEnabled:ae(this._humanWritingReportSettingsService).setEnabled,hwrStartTracking:ae(this._humanWritingReportSettingsService).startTracking,hwrStopTracking:ae(this._humanWritingReportSettingsService).stopTracking,hwrStartTrackingDomain:ae(this._humanWritingReportSettingsService).startTrackingDomain,hwrStopTrackingDomain:ae(this._humanWritingReportSettingsService).stopTrackingDomain,hwrOptOut:ae(this._humanWritingReportSettingsService).optOut,hwrOptIn:ae(this._humanWritingReportSettingsService).optIn,hwrOptInPopupShown:ae(this._humanWritingReportSettingsService).optInPopupShown,hwrDenyClipboardAccess:ae(this._humanWritingReportSettingsService).denyClipboardAccess,hwrAllowClipboardAccess:ae(this._humanWritingReportSettingsService).allowClipboardAccess,hwrGetEncryptionKey:ae(this._humanWritingReportEncryptionKeysService).getEncryptionKey,hwrCreateEncryptionKeys:ae(this._humanWritingReportEncryptionKeysService).createEncryptionKeys,hwrRetrieveReport:ae(this._humanWritingReportStorageService).retrieve,hwrStoreReport:ae(this._humanWritingReportStorageService).store,hwrDeleteReport:ae(this._humanWritingReportStorageService).delete,getExperimentTreatment:this._bgTreatmentService.getTreatment,logExperimentTreatment:this._bgTreatmentService.logTreatment,getGateTreatment:this._bgGatesService.getTreatment,refetchExperimentTreatment:this._bgTreatmentService.refetchTreatment,getPageConfig:(e,t)=>{const n=this._pageConfig.get(e,t);return this._pageConfig.invalidateIfNeeded(),n},refreshUser:(e,t)=>{this._sideEffectEmitter.refreshUser(e,t)},enableClickToRunOnAllWebsites:async()=>await this._settingsActions.enableClickToRunOnAllSites(),setDAPIProp:this._dapiService.setProp,fetchAllDAPIPropsRateLimited:this._dapiService.fetchAllPropsRateLimited,sendToFocusTab:ZJ().message.sendToFocusedTab,getActiveTabZoom:()=>"web-extension"===this._extensionApi.tabs.kind?this._extensionApi.tabs.getActiveTabZoom():1,proxyMessageToTab:(e,t)=>{0},getContainerIdOrUndefined:e=>xc(e,this._experimentClient.isGateEnabled(De.TrackContainerIdFailures)?Ac.withTracking:Ac.legacy),trackGnar:KL.trackGnar,trackProductMetric:KL.trackProductMetric,trackFire:KL.trackFire,trackCall:KL.trackCall,isGateEnabled:e=>this._experimentClient.isGateEnabled(De[e]),reload:()=>this._extensionApi.reload(),isPermissionGranted:Il.isGranted,requestGrantPermission:Il.request,requestGrantPermissionAndReloadExtOnAccept:XL.requestGrantPermissionAndReloadExtOnAccept,getUserDataSharingSettings:this._dataSharingService.getSettings,getUserDataSharingSettingsRateLimited:this._dataSharingService.getSettingsRateLimited,agentDirectoryFetchAgents:ae(this._agentDirectoryService).fetchAgents,agentDirectoryListAgentInstances:ae(this._agentDirectoryService).listAgentInstances,agentDirectoryListAgents:ae(this._agentDirectoryService).listAgents,agentDirectorySearchAgents:ae(this._agentDirectoryService).searchAgents,agentDirectoryCreateAgentInstance:ae(this._agentDirectoryService).createAgentInstance,agentDirectoryCreateDefaultAgentInstances:ae(this._agentDirectoryService).createDefaultAgentInstances,agentDirectoryEditAgentInstance:ae(this._agentDirectoryService).editAgentInstance,agentDirectoryAddAgent:ae(this._agentDirectoryService).addAgent,agentDirectoryRemoveAgentInstance:ae(this._agentDirectoryService).removeAgentInstance,agentDirectorySaveInstalledAgentsOrder:ae(this._agentDirectoryService).saveInstalledAgentsOrder,agentDirectoryGetUserAccountInfo:ae(this._agentDirectoryService).getUserAccountInfo,agentDirectoryGetConnectionsInfoForUser:ae(this._agentDirectoryService).getConnectionsInfoForUser,agentDirectoryGetBrainTenantId:ae(this._agentDirectoryService).getBrainTenantId,agentDirectoryGetExternalPackMetadata:ae(this._agentDirectoryService).getExternalPackMetadata,agentDirectoryGetAgentPackListing:ae(this._agentDirectoryService).getAgentPackListing,agentDirectoryGetAgentInstallationContext:ae(this._agentDirectoryService).getAgentInstallationContext,agentDirectoryListIngestions:ae(this._agentDirectoryService).listIngestions,getSystemInfo:()=>T.create(this._extensionApi.getBrowserInfo(self.navigator.userAgent))}),disableOnFocusTab:async(e,t)=>{const n=await this._extensionApi.tabs.getActiveTabUrl(),r=Ct(null!=n?n:t);this._storeActions.settings.disableOnTab(r),ZJ().message.sendToFocusedTab({kind:WL.Kind.disableOnTab})},launchAuthFlow:(e,t,n)=>{this._storeActions.auth.beginAuth(),this._authFlowClient.launchAuthFlow(t,(e=>this._sideEffectEmitter.refreshUser("oauth",e)),n)},openSuperhumanGoWelcomePage:async()=>{try{await GE(ZJ().browserApi.tabs)}catch(e){this._log.warn("Failed to open Superhuman Go welcome page from RPC",e)}},isTypingTrackingEnabled:()=>Ew.isTypingEnabled(this._experimentClient),addTypingDurationMetric:(e,...t)=>this._durationMetricStorage.addTypingDuration(...t),logClient:(e,t)=>{const{tabId:n,frameId:r,clientId:i}=jl.decodeClientId(e.clientId);this._log.debug(` log via CS-BG rpc [${n}:${String(r)}:${i}]: ${t}`)},loadContentScript:e=>{const{frameId:t,tabId:n}=jl.decodeClientId(e.clientId);if("web-extension"===this._extensionApi.tabs.kind){const e=[IE.STYLES,IE.MAIN];for(const r of e)this._extensionApi.tabs.executeScript(r,Number(n),t)}},enableHistoryLoggerUntil:async(e,t)=>await this._settingsActions.enableHistoryLoggerUntil(t),disableHistoryLogger:async()=>await this._settingsActions.disableHistoryLogger(),enableAdvancedHistoryLoggerUntil:async(e,t)=>await this._settingsActions.enableAdvancedHistoryLoggerUntil(t),disableAdvancedHistoryLogger:async()=>await this._settingsActions.disableAdvancedHistoryLogger(),toggleDebugMenu:async(e,t)=>await this._settingsActions.toggleDebugMenu(t),getBGLogs:()=>ZJ().historyLogsService.getLogs(),checkAuthPermissions:async()=>{var e;const{dynamicConfig:t}=await this._persistentStore.get(["dynamicConfig"]);return!0===(null==t?void 0:t.requireAuthCookieAccess)?null===(e=this._extensionApi.permissions)||void 0===e?void 0:e.contains(vc()):void 0},requestAuthPermissions:async()=>{var e;const{dynamicConfig:t}=await this._persistentStore.get(["dynamicConfig"]);return!0===(null==t?void 0:t.requireAuthCookieAccess)?null===(e=this._extensionApi.permissions)||void 0===e?void 0:e.request(vc()):void 0},proxyMessageToDevtools:(e,t)=>{const{frameId:n,tabId:r}=jl.decodeClientId(e.clientId)},getTabId:e=>jl.decodeClientId(e.clientId).tabId,openSidePanel:e=>this._extensionApi.openSidePanel(e.clientId),isSidePanelSupported:()=>this._extensionApi.isSidePanelSupported(),openPopupSettings:()=>this._extensionApi.openPopup(),isCurrentTabFocused:async e=>{const{tabId:t}=jl.decodeClientId(e.clientId),n="web-extension"===this._extensionApi.tabs.kind?await this._extensionApi.tabs.getActiveTab():void 0;return t===String(null==n?void 0:n.id)},openSubscriptionPage:async(e,t)=>{const{user:n}=await this._persistentStore.get(["user"]);this._extensionApi.openSubscriptionPage({...t,isAnonymous:!n||qS.getType(n)===VS.anonymous})},sendToPopup:(e,t)=>{const{frameId:n,tabId:r}=jl.decodeClientId(e.clientId);ZJ().message.sendTo(js,t.kind,{caller:{frameId:n,tabId:r},...t})},getUserGoExperience:async()=>{var e;const{user:t}=await this._persistentStore.get(["user"]);return null!==(e=null==t?void 0:t.go_experience)&&void 0!==e?e:null},getAlwaysAvailableAssistantSettings:async()=>{var e,t;const{extensionSettings:n}=await this._persistentStore.get(["extensionSettings"]);return null!==(t=null===(e=null==n?void 0:n.common)||void 0===e?void 0:e.alwaysAvailableAssistantSettings)&&void 0!==t?t:null},getSpecialOffer:(e,t)=>this._specialOfferService.getSpecialOffer(t),getUphookHubConfiguration:(e,t)=>this._uphookHubService.getUphookHubConfiguration(t),getUphookHubConfigurationsFromSlots:(e,t)=>this._uphookHubService.getUphookHubConfigurationsFromSlots(t),trackUphookHubConfiguration:(e,t,n)=>this._uphookHubService.trackUphookHubConfiguration(t,n),getAccessToken:async()=>await this._apiService.oauthClient.getAccessTokenOrRenew(),getCSRFToken:async()=>await this._apiService.withoutAccessToken.csrfToken()}}}!function(e){e.rpcLegacyMessageName="cs-to-bg-static-capi-rpc-1668544923207",e.rpcLegacyObservableName="cs-to-bg-static-capi-observable-rpc-1668544923207"}(JL||(JL={}));var eG,tG=__webpack_require__(97225),nG=__webpack_require__(18827);function rG(e){return"tunnel"===e.tag}function iG(e){return"tunnel"!==e.tag}function oG(e){return iG(e.data)}function sG(e){return t=>e(t.data)}!function(e){e.isSubscribe=e=>"action"in e.data&&"subscribe"===e.data.action,e.isUnsubscribe=e=>"action"in e.data&&"unsubscribe"===e.data.action,e.isDispose=e=>"action"in e.data&&"dispose"===e.data.action,e.isPong=e=>"pong"in e.data,e.isPing=e=>"ping"in e.data,e.isObservableResult=e=>"subscribableId"in e}(eG||(eG={}));const aG=Symbol();function cG(e){return Boolean(e)&&e._tag===aG}var lG;function uG(e){return e instanceof bi.y?e:new bi.y((t=>e.subscribe(t)))}!function(e){e.measure=e=>t=>new bi.y((n=>t.subscribe((t=>e((()=>n.next(t)))),(e=>n.error(e)),(()=>n.complete())))),e.using=(e,t)=>function(e,t){return new bi.y((function(n){var r=e(),i=t(r);return(i?(0,Br.Xf)(i):Mr.E).subscribe(n),function(){r&&r.unsubscribe()}}))}(e,t),e.doNothing=e=>e}(lG||(lG={}));class dG{constructor(e,t,n=q.create("GenericObservableRpcClient"),r){this._transport=e,this._observableTransport=t,this._log=n,this._serverId=r,this._calls=new Map,this._subscribeRelatedCalls=new Map,this._observables=new Map,this._subscribers=new Map,this._transportSubscription=uG(this._transport.inbound).pipe((0,Ki.h)(iG)).subscribe((e=>{this._processResponse(e)})),this._observableTransportSubscription=uG(this._observableTransport.inbound).pipe((0,Ki.h)(iG)).subscribe((e=>{this._processObservableMessage(e)})),this.api=new Proxy({},{get:(e,t)=>"then"===t?void 0:(...e)=>this._handleCall(t,e)})}_processResponse(e){const t=this._calls.get(e.id);if(t)try{if("err"in e)t.reject(e.err);else if(eG.isObservableResult(e))try{const n=new bi.y((t=>this._createSubscribeHandler(e.subscribableId,t)));this._observables.set(e.subscribableId,n),t.resolve(n)}catch(t){this._observables.delete(e.subscribableId)}else t.resolve(this.transformResult(e.res))}finally{this._calls.delete(e.id)}else this._log.warn(`received rpc call response for unregistered call ${e.id}`)}transformResult(e){return e}_processObservableMessage(e){if("subscribed"in e){const t=this._subscribeRelatedCalls.get(e.id);if(t)try{t.resolve()}finally{this._subscribeRelatedCalls.delete(e.id)}else this._log.warn(`received rpc call subscribed response for unregistered subscribe call ${e.id}`)}else if("unsubscribed"in e){const t=this._subscribeRelatedCalls.get(e.id);if(t)try{t.resolve()}finally{this._subscribeRelatedCalls.delete(e.id),this._subscribers.delete(e.id)}else this._log.warn(`received rpc call unsubscribed response for unregistered unsubscribe call ${e.id}`)}else if("next"in e)try{const t=this._subscribers.get(e.subscriptionId);t?t.subscriber.next(e.next):this._log.warn(`received observable next message for unregistered subscription ${e.subscriptionId}`)}catch(t){this._subscribers.delete(e.subscriptionId)}else if("complete"in e)try{const t=this._subscribers.get(e.subscriptionId);t?(t.subscriber.complete(),this._subscribers.delete(e.subscriptionId)):this._log.warn(`received observable complete for unregistered subscription ${e.subscriptionId}`)}catch(t){this._subscribers.delete(e.subscriptionId)}else if("err"in e)try{const t=this._subscribers.get(e.subscriptionId);t?t.subscriber.error(e.err):this._log.warn(`received observable error for unregistered subscription  ${e.subscriptionId}`)}finally{this._subscribers.delete(e.subscriptionId)}else if("subErr"in e){const t=this._subscribeRelatedCalls.get(e.id);try{const n=this._subscribers.get(e.id);n?n.subscriber.error(e.subErr):this._log.warn(`received subscription error response for unregistered call ${e.id}`)}finally{t&&(t.reject(e.subErr),this._subscribeRelatedCalls.delete(e.id)),this._observables.delete(e.subscribableId),this._subscribers.delete(e.id)}}else if("ping"in e)try{this._observables.get(e.ping)?this._observableTransport.outbound({pong:e.ping}):this._log.warn(`received ping for unregistered observable ${e.ping}`)}finally{(0,h.EI)()}}_handleCall(e,t){let n=h.iy.create();for(;this._calls.has(n);)n=h.iy.create();const r=Ts.createCompletionSource();this._calls.set(n,r);const i=t.map((e=>cG(e)?e.toJSON():e));return this._transport.outbound({id:n,method:e,args:i,serverId:this._serverId}),r.promise}_createSubscribeHandler(e,t){let n=h.iy.create();for(;this._subscribeRelatedCalls.has(n);)n=h.iy.create();const r=Ts.createCompletionSource();return this._subscribeRelatedCalls.set(n,r),this._observableTransport.outbound({id:n,subscribableId:e,action:"subscribe"}),this._subscribers.set(n,{subscribableId:e,subscriber:t}),()=>{this._handleUnsubscribe(n,e)}}_handleUnsubscribe(e,t){let n=h.iy.create();for(;this._subscribeRelatedCalls.has(n);)n=h.iy.create();const r=Ts.createCompletionSource();return this._subscribeRelatedCalls.set(n,r),this._observableTransport.outbound({id:n,subscriptionId:e,subscribableId:t,action:"unsubscribe"}),this._subscribers.delete(e),r.promise}dispose(){for(const e of this._observables.keys())this._observableTransport.outbound({id:h.iy.create(),subscribableId:e,action:"dispose"});this._observables.clear(),this._transportSubscription.unsubscribe(),this._observableTransportSubscription.unsubscribe(),this._calls.clear(),this._subscribeRelatedCalls.clear()}}function hG(e){return Boolean(e)&&"object"==typeof e&&"rpc-server"===e.tag}class pG extends dG{constructor(){super(...arguments),this._servers=[],this._clients=new Map}createProxy(e){const t=h.iy.create(),n=new vG(gG(this._transport,t),gG(this._observableTransport,t),e,void 0,t);return this._servers.push(n),n}transformResult(e){if(hG(e)){let t=this._clients.get(e.serverId);return t||(t=new pG(fG(this._transport,e.serverId),fG(this._observableTransport,e.serverId),this._log),this._clients.set(e.serverId,t)),t.api}return super.transformResult(e)}dispose(){super.dispose();const e=this._servers;this._servers=[];for(const t of e)t.dispose();const t=this._clients.values();this._clients.clear();for(const e of t)e.dispose()}}function gG(e,t){return{inbound:uG(e.inbound).pipe((0,Ki.h)(rG),(0,Ki.h)((e=>e.serverId===t)),(0,Gr.U)((e=>({clientId:t,data:e.message})))),outbound(n){e.outbound({tag:"tunnel",serverId:t,message:n.data})}}}function fG(e,t){return{inbound:uG(e.inbound).pipe((0,Ki.h)(rG),(0,Ki.h)((e=>e.serverId===t)),(0,Gr.U)((e=>e.message))),outbound(n){e.outbound({tag:"tunnel",serverId:t,message:n})}}}var mG=__webpack_require__(61443);function bG(e){return(n=e)&&(n instanceof bi.y||"object"==typeof n&&"lift"in n&&"subscribe"in n&&yG(n.lift)&&yG(n.subscribe))||function(e){return _G(e)&&(Symbol.observable in e&&yG(e[Symbol.observable])||mG.L in e&&yG(e[mG.L]))}(e)||_G(t=e)&&"then"in t&&yG(null==t?void 0:t.then)||function(e){return"object"==typeof e&&null!==e&&"length"in e}(e)||function(e){return"object"==typeof e&&null!==e&&Symbol.iterator in e}(e)||function(e){return"object"==typeof e&&null!==e&&Symbol.asyncIterator in e}(e)||function(e){return"object"==typeof e&&null!==e&&"getReader"in e}(e)?(0,Lc.D)(e):function(e){return _G(e)&&"subscribe"in e&&yG(null==e?void 0:e.subscribe)}(e)?(0,Lc.D)({[Symbol.observable||mG.L]:()=>e}):(0,ta.of)(e);var t,n}function yG(e){return"function"==typeof e}function _G(e){return null!==e&&"object"==typeof e}class vG{constructor(e,t,n,r=9e5,i){this._transport=e,this._observableTransport=t,this._api=n,this._garbageCollectInterval=r,this._serverId=i,this._tag=aG,this._observablesSubscriptions=new Map,this._observables=new Map,this._observableId2subscriptionsIds=new Map,this._internalSubscriptions=[uG(this._transport.inbound).pipe((0,Ki.h)(oG)).subscribe((e=>{this._processRequest(e)})),uG(this._observableTransport.inbound).pipe((0,Ki.h)(oG)).subscribe((e=>this._processSubscriptionRequest(e))),(0,oo.F)(this._garbageCollectInterval).pipe((0,nG.g)(this._garbageCollectInterval)).subscribe((()=>this._garbageCollect())),(0,oo.F)(this._garbageCollectInterval).pipe((0,nG.g)(this._garbageCollectInterval/2)).subscribe((()=>this._pingClients()))],this._servers=[],this._clients=new Map}async _processRequest(e){try{const t=this._api[e.data.method];if("function"!=typeof t)throw new Error(`invalid method name ${String(e.data.method)}`);{const n={clientId:e.clientId},r=e.data.args.map((t=>hG(t)?this._getClient(e.clientId,t.serverId).api:t));let i=t.apply(this._api,[n,...r]);"function"==typeof i&&(i=i());const o=await i;if(o instanceof bi.y){let t=h.iy.create();for(;this._observables.has(t);)t=h.iy.create();this._observables.set(t,{value:o,touchedAt:Date.now(),id:t}),this._observableId2subscriptionsIds.set(t,new Set),this._transport.outbound({clientId:e.clientId,data:{id:e.data.id,subscribableId:t}})}else if(cG(o)){const t=o.toJSON();this._transport.outbound({clientId:e.clientId,data:{id:e.data.id,res:t}})}else{if(o&&(0,tG.nM)(o))throw o.left;this._transport.outbound({clientId:e.clientId,data:{id:e.data.id,res:o}})}}}catch(t){this._transport.outbound({clientId:e.clientId,data:{id:e.data.id,err:t}})}}_processSubscriptionRequest(e){var t,n;if(eG.isPong(e))this._updateGarbageCollectables(e.data.pong);else if(eG.isSubscribe(e))try{const n=e.data.subscribableId,r=this._observables.get(e.data.subscribableId);if(!r)throw new Error(`invalid observable id ${n}`);{this._observables.set(e.data.subscribableId,{...r,clientId:e.clientId});const i=e.data.id;this._updateGarbageCollectables(n);const o=r.value.subscribe((t=>{this._observableTransport.outbound({clientId:e.clientId,data:{subscriptionId:e.data.id,next:t}})}),(t=>{this._observableTransport.outbound({clientId:e.clientId,data:{subscriptionId:e.data.id,err:{message:t}}}),o.unsubscribe(),this._observablesSubscriptions.delete(e.data.id)}),(()=>{this._observableTransport.outbound({clientId:e.clientId,data:{subscriptionId:e.data.id,complete:!0}}),o.unsubscribe(),this._observablesSubscriptions.delete(e.data.id)}));if(this._observablesSubscriptions.set(i,o),!this._observableId2subscriptionsIds.has(n))throw new Error("something wrong, Observable to Subscription map is broken");null===(t=this._observableId2subscriptionsIds.get(n))||void 0===t||t.add(i),this._observableTransport.outbound({clientId:e.clientId,data:{id:e.data.id,subscribableId:e.data.subscribableId,subscribed:!0}})}}catch(t){this._observableTransport.outbound({clientId:e.clientId,data:{id:e.data.id,subscribableId:e.data.subscribableId,subErr:t}})}else if(eG.isUnsubscribe(e))try{const t=e.data.subscriptionId,r=this._observablesSubscriptions.get(t);if(r){if(r.unsubscribe(),this._observableTransport.outbound({clientId:e.clientId,data:{id:e.data.id,subscribableId:e.data.subscribableId,unsubscribed:!0}}),this._observablesSubscriptions.delete(t),!this._observableId2subscriptionsIds.has(e.data.subscribableId))throw new Error("something wrong, Observable to Subscription map is broken");null===(n=this._observableId2subscriptionsIds.get(e.data.subscribableId))||void 0===n||n.delete(t)}}catch(t){this._observableTransport.outbound({clientId:e.clientId,data:{id:e.data.id,subscribableId:e.data.subscribableId,subErr:t}})}else eG.isDispose(e)&&this._disposeObservable(e.data.subscribableId)}_garbageCollect(){const e=Date.now(),t=[];for(const n of this._observables.values())e-n.touchedAt>this._garbageCollectInterval&&t.push(n.id);t.forEach((e=>{this._disposeObservable(e)}))}_updateGarbageCollectables(e){const t=this._observables.get(e);t&&this._observables.set(e,{...t,touchedAt:Date.now()})}_pingClients(){for(const e of this._observables.values())e.clientId&&this._observableTransport.outbound({clientId:e.clientId,data:{ping:e.id}})}_disposeObservable(e){var t;this._observables.delete(e);const n=this._observableId2subscriptionsIds.get(e);if(n){for(const e of n.values())null===(t=this._observablesSubscriptions.get(e))||void 0===t||t.unsubscribe(),this._observablesSubscriptions.delete(e),n.delete(e);this._observableId2subscriptionsIds.set(e,n)}}_getClient(e,t){const n=e+t;let r=this._clients.get(n);return r||(r=new pG(wG(this._transport,e,t),wG(this._observableTransport,e,t),void 0,t),this._clients.set(n,r)),r}createProxy(e){const t=h.iy.create(),n=new vG(SG(this._transport,t),SG(this._observableTransport,t),e,this._garbageCollectInterval,t);return this._servers.push(n),n}dispose(){this._observables.clear(),this._internalSubscriptions.forEach((e=>e.unsubscribe()));for(const e of this._observablesSubscriptions.values())e.unsubscribe();this._observablesSubscriptions.clear();const e=this._servers;this._servers=[];for(const t of e)t.dispose();const t=this._clients.values();this._clients.clear();for(const e of t)e.dispose()}getObservablesCount(){return this._observables.size}getSubscriptionsCount(){return this._observablesSubscriptions.size}toJSON(){return{tag:"rpc-server",serverId:this._serverId}}}function wG(e,t,n){return{inbound:bG(e.inbound).pipe((0,Ki.h)((e=>e.clientId===t)),(0,Ki.h)(sG(rG)),(0,Gr.U)((e=>e.data)),(0,Ki.h)((e=>e.serverId===n)),(0,Gr.U)((e=>e.message))),outbound(r){e.outbound({clientId:t,data:{tag:"tunnel",serverId:n,message:r}})}}}function SG(e,t){return{inbound:bG(e.inbound).pipe((0,Ki.h)(sG(rG)),(0,Ki.h)((e=>e.data.serverId===t)),(0,Gr.U)((e=>({clientId:e.clientId,data:e.data.message})))),outbound(n){e.outbound({clientId:n.clientId,data:{tag:"tunnel",serverId:t,message:n.data}})}}}class kG{constructor(e,t=q.create("CsToBgStaticCAPIRpcApiImpl")){this._capiApi=e,this._log=t,this.publicApi=YL({log:e=>{this._log.debug(` log via CS-BG-STATIC-CAPI rpc: ${e}`)},startSession:e=>this._capiApi.startSession(e),stopSession:e=>this._capiApi.stopSession(e),sendFeedback:this._capiApi.api.sendFeedback,close:this._capiApi.api.close,setSessionOption:this._capiApi.api.setSessionOption,ping:this._capiApi.api.ping,getStatus:this._capiApi.api.getStatus,getStatusObs:this._capiApi.api.getStatusObs,getEventsObs:this._capiApi.api.getEventsObs,updateContextInfo:this._capiApi.api.updateContextInfo,connect:this._capiApi.api.connect})}}var IG,CG=(e=>(e.institution="institution",e))(CG||{});const EG=class extends Kc.Base{constructor(e,t,n){super(),this._url=e,this._ajaxFactory=t,this._fingerprints=n,this._ajax=this._ajaxFactory({requestExtender:Yc.toHeaderAppender(this._fingerprints)})}static getDefaultUrl(e){return`https://goldengate${e}/snippets/v1/snippets`}getFolders(e,t){const n=gl.get(this._url,`/${e}/${t}/folders`);return this._ajax.json(n)}addFolder(e,t,n){const r=gl.post(this._url,`/${e}/${t}/folders`).json(n);return this._ajax.json(r)}updateFolder(e,t,n,r){const i=gl.put(this._url,`/${e}/${t}/folders/${n}`).json(r);return this._ajax.json(i)}deleteManyFolders(e,t,n){const r=gl.del(this._url,`/${e}/${t}/folders`).queryParam("idsToDelete",n.join(","));return this._ajax.empty(r)}moveSnippets(e,t,n){const r=gl.post(this._url,`/${e}/${t}/folders/move`).json(n);return this._ajax.empty(r)}getSnippets(e,t,n){const r=gl.get(this._url,`/${e}/${t}`);return r.queryParam("showDisabledSnippets",!0===n?"true":"false"),this._ajax.json(r)}getSnippetsAndSettings(e,t){const n=gl.get(this._url,`/${e}/${t}/with-settings`);return this._ajax.json(n)}addSnippet(e,t,n){const r=gl.post(this._url,`/${e}/${t}`).json(n);return this._ajax.json(r)}updateSnippet(e,t,n,r){const i=gl.put(this._url,`/${e}/${t}/${n}`).json(r);return this._ajax.empty(i)}deleteSnippet(e,t,n){const r=gl.del(this._url,`/${e}/${t}/${n}`);return this._ajax.empty(r)}deleteManySnippet(e,t,n){const r=gl.del(this._url,`/${e}/${t}`).json(n);return this._ajax.empty(r)}getSnippetsAsCSV(e,t,n,r){const i=gl.get(this._url,`/${e}/${t}`,"csv").queryParam("hierarchy",n).queryParam("folderId",r);return this._ajax.file(i)}uploadFile(e,t,n,r,i){const o=gl.post(this._url,`/${e}/${t}/csv`).queryParam("hierarchy",null!=r?r:"GLOBAL").multipartFormData("file",n);return"string"==typeof i&&""!==i&&o.queryParam("folderId",i),this._ajax.json(o)}setEnabled(e,t,n){const r=gl.post(this._url,`/${e}/${t}/set-enabled`);return r.queryParam("isEnabled",String(n)),this._ajax.json(r)}isEnabled(e,t){const n=gl.get(this._url,`/${e}/${t}/enabled`);return this._ajax.json(n)}getSnippetsShortcuts(e,t){const n=gl.get(this._url,`/${e}/${t}/user-shortcuts`);return this._ajax.json(n)}updateSnippetsShortcuts(e,t,n){const r=gl.post(this._url,`/${e}/${t}/user-shortcuts`).json(n);return this._ajax.json(r)}};EG.FolderHierarchy=Ur.G0([Ur.i0("GLOBAL"),Ur.i0("PERSONAL"),Ur.i0("USER_GROUPS")]),EG.SaveFolderBodyIOType=Ur.r$({name:Ur.Z_,hierarchy:EG.FolderHierarchy,groupIds:Ur.IX(Ur.pk)}),EG.GroupIOType=Ur.w3({id:Ur.pk,institutionId:Ur.pk,name:Ur.Z_}),EG.FolderIOType=Ur.jV([Ur.w3({id:Ur.Z_,name:Ur.Z_,hierarchy:EG.FolderHierarchy,createdAt:fl.Dy.date(),modifiedAt:fl.Dy.date()}),Ur.r$({groups:Ur.IX(EG.GroupIOType)})]),EG.GetFoldersResponseIOType=Ur.w3({snippetsFolders:Ur.IX(EG.FolderIOType)}),EG.StringInsertIOType=Ur.w3({insert:Ur.Z_}),EG.ImageInsertIOType=Ur.dt({insert:Ur.w3({image:Ur.Z_})}),EG.DropdownOptionIOType=Ur.jV([Ur.w3({value:Ur.Z_,label:Ur.Z_,isDefault:Ur.O7}),Ur.r$({snippetId:Ur.Z_})]),EG.DropdownInsertIOType=Ur.w3({insert:Ur.w3({snippetOption:Ur.w3({placeHolderName:Ur.Z_,multiSelect:Ur.O7,options:Ur.IX(EG.DropdownOptionIOType)})})}),EG.DatePickerInsertIOType=Ur.w3({insert:Ur.w3({datepicker:Ur.jV([Ur.w3({placeHolderName:Ur.Z_}),Ur.r$({dateFormat:Ur.G0([Ur.i0("short"),Ur.i0("full"),Ur.i0("long"),Ur.i0("medium")]),timeFormat:Ur.G0([Ur.i0("short"),Ur.i0("full"),Ur.i0("long"),Ur.i0("medium")])})])})}),EG.TextboxInsertIOType=Ur.w3({insert:Ur.w3({textbox:Ur.w3({placeHolderName:Ur.Z_})})}),EG.CurrentUserIOType=Ur.w3({insert:Ur.w3({currentUser:Ur.w3({type:Ur.G0([Ur.i0("UserEmail"),Ur.i0("UserFirstName"),Ur.i0("UserLastName")])})})}),EG.InsertOperationIOType=Ur.jV([Ur.G0([EG.StringInsertIOType,EG.ImageInsertIOType,EG.DropdownInsertIOType,EG.DatePickerInsertIOType,EG.TextboxInsertIOType,EG.CurrentUserIOType]),Ur.r$({attributes:Ur.IM(Ur.Z_,Ur._4)})]),EG.FormattedTextIOType=Ur.w3({ops:Ur.IX(EG.InsertOperationIOType)}),EG.CreateSnippetIOType=Ur.jV([Ur.w3({name:Ur.Z_,contentDelta:EG.FormattedTextIOType,hierarchy:EG.FolderHierarchy}),Ur.r$({content:Ur.Z_,folderId:Ur.Z_})]),EG.SnippetRuleIOType=Ur.w3({name:Ur.Z_,content:Ur.Z_,contentDelta:EG.FormattedTextIOType,hierarchy:EG.FolderHierarchy,folder:Ur.w3({id:Ur.Z_,name:Ur.Z_}),id:Ur.Z_,enabled:Ur.O7,createdAt:fl.Dy.date(),modifiedAt:fl.Dy.date(),lastUsed:null!=(IG=fl.Dy.date())?IG:null,frequency:Ur.pk,sample:Ur.O7}),EG.FileUploadResultIOType=Ur.w3({uploadSnippetsCount:Ur.pk,errorsToCreateSnippetRequests:Ur.IM(Ur.Z_,Ur.Bk(EG.CreateSnippetIOType))}),EG.MoveSnippetsRequestIOType=Ur.w3({sourceFolderId:Ur.Z_,destinationFolderId:Ur.Z_,snippetIds:Ur.IX(Ur.Z_)}),EG.SettingsType=Ur.w3({resourceId:Ur.pk,enabled:Ur.O7,resourceType:Ur.Z_}),EG.SnippetsShortcutsIOType=Ur.w3({snippetsTrigger:Ur.Z_,createSnippetTrigger:Ur.Z_}),EG.GetSnippetsAndSettingsResponseIOType=Ur.w3({isEnabled:Ur.O7,snippets:Ur.IX(EG.SnippetRuleIOType),userShortcuts:EG.SnippetsShortcutsIOType,isCreationEnabled:Ur.O7});let AG=EG;class xG{constructor(e,t,n,r=q.create("Snippets Service")){this._getUser=n,this._log=r,this._loadingPromise=null,this._api=(0,h.Vo)((()=>new AG(e,t.ajaxFactory,t.fingerprints)))}addSnippet(e){const t=this._getRole();return t?this._api.get().addSnippet(CG.institution,t.externalId,e).catch((e=>(this._log.warn("Snippet creation error",e),null))):(this._log.error("Tried to create a snippet for user with no institution role"),Promise.resolve(null))}async getSnippets(){return this._loadingPromise||(this._loadingPromise=this._loadSnippets(),this._loadingPromise.finally((()=>{this._loadingPromise=null}))),this._loadingPromise}_getRole(){const e=this._getUser();if(e)return qS.getUserRole(e,"INSTITUTION")}_loadSnippets(){const e=this._getRole();return e?this._api.get().getSnippetsAndSettings(CG.institution,e.externalId).catch((e=>(this._log.info("Snippets loading error",e),null))):Promise.resolve({isEnabled:!1,userShortcuts:{snippetsTrigger:"",createSnippetTrigger:""},snippets:[],isCreationEnabled:!1})}}class TG{constructor(e){this._json=e,this.getDefinition=e=>{const t=gl.post(qe().dictionary);for(const[n,r]of Object.entries(e))t.formParam(n,r);return this._json(t)}}}const OG="bg_start_timer";async function PG(e,t,n,r,i,o,s,a,c,l,u,d,h,p,g,f,m,b,y,_,v,w,S,k,I){N().bundleInfo.browser;const C=N();oA.start(OG);const E=e.message;if("background-message-api"!==E.kind)throw new Error(`Unexpected message API kind "${E.kind}"`);const A=await async function(e,t,n,r,i,o,s,a,c,l,u,d,h,p,g,f,m,b,y,_,v,w,S,k,I,C){const E=[],A=new aA,x=Kt(),T=new cx(e),O=new HL(e,d.oauthClient,q.create("InteractiveAuthFlowClient"),x,Nc),P=async()=>"safariIOSWebExtension"===t.bundleInfo.extensionType?new IA:sx.create(T,e,r,i,x),R=()=>new lC(t.appConfig.url.skills,d,h),D=()=>i.view("user").get(),N=new jI(d.ajax.json),U=new mA(d);E.push(((e,t,n,r,i,o,s,a,c,l,u,d,h,p,g,f,m,b,y,_,v,w,S,k,I,C,E,A,x,T,O,P)=>{const R=new QL(e,t,n,r,i,o,s,a,c,l,u,d,h,p,g,f,m,b,y,_,v,w,S,k,I,C,E,A,x,T,O,P);return new Fl(new jl(ZL.rpcLegacyMessageName,ZJ().message),R.publicApi)})(i,o,e,h,new lx(P),d,new xG(t.appConfig.url.snippetsApi,d,D),f,m,y,s,a,c,o.settings,n,l,u,new TG(d.ajax.json),p,b,g,_,w,v,N,new aC(i.view("user").view((e=>null==e?void 0:e.id)),new cC(N)),new uC(R),S,k,C,O,U)),E.push(TI(h,d,i,I));const M=new VL((e=>BL.create(e,d.fingerprints.accessToken)));return E.push((e=>{const t=new kG(e).publicApi,n=ZJ().message;return new vG(new jl(JL.rpcLegacyMessageName,n),new jl(JL.rpcLegacyObservableName,n),t)})(M)),E.push(M),A.track((()=>CE(o,r,e,n,l))),function(){const e=oA.stop(OG);e>3e4&&Kt().bgPage.bgPageInitTimeout(e)}(),await async function(e){const t=await e.get("bgInitFail");if(!t)return;Kt().bgPage.bgPageInitFail(t),await e.set("bgInitFail",0)}(r),function(e){e.permissions&&(e.permissions.watchAdded((e=>{const{origins:t}=e;void 0!==t&&(NG(t)?Nc.grantAccessToAllSites():Nc.grantAccessToSpecificSite())})),e.permissions.watchRemoved((e=>{const{origins:t}=e;void 0!==t&&(NG(t)?Nc.removeAccessToAllSites():Nc.removeAccessToSpecificSite())})))}(e),function(e,t){if(void 0!==e.isExtensionInstalled){const n=async()=>{var n,r;const[i,o]=await Promise.all([null===(n=e.isExtensionInstalled)||void 0===n?void 0:n.call(e,"mseditor",!0),null===(r=e.isExtensionInstalled)||void 0===r?void 0:r.call(e,"office",!0)]);await t.modifyEnvironment({isMSEditorInstalled:i,isOfficeInstalled:o})};n(),setInterval((()=>{n()}),3e4)}}(e,o.environment),{dispose:()=>E.forEach((e=>e.dispose()))}}(e,C,t,n,r,i,o,s,a,c,l,u,d,h,p,g,f,m,b,y,_,v,w,S,k,I).then((t=>(e.sendReady&&e.sendReady(),t)));return TE(),A}function RG(e,t,n){return()=>{const r=t.view("user").get();return n.isGateEnabled(De.ExtensionFeatureFlagCAPIClientStorage)&&r&&!r.anonymous&&null!==e?e.getStorageInstanceForUser(r.email):null}}async function DG(e,t,n,r,i,o,s){const a=ze(),c=await t.get("version");if(Nc.extensionLoaded(c),a===c)return;await t.set("version",a);if(await t.get("version")===a)if(c){const e=Kt();e.extensionUpdated(a,c),Nc.update(c);try{a.split(".")[0]!==c.split(".")[0]&&async function(e,t){const{notification:n,tabs:r}=e;switch(n.kind){case"web-extension":{if("web-extension"!==r.kind)throw new Error(`Unexpected tabs kind "${r.kind}"`);const e=(await r.getAllTabs()).filter((({id:e,url:n})=>n&&t(n)&&(!e||e.toString()!==js)));if(!e.length)return;const i=()=>{Kt().reloadNotificationClick(),e.forEach((e=>{r.reload(e)}))};n.create({title:"Grammarly needs to be reloaded",message:"While you were working, we updated Grammarly. To take advantage of these improvements, please save the text you are working on, and click here.",iconUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAACgCAIAAAAErfB6AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTgzMjhCMkQ1NjBGMTFFNDg0NjBEMENBNkVFNzA3RDkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTgzMjhCMkU1NjBGMTFFNDg0NjBEMENBNkVFNzA3RDkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoxODMyOEIyQjU2MEYxMUU0ODQ2MEQwQ0E2RUU3MDdEOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoxODMyOEIyQzU2MEYxMUU0ODQ2MEQwQ0E2RUU3MDdEOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pg1zYWQAAA/kSURBVHja7J15dFNVHsfz0nRJ06ZN932FbtBSoK2AlM2hVhYZAetURWhZnBEQBIvjMIvjco6WEQVZBBmqIiCoqFSQw14KCHSl1G50pUuabiFJmzTdMr9DHY/CS0iT+5Yk93v4Q5P0vnd/n/fu/f3uvb97CY1Gw8EyX3GxCTBgLAwYCwPGwoCxMGAsDBgLA8aAsTBgLAwYCwPGwoCxMGAsDBgDxsKAsTBgLAwYCwPGwoCxMGAsDBgDxsKAsTBgLAwYCwPGwoCxMGAMGAsDxsKAsTBgLAwYCwPG0imeBda5d7C/uru1Ui5uUnY1q7paVFJpX4+sTykfUPUPDf76M2uulZDHd7KxF9kIfPgiX76Ln71LuNB7lIOXnZW1qVSWsJBddtp65T91VBVK6wu66up62oaMqDWXIIIFHhNdgieIgia7hXnYCTFgxlSlEJ9sKc5pK6+Qt1B0iQihz3SPyDk+sWGO3hgwTWpXy4815n3flF/X007bRYMF7gv84hb6x7vbCjFgqgSNcFbtxQuSskHNECM3YEVwZ3pGpYXMgAYcA0ap3PaKHVWnS+7eYcn9xDgHrAlLSnSPwICN1Y3OmvcrTrAH7X2YN0bMTXANxYANEcQ5meXZZ1pvsfw+Z3tFb4qcD1EWBqyvoIvNqs3Zefs0BLUmccMQOq8enZQWMh06aQz4IarplmQUHSqXN5vcnUcKfbeMfzbUwRMDJpeGoznccDWzLFs9NGCi3Yotl7cpan5q4BSCQ2DAv5NyQL255Ogp8U0z8PmTvce9E5Niz7PFgH/RHWXnS3n7oXE2m5AdGupd8ekB9q4YMKdIWr86P0va18MxL4lsBDvj0sZTOSRiAoDPS37eUHjAdDvdh3bJWycsmeU5xkIBn2wpfq348IBmkGO+4hFW78WmzvGJtTjAQDej+OCQBUxocgliS+xzVDBm74oOaJnh3R2yjOlqqCZUFqpsKYDBq4J+17xb5vsElYUqQ8XNHzBEROAzm6tXpUNQZag4VN+cASsH1BDvml9EpKeg4lB9MIJ5AtZwNJtLjprTaIYBguqDEcAUaFx0VtXtcMNVRkYirblW3nbOnnxnoTWfR3C5BLdvaEDRr+pQK8Squ6rBPprvB4wQ3xDybOCjZhUmwZO7KPcDerpegkNEOflOch011tk/xjnAhy/S8WNgXKUQF3TVFUrriqUN9CwGsuXyvkl8xfh5J7YABqs9fXkbDTOAgPOPfnGzPMd42jkZ8OeyfuXZ1tLjzQV5nbWoWlFtihT6fjV1nZHzx2wBvK/mwvsVJ6grH8w0z3fCkqCpY5z8ULn6n9bmfNuUR+mKg40Rc1eEzjR5wE3KrvmXtlBkKS5BJHuPWxeWHCBwQ144dNK7bp85eucaRe22nZV19rQMY9b6sALwywWfUbSuCvqwt2KeHk/xClbwHv5162vopKkofLZX9PaJS00Y8I3OmqXXdlPx4q4MnbV6dBJ4yPQEeAfqLkMv00eBk/jZpL8YvC6T+TiYiq7Xydp+T/yK9eFP0EN32C1/ITjx8JS1VCydNMZEDL/Bue0Vq27sQ1tmsMB93yOrdEc+v0rSK8vvqi25e6daIRGrpJ193T0DaqAl4Nm62ToCrdGOXrGiIHiBHHl2+hQo7etZk59ViHpIeW/CCsPW0DMM+Jkr29EuWAcn+ZOElSIbge6fAcjvGvNOiovLZHoFZjzCarLb6Cf9JiZ5RdtwHzI6BN7ihqIDFyRlaKO7I4++bGKA4TF/7uoOhAWOdfLPmvSig85XDcKbPdVns5sLf5sKrL9cbRyeD566NHga38pGx88GNINr8z+72IaS8cEpawzId2IS8NqCT8+2lqIqLVDgBl2gjncX2t7tVacO1V81fhYSMK+PeGKx/yO63+P063sQTv/9wWvsRxOXmQzgdrV85rm3UYWP4FV9k7jel6/VwbneWf36zS/FqrsIqxDnEvJu7J90XFTWr1yU+2GzqgvVWM2Fx/4+0txUxrzoY415qOiCT/RebKoOQ++pPrf8+l60dEHgnT11aes57csw4LGDENaWi2ZGB8wFRjOZMOn7pnxURS0PnTHdI5L0qyGNBl7cDyt/pGikSTHQuzb/073V57X9IMrJ95WIOQwajRnAVQoxqtz7IIH72rDHtdHNKD74HbonSdsQxweVJ98tO67tBxAfgw+M5FpgNDCdCQA+2VKMqnF+I3qRtrjljdKvUV3o4YNNdZe2lP+g7SZTAiYxZTpmAOe0lSMp53HvmEdcR5F+9Xld7ld3rtNZqf21F+GipF8hHN4aqekYANzWK0ey5w2XINaEJZF+VSpr/E/FD/RXLbM8+1pn9YOf13a3oboEmA4MyGrAP3VUISkn2Xsc6YKH/qHBv908Ytg4hvGObkbRQUW/6r6A+ICWN5sGAzIAGNU47ZKgRC2N86XbilamooMOteKFa7tv3W0c/t+absmKG3vR7uY0IgMysOgOybxpmKN3rCiQNG7ZU3Oew6igFU25sk1kI+ARVu1qObMGpBswtFd1PQg6pIX+8aSfQ2N4XwvJlKhb2g0GBDPquV8m3U10dXcrknQj0nzLAc3goforHHMXGBDMyNI+uFIuNr4Q8K38yRLjL0rKO/u6ORYg/c1IN+AmJYKR98luo0k//1FczLEM6W9GugEjmVqJdvYnbbgut1daCGD9zUg34BaV1PhCSNc2VynEcna4V6wyI92AjfctuQQRJHB/8PNSWSPHYqS/GekGLOtTGlmCq40jaTZHDbrhQPZLfzPSDVg+YGwrqi2nSIJ6Pp/N0t+MdAM2fojYnke+2q3LknLG9Tej+RyrQ38Wr0nIfADTvE0vBky3TOgsI3MGbHyykLZg18XGwXKw6W9GugELeXwjS2hXK0g/97UXWQ5g/c1IN2AnG3sjS+hSd5OugQ0WeFgOYP3NSDfgh6aFPVQajqaebIEE6QC1uUp/M9INWM+sTt26KSVJSAxx8DD+6TEV6W9Guld06Egw0V+lssYHV3QQHGKKW9iJliLqbh4uMctrzHjnQGsjslF23T4j61fSZka6ASNZIZzfVUv6eZJ3NHWAbbm8XfHp8AwZWc7ndbnGA9bfjHQ30eFCBEd03la03unpePDz6R5RjtZ8iu58eehM4+nSb0a6AY9y8OISCI6TId2VB16yhX7xFN15svc4toxdEASYkaWA7ayskcQzJ7Sk6CwLnkbRxivaJjnoFxhQ/2E7BoYqJ7oEG19IubyZdHmwF9/5mYDJVNx2iZQth1+OyIAMAEZ1sK62TK+Xwx53pWDYclvVKZbsYj0iAzIAeDIiV+WcpJR0xAP8rH9HL0Z+2w09HSlXth1vLmjtlSkGeu/7V9fTfqmtHL5lmwEZSF3xsBNGCH2MTzAc1Axllmfvikt/8KvHvMY+HzT1i/rLaO+8Sdn1WvFhHVHyzrg0qq0HpgMDsvoNvhfPRCIp54KkjDRdE/TXqCenuofTWal14ckzPaPYZjpmACM8IOit0mOk20NaEdztE5cicej0UWrglBdHPcZC0zEDOMzRO5hs6asBqu1u21Z5ivQrvpXNvoRV0wzaAXBkYyAhM/45diEtAZI7mM4EAIMW+MWhKiqrNudSe4W2sHt3/PL0kBkUHdZry+W9HZPyauQ81hqNMcAL/eNRraLScDQZRQfrtSRZcwkiI3LexwnLIURG7u8ceXTdIv8EeiwG5tKWNMtGwO62QoQuibxf9WLef3WkFkJD/cO0jFWjZiFZuiWyEbweteDrqet1jAmDy4126zUw10i3ueMwu+guLWQGwtLu9HSkX9ujYyxCwLN9JXzOmZl/A2/I4JEQP3uX1yLnn5u1+YXgRB0tkKRXtvLGJ2jnpw0zF5PnJk0QBcU4ByDcTrhKIV527eNPElbqiBTdbB3Xhz+xJizpcnvlmdZb1zqq9UnkCnXwfNQ9LMkrRh+3vFnVlX59L4F0oScYyrARQIYPxgJDo90QHBinXv1od3y6bm+TR1jN8IiCf/DfnWpFpULcqOxsVcmgqR9eQA9snKztffiiAIFrpNBXqPcsZKms8c95+6HM2V7RaA1l2B8yDDjRPQLtS8y5l1qZenXHm9GL5/qM1+f3rraOU2wdkVz6WGPem6XfDJ/t5aDfDvF6vr6JhgZ7zC983xgxF3mZygH1q0UHX7/5pWKgl55ayPqVG4u+2FxyhIqT24wxEfOAE1xD0bZmv+q7pvx5OZmUrtIaVnZz4dyLmRTtiwnGMfjIFQ5LUlc2Rc6nKPGkrVcOr/Liyx+eo+BwbRB4ailXtm0qPqT/5i8jOhAPzALGMeYOWXH6KMQeq0cnUXe03c+ypjX5WeArLQuZBp6w8Q9T/9Dg6daSz+tydXgP4t67pH/YqSUzg1RgFiOXKVrc4ZQQDSd7jxtu93QfrEGK50ZnzVnJLWiNH7ofCETJJ6ZvCvz9eXrHmwt0TDjeJ7M6nJJD7/GywwBiRYHjRUEQ44Y4eATYuzk/kA8CPlqzsqu+p71SLr55t6FIWj+iAxYhVNuTsMLr/1sSwMMBDYmefp+5HS87rEMNV94q/ZbBG4DYxp5nY03wlIPqngG18efUQXcAEY67rXD4BGL9O+B/jH3K3A6IHnZANhR+wcgh4KwSdCJbJzyPZAaMXQngUKV3YlKMb5dMWlB9MAKq+U3WZfjb82x3xadbThrZfYKKQ/XBCKgKZOMWDgH2rjvj0lAdN2RCgipDxQPI9lk1K8AgcG63TljCI6wshy5UFqqM/Cxr9m7CMstzzHuxqUgSmdgvqCZUlnQTbLMFzLm3gnBL7HNm/x5DBaGaCFeasjdMItV5yc8bCg/QNgBCf78LLTMV767JAAYVSetX52dJzW6zQvCZwatC3u+aHmDOvYOdX8rbX9MtMad4FyIitD6zCQPm3JvG31xy1DzGuZK9x70Tk4Iw3jUHwJx7Y5mHG65mlmWbbpcMne6mqPmpgVMoWotv2oCHBQ11RtEhGuYWkStS6Ltl/LN0jsWaJGDOvfnjrNqcnbdPj2j+jkHZWVmvHp2UFjKd5l1xTRXwsJqUXZnl2aQbsrBKs72iN0XOR3jIrKUAHtaNzpr3K06gXXuLSjHOARsj5hqzag4D/kW57RU7qk6zBzOgXROWlEh98qqlAB5WobQ+q/biBUkZ6Y60NAi62JmeUWkhMyZQOXxhuYCH1a6WH2vM+74pH+3BvboVLHBf4Be30D/egBxADNhAVSnEJ1uKc9rKkRwqT6oIoc90j8g5PrEjzb3HgFGqrVf+U0cVNOAFXXV1PW3GHHHLJYhggcdEl2BohCe7hY1ozxsMmA5B6Fzd3VopF0OU1azqalFJpX09sj6lfED12/OIrLlWQh7fycZeZCPw4Yt8+S4Q54QLvUc5eJnQASCWCNiihM8awoCxMGAsDBgLA8bCgLEwYCwMGAPGwoCxMGAsDBiLav1PgAEASePGMkSWuH0AAAAASUVORK5CYII=",buttons:[{title:"Reload",iconUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3NpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowZDJiMWMzMi1mODMzLTQxOTgtOGVlMy05YWY1OGVmOGUzNzEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RjFBODMzNzYxQkREMTFFNDk0ODFGNTFFRDg1MkEzMjUiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MkY1RjA5NjYxQkREMTFFNDk0ODFGNTFFRDg1MkEzMjUiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6N2FmMWVkMGUtZjZkZC00YmYwLWE2MjctNTBkMjA4MjRiZDViIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjBkMmIxYzMyLWY4MzMtNDE5OC04ZWUzLTlhZjU4ZWY4ZTM3MSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PuUD9ZcAAAM8SURBVHjatJbbS1RRFIePOjqG99LSLFMzoazMFLsHQQVFl8fee+qhP6cX3+sxiG6QFV0MNCjNjAyx1MoumpmXsRnz0m/Bd2A3TNocpw0fw5lz9v7tddlr7bSWlhYvwNgqzosMcVl0JrtAyAs2FkSeKBQ7xKT4Kqb+t/CcqBD1olpsEDdFdyqF00Q+FtpvWDSLWrEeMsUqPPBRjIifbDCwcBiROrFLrBU1Yp3zzWZxju/axCMxsJTr/yacLopwZw0WWix3i5IE3+eBbSYiXovhIK42KxvESaw0i9aIHC9FI5TguRDLToszWG1jXnwQ4yKb/7N5N01Wd8KomE1GOFc0irPioCh33r0Q98Rz3H/B2ZTF84ZojUuuZYXToEocEydEJe/MymeiQ9wVXaJJHCeT7f01jlNXsq5Ow23VxLaM/79gyXUxJD7x/y/eRcVV8RArk45xLgm0X+wkuSax0iy5EzdvTNyngpm134MmVz5VyEQLREz0inbiFz++sZlFNuitRLiBs5qJG5+KB+J9gnlRYht4pDvntoSiYeOH6BP9WJ/y4VucRSnM4tlK3TvO7EqGVbNNeNRfd9B+feEMpxj4xWImBYaZ6EVCaOOVuCR6QnFdKNXDCtBRToxHVbzixng+rtKEUlSXQ3GeG/FLqS88S62NObGxKraaMCQ7MkjUSidvYpTTqCscQ9gvBHaWt1DJwgGEw9TzWtbyWHvEN86P8QRNwJp9MbttZofWed4kKWzN44jYw1pWYnu4Gk26FtvDS15OsOM6SmhVAIttzl5uo2HW7EFjyrU4QsFop/Ef4OztE5+pyUNUtAgWuCOTZCzlCJ1ibj4x7WbtPj/GvvAivn9LI6/kCJRyIShjYhvfjMYJF/L9IQSbmOtxBepkXgytP4TnaQit9NnDYpvYCBXcKPv5LsLcHFxbg3CjcwW2u9dj1hxAI+ENJEIzT8e9BbjOIwSlxGjaubqGaKt5jpW+pdanb7FmZKmrzxy99gm7m6NdVpGd5csk1TgMENfbhGjmX2+ZUY7XGHGtJ0O308WKnROxQH8epRb3IjpI64wmc71dQHSMLjVDHhRR08NOU4kiPExMO2DJC8JvAQYA0OLb9zl5D+gAAAAASUVORK5CYII="}]}).then((e=>{e.buttonClick.subscribe(i)}));break}case"safari":n.create({title:"Grammarly needs to be reloaded",message:"While you were working, we updated Grammarly. To take advantage of these improvements, please save the text you are working on, and click here."});break;default:throw new Error('Unsupported notification kind "${notification.kind}"')}Kt().reloadNotificationShow()}(ZJ().browserApi,n.toReload)}catch(t){e.extensionUpdateFail(c)}}else await async function(e,t,n,r,i,o){const s=Kt();PE(e,t);let a="unknown";try{a=await c()}catch(e){s.cannotGetInstallSource()}l(a),await i.patch({extensionInstallSource:a}),await async function(e,t){const n=e=>0===e?"0":1===e?"1":2===e?"2":3===e?"3":e>=4&&e<10?"4+":"10+",r="https://docs.google.com/document",{tabs:i}=e,o=(await i.getAllTabs()).filter((e=>{var t;return null===(t=e.url)||void 0===t?void 0:t.includes(r)})),s=n(o.length);t.sendFemetricsRate("openGDocsTabsCountDuringInstall",{count:s})}(e,s),e.permissions&&e.permissions.getAll().then((e=>{const{origins:t}=e;NG(t)&&Nc.grantAccessToAllSites()}));if(!Ne()){const t=await n.getLlamaRedirectUrl();((null==t?void 0:t.value)?await mE.findTab(e,t.value):null)||await rA("funnel"===a,o,n)}async function c(){if(Me())return"webstore";const e=await n.getInstallSource();return null===e?"webstore":"funnel"===e.value?"funnel":"blog"===e.value?"blog":"editor"===e.value?"editor":"webstore"}function l(e){s.extensionInstall(a),Nc.install(e)}await r()}(e,n,r,i,s,o),await s.patch({extensionInstallDate:Date.now()});else Nc.versionStorageFailed()}function NG(e){return e&&e.includes("<all_urls>")}function UG(e,t=!1){return null!==e&&(e>Date.now()||e<0)||t&&0!==e}function MG(e,t){const{patchCommonSettings:n}=t.settings;return{setActiveAgentPanelId:t=>{var r;const i=null!==(r=yw(e)().common.agentsFeature)&&void 0!==r?r:Sa;return n({agentsFeature:{...i,activeAgentPanelId:t}})},setActiveDocumentIdStack:t=>{var r;const i=null!==(r=yw(e)().common.agentsFeature)&&void 0!==r?r:Sa;return n({agentsFeature:{...i,activeDocumentIdStack:t}})}}}const jG=e=>{var t;if(!e)return 0;const n=e.match(/\d+|\D+/g),r=n?parseInt(n[0],10):0,i=null===(t=null==n?void 0:n[1])||void 0===t?void 0:t.toLowerCase();if(!isNaN(r))switch(i){case"s":return xa(r);case"m":return Ta(r);case"h":return Oa(r);case"d":return Aa(r)}return 0};var FG;!function(e){e.accept="accept",e.rewriteOptions="rewriteOptions",e.customPrompt="customPrompt",e.revert="revert"}(FG||(FG={}));const LG=new Set(Object.values(FG));var GG;function BG(e,t){const n=e=>e.split("-")[0].toLowerCase();return n(e)===n(t)}!function(e){e.undetermined={sourceLanguageTag:"und",targetLanguageTag:"und"},e.equals=function(e){return t=>t.sourceLanguageTag===e.sourceLanguageTag&&t.targetLanguageTag===e.targetLanguageTag}}(GG||(GG={}));const zG={"zh-Hans":"Chinese (Simplified)",nl:"Dutch","en-US":"English (American)","en-GB":"English (British)",fr:"French",de:"German",id:"Indonesian",it:"Italian",ja:"Japanese",ko:"Korean",pl:"Polish","pt-BR":"Portuguese (Brazil)","pt-PT":"Portuguese (Portugal)","es-AR":"Spanish (Argentina)","es-MX":"Spanish (Mexico)","es-ES":"Spanish (Spain)",sv:"Swedish",tr:"Turkish",uk:"Ukrainian"};var VG;!function(e){e.findMatch=function(e){let t;const n=Object.keys(zG);for(const r of n){if(r.toLowerCase()===e.toLowerCase())return r;!t&&BG(r,e)&&(t=r)}return t}}(VG||(VG={}));const qG={acceptCount:0,completedSteps:[],hasSeenSelectionPulsating:!1,hasSeenIdlePulsating:!1,revertPresentedCount:0},HG={showsCount:0},WG={monetization:{},deactivatedVBarTypes:{},onboarding:{},translateOnboarding:{},translationLanguages:{},multilingualOnboarding:{}},$G={idle:{deactivated:!1,lastChangeTimestamp:0},pushed_content:{deactivated:!1,lastChangeTimestamp:0}},XG={idle:"hasSeenIdlePulsating",selection:"hasSeenSelectionPulsating"},KG=(e,t)=>{function n(n,r){var i,o,s,a;const c=yw(e),{patchCommonSettings:l}=t.settings,u=null!==(i=c().common.g2Settings)&&void 0!==i?i:WG,d=null!==(s=null===(o=u.onboarding)||void 0===o?void 0:o[n])&&void 0!==s?s:qG,h=new Set([...d.completedSteps,...null!==(a=r.completedSteps)&&void 0!==a?a:[]]);return l({g2Settings:{...u,onboarding:{[n]:{...d,...r,completedSteps:[...h]}}}})}return{setOnboardingAcceptCount:function({userId:e,acceptCount:t}){return n(e,{acceptCount:t})},setOnboardingCompletedStep:function({userId:e,completedStep:t}){return n(e,{completedSteps:[t]})},setOnboardingDismissed:function({userId:e}){return n(e,{completedSteps:[FG.accept,FG.rewriteOptions,FG.customPrompt]})},setOnboardingPulsatingSeen:function({userId:e,vBarType:t}){return n(e,{[XG[t]]:!0})},setOnboardingRevertPresentedCount:function({userId:e,revertPresentedCount:t}){return n(e,t>=3?{completedSteps:[...LG.values()],revertPresentedCount:t}:{revertPresentedCount:t})},markVBarUsed:function(n){var r,i,o,s,a,c;const{userId:l,vBarTextHash:u}=n,d=yw(e),{patchCommonSettings:h}=t.settings,p=null!==(r=d().common.g2Settings)&&void 0!==r?r:WG,g=null!==(i=p.monetization)&&void 0!==i?i:{},f=(new Date).toISOString().split("T")[0],m=null!==(s=null===(o=g[l])||void 0===o?void 0:o.date)&&void 0!==s?s:"",b=null!==(c=null===(a=g[l])||void 0===a?void 0:a.displayedVBarTextHashList)&&void 0!==c?c:[];if(m===f&&b.includes(u))return Promise.resolve();const y=m===f?b.concat(u):[u];return h({g2Settings:{...p,monetization:{...p.monetization,[l]:{displayedVBarTextHashList:y,date:f}}}})},setVBarTypeDeactivated:function(n){var r,i,o;const s=yw(e),{patchCommonSettings:a}=t.settings,c=null!==(r=s().common.g2Settings)&&void 0!==r?r:WG,l=null!==(o=null===(i=c.deactivatedVBarTypes)||void 0===i?void 0:i[n.domain])&&void 0!==o?o:$G;return a({g2Settings:{...c,deactivatedVBarTypes:{...c.deactivatedVBarTypes,[n.domain]:{...l,[n.vBarType]:{deactivated:n.deactivated,lastChangeTimestamp:n.lastChangeTimestamp}}}}})},setVBarTypesActivated:function(n){var r;const i=yw(e),{patchCommonSettings:o}=t.settings,s=null!==(r=i().common.g2Settings)&&void 0!==r?r:WG,a={...s.deactivatedVBarTypes};return n.forEach((e=>{a[e.domain]={...a[e.domain],[e.vBarType]:{deactivated:!1,lastChangeTimestamp:e.lastChangeTimestamp}}})),o({g2Settings:{...s,deactivatedVBarTypes:a}})},recordTranslationLanguages:function({userId:n,sourceLanguageTag:r,targetLanguageTag:i}){var o,s,a,c;const l=yw(e),{patchCommonSettings:u}=t.settings,d=null!==(o=l().common.g2Settings)&&void 0!==o?o:WG,h=null!==(a=null===(s=d.translationLanguages)||void 0===s?void 0:s[n])&&void 0!==a?a:[],p={lastChangeTimestamp:Date.now(),sourceLanguageTag:r,targetLanguageTag:i},g=[...h.filter((0,ao.ff)(GG.equals(p))),p];return u({g2Settings:{...d,translationLanguages:{...null!==(c=d.translationLanguages)&&void 0!==c?c:{},[n]:g}}})},markTranslateOnboardingAsSeen:function({userId:n}){var r,i;const o=yw(e),{patchCommonSettings:s}=t.settings,a=null!==(r=o().common.g2Settings)&&void 0!==r?r:WG;return s({g2Settings:{...a,translateOnboarding:{...null!==(i=a.translateOnboarding)&&void 0!==i?i:{},[n]:{hasBeenSeen:!0}}}})},setMultilingualOnboardingShowsCount:function({userId:n,showsCount:r}){var i,o,s,a;const{patchCommonSettings:c}=t.settings,l=null!==(i=yw(e)().common.g2Settings)&&void 0!==i?i:WG,u=null!==(s=null===(o=l.multilingualOnboarding)||void 0===o?void 0:o[n])&&void 0!==s?s:HG;return c({g2Settings:{...l,multilingualOnboarding:{...null!==(a=l.multilingualOnboarding)&&void 0!==a?a:{},[n]:{...u,showsCount:r}}}})}}},YG={kind:"initial",allDomainsTrackingEnabled:!1},ZG={kind:"available",optInPopUpWasClosedAtLeastOnce:!1};function JG(e,t,n=!1,r=[]){return r.some((({domain:t})=>t===e))?r.map((r=>r.domain===e?function(e,t,n=!1){return t.logAllDocuments?{...t,pausedDocumentIds:n?Array.from(new Set(t.pausedDocumentIds.concat(e))):t.pausedDocumentIds.filter((t=>t!==e))}:{...t,activeDocumentIds:n?t.activeDocumentIds.filter((t=>t!==e)):Array.from(new Set(t.activeDocumentIds.concat(e))),pausedDocumentIds:n?Array.from(new Set((t.pausedDocumentIds||[]).concat(e))):(t.pausedDocumentIds||[]).filter((t=>t!==e))}}(t,r,n):r),[]):r.concat({domain:e,logAllDocuments:!1,activeDocumentIds:[...n?[]:[t]],pausedDocumentIds:[...n?[t]:[]]})}function QG(e,t,n=[],r){return n.some((({domain:t})=>t===e))?n.map((n=>{var i;return n.domain===e?n.logAllDocuments&&r||!n.logAllDocuments&&!r?n:n.logAllDocuments&&!r?{domain:n.domain,logAllDocuments:r,activeDocumentIds:n.pausedDocumentIds.includes(t)?[]:[t],pausedDocumentIds:n.pausedDocumentIds}:!n.logAllDocuments&&r?{domain:n.domain,logAllDocuments:r,pausedDocumentIds:!(null===(i=n.pausedDocumentIds)||void 0===i?void 0:i.includes(t))||n.activeDocumentIds.includes(t)?n.pausedDocumentIds||[]:n.pausedDocumentIds||[t]}:n:n}),[]):n.concat(r?{domain:e,logAllDocuments:!0,pausedDocumentIds:[]}:{domain:e,logAllDocuments:!1,activeDocumentIds:[t],pausedDocumentIds:[]})}function eB(e,t){const{patchCommonSettings:n}=t.settings;return{setInitial:t=>{const r=yw(e)().common.humanWritingReport;if(!t)return n({humanWritingReport:{kind:"disabled",disabledByUser:!1,timestamp:Date.now(),domainSettings:[],allDomainsTrackingEnabled:null==r?void 0:r.allDomainsTrackingEnabled,allowedClipboardAccess:null==r?void 0:r.allowedClipboardAccess,deniedClipboardAccessSince:null==r?void 0:r.deniedClipboardAccessSince}});switch(null==r?void 0:r.kind){case void 0:case"initial":return n({humanWritingReport:{...ZG,allDomainsTrackingEnabled:null==r?void 0:r.allDomainsTrackingEnabled,allowedClipboardAccess:null==r?void 0:r.allowedClipboardAccess,deniedClipboardAccessSince:null==r?void 0:r.deniedClipboardAccessSince}});case"optedOut":return n({humanWritingReport:{kind:"disabled",disabledByUser:!0,timestamp:r.timestamp,domainSettings:r.domainSettings||[],allDomainsTrackingEnabled:r.allDomainsTrackingEnabled,allowedClipboardAccess:r.allowedClipboardAccess,deniedClipboardAccessSince:r.deniedClipboardAccessSince}});case"disabled":return r.disabledByUser?Promise.resolve():n({humanWritingReport:{...ZG,allDomainsTrackingEnabled:r.allDomainsTrackingEnabled,allowedClipboardAccess:r.allowedClipboardAccess,deniedClipboardAccessSince:r.deniedClipboardAccessSince}});default:return Promise.resolve()}},setEnabled:t=>{const r=yw(e)().common.humanWritingReport,i=("disabled"===(null==r?void 0:r.kind)||"enabled"===(null==r?void 0:r.kind)||"optedOut"===(null==r?void 0:r.kind))&&r.domainSettings||[];if(t)switch(null==r?void 0:r.kind){case"available":case"disabled":case"optedOut":return n({humanWritingReport:{kind:"enabled",domainSettings:i,allDomainsTrackingEnabled:null==r?void 0:r.allDomainsTrackingEnabled,deniedClipboardAccessSince:null==r?void 0:r.deniedClipboardAccessSince,allowedClipboardAccess:null==r?void 0:r.allowedClipboardAccess}});default:return Promise.resolve()}else switch(null==r?void 0:r.kind){case"available":case"enabled":return n({humanWritingReport:{kind:"disabled",disabledByUser:!0,timestamp:Date.now(),domainSettings:i,allDomainsTrackingEnabled:null==r?void 0:r.allDomainsTrackingEnabled,deniedClipboardAccessSince:null==r?void 0:r.deniedClipboardAccessSince,allowedClipboardAccess:null==r?void 0:r.allowedClipboardAccess}});default:return Promise.resolve()}},startTracking:({documentId:t,domain:r})=>{const i=yw(e)().common.humanWritingReport;switch(null==i?void 0:i.kind){case"available":case"enabled":return n({humanWritingReport:{kind:"enabled",deniedClipboardAccessSince:i.deniedClipboardAccessSince,allowedClipboardAccess:i.allowedClipboardAccess,allDomainsTrackingEnabled:i.allDomainsTrackingEnabled,domainSettings:JG(r,t,!1,"domainSettings"in i?i.domainSettings:void 0)}});default:return Promise.resolve()}},stopTracking:({documentId:t,domain:r})=>{const i=yw(e)().common.humanWritingReport;return"enabled"===(null==i?void 0:i.kind)?n({humanWritingReport:{...i,domainSettings:JG(r,t,!0,i.domainSettings)}}):Promise.resolve()},startTrackingDomain:({documentId:t,domain:r})=>{const i=yw(e)().common.humanWritingReport;switch(null==i?void 0:i.kind){case"available":return n({humanWritingReport:{...i,kind:"enabled",domainSettings:QG(r,t,[],!0)}});case"enabled":return n({humanWritingReport:{...i,domainSettings:QG(r,t,i.domainSettings,!0)}});default:return Promise.resolve()}},stopTrackingDomain:({documentId:t,domain:r})=>{const i=yw(e)().common.humanWritingReport;return"enabled"===(null==i?void 0:i.kind)?n({humanWritingReport:{...i,domainSettings:QG(r,t,i.domainSettings,!1)}}):Promise.resolve()},optOut:()=>{const t=yw(e)().common.humanWritingReport;return n({humanWritingReport:{kind:"optedOut",timestamp:Date.now(),allDomainsTrackingEnabled:null==t?void 0:t.allDomainsTrackingEnabled,domainSettings:"enabled"===(null==t?void 0:t.kind)?t.domainSettings:[]}})},optIn:()=>{const t=yw(e)().common.humanWritingReport;return"available"===(null==t?void 0:t.kind)?n({humanWritingReport:{kind:"enabled",domainSettings:[],allDomainsTrackingEnabled:t.allDomainsTrackingEnabled,deniedClipboardAccessSince:t.deniedClipboardAccessSince,allowedClipboardAccess:t.allowedClipboardAccess}}):Promise.resolve()},optInPopupShown:()=>{const t=yw(e)().common.humanWritingReport;return"available"===(null==t?void 0:t.kind)?n({humanWritingReport:{...t,kind:"available",optInPopUpWasClosedAtLeastOnce:!0}}):Promise.resolve()},denyClipboardAccess:()=>{const t=yw(e)().common.humanWritingReport;return"enabled"===(null==t?void 0:t.kind)?n({humanWritingReport:{...t,allowedClipboardAccess:!1,deniedClipboardAccessSince:Date.now(),allDomainsTrackingEnabled:t.allDomainsTrackingEnabled}}):Promise.resolve()},allowClipboardAccess:()=>{const t=yw(e)().common.humanWritingReport;return"enabled"===(null==t?void 0:t.kind)?n({humanWritingReport:{...t,deniedClipboardAccessSince:void 0,allowedClipboardAccess:!0}}):Promise.resolve()},setAllDomainsTrackingEnabled:t=>{var r;const i=null!==(r=yw(e)().common.humanWritingReport)&&void 0!==r?r:YG;return n({humanWritingReport:{...i,allDomainsTrackingEnabled:t}})}}}const tB=e=>({setUser:t=>e.patch({user:t},!0),setAlarms:t=>e.patch({alarms:t},!0),setFSM:t=>e.patch({extensionFSM:t}),setDynamicConfig:t=>e.patch({dynamicConfig:t},!0),setMeta:t=>e.patch({extensionMeta:t})}),nB=(e,t)=>({setStatus:function(n){const r=yw(e),{patchCommonSettings:i}=t.settings,o=r().common.cheetah;return i({cheetah:{...o,status:{...null==o?void 0:o.status,...n}}})}}),rB=e=>{function t(t){return e.patch({dapi:t},!0)}return{modifySettings:async n=>{const{dapi:r}=await e.get(["dapi"]);return t(Object.assign({},r,n))},setSettings:t}},iB=e=>({setDataSharingSettings:function(t){const{patchCommonSettings:n}=e.settings;return n({dataSharingSettings:t})}}),oB=e=>({setDialectSettings:function(t){const{patchCommonSettings:n}=e.settings;return n({dialectSettings:t})}}),sB=(e,t)=>({setKnowledgeHubSettings:function(n){const r=yw(e),{patchCommonSettings:i}=t.settings;return i({knowledgeHubSettings:{...r().common.knowledgeHubSettings,enabled:n.isEnabled}})}}),aB=e=>({setClientAccessToken:t=>e.patch({mise:{clientAccessToken:t}},!0)}),cB=e=>{const t=q.create("AuthActions");return{beginAuth:()=>{t.debug("beginAuth"),e.patch({authenticationStarted:(new Date).toISOString()})}}},lB=e=>{let t;const n=()=>(t||(t={networkOffline:!self.navigator.onLine,online:!0}),t),r=async()=>{const{connection:t}=await e.get(["connection"]);return null!=t?t:n()};return{initConnection:async()=>{const{connection:t}=await e.get(["connection"]);t||await e.patch({connection:n()})},modifyConnection:async t=>{const n=await r();return e.patch({connection:{...n,...t}})},setOffline:async t=>{const n=await r();if(n.networkOffline!==t)return e.patch({connection:{...n,networkOffline:t}})}}},uB=e=>({modifyEnvironment:async t=>{const{environmentState:n}=await e.get(["environmentState"]);return e.patch({environmentState:{...n,...t}})}}),dB=e=>{const t=()=>{var t;return null!==(t=e.view("extensionSettings").get())&&void 0!==t?t:gw};return{gdocsOptedIn:()=>e.patch({extensionSettings:bw(t(),"docs.google.com",{enabled:!0,disabledDate:void 0})})}},hB=e=>({enableOnceClickToRun:async()=>{const{clickToRunEnabledOnce:t,activeTab:n}=await e.get(["clickToRunEnabledOnce","activeTab"]);return e.patch({clickToRunEnabledOnce:{...null!=t?t:{},...n?{[n.id]:{[Ct(n.url)]:!0}}:{}}})},setActiveTab:t=>e.patch({activeTab:t})}),pB={accessibilityOnboardingAlertsCount:0,userAcceptedCount:0,lastUserAcceptedAt:""},gB={enabled:!0,hotkey:"Tab",snoozedUntil:null};var fB,mB,bB;!function(e){e.fromUserType=e=>{switch(e){case VS.premium:return Tr.F2("premium");case VS.registered:return Tr.F2("free");default:return Tr.t$("unknownUserType")}}}(fB||(fB={})),function(e){let t;!function(e){e.apa="apa",e.mla="mla",e.chicago="chicago"}(t=e.Style||(e.Style={})),e.empty={domains:{},onboardingVersionSeen:-1,style:t.apa}}(mB||(mB={})),function(e){e.empty={domains:{}}}(bB||(bB={}));const yB={};var _B;!function(e){let t;!function(e){e.SUGGESTED_TERM="suggestedTermOnboardingSeen",e.TERM_DETAILS="onboardingSeen"}(t=e.OnboardingSeenFor||(e.OnboardingSeenFor={})),e.empty={enabled:!0,[t.SUGGESTED_TERM]:!1,[t.TERM_DETAILS]:!1},e.get=t=>({...e.empty,...t})}(_B||(_B={}));class vB extends ue{static getInstance(){if(void 0===this._instanceCSShared)throw new Error("nonBG Env not inited yet");return this._instanceCSShared}static get isInited(){return void 0!==this._instanceCSShared}static initShared(e){if(void 0!==this._instanceCSShared)throw new Error("nonBG Env already inited");this._instanceCSShared=e,ue.initShared(e)}}function wB(){return vB.getInstance()}const SB={openAssistant:{mac:{key:"KeyG",modifiers:["Shift","Control","Meta"]},other:{key:"KeyG",modifiers:["Shift","Control","Alt"]}},closeAssistant:{mac:{key:"Escape",modifiers:[]},other:{key:"Escape",modifiers:[]}},openVBar:{mac:{key:"BracketRight",modifiers:["Shift","Meta","Control"]},other:{key:"BracketRight",modifiers:["Shift","Alt","Control"]}}};function kB(e){return SB[e][function(e=wB()){return e.config.systemInfo.os.isMac}()?"mac":"other"]}function IB(e){var t;return null!==(t=e.common.alwaysAvailableAssistantSettings)&&void 0!==t?t:yB}function CB(e,t,n,r){var i;void 0===n&&(n=yw(e)),void 0===r&&(r=null===(i=de().experimentClient)||void 0===i?void 0:i.isGateEnabled(Te.CheckTextWhenTurnOnAAA));const o=n(),s=IB(o);return e.patch({extensionSettings:mw(o,{alwaysAvailableAssistantSettings:{...s,enabled:t},...r&&{isDesktopIntegrationEnabled:!t&&o.common.isDesktopIntegrationEnabled}})})}const EB=e=>{const t=yw(e);return{toggleDefs:n=>e.patch({extensionSettings:mw(t(),{enabledDefs:n})}),toggleAutocorrect:n=>e.patch({extensionSettings:mw(t(),{autocorrectEnabled:n})}),toggleAlwaysAvailableAssistant:n=>CB(e,n,t),toggleTouchTypist:n=>{var r;const i=null!==(r=t().common.touchTypistSettings)&&void 0!==r?r:gB;return e.patch({extensionSettings:mw(t(),{touchTypistSettings:{...i,enabled:n,snoozedUntil:null}})})},setTouchTypistToggledByUser:({userId:n,value:r})=>{var i,o,s;const a=null!==(i=t().common.touchTypistState)&&void 0!==i?i:pB,c=null!==(o=a.autoOptOutExperiment)&&void 0!==o?o:{},l={...null!==(s=c[n])&&void 0!==s?s:{},enabledToggledByUser:r};return e.patch({extensionSettings:mw(t(),{touchTypistState:{...a,autoOptOutExperiment:{...c,[n]:l}}})})},toggleTouchTypistByUser:({enabled:n,userId:r})=>{var i,o,s,a;const c=t(),l=null!==(i=c.common.touchTypistSettings)&&void 0!==i?i:gB,u=null!==(o=c.common.touchTypistState)&&void 0!==o?o:pB,d=null!==(s=u.autoOptOutExperiment)&&void 0!==s?s:{},h={...null!==(a=d[r])&&void 0!==a?a:{},enabledToggledByUser:!0};return e.patch({extensionSettings:mw(c,{touchTypistSettings:{...l,enabled:n,snoozedUntil:null},touchTypistState:{...u,autoOptOutExperiment:{...d,[r]:h}}})})},snoozeTouchTypist:()=>{var n;const r=null!==(n=t().common.touchTypistSettings)&&void 0!==n?n:gB;return e.patch({extensionSettings:mw(t(),{touchTypistSettings:{...r,enabled:!1,snoozedUntil:new Date((new Date).getTime()+Ca).toISOString()}})})},setTouchTypistHotkey:({hotkey:n})=>{var r;const i=null!==(r=t().common.touchTypistSettings)&&void 0!==r?r:gB;return e.patch({extensionSettings:mw(t(),{touchTypistSettings:{...i,hotkey:n}})})},incrementAccessibilityOnboardingAlertsCount:()=>{var n;const r=null!==(n=t().common.touchTypistState)&&void 0!==n?n:pB,{accessibilityOnboardingAlertsCount:i=pB.accessibilityOnboardingAlertsCount}=r;return e.patch({extensionSettings:mw(t(),{touchTypistState:{...r,accessibilityOnboardingAlertsCount:i+1}})})},incrementTouchTypistUserAcceptedCount:()=>{var n;const r=null!==(n=t().common.touchTypistState)&&void 0!==n?n:pB;return e.patch({extensionSettings:mw(t(),{touchTypistState:{...r,userAcceptedCount:Math.min(r.userAcceptedCount+1,3),lastUserAcceptedAt:(new Date).toISOString()}})})},setHasBeenAutoOptedOut:({userId:n,hasBeenAutoOptedOut:r})=>{var i,o,s;const a=null!==(i=t().common.touchTypistState)&&void 0!==i?i:pB,c=null!==(o=a.autoOptOutExperiment)&&void 0!==o?o:{},l={...null!==(s=c[n])&&void 0!==s?s:{},hasBeenAutoOptedOut:r};return e.patch({extensionSettings:mw(t(),{touchTypistState:{...a,autoOptOutExperiment:{...c,[n]:l}}})})},toggleCitationBuilderForDomain:({domain:n,enabled:r,pathName:i,inAllowList:o})=>{var s;const a=null!==(s=t().common.citationBuilder)&&void 0!==s?s:mB.empty;return e.patch({extensionSettings:mw(t(),{citationBuilder:{...a,domains:{...a.domains,[n]:{disabled:!r,toggleDate:(new Date).getTime(),togglePathName:i,inAllowList:o}}}})})},toggleTranslateOnboardingForDomain:({domain:n,enabled:r})=>{var i;const o=null!==(i=t().common.translateOnboarding)&&void 0!==i?i:bB.empty;return e.patch({extensionSettings:mw(t(),{translateOnboarding:{...o,domains:{...o.domains,[n]:{disabled:!r}}}})})},toggleSite:({enabled:n,domain:r,clickToRunEnabled:i})=>e.patch({extensionSettings:bw(t(),r,{enabled:n,disabledDate:!0===n?void 0:Date.now(),...void 0!==i?{clickToRunEnabled:i}:void 0})}),setKeyboardShortcut:t=>{const n=function(e){const t=()=>{const t=e.view("extensionSettings").view((e=>{var t,n;return null!==(n=null===(t=null==e?void 0:e.common)||void 0===t?void 0:t.keyboardShortcuts)&&void 0!==n?n:{openAssistant:kB("openAssistant"),closeAssistant:kB("closeAssistant"),openVBar:kB("openVBar")}}));return t};return{getKeyboardShortcuts:t,setKeyboardShortcut:n=>{const r=yw(e),i=t().get();return e.patch({extensionSettings:mw(r(),{keyboardShortcuts:{...i,...n}})})}}}(e);return n.setKeyboardShortcut(t)},toggleEnhancedScreenReaderUXSupport:n=>e.patch({extensionSettings:mw(t(),{isEnhancedScreenReaderUXSupported:n})})}},AB=e=>{const t=yw(e);let n=Promise.resolve();const r=async r=>{const i=n.then((async()=>{const n=t();Object.keys(r).every((e=>r[e]===n.common[e]))||await e.patch({extensionSettings:mw(n,r)})}));return n=i.catch((()=>{})),i};return{patchCommonSettings:r,setDesktopIntegration:e=>r({isDesktopIntegrationEnabled:e}),enableClickToRunOnAllSites:()=>r({clickToRunOnAllSites:!0}),enableHistoryLoggerUntil:e=>r({historyLoggerEnabledUntil:e}),disableHistoryLogger:()=>r({historyLoggerEnabledUntil:0}),enableAdvancedHistoryLoggerUntil:e=>r({advancedHistoryLoggerEnabledUntil:e}),disableAdvancedHistoryLogger:()=>r({advancedHistoryLoggerEnabledUntil:0}),disableOnTab:n=>e.patch({extensionSettings:bw(t(),n,{enabled:!1,disabledDate:Date.now()})}),toggleDebugMenu:(e=!0)=>r({isDebugMenuVisible:e}),toggleGOSDebugger:e=>r({gOSDebuggerEnabled:e}),setGOSAppletChannel:e=>r({gOSAppletChannel:e}),setGOSAssistantAppletUrl:e=>r({gOSAssistantAppletUrl:e})}},xB=e=>({setConnectionState(t){const n=e.view("connectorSettings").get();return e.patch({connectorSettings:{...n,isConnected:t}})}}),TB=e=>({setChromeStoreSignup(t){const n=e.view("growthSettings").get()||{},r=(null==n?void 0:n.chromeStoreSignup)||{};return e.patch({growthSettings:{...n,chromeStoreSignup:{...r,...t}}})}}),OB=e=>({setPassportSettings:t=>e.patch({passport:t},!0),setEntitlements:async t=>{const{passport:n}=await e.get(["passport"]);return e.patch({passport:Object.assign({},n,{entitlements:t})})}}),PB=(e,t)=>{const n=yw(e),{patchCommonSettings:r}=t.settings;return{...t.settings,setInitial:()=>{const t=n();return e.patch({extensionSettings:Object.assign({},t,{common:(0,h.b9)({...t.common,autocorrectEnabled:!0},t.common)})})},showOnboarding:()=>r({showOnboarding:!0,showToneDetectorOnboarding:!0,showFirstSuggestionFooters:!0}),showLoginReminder:e=>r({showLoginReminder:!0,loginReminderType:e}),hideLoginReminder:()=>r({showLoginReminder:!1}),setLlamaInstalled:()=>{var e;return r({isLlamaInstalled:!0,isDesktopIntegrationEnabled:null===(e=n().common.isDesktopIntegrationEnabled)||void 0===e||e})},setLlamaUninstalled:()=>r({isLlamaInstalled:void 0,isDesktopIntegrationEnabled:void 0}),setDesktopIntegrationExtensionMode:e=>r({desktopIntegrationExtensionMode:e}),setDesktopIntegrationRedirectUrlHash:e=>r({desktopIntegrationRedirectUrlHash:e}),setAuthenticatedUserWasBusinessAccount:e=>r({authenticatedUserWasBusinessAccount:e,authenticatedUserWasBusinessAccountTimestamp:e?Date.now():void 0}),setPreviousUserType:e=>r({previousUserType:e})}},RB=e=>{const t=(e=>({quickSettings:EB(e),gdocs:dB(e),settings:AB(e),connection:lB(e),tabs:hB(e),environment:uB(e),auth:cB(e)}))(e);return{...t,settings:PB(e,t),dapi:rB(e),base:tB(e),cheetahSettings:nB(e,t),dialectSettings:oB(t),dataSharingSettings:iB(t),knowledgeHubSettings:sB(e,t),g2Settings:KG(e,t),humanWritingReport:eB(e,t),mise:aB(e),passport:OB(e),connectorSettings:xB(e),growthSettings:TB(e),agents:MG(e,t)}};class DB extends ll.sH{constructor(e,t){super(e),this.message=e,this.details=t,this.name="DapiPropertiesSerializationError"}toString(){return`DAPI properties serialization error\n      Message ${this.message}\n      Details ${al.Rn(this.details)}`}}function NB(e){return fl.Dy.fromProperties(e).decode(e)}function UB(e){return new DB("Serialization failed",e)}const MB=class extends Kc.Base{constructor(e,t,n){super(),this._fingerprints=n,this._endpoints={props:"props/v2",mimic:"mimic"},this._url=gl.join(e,"api"),this._ajax=t({requestExtender:Yc.toHeaderAppender(this._fingerprints)})}static getDefaultUrl(e){return`https://data${e}`}load(){return(0,tS.zG)(this._ajax.json(gl.get(this._url,this._endpoints.props)),this._ajax.map(fl.E.of))}get(e){return(0,tS.zG)(this._ajax.text(gl.get(this._url,this._endpoints.props,e)),this._ajax.map((t=>fl.E.of({[e]:t||null}))))}save(e,t){return(0,tS.zG)(e,NB,Tr.Vn(UB),Tr.g_(this._ajax.throwError,this._ajax.of),this._ajax.map((e=>(0,tS.zG)(gl.post(this._url,this._endpoints.props).json(e),(null==t?void 0:t.keepalive)?e=>e.keepalive():Ur.yR))),this._ajax.chain(this._ajax.empty))}getMimic(e){return this._ajax.json(gl.get(this._url,this._endpoints.mimic).cookie("gnar_containerId",e))}getMimicWithProps(e){return(0,tS.zG)(this._ajax.json(gl.get(this._url,this._endpoints.mimic,"withProps").cookie("gnar_containerId",e)),this._ajax.map((({groups:e,properties:t})=>({experiments:new Set(e),properties:fl.E.of(t)}))))}};MB.targetTag="dapi";let jB=MB;var FB;!function(e){let t;!function(e){e.EMPTY="EMPTY",e.dialects=["british","american","australian","canadian","indian"],e.writingTypes=["work","school","otherProjects"],e.primaryLanguages=["english","notEnglish"],e.grammarSkills=["beginner","intermediate","advanced"],e.emogenieEmojiStates=["hide","show"],e.serengetiStates=["enabled","disabled"],e.dunningBillingStatuses=["CREATED","IN_PROGRESS","RECOVERED","CHURNED","CHURNED_PASSIVELY"],e.planPeriods=["MONTHLY","QUARTERLY","ANNUAL"],e.planPeriodsOrNone=[...e.planPeriods,"NONE"];const t=(e,t)=>((e,t)=>e.includes(t))(e,t)?t:null,n=(e,n)=>null!=n&&t(e,n)||null;function r(e){return null!=e?e:null}function i(t){return n(e.dialects,t)}function o(n){return t(e.dunningBillingStatuses,n)||e.EMPTY}const s={dialectStrong:i,dialectWeak:i,writingType:function(t){return n(e.writingTypes,t)},primaryLanguage:function(t){return n(e.primaryLanguages,t)},grammarSkills:function(t){return n(e.grammarSkills,t)},emogenieEmojiState:function(t){return n(e.emogenieEmojiStates,t)},serengetiState:function(t){return n(e.serengetiStates,t)},dunning_billing_status:o,gb_dunning_billing_status:o,billing_subscription_first_premium_date:r,billing_subscription_plan_period:function(t){return n(e.planPeriods,t)},billing_subscription_queued_plan_period:function(t){return n(e.planPeriodsOrNone,t)},billing_subscription_renewal_date:r,ungated_trial_end_date:r,isLlamaInstalled:r,showDesktopIntegrationExtensionToggle:r,snippetsTrigger:r,billing_no_payment_method_subscription_expire_on:r,"DN:getStartedChecklistSettings":r,"cheetah:onboardingState":r,"cheetah:onboardingState:llamaMac":r,"cheetah:onboardingState:llamaWin":r,"cheetah:onboardingState:editor":r,"personalizedInsightsConsent:onboardingState:llamaWindows":r,"personalizedInsightsConsent:onboardingState:llamaMac":r,"personalizedInsightsConsent:onboardingState:extension":r};e.parseProp=function(e,t){return s[e](t)},e.parseProps=function(e){return Object.keys(e).reduce(((t,n)=>(n in s&&(t[n]=s[n](e[n])),t)),{})}}(t=e.Parser||(e.Parser={}))}(FB||(FB={}));class LB{constructor(e,t,n,r,i,o,s=q.create("DAPIService")){this._store=t,this._actions=n,this._cookiesHelper=r,this._apiService=i,this._telemetry=o,this._log=s,this._lastDataFetchTimestamp=void 0,this._fetchAllProps=async()=>{try{const e=await this._api.get().load(),t=FB.Parser.parseProps(e);return this._lastDataFetchTimestamp=Date.now(),this._log.info("fetched all DAPI props",t),await this._actions.dapi.setSettings(t),t}catch(e){return this._log.warn("DAPI SERVICE | fetch properties fail. Message: ",e.message),this._telemetry.getDapiPropError(e.statusCode,e.body),{}}},this.fetchAllPropsRateLimited=()=>void 0===this._lastDataFetchTimestamp||Date.now()-this._lastDataFetchTimestamp>Ia?this._fetchAllProps():this._store.get(["dapi"]).then((e=>e.dapi||{})),this.setProp=async(e,t)=>{const n={[e]:t};try{await this._api.get().save(n)}catch(t){this._log.error(`Error by setting prop ${e} to dapi`,t),Kt().setDapiPropError(t&&t.statusCode,`Error saving ${e} prop to DAPI. ${t.body}`)}await this._actions.dapi.modifySettings(n),Mc("set-dapi-prop",e,t)},this.updateProps=async()=>{const{dapi:e}=await this._store.get(["dapi"]),t=await this._fetchAllProps();this._log.info("new settings",t),"true"===t.isLlamaInstalled&&(await this._actions.settings.setLlamaInstalled(),await this._cookiesHelper.setLlamaInstalled(),await this.setProp("isLlamaInstalled","false"),Nc.desktopIntegrationEnabled("dapi-migration")),!(null==t?void 0:t.dialectStrong)&&(null==e?void 0:e.dialectStrong)&&await this.setProp("dialectStrong",null==e?void 0:e.dialectStrong)},this._api=(0,h.Vo)((()=>new jB(e,this._apiService.ajaxFactory,this._apiService.fingerprints)))}}const GB=fl.Dy.literalUnion("company_dialect",fl.Dy.literalArray(["american","british","canadian","australian","indian"])),BB=Ur.G0([GB,Ur.MQ]),zB=(Ur.w3({dialect:Ur.G0([BB,Ur.S1])}),Ur.w3({dialect:Ur.G0([BB,Ur.S1]),dialectLockedByInstitution:Ur.O7}));class VB extends Kc.Base{constructor(e,t,n){super(),this._url=e,this._ajaxFactory=t,this._fingerprints=n,this._ajax=this._ajaxFactory({requestExtender:Yc.toHeaderAppender(this._fingerprints)})}static getDefaultUrl(e){return`https://capi${e}/api/configuration/language/v1/settings`}getDialectSettings(){const e=gl.post(this._url,"/get");return this._ajax.json(e,zB)}}class qB extends Kc.Base{constructor(e,t,n){super(),this._url=e,this._ajaxFactory=t,this._fingerprints=n,this._ajax=this._ajaxFactory({requestExtender:Fingerprints.toHeaderAppender(this._fingerprints)})}static getDefaultUrl(e){return`https://goldengate${e}/configuration/company-language/v1/institution`}getInstitutionDialectSettings(){const e=RequestBuilder.get(this._url,"/settings");return this._ajax.json(e,InstitutionDialectSettingsIOType)}setInstitutionDialect(e){const t=RequestBuilder.patch(this._url,"/settings/dialect").json(e);return this._ajax.empty(t)}}class HB{constructor(e,t,n,r,i=q.create("bg.api.dialectService")){this._actions=n,this._telemetry=r,this._log=i,this._loadingSettingsPromise=null,this._api=(0,h.Vo)((()=>new VB(e,t.ajaxFactory,t.fingerprints)))}update(){return this._loadingSettingsPromise||(this._loadingSettingsPromise=this._update(),this._loadingSettingsPromise.finally((()=>{this._loadingSettingsPromise=null}))),this._loadingSettingsPromise}reset(){this._loadingSettingsPromise=null}async _update(){try{const e=await this._api.get().getDialectSettings();return await this._actions.dialectSettings.setDialectSettings(e),e}catch(e){return this._log.error("Dialect Settings loading error",e),this._telemetry.dialectSettingsError(e),HB.EmptyDialectSettings}}}function WB(e){var t,n;return(0,Yi.a)([(0,jr.T)((null===(t=ZJ().browserApi.permissions)||void 0===t?void 0:t.removed)||(0,ta.of)(),(null===(n=ZJ().browserApi.permissions)||void 0===n?void 0:n.added)||(0,ta.of)()).pipe((0,lj.O)(null),(0,Lr.w)((()=>{var e;const t=null===(e=ZJ().browserApi.permissions)||void 0===e?void 0:e.contains;return t?(0,Lc.D)(t({origins:[`https://*.${$e()}/*`]})):(0,ta.of)(!0)}))),e()]).pipe((0,Ki.h)((([e])=>!e)))}HB.EmptyDialectSettings={dialect:null,dialectLockedByInstitution:!1};var $B=(e=>(e.Active="ACTIVE",e.Suspended="SUSPENDED",e.PendingDelete="PENDING_DELETE",e))($B||{});const XB=class e extends Kc.Base{constructor(e,t,n){super(),this._url=e,this._ajaxFactory=t,this._fingerprints=n,this._ajax=this._ajaxFactory({requestExtender:Yc.toHeaderAppender(this._fingerprints)})}static getDefaultUrl(e){return`https://gateway${e}/institution/api/institution/admin`}getInstitutionInfo(){const t=gl.get(this._url,"institution_info");return this._ajax.json(t,e.IOType)}getInstitutionSsoInfo(){const t=gl.get(this._url,"sso_info");return this._ajax.json(t,e.SsoInfoType)}getInstitutionScimInfo(){const t=gl.get(this._url,"scim_info");return this._ajax.json(t,e.ScimInfoType)}updateInstitutionSettings(e){const t=gl.post(this._url,"update_settings").json(e);return this._ajax.empty(t)}updateRequestToJoinSettings(e){const t=gl.put(this._url,"settings/request_to_join").json(e);return this._ajax.empty(t)}updateName(e){const t=gl.post(this._url,"update_name").queryParam("name",e);return this._ajax.empty(t)}addMembers(t){const n=gl.post(this._url,"users/add").json(t);return this._ajax.json(n,e.AddMembersResponseIOType)}checkMembersExport(e){const t=gl.get(this._url,`export/requests/${e}/link`);return this._ajax.json(t)}uploadMembersFile(e,t){const n=gl.put(this._url,"upload/file/load").queryParam("action",t).multipartFormData("file",e);return this._ajax.json(n)}assignToGroupsUsingFile(e){const t=gl.post(this._url,`/upload/file/override/groups/${e}`);return this._ajax.empty(t)}downloadImportTemplate(){const e=gl.get(this._url,"/upload/file/template");return this._ajax.file(e)}getMembersFileStatistic(t){const n=gl.get(this._url,`/upload/file/load/result/${t}`);return this._ajax.json(n,e.MembersFileStatisticIOType)}removeMembersUsingFile(e){const t=gl.post(this._url,`/upload/file/remove/${e}`);return this._ajax.empty(t)}addMembersUsingFile(e){const t=gl.post(this._url,`/upload/file/add/${e}`);return this._ajax.empty(t)}overrideMembersUsingFile(e){const t=gl.post(this._url,`/upload/file/override/${e}`);return this._ajax.empty(t)}cancelEmailChangeRequest(e){const t=gl.post(this._url,"/email/change/cancel").json({email:e});return this._ajax.empty(t)}updateProvisioningSettings(e){const t=gl.post(this._url,"update_provisioning_settings").json({provisioningEnabled:e});return this._ajax.empty(t)}getUnprovisionedList(){const e=gl.get(this._url,"scim/unprovisioned/list");return this._ajax.file(e)}getUnprovisionedCount(){const e=gl.get(this._url,"scim/unprovisioned/count");return(0,tS.zG)(this._ajax.json(e),this._ajax.map((e=>e.count)))}getDomains(){const t=gl.get(this._url,"domains");return this._ajax.json(t,e.GetDomainsResponseIOType)}getJoinActivity(t,n){const r=gl.get(this._url,"join_activity").queryParam("start_date",t.toISOString()).queryParam("end_date",n.toISOString());return this._ajax.json(r,e.GetJoinActivityResponseIOType)}getSuggestedInvitees(t){const n=gl.get(this._url,"suggested_invitees").queryParam("prefix",t);return this._ajax.json(n,e.GetSuggestedInviteesResponseIOType)}getInviteNudgeEligibility(t){const n=gl.post(this._url,"invitees/eligible").json({emails:t});return this._ajax.json(n,e.GetInviteNudgeEligibilityResponseIOType)}};XB.OnboardingType=AS.PartialInstitutionInfo.onboardingTypeCodec,XB.OrganizationType=AS.PartialInstitutionInfo.organizationTypeCodec,XB.InstitutionUserState=AS.PartialInstitutionInfo.institutionUserStateCodec,XB.IOType=Ur.jV([Ur.w3({id:Ur.pk,name:Ur.Z_,nomosOrganizationId:fl.Dy.option(Ur.Z_),hideStudents:Ur.O7,msOutlookEnabled:Ur.O7,msWordEnabled:Ur.O7,seats:Ur.pk,enrolled:Ur.pk,expirationDate:fl.Dy.date(),business:Ur.O7,ssoEnabled:Ur.O7,ssoActivated:Ur.O7,ssoId:fl.Dy.option(Ur.Z_),k12:Ur.O7,newEmail:fl.Dy.option(Ur.Z_),changeStatus:fl.Dy.literalUnion("changeStatus",fl.Dy.literalArray(["admin_email_init","admin_email_approved","admin_transfer_init","none"])),userTypes:Ur.r$({Active:Ur.pk,Invited:Ur.pk,Admins:Ur.pk,Removed:Ur.pk,AdminsOnly:Ur.pk,totalPaid:Ur.pk}),brandTonesEnabled:Ur.O7,provisioningEnabled:Ur.O7,provisioningSelfServeEnabled:Ur.O7,groupsCount:Ur.pk,groupRolesEnabled:Ur.O7,inviteLinkActivated:Ur.O7,requestToJoinActivated:Ur.O7,requestToJoinBlocked:Ur.O7,isEligibleForAutojoin:Ur.O7,proFlowEnabled:Ur.O7}),Ur.r$({onboardingType:XB.OnboardingType,organizationType:XB.OrganizationType})]),XB.ScimInfoType=Ur.w3({institutionId:Ur.pk,name:Ur.Z_,ssoEnabled:Ur.O7,ssoActivated:Ur.O7,provisioningEnabled:Ur.O7,provisioningSelfServeEnabled:Ur.O7,ssoId:fl.Dy.option(Ur.Z_),seats:Ur.pk}),XB.SsoInfoType=Ur.w3({institutionId:Ur.pk,name:Ur.Z_,ssoEnabled:Ur.O7,ssoActivated:Ur.O7,ssoId:fl.Dy.option(Ur.Z_),seats:Ur.pk,enrolled:Ur.pk,totalPaid:Ur.pk}),XB.AnalyticsDataItemType=Ur.w3({date:fl.Dy.date(),value:Ur.pk}),XB.AnalyticsDataType=Ur.w3({total:Ur.pk,data:Ur.IX(XB.AnalyticsDataItemType)}),XB.MemberIOType=Ur.jV([Ur.w3({email:Ur.Z_,name:Ur.Z_,isAdmin:Ur.O7,stateDateTime:fl.Dy.date(),provisioningStatus:fl.Dy.option(fl.Dy.createStringEnum($B,"provisioningStatus"))}),Ur.r$({group:Ur.w3({id:Ur.pk,name:Ur.Z_})}),Ur.G0([Ur.w3({state:Ur.i0("Success"),uid:Ur.pk,registrationDate:fl.Dy.date(),lastActivity:fl.Dy.option(fl.Dy.date()),role:fl.Dy.literalUnion("role",fl.Dy.literalArray([AS.InstitutionRoleName.Admin,AS.InstitutionRoleName.AccountManager,AS.InstitutionRoleName.InstitutionUser]))}),Ur.w3({state:Ur.i0("Invited")}),Ur.w3({state:Ur.i0("Removed"),registrationDate:fl.Dy.option(fl.Dy.date()),lastActivity:fl.Dy.option(fl.Dy.date())}),Ur.w3({state:Ur.i0("Pending")}),Ur.w3({state:Ur.i0("Error")}),Ur.w3({state:Ur.i0("Removing")}),Ur.w3({state:Ur.i0("Active")})])]),XB.MembersIOType=Ur.w3({total:Ur.pk,data:Ur.IX(XB.MemberIOType)}),XB.AddMembersResponseIOType=Ur.IX(Ur.Z_),XB.MembersFileStatisticIOType=Ur.w3({alreadyAssigned:Ur.w3({total:Ur.pk,data:Ur.IX(Ur.Z_)}),left:Ur.w3({total:Ur.pk,data:Ur.IX(Ur.Z_)}),inner:Ur.w3({total:Ur.pk,data:Ur.IX(Ur.Z_)}),right:Ur.w3({total:Ur.pk,data:Ur.IX(Ur.Z_)}),groupsUpdates:Ur.IX(Ur.w3({addedExistingInstitutionMembersCount:Ur.pk,groupName:Ur.Z_,isNew:Ur.O7,newMembersCount:Ur.pk,removedMembersCount:Ur.pk}))}),XB.InstitutionDomain=Ur.dt({domain:Ur.Z_,verified:Ur.O7,isAdminVerified:Ur.O7,isDomainCaptured:Ur.O7}),XB.GetDomainsResponseIOType=Ur.dt({domains:Ur.IX(XB.InstitutionDomain)}),XB.GetJoinActivityResponseIOType=Ur.r$({ACCESS_CODE:Ur.pk,FORCED_MODE:Ur.pk,DOMAIN_CAPTURE:Ur.pk,INVITE_EMAIL:Ur.pk,INVITE_LINK:Ur.pk,SEMI_AUTOJOIN:Ur.pk,AUTOJOIN:Ur.pk,REQUEST_TO_JOIN:Ur.pk}),XB.GetSuggestedInviteesResponseIOType=Ur.dt({suggestedInvitees:Ur.IX(Ur.dt({id:Ur.pk,email:Ur.Z_}))}),XB.GetInviteNudgeEligibilityResponseIOType=Ur.dt({emails:Ur.IX(Ur.Z_)});let KB=XB;class YB{constructor(e,t){this._log=q.create("InstitutionAdminService"),this._eligibleInviteesCache=new Map,this.clearEligibleInviteesCache=()=>{this._eligibleInviteesCache.clear()},this.getEligibleInvitees=e=>{const t=e.slice(0,10),n=this.getEligibleInviteesCacheEntry(t);return n?Promise.resolve({emails:n}):this._api.get().getInviteNudgeEligibility(t).then((e=>(this.setEligibleInviteesCacheEntry(t,e.emails),e))).catch((e=>(this._log.error("[InstitutionAdminService] Unable to fetch eligible invitees:",e),{emails:[]})))},this.setEligibleInviteesCacheEntry=(e,t)=>{this._eligibleInviteesCache.size>=10&&this.clearEligibleInviteesCache();const n=this.getInviteesKey(e);this._eligibleInviteesCache.set(n,t)},this.getEligibleInviteesCacheEntry=e=>{const t=this.getInviteesKey(e);return this._eligibleInviteesCache.get(t)},this.getInviteesKey=e=>{const t=e.sort(((e,t)=>e.localeCompare(t)));return JSON.stringify(t)},this._api=(0,h.Vo)((()=>new KB(e,t.ajaxFactory,t.fingerprints)))}}var ZB,JB,QB,ez,tz,nz,rz;!function(e){e.success="success",e.failure="failure",e.normal_close="normal_close"}(ZB||(ZB={})),function(e){e.firstPartyIsolation="firstPartyIsolation",e.emptyCookies="emptyCookies",e.unknown="unknown"}(JB||(JB={})),function(e){e.success="success",e.failed="failed"}(QB||(QB={})),function(e){e.v1="v1",e.v2="v2"}(ez||(ez={})),function(e){e.metricToKey=(e,t,n)=>JSON.stringify({name:e,labels:t?Object.keys(t).filter((e=>(0,h.Nf)(t[e]))).sort().map((e=>({key:e,value:String(t[e])}))):[],...n?{reportInterval:n}:{}}),e.versionToInt=e=>{try{return Number(Array(3).fill("0").reduce(((e,t,n)=>(void 0===e[n]&&(e[n]=t),e)),String(e).split(".")).map((e=>e.padStart(4,"0"))).join(""))}catch(e){return 0}},e.getRatesData=e=>Object.keys(e).filter((t=>e[t]>0)).map((t=>{var n,r;const i=JSON.parse(t);return{name:`extension.${i.name}`,type:"counter",value:e[t],labels:[...null!==(n=i.labels)&&void 0!==n?n:[]],report_interval:null!==(r=i.reportInterval)&&void 0!==r?r:"5m"}}))}(tz||(tz={})),function(e){e.SUCCESS="Success",e.BAD_API_KEY="BadApiKey",e.BAD_PARAMS="BadParams",e.BAD_JSON_BODY="BadJsonBody",e.QUEUE_EMAIL_ERROR="QueueEmailError",e.GENERIC_ERROR="GenericError",e.INVALID_EMAIL_ADDRESS_ERROR="InvalidEmailAddressError",e.DATABASE_ERROR="DatabaseError",e.EMAIL_ALREADY_EXISTS="EmailAlreadyExists",e.FORBIDDEN="Forbidden",e.JWT_USER_IDENTIFIERS_MISMATCHED="JwtUserIdentifiersMismatched",e.INVALID_JWT_PAYLOAD="InvalidJwtPayload",e.BAD_AUTHORIZATION_HEADER="BadAuthorizationHeader"}(nz||(nz={})),function(e){e.GDocsSidebarInitialized="GDocsSidebarInitialized",e.NonGDocsFirstAlertLookedAt="NonGDocsFirstAlertLookedAt",e.UserSessionInitialized="UserSessionInitialized",e.UserEngagedByAlertsAccepted="UserEngagedByAlertsAccepted",e.PauseInTyping="PauseInTyping"}(rz||(rz={}));const iz="Web",oz="extension";class sz{constructor(e,t,n,r,i=N().appConfig.iterable.urls){this._json=e,this._miseService=t,this._experimentClient=n,this._telemetry=r,this._urls=i,this._log=q.create("universal.bg.iterable.service"),this.initialize=(e,t)=>{this._api=e,this._jwt=t},this.refreshIterableClientAccessTokenIfNull=async e=>{if(!this._api||!this._jwt){const t=`IterableService request: ${e} failed: api key or token is null`;return this._log.error(t),this._telemetry.logIterableApi(t),this._telemetry.iterableClientAccessTokenIsNull(),await this.refreshIterableClientAccessToken(!0)}return!0},this.refreshIterableClientAccessToken=async(e=!1)=>{try{const t="Refreshing Iterable client access token";this._log.debug(t),this._telemetry.logIterableApi(t);const n=await this._miseService.getIterableClientAccessToken(e);if(this._telemetry.refreshIterableClientAccessToken(QB.success),n)return this.initialize(n.apiKey,n.jwtToken),!0}catch(e){const t=`Refreshing Iterable client access token failed: ${e.code}:${e.message}`;this._log.error(t),this._telemetry.logIterableApi(t),this._telemetry.refreshIterableClientAccessToken(QB.failed,e.code)}return!1},this.getInAppMessages=async(e,t=2)=>{const n=this._urls.getInAppMessages,r={userId:e,count:"10",platform:iz,packageName:oz},i=gl.get(n).queryParams(r);this._logInfo(`IterableService request: ${n}`);try{if(await this.refreshIterableClientAccessTokenIfNull(n)){const e=await this._handleRequest(i);if(this._telemetry.iterableGetIPM(QB.success),e&&e.inAppMessages)return((e=[])=>e.sort(((e,t)=>e.priorityLevel-t.priorityLevel||e.createdAt-t.createdAt)))(((e=[])=>e.filter((e=>{var t,n;return"never"!==(null===(t=e.trigger)||void 0===t?void 0:t.type)&&!!(null===(n=e.content)||void 0===n?void 0:n.html)})))(e.inAppMessages))}return Promise.resolve(void 0)}catch(r){return this._telemetry.iterableGetIPM(QB.failed,r.code,t),await this._handleRequestError(this.getInAppMessages,e,n,r.message,t)}},this.track=async(e,t=2)=>{const n=this._urls.track,r=gl.post(n).json(e);this._logInfo(`IterableService request: ${n}`);try{if(await this.refreshIterableClientAccessTokenIfNull(n)){const e=await this._handleTrackRequest(r);return this._telemetry.iterableCustomEvent(QB.success),e}return}catch(r){return this._telemetry.iterableCustomEvent(QB.failed,r.code,t),await this._handleTrackRequestError(this.track,e,n,r.message,t)}},this.trackInAppOpen=async(e,t=2)=>{var n,r;const i=this._urls.trackInAppOpen,o=null!==(n=e.campaignId)&&void 0!==n?n:"",s=null!==(r=e.messageId)&&void 0!==r?r:"",a=gl.post(i).json(this._removeNonIterableAPIFields(e));this._logInfo(`IterableService request: ${i} campaignId: ${o} messageId: ${s}`);try{if(await this.refreshIterableClientAccessTokenIfNull(i)){const e=await this._handleTrackRequest(a);return this._telemetry.iterableIPMOpen(QB.success,void 0,void 0,o),e}return}catch(n){return this._telemetry.iterableIPMOpen(QB.failed,n.code,t,o),await this._handleTrackRequestError(this.trackInAppOpen,e,i,n.message,t)}},this.trackInAppClose=async(e,t=2)=>{var n,r;const i=this._urls.trackInAppClose,o=null!==(n=e.campaignId)&&void 0!==n?n:"",s=null!==(r=e.messageId)&&void 0!==r?r:"",a=gl.post(i).json(this._removeNonIterableAPIFields(e)),c=e.closeAction||"unknown";this._logInfo(`IterableService request: ${i} campaignId: ${o} messageId: ${s}`);try{if(await this.refreshIterableClientAccessTokenIfNull(i)){const e=await this._handleTrackRequest(a);return this._telemetry.iterableIPMClose(QB.success,c,void 0,void 0,o),e}return}catch(n){return this._telemetry.iterableIPMClose(QB.failed,c,n.code,t,o),await this._handleTrackRequestError(this.trackInAppClose,e,i,n.message,t)}},this.trackInAppConsume=async(e,t=2)=>{var n,r;const i=this._urls.trackInAppConsume,o=null!==(n=e.campaignId)&&void 0!==n?n:"",s=null!==(r=e.messageId)&&void 0!==r?r:"",a=gl.post(i).json(this._removeNonIterableAPIFields(e)),c=e.deleteAction||"unknown";this._logInfo(`IterableService request: ${i} campaignId: ${o} messageId: ${s}`);try{if(await this.refreshIterableClientAccessTokenIfNull(i)){const e=await this._handleTrackRequest(a);return this._telemetry.iterableIPMDelete(QB.success,c,void 0,void 0,o),e}return}catch(n){return this._telemetry.iterableIPMDelete(QB.failed,c,n.code,t,o),await this._handleTrackRequestError(this.trackInAppConsume,e,i,n.message,t)}},this.trackInAppClick=async(e,t=2)=>{var n,r;const i=this._urls.trackInAppClick,o=null!==(n=e.campaignId)&&void 0!==n?n:"",s=null!==(r=e.messageId)&&void 0!==r?r:"",a=gl.post(i).json(this._removeNonIterableAPIFields(e));this._logInfo(`IterableService request: ${i} campaignId: ${o} messageId: ${s}`);try{if(await this.refreshIterableClientAccessTokenIfNull(i)){const e=await this._handleTrackRequest(a);return this._telemetry.iterableIPMClick(QB.success,void 0,void 0,o),e}return}catch(n){return this._telemetry.iterableIPMClick(QB.failed,n.code,t,o),await this._handleTrackRequestError(this.trackInAppClick,e,i,n.message,t)}},this.userUpdate=async(e,t=2)=>{const n=this._urls.userUpdate,r={userId:e},i=gl.post(n).json(r);this._logInfo(`IterableService request: ${n}`);try{if(await this.refreshIterableClientAccessTokenIfNull(n)){const e=await this._handleTrackRequest(i);return this._telemetry.iterableUserUpdate(QB.success),e}return}catch(r){return this._telemetry.iterableUserUpdate(QB.failed,r.code,t),await this._handleTrackRequestError(this.userUpdate,e,n,r.message,t)}}}_handleRequest(e){const t=this._appendAuthHeader(e);return this._json(t)}async _handleRequestError(e,t,n,r,i){const o=this._parseErrorMessage(r),s=`IterableService request: ${n} failed: ${o.code}:${o.msg}`;if(this._log.error(s),this._telemetry.logIterableApi(s),o.code===nz.INVALID_JWT_PAYLOAD||o.code===nz.JWT_USER_IDENTIFIERS_MISMATCHED||o.code===nz.BAD_API_KEY||o.code===nz.BAD_AUTHORIZATION_HEADER){const r=`IterableService request: ${n} retry: ${i}`;if(this._log.debug(r),this._telemetry.logIterableApi(r),i>0){await(0,Ke.gw)(ka);if(await this.refreshIterableClientAccessToken())return e(t,i-1)}}return Promise.resolve(void 0)}_handleTrackRequest(e){const t=this._appendAuthHeader(e);return this._json(t)}async _handleTrackRequestError(e,t,n,r,i){var o,s;const a=null!==(o=t.campaignId)&&void 0!==o?o:"",c=null!==(s=t.messageId)&&void 0!==s?s:"",l=this._parseErrorMessage(r),u=`IterableService track request: ${n} failed: ${l.code}:${l.msg} campaignId: ${a} messageId: ${c}`;if(this._log.error(u),this._telemetry.logIterableApi(u),l.code===nz.INVALID_JWT_PAYLOAD||l.code===nz.JWT_USER_IDENTIFIERS_MISMATCHED||l.code===nz.BAD_API_KEY||l.code===nz.BAD_AUTHORIZATION_HEADER){const r=`IterableService track request: ${n} retry: ${i} campaignId: ${a} messageId: ${c}`;if(this._log.debug(r),this._telemetry.logIterableApi(r),i>0){await(0,Ke.gw)(ka);if(await this.refreshIterableClientAccessToken())return e(t,i-1)}}return Promise.resolve(void 0)}_appendAuthHeader(e){return e.header("Api-Key",this._api).header("Authorization",`Bearer ${this._jwt}`)}_parseErrorMessage(e){try{return JSON.parse(e)}catch(t){return{code:"error",msg:e}}}_logInfo(e){this._log.info(e),this._telemetry.logIterableApi(e)}_removeNonIterableAPIFields(e){const{campaignId:t,...n}=e;return n}}class az{constructor(e,t,n,r,i){this._miseApiUrl=e,this._json=t,this._telemetry=n,this._store=r,this._storeActions=i,this._log=q.create("universal.bg.mise.service"),this._handleResult=e=>this._json(e),this._fetchIterableAccessToken=`${this._miseApiUrl}/iterable/access/token`}async getIterableClientAccessToken(e=!0){if(e){const{mise:e}=await this._store.get(["mise"]);if((null==e?void 0:e.clientAccessToken)&&e.clientAccessToken.timestamp+Oa(6)>Date.now()){const t="Getting Iterable client access token from storage";return this._log.info(t),this._telemetry.logMISeApi(t),{apiKey:e.clientAccessToken.apiKey,jwtToken:e.clientAccessToken.jwtToken}}}try{const e="Getting Iterable client access token from MISe";this._log.info(e),this._telemetry.logMISeApi(e);const t=gl.get(this._fetchIterableAccessToken),n=await this._handleResult(t);return n&&await this._storeActions.mise.setClientAccessToken({apiKey:n.apiKey,jwtToken:n.jwtToken,timestamp:Date.now()}),this._telemetry.getIterableAccessToken(QB.success),n}catch(e){const t=`Failed to get Iterable client access token ${e.code}:${e.message}`;throw this._log.error(t),this._telemetry.logMISeApi(t),this._telemetry.getIterableAccessToken(QB.failed,e.code),e}}}const cz=e=>"ensureMigrationCompleted"in e,lz=q.create("universal/bg/rpc/interframe");function uz(e){return"object"==typeof e&&e&&"clientId"in e||!1}function dz(e){return e&&"object"==typeof e&&e.connectionId&&typeof e.connectionId&&"data"in e}function hz(e,t,n=e+"-response",r=t.getTopFrameId()){const i=(n,i,o)=>{var s;if(o&&dz(n)&&uz(n.data)){const i=JSON.stringify([null!==(s=o.frameId)&&void 0!==s?s:null,n.data.clientId]);t.sendTo({tabId:o.tabId,frameId:r},e+"-"+n.connectionId,{...n.data,clientId:i})}else lz.warn(`Malformed proxy messages in multi bridge with type ${e}`)},o=(e,r,i)=>{if(i&&dz(e)&&uz(e.data)){const[r,o]=JSON.parse(e.data.clientId);t.sendTo({tabId:i.tabId,frameId:r},n+"-"+e.connectionId,{...e.data,clientId:o})}else lz.warn(`Malformed proxy messages in multi bridge with type ${n}`)};return t.on(e,i),t.on(n,o),{dispose(){t.off(e,i),t.off(n,o)}}}var pz;!function(e){e.empty="empty",e.local="local",e.server="server",e.localOverride="localOverride"}(pz||(pz={}));class gz extends Error{constructor(e,t){const n=al.qq.report(t);super(e+(n.length>1?`:\n- ${n.join("\n- ")}`:": "+n[0])),this.name="ParseError",this.formattedErrors=n,this.errors=t.left}}const fz=new Ur.Dy("ISODate",(e=>e instanceof Date),((e,t)=>{if("string"==typeof e){const t=new Date(e);if(!isNaN(t.getTime()))return(0,Ur.Vp)(t)}return(0,Ur.Rn)(e,t)}),(e=>e.toISOString()));function mz(e,t){const n=(0,Ur.r$)(e,t);return new Ur.gc(null!=t?t:`partialAsUndefined(${n.name})`,n.is,((t,r)=>{if(!t||"object"!=typeof t)return n.validate(t,r);const i={...t};for(const t in e)t in i||(i[t]=void 0);return n.validate(i,r)}),n.encode,e)}function bz(e){return(0,Ur.G0)([e,Ur.S1])}function yz(e,t,n){return new Ur.Dy(null!=n?n:`withDefault(${e.name})`,e.is,((n,r)=>void 0===n?(0,Ur.Vp)(t):e.validate(n,r)),e.encode)}const _z=(0,Ur.r$)({chrome:Ur.O7,edge:Ur.O7,firefox:Ur.O7,safari:Ur.O7},"SwitchByBrowser");const vz=["ReaderReactions","Humanizer","Paraphraser","ExpertReview","AIDetector","Plagiarism"],wz=Ur.OT(Ur.r$({legacyStopWorkingDate:fz}),"SafariAppExtensionMigrationDynamicConfig"),Sz=Ur.OT(mz({enableByBrowser:_z}),"GmailSendEmailPopupDynamicConfig"),kz=Ur.dt({domain:Ur.Z_,matchSubdomains:Ur.O7,allowedOriginPatterns:Ur.G0([Ur.IX(Ur.Z_),Ur.S1])},"IframeIntegrationDomainRule"),Iz=Ur.OT(Ur.iG(Ur.dt({enableGeneric:yz(Ur.O7,!1),enableByDomain:yz(Ur.IX(kz),[]),disableByDomain:yz(Ur.IX(kz),[]),enableByBrowser:yz(_z,{chrome:!0,edge:!0})})),"IframeIntegrationDynamicConfig"),Cz=Ur.OT(Ur.dt({enableByBrowser:bz(_z),enableForGB:bz(Ur.O7),turnaroundTime:Ur.pk}),"ProofitDynamicConfig"),Ez=Ur.OT(Ur.r$({enableByBrowser:_z}),"ToneAIDynamicConfig"),Az=Ur.OT(Ur.r$({enableByBrowser:_z}),"EthicalAIDynamicConfig"),xz=Ur.OT(Ur.r$({enableByBrowser:_z}),"SingleCardAssistantDynamicConfig"),Tz=Ur.OT(Ur.r$({enableByBrowser:_z}),"CheetahDynamicConfig"),Oz=Ur.OT(mz({fetchTreatmentsOnWakeUp:Ur.dt({enabled:Ur.O7,clearCache:Ur.O7})}),"ManakinConfig"),Pz=Ur.OT(mz({disabled:Ur.O7,disabledByDomainPattern:Ur.IX(Ur.Z_)}),"GapTransformCardDynamicConfig"),Rz=Ur.OT(Ur.r$({enabled:Ur.O7,disabledByDomain:Ur.IX(Ur.Z_)}),"LlamaIntegrationDynamicConfig"),Dz=Ur.dt({domain:Ur.Z_,browser:bz(_z)},"AutocorrectDomainRule"),Nz=Ur.OT(mz({disabled:Ur.O7,bannedDict:Ur.IX(Ur.Z_),bannedCorrections:Ur.IX(Ur.bc([Ur.Z_,Ur.G0([Ur.Z_,Ur.lB])])),disabledByDomain:yz(Ur.IX(Dz),[])}),"AutocorrectDynamicConfig"),Uz=Ur.OT(Ur.r$({enableByBrowser:_z}),"IterableDynamicConfig"),Mz=Ur.OT(Ur.dt({waitDocumentBodyReady:bz(Ur.O7)}),"CrashRateReportingConfig"),jz=Ur.OT(Ur.r$({min:Ur.pk,max:Ur.pk}),"NumberRange"),Fz=Ur.r$({textLength:jz,mappings:jz,failurePercentage:jz,tableMode:Ur.Z_}),Lz=Ur.OT(Ur.r$({enabled:Ur.O7,textLength:jz,mappings:jz,failurePercentage:jz,tableMode:Ur.Z_,orAnyOf:Ur.IX(Fz),grammarlyEmployeeRule:Fz}),"GdocsAdvancedMappingDebugReportingConfig"),Gz=Ur.OT(Ur.r$({gButton:Ur.r$({zIndex:Ur.pk}),highlights:Ur.r$({zIndex:Ur.pk})}),"GDocsStyles"),Bz=Ur.OT(Ur.dt({advancedMappingDebugReporting:bz(Lz),advancedMappingTimeout:bz(Ur.pk),useExtractedTextSelection:bz(Ur.O7),highlightColors:bz(Ur.IX(Ur.Z_)),underlineColors:bz(Ur.IX(Ur.Z_)),hideInlineCardWhenOverlappedWithSelectors:bz(Ur.IX(Ur.Z_)),textCoverageThreshold:bz(Ur.pk),advancedMappingRetryTimeout:bz(Ur.pk),styles:bz(Gz)}),"GDocsCanvasConfigDynamicConfig"),zz=Ur.OT(Ur.r$({disabled:Ur.O7,disableByBrowser:_z,disableByDomain:Ur.Bk(Ur.Z_)}),"ReaderDynamicConfig"),Vz=Ur.OT(Ur.r$({enabled:Ur.O7,maximumAppearances:Ur.pk}),"SupportUkraineCardDynamicConfig"),qz=Ur.OT(Ur.r$({siteDomains:Ur.IX(Ur.Z_)}),"IpmLlamaPreferredWebsitesConfig"),Hz=Ur.OT(Ur.r$({disabled:Ur.O7,disableByBrowser:_z,disableByDomain:Ur.Bk(Ur.Z_)}),"ConsistencyCardDynamicConfig"),Wz=Ur.OT(Ur.r$({enabled:Ur.O7,excludeClassNames:Ur.Bk(Ur.Z_),excludeSelectors:Ur.Bk(Ur.Z_)}),"SlatejsDynamicConfig"),$z=Ur.OT(Ur.r$({triggerURLs:Ur.Bk(Ur.Z_)}),"DraftAIUpsellDynamicConfig"),Xz=Ur.OT(Ur.dt({patterns:Ur.IM(Ur.Z_,Ur.dt({regex:Ur.Z_,priority:Ur.pk,description:Ur.Z_,prefixes:Ur.IX(Ur.Z_)}))}),"DlpConfigurationDynamicConfig"),Kz=Ur.OT(Ur.r$({gButtonHoverTooltipText:Ur.Z_,popupTitleHTML:Ur.Z_,popupBodyHTML:Ur.IX(Ur.Z_),popupLearnMoreButtonLabelHTML:Ur.Z_,popupLearnMoreButtonLink:Ur.Z_}),"StandWithUkraineGrammarlySuspendedPopupDynamicConfig"),Yz=Ur.OT(Ur.r$({popupTitleHTML:Ur.Z_,popupBodyHTML:Ur.IX(Ur.Z_),popupHelpButtonLabelHTML:Ur.Z_,popupHelpButtonLink:Ur.Z_,popupIconResetButtonLabelHTML:Ur.Z_}),"StandWithUkraineBannerPopupDynamicConfig"),Zz=Ur.OT(Ur.dt({verticalLocation:Ur.G0([Ur.i0("bottom"),Ur.i0("top")]),horizontalLocation:Ur.G0([Ur.i0("left"),Ur.i0("right")]),offsetX:Ur.pk,offsetY:Ur.pk})),Jz=Ur.OT(Ur.jV([Ur.dt({name:Ur.Z_,domain:Ur.Z_,pathname:Ur.Z_}),Ur.r$({reparse:Ur.O7,buttonPosition:Zz})]),"CitationBuilderSource"),Qz=Ur.OT(Ur.r$({disabled:Ur.O7,disableByBrowser:_z,sources:Ur.IX(Jz),blockedDomains:Ur.IX(Ur.Z_)}),"CitationBuilderDynamicConfig"),eV=Ur.OT(Ur.dt({disableByDomain:Ur.Bk(Ur.Z_)}),"AppActionDynamicConfig"),tV=Ur.r$({insertText:Ur.Z_,insertTextWithFormatting:Ur.Z_,insertTextWithImages:Ur.Z_,insertTextWithLinks:Ur.Z_,pasteImages:Ur.Z_}),nV=Ur.OT(mz({rules:Ur.Bk(Ur.dt({domainPattern:Ur.Z_,capabilities:bz(tV)}))}),"GOSCustomizationDynamicConfig"),rV=Ur.OT(Ur.r$({enableByDomain:Ur.Bk(Ur.r$({domain:Ur.Z_,matchSubdomains:Ur.O7,rules:Ur.r$({maxNumberOfNodes:Ur.pk,maxTextLength:Ur.pk})}))}),"LargeDocumentInactiveDynamicConfig"),iV=Ur.r$({disableTransformation:Ur.O7,forceUseBatchReplacementApproach:Ur.O7}),oV=Ur.OT(Ur.r$({rules:Ur.Bk(Ur.dt({domain:Ur.Z_,matchSubdomains:Ur.O7,rules:iV}))})),sV=Ur.OT(Ur.r$({alertService:Ur.OT(Ur.r$({applyAlertsDelayMs:Ur.OT(Ur.pk),applyAlertsPerformBatchReplacementsTimeoutMs:Ur.OT(Ur.pk),applyAlertsWaitForTextMapContentChangesTimeoutMs:Ur.OT(Ur.pk)}))}),"OggyDynamicConfig"),aV=Ur.G0([Ur.i0("selection"),Ur.i0("idle"),Ur.i0("signaling"),Ur.i0("pushed_content")]),cV=Ur.G0([Ur.jV([Ur.wY({kind:Ur.i0("byDomain"),domain:Ur.OT(Ur.Z_)}),Ur.r$({matchSubdomains:Ur.OT(Ur.O7),vBarTypes:Ur.OT(Ur.IX(aV))})]),Ur.jV([Ur.wY({kind:Ur.i0("byIntegrationName"),integrationName:Ur.OT(Ur.Z_)}),Ur.r$({vBarTypes:Ur.OT(Ur.IX(aV)),isRegex:Ur.OT(Ur.O7)})])]),lV=Ur.OT(Ur.r$({featureInitDebounceMs:Ur.OT(Ur.pk),afterScrollCardPinTimeoutMs:Ur.OT(Ur.pk),rewriteAckTimeoutMs:Ur.OT(Ur.pk),rewriteLoadingTimeoutMs:Ur.OT(Ur.pk),waitForLatestCheckingRevisionTimeoutMs:Ur.OT(Ur.pk),coolDownDeactivationTimeoutMs:Ur.OT(Ur.pk),coolDownDeactivationCheckIntervalMs:Ur.OT(Ur.pk),allowList:Ur.OT(Ur.IX(cV)),blockList:Ur.OT(Ur.IX(cV))}),"VBarsDynamicConfig"),uV=Ur.G0([Ur.i0(vz[0]),Ur.i0(vz[1]),...vz.slice(2).map((e=>Ur.i0(e)))]),dV=Ur.G0([Ur.jV([Ur.wY({kind:Ur.i0("byDomain"),domain:Ur.OT(Ur.Z_)}),Ur.r$({matchSubdomains:Ur.OT(Ur.O7),agentNames:Ur.OT(Ur.IX(uV))})]),Ur.jV([Ur.wY({kind:Ur.i0("byIntegrationName"),integrationName:Ur.OT(Ur.Z_)}),Ur.r$({agentNames:Ur.OT(Ur.IX(uV)),isRegex:Ur.OT(Ur.O7)})])]),hV=Ur.OT(Ur.r$({allowList:Ur.OT(Ur.IX(dV)),blockList:Ur.OT(Ur.IX(dV))}),"AgentsDynamicConfig"),pV=Ur.G0([Ur.jV([Ur.wY({kind:Ur.i0("byDomain"),domain:Ur.OT(Ur.Z_)}),Ur.r$({matchSubdomains:Ur.OT(Ur.O7)})]),Ur.jV([Ur.wY({kind:Ur.i0("byIntegrationName"),integrationName:Ur.OT(Ur.Z_)}),Ur.r$({isRegex:Ur.OT(Ur.O7)})])]),gV=Ur.OT(Ur.r$({allowList:Ur.OT(Ur.IX(pV)),blockList:Ur.OT(Ur.IX(pV))}),"GButtonDynamicConfig"),fV=Ur.G0([Ur.jV([Ur.wY({kind:Ur.i0("byDomain"),domain:Ur.OT(Ur.Z_)}),Ur.r$({matchSubdomains:Ur.OT(Ur.O7)})]),Ur.wY({kind:Ur.i0("byIntegrationName"),integrationName:Ur.OT(Ur.Z_)})]),mV=Ur.OT(Ur.r$({allowList:Ur.OT(Ur.IX(fV)),blockList:Ur.OT(Ur.IX(fV)),touchTypistAvailableByInstitution:Ur.O7}),"TouchTypistDynamicConfig"),bV=Ur.OT(Ur.r$({urls:Ur.OT(Ur.r$({howItWorks:Ur.OT(Ur.Z_),learnMoreTransparency:Ur.OT(Ur.Z_),learnMoreSafety:Ur.OT(Ur.Z_),learnMoreControl:Ur.OT(Ur.Z_),reportAnIssue:Ur.OT(Ur.Z_),provideFeedback:Ur.OT(Ur.Z_)})),blockedDomains:Ur.IX(Ur.Z_)}),"HWRDynamicConfig"),yV=Ur.Bk(Ur.r$({metricName:Ur.Z_,value:Ur.OT(Ur.pk),byDomain:Ur.Bk(Ur.r$({domain:Ur.Z_,value:Ur.OT(Ur.pk)}))}),"SessionSamplingForMetricsDynamicConfig"),_V=Ur.OT(Ur.r$({rules:Ur.Bk(Ur.dt({domain:Ur.Z_,matchSubdomains:Ur.O7,enableHistoryLogger:Ur.O7}))},"LoggerDynamicConfig")),vV=Ur.OT(Ur.r$({domainAliasRules:Ur.Bk(Ur.dt({pattern:Ur.Z_,alias:Ur.Z_}))},"ServiceAvailabilityMetricsDynamicConfig")),wV=Ur.OT(Ur.r$({urls:Ur.OT(Ur.r$({agentSecurityUrl:Ur.OT(Ur.Z_),agentStoreUrl:Ur.OT(Ur.Z_),reportAnIssue:Ur.OT(Ur.Z_),agentSetupUrl:Ur.OT(Ur.Z_)}),"AgentDirectoryUrls")}),"AgentDirectoryDynamicConfig"),SV=Ur.OT(Ur.r$({samplingChance:Ur.OT(Ur.pk),intervalMinutes:Ur.OT(Ur.pk),maxLogsCount:Ur.OT(Ur.pk)}),"AgentsEventBusTelemetryDynamicConfig"),kV=Ur.iG(mz({safariAppExtensionMigration:wz,newRichTextFieldsEnabled:Ur.O7,fluidDisabledForFirefox:Ur.O7,fluidDisabledForSafari:Ur.O7,autocorrect:Nz,gmailSendEmailPopup:Sz,fullSentenceRewritesDisabled:Ur.O7,overrideKey:yz(Ur.Z_,"dynamicConfigOverrideKey"),iframeIntegration:Iz,showExtensionConflictPopup:Ur.O7,ungatingRenewalNotificationEnabled:Ur.O7,proofit:Cz,refreshExperimentsInterval:Ur.pk,quillJSCatchAllDisabled:Ur.O7,toneAI:Ez,requireAuthCookieAccess:Ur.O7,gapTransformCard:Pz,llamaIntegration:Rz,highlightsBlendingEnabled:Ur.O7,gDocsCanvasConfig:Bz,confidentialModeEnabled:Ur.O7,consistencyCard:Hz,slatejs:Wz,dlpEnabled:Ur.O7,dlpConfiguration:Xz,draftAIUpsell:$z,ethicalAI:Az,singleCardAssistant:xz,cheetah:Tz,reader:zz,standWithUkraineGrammarlySuspendedPopup:Kz,standWithUkraineBannerPopup:Yz,supportUkraineCard:Vz,ipmLlamaPreferredWebsites:qz,citationBuilder:Qz,iterable:Uz,manakin:Oz,crashRateReporting:Mz,appActions:eV,gOSCustomization:nV,monitoringCookiesAccessibilityEnabled:Ur.O7,largeDocumentInactive:rV,preserveFormatting:oV,oggy:sV,vBars:lV,hwr:bV,sessionSamplingForMetrics:yV,logger:_V,serviceAvailabilityMetrics:vV,touchTypist:mV,touchTypistAvailableByInstitution:Ur.O7,gButton:gV,agentDirectory:wV,agents:hV,agentsMessageBusTelemetry:SV}),"DynamicConfigMappedData"),IV={safariAppExtensionMigration:"safariAppExtensionMigration_1558396627629",newRichTextFieldsEnabled:"newRichTextFieldsEnabled_1567530773088",fluidDisabledForFirefox:"fluidDisabledForFirefox_1567530773089",fluidDisabledForSafari:"fluidDisabledForSafari_1567530773090",autocorrect:"autocorrect_1579700246281",gmailSendEmailPopup:"gmailSendEmailPopup_1588710046696",fullSentenceRewritesDisabled:"fullSentenceRewritesDisabled_1595353312714",iframeIntegration:"iframeIntegration_1593643390051",overrideKey:"overrideKeyName_1596156512364",showExtensionConflictPopup:"showExtensionConflictPopup_1597916739172",ungatingRenewalNotificationEnabled:"ungatingRenewalNotificationEnabled_1599074790962",proofit:"proofit_1600711036876",refreshExperimentsInterval:"refreshExperimentsInterval_1601638971190",quillJSCatchAllDisabled:"quillJSCatchAllDisabled_1606352678466",toneAI:"toneAI_1622644675216",requireAuthCookieAccess:"requireAuthCookieAccess_1614620202105",gapTransformCard:"gapTransformCard_1618874880869",llamaIntegration:"llamaIntegration_1620108441433",highlightsBlendingEnabled:"highlightsBlendingEnabled_1620339604804",gDocsCanvasConfig:"gDocsCanvasConfig_1621558551011",confidentialModeEnabled:"confidentialModeEnabled_1622017526624",consistencyCard:"consistencyCard_1623273583508",slatejs:"slatejs_1624453574243",dlpEnabled:"dlpEnabled_1623225997151",dialectSettings:"dialectSettings_1680596570472",dlpConfiguration:"dlpConfiguration_1645095068823",draftAIUpsell:"draftAIUpsell_1627424945372",ethicalAI:"ethicalAI_1627579461366",singleCardAssistant:"singleCardAssistant_1633644070595",reader:"reader_1659566713539",standWithUkraineGrammarlySuspendedPopup:"standWithUkraineGrammarlySuspendedPopup_1646163255357",standWithUkraineBannerPopup:"standWithUkraineBannerPopup_1646185960586",supportUkraineCard:"supportUkraineCard_1646179710528",ipmLlamaPreferredWebsites:"ipmLlamaPreferredWebsites_1651609778904",citationBuilder:"citationBuilder_1654621818572",cheetah:"cheetah_1677709750926",iterable:"iterable_1683683121357",manakin:"manakin_1694049018501",crashRateReporting:"crashRateReporting_1695869529413",appActions:"appActions_1702060787030",gOSCustomization:"gOSCustomization_1702961844107",monitoringCookiesAccessibilityEnabled:"monitoringCookiesAccessibilityEnabled_1702961844107",largeDocumentInactive:"largeDocumentInactive_1703713393681",preserveFormatting:"preserveFormatting_1715185098649",oggy:"oggy_1709838628311",vBars:"vBars_1727999371574",hwr:"hwr_1725584396404",sessionSamplingForMetrics:"sessionSamplingForMetrics_1717163654645",logger:"logger_1722005266",serviceAvailabilityMetrics:"serviceAvailabilityMetrics_1728516999366",touchTypist:"touchTypist_1731429166097",touchTypistAvailableByInstitution:"touchTypistAvailableByInstitution_1748442018744",gButton:"gButton_1758111274454",agentDirectory:"agentDirectory_1759987529000",agents:"agents_1760000000000",agentsMessageBusTelemetry:"agentsMessageBusTelemetry_1760985664967"},CV=Ur.OT(Ur.jV([function(e,t,n){const r={};for(const[e,n]of Object.entries(t))r[n]=e;return new Ur.Dy(null!=n?n:`mapped(${e.name})`,e.is,((t,n)=>{if(!t||"object"!=typeof t)return e.validate(t,n);const i={};for(const e in t)e in r?i[r[e]]=t[e]:i[e]=t[e];return e.validate(i,n)}),(n=>{const r=e.encode(n);if(!r)return r;const i={};for(const e in r)e in t?i[t[e]]=r[e]:i[e]=r[e];return i}))}(kV,IV,"DynamicConfigMappedData"),Ur.iG(Ur.dt({version:Ur.Z_}),"DynamicConfigVersionData")]),"DynamicConfigData");const EV={source:pz.local,version:"0",newRichTextFieldsEnabled:!0,fluidDisabledForFirefox:!1,fluidDisabledForSafari:!1,fullSentenceRewritesDisabled:!1,overrideKey:"dynamicConfigOverrideKey",ungatingRenewalNotificationEnabled:!1,quillJSCatchAllDisabled:!1};function AV(e,t){const n=function(e,t){const n=e.decode(t);if((0,Tr.nM)(n))throw new gz("Can't parse dynamic config",n);return n.right}(CV,t);return{...n,source:e}}const xV=q.create(lu.refreshDynamicConfig);async function TV(e,t,n){const r=await async function(e,t,n){const r=Kt();try{const[n,r]=await Promise.all([OV(),t.fetchOrFallback()]),{dynamicConfigOverrideKey:i}=e,{confidentialModeEnabled:o,dlpEnabled:s,dlpConfiguration:a,touchTypistAvailableByInstitution:c}=r,l={...n,version:`${n.version}-${Number(o)}-${Number(s)}-${JSON.stringify(a)}`,confidentialModeEnabled_1622017526624:o,dlpEnabled_1623225997151:s,dlpConfiguration_1645095068823:a,touchTypistAvailableByInstitution_1748442018744:c};return K(AV(pz.server,l),null!=i?i:{})}catch(e){r.dynamicConfigLoadFromServerError(e.message),n.error(`Error getting DynamicConfig from server: ${e.message}`)}return null}(e,n,xV);return null!==r&&await t.setDynamicConfig(r),r}const OV=async()=>{const e=await Promise.race([fetch(N().appConfig.url.dynamicConfigUrl),Ts.delay(6e4).then((()=>{throw new Error("Timeout")}))]);if(e.ok)return e.json();{const t=await e.text();throw new Error(`Request error: ${e.status} ${t}`)}};var PV;!function(e){let t;!function(e){e.wakeUp="wakeUp",e.unknown="unknown",e.firstStart="firstStart"}(t=e.StartType||(e.StartType={}))}(PV||(PV={}));const RV=[Ta(1),Ta(2),Ta(3),Ta(4),Ta(5),Ta(5)+ka,Ta(7),Ta(8),Ta(9),Ta(10),Ta(5)+Ta(10),Ta(5)+Oa(1),Ta(5)+Oa(6),Ta(5)+Oa(12),Ta(5)+Aa(1)],DV=(e,t,n,r,i)=>gu.compose(gu.storeChange(pu.trackingInitOnFSMChangeReady,(e=>{var t,n,r,i;return hu.isStoreChange(e)&&"ready"===(null===(n=null===(t=e.change.extensionFSM)||void 0===t?void 0:t.newValue)||void 0===n?void 0:n.stage)&&(null===(i=null===(r=e.change.extensionFSM)||void 0===r?void 0:r.newValue)||void 0===i?void 0:i.trackingEnabled)})),gu.createEffect(pu.trackingInitOnBgInit,du.bgWakeUp,(e=>{var t;return hu.isBgWakeUp(e)&&"ready"===(null===(t=e.state.extensionFSM)||void 0===t?void 0:t.stage)&&e.state.extensionFSM.trackingEnabled})))((async o=>{var s;e.enableDataSharing(),n.enableDataSharing();try{await t()}catch(e){Kt().gnarClientInitFail(e)}try{await i("getInitTrackingSideEffect").then((e=>{const t=o.state.user;n.init(null!=e?e:null,t?{user_id:t.id,user_type:t.anonymous?"Anonymous":t.type,institution_id:t.institutionInfo?String(t.institutionInfo.id):void 0}:null)}))}catch(e){Kt().productMetricsClient.updateConfigurationFailed(e.message,"setUserInfoOnSideEffect")}e.bgPage.bgPageStarted(hu.isBgWakeUp(o)?PV.StartType.wakeUp:PV.StartType.firstStart,(e=>{var t;return e&&null!==(t=au(Date.now()-e,RV))&&void 0!==t?t:-1})(null===(s=o.state.extensionMeta)||void 0===s?void 0:s.lastBGStartTimestampt)),r.setMeta({lastBGStartTimestampt:Date.now()})}));var NV;!function(e){e.inactive="inactive",e.active="active",e.accepted="accepted"}(NV||(NV={}));const UV=(e,t,n,r,i)=>{const o=q.create("sideEffect.logout");return gu.logoutUser(pu.safariLogoutUser,(s=>{(async(e,t,n,r,i,o,s,a)=>{var c,l;try{const e=new ES(qe().auth,i.ajaxFactory,i.withoutAccessToken);await Promise.race([e.logout(),(0,Ke.gw)(1e4).then((()=>{throw new Error("Logout timeout!")}))]),a.logoutFormSuccess()}catch(e){o.warn("auth error",e),a.logoutFormFail(void 0,e.message),s.safariLogoutFail(e.body||e.message),await n.deleteGrauth()}const u=e.state.user,d=null===(l=null===(c=e.state.passport)||void 0===c?void 0:c.entitlements)||void 0===l?void 0:l.brandingSet,h=u&&d&&qS.shouldUserSeeLegacyGBBranding(u,d);r.settings.setAuthenticatedUserWasBusinessAccount(null!=h&&h),t.update({reason:"logout",useCache:!1})})(s,e,t,n,r,o,i,Nc)}))},MV="theme:detected";const jV=q.create("universal.bg.sideEffects.renderBadge");let FV="light";var LV;!function(e){let t;!function(e){e.DEFAULT="#e75146",e.BETA="#555A70",e.EXCLAMATION="#ea1537"}(t=e.Colors||(e.Colors={})),e.setIcon=function(e,t,n=!1,r="universal"){Me()||e.setBadge(""),e.setIconByName(t,n,r)},e.setText=function(e,n,r=t.DEFAULT,i=!1,o="universal"){switch(e.kind){case"web-extension":e.setBadgeBackgroundColor(r),e.setIconByName(null,i,o);break;case"fallback":break;default:throw new Error("Unsupported browser button action")}e.setBadge(n)},e.setTitle=function(e,t){e.setTitle(t)},e.render=async function({activeTab:t,user:n,extensionSettings:r,dynamicConfig:i,dapi:o},s,a,c){var l,u;if(!(t&&n&&r&&i))return;const d=Ct(t.url),h=a(d,t.url),p=null===(u=null===(l=r[d])||void 0===l?void 0:l.enabled)||void 0===u||u,g=function(e,t,n){var r;const i=e.isGateEnabled(De.SuperhumanGoBranding)||Boolean(t.go_experience),o=Boolean(null===(r=n.common.alwaysAvailableAssistantSettings)||void 0===r?void 0:r.enabled);return i&&o}(c,n,r),f=g?"Superhuman Go":"Grammarly",m=await async function(e){return e.isGateEnabled(De.ToolbarIconTheme)?(await GV(),FV):"universal"}(c),b=Nw(r,d);if(!1===r.common.enabledClickToRun)e.setText(s,"!",e.Colors.EXCLAMATION,g,m),e.setTitle(s,"");else if(n.anonymous||h.grammarlyEditor||h.dontShowDisabledBadge)e.setText(s,"",void 0,g,m),n.anonymous?e.setTitle(s,`${f} extension: Active, but key features are missing. Log in to access more features.`):h.grammarlyEditor?e.setTitle(s,`${f} extension: Deactivated while you use the Grammarly Editor.`):h.dontShowDisabledBadge&&e.setTitle(s,`${f} extension: Active, but not checking text on this page.`);else if(h.enabled||h.servicePage)if(Dw.showDisabledByDesktopExtensionGButton(b,null!=o?o:{},i,t.url))e.setIcon(s,"gray",g,m),e.setTitle(s,`${f} extension: Deactivated. Activate it in settings by clicking this button.`);else{const t=p?"":"off";e.setText(s,t,void 0,g,m),p?e.setTitle(s,`${f} extension: Active and checking text on this page.`):e.setTitle(s,`${f} extension: Deactivated for this domain. Activate it in settings by clicking this button.`)}else e.setIcon(s,"bang",g,m),e.setTitle(s,`${f} extension: Unavailable. Your organization has turned off the ${f} browser extension for this page.`)}}(LV||(LV={}));async function GV(){const e=await async function(){var e,t;try{const n=await chrome.tabs.query({active:!0,currentWindow:!0});if(!(null===(e=n[0])||void 0===e?void 0:e.id))return FV;const r=await chrome.scripting.executeScript({target:{tabId:n[0].id},func:()=>"undefined"!=typeof self&&self.matchMedia&&self.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"});if(r&&(null===(t=r[0])||void 0===t?void 0:t.result))return r[0].result}catch(e){jV.warn("Failed to detect theme from active tab",e)}return FV}();return e!==FV&&(FV=e,!0)}function BV(e,t,n){return function(e,t,n){var r,i;const o=e.isGateEnabled(De.SuperhumanGoBranding),s=null!==(r=null==t?void 0:t.go_experience)&&void 0!==r&&r,a=!!(null===(i=null==n?void 0:n.common.alwaysAvailableAssistantSettings)||void 0===i?void 0:i.enabled);return(o||s)&&a}(e,t,n)?"superhumango":"grammarly"}class zV{constructor(e,t=Kt()){this._experimentClient=e,this._telemetry=t}sideEffectGetIterableClientAccessToken(e,t,n){this._experimentClient.isGateEnabled(De.IterableMetrics)&&this._telemetry.iterable.sideEffectGetIterableClientAccessToken(e,t,n)}refreshIterableClientAccessToken(e,t){this._experimentClient.isGateEnabled(De.IterableMetrics)&&this._telemetry.iterable.refreshIterableClientAccessToken(e,t)}iterableClientAccessTokenIsNull(){this._experimentClient.isGateEnabled(De.IterableMetrics)&&this._telemetry.iterable.iterableClientAccessTokenIsNull()}iterableGetIPMByTrigger(e){this._experimentClient.isGateEnabled(De.IterableMetrics)&&this._telemetry.iterable.iterableGetIPMByTrigger(e)}iterableGetIPM(e,t,n){this._experimentClient.isGateEnabled(De.IterableMetrics)&&this._telemetry.iterable.iterableGetIPM(e,t,n)}iterableIPMNoMatchingMessages(e,t){this._experimentClient.isGateEnabled(De.IterableMetrics)&&this._telemetry.iterable.iterableIPMNoMatchingMessages(e,t)}iterableIPMHide(e){this._experimentClient.isGateEnabled(De.IterableMetrics)&&this._telemetry.iterable.iterableIPMHide(e)}iterableIPMOpen(e,t,n,r){this._experimentClient.isGateEnabled(De.IterableMetrics)&&this._telemetry.iterable.iterableIPMOpen(e,t,n,r)}iterableIPMDelete(e,t,n,r,i){this._experimentClient.isGateEnabled(De.IterableMetrics)&&this._telemetry.iterable.iterableIPMDelete(e,t,n,r,i)}iterableIPMExpired(e){this._experimentClient.isGateEnabled(De.IterableMetrics)&&this._telemetry.iterable.iterableIPMExpired(e)}iterableIPMClick(e,t,n,r){this._experimentClient.isGateEnabled(De.IterableMetrics)&&this._telemetry.iterable.iterableIPMClick(e,t,n,r)}iterableIPMClose(e,t,n,r,i){this._experimentClient.isGateEnabled(De.IterableMetrics)&&this._telemetry.iterable.iterableIPMClose(e,t,n,r,i)}iterableCustomEvent(e,t,n,r){this._experimentClient.isGateEnabled(De.IterableMetrics)&&this._telemetry.iterable.iterableCustomEvent(e,t,n,r)}iterableUserUpdate(e,t,n){this._experimentClient.isGateEnabled(De.IterableMetrics)&&this._telemetry.iterable.iterableUserUpdate(e,t,n)}iterableIPMFailed(e){this._experimentClient.isGateEnabled(De.IterableMetrics)&&this._telemetry.iterable.iterableIPMFailed(e)}iterableIPMTrigger(e,t,n){this._experimentClient.isGateEnabled(De.IterableTriggerMetrics)&&this._telemetry.iterable.iterableIPMTrigger(e,t,n)}iterableIPMCooldown(e){this._experimentClient.isGateEnabled(De.IterableMetrics)&&this._telemetry.iterable.iterableIPMCooldown(e)}iterableIPMGlobalCooldown(){this._experimentClient.isGateEnabled(De.IterableMetrics)&&this._telemetry.iterable.iterableIPMGlobalCooldown()}iterableIPMImageLoadingError(e){this._experimentClient.isGateEnabled(De.IterableMetrics)&&this._telemetry.iterable.iterableIPMImageLoadingError(e)}logIterableApi(e){this._experimentClient.isGateEnabled(De.IterableLogs)&&this._telemetry.iterable.logIterableApi(e)}}const VV="__EXT_CS_SHARE_STORAGE__";class qV{constructor(){var e;this._win=function(){var e;try{const t=null!==(e=self.top)&&void 0!==e?e:self;return Q(t.location.href)?t:self}catch(e){return self}}(),this._value=null!==(e=this._value)&&void 0!==e?e:{}}get _value(){return this._win[VV]}set _value(e){this._win[VV]=e}clean(){this._value={}}set(e,t){this._value[e]=t}get(e){return this._value[e]}getOnce(e){const t=this._value[e];return this.remove(e),t}remove(e){delete this._value[e]}}var HV,WV;!function(e){e.syncDevtoolsInitialStateWithTab="syncDevtoolsInitialStateWithTab"}(HV||(HV={}));class $V{constructor(e,t,n=h.iy.create(),r=e){this._rpcMessageName=e,this._message=t,this._clientId=n,this._inboundMessageName=r,this.inbound=new bi.y((e=>{const t=t=>{t.clientId===this._clientId&&e.next(t.data)};return this._message.on(this._inboundMessageName,t),()=>this._message.off(this._inboundMessageName,t)})),this.outbound=e=>{this._message.sendBackground(this._rpcMessageName,{clientId:this._clientId,data:e})}}}class XV extends Vl{constructor(e){super(new $V("cs-to-bg-rpc-1557421403805",e))}}!function(e){e.rpcLegacyMessageName="cs-to-bg-rpc-1587687052565",e.rpcLegacyObservableName="cs-to-bg-observable-rpc-1587687052565"}(WV||(WV={}));class KV extends dG{constructor(e){super(new $V(WV.rpcLegacyMessageName,e),new $V(WV.rpcLegacyObservableName,e))}}class YV extends dG{constructor(e){super(new $V(JL.rpcLegacyMessageName,e),new $V(JL.rpcLegacyObservableName,e))}}class ZV{constructor(e){this._baseApi=e,this._log=q.create("BaseMessageService"),this._initializedListenerEvents=new Set,this._listeners={},this._logError=e=>{this._log.error(`${ZV.name} handle an error: ${e.message}`)},this.on=(e,t)=>{var n;this._listeners[e]=null!==(n=this._listeners[e])&&void 0!==n?n:[],this._listeners[e].push(t),this._initializedListenerEvents.has(e)||(this._initializedListenerEvents.add(e),this._baseApi.listen(e,((...t)=>{var n;const r=null!==(n=this._listeners[e])&&void 0!==n?n:[];for(const e of r)try{e(...t)}catch(e){this._logError(e)}})))},this.once=(e,t)=>{const n=(...r)=>{this.off(e,n);try{t(...r)}catch(e){this._logError(e)}};this.on(e,n)},this.off=(e,t)=>{if(!this._listeners[e])return;const n=this._listeners[e].indexOf(t);-1!==n&&this._listeners[e].splice(n,1),0===this._listeners[e].length&&delete this._listeners[e]}}}class JV extends ZV{constructor(e){super(e),this._api=e,this.sendBackground=(e,t)=>{try{this._api.broadcastBackground(e,t)}catch(e){this._logError(e)}}}}const QV=xa(3);var eq,tq,nq;!function(e){e.default="default",e.fallback="fallback"}(eq||(eq={})),function(e){e.bgHistoryLogs="bgHistoryLogs",e.popupHistoryLogs="popupHistoryLogs",e.sidePanelHistoryLogs="sidePanelHistoryLogs",e.csHistoryLogs="csHistoryLogs"}(tq||(tq={}));class rq{constructor(e,t,n,r=q.create("DebugReportsGetterImpl")){this._envName=e,this._getLogsDefault=t,this._getLogsFallback=n,this._log=r}_getLogMessage(e,t){return t===eq.fallback?`${e} from ${t}`:e}async _getLogs(e,t,n){const r=de().context;this._log.debug(this._getLogMessage(`start get ${this._envName} logs`,t));try{const i=await Promise.race([e(),(0,Ke.gw)(n).then((()=>{Kt().debugReports.downloadTimeout(r,this._envName),this._log.warn(this._getLogMessage(`get ${this._envName} logs timeout`,t))}))]);return i?(Kt().debugReports.downloadSuccessfully(r,this._envName),this._log.debug(this._getLogMessage(`successfully get ${this._envName}`,t)),i.map((e=>({...e,loggerName:`${this._envName}.${e.loggerName}`})))):void this._log.warn(this._getLogMessage(`${this._envName} logs is not defined`,t))}catch(e){return Kt().debugReports.downloadError(r,this._envName),void this._log.warn(this._getLogMessage(`fail to get ${this._envName} logs`,t),e)}}get envName(){return this._envName}async getLogs(){return await this._getLogs(this._getLogsDefault,eq.default,QV)||(this._getLogsFallback?await this._getLogs(this._getLogsFallback,eq.fallback,1e3):void 0)}static getLogsFromSessionStorageFallbackGetter(e,t=(()=>de().browserApi.sessionStorage)){return()=>t().get(e).then((t=>{const n=t[e];return Array.isArray(n)?n.map((e=>{try{return JSON.parse(e)}catch(t){return{level:F.WARN,loggerName:rq.name,message:"Cannot parsed backup data!",timestamp:e.timestamp,data:{json:e},exeption:t}}})):void 0}))}}!function(e){e.UPDATE_BACKUP_STORAGE_TIMEOUT=xa(5),e.BACKUP_STORAGE_LOGS_CAPACITY=100}(nq||(nq={}));class iq{constructor(e,t,n,r=h.P2,i=q.create(iq.name,{skipPushToHistory:!0})){this._sessionStorage=e,this._key=t,this._skipSetLogs=n,this._throttle=r,this._log=i,this.get=()=>this._get(),this._get=rq.getLogsFromSessionStorageFallbackGetter(this._key,(()=>this._sessionStorage)),this.set=this._throttle(nq.UPDATE_BACKUP_STORAGE_TIMEOUT,this._set.bind(this))}async _set(e){var t,n;if(await(null===(t=this._skipSetLogs)||void 0===t?void 0:t.call(this)))return void this._log.trace("set logs is skipped");const r=null===(n=e(nq.BACKUP_STORAGE_LOGS_CAPACITY))||void 0===n?void 0:n.slice(-nq.BACKUP_STORAGE_LOGS_CAPACITY).map((e=>{try{return JSON.stringify(e)}catch(t){return this._log.debug("cannot parse properly backup storage data",t,e),JSON.stringify({level:F.WARN,loggerName:e.loggerName,message:e.message,timestamp:e.timestamp,exception:`cannot parse properly backup storage data: ${t.message}`})}}));return this._sessionStorage.set({[this._key]:r}).catch((e=>{this._log.warn(`error: on set ${this._key} logs to backup storage`,e),this._sessionStorage.remove(this._key).catch((e=>this._log.warn(`error: on remove ${this._key} logs from backup storage`,e)))}))}}const oq="tracking/RPC";class sq extends vB{static get isInited(){return void 0!==this._instance}static getInstance(){if(void 0===this._instance)throw new Error("cs Env not inited yet");return this._instance}static init(e){if(void 0!==this._instance)throw new Error("cs Env already inited");const t=new sq(e);return this._instance=t,vB.initShared(t),t.browserApi.message.start&&t.browserApi.message.start(),t}constructor(e){super({browser:e.browser,extensionType:e.extensionType,deploymentType:e.deploymentType,context:"cs",browserInfo:e.browserApi.getBrowserInfo(),historyLoggerExtraArgs:{enableHistoryLoggerUntil:e=>{var t;null===(t=this.bgRpc)||void 0===t||t.api.enableHistoryLoggerUntil(e)},disableHistoryLogger:()=>{var e;null===(e=this.bgRpc)||void 0===e||e.api.disableHistoryLogger()},backupStorage:new iq(e.browserApi.sessionStorage,tq.csHistoryLogs,(async()=>{var t,n;return e.skipWriteLogsToBackupStorage||document.hidden||function(){try{return self.parent!==self}catch(e){return!0}}()||!await(null===(t=this.bgRpc)||void 0===t?void 0:t.api.isGateEnabled("SessionStorageLogsBackup"))||!await(null===(n=this.bgRpc)||void 0===n?void 0:n.api.isCurrentTabFocused())})),getExperimentClient:()=>this.experimentClient}}),this.browserApi=e.browserApi,this.message=new JV(e.browserApi.message),this.bgRpc=new XV(this.message),this.experimentClient=e.createExperimentClient(this.bgRpc),this.csShareStorage=new qV,this.capiBgRpc=new KV(this.message),this.staticCapiBgRpc=new YV(this.message),this.telemetryCallProvider=function(e,t=q.create("lib.tracking.call.transport")){return new Proxy({},{get:(n,r)=>{if("enableDataSharing"!==r)return(...n)=>{Promise.race([e.api.trackCall(oq,[r,...n]).then((()=>null)),(0,Ke.gw)(1e4).then((()=>new Error("timeout call through bg page")))]).then((e=>e&&t.warn("tracking call timeout",e))).catch((e=>t.warn("tracking call failed, reason:",e)))}}})}(this.bgRpc),this.productMetricsCSClient=function(e,t=q.create("lib.tracking.ProductMetricsClient.transport"),n=1e4){return new Proxy({},{get:(r,i)=>(...r)=>Promise.race([e.api.trackProductMetric(r).then((()=>null)),(0,Ke.gw)(n,new Error("timeout call through bg page"))]).catch((e=>(t.warn("trackProductMetric call failed, reason:",e),e)))})}(this.bgRpc)}}function aq(){return sq.getInstance()}const cq=()=>{const e=aq().browserApi.getBrowserInfo();return`${e.browserName||""}/${e.browserVersion||""}`},lq=new Proxy({},{get:(e,t)=>(...e)=>wB().bgRpc.api.trackGnar(t,e)});function uq(e,t){const n=e.left<t.left?t.left:e.left+e.width>t.left+t.width?t.left+t.width-e.width:e.left,r=e.top<t.top?t.top:e.top+e.height>t.top+t.height?t.top+t.height-e.height:e.top;return{...e,left:n,top:r}}function dq(e,t,n,r,i,o,s,a,c,l,u,d){const h={top:n.top+a.top,left:n.left+a.left,width:n.width-a.left-a.right,height:n.height-a.top-a.bottom},p=function(e,t,n,r,i,o,s,a,c){const l=_q(e,t,n,r,c,o,s);return[{...l,flippedHorizontal:!1,flippedVertical:!1}].concat((Array.isArray(i)?i:[i]).map((i=>({..._q(e,yq(t,i),yq(n,i),bq(r,l.overlap,i,o,s,a),c,o,s),flippedHorizontal:"flip"===i.horizontal,flippedVertical:"flip"===i.vertical}))))}({top:r.top-s.top,left:r.left-s.left,width:r.width+s.left+s.right,height:r.height+s.top+s.bottom},i,o,c,u,e,t,d,h),g=p.reduce(((e,t)=>e.overlap.vertical<=t.overlap.vertical?e:t)),f=p.reduce(((e,t)=>e.overlap.horizontal<=t.overlap.horizontal?e:t)),m=pq({top:g.position.top,left:f.position.left,flippedHorizontal:f.flippedHorizontal,flippedVertical:g.flippedVertical},l,n,e,t);return hq(m,e,t,h)}const hq=(e,t,n,r)=>{const{top:i,left:o}=uq({top:e.top,left:e.left,width:t,height:n},r);return{...e,top:i,left:o}},pq=(e,t,n,r,i)=>{if(void 0===t)return e;const o=bq(t,gq(fq({top:e.top+t.vertical,left:e.left+t.horizontal,width:r,height:i},n)),{horizontal:"translate",vertical:"translate"},r,i,!1);return{...e,top:e.top+o.vertical,left:e.left+o.horizontal}};function gq(e){const t=Math.abs(Math.min(e.left,0)),n=Math.abs(Math.min(e.right,0)),r=Math.abs(Math.min(e.top,0)),i=Math.abs(Math.min(e.bottom,0));return{horizontal:t+n,vertical:r+i,top:r,bottom:i,left:t,right:n}}function fq(e,t){return{top:e.top-t.top,bottom:t.top+t.height-(e.top+e.height),left:e.left-t.left,right:t.left+t.width-(e.left+e.width)}}const mq=(0,h.Vo)((()=>wB().experimentClient.isGateEnabled(De.UseBodyToGetViewportDimentions)));function bq(e,t,n,r,i,o){const s=t.left&&t.right?0:0!==t.left?Math.min(t.left,o?r:1/0):-Math.min(t.right,o?r:1/0),a=t.top&&t.bottom?0:0!==t.top?Math.min(t.top,o?i:1/0):-Math.min(t.bottom,o?i:1/0);return{horizontal:"translate"===n.horizontal?e.horizontal+s:-e.horizontal,vertical:"translate"===n.vertical?e.vertical+a:-e.vertical}}function yq(e,t){return{vertical:"translate"===t.vertical?e.vertical:"top"===e.vertical?"bottom":"top",horizontal:"translate"===t.horizontal?e.horizontal:"left"===e.horizontal?"right":"left"}}function _q(e,t,n,r,i,o,s){const{top:a,left:c}=function(e,t,n,r,i){return{top:e.top+i.vertical+("bottom"===n.vertical?e.height:"center"===n.vertical?e.height/2:0)-("bottom"===r.vertical?t.height:"center"===r.vertical?t.height/2:0),left:e.left+i.horizontal+("right"===n.horizontal?e.width:"center"===n.horizontal?e.width/2:0)-("right"===r.horizontal?t.width:"center"===r.horizontal?t.width/2:0)}}(e,{width:o,height:s},t,n,r);return{position:{top:a,left:c},overlap:gq(fq({top:a,left:c,width:o,height:s},i))}}const vq={top:15,bottom:15,left:0,right:0},wq={top:10,left:20,right:0,bottom:10};var Sq;!function(e){e[e.expandedGButtonClick=0]="expandedGButtonClick",e[e.gButtonHover=1]="gButtonHover"}(Sq||(Sq={}));const kq={disable:{anchorOrigin:{horizontal:"right",vertical:"bottom"},elementOrigin:{horizontal:"right",vertical:"bottom"},repositioning:{horizontal:"translate",vertical:"flip"}},gdocsFeedbackUI:{anchorOrigin:{horizontal:"right",vertical:"bottom"},elementOrigin:{horizontal:"right",vertical:"bottom"},repositioning:{horizontal:"translate",vertical:"flip"},anchorMargin:{left:0,right:7,top:0,bottom:0}},onboardingWithReminder:{anchorOrigin:{horizontal:"right",vertical:"top"},elementOrigin:{horizontal:"right",vertical:"bottom"},repositioning:{horizontal:"translate",vertical:"flip"},anchorMargin:vq},sessionTimeoutPopup:{anchorOrigin:{horizontal:"right",vertical:"top"},elementOrigin:{horizontal:"right",vertical:"bottom"},repositioning:{horizontal:"translate",vertical:"flip"},anchorMargin:vq},dataControl:{anchorOrigin:{horizontal:"right",vertical:"top"},elementOrigin:{horizontal:"right",vertical:"bottom"},repositioning:{horizontal:"translate",vertical:"flip"},anchorMargin:vq},"loginReminder-unifiedFunnel":{anchorOrigin:{horizontal:"left",vertical:"bottom"},elementOrigin:{horizontal:"right",vertical:"bottom"},repositioning:{horizontal:"translate",vertical:"flip"},anchorMargin:wq},"loginReminder-free":{anchorOrigin:{horizontal:"left",vertical:"bottom"},elementOrigin:{horizontal:"right",vertical:"bottom"},repositioning:{horizontal:"translate",vertical:"flip"},anchorMargin:wq},"loginReminder-premium":{anchorOrigin:{horizontal:"left",vertical:"bottom"},elementOrigin:{horizontal:"right",vertical:"bottom"},repositioning:{horizontal:"translate",vertical:"flip"},anchorMargin:wq},"fsi-quickSignup":{anchorOrigin:{horizontal:"right",vertical:"top"},elementOrigin:{horizontal:"right",vertical:"bottom"},repositioning:{horizontal:"translate",vertical:"flip"},anchorMargin:{top:10,left:0,right:0,bottom:0}},loginSSO:{anchorOrigin:{horizontal:"right",vertical:"top"},elementOrigin:{horizontal:"right",vertical:"bottom"},repositioning:{horizontal:"translate",vertical:"flip"},anchorMargin:wq},tailoredBusinessUphook:{anchorOrigin:{horizontal:"right",vertical:"top"},elementOrigin:{horizontal:"right",vertical:"bottom"},repositioning:{horizontal:"translate",vertical:"flip"},anchorMargin:vq},workplaceAppBusinessUphook:{anchorOrigin:{horizontal:"right",vertical:"top"},elementOrigin:{horizontal:"right",vertical:"bottom"},repositioning:{horizontal:"translate",vertical:"flip"},anchorMargin:vq},simpleMessage:{anchorOrigin:{horizontal:"left",vertical:"bottom"},elementOrigin:{horizontal:"right",vertical:"bottom"},repositioning:{horizontal:"translate",vertical:"flip"},anchorMargin:{left:7,right:0,top:0,bottom:0}},assistantOnboardingTour:{anchorOrigin:{horizontal:"right",vertical:"top"},elementOrigin:{horizontal:"right",vertical:"bottom"},repositioning:{horizontal:"translate",vertical:"flip"},anchorMargin:vq},dunningMessage:{anchorOrigin:{horizontal:"right",vertical:"top"},elementOrigin:{horizontal:"right",vertical:"bottom"},repositioning:{horizontal:"translate",vertical:"flip"},anchorMargin:{top:2,bottom:2,left:0,right:0}},accountMigration:{anchorOrigin:{horizontal:"right",vertical:"top"},elementOrigin:{horizontal:"right",vertical:"bottom"},repositioning:{horizontal:"translate",vertical:"flip"},anchorMargin:{top:2,bottom:2,left:0,right:0}},noPaymentMethodSubscription:{anchorOrigin:{horizontal:"right",vertical:"top"},elementOrigin:{horizontal:"right",vertical:"bottom"},repositioning:{horizontal:"translate",vertical:"flip"},anchorMargin:{top:2,bottom:2,left:0,right:0}},claimedUser:{anchorOrigin:{horizontal:"right",vertical:"top"},elementOrigin:{horizontal:"right",vertical:"bottom"},repositioning:{horizontal:"translate",vertical:"flip"},anchorMargin:{top:2,bottom:2,left:0,right:0}},iterable:{anchorOrigin:{horizontal:"right",vertical:"top"},elementOrigin:{horizontal:"right",vertical:"bottom"},repositioning:{horizontal:"translate",vertical:"flip"},anchorMargin:vq},grammarlyBusinessSigninPopup:{anchorOrigin:{horizontal:"left",vertical:"bottom"},elementOrigin:{horizontal:"right",vertical:"bottom"},repositioning:{horizontal:"translate",vertical:"flip"},anchorMargin:wq},standWithUkraineBanner:{anchorOrigin:{horizontal:"right",vertical:"top"},elementOrigin:{horizontal:"right",vertical:"bottom"},repositioning:{horizontal:"translate",vertical:"flip"},anchorMargin:wq},standWithUkraineGrammarlySuspended:{anchorOrigin:{horizontal:"right",vertical:"top"},elementOrigin:{horizontal:"right",vertical:"bottom"},repositioning:{horizontal:"translate",vertical:"flip"},anchorMargin:wq},largeDocumentPopup:{anchorOrigin:{horizontal:"right",vertical:"top"},elementOrigin:{horizontal:"right",vertical:"bottom"},repositioning:{horizontal:"translate",vertical:"flip"},anchorMargin:wq},connectorPermissionPopup:{anchorOrigin:{horizontal:"right",vertical:"top"},elementOrigin:{horizontal:"right",vertical:"bottom"},repositioning:{horizontal:"translate",vertical:"flip"},anchorMargin:vq},performanceCardPopup:{anchorOrigin:{horizontal:"right",vertical:"top"},elementOrigin:{horizontal:"right",vertical:"bottom"},repositioning:{horizontal:"translate",vertical:"flip"},anchorMargin:vq}},Iq=["ipm-cta","ipm-link"],Cq=["ipm-soft-close","ipm-hard-close","ipm-soft-close-button","ipm-hard-close-button","ipm-close","ipm-dismiss","gbutton"],Eq=[...Iq,"ipm-hard-close"],Aq={width:400,height:500},xq="iterable-iframe",Tq="ipm-consume";var Oq;!function(e){e.anchorOrigin={vertical:"top",horizontal:"right"},e.elementOrigin={vertical:"bottom",horizontal:"right"},e.anchorMargin={top:0,left:0,bottom:0,right:0},e.viewportMargin={top:5,left:5,bottom:5,right:5},e.offset={horizontal:0,vertical:0},e.repositioning={horizontal:"translate",vertical:"flip"}}(Oq||(Oq={}));class Pq{constructor(){this._log=q.create("iterable"),this._message=U.h.create(null)}static getInstance(){return Pq._singletonInstance||(Pq._singletonInstance=new Pq),Pq._singletonInstance}handleMessage(e,t,n,r,i=!1){this._message.set({campaignId:n,messageId:t,message:e,userId:r,treatAsHardClose:i})}get message(){return this._message.view()}set sessionUUID(e){this._sessionUUID=e}get sessionUUID(){return this._sessionUUID}set csActions(e){this._csActions=e}set telemetry(e){this._telemetry=e}isIPMVisible(){const e=document.getElementById(xq);return!!e&&"visible"===e.style.visibility}showIPM(e){const t=this._message.get();if(!t||this.previousMessageId===t.messageId){const e="No message or displaying the same message";return this._log.error(e),this._telemetry.logIterableApi(e),this._telemetry.iterableIPMFailed(e),void lq.ipmMessageFailed(e)}const n=t.message,r=t.messageId,i=t.campaignId,o=t.userId,s=document.getElementById(xq)||document.createElement("iframe");if(this.previousMessageId=r,!n||!s){const e="No message or iframe";return this._log.error(e),this._telemetry.logIterableApi(e),this._telemetry.iterableIPMFailed(e),void lq.ipmMessageFailed(e)}const a=()=>{var t;const n=kq.iterable;s.contentWindow&&(s.contentWindow.document.body.style.margin="0",this._handleIPMEvents(s.contentWindow.document));const{width:c,height:l}=this._getIterableIFrameSize(s),u=dq(c,l,function(e=document){return!e.doctype&&mq.get()?{top:e.body.scrollTop,left:e.body.scrollLeft,height:e.body.clientHeight,width:e.body.clientWidth}:{top:e.documentElement.scrollTop,left:e.documentElement.scrollLeft,height:e.documentElement.clientHeight,width:e.documentElement.clientWidth}}(),e,(null==n?void 0:n.anchorOrigin)||Oq.anchorOrigin,(null==n?void 0:n.elementOrigin)||Oq.elementOrigin,(null==n?void 0:n.anchorMargin)||Oq.anchorMargin,Oq.viewportMargin,Oq.offset,undefined,(null==n?void 0:n.repositioning)||Oq.repositioning,!0),d=u.top,h=u.left;s.style.border="none",s.style.position="absolute",s.style.top=`${d}px`,s.style.left=`${h}px`,s.style.width=`${c}px`,s.style.height=`${l}px`,s.style.visibility="visible",s.style.overflow="hidden",s.scrolling="no",s.style.zIndex="10000",s.style.colorScheme="normal",lq.ipmMessageOpen(r,this.sessionUUID,i),aq().bgRpc.api.iterableTrackInAppOpen({userId:o,messageId:r,deviceInfo:{deviceId:cq(),platform:iz,appPackageName:oz},campaignId:i}),s.removeEventListener("load",a);const p=null===(t=s.contentWindow)||void 0===t?void 0:t.document.getElementsByTagName("img");p&&Array.from(p).forEach((e=>{e.addEventListener("error",(()=>{var t;lq.ipmMessageImageLoadingError(i),null===(t=this._telemetry)||void 0===t||t.iterableIPMImageLoadingError(i),this._log.warn(`Image loading error for campaignId: ${i} with src: ${e.src}`)}));const t=e.src;e.src=t}))};s.setAttribute("id",xq),s.setAttribute("data-grammarly-part","true"),s.setAttribute("sandbox","allow-same-origin allow-popups allow-top-navigation allow-scripts"),s.style.visibility="hidden",s.srcdoc=n,s.addEventListener("load",a),document.body.appendChild(s)}hideIPM(e){var t;const n=this._message.get();if(!n)return Promise.resolve();const r=n.messageId,i=n.userId,o=n.campaignId,s=n.treatAsHardClose;return this._log.info(`IPM message ${r} closed by ${e}`),this._telemetry.iterableIPMHide(e),this._deleteInAppMessage(e,i,r,o,s),null===(t=document.getElementById(xq))||void 0===t||t.remove(),Cq.includes(e)?(this._message.set(null),lq.ipmMessageClose(e,r,this.sessionUUID,o),aq().bgRpc.api.iterableTrackInAppClose({messageId:r,userId:i,closeAction:e,deviceInfo:{deviceId:cq(),platform:iz,appPackageName:oz},campaignId:o})):(this._message.set(null),Promise.resolve())}_getIterableIFrameSize(e){return e.contentWindow?{width:e.contentWindow.document.body.scrollWidth,height:e.contentWindow.document.body.scrollHeight}:Aq}_handleIPMEvents(e){[...Iq,...Cq].forEach((t=>{const n=e.getElementById(t);n&&(n.onclick=async()=>{if(Iq.indexOf(t)>=0){const e=this._message.get();if(e){const t=e.messageId,n=e.userId,r=e.campaignId;lq.ipmMessageClick(t,this.sessionUUID,r),aq().bgRpc.api.iterableTrackInAppClick({userId:n,messageId:t,deviceInfo:{deviceId:cq(),platform:iz,appPackageName:oz},campaignId:r})}await this.hideIPM(t),n.href&&n.target&&self.open(n.href,n.target)}else await this.hideIPM(t);return!1})}))}async _deleteInAppMessage(e,t,n,r,i){var o;if(Eq.includes(e)||i){lq.ipmMessageDelete(Tq,n,this.sessionUUID,r);const e=await aq().bgRpc.api.iterableTrackInAppConsume({userId:t,messageId:n,deleteAction:Tq,deviceInfo:{deviceId:cq(),platform:iz,appPackageName:oz},campaignId:r});(null==e?void 0:e.code)==nz.SUCCESS&&await(null===(o=this._csActions)||void 0===o?void 0:o.deleteIterableCampaignCooldownAndImpressionCount(r))}}}function Rq(e){return"transientDocId"in e?e.transientDocId:e.stableDocId}const Dq="ipm-expired",Nq="ipm-cooldown-and-impressions",Uq=jG("12h");class Mq{constructor(e,t,n,r,i,o,s,a,c){this.isSupported=e,this._state=t,this.iterableNextFetchSettings=n,this._csActions=r,this._experimentClient=i,this._domain=o,this._textObserver=s,this._textField=a,this._doc=c,this._sessionUUID=U.h.create(kr.YP),this._triggers={[rz.GDocsSidebarInitialized]:{gate:De.IterableGDocsSidebarInitializedTrigger,checkMessageInterval:Ta(10)},[rz.UserSessionInitialized]:{gate:De.IterableUserSessionInitializedTrigger,checkMessageInterval:Ta(10)},[rz.UserEngagedByAlertsAccepted]:{gate:De.IterableEngagedByAlertsAcceptedTrigger,checkMessageInterval:Ta(10)},[rz.NonGDocsFirstAlertLookedAt]:{gate:De.NonGDocsFirstAlertLookedAtTrigger,checkMessageInterval:Ta(10)},[rz.PauseInTyping]:{gate:De.IterablePauseInTypingTrigger,checkMessageInterval:0}},this._iterableView=Pq.getInstance(),this._log=q.create("iterable"),this._subscriptions=[],this._detectPauseInTyping(3e5),this._telemetry=new zV(i),this._iterableView.csActions=this._csActions,this._iterableView.telemetry=this._telemetry}dispose(){this._subscriptions.forEach((e=>e.unsubscribe()))}set sessionUUID(e){this._sessionUUID.set(e),this._iterableView.sessionUUID=this.sessionUUID}get sessionUUID(){return(0,Ir.zG)(this._sessionUUID.get(),kr.fS((()=>"unknownSessionUUID")))}static shouldCreate(e,t,n){var r,i;return Boolean(null===(i=null===(r=t.iterable)||void 0===r?void 0:r.enableByBrowser)||void 0===i?void 0:i[e])&&("enabled"===n.getTreatment(YS.Iterable)||n.isGateEnabled(De.Iterable))}_getUserIdOrContainerId(){const e=this._state.view("user").get();return e.anonymous?aq().bgRpc.api.getContainerIdOrUndefined("Iterable").then((e=>{if(e){const t="User id not found using container id";return this._log.warn(t),this._telemetry.logIterableApi(t),e}{const e="containerId is undefined";return this._log.warn(e),void this._telemetry.logIterableApi(e)}})):Promise.resolve(e.id)}async onTrigger(e,t){var n,r;if(!this.isSupported){const e="Not supported: in app messages from Iterable";return this._log.error(e),void this._telemetry.logIterableApi(e)}const i=await this._getUserIdOrContainerId(),o=this._isTriggerEnabled(e),s=this._rateLimitCallsToIterable(e),a=this._isWithinGlobalCooldown();if(this._experimentClient.isGateEnabled(De.IterableTriggerMetrics)&&(lq.ipmMessageTrigger(s,o,e),this._telemetry.iterableIPMTrigger(e,o,s)),!a&&o&&s&&i)try{const o=Date.now();e===rz.UserSessionInitialized&&(this._sessionStartTime=o);const s=(o-this._sessionStartTime)/ka;lq.ipmMessageGet((null===(n=this._textField)||void 0===n?void 0:n.ownerDocument.hidden)||!1,this._sessionStartTime,s,this.sessionUUID,e,t||0,this._doc?Rq(this._doc.id):"unknown"),this._telemetry.iterableGetIPMByTrigger(e);const a=await aq().bgRpc.api.iterableGetInAppMessages(i);if(!a||!a.length)return;const c=this._getInAppMessageToShow(a,e,t);if(!c)return this._log.info(`User has ${a.length} messages in queue but none match the criteria`),void this._telemetry.iterableIPMNoMatchingMessages(e,a.length);if(await this._isMessageWithinCooldown(c))return;await this._hasInAppMessageExpired(c,i)?(this._telemetry.iterableIPMExpired(null===(r=null==c?void 0:c.campaignId)||void 0===r?void 0:r.toString()),this.onTrigger(e)):(this._updateGlobalCooldown(),this._parseMessage(c,i))}catch(e){const t=`Unable to handle in app messages from Iterable: ${JSON.stringify(e)}`;this._log.error(t),this._telemetry.logIterableApi(t);const n="unable to handle in app message";this._telemetry.iterableIPMFailed(n),lq.ipmMessageFailed(n)}finally{this._resetRateLimitCallsToIterable(e)}else if(this._experimentClient.isGateEnabled(De.IterableTriggerMetrics)){const t=`Could not trigger (${e}) an in app messages from Iterable for ${i||"unknown"}: isTriggerEnabled: ${o}, isTriggerAfterRateLimit: ${s}`;this._log.error(t),this._telemetry.logIterableApi(t)}}iterableListenForFirstLookAtAlerts(e){const t=e.getActiveAlert().pipe(Ki.h((e=>null!=e)),Pr.q(1)).subscribe((()=>{this.onTrigger(rz.NonGDocsFirstAlertLookedAt)}));this._subscriptions.push(t)}_rateLimitCallsToIterable(e){const t=this._state.view("page").view((e=>{var t;return null!==(t=e.iterableNextFetchSettings)&&void 0!==t?t:null})).get();if(t){const n=Date.now(),r=t[e];return void 0===r||r<n}return!0}_resetRateLimitCallsToIterable(e){const t=Date.now()+this._triggers[e].checkMessageInterval;this.iterableNextFetchSettings({[e]:t})}_getInAppMessageToShow(e,t,n){if(this._experimentClient.isGateEnabled(De.IterableTriggerFromCustomPayload)&&this._experimentClient.isGateEnabled(De.IterableTargetDomain)&&this._domain){const r=this._getMatchingTriggerAndAllowedDomain(e,t,n);if(r)return lq.ipmMessageMatchCustomPayload("triggerAndAllowDomain"),r}if(this._experimentClient.isGateEnabled(De.IterableTargetDomain)&&this._domain){const t=this._getMatchingAllowedDomainSkippingTriggers(e);if(t)return lq.ipmMessageMatchCustomPayload("allowDomain"),t}if(this._experimentClient.isGateEnabled(De.IterableTriggerFromCustomPayload)){const r=this._getMatchingTriggerSkippingDomains(e,t,n);if(r)return lq.ipmMessageMatchCustomPayload("trigger"),r}return e.find((e=>{var t;return!(null===(t=e.customPayload)||void 0===t?void 0:t.extension)}))}_getMatchingTriggerAndAllowedDomain(e,t,n){const r=e.filter((e=>this._filterTrigger(e,t,n)));return r.length?this._getMatchingAllowedDomain(r):null}_getMatchingAllowedDomain(e){return e.find((e=>this._filterDomain(e)))||null}_getMatchingAllowedDomainSkippingTriggers(e){const t=e.find((e=>{var t,n;return!(null===(n=null===(t=e.customPayload)||void 0===t?void 0:t.extension)||void 0===n?void 0:n.triggers)&&this._filterDomain(e)}));return t||null}_getMatchingTriggerSkippingDomains(e,t,n){const r=e.find((e=>{var r,i,o;return!(null===(o=null===(i=null===(r=e.customPayload)||void 0===r?void 0:r.extension)||void 0===i?void 0:i.allow)||void 0===o?void 0:o.domains)&&this._filterTrigger(e,t,n)}));return r||null}_filterDomain(e){var t,n,r,i;return null===(i=null===(r=null===(n=null===(t=e.customPayload)||void 0===t?void 0:t.extension)||void 0===n?void 0:n.allow)||void 0===r?void 0:r.domains)||void 0===i?void 0:i.includes(this._domain)}_filterTrigger(e,t,n){var r,i,o;const s=null===(o=null===(i=null===(r=e.customPayload)||void 0===r?void 0:r.extension)||void 0===i?void 0:i.triggers)||void 0===o?void 0:o.filter((e=>t===rz.UserEngagedByAlertsAccepted?!!e.alertsCount&&(e.trigger===t&&e.alertsCount==n):e.trigger===t));return!!(null==s?void 0:s.length)}async _isMessageWithinCooldown(e){var t,n,r;const i=(null===(t=e.campaignId)||void 0===t?void 0:t.toString())||"unknown",o=null===(n=null==e?void 0:e.customPayload)||void 0===n?void 0:n.cooldown,s=null===(r=null==e?void 0:e.customPayload)||void 0===r?void 0:r.impressionCount;if(!this._experimentClient.isGateEnabled(De.IterableCooldownAndImpressions))return!1;if(void 0===o||void 0===s)return!1;const a=this._getIterableCampaignCooldownAndImpressionCount(i);if(a){const t=a.lastUpdate,n=a.cooldown,r=a.impressionCount,o=Date.now()-t;if(r>0)return o>n?(await this._csActions.setIterableCampaignCooldownAndImpressionCount({campaignId:i,cooldown:n,impressionCount:r-1,lastUpdate:Date.now()}),!1):(this._telemetry.iterableIPMCooldown(i),lq.ipmMessageCooldown(i,r),!0);{const t=await this._getUserIdOrContainerId(),n=e.messageId||"unknown";lq.ipmMessageDelete(Nq,n,this.sessionUUID,i);const o=await aq().bgRpc.api.iterableTrackInAppConsume({userId:t,messageId:n,deleteAction:Nq,deviceInfo:{deviceId:cq(),platform:iz,appPackageName:oz},campaignId:i});return(null==o?void 0:o.code)===nz.SUCCESS&&await this._csActions.deleteIterableCampaignCooldownAndImpressionCount(i),this._telemetry.iterableIPMCooldown(i),lq.ipmMessageCooldown(i,r),!0}}{const e=jG(o);await this._csActions.setIterableCampaignCooldownAndImpressionCount({campaignId:i,cooldown:e,impressionCount:s-1,lastUpdate:Date.now()})}return!1}_isWithinGlobalCooldown(){if(!this._experimentClient.isGateEnabled(De.IterableGlobalCooldown))return!1;const e=this._getIterableGlobalCooldown(),t=null==e?void 0:e.count,n=null==e?void 0:e.lastUpdate;if(J(n)&&J(t)&&t<=0){const e=Date.now()-n<Uq;return e&&(this._telemetry.iterableIPMGlobalCooldown(),lq.ipmMessageGlobalCooldown()),e}return!1}_updateGlobalCooldown(){if(!this._experimentClient.isGateEnabled(De.IterableGlobalCooldown))return;const e=this._getIterableGlobalCooldown(),t=null==e?void 0:e.count,n=null==e?void 0:e.lastUpdate;if(J(n)&&J(t)){if(Date.now()-n<=Uq)return void this._csActions.setIterableGlobalCooldown({count:t-1,lastUpdate:n})}this._csActions.setIterableGlobalCooldown({count:0,lastUpdate:Date.now()})}_parseMessage(e,t){var n,r,i;if(e.content&&e.messageId){const o=e.content.html,s=e.messageId,a=(null===(n=e.campaignId)||void 0===n?void 0:n.toString())||"-1",c=!this._experimentClient.isGateEnabled(De.IterableCooldownAndImpressions)||(null==(null===(r=null==e?void 0:e.customPayload)||void 0===r?void 0:r.cooldown)||null==(null===(i=null==e?void 0:e.customPayload)||void 0===i?void 0:i.impressionCount));this._iterableView.handleMessage(o,s,a,t,c)}}async _hasInAppMessageExpired(e,t){var n;if(!e.content||!e.messageId)return!1;const r=e.messageId,i=null===(n=e.campaignId)||void 0===n?void 0:n.toString(),o=Date.now();return!(o<=(e.expiresAt||o))&&(lq.ipmMessageDelete(Dq,r,this.sessionUUID,i),await aq().bgRpc.api.iterableTrackInAppConsume({userId:t,messageId:r,deleteAction:Dq,deviceInfo:{deviceId:cq(),platform:iz,appPackageName:oz},campaignId:i}),!0)}_isTriggerEnabled(e){return this._experimentClient.isGateEnabled(this._triggers[e].gate)}_detectPauseInTyping(e){this._experimentClient.isGateEnabled(De.IterablePauseInTypingTrigger)&&void 0!==this._textObserver&&this._subscriptions.push(this._textObserver.textMapChanged.pipe((0,Fr.b)(e)).subscribe((()=>{this.onTrigger(rz.PauseInTyping)})))}_getIterableCampaignCooldownAndImpressionCount(e){if(e){const t=this._state.view("iterable").get().cooldownAndImpressions,n=null==t?void 0:t.find((t=>t.campaignId===e));return n}}_getIterableGlobalCooldown(){return this._state.view("iterable").get().globalCooldown}}const jq=(e,t,n,r,i,o=q.create("universal.bg.sideEffects.iterable"))=>gu.compose(gu.createEffect(pu.iterableInit,du.bgFirstStart,hu.isBgFirstStart),gu.storeChange(pu.iterableUpdateOnUserSwitch,hu.isUserSwitched),gu.alarm(pu.iterableUpdateOnAlarm,{name:lu.refreshIterableToken,periodInMinutes:240,execRandomly:!1,isDefault:!0}))((async s=>{const a=s.state.dynamicConfig;if(a&&!Mq.shouldCreate(r,a,i))return;const c=`SideEffect getting Iterable client access token: ${s.type}`;o.info(c),n.logIterableApi(c);try{const r=await t.getIterableClientAccessToken(s.type==du.bgFirstStart);n.sideEffectGetIterableClientAccessToken(QB.success,s.type),r&&e.initialize(r.apiKey,r.jwtToken)}catch(e){const t=`SideEffect getting Iterable client access token failed: ${s.type} ${e.code}:${e.message}`;o.error(t),n.logIterableApi(t),n.sideEffectGetIterableClientAccessToken(QB.failed,s.type,e.code)}}));function Fq(e,t){const n=q.create("BackendManagedStorage.clearAllStorage");return gu.storeChange(pu.backendManagedStorageClearOnUserLogout,hu.isUserSwitched,(()=>{e.clearAllStorage().then((0,Tr.g_)((e=>{null==t||t.backendManagedStorage.error(`BackendManagedStorage.clearAllStorage. ${String(e)}`,e),n.error(String(e),e)}),(()=>n.info("Success")))).catch((e=>{null==t||t.backendManagedStorage.error(`BackendManagedStorage.clearAllStorage. Unexpected promise rejection. ${String(e)}`,e),n.error(String(e),e)}))}))}const Lq=(e,t)=>gu.bgFirstStart(pu.monitorCookiesAccessibility,(async n=>{var r;if(null===(r=n.state.dynamicConfig)||void 0===r?void 0:r.monitoringCookiesAccessibilityEnabled)try{const n=await e.getAllGrammarlyCookies();Array.isArray(n)&&n.length?t.cookiesAccessibility.enabled():t.cookiesAccessibility.disabled(JB.emptyCookies)}catch(e){const n=e.message;t.cookiesAccessibility.disabled(function(e){if(e.includes("First-Party Isolation"))return JB.firstPartyIsolation;return JB.unknown}(n),n)}}));class Gq{constructor(){this._subject=new Er.x}_emit(e){this._subject.next(e)}subscribe(e){this._subject.subscribe(e)}refreshUser(e,t){this._emit({type:du.refreshUser,reason:e,isSignUp:t})}logoutUser(){this._emit({type:du.logoutUser})}}class Bq{constructor(e,t,n,r,i,o){this._extensionApi=e,this._store=t,this._sideEffectEmitter=n,this._alarmService=r,this._apiService=i,this._bgStartType=o,this._log=q.create("SideEffectManager"),this._sideEffects=[]}_pushSideEffect(e){e.kind===du.alarm?this._sideEffects.push(e.create(this._alarmService)):this._sideEffects.push(e.create())}register(...e){e.forEach((e=>{Array.isArray(e)?e.forEach((e=>this._pushSideEffect(e))):this._pushSideEffect(e)}))}async _emit(e){const t=await this._store.getAll(),n={...e,state:t};this._sideEffects.forEach((t=>{if(t.kind===e.type&&t.condition(n))try{this._log.debug(`SideEffect "${t.name}" was called with: `,e),t.effect(n)}catch(n){this._log.error(`SideEffect "${t.name}" was fail on ${JSON.stringify(e)}`,n)}}))}async _emitInitBg(){await this._bgStartType===PV.StartType.firstStart&&await this._emit({type:du.bgFirstStart}),await this._emit({type:du.bgWakeUp})}async init(){var e,t,n,r;this._extensionApi.tabs.onActiveTabChange((({id:e=0,url:t=""})=>{this._emit({type:du.activeTabChange,tab:{id:e,url:t}})}),(e=>this._log.error("runtime error by changing active tab",e))),null===(t=(e=this._extensionApi).initOAuth)||void 0===t||t.call(e,(()=>{this._emit({type:du.refreshUser,reason:"oauth"})}),this._apiService),null===(r=(n=this._extensionApi).initSubscriptionUpdatedHandler)||void 0===r||r.call(n,(()=>{this._emit({type:du.refreshUser,reason:"subscription"})})),this._alarmService.onAlarm((e=>{this._emit({type:du.alarm,alarm:e})})),this._sideEffectEmitter.subscribe((e=>{this._emit(e)})),this._store.changes.subscribe((e=>{e&&this._emit({type:du.storeChange,change:e})})),await this._emitInitBg()}initWithExperimentClient(e){Ew.isViewEnabled(e)&&this._extensionApi.tabs.onWindowOrActiveTabChange((e=>{var t,n;this._emit({type:du.windowOrActiveTabChange,tab:e?{id:null!==(t=e.id)&&void 0!==t?t:0,url:null!==(n=e.url)&&void 0!==n?n:""}:void 0})}),(e=>this._log.error("runtime error by changing window or active tab",e)))}}async function zq(e,t,n,r,i=!1){let o;try{if((Le()||Ne()||"safariWebExtension"===N().bundleInfo.extensionType||"safariIOSWebExtension"===N().bundleInfo.extensionType)&&(o=await async function(e,t){var n,r;try{const i=await e.getLastAuthenticationEvent(),o=await t.get(["lastAuthnEvent"]),s=null===(n=o.lastAuthnEvent)||void 0===n?void 0:n.value,a=null===(r=o.lastAuthnEvent)||void 0===r?void 0:r.initTs,c=Boolean(a),l=Boolean(!i&&s),u=Boolean(i&&i.value!==s),d=l||u,h=Date.now();return c&&!d||await t.patch({lastAuthnEvent:{value:i?i.value:null,initTs:c?a:h,updateTs:h}},!0),c&&d}catch(e){return Kt().logoutLastAuthnEventError(e.message),!1}}(e,t)),"logout"===n||"changed-user"===n||"not_authorized"===n||"oauth"===n)return await r(n);if(o&&i)return await r("last_authn_event_logout")}catch(e){Kt().logoutError(e.message)}}class Vq extends qL{constructor(e,t,n,r,i){super(e,t,n,r,i)}async launchAuthFlow(){var e;if(this.isOAuth2Phase2Enabled)if(Me())this._logger.debug("Safari is not supported for non-interactive auth flow, skipping");else try{if(this._logger.debug("Starting Web Auth flow for non-interactive mode"),!(null===(e=this._extensionApi.identity)||void 0===e?void 0:e.launchWebAuthFlow))throw new Error("Identity API is not available");const t=await this._extensionApi.identity.launchWebAuthFlow({url:await this.getAuthUrl(!1),interactive:!1,timeoutMsForNonInteractive:5e3});if(!t)throw new Error("Empty response from Web Auth flow");return void this.handleRedirectCallback(t).catch((()=>{}))}catch(e){throw this.reportCodeExchangeError(e),e}else this._logger.debug("OAuth2 Phase 2 is not enabled, skipping")}get isOAuth2Phase2Enabled(){var e;return"test"===(null===(e=ZJ().experimentClient)||void 0===e?void 0:e.getTreatment(YS.OAuth2Phase2))}}const qq=q.create("universal.bg.user.manger");class Hq{constructor(e,t,n,r,i,o,s,a,c,l,u,d,h,p,g,f){this._dapiService=e,this._cheetahService=t,this._dialectSettingsService=n,this._knowledgeHubBGService=r,this._telemetry=i,this._productMetricsClient=o,this._cookiesHelper=s,this._getContainerIdOrUndefined=a,this._updateManakinExperiment=c,this._storeActions=l,this._store=u,this._experimentClient=d,this._apiService=h,this._passportService=p,this._dataSharingService=g,this._institutionAdminApi=f,this.fetchUser=async()=>{const e=async()=>{try{const e=await this._cookiesHelper.getGrauth(),t=await HE.fetchUser(this._apiService,this._cookiesHelper),n=await this._cookiesHelper.getGrauth();return(null==e?void 0:e.value)!==(null==n?void 0:n.value)&&!t.anonymous&&(this._telemetry.sendFemetricsRate("authz_grauth_renewal",{httpStatus:200}),this._telemetry.logGrauthExchange()),t}catch(e){throw e.isFromAuth=!0,e}},t=async()=>{try{return await HE.fetchUser(this._apiService,this._cookiesHelper,!0)}catch(e){throw e.isFromAuth=!0,e}},n="test"===this._experimentClient.getTreatment(YS.V5UserInfo);try{return await(n?t():e())}catch(t){if(401!==t.statusCode&&401!==t.code)throw t;return await this._apiService.logout("unauthorized"),e()}},this.update=async e=>{var t,n;aA.start("updateUser");try{HE.trackCookieHeaderSize(this._cookiesHelper);const r=await this._getContainerIdOrUndefined("UserService:update");void 0!==r&&this._telemetry.setContainerId(r);const{reason:i,eventType:o}=e;if(await zq(this._cookiesHelper,this._store,i,(async e=>{await this._apiService.logout(e),this._telemetry.logoutSuccess(e)}),this._experimentClient.isGateEnabled(De.OAuth2LastAuthnEventLogout)),"changed-user"===i){const e=q.create("OAuth2.0 Phase 2");try{await this._authFlowClient.launchAuthFlow()}catch(t){this._telemetry.sendFemetricsRate("authClientMigration.authorizationCodeExchangeFailed",{errorName:t.name,errorMessage:t.message,httpStatusCode:t instanceof qn?t.status:-1}),e.error("Web authentication flow failed.",t);try{await this._apiService.oauthClient.loginWithTokenExchangeOrAnonymous("UserInitiatedLogin"),Nc.authzFallbackSucceedAfterCodeExchangeAttempt(),this._telemetry.sendFemetricsRate("authClientMigration.fallbackSucceedAfterCodeExchangeAttempt")}catch(t){e.error("Token exchange failed.",t)}}}const s=await this.fetchUser();await this._updateManakinExperiment();const{user:a}=await this._store.get(["user"]),c=await this.getGoExperience(a,s),l=HE.prepareUser(s,c),{extensionInstallDate:u}=await this._store.get(["extensionInstallDate"]);Mc("session-invalidate",l,a,e.reason,u,this._experimentClient.isGateEnabled(De.TrackInstitutionIdToGnar));const d=!1===l.anonymous&&!0===(null==a?void 0:a.anonymous)&&void 0!==a.email,h=l.anonymous&&!(null==a?void 0:a.anonymous)&&void 0!==(null==a?void 0:a.email);if((async(e,t,{user:n,oldUser:r,eventType:i,isSignUp:o})=>{const s=q.create("authTracking");if(i===du.refreshUser&&(s.debug("refreshUser",{user:n,oldUser:r,eventType:i,isSignUp:o}),!1===n.anonymous&&!0===(null==r?void 0:r.anonymous)&&r.email!==n.email))try{const{authenticationStarted:n}=await t.get(["authenticationStarted"]);if(n){const t=Date.parse(n);e.logInFormSuccess(!0,o,Math.round(((new Date).getTime()-t)/1e3)),s.debug("authStartedTime",t)}else s.debug("authStarted is falsy",n),e.logInFormSuccess(!1)}catch(t){s.debug("unable to get authStarted from persistent storage",t),e.logInFormSuccess(!1)}finally{t.patch({authenticationStarted:null})}})(Nc,this._store,{eventType:e.eventType,reason:e.reason,user:l,oldUser:a,isSignUp:e.isSignUp}),this._telemetry.compareUserInUserUpdate({userLoggedIn:d,userLoggedOut:h,userChanged:d||h,userInit:!a||""==a.id,userUpdateEventType:o,userUpdateReason:i}),l.anonymous){const e=a?qS.getType(a):VS.anonymous;await this._storeActions.settings.setPreviousUserType(e)}if(await this._storeActions.base.setUser(l),!0===d)await this._storeActions.settings.setAuthenticatedUserWasBusinessAccount(!1);else if(h){const{entitlements:e}=null!==(t=this._store.view("passport").get())&&void 0!==t?t:{},n=(null==e?void 0:e.brandingSet)&&qS.shouldUserSeeLegacyGBBranding(a,e.brandingSet);await this._storeActions.settings.setAuthenticatedUserWasBusinessAccount(null!=n&&n)}l.anonymous||await this._storeActions.settings.hideLoginReminder(),await this._dapiService.updateProps(),await this._cheetahService.fetchStatus(),await this._knowledgeHubBGService.getKnowledgeHubSettings(),l.anonymous||await this._passportService.fetchPassport(),l.institutionInfo?await this._dialectSettingsService.update():this._dialectSettingsService.reset();const{authDegradation:p}=null!==(n=this._store.view("connection").get())&&void 0!==n?n:{};p&&await this._storeActions.connection.modifyConnection({authDegradation:!1}),this._experimentClient.isGateEnabled(De.ExtensionDebugReport)&&ZJ().enableHistoryLoggerInProd(!0,"user gate"),this._experimentClient.isGateEnabled(De.EnableAssistantForGoUsers)&&l.go_experience&&await async function(e,t=q.create("assistant.enableAssistantForGoUsers")){const n=yw(e),r=IB(n());void 0===r.enabled?(t.debug('Updating settings with assistant enabled as "defaultOn"'),await CB(e,"defaultOn",n),dC(Nc,"defaultOn",r.enabled)):t.debug("Assistant was explicitly toggled on/off or is defaultOn, skipping")}(this._store)}catch(t){if(await this._storeActions.connection.modifyConnection({authDegradation:!0}),this._telemetry.fetchUserFail(e.reason,t.body,t.statusCode,t.isFromAuth),qq.warn("Update user failed. Message: ",t),e.useCache){const{user:e}=await this._store.get(["user"]);await this._storeActions.base.setUser(e||qS.defaultUser)}}finally{aA.stop("updateUser")}},this._authFlowClient=new Vq(ZJ().browserApi,this._apiService.oauthClient,q.create("NonInteractiveAuthFlowClient"),this._telemetry,Nc)}async getGoExperience(e,t){if(!this._experimentClient.isGateEnabled(De.ExtensionGoOnboarding))return;const n=(null==e?void 0:e.id)===t.id,r=void 0!==(null==e?void 0:e.go_experience);return n&&r?e.go_experience:await qE(this._cookiesHelper,!1)}}const Wq=e=>{const{chromeStoreSignup:t={}}=e,{timesToShowToolbarPopup:n=0}=t;return n>0&&(e=>{const{timesShown:t=0,timesToShowToolbarPopup:n=0}=e;return t>=n})(t)},$q=(e,t,n,r,i,o,s)=>{const a=o.anonymous&&Ue()&&"webstore"===t&&(e=>!!e&&Date.now()-e<Ea)(n)&&!((e,t)=>{const{homepage:n,socialAuth:r}=t.appConfig.url,{active:i}=e;return i.url.startsWith(n)||(o=i,Object.values(r).some((e=>o.url.startsWith(e))));var o})(i,s)&&!Wq(r);return a?(e=>e.getTreatment(YS.ChromeStoreSignupV2))(e):null},Xq=Ta(30),Kq={ttl:Xq,useRefreshJitter:!0},Yq=m(Object.values(YS),(e=>e instanceof ge.KS?[e]:Object.values(e))),Zq=Object.values(De),Jq=(e,t)=>new ge.XJ(e,Yq,t,Zq,Kq),Qq=async e=>{const t=await QS(e.fingerprints);if((e=>!!(e&&e["X-Client-Type"]&&e["X-Client-Version"]))(t))return t;throw new Error("Cannot get application headers")};class eH{constructor(e,t,n,r,i){this._prefs=e,this._storageKey=t,this._getTreatments=n,this._getFallbackTreatmentsNoCache=r,this._telemetry=i,this._loading=!1,this._getTreatmentQueue=[],this.getTreatments=async(e=!1)=>{if(e)return await this._getTreatmentsMaybeCached(!0);if(this._loading)return new Promise(((e,t)=>{this._getTreatmentQueue.push({resolve:e,reject:t})}));let t;this._loading=!0;try{t=await this._getTreatmentsMaybeCached()}catch(e){throw this._rejectGetTreatment(e),e}finally{this._loading=!1}return this._resolveGetTreatment(t),t},this._getTreatmentsMaybeCached=async(e=!1)=>{var t;try{if(e)await this._removeCache();else{const e=await this._getCachedTreatments();if(e&&Date.now()-e.timestamp<iH)return e.treatments}}catch(e){throw this._telemetry.treatments.getTreatmentsFromCacheFail(e,this._storageKey),e}let n;try{n=await this._getTreatments(),n=await tH(n,this._prefs)}catch(r){this._telemetry.treatments.getTreatmentsFromServerFail(r,this._storageKey);try{n=e?await this._getFallbackTreatmentsNoCache():(null===(t=await this._getCachedTreatments())||void 0===t?void 0:t.treatments)||[],this._telemetry.treatments.getFallbackTreatmentsSuccess(n.map((e=>`${e.experimentName}:${e.groupName}`)),this._storageKey)}catch(e){throw this._telemetry.treatments.getFallbackTreatmentsFail(e,this._storageKey),e}}try{await this._setCache(n)}catch(e){}return n},this._resolveGetTreatment=e=>{this._getTreatmentQueue.forEach((({resolve:t})=>{t(e)})),this._getTreatmentQueue=[]},this._rejectGetTreatment=e=>{this._getTreatmentQueue.forEach((({reject:t})=>{t(e)})),this._getTreatmentQueue=[]},this._isCachedTreatments=e=>!!(e&&e.treatments&&Number.isInteger(e.timestamp)),this._getCachedTreatments=async()=>{const e=await this._prefs.get(this._storageKey);return this._isCachedTreatments(e)?e:null},this._setCache=e=>{const t={treatments:e,timestamp:Date.now()};return this._prefs.set(this._storageKey,t)},this._removeCache=()=>this._prefs.remove([this._storageKey])}}const tH=async(e,t)=>{var n;const r=null!==(n=await t.get("experimentOverride"))&&void 0!==n?n:{};return e.map((e=>e.experimentName in r?{...e,groupName:r[e.experimentName]}:e))};class nH extends ge.s{constructor(e,t,n,r,i=Ve()){super(self.fetch.bind(self),{getApplicationHeaders:()=>Qq(n),timeout:nH.TIMEOUT},"dev-qa"===i||"qa"===i?"qa":"dev-preprod"===i?"preprod":"prod"),this.getTreatment=async(e,t=!1)=>this._storageManager.getTreatments(t),this._storageManager=new eH(t,"experimentationGatesTreatments",(()=>super.getTreatment(e)),(()=>Promise.resolve([])),r)}}nH.TIMEOUT=xa(10);class rH extends ge.JB{constructor(e,t,n,r,i,o,s=Ve()){super(self.fetch.bind(self),{getApplicationHeaders:()=>Qq(i),timeout:rH.TIMEOUT},"dev-qa"===s||"qa"===s?"qa":"dev-preprod"===s?"preprod":"prod",{get:e=>r.get(e),set:(e,t)=>r.set(e,t),clientName:"extension",experimentNames:t}),this.getTreatment=async(e,t=!1)=>this._storageManager.getTreatments(t),this.refetchTreatment=async e=>this._storageManager.getTreatments(!0),this.logTreatment=async e=>super.logTreatment(e),this._storageManager=new eH(r,"experimentationTreatments",(()=>super.getTreatment(t.concat(n))),(()=>e.getTreatment(void 0,!0)),o)}}rH.TIMEOUT=xa(10);const iH=.9*Xq;var oH=__webpack_require__(32734);class sH{constructor(e,t=Promise.resolve(),n=q.create("PersistentStore"),r=Kt()){this._api=e,this._current=U.h.create({}),this._mismatchedChanges=new Er.x,this.get=async e=>kE.parse(await this._api.get(e),e),this.getAll=async()=>kE.parse(await this._api.getAll()),this.patch=async(e,t=!1)=>{if(t||!kE.hasProtectedKeys(e))return await this._api.set(e);throw new Error("Attempting to directly patch protected keys of the store. Consider using actions for this operation.")},this.view=this._current.view.bind(this._current),this.dispose=()=>{this._subs.forEach((e=>e.unsubscribe())),this._subs=[]},this.changes=bG(this._api.changes).pipe((0,Gr.U)(kE.parseChange),(0,Ki.h)((e=>0!==Object.keys(e).length)),(0,oH.B)()),this._subs=[],this._applyChanges=(e,t)=>{Object.keys(t).forEach((n=>{var r;if(!Y(null===(r=t[n])||void 0===r?void 0:r.oldValue,e[n]))throw new Error("mismatched_changes")}));const n=H(((e,t)=>null==t?void 0:t.newValue),t);return Object.assign({},e,n)},t.then((()=>this._api.getAll())).then((e=>this._current.set(kE.parse(e)))).then((()=>{this._subs.push(this.changes.subscribe((e=>{try{this._current.modify((t=>this._applyChanges(t,e)))}catch(e){"mismatched_changes"===e.message?(n.warn("Mismatched changes to Persistent Store",e),this._mismatchedChanges.next(void 0)):(n.error("Unexpected error while applying changes to Persistent Store",e),r.storageApplyChangesFailed(e))}})))})),this._subs.push(this._mismatchedChanges.pipe((0,Fr.b)(200)).subscribe((()=>{this._api.getAll().then((e=>this._current.set(kE.parse(e))))})))}}const aH={onLoadSuccess:()=>Kt().sendFemetricsRate("clientControlsConfigLoaded"),onLoadFailed:()=>Kt().sendFemetricsRate("clientControlsConfigLoadFailed"),onCacheUnavailable:()=>Kt().sendFemetricsRate("clientControlsCacheUnavailable",{clientControlsFallbackEnabled:!0}),onConfigMalformed:()=>Kt().sendFemetricsRate("clientControlsConfigMalformed")};class cH{constructor(e,t,n,r,i,o=aH,s=q.create("Client Controls Service")){this._settingsRegistryService=e,this._getUserOrUndefined=t,this._extensionAPI=n,this._experimentClient=r,this._clientControlsCache=i,this._tracking=o,this._log=s,this._parseManagedStorageRecord=e=>e.split(",").map((e=>e.trim())).filter((e=>!!e)),this._parseDomainsManagedStorageRecord=e=>this._parseManagedStorageRecord(e).map((e=>({domain:e,subdomains:!0,blocked:!0,reason:"ORGANIZATION_CONTROLS"}))),this._parseClientsManagedStorageRecord=e=>this._parseManagedStorageRecord(e).map((e=>({client:e,blocked:!0,reason:"ORGANIZATION_CONTROLS"})))}_shouldLoadConfig(){const e=this._getUserOrUndefined();return e&&qS.doesUserBelongToInstitution(e)}_canUseDlp(){const e=this._getUserOrUndefined();return e&&qS.doesUserBelongToInstitution(e)&&"enabled"===this._experimentClient.getTreatment(YS.ClientControlsDlp)}async _loadConfigFromManagedStorage(){const e=this._extensionAPI.managedStorage;if(!e)return lH.LEAST_RESTRICTIVE_CONFIG;try{const[t=""]=await e.get("GrammarlyBlockedClients"),[n=""]=await e.get("GrammarlyBlockedDomains"),[r=!1]=await e.get("GrammarlyConfidentialModeEnabled"),[i=!1]=await e.get("GrammarlyDlpEnabled"),o=this._parseClientsManagedStorageRecord(t),s=this._parseDomainsManagedStorageRecord(n);return{clients:o,domains:s,allowedDomains:[],allowedDomainsEnabled:!1,confidentialModeEnabled:r,dlpEnabled:i,dlpConfiguration:{patterns:{}},touchTypistAvailableByInstitution:lH.LEAST_RESTRICTIVE_CONFIG.touchTypistAvailableByInstitution}}catch(e){return lH.LEAST_RESTRICTIVE_CONFIG}}_getUserId(){var e;return null===(e=this._getUserOrUndefined())||void 0===e?void 0:e.id}async fetchOrFallback(){const e=this._getUserId(),t=this._shouldLoadConfig()?await this._fetchOrFallback(e):lH.LEAST_RESTRICTIVE_CONFIG;return await this._clientControlsCache.save(t,e),t}async _fetchOrFallback(e){try{const e=await this._settingsRegistryService.fetchMergedSettings(kI,SI),t=lH.mapToClientControlsConfig(e),n=await this._loadConfigFromManagedStorage(),r=t.clientControlsEnabled?lH.mergeConfig(t,n):lH.LEAST_RESTRICTIVE_CONFIG,i=this._canUseDlp()?r:{...r,dlpEnabled:!1};return this._tracking.onLoadSuccess(),i}catch(t){t instanceof Bw&&this._tracking.onConfigMalformed();const n=t instanceof Error?t.message:"Unknown error";this._log.error("Client controls: Fetch config error: "+n,t),this._tracking.onLoadFailed();const r=await this._clientControlsCache.get(e);if(r)return r;this._tracking.onCacheUnavailable();return lH.MOST_RESTRICTIVE_CONFIG}}async getFromStorage(){const e=this._getUserId(),t=await this._clientControlsCache.get(e);return null!=t?t:lH.LEAST_RESTRICTIVE_CONFIG}}var lH;!function(e){e.LEAST_RESTRICTIVE_CONFIG={clients:[],domains:[],allowedDomains:[],allowedDomainsEnabled:!1,confidentialModeEnabled:!1,dlpEnabled:!1,dlpConfiguration:{patterns:{}},touchTypistAvailableByInstitution:!0},e.MOST_RESTRICTIVE_CONFIG={clients:[{client:"extensionChrome",blocked:!0,reason:"SERVER_UNAVAILABLE"},{client:"extensionFirefox",blocked:!0,reason:"SERVER_UNAVAILABLE"},{client:"extensionEdge",blocked:!0,reason:"SERVER_UNAVAILABLE"}],domains:[],allowedDomains:[],allowedDomainsEnabled:!1,confidentialModeEnabled:!0,dlpEnabled:!0,dlpConfiguration:ij,touchTypistAvailableByInstitution:!0},e.mergeConfig=(e,t)=>({clients:[...e.clients,...t.clients],domains:[...e.domains,...t.domains],allowedDomains:[...e.allowedDomains,...t.allowedDomains],allowedDomainsEnabled:e.allowedDomainsEnabled||t.allowedDomainsEnabled,confidentialModeEnabled:e.confidentialModeEnabled||t.confidentialModeEnabled,dlpEnabled:e.dlpEnabled||t.dlpEnabled,dlpConfiguration:{patterns:{...e.dlpConfiguration.patterns,...t.dlpConfiguration.patterns}},touchTypistAvailableByInstitution:e.touchTypistAvailableByInstitution}),e.mapToClientControlsConfig=e=>{var t,n,r;return{clients:(null===(t=e.blockedClients)||void 0===t?void 0:t.blockedClients.map((e=>({client:e.client,blocked:e.enabled,reason:"ORGANIZATION_CONTROLS"}))))||[],domains:(null===(n=e.blockedDomains)||void 0===n?void 0:n.blockedDomains.map((e=>({domain:e.domain,subdomains:e.withSubdomains,blocked:e.enabled,reason:"ORGANIZATION_CONTROLS"}))))||[],allowedDomains:(null===(r=e.allowedDomains)||void 0===r?void 0:r.allowedDomains.map((e=>({domain:e.domain,subdomains:e.withSubdomains,enabled:e.enabled,reason:"ORGANIZATION_CONTROLS"}))))||[],allowedDomainsEnabled:e.clientControls.allowedDomainsEnabled,confidentialModeEnabled:e.clientControls.confidentialModeEnabled,dlpEnabled:e.clientControls.dlpEnabled,dlpConfiguration:e.clientControls.dlpConfiguration,clientControlsEnabled:e.clientControls.clientControlsEnabled,touchTypistAvailableByInstitution:e.clientControls.touchTypistAvailable}}}(lH||(lH={}));const uH=Ur.Z_,dH=Ur.G0([Ur.i0("ORGANIZATION_CONTROLS"),Ur.i0("SERVER_UNAVAILABLE")]),hH=Ur.dt({clients:Ur.IX(Ur.dt({client:uH,blocked:Ur.O7,reason:dH})),domains:Ur.IX(Ur.dt({domain:Ur.Z_,subdomains:Ur.O7,blocked:Ur.O7,reason:dH})),allowedDomains:Ur.IX(Ur.dt({domain:Ur.Z_,subdomains:Ur.O7,enabled:Ur.O7,reason:dH})),allowedDomainsEnabled:Ur.O7,confidentialModeEnabled:Ur.O7,dlpEnabled:Ur.O7,dlpConfiguration:vI,touchTypistAvailableByInstitution:Ur.O7});class pH{constructor(e,t=q.create("ClientControlsCacheImpl")){this._persistentStore=e,this._log=t,this.save=async(e,t)=>{try{await this._persistentStore.patch({clientControlsCacheEntry:{userId:t,config:e}}),this._log.info("Client controls: saved to cache successfully")}catch(e){this._log.error("Client controls: error saving config to cache")}},this.get=async e=>{var t;try{const{clientControlsCacheEntry:n}=await this._persistentStore.get(["clientControlsCacheEntry"]);return hH.is(null==n?void 0:n.config)&&e===(null==n?void 0:n.userId)?(this._log.info("Client controls: loaded from cache successfully"),null!==(t=null==n?void 0:n.config)&&void 0!==t?t:null):(this._log.info("Client controls: No valid config for the current user in cache"),null)}catch(e){return this._log.error("Client controls: Error getting config from cache"),null}}}}var gH=__webpack_require__(30954);class fH extends Map{constructor(e){super(),this.maxSize=e}set(e,t){if(this.has(e))this.delete(e);else if(this.size>=this.maxSize){const e=this.keys().next(void 0).value;this.delete(e)}return super.set(e,t),this}get(e){const t=super.get(e);return void 0!==t&&(this.delete(e),this.set(e,t)),t}}class mH{_getConfigurationSafe(e){return Nr.Y3((()=>Promise.resolve(new gH.Configuration(e))),Tr.KC)}_initUphookHubClientSafe(e){return Nr.Y3((()=>Promise.resolve(new gH.UphookHubClient(e,e))),Tr.KC)}constructor(e,t,n,r){this._url=e,this._apiService=t,this._getUserId=r,this._log=q.create("UphookHubService"),this._api=Nr.Uo(Tr.t$(new Error("API not initialized"))),this._cache=new fH(20),this.getApplicationHeadersSafe=Nr.it(QS,Tr.KC),this._api=(0,Ir.zG)(this._apiService.fingerprints,this.getApplicationHeadersSafe,Nr.VS((e=>this._getConfigurationSafe({basePath:this._url,fetchApi:n,headers:{...e},credentials:"include"}))),Nr.VS(this._initUphookHubClientSafe))}_getCacheKey(e){return function(e){try{return function(e){let t=2166136261;for(let n=0;n<e.length;n++)t^=e.charCodeAt(n),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return(t>>>0).toString(16)}(JSON.stringify(e))}catch(e){return console.error("Error occurred while hashing object:",e),""}}({userId:this._getUserId(),slot:e})}_isCacheValid(e){return Date.now()-e.timestamp<3e5}_getCachedConfig(e){const t=this._getCacheKey(e),n=this._cache.get(t);return(0,Ir.zG)(kr.ij(n),kr.hX(this._isCacheValid.bind(this)),kr.UI((e=>e.data)))}_setCachedConfig(e,t){const n=this._getCacheKey(e);this._cache.set(n,{data:t,timestamp:Date.now()}),this._log.info(`[UphookHub Cache SET] slot: ${e}`)}getUphookHubConfiguration(e){return(0,Ir.zG)(this._getCachedConfig(e),kr.g_((()=>(this._log.info(`[UphookHub Cache MISS] slot: ${e}`),(0,Ir.zG)(this._api,Nr.VS((t=>Nr.Y3((()=>t.getConfigurationOrFallback(e)),Tr.KC))),Nr.UI((t=>(this._setCachedConfig(e,t),t))))())),(t=>(this._log.info(`[UphookHub Cache HIT] slot: ${e}`),Promise.resolve(Tr.F2(t))))))}async getUphookHubConfigurationsFromSlots(e){let t=Tr.F2({});const n=[],r={};for(const t of e){const e=this._getCachedConfig(t);kr.pC(e)?(r[t]=e.value,this._log.info(`[UphookHub Cache HIT] slot: ${t}`)):(n.push(t),this._log.info(`[UphookHub Cache MISS] slot: ${t}`))}return n.length>0&&(t=await(0,Ir.zG)(this._api,Nr.VS((e=>Nr.Y3((async()=>{const t=await e.getConfiguration(n);return Object.fromEntries(Object.entries(t).map((([e,t])=>[e,t])))}),Tr.KC))))()),(0,Ir.zG)(t,Tr.UI((e=>(Object.entries(e).forEach((([e,t])=>{this._setCachedConfig(e,t)})),{...r,...e}))))}trackUphookHubConfiguration(e,t){return(0,Ir.zG)(this._api,Nr.VS((n=>Nr.Y3((()=>n.track(e,t)),Tr.KC))),Nr.UI((()=>{})))()}}class bH{sendMeasures(){}dispose(){}startMeasure(){}endMeasure(){}}var yH=__webpack_require__(87991),_H=__webpack_require__(32540),vH=__webpack_require__(4447),wH=["addListener","removeListener"],SH=["addEventListener","removeEventListener"],kH=["on","off"];function IH(e,t,n,r){if((0,_H.m)(n)&&(r=n,n=void 0),r)return IH(e,t,n).pipe((0,vH.Z)(r));var i=(0,Cr.CR)(function(e){return(0,_H.m)(e.addEventListener)&&(0,_H.m)(e.removeEventListener)}(e)?SH.map((function(r){return function(i){return e[r](t,i,n)}})):function(e){return(0,_H.m)(e.addListener)&&(0,_H.m)(e.removeListener)}(e)?wH.map(CH(e,t)):function(e){return(0,_H.m)(e.on)&&(0,_H.m)(e.off)}(e)?kH.map(CH(e,t)):[],2),o=i[0],s=i[1];if(!o&&(0,yH.z)(e))return(0,Gc.z)((function(e){return IH(e,t,n)}))((0,Br.Xf)(e));if(!o)throw new TypeError("Invalid event target");return new bi.y((function(e){var t=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.next(1<t.length?t:t[0])};return o(t),function(){return s(t)}}))}function CH(e,t){return function(n){return function(r){return e[n](t,r)}}}const{visibility$:EH,isVisible:AH}=(()=>{const e={visibility$:Mr.E,hidden$:Mr.E,isVisible:()=>!0};try{return self.document?function(){const e=IH(document,"visibilitychange"),t=()=>"visible"===document.visibilityState,n=e.pipe((0,Ki.h)((()=>!t())),(0,cj.h)(!1));return{visibility$:e.pipe((0,Gr.U)(t)),hidden$:n,isVisible:t}}():e}catch(t){return e}})();class xH{static onDocumentHidden(){(0===this.hiddenTimeRanges.length||"endTime"in this.hiddenTimeRanges[this.hiddenTimeRanges.length-1])&&this.hiddenTimeRanges.push({startTime:performance.now()})}static onDocumentVisible(){if(0===this.hiddenTimeRanges.length)return;const e=this.hiddenTimeRanges[this.hiddenTimeRanges.length-1];"endTime"in e||(this.hiddenTimeRanges[this.hiddenTimeRanges.length-1]={...e,endTime:performance.now()})}static pageHiddenDuringEvent(e,t){const n=this.hiddenTimeRanges;for(let r=0;r<n.length;r++){const{startTime:i,endTime:o}=n[r];if(void 0!==o){if(!(o<e)){if(i>t)break;return!0}}else if(i<t)return!0}return!1}static clearHiddenTimeRanges(){this.hiddenTimeRanges=[]}}xH.hiddenTimeRanges=[],xH.pageVisibilitySubscription=EH.pipe((0,lj.O)(AH())).subscribe((e=>{e?xH.onDocumentVisible():xH.onDocumentHidden()}));class TH{constructor(...e){this._consumers=null==e?void 0:e.filter((e=>null!==e))}sendMetric(e,t,n){this._consumers.forEach((r=>r.sendMetric(e,t,n)))}}const OH=["client","client_version","device"],PH=["user_id","user_type","institution_id"];var RH,DH;!function(e){e.supportedMetrics=["gButtonDisplay","gButtonTextCheck","inlineAlertApply","inlineAlertDisplay","highlightsDisplay","textInputLatencyV1","resizeLatencyV1","scrollLatencyV1"],e.isSupported=function(t){return e.supportedMetrics.includes(t)}}(RH||(RH={}));class NH{constructor(e){this._productMetricsClient=e}sendMetric(e,t,n){RH.isSupported(e)&&this._sendDatabricksMetric(e,t,n)}_sendDatabricksMetric(e,t,n){this._productMetricsClient.send({event_name:this._getEventKindByMetricName(e),dataset_name:"performance",latency:yr(Math.round(t)),integration_id:n.integrationId,hostname:n.domain,is_iframe:n.isIframe,text_length:yr(n.textLength),unmuted_alert_count:yr(n.unmutedCapiAlertsCount),visible_alert_count:yr(n.visibleInlineAlertsCount),time_since_session_start:yr(n.timeSinceSessionStart),extra:this._getExtraFromMeta(e,n)},{additionalProps:[...OH,...PH]})}_getEventKindByMetricName(e){switch(e){case"textInputLatencyV1":return"textInputLatency-performance";case"scrollLatencyV1":return"scrollLatency-performance";case"resizeLatencyV1":return"resizeLatency-performance";case"gButtonDisplay":case"gButtonTextCheck":case"inlineAlertDisplay":case"inlineAlertApply":case"highlightsDisplay":return`${e}-performance`}}_getExtraFromMeta(e,t){switch(e){case"gButtonTextCheck":return this._getGButtonTextCheckExtra(t);case"inlineAlertApply":return this._getInlineAlertApplyExtra(t);case"inlineAlertDisplay":return this._getInlineAlertDisplayExtra(t);case"textInputLatencyV1":return this._getTextInputLatencyExtra(t);default:return{}}}_getGButtonTextCheckExtra(e){return{first_text_check:e.firstTextCheck.toString(),check_completed:e.checkCompleted.toString()}}_getInlineAlertDisplayExtra(e){return{alert_category:e.alertCategory,alert_group:e.alertGroup}}_getInlineAlertApplyExtra(e){return{alert_category:e.alertCategory,alert_group:e.alertGroup}}_getTextInputLatencyExtra(e){return{cursor_position:e.cursorPosition}}}class UH{constructor(e,t){this._metric=e,this._meta=t}getLabels(){return this._getLabelsFromEventMetadataByMetric(this._metric,this._meta)}_getLabelsFromEventMetadataByMetric(e,t){switch(e){case"gButtonDisplay":return this._getGButtonDisplayLabels(t);case"gButtonTextCheck":return this._getGButtonTextCheckLabels(t);case"inlineAlertApply":return this._getInlineAlertApplyLabels(t);case"inlineAlertDisplay":return this._getInlineAlertDisplayLabels(t);case"highlightsDisplay":return this._getHighlightsDisplayLabels(t);case"textInputLatencyV1":return this._getTextInputLatencyLabels(t);case"scrollLatencyV1":return this._getScrollLatencyLabels(t);case"resizeLatencyV1":return this._getResizeLatencyLabels(t);case"gDocsParserExecutionTimeV1":return this._getParserExecutionTimeLabels(t);case"gDocsCachingExecutionTimeV1":return this._getCachingExecutionTimeLabels(t);case"alertProcessing":return this._getAlertProcessingLabels(t);case"httpRequestLatency":return this._getHTTPLatencyLabelsFromEventMetadata(t);default:(0,h.vE)(e)}}_getGButtonDisplayLabels(e){return{...this._getBaseLabelsFromEventMetadata(e)}}_getGButtonTextCheckLabels(e){return{...this._getBaseLabelsFromEventMetadata(e),checkCompleted:e.checkCompleted,firstTextCheck:e.firstTextCheck}}_getInlineAlertApplyLabels(e){return{...this._getBaseLabelsFromEventMetadata(e),alertCategory:e.alertCategory,alertGroup:e.alertGroup}}_getInlineAlertDisplayLabels(e){return{...this._getBaseLabelsFromEventMetadata(e),alertCategory:e.alertCategory,alertGroup:e.alertGroup}}_getHighlightsDisplayLabels(e){return{...this._getBaseLabelsFromEventMetadata(e)}}_getTextInputLatencyLabels(e){return{...this._getBaseLabelsFromEventMetadata(e),cursorPosition:e.cursorPosition}}_getScrollLatencyLabels(e){return{...this._getBaseLabelsFromEventMetadata(e)}}_getResizeLatencyLabels(e){return{...this._getBaseLabelsFromEventMetadata(e)}}_getParserExecutionTimeLabels(e){return{...this._getBaseLabelsFromEventMetadata(e),parserName:e.parserName}}_getCachingExecutionTimeLabels(e){return{...this._getBaseLabelsFromEventMetadata(e),parserName:e.parserName,cacheHit:e.cacheHit}}_getAlertProcessingLabels(e){return{...this._getBaseLabelsFromEventMetadata(e),cursorPosition:e.cursorPosition}}_getBaseLabelsFromEventMetadata(e){return{integrationName:e.integrationName,textLength:(t=e.textLength,0===t?"0":t<=100?">0, <=100":t<=1e3?">100, <=1k":t<=1e4?">1k, <=10k":t<=2e4?">10k, <=20k":t<=5e4?">20k, <=50k":t<=1e5?">50k, <=100k":">100k"),domain:e.domain,isIframe:e.isIframe,browserName:e.browserName,os:e.os};var t}_getHTTPLatencyLabelsFromEventMetadata(e){return{clientId:e.clientId,uri:e.uri,scheme:e.scheme,domain:e.domain,pathname:e.pathname,clientVersion:e.clientVersion,tokenTypes:e.tokenTypes,status:e.status,statusCode:e.statusCode,method:e.method}}}function MH(e,t){const n={};return t.forEach((t=>{n[t]=e.props[t]})),Ur.dt(n)}!function(e){e.schema=Ur.G0([Ur.i0("start"),Ur.i0("first-third"),Ur.i0("second-third"),Ur.i0("last-third"),Ur.i0("end"),Ur.i0("unknown")])}(DH||(DH={}));const jH=Ur.dt({integrationName:Ur.Z_,textLength:Ur.Z_,firstTextCheck:Ur.O7,checkCompleted:Ur.O7,cursorPosition:DH.schema,alertCategory:Ur.Z_,alertGroup:Ur.Z_,parserName:Ur.Z_,cacheHit:Ur.O7}),FH=Ur.dt({isIframe:Ur.O7,domain:Ur.Z_,browserName:Ur.Z_,os:Ur.Z_}),LH=Ur.jV([FH,MH(jH,["integrationName","textLength"])]);var GH,BH,zH;!function(e){e.schema=Ur.dt({integrationName:Ur.Z_,domain:Ur.Z_,isIframe:Ur.O7,textLength:Ur.pk})}(GH||(GH={})),function(e){e.schema=Ur.jV([GH.schema,Ur.dt({browserName:Ur.Z_,os:Ur.Z_})])}(BH||(BH={})),function(e){e.schema=Ur.dt({gButtonDisplay:Ur.jV([BH.schema,Ur.dt({})]),gButtonTextCheck:Ur.jV([BH.schema,Ur.dt({firstTextCheck:Ur.O7,checkCompleted:Ur.O7})]),inlineAlertApply:Ur.jV([BH.schema,Ur.dt({alertCategory:Ur.Z_,alertGroup:Ur.Z_})]),inlineAlertDisplay:Ur.jV([BH.schema,Ur.dt({alertCategory:Ur.Z_,alertGroup:Ur.Z_})]),highlightsDisplay:Ur.jV([BH.schema,Ur.dt({})]),textInputLatencyV1:Ur.jV([BH.schema,Ur.dt({cursorPosition:DH.schema})]),scrollLatencyV1:Ur.jV([BH.schema,Ur.dt({})]),resizeLatencyV1:Ur.jV([BH.schema,Ur.dt({})]),gDocsParserExecutionTimeV1:Ur.jV([BH.schema,Ur.dt({parserName:Ur.Z_})]),gDocsCachingExecutionTimeV1:Ur.jV([BH.schema,Ur.dt({parserName:Ur.Z_,cacheHit:Ur.O7})]),alertProcessing:Ur.jV([BH.schema,Ur.dt({cursorPosition:DH.schema})]),httpRequestLatency:Ur.jV([Ur.dt({clientId:Ur.Z_,uri:Ur.Z_,scheme:Ur.Z_,domain:Ur.Z_,pathname:Ur.Z_,clientVersion:Ur.Z_,tokenTypes:Ur.G0([Ur.i0("access_token"),Ur.i0("grauth"),Ur.i0("access_token_and_grauth"),Ur.i0("anonymous"),Ur.i0("none")]),status:Ur.G0([Ur.i0("success"),Ur.i0("failure"),Ur.i0("normal_close")])}),Ur.r$({statusCode:Ur.pk,method:Ur.Z_})])})}(zH||(zH={}));const VH={gButtonDisplay:Ur.iG(LH),gButtonTextCheck:Ur.iG(Ur.jV([LH,MH(jH,["firstTextCheck","checkCompleted"])])),inlineAlertDisplay:Ur.iG(Ur.jV([LH,MH(jH,["alertCategory","alertGroup"])])),inlineAlertApply:Ur.iG(Ur.jV([LH,MH(jH,["alertCategory","alertGroup"])])),highlightsDisplay:Ur.iG(LH),textInputLatencyV1:Ur.iG(Ur.jV([LH,MH(jH,["cursorPosition"])])),scrollLatencyV1:Ur.iG(LH),resizeLatencyV1:Ur.iG(LH),gDocsParserExecutionTimeV1:Ur.iG(Ur.jV([LH,MH(jH,["parserName"])])),gDocsCachingExecutionTimeV1:Ur.iG(Ur.jV([LH,MH(jH,["parserName","cacheHit"])])),alertProcessing:Ur.iG(Ur.jV([LH,MH(jH,["cursorPosition"])])),httpRequestLatency:zH.schema.props.httpRequestLatency};class qH{constructor(e){this.logger=e}sendMetric(e,t,n){if(!(e in VH))return;const r=new UH(e,n).getLabels(),i=VH[e].decode(r);Tr.nM(i)||Kt().sendFemetricsTimer(e,t,"histogram",i.right)}}function HH(e,t){return`${e}:${t}`}function WH(e,t){return`grammarly:${e}:${t}`}class $H{static startMeasure(e,t,n){const r=HH(e,t);this.measurements.set(r,{startTime:null!=n?n:performance.now()}),this.isDevEnvironment()&&performance.mark(WH(r,"start"))}static endMeasure(e,t,n){const r=self.performance.now(),i=HH(e,t),o=this.measurements.get(i);if(!o)return void(this.isDevEnvironment()&&this.logger.error(`Could not find measurement with ID ${i}`));if("durationInMs"in o)return;if(xH.pageHiddenDuringEvent(o.startTime,r))return void this.measurements.delete(i);const s=r-o.startTime;this.measurements.set(i,{meta:n,startTime:o.startTime,durationInMs:s}),this.isDevEnvironment()&&(performance.mark(WH(i,"end")),performance.measure(WH(i,"duration"),WH(i,"start"),WH(i,"end")))}static sendMeasures(e,t={femetrics:!0,databricks:!0}){var n;const r=null===(n=de().experimentClient)||void 0===n?void 0:n.isGateEnabled(De.DatabricksPerformanceMetrics),i=new TH(t.femetrics?new qH(this.logger):null,r&&t.databricks?new NH(de().productMetricsCSClient):null);e.forEach((({metricName:e,id:t})=>{const n=HH(e,t),r=this.measurements.get(n);if(!r)return void(this.isDevEnvironment()&&this.logger.error(`Could not find measurement with ID ${n}`));if(!("durationInMs"in r))return void(this.isDevEnvironment()&&this.logger.error(`Measurement with ${n} does not have duration set`));const{durationInMs:o,meta:s}=r;i.sendMetric(e,o,s),this.measurements.delete(n)}))}static removeMeasures(e){e.forEach((({metricName:e,id:t})=>{const n=HH(e,t);this.measurements.delete(n)}))}}$H.logger=q.create("PerformanceTimer"),$H.measurements=new Map,$H.isDevEnvironment=()=>!1;class XH{constructor(){this._items=[]}add(e){return this._items.push(e),!0}get(){return this._items}}const KH={textInputLatencyV1:.1,scrollLatencyV1:.1,resizeLatencyV1:.1,highlightsDisplay:.1,gButtonTextCheck:.1,inlineAlertDisplay:.1,inlineAlertApply:.1,gButtonDisplay:.1,gDocsParserExecutionTimeV1:.01,gDocsCachingExecutionTimeV1:1,interactionToNextPaint:.1,alertProcessing:.1,httpRequestLatency:.1},YH={textInputLatencyV1:{"docs.google.com":.01}},ZH=(e,t)=>{var n,r,i;const o=Ge()?void 0:xt(),s=null==t?void 0:t.sessionSamplingForMetrics,a=null==s?void 0:s.find((t=>(null==t?void 0:t.metricName)===e));if(o){const t=(null===(r=null===(n=null==a?void 0:a.byDomain)||void 0===n?void 0:n.find((e=>e.domain===o)))||void 0===r?void 0:r.value)||(null===(i=YH[e])||void 0===i?void 0:i[o]);if(void 0!==t)return t}return(null==a?void 0:a.value)||KH[e]},JH="httpRequestLatency";class QH{static shouldRun(e){return Math.random()<ZH(JH,e)}constructor(e=(()=>performance.now())){this.ids=new Set,this.sendMeasures=(e=Array.from(this.ids.values()))=>{((e,t,n,r={femetrics:!0,databricks:!0})=>{const i=t.get().filter((e=>n.includes(e))),o=i.map((t=>({metricName:e,id:t})));$H.sendMeasures(o,r);const s=Array.from(n).filter((e=>!i.includes(e))),a=s.map((t=>({metricName:e,id:t})));$H.removeMeasures(a)})(JH,this.sampler,e,{femetrics:!0,databricks:!1}),e.forEach((e=>{this.ids.delete(e)}))},this.sampler=new XH,this.getTimestamp=e,this.sessionStartTime=this.getTimestamp()}startMeasure(e){const t=`${(0,Zc.Z)()}:${e}`;return this.sampler.add(t)?($H.startMeasure(JH,t),this.ids.add(t),t):t}endMeasure(e,t){$H.endMeasure(JH,e,t)}dispose(){}}class eW{constructor(e,t,n,r,i,o){this._telemetry=e,this._clientName=t,this._clientVersion=n,this._getUser=r,this._cookiesHelper=i,this._dynamicConfig=o,this._log=q.create("AuthApiStatusTrackerImpl"),QH.shouldRun(this._dynamicConfig)?(this._requestLatencyProfiler=new QH,this._log.debug("HTTP requests latency tracking is enabled")):(this._requestLatencyProfiler=new bH,this._log.debug("HTTP requests latency tracking is skipped"))}watchFetch(e){return async(t,n)=>{var r,i;const o={...this._getClientLabels(),...await this._getHttpRequestLabels(t,n)},s=null===(r=this._requestLatencyProfiler)||void 0===r?void 0:r.startMeasure(t);try{const r=await e(t,n);return this._telemetry.sendFemetricsRate("authz_api_status",{...o,...this._getHttpResponseLabels(r)}),r.ok||this._telemetry.logApiCallFailure(o.uri,null!==(i=null==n?void 0:n.method)&&void 0!==i?i:"GET"),s&&this._requestLatencyProfiler.endMeasure(s,{...o,...this._getHttpResponseLabels(r)}),r}catch(e){throw this._telemetry.sendFemetricsRate("authz_api_status",{...o,statusCode:-1,status:ZB.failure,errorName:e.name}),s&&this._requestLatencyProfiler.endMeasure(s,{...o,status:ZB.failure,statusCode:-1}),e}finally{s&&this._requestLatencyProfiler.sendMeasures([s])}}}watchCAPIEvents(e,t,n){const{uri:r,scheme:i,domain:o,pathname:s}=Oc(t.capiUrl);return e.pipe(Ki.h(XF.hX.is("connect","disconnect")),Lr.w((e=>Lc.D(this._getWSTokenTypes(n).then((t=>({event:e,tokenTypes:t}))))))).subscribe((({event:e,tokenTypes:t})=>{switch(e.kind){case"connect":this._telemetry.sendFemetricsRate("authz_api_status",{...this._getClientLabels(),uri:r,scheme:i,domain:o,pathname:s,tokenTypes:t,status:ZB.success,statusCode:0});break;case"disconnect":this._telemetry.sendFemetricsRate("authz_api_status",{...this._getClientLabels(),uri:r,scheme:i,domain:o,pathname:s,tokenTypes:t,statusCode:e.reason.code,status:[Ej.WsCodes.NORMAL_CLOSURE,Ej.WsCodes.GOING_AWAY].includes(e.reason.code)?ZB.normal_close:ZB.failure,errorName:e.reason.error.name});break;default:(0,ll.L0)(e)}}))}_getClientLabels(){return{clientId:this._clientName,clientVersion:this._clientVersion}}async _getHttpRequestLabels(e,t){var n;const{uri:r,scheme:i,domain:o,pathname:s}=Oc(e),a=await this._getHttpTokenTypes(t);return{uri:r,scheme:i,domain:o,pathname:s,method:null!==(n=null==t?void 0:t.method)&&void 0!==n?n:"GET",tokenTypes:a}}async _getHttpTokenTypes(e){var t;const n=this._getUser();if(null!==(t=null==n?void 0:n.anonymous)&&void 0!==t&&t)return"anonymous";const r=new Headers(null==e?void 0:e.headers).get("Authorization"),i=null!=r&&this._isAuthorizationHeaderValid(r),o=await this._cookiesHelper.getGrauth(),s=null!=(null==o?void 0:o.value);return i&&s?"access_token_and_grauth":!i&&s?"grauth":i&&!s?"access_token":"none"}_isAuthorizationHeaderValid(e){return/Bearer \S+/.test(e)}_getHttpResponseLabels(e){return e.ok?{statusCode:200,status:ZB.success}:{statusCode:e.status,status:ZB.failure}}async _getWSTokenTypes(e){if(!(void 0===e||"string"==typeof e?e:await e()))return"none";return this._getUser().anonymous?"anonymous":"access_token"}}class tW{watchFetch(e){return e}watchCAPIEvents(){return Gl.w0.EMPTY}}var nW,rW;!function(e){e.create=function(e,t,n,r,i,o,s){return e?new eW(t,n,r,i,o,s):new tW}}(nW||(nW={})),function(e){let t;!function(e){e.success="success",e.error="error",e.browserIsShuttingDown="browserIsShuttingDown",e.timeout="timeout"}(t=e.StartKind||(e.StartKind={}))}(rW||(rW={}));const iW=e=>Ye(e)&&/the browser is shutting down/i.test(e.message);var oW,sW;!function(e){e.Success="success",e.FailedValidation="failed_validation",e.Error="error"}(oW||(oW={})),function(e){e.Final="final",e.Partial="partial"}(sW||(sW={}));var aW=(0,Yr.S)((function(e){return(0,Kr.wf)(cW(e),e.struct({}))(e)})),cW=(0,Yr.S)((function(e){return e.struct({id:e.number,agentId:e.string,correlationId:e.string})})),lW=(0,Yr.S)((function(e){return(0,Kr.wf)(cW(e),e.struct({}))(e)})),uW=((0,Yr.S)((function(e){return yW(e)})),(0,Yr.S)((function(e){var t;return e.sum("kind")(((t={}).sensitivity=dW(e),t.badRequest=hW(e),t.serviceLimitExceeded=pW(e),t.unsupportedLanguage=gW(e),t.updateClient=fW(e),t.backendError=mW(e),t.other=bW(e),t))}))),dW=(0,Yr.S)((function(e){return e.struct({kind:e.literal("sensitivity")})})),hW=(0,Yr.S)((function(e){return e.intersect(e.partial({errorCode:e.number}))(e.struct({kind:e.literal("badRequest")}))})),pW=(0,Yr.S)((function(e){return e.struct({kind:e.literal("serviceLimitExceeded")})})),gW=(0,Yr.S)((function(e){return e.struct({kind:e.literal("unsupportedLanguage")})})),fW=(0,Yr.S)((function(e){return e.struct({kind:e.literal("updateClient")})})),mW=(0,Yr.S)((function(e){return e.struct({kind:e.literal("backendError")})})),bW=(0,Yr.S)((function(e){return e.struct({kind:e.literal("other"),type:e.string})})),yW=(0,Yr.S)((function(e){var t;return e.sum("action")(((t={})["agent_generic:request"]=_W(e),t["agent_generic:response"]=vW(e),t["agent_generic:feedbackRequest"]=wW(e),t["agent_generic:feedbackResponse"]=SW(e),t["agent_generic:error"]=kW(e),t))})),_W=(0,Yr.S)((function(e){return(0,Kr.wf)(aW(e),cW(e),e.struct({action:e.literal("agent_generic:request"),commandId:e.string,payload:e.string}))(e)})),vW=(0,Yr.S)((function(e){return(0,Kr.wf)(cW(e),lW(e),e.struct({action:e.literal("agent_generic:response"),payload:e.string,kind:CW(e)}))(e)})),wW=(0,Yr.S)((function(e){return(0,Kr.wf)(aW(e),cW(e),e.struct({action:e.literal("agent_generic:feedbackRequest"),eventName:e.string,eventData:e.string}))(e)})),SW=(0,Yr.S)((function(e){return(0,Kr.wf)(cW(e),lW(e),e.struct({action:e.literal("agent_generic:feedbackResponse"),errorMessage:e.string,result:IW(e)}))(e)})),kW=(0,Yr.S)((function(e){return(0,Kr.wf)(cW(e),lW(e),e.struct({action:e.literal("agent_generic:error"),errorType:uW(e),title:e.string,details:e.string}))(e)})),IW=(0,Kr.Dd)(oW),CW=(0,Kr.Dd)(sW);(0,Yr.S)((function(e){var t;return e.sum("action")(((t={})["agent_generic:request"]=_W(e),t["agent_generic:feedbackRequest"]=wW(e),t))})),(0,Yr.S)((function(e){var t;return e.sum("action")(((t={})["agent_generic:request"]=_W(e),t["agent_generic:response"]=vW(e),t["agent_generic:feedbackRequest"]=wW(e),t["agent_generic:feedbackResponse"]=SW(e),t["agent_generic:error"]=kW(e),t))})),(0,Yr.S)((function(e){var t;return e.sum("action")(((t={})["agent_generic:response"]=vW(e),t["agent_generic:feedbackResponse"]=SW(e),t["agent_generic:error"]=kW(e),t))}));Yr.n(Ax.Schemable)(vW).is,Yr.n(Ax.Schemable)(kW).is;const EW=Yr.n(Ax.Schemable)(lW).is;Yr.n(Ax.Schemable)(yW).is,Yr.n(Ax.Schemable)(SW).is;var AW=__webpack_require__(9119),xW=(0,Yr.S)((function(e){return(0,Kr.wf)(TW(e),e.struct({}))(e)})),TW=(0,Yr.S)((function(e){return e.struct({id:e.number,fileIdentifier:e.string})})),OW=(0,Yr.S)((function(e){return(0,Kr.wf)(TW(e),e.struct({}))(e)})),PW=((0,Yr.S)((function(e){return LW(e)})),(0,Yr.S)((function(e){var t;return e.sum("kind")(((t={}).sensitivity=RW(e),t.unsupportedLanguage=DW(e),t.failedProcessing=NW(e),t.checksumMismatch=UW(e),t.unsupportedFileFormat=MW(e),t.other=jW(e),t))}))),RW=(0,Yr.S)((function(e){return e.struct({kind:e.literal("sensitivity")})})),DW=(0,Yr.S)((function(e){return e.struct({kind:e.literal("unsupportedLanguage")})})),NW=(0,Yr.S)((function(e){return e.struct({kind:e.literal("failedProcessing")})})),UW=(0,Yr.S)((function(e){return e.struct({kind:e.literal("checksumMismatch")})})),MW=(0,Yr.S)((function(e){return e.struct({kind:e.literal("unsupportedFileFormat")})})),jW=(0,Yr.S)((function(e){return e.struct({kind:e.literal("other"),type:e.string})})),FW=(0,Kr.Dd)(AW.d),LW=(0,Yr.S)((function(e){var t;return e.sum("action")(((t={})["assistant_file_upload:uploadUrlRequest"]=GW(e),t["assistant_file_upload:uploadUrlResponse"]=BW(e),t["assistant_file_upload:processFile"]=HW(e),t["assistant_file_upload:success"]=WW(e),t["assistant_file_upload:error"]=$W(e),t["assistant_file_upload:removePersistedData"]=KW(e),t["assistant_file_upload:removeFile"]=YW(e),t["assistant_file_upload:fileRemoved"]=ZW(e),t))})),GW=(0,Yr.S)((function(e){return(0,Kr.wf)(xW(e),TW(e),e.struct({action:e.literal("assistant_file_upload:uploadUrlRequest")}))(e)})),BW=(0,Yr.S)((function(e){return(0,Kr.wf)(TW(e),OW(e),e.struct({action:e.literal("assistant_file_upload:uploadUrlResponse"),s3UploadPath:e.string}))(e)})),zW=(0,Yr.S)((function(e){var t;return e.sum("kind")(((t={}).customTone=VW(e),t.customAudience=qW(e),t))})),VW=(0,Yr.S)((function(e){return e.struct({kind:e.literal("customTone"),name:e.string})})),qW=(0,Yr.S)((function(e){return e.struct({kind:e.literal("customAudience"),name:e.string})})),HW=(0,Yr.S)((function(e){return(0,Kr.wf)(xW(e),TW(e),e.intersect(e.partial({useCaseParameters:zW(e)}))(e.struct({action:e.literal("assistant_file_upload:processFile"),fileFormat:FW(e),useCase:JW(e)})))(e)})),WW=(0,Yr.S)((function(e){return(0,Kr.wf)(TW(e),OW(e),e.struct({action:e.literal("assistant_file_upload:success"),fileFormat:FW(e),fileContent:e.string}))(e)})),$W=(0,Yr.S)((function(e){return(0,Kr.wf)(TW(e),OW(e),e.struct({action:e.literal("assistant_file_upload:error"),errorType:PW(e),title:e.string}))(e)})),XW=(0,Yr.S)((function(e){var t;return e.sum("kind")(((t={}).customTone=VW(e),t.customAudience=qW(e),t))})),KW=(0,Yr.S)((function(e){return(0,Kr.wf)(xW(e),TW(e),e.intersect(e.partial({useCaseParameters:XW(e)}))(e.struct({action:e.literal("assistant_file_upload:removePersistedData"),useCase:JW(e)})))(e)})),YW=(0,Yr.S)((function(e){return(0,Kr.wf)(xW(e),TW(e),e.struct({action:e.literal("assistant_file_upload:removeFile")}))(e)})),ZW=(0,Yr.S)((function(e){return(0,Kr.wf)(TW(e),OW(e),e.struct({action:e.literal("assistant_file_upload:fileRemoved")}))(e)})),JW=(0,Kr.Dd)(AW._);(0,Yr.S)((function(e){return e.struct({supportedFileFormats:e.readonly(e.array(FW(e))),maxFileSize:e.number})})),(0,Yr.S)((function(e){var t;return e.sum("action")(((t={})["assistant_file_upload:uploadUrlRequest"]=GW(e),t["assistant_file_upload:processFile"]=HW(e),t["assistant_file_upload:removePersistedData"]=KW(e),t["assistant_file_upload:removeFile"]=YW(e),t))})),(0,Yr.S)((function(e){var t;return e.sum("action")(((t={})["assistant_file_upload:uploadUrlRequest"]=GW(e),t["assistant_file_upload:uploadUrlResponse"]=BW(e),t["assistant_file_upload:processFile"]=HW(e),t["assistant_file_upload:success"]=WW(e),t["assistant_file_upload:error"]=$W(e),t["assistant_file_upload:removePersistedData"]=KW(e),t["assistant_file_upload:removeFile"]=YW(e),t["assistant_file_upload:fileRemoved"]=ZW(e),t))})),(0,Yr.S)((function(e){var t;return e.sum("action")(((t={})["assistant_file_upload:uploadUrlResponse"]=BW(e),t["assistant_file_upload:success"]=WW(e),t["assistant_file_upload:error"]=$W(e),t["assistant_file_upload:fileRemoved"]=ZW(e),t))}));Yr.n(Ax.Schemable)(HW).is,Yr.n(Ax.Schemable)(WW).is,Yr.n(Ax.Schemable)($W).is,Yr.n(Ax.Schemable)(GW).is,Yr.n(Ax.Schemable)(BW).is,Yr.n(Ax.Schemable)(YW).is,Yr.n(Ax.Schemable)(ZW).is,Yr.n(Ax.Schemable)(KW).is;const QW=Yr.n(Ax.Schemable)(LW).is;var e$,t$,n$,r$,i$,o$,s$=__webpack_require__(59190);!function(e){e.Insertable="insertable",e.NonInsertable="non_insertable"}(e$||(e$={})),function(e){e.Active="active",e.Snoozed="snoozed"}(t$||(t$={})),function(e){e.Generic="generic",e.Overflow="overflow",e.PromptsLimitExceeded="promptsLimitExceeded",e.SensitiveContent="sensitiveContent",e.UnsupportedLanguage="unsupportedLanguage",e.ServerOverloaded="serverOverloaded"}(n$||(n$={})),function(e){e.QuickReply="quickReply",e.Ideation="ideation",e.Rewrite="rewrite",e.QuickRewrite="quickRewrite",e.PushRewrite="pushRewrite",e.Compliance="compliance"}(r$||(r$={})),function(e){e.Generic="generic",e.Info="info"}(i$||(i$={})),function(e){e.Initial="initial",e.Updated="updated",e.Seen="seen"}(o$||(o$={}));var a$=DX((function(e){return(0,Kr.wf)(c$(e),e.struct({}))(e)})),c$=DX((function(e){return e.struct({id:e.number})})),l$=DX((function(e){return(0,Kr.wf)(c$(e),e.struct({}))(e)})),u$=DX((function(e){return e.intersect(e.partial({docIdIsTransient:e.boolean}))(e.struct({}))})),d$=DX((function(e){return e.struct({cheetahState:CX(e)})})),h$=DX((function(e){return e.struct({plain:e.sensitiveString,delta:e.sensitiveDelta})})),p$=DX((function(e){return U$(e)})),g$=DX((function(e){return e.struct({name:e.string,value:e.sensitiveString})})),f$=DX((function(e){var t;return e.sum("valueType")(((t={}).string=b$(e),t.radioButtonGroup=_$(e),t))})),m$=DX((function(e){return e.struct({header:e.string,text:e.readonly(e.array(e.string))})})),b$=DX((function(e){return e.intersect(e.partial({hint:m$(e)}))(e.struct({valueType:e.literal("string"),label:e.string,name:e.string}))})),y$=DX((function(e){return e.struct({header:e.string,text:e.readonly(e.array(e.string))})})),_$=DX((function(e){return e.intersect(e.partial({hint:y$(e)}))(e.struct({valueType:e.literal("radioButtonGroup"),label:e.string,name:e.string,radioButtonGroupValues:e.readonly(e.array(e.string))}))})),v$=(0,Kr.Dd)(e$),w$=DX((function(e){return e.intersect(e.partial({onActionNotification:oX(e)}))(e.struct({}))})),S$=DX((function(e){return e.intersect(e.partial({generatesTextType:v$(e)}))(e.intersect(e.partial({disabled:w$(e)}))(e.struct({id:e.string,iconUrl:e.string,group:e.string,label:e.string,searchTags:e.readonly(e.array(e.string)),args:e.readonly(e.array(f$(e)))})))})),k$=DX((function(e){return e.intersect(e.partial({useReferences:e.readonly(e.array(SX(e)))}))(e.intersect(e.partial({omitReferenceIds:e.readonly(e.array(e.string))}))(e.struct({contextId:e.string,triggerContextId:e.string,actionId:e.string,args:e.readonly(e.array(g$(e)))})))})),I$=(0,Kr.Dd)(t$),C$=DX((function(e){return e.struct({name:e.string,state:I$(e)})})),E$=DX((function(e){return e.struct({name:e.string,tags:e.readonly(e.array(C$(e)))})})),A$=DX((function(e){return e.struct({name:e.string,summary:e.string,selected:e.boolean,sections:e.readonly(e.array(E$(e)))})})),x$=DX((function(e){return e.readonly(e.array(A$(e)))})),T$=DX((function(e){return e.intersect(e.partial({voiceProfileSettings:TX(e)}))(e.intersect(e.partial({complianceAction:S$(e)}))(e.intersect(e.partial({intent:e.sensitiveString}))(e.intersect(e.partial({documentOverview:O$(e)}))(e.intersect(e.partial({specialView:mX(e)}))(e.intersect(e.partial({textScope:vX(e)}))(e.intersect(e.partial({contextNotification:oX(e)}))(e.intersect(e.partial({metadata:rX(e)}))(e.struct({id:e.string,voice:EX(e),availableActions:e.readonly(e.array(S$(e))),parentAction:k$(e),stateBlob:e.string,promptAction:S$(e),quickRewriteAction:S$(e)})))))))))})),O$=DX((function(e){return e.struct({title:e.string,summary:e.string})})),P$=(0,Kr.Dd)(n$),R$=DX((function(e){return e.struct({kind:P$(e),title:e.string,text:e.string})})),D$=DX((function(e){return(0,Kr.wf)(h$(e),e.struct({plain:e.sensitiveString,interrupted:e.boolean,renderDiff:e.boolean,delta:e.sensitiveDelta}))(e)})),N$=(0,Kr.Dd)(r$),U$=DX((function(e){var t;return e.sum("action")(((t={})["cheetah:getContext"]=M$(e),t["cheetah:invalidateContext"]=j$(e),t["cheetah:action"]=F$(e),t["cheetah:setVoice"]=L$(e),t["cheetah:setVoiceProfile"]=G$(e),t["cheetah:interrupt"]=B$(e),t["cheetah:getUserState"]=z$(e),t["cheetah:searchReferences"]=V$(e),t["cheetah:getHistory"]=q$(e),t["cheetah:error"]=H$(e),t["cheetah:setContext"]=W$(e),t["cheetah:searchReferencesResult"]=$$(e),t["cheetah:chunk"]=X$(e),t["cheetah:result"]=Y$(e),t["cheetah:setUserState"]=Z$(e),t["cheetah:setHistory"]=nX(e),t))})),M$=DX((function(e){return(0,Kr.wf)(a$(e),c$(e),e.intersect(e.partial({outerContext:aX(e)}))(e.intersect(e.partial({selectedRange:vX(e)}))(e.intersect(e.partial({stateBlob:e.string}))(e.intersect(e.partial({previousText:cX(e)}))(e.intersect(e.partial({includeDisabledActions:e.boolean}))(e.intersect(e.partial({metadata:rX(e)}))(e.struct({action:e.literal("cheetah:getContext"),rev:e.number,generationMode:N$(e)}))))))))(e)})),j$=DX((function(e){return(0,Kr.wf)(c$(e),l$(e),e.struct({action:e.literal("cheetah:invalidateContext")}))(e)})),F$=DX((function(e){return(0,Kr.wf)(a$(e),c$(e),e.intersect(e.partial({useReferences:e.readonly(e.array(SX(e)))}))(e.intersect(e.partial({omitReferenceIds:e.readonly(e.array(e.string))}))(e.intersect(e.partial({previousText:cX(e)}))(e.intersect(e.partial({metadata:rX(e)}))(e.struct({action:e.literal("cheetah:action"),rev:e.number,contextId:e.string,triggerContextId:e.string,actionId:e.string,stateBlob:e.string,args:e.readonly(e.array(g$(e)))}))))))(e)})),L$=DX((function(e){return(0,Kr.wf)(a$(e),c$(e),e.struct({action:e.literal("cheetah:setVoice"),voice:EX(e)}))(e)})),G$=DX((function(e){return(0,Kr.wf)(a$(e),c$(e),e.intersect(e.partial({role:e.string}))(e.intersect(e.partial({isEnabledByDefault:e.boolean}))(e.intersect(e.partial({profiles:x$(e)}))(e.struct({action:e.literal("cheetah:setVoiceProfile")})))))(e)})),B$=DX((function(e){return(0,Kr.wf)(a$(e),c$(e),e.struct({action:e.literal("cheetah:interrupt"),promptId:e.number}))(e)})),z$=DX((function(e){return(0,Kr.wf)(a$(e),c$(e),e.struct({action:e.literal("cheetah:getUserState")}))(e)})),V$=DX((function(e){return(0,Kr.wf)(a$(e),c$(e),e.intersect(e.partial({url:e.string}))(e.struct({action:e.literal("cheetah:searchReferences")})))(e)})),q$=DX((function(e){return(0,Kr.wf)(a$(e),c$(e),e.struct({action:e.literal("cheetah:getHistory")}))(e)})),H$=DX((function(e){return(0,Kr.wf)(c$(e),l$(e),e.struct({action:e.literal("cheetah:error"),promptId:e.number,error:R$(e)}))(e)})),W$=DX((function(e){return(0,Kr.wf)(c$(e),l$(e),e.intersect(e.partial({progressMessage:e.string}))(e.struct({action:e.literal("cheetah:setContext"),promptId:e.number,context:T$(e),usage:kX(e)})))(e)})),$$=DX((function(e){return(0,Kr.wf)(c$(e),l$(e),e.struct({action:e.literal("cheetah:searchReferencesResult"),promptId:e.number,references:e.readonly(e.array(hX(e)))}))(e)})),X$=DX((function(e){return(0,Kr.wf)(c$(e),l$(e),e.intersect(e.partial({metadata:rX(e)}))(e.struct({action:e.literal("cheetah:chunk"),promptId:e.number,token:e.sensitiveString})))(e)})),K$=DX((function(e){return e.struct({title:e.string,description:e.readonly(e.array(e.string))})})),Y$=DX((function(e){return(0,Kr.wf)(c$(e),l$(e),e.intersect(e.partial({metadata:rX(e)}))(e.intersect(e.partial({context:T$(e)}))(e.intersect(e.partial({error:R$(e)}))(e.intersect(e.partial({text:D$(e)}))(e.intersect(e.partial({withVoiceText:D$(e)}))(e.intersect(e.partial({showVoiceTextByDefault:e.boolean}))(e.intersect(e.partial({references:e.readonly(e.array(hX(e)))}))(e.intersect(e.partial({changesSummary:K$(e)}))(e.struct({action:e.literal("cheetah:result"),promptId:e.number,usage:kX(e)}))))))))))(e)})),Z$=DX((function(e){return(0,Kr.wf)(c$(e),l$(e),e.struct({action:e.literal("cheetah:setUserState"),state:CX(e)}))(e)})),J$=DX((function(e){var t;return e.sum("kind")(((t={}).userPrompt=Q$(e),t.action=eX(e),t))})),Q$=DX((function(e){return e.struct({kind:e.literal("userPrompt"),text:e.string})})),eX=DX((function(e){return e.struct({kind:e.literal("action"),iconUrl:e.string,label:e.string})})),tX=DX((function(e){return e.intersect(e.partial({showVoiceTextByDefault:e.boolean}))(e.struct({id:e.string,text:_X(e),withVoiceText:_X(e),title:J$(e),references:e.readonly(e.array(hX(e)))}))})),nX=DX((function(e){return(0,Kr.wf)(c$(e),l$(e),e.struct({action:e.literal("cheetah:setHistory"),cards:e.readonly(e.array(tX(e)))}))(e)})),rX=DX((function(e){return e.any})),iX=(0,Kr.Dd)(i$),oX=DX((function(e){return e.intersect(e.partial({title:e.string}))(e.struct({kind:iX(e),text:e.string}))})),sX=DX((function(e){return e.intersect(e.partial({title:e.sensitiveString}))(e.intersect(e.partial({people:e.readonly(e.record(e.readonly(e.array(e.sensitiveString))))}))(e.struct({text:e.sensitiveString})))})),aX=DX((function(e){return e.intersect(e.partial({pageIdHash:e.string}))(e.intersect(e.partial({title:e.sensitiveString}))(e.intersect(e.partial({people:e.readonly(e.record(e.readonly(e.array(e.sensitiveString))))}))(e.intersect(e.partial({items:e.readonly(e.array(sX(e)))}))(e.struct({})))))})),cX=DX((function(e){var t;return e.sum("kind")(((t={}).regular=lX(e),t.history=uX(e),t.writerExpert=dX(e),t))})),lX=DX((function(e){return e.struct({kind:e.literal("regular"),text:e.string})})),uX=DX((function(e){return e.struct({kind:e.literal("history"),text:e.string})})),dX=DX((function(e){return e.struct({kind:e.literal("writerExpert"),text:e.string,suggestionId:e.string,pname:e.string})})),hX=DX((function(e){return e.intersect(e.partial({url:e.string}))(e.struct({id:e.string,privacyLevel:pX(e),title:e.string,iconUrl:e.string}))})),pX=DX((function(e){var t;return e.sum("kind")(((t={}).public=gX(e),t.restricted=fX(e),t))})),gX=DX((function(e){return e.struct({kind:e.literal("public")})})),fX=DX((function(e){return e.struct({kind:e.literal("restricted")})})),mX=DX((function(e){var t;return e.sum("kind")(((t={}).aiUsageAlert=bX(e),t))})),bX=DX((function(e){return e.struct({kind:e.literal("aiUsageAlert")})})),yX=DX((function(e){return e.struct({button:wX(e),tones:e.readonly(e.array(wX(e))),maxTones:e.number})})),_X=DX((function(e){return(0,Kr.wf)(h$(e),e.struct({}))(e)})),vX=DX((function(e){return e.struct({start:e.number,end:e.number})})),wX=DX((function(e){return e.struct({iconUrl:e.string,label:e.string,description:e.string})})),SX=DX((function(e){return e.struct({url:e.string,referenceId:e.string})})),kX=DX((function(e){return e.struct({promptsRemaining:e.number,promptsAllocated:e.number,refillDate:e.string})})),IX=DX((function(e){return e.struct({inlineQuickReplyEnabled:e.boolean,inlineRewriteEnabled:e.boolean})})),CX=DX((function(e){return e.intersect(e.partial({historyItems:e.number}))(e.struct({settings:IX(e),usage:kX(e)}))})),EX=DX((function(e){return e.intersect(e.partial({styles:e.readonly(e.array(yX(e)))}))(e.intersect(e.partial({selectedRole:e.string}))(e.intersect(e.partial({roles:e.readonly(e.array(e.string))}))(e.struct({selectedStyle:e.string,selectedTones:e.readonly(e.array(e.string)),needSetup:e.boolean}))))})),AX=DX((function(e){return e.struct({state:e.boolean,label:e.string})})),xX=(0,Kr.Dd)(o$),TX=DX((function(e){return e.intersect(e.partial({status:xX(e)}))(e.struct({userName:e.string,myVoiceIsEnabledByDefault:AX(e),title:e.string,subTitle:e.string,profiles:x$(e)}))})),OX=DX((function(e){var t;return e.sum("action")(((t={})["cheetah:getContext"]=M$(e),t["cheetah:action"]=F$(e),t["cheetah:setVoice"]=L$(e),t["cheetah:setVoiceProfile"]=G$(e),t["cheetah:interrupt"]=B$(e),t["cheetah:getUserState"]=z$(e),t["cheetah:searchReferences"]=V$(e),t["cheetah:getHistory"]=q$(e),t))})),PX=DX((function(e){var t;return e.sum("action")(((t={})["cheetah:getContext"]=M$(e),t["cheetah:invalidateContext"]=j$(e),t["cheetah:action"]=F$(e),t["cheetah:setVoice"]=L$(e),t["cheetah:setVoiceProfile"]=G$(e),t["cheetah:interrupt"]=B$(e),t["cheetah:getUserState"]=z$(e),t["cheetah:searchReferences"]=V$(e),t["cheetah:getHistory"]=q$(e),t["cheetah:error"]=H$(e),t["cheetah:setContext"]=W$(e),t["cheetah:searchReferencesResult"]=$$(e),t["cheetah:chunk"]=X$(e),t["cheetah:result"]=Y$(e),t["cheetah:setUserState"]=Z$(e),t["cheetah:setHistory"]=nX(e),t))})),RX=DX((function(e){var t;return e.sum("action")(((t={})["cheetah:invalidateContext"]=j$(e),t["cheetah:error"]=H$(e),t["cheetah:setContext"]=W$(e),t["cheetah:searchReferencesResult"]=$$(e),t["cheetah:chunk"]=X$(e),t["cheetah:result"]=Y$(e),t["cheetah:setUserState"]=Z$(e),t["cheetah:setHistory"]=nX(e),t))}));function DX(e){return xx.H(e)}var NX=(0,Ir.MZ)(Yr.n);function UX(e){return function(t){return(0,s$.pi)((0,s$.pi)({},e),t)}}const MX=i;var jX,FX;!function(e){e.Codec=Ur.OT(Ur.jV([Ur.OT(Ur.dt({action:Ur.OT(Ur.Z_)})),Ur.G0([Ur.r$({}),Ur.IM(Ur.Z_,Ur._4)])])),e.is=function(t){return e.Codec.is(t)}}(jX||(jX={})),function(e){let t,n,r,i,o,s,a;!function(e){const t=Ur.OT(Ur.i0("error")),n=Ur.OT(Ur.dt({action:t}));e.is=function(e){return n.is(e)},e.isAction=function(e){return t.is(e)}}(t=e.Error||(e.Error={})),function(e){const t=Ur.OT(Ur.i0("finished")),n=Ur.OT(Ur.G0([Ur.OT(Ur.i0("all_checks_failed")),Ur.OT(Ur.i0("all_checks_succeeded")),Ur.OT(Ur.i0("nothing_to_check")),Ur.OT(Ur.i0("some_checks_failed")),Ur.OT(Ur.i0("some_checks_in_progress")),Ur.OT(Ur.i0("unknown"))])),r=Ur.OT(Ur.G0([Ur.OT(Ur.i0("TOO_SMALL")),Ur.OT(Ur.i0("SENSITIVE")),Ur.OT(Ur.i0("ERROR")),Ur.OT(Ur.i0("OK"))])),i=Ur.r$({Clarity:Ur.pk,Correctness:Ur.pk,Engagement:Ur.pk,"Style guide":Ur.pk,Tone:Ur.pk,GeneralScore:Ur.pk}),o=Ur.OT(Ur.jV([Ur.OT(Ur.dt({action:t,checksStatus:n,scoresStatus:r,generalScore:Ur.pk})),Ur.OT(Ur.r$({outcomeScores:i}))]));e.is=function(e){return o.is(e)},e.isAction=function(e){return t.is(e)}}(n=e.Finished||(e.Finished={})),function(e){const t=Ur.OT(Ur.i0("async_check_finished")),n=Ur.OT(Ur.dt({action:t}));e.is=function(e){return n.is(e)},e.isAction=function(e){return t.is(e)},e.isPlagiarism=function(e){return"plagiarism"===e.check},e.isAiDetector=function(e){return"ai_detector"===e.check}}(r=e.AsyncCheckFinished||(e.AsyncCheckFinished={})),function(e){const t=Ur.OT(Ur.i0("emotions")),n=Ur.OT(Ur.dt({action:Ur.OT(Ur.i0("emotions"))}));e.is=function(e){return n.is(e)},e.isAction=function(e){return t.is(e)}}(i=e.TonesResult||(e.TonesResult={})),function(e){const t=Ur.OT(Ur.i0("start")),n=Ur.OT(Ur.dt({action:t}));e.is=function(e){return n.is(e)},e.isAction=function(e){return t.is(e)}}(o=e.Start||(e.Start={})),function(e){const t=Ur.OT(Ur.i0("show_survey")),n=Ur.OT(Ur.dt({action:t}));e.is=function(e){return n.is(e)},e.isAction=function(e){return t.is(e)}}(s=e.ShowSurvey||(e.ShowSurvey={})),function(e){let t,n;!function(e){const t=Ur.OT(Ur.i0("cheetah"));e.Codec=Ur.OT(Ur.dt({action:t,id:Ur.OT(Ur.pk)})),e.is=function(t){return e.Codec.is(t)},e.isAction=function(e){return t.is(e)}}(t=e.CheetahAck||(e.CheetahAck={})),function(e){e.is=Yr.n(MX.extend(Ax.Schemable)({any:Ax.id(),sensitiveString:Ax.string,sensitiveDelta:Ax.id()}))(MX.ServerMessageImplementations).is}(n=e.CheetahProtocolServerMessage||(e.CheetahProtocolServerMessage={})),e.is=(0,ao.Kg)(t.is,n.is)}(a=e.CheetahInboundCAPIMessage||(e.CheetahInboundCAPIMessage={})),e.is=(0,ao.Kg)(t.is,s.is,a.is,i.is,n.is,r.is,o.is)}(FX||(FX={}));(0,ao.Kg)(FX.Finished.is,FX.AsyncCheckFinished.is,FX.TonesResult.is,FX.Start.is),(0,ao.Kg)(FX.Finished.isAction,FX.AsyncCheckFinished.isAction,FX.TonesResult.isAction,FX.Start.isAction);const LX=FX.CheetahInboundCAPIMessage.is;var GX=Object.defineProperty,BX=Object.defineProperties,zX=Object.getOwnPropertyDescriptors,VX=Object.getOwnPropertySymbols,qX=Object.prototype.hasOwnProperty,HX=Object.prototype.propertyIsEnumerable,WX=(e,t,n)=>t in e?GX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$X=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(e){i(e)}},s=e=>{try{a(n.throw(e))}catch(e){i(e)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}));class XX{constructor(e,t,n,r){var i=e,{handler:o,reconnectHandler:s=Ej.getDefaultReconnect(Ej.ClientType.capi),maxReconnectDelay:a,baseReconnectDelay:c}=i,l=((e,t)=>{var n={};for(var r in e)qX.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&VX)for(var r of VX(e))t.indexOf(r)<0&&HX.call(e,r)&&(n[r]=e[r]);return n})(i,["handler","reconnectHandler","maxReconnectDelay","baseReconnectDelay"]);this._connect=t,this._ws=n,this._valueRequestTimeoutOptions=r,this._log=ou.C8.Logging.getLogger("coreclients.capi.connection"),this._isIdle=!1,this._isStarted=!1,this._currentSessionId=cl.cS(),this._maxWsMessageSize=cl.cS(),this._getSessionId=()=>this._currentSessionId;const u=((e,t)=>BX(e,zX(t)))(((e,t)=>{for(var n in t||(t={}))qX.call(t,n)&&WX(e,n,t[n]);if(VX)for(var n of VX(t))HX.call(t,n)&&WX(e,n,t[n]);return e})({},o||{}),{onError:e=>{var t,n;null==(t=this._onConnectionFailed)||t.call(this,new Error(`Server Error during session start: code(${e.error}) severity(${e.severity})`)),null==(n=null==o?void 0:o.onError)||n.call(o,e)},onWaitForOT:e=>{var t;(0,ll.kG)(void 0!==this._onConnectionSuccess&&void 0!==this._onConnectionFailed,"expected initial connect promise to be initialized at this stage"),this._log.trace("sending initial reset Delta to CAPI"),this._capi.pushChanges(this._contentSource())().then(Tr.g_((e=>{void 0!==this._onConnectionFailed&&(this._onConnectionFailed(e),this._onConnectionFailed=void 0)}),kr.g_(Ir.Q1,(e=>{void 0!==this._onConnectionSuccess&&(this._onConnectionSuccess(e),this._onConnectionSuccess=void 0)})))),null==(t=null==o?void 0:o.onWaitForOT)||t.call(o,e)},onSessionStarted:e=>{var t;e.isNewSession||void 0===this._onConnectionSuccess||(this._onConnectionSuccess(),this._onConnectionSuccess=void 0),this._currentSessionId=kr.G(e.sessionUuid),this._maxWsMessageSize=kr.G(e.maxWsMessageSize),null==(t=null==o?void 0:o.onSessionStarted)||t.call(o,e)}});this._handler=Object.assign(new HF,u),this._ws.onMessage(((e,t)=>{this._capi.isStable(t)&&d.reset()})).onConnecting((()=>{this._isIdle=!1})).onConnect((()=>this._handler.onConnect({kind:"connect"}))).onDisconnect((e=>{if(this._currentSessionId=kr.YP,this._capi.isClosed())return;const t={canGoIdle:this._capi.canGoIdle(),isStable:this._capi.isStable()};this._log.debug("calling reconnect handler:",t),(0,Ir.zG)(s(e,d,t),(t=>(this._handler.onDisconnect({kind:"disconnect",reason:e,reconnectCounter:d.retryStatus.iterNumber,reconnectResult:t}),t)),Tr.g_((e=>{this._log.warn("error reconnecting, closing CAPI:",e.message),this._capi.close("error reconnecting:"+e.message)}),(e=>{"idle"===e.kind&&(this._isIdle=!0)})))}));const d=new Ej.ReconnectSchedulerImpl((()=>this.connect(this._contentSource).then((([e,t])=>e))),[Ej.defaultRetryPolicy(c,a)]);this._capi=new ML(l,this._handler,this._ws,{getSessionId:this._getSessionId,getMaxWsMessageSize:()=>this._maxWsMessageSize},UL.withDefault(this._valueRequestTimeoutOptions))}connect(e,t=!0){return $X(this,null,(function*(){(0,ll.kG)(!this._capi.isClosed(),"cannot connect when CAPI is closed"),t||this._capi.resetReconnectInfo(),this._isIdle=!1,this._isStarted=!0,this._contentSource=e,this._log.trace("connect: initializing new ws connection");const n=yield this._connect(this._ws);return this._conn=n,new Promise(((e,t)=>{this._onConnectionFailed=t,this._onConnectionSuccess=t=>e(t?[n,t]:[n]),setTimeout((()=>t("failed to reconnect or connect to new CAPI session")),5e3)}))}))}close(){return $X(this,arguments,(function*(e=Ej.WsCodes.NORMAL_CLOSURE,t){const n=Boolean(t)?t:"CAPI WS Close called";this._log.trace(`close: closing CAPI because: ${n}`),yield this._capi.close(n),this._conn&&(this._log.debug(`close: closing connection because: ${n}`),yield this._conn.close({code:e,reason:n}))}))}get isIdle(){return this._isIdle}get isDisconnected(){return this._ws.isDisconnected()}get wasStarted(){return this._isStarted}get client(){return this._capi}get maxWsMessageSize(){return this._maxWsMessageSize}}class KX{constructor(e,t,n,r){var i,o;this._events=e,this._capi=t,this._ded=n,this._capiConnection=r,this._log=ou.C8.Logging.getLogger("CapiSyncManager"),this._subs=[],this._isReady=!1,this._connectFromIdleSource=()=>{this._ded.flushChanges();const e=this._ded.getContents();return this._log.debug("sending ded current delta",vu.s.anonymizeTextAndStringAttrs(e.delta)),e},this._connectFromResetSource=()=>{const e=this._initialDelta?this._initialDelta:this._ded.getContents();return this._initialDelta=void 0,e},this.setSessionOption=e=>(0,Ir.zG)(Nr.QM(this._checkConnected.bind(this)),Nr.tS((()=>this._capi.setSessionOption(e)))),this.sendFeedback=e=>(0,Ir.zG)(this._capi.sendFeedback(e),Nr.g_((e=>(0,Ir.zG)(Nr.QM(this._checkConnected.bind(this)),Nr.g_(ll.vE,(()=>Nr.t$(e))))),(()=>Nr.F2(void 0)))),this.requestDocStats=(0,Ir.zG)(Nr.QM(this._checkConnected.bind(this)),Nr.tS((()=>this._capi.requestDocStats))),this.requestSynonyms=(e,t)=>(0,Ir.zG)(Nr.QM(this._checkConnected.bind(this)),Nr.tS((()=>this._capi.requestSynonyms(e,t)))),this.requestSnippets=e=>(0,Ir.zG)(Nr.QM(this._checkConnected.bind(this)),Nr.tS((()=>this._capi.requestSnippets(e)))),this.requestWritingExpert=()=>(0,Ir.zG)(Nr.QM(this._checkConnected.bind(this)),Nr.tS((()=>this._capi.requestWritingExpert()))),this.sendTouchTypistCommand=e=>(0,Ir.zG)(Nr.QM(this._checkConnected.bind(this)),Nr.tS((()=>this._capi.sendTouchTypistCommand(e)))),this.shortenItSubmit=e=>(0,Ir.zG)(Nr.QM(this._checkConnected.bind(this)),Nr.tS((()=>this._capi.shortenItSubmit(e)))),this.enablePlagiarismSearch=(0,Ir.zG)(Nr.QM(this._checkConnected.bind(this)),Nr.tS((()=>this._capi.enablePlagiarismSearch))),this.disablePlagiarismSearch=(0,Ir.zG)(Nr.QM(this._checkConnected.bind(this)),Nr.tS((()=>this._capi.disablePlagiarismSearch))),this.enablePlagiarismAndAiDetectorSearch=(0,Ir.zG)(Nr.QM(this._checkConnected.bind(this)),Nr.tS((()=>this._capi.enablePlagiarismAndAiDetectorSearch))),this.disablePlagiarismAndAiDetectorSearch=(0,Ir.zG)(Nr.QM(this._checkConnected.bind(this)),Nr.tS((()=>this._capi.disablePlagiarismAndAiDetectorSearch))),this.enableWritingExpert=(0,Ir.zG)(Nr.QM(this._checkConnected.bind(this)),Nr.tS((()=>this._capi.enableWritingExpert))),this.disableWritingExpert=(0,Ir.zG)(Nr.QM(this._checkConnected.bind(this)),Nr.tS((()=>this._capi.disableWritingExpert))),this.disableAudienceAdapt=(0,Ir.zG)(Nr.QM(this._checkConnected.bind(this)),Nr.tS((()=>this._capi.disableAudienceAdapt))),this.enableAudienceAdapt=e=>(0,Ir.zG)(Nr.QM(this._checkConnected.bind(this)),Nr.tS((()=>this._capi.enableAudienceAdapt(e)))),this.enableAiStudio=e=>(0,Ir.zG)(Nr.QM(this._checkConnected.bind(this)),Nr.tS((()=>this._capi.enableAiStudio(e)))),this.disableAiStudio=(0,Ir.zG)(Nr.QM(this._checkConnected.bind(this)),Nr.tS((()=>this._capi.disableAiStudio))),this.realtimeProofitSubmit=e=>(0,Ir.zG)(Nr.QM(this._checkConnected.bind(this)),Nr.tS((()=>this._capi.realtimeProofitSubmit(e)))),this.realtimeProofitCancel=(0,Ir.zG)(Nr.QM(this._checkConnected.bind(this)),Nr.tS((()=>this._capi.realtimeProofitCancel))),this.submitRecipients=e=>(0,Ir.zG)(Nr.QM(this._checkConnected.bind(this)),Nr.tS((()=>this._capi.submitRecipients(e)))),this.submitScoreSurveyResult=(e,t)=>(0,Ir.zG)(Nr.QM(this._checkConnected.bind(this)),Nr.tS((()=>this._capi.submitScoreSurveyResult(e,t)))),this.submitSurvey=e=>(0,Ir.zG)(Nr.QM(this._checkConnected.bind(this)),Nr.tS((()=>this._capi.submitSurvey(e)))),this.sendUserAction=(e,t)=>(0,Ir.zG)(Nr.QM(this._checkConnected.bind(this)),Nr.tS((()=>this._capi.sendUserAction(e,t)))),this.sendDebugReport=(e,t)=>(0,Ir.zG)(Nr.QM(this._checkConnected.bind(this)),Nr.tS((()=>this._capi.sendDebugReport(e,t)))),this.ping=(0,Ir.zG)(Nr.QM(this._checkConnected.bind(this)),Nr.tS((()=>this._capi.ping))),this.getText=()=>this._capi.getText(),this.close=e=>this._capi.close(e),this.isClosed=()=>this._capi.isClosed(),this.resetReconnectInfo=()=>this._capi.resetReconnectInfo(),this.updateContextInfo=e=>(0,Ir.zG)(Nr.QM(this._checkConnected.bind(this)),Nr.tS((()=>this._capi.updateContextInfo(e)))),this.setContext=e=>(0,Ir.zG)(Nr.QM(this._checkConnected.bind(this)),Nr.tS((()=>this._capi.setContext(e)))),this.published=()=>(0,Ir.zG)(Nr.QM(this._checkConnected.bind(this)),Nr.tS((()=>this._capi.published()))),this.enqueueExternalCommand=e=>(0,Ir.zG)(Nr.QM(this._checkConnected.bind(this)),Nr.tS((()=>this._capi.enqueueExternalCommand(e)))),this._subs.push(this._events.pipe(Ki.h(XF.hX.is("ready")),(i=this._events.pipe(Ki.h(XF.hX.is("disconnect")),Pr.q(1),cj.h(!1),lj.O(!0)),(0,_H.m)(o)?(0,Lr.w)((function(){return i}),o):(0,Lr.w)((function(){return i}))),lj.O(!1)).subscribe((e=>{this._isReady=e})))}pushChanges(e){return()=>$M.isReset(e)&&!this._capiConnection.wasStarted?(this._log.debug("Got new Reset, triggering connection"),this._initialDelta=e,this._capiConnection.connect(this._connectFromResetSource,!1).then((([e,t])=>Tr.F2(void 0!==t?kr.G(t):kr.YP))).catch((e=>(this._log.warn("failed to connect to CAPI",e),Tr.t$(e))))):this._capiConnection.wasStarted?this._isReady?this._capi.pushChanges(e)():(this._log.debug("Skipped sending change to CAPI as it is not ready yet"),this._initialDelta&&$M.isDelta(e)&&(this._log.debug("Got change while establishing new CAPI connection, appending to initial Delta"),(0,Ir.zG)(this._initialDelta.compose(e),Tr.g_((()=>{this._log.error("Got invalid change while establishing new CAPI connection, skiping")}),(e=>{this._initialDelta=e})))),this._capiConnection.isIdle?(this._log.debug("received new change while CAPI is idle, connecting"),this._capiConnection.connect(this._connectFromIdleSource,!1).catch((e=>this._log.warn("failed to connect to CAPI",e))).then((()=>Tr.F2(kr.YP)))):(this._log.debug("capi is not idle, skip capi reconnect"),Promise.resolve(Tr.F2(kr.YP)))):(this._log.debug("Skipped sending change to CAPI as it is not started yet, triggering new connection"),this._capiConnection.connect(this._connectFromIdleSource,!1).catch((e=>this._log.warn("failed to connect to CAPI",e))).then((()=>Tr.F2(kr.YP))))}registerExternalMessageHandler(e){this._capi.registerExternalMessageHandler(e)}unregisterExternalMessageHandler(e){this._capi.unregisterExternalMessageHandler(e)}get checkingState(){return this._capi.checkingState}get asyncChecksState(){return this._capi.asyncChecksState}_checkConnected(){return this._capiConnection.isIdle?(this._log.debug("received new command while CAPI connection is idle, connecting"),this._capiConnection.connect(this._connectFromIdleSource,!1).catch((e=>this._log.warn("failed to connect to CAPI",e)))):(this._log.trace("already connected or cannot connect, skipping"),Promise.resolve())}dispose(){this._subs.forEach((e=>e.unsubscribe()))}}var YX=__webpack_require__(2187);const ZX=1e4,JX=200;class QX{constructor(e,t){this._events=e,this._capi=t,this.retryCommandWhen=(0,ao.Kg)(LF.isDroppedError,FF.isTimeoutError),this.pushChanges=e=>this._capi.pushChanges(e),this.setSessionOption=e=>this._capi.setSessionOption(e),this.resetReconnectInfo=()=>this._capi.resetReconnectInfo(),this.sendFeedback=e=>{switch(e.kind){case Hj.Mw.MUTE:case Hj.Mw.UNMUTE:return(0,Ir.zG)(iS(this._capi.sendFeedback(e),(e=>this._untilWaitingForOT(e)),ZX),IS([bS(2),yS(JX)],this.retryCommandWhen));case Hj.KI.RECHECK_SHOWN:return(0,Ir.zG)(this._capi.sendFeedback(e),Nr.vx((()=>Nr.F2((0,Ir.Q1)()))));default:return this._capi.sendFeedback(e)}},this.requestSynonyms=(e,t)=>(0,Ir.zG)(iS(this._capi.requestSynonyms(e,t),(e=>this._untilFinished(e)),ZX),IS([bS(2),yS(JX)],this.retryCommandWhen)),this.requestSnippets=e=>(0,Ir.zG)(iS(this._capi.requestSnippets(e),(e=>this._untilFinished(e)),ZX),IS([bS(2),yS(JX)],this.retryCommandWhen)),this.requestWritingExpert=()=>(0,Ir.zG)(iS(this._capi.requestWritingExpert(),(e=>this._untilFinished(e)),ZX),IS([bS(2),yS(JX)],this.retryCommandWhen)),this.shortenItSubmit=e=>(0,Ir.zG)(iS(this._capi.shortenItSubmit(e),(e=>this._untilFinished(e)),ZX),IS([bS(2),yS(JX)],this.retryCommandWhen)),this.requestDocStats=(0,Ir.zG)(iS(this._capi.requestDocStats,(e=>this._untilFinished(e)),ZX),IS([bS(2),yS(JX)],this.retryCommandWhen)),this.enablePlagiarismSearch=(0,Ir.zG)(iS(this._capi.enablePlagiarismSearch,(e=>this._untilFinished(e)),ZX),IS([bS(2),yS(JX)],this.retryCommandWhen)),this.disablePlagiarismSearch=()=>this._capi.disablePlagiarismSearch(),this.enablePlagiarismAndAiDetectorSearch=(0,Ir.zG)(iS(this._capi.enablePlagiarismAndAiDetectorSearch,(e=>this._untilFinished(e)),ZX),IS([bS(2),yS(JX)],this.retryCommandWhen)),this.disablePlagiarismAndAiDetectorSearch=()=>this._capi.disablePlagiarismAndAiDetectorSearch(),this.enableWritingExpert=(0,Ir.zG)(iS(this._capi.enableWritingExpert,(e=>this._untilFinished(e)),ZX),IS([bS(2),yS(JX)],this.retryCommandWhen)),this.disableWritingExpert=()=>this._capi.disableWritingExpert(),this.enableAudienceAdapt=e=>(0,Ir.zG)(iS(this._capi.enableAudienceAdapt(e),(e=>this._untilFinished(e)),ZX),IS([bS(2),yS(JX)],this.retryCommandWhen)),this.disableAudienceAdapt=()=>this._capi.disableAudienceAdapt(),this.enableAiStudio=e=>(0,Ir.zG)(iS(this._capi.enableAiStudio(e),(e=>this._untilFinished(e)),ZX),IS([bS(2),yS(JX)],this.retryCommandWhen)),this.disableAiStudio=()=>this._capi.disableAiStudio(),this.realtimeProofitSubmit=e=>this._capi.realtimeProofitSubmit(e),this.realtimeProofitCancel=()=>this._capi.realtimeProofitCancel(),this.submitRecipients=e=>(0,Ir.zG)(iS(this._capi.submitRecipients(e),(e=>this._untilFinished(e)),ZX),IS([bS(2),yS(JX)],this.retryCommandWhen)),this.submitScoreSurveyResult=(e,t)=>this._capi.submitScoreSurveyResult(e,t),this.submitSurvey=e=>this._capi.submitSurvey(e),this.sendUserAction=(e,t)=>this._capi.sendUserAction(e,t),this.sendDebugReport=(e,t)=>this._capi.sendDebugReport(e,t),this.ping=()=>this._capi.ping(),this.getText=()=>this._capi.getText(),this.close=e=>this._capi.close(e),this.isClosed=()=>this._capi.isClosed(),this.updateContextInfo=e=>this._capi.updateContextInfo(e),this.setContext=e=>this._capi.setContext(e),this.published=()=>this._capi.published(),this.enqueueExternalCommand=e=>this._capi.enqueueExternalCommand(e),this.registerExternalMessageHandler=e=>this._capi.registerExternalMessageHandler(e),this.unregisterExternalMessageHandler=e=>this._capi.unregisterExternalMessageHandler(e)}sendTouchTypistCommand(e){return this._capi.sendTouchTypistCommand(e)}get checkingState(){return this._capi.checkingState}get asyncChecksState(){return this._capi.asyncChecksState}_untilWaitingForOT(e){return this._untilEvent(e,"wait_for_ot")}_untilFinished(e){return this._untilEvent(e,"finish")}_untilEvent(e,t){return GF.isNotConnectedError(e)?(0,Ir.zG)(this._events,Ki.h((e=>e.kind===t)),Pr.q(1),Gr.U(Ir.Q1),YX.yY,kr.G):kr.YP}}var eK=Object.defineProperty,tK=Object.defineProperties,nK=Object.getOwnPropertyDescriptors,rK=Object.getOwnPropertySymbols,iK=Object.prototype.hasOwnProperty,oK=Object.prototype.propertyIsEnumerable,sK=(e,t,n)=>t in e?eK(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;class aK{constructor(e,t){this._innerCon=e,this._addTimer=t}send(e){return this._innerCon.send(this._addTimer(e))}close(e){return this._innerCon.close(e)}get _ws(){return this._innerCon._ws}get state(){return this._innerCon.state}}const cK=()=>Math.trunc(self.performance.now());function lK(e,t){return new Dj(e,t)}class uK{constructor(e,t,n=10,r=cK,i=Zc.Z,o=lK){this._innerWs=e,this._idGenerator=t,this._bufferSize=n,this._clientClock=r,this._timerIdGenerator=i,this._defaultConnection=o,this._log=ou.C8.Logging.getLogger("coreclients.capi.latencyMeasuringWSHandler"),this._timers=[],this._connection=null,this._innerWs=e.onDisconnect((()=>{this._timers=[]})).onMessage(((e,t)=>{this._processTimerResponse(t)})).withConnection(((e,t)=>new aK(this._defaultConnection(e,t),(e=>this._addTimerToRequest(e))))).onConnect((e=>{this._connection=e}))}onConnecting(e){return this._innerWs.onConnecting(e),this}onConnect(e){return this._innerWs.onConnect(e),this}onDisconnect(e){return this._innerWs.onDisconnect(e),this}onMessage(e){return this._innerWs.onMessage(e),this}connect(e){return this._innerWs.connect(e)}isDisconnected(){return this._innerWs.isDisconnected()}_addTimerToRequest(e){if("string"==typeof e)return e;switch(e.action){case"ping":case"submit_ot":return((e,t)=>tK(e,nK(t)))(((e,t)=>{for(var n in t||(t={}))iK.call(t,n)&&sK(e,n,t[n]);if(rK)for(var n of rK(t))oK.call(t,n)&&sK(e,n,t[n]);return e})({},e),{timer:{client_clock:this._clientClock(),id:this._timerIdGenerator()}});default:return e}}_processTimerResponse(e){switch(e.action){case"pong":case"finished":return void(e.timer&&(this._timers.push({id:e.timer.id,name:e.timer.name,client_clock:this._clientClock()}),this._timers.length>=this._bufferSize&&setTimeout((()=>this._flush()),0)));default:return}}_flush(){this._timers.length>0&&(null===this._connection?this._log.warn("tried flushing when not connected"):(this._connection.send({id:this._idGenerator.newId(),action:"perfstats",timers:this._timers}),this._timers=[]))}}var dK=rY((function(e){return(0,Kr.wf)(pK(e),e.intersect(e.partial({additionalContext:bK(e)}))(e.intersect(e.partial({conversation:vK(e)}))(e.struct({entrypoint:wK(e),scope:JK(e),args:e.readonly(e.record(FK(e)))}))))(e)})),hK=rY((function(e){return(0,Kr.wf)(fK(e),e.intersect(e.partial({backendBlob:yK(e)}))(e.struct({kind:WK(e),actionId:mK(e),extraProperties:e.readonly(e.record(FK(e)))})))(e)})),pK=rY((function(e){return(0,Kr.wf)(gK(e),e.struct({}))(e)})),gK=rY((function(e){return e.struct({id:e.number,correlationId:e.string,metadata:e.readonly(e.record(FK(e)))})})),fK=rY((function(e){return(0,Kr.wf)(gK(e),e.struct({}))(e)})),mK=(rY((function(e){return LK(e)})),rY((function(e){return e.struct({id:e.string})}))),bK=rY((function(e){return e.intersect(e.partial({backendBlob:yK(e)}))(e.intersect(e.partial({activeEditorId:e.string}))(e.intersect(e.partial({activeEditorContent:e.string}))(e.intersect(e.partial({agentInstanceId:e.string}))(e.intersect(e.partial({vBarSupported:e.boolean}))(e.struct({extraProperties:e.readonly(e.record(FK(e)))}))))))})),yK=rY((function(e){return e.intersect(e.partial({id:e.string}))(e.struct({blob:e.string}))})),_K=rY((function(e){return e.intersect(e.partial({showLabelNew:e.boolean}))(e.struct({title:e.string,iconUrl:e.string,actionUrl:e.string}))})),vK=rY((function(e){return e.intersect(e.partial({title:e.string}))(e.struct({id:e.string}))})),wK=rY((function(e){var t;return e.sum("family")(((t={}).ggo=kK(e),t.g2=CK(e),t.other=EK(e),t))})),SK=(0,Kr.Dd)(Hc),kK=rY((function(e){return e.struct({family:e.literal("ggo"),name:SK(e)})})),IK=(0,Kr.Dd)(Wc),CK=rY((function(e){return e.intersect(e.partial({request_tag:e.string}))(e.struct({family:e.literal("g2"),name:IK(e)}))})),EK=rY((function(e){return e.struct({family:e.literal("other"),name:e.string})})),AK=rY((function(e){var t;return e.sum("kind")(((t={}).sensitivity=xK(e),t.badRequest=TK(e),t.serviceLimitExceeded=OK(e),t.unsupportedLanguage=PK(e),t.updateClient=RK(e),t.backendError=DK(e),t.other=NK(e),t))})),xK=rY((function(e){return e.struct({kind:e.literal("sensitivity")})})),TK=rY((function(e){return e.struct({kind:e.literal("badRequest")})})),OK=rY((function(e){return e.struct({kind:e.literal("serviceLimitExceeded")})})),PK=rY((function(e){return e.struct({kind:e.literal("unsupportedLanguage")})})),RK=rY((function(e){return e.struct({kind:e.literal("updateClient")})})),DK=rY((function(e){return e.struct({kind:e.literal("backendError")})})),NK=rY((function(e){return e.struct({kind:e.literal("other"),type:e.string})})),UK=rY((function(e){var t;return e.sum("kind")(((t={}).plain=MK(e),t.gzip=jK(e),t))})),MK=rY((function(e){return e.struct({kind:e.literal("plain")})})),jK=rY((function(e){return e.struct({kind:e.literal("gzip")})})),FK=rY((function(e){return e.intersect(e.partial({encoding:UK(e)}))(e.struct({json:e.string}))})),LK=rY((function(e){var t;return e.sum("action")(((t={})["text_actions:invokeCommand"]=GK(e),t["text_actions:commandResult"]=BK(e),t["text_actions:invokeRewrite"]=zK(e),t["text_actions:rewriteResult"]=VK(e),t["text_actions:error"]=qK(e),t))})),GK=rY((function(e){return(0,Kr.wf)(dK(e),gK(e),e.intersect(e.partial({conversation:vK(e)}))(e.intersect(e.partial({conversationMessageId:e.string}))(e.struct({action:e.literal("text_actions:invokeCommand"),actionId:mK(e)}))))(e)})),BK=rY((function(e){return(0,Kr.wf)(hK(e),gK(e),e.intersect(e.partial({conversationMessageId:e.string}))(e.struct({action:e.literal("text_actions:commandResult")})))(e)})),zK=rY((function(e){return(0,Kr.wf)(dK(e),gK(e),e.struct({action:e.literal("text_actions:invokeRewrite"),kind:$K(e)}))(e)})),VK=rY((function(e){return(0,Kr.wf)(hK(e),gK(e),e.intersect(e.partial({callToAction:_K(e)}))(e.struct({action:e.literal("text_actions:rewriteResult"),rewrite:e.sensitiveString,explanation:e.string})))(e)})),qK=rY((function(e){return(0,Kr.wf)(gK(e),fK(e),e.intersect(e.partial({usageLimits:tY(e)}))(e.struct({action:e.literal("text_actions:error"),errorType:AK(e),title:e.string,details:e.string,extraProperties:e.readonly(e.record(FK(e)))})))(e)})),HK=rY((function(e){return e.struct({start:e.number,end:e.number})})),WK=(0,Kr.Dd)($c),$K=rY((function(e){var t;return e.sum("kind")(((t={}).default=XK(e),t.rephrase=KK(e),t.userPrompt=YK(e),t.other=ZK(e),t))})),XK=rY((function(e){return e.struct({kind:e.literal("default")})})),KK=rY((function(e){return e.struct({kind:e.literal("rephrase")})})),YK=rY((function(e){return e.struct({kind:e.literal("userPrompt"),prompt:e.sensitiveString})})),ZK=rY((function(e){return e.struct({kind:e.literal("other"),actionId:mK(e)})})),JK=rY((function(e){var t;return e.sum("kind")(((t={}).sessionText=QK(e),t.otherText=eY(e),t))})),QK=rY((function(e){return e.intersect(e.partial({range:HK(e)}))(e.struct({kind:e.literal("sessionText"),rev:e.number}))})),eY=rY((function(e){return e.intersect(e.partial({range:HK(e)}))(e.struct({kind:e.literal("otherText"),text:e.sensitiveString}))})),tY=rY((function(e){return e.struct({remaining:e.number,limit:e.number,refillDate:e.string})})),nY=(rY((function(e){var t;return e.sum("action")(((t={})["text_actions:invokeCommand"]=GK(e),t["text_actions:invokeRewrite"]=zK(e),t))})),rY((function(e){var t;return e.sum("action")(((t={})["text_actions:commandResult"]=BK(e),t["text_actions:rewriteResult"]=VK(e),t))})),rY((function(e){var t;return e.sum("action")(((t={})["text_actions:invokeCommand"]=GK(e),t["text_actions:commandResult"]=BK(e),t["text_actions:invokeRewrite"]=zK(e),t["text_actions:rewriteResult"]=VK(e),t["text_actions:error"]=qK(e),t))})));rY((function(e){var t;return e.sum("action")(((t={})["text_actions:error"]=qK(e),t))}));function rY(e){return xx.H(e)}(0,Ir.MZ)(Yr.n);const iY=Ur.OT(Ur.i0("text_actions")),oY=Ur.OT(Ur.dt({action:iY,id:Ur.OT(Ur.pk)}));const sY=Yr.n(function(e){return function(t){return(0,s$.pi)((0,s$.pi)({},e),t)}}(Ax.Schemable)({sensitiveString:Ax.string}))(nY).is,aY=(0,ao.Kg)((function(e){return oY.is(e)}),sY);var cY=(0,Yr.S)((function(e){return(0,Kr.wf)(lY(e),e.struct({}))(e)})),lY=(0,Yr.S)((function(e){return e.intersect(e.partial({debugInfo:dY(e)}))(e.struct({id:e.number}))})),uY=(0,Yr.S)((function(e){return(0,Kr.wf)(lY(e),e.struct({}))(e)})),dY=((0,Yr.S)((function(e){return pY(e)})),(0,Yr.S)((function(e){return e.struct({value:e.string})}))),hY=(0,Yr.S)((function(e){return e.struct({begin:e.number,end:e.number})})),pY=(0,Yr.S)((function(e){var t;return e.sum("action")(((t={})["trusted_rewrite:prime"]=gY(e),t["trusted_rewrite:primed"]=fY(e),t["trusted_rewrite:forget"]=mY(e),t["trusted_rewrite:forgotten"]=bY(e),t))})),gY=(0,Yr.S)((function(e){return(0,Kr.wf)(cY(e),lY(e),e.intersect(e.partial({range:hY(e)}))(e.struct({action:e.literal("trusted_rewrite:prime"),rev:e.number,rewrite:e.string})))(e)})),fY=(0,Yr.S)((function(e){return(0,Kr.wf)(lY(e),uY(e),e.struct({action:e.literal("trusted_rewrite:primed"),trustedRangeId:e.number}))(e)})),mY=(0,Yr.S)((function(e){return(0,Kr.wf)(cY(e),lY(e),e.struct({action:e.literal("trusted_rewrite:forget"),trustedRangeId:e.number}))(e)})),bY=(0,Yr.S)((function(e){return(0,Kr.wf)(lY(e),uY(e),e.struct({action:e.literal("trusted_rewrite:forgotten")}))(e)})),yY=((0,Yr.S)((function(e){var t;return e.sum("action")(((t={})["trusted_rewrite:prime"]=gY(e),t["trusted_rewrite:forget"]=mY(e),t))})),(0,Yr.S)((function(e){var t;return e.sum("action")(((t={})["trusted_rewrite:prime"]=gY(e),t["trusted_rewrite:primed"]=fY(e),t["trusted_rewrite:forget"]=mY(e),t["trusted_rewrite:forgotten"]=bY(e),t))}))),_Y=((0,Yr.S)((function(e){var t;return e.sum("action")(((t={})["trusted_rewrite:primed"]=fY(e),t["trusted_rewrite:forgotten"]=bY(e),t))})),__webpack_require__(22768));const vY=Yr.n(Ax.Schemable)(_Y.T0).is,wY=Yr.n(Ax.Schemable)(yY).is;var SY,kY;!function(e){e.Success="success",e.ValidationFail="validation_fail",e.Error="error"}(SY||(SY={})),function(e){e.Loaded="loaded",e.Cached="cached",e.Prepopulated="prepopulated",e.Empty="empty",e.Uphook="uphook",e.FailedSensitivity="failed_sensitivity",e.FailedUnsupportedLanguage="failed_unsupportedLanguage",e.FailedBadRequest="failed_badRequest",e.FailedServiceLimitExceeded="failed_serviceLimitExceeded",e.FailedUpdateClient="failed_updateClient",e.FailedBackendError="failed_backendError",e.FailedRewriteRequestFailure="failed_rewriteRequestFailure",e.FailedRewriteLoadingTimeout="failed_rewriteLoadingTimeout",e.FailedRewriteExtractionFailure="failed_rewriteExtractionFailure",e.FailedWaitForLatestCheckingRevisionTimeout="failed_waitForLatestCheckingRevisionTimeout",e.FailedOther="failed_other"}(kY||(kY={}));var IY=(0,Yr.S)((function(e){return(0,Kr.wf)(CY(e),e.struct({}))(e)})),CY=(0,Yr.S)((function(e){return e.struct({id:e.number})})),EY=(0,Yr.S)((function(e){return(0,Kr.wf)(CY(e),e.struct({}))(e)})),AY=((0,Yr.S)((function(e){return AY(e)})),(0,Yr.S)((function(e){var t;return e.sum("action")(((t={})["vbar_feedback:vBarFeedbackRequest"]=OY(e),t["vbar_feedback:vBarFeedbackResponse"]=PY(e),t))}))),xY=(0,Yr.S)((function(e){return e.struct({start:e.number,end:e.number})})),TY=(0,Yr.S)((function(e){return e.struct({width:e.number,height:e.number})})),OY=(0,Yr.S)((function(e){return(0,Kr.wf)(IY(e),CY(e),e.intersect(e.partial({pname:e.string}))(e.intersect(e.partial({textActionId:e.string}))(e.intersect(e.partial({userPrompt:e.string}))(e.intersect(e.partial({result:DY(e)}))(e.intersect(e.partial({loadingTime:e.string}))(e.intersect(e.partial({loadingTimeMs:e.number}))(e.intersect(e.partial({rewrite:e.string}))(e.intersect(e.partial({failureReason:e.string}))(e.intersect(e.partial({metadata:e.string}))(e.intersect(e.partial({textFieldElementSize:TY(e)}))(e.struct({action:e.literal("vbar_feedback:vBarFeedbackRequest"),actionType:e.string,vBarId:e.string,vBarType:e.string,range:xY(e)}))))))))))))(e)})),PY=(0,Yr.S)((function(e){return(0,Kr.wf)(CY(e),EY(e),e.struct({action:e.literal("vbar_feedback:vBarFeedbackResponse"),errorMessage:e.string,result:RY(e)}))(e)})),RY=(0,Kr.Dd)(SY),DY=(0,Kr.Dd)(kY),NY=((0,Yr.S)((function(e){var t;return e.sum("action")(((t={})["vbar_feedback:vBarFeedbackRequest"]=OY(e),t))})),(0,Yr.S)((function(e){var t;return e.sum("action")(((t={})["vbar_feedback:vBarFeedbackRequest"]=OY(e),t["vbar_feedback:vBarFeedbackResponse"]=PY(e),t))})));(0,Yr.S)((function(e){var t;return e.sum("action")(((t={})["vbar_feedback:vBarFeedbackResponse"]=PY(e),t))}));const UY=Ur.OT(Ur.i0("vbar_feedback")),MY=Ur.OT(Ur.dt({action:UY,id:Ur.OT(Ur.pk)}));const jY=Yr.n(Ax.Schemable)(NY).is,FY=(0,ao.Kg)((function(e){return MY.is(e)}),jY);var LY=(0,Yr.S)((function(e){return(0,Kr.wf)(GY(e),e.struct({}))(e)})),GY=(0,Yr.S)((function(e){return e.struct({id:e.number})})),BY=(0,Yr.S)((function(e){return(0,Kr.wf)(GY(e),e.struct({}))(e)})),zY=(0,Yr.S)((function(e){return e.struct({freeUnlocks:e.number,uphookConfigs:e.readonly(e.record(WY(e)))})})),VY=((0,Yr.S)((function(e){return VY(e)})),(0,Yr.S)((function(e){var t;return e.sum("action")(((t={})["vbars_lockedui:updateFreeUnlocks"]=qY(e),t["vbars_lockedui:freeLookEvent"]=HY(e),t))}))),qY=(0,Yr.S)((function(e){return(0,Kr.wf)(GY(e),BY(e),zY(e),e.struct({action:e.literal("vbars_lockedui:updateFreeUnlocks")}))(e)})),HY=(0,Yr.S)((function(e){return(0,Kr.wf)(LY(e),GY(e),e.struct({action:e.literal("vbars_lockedui:freeLookEvent")}))(e)})),WY=(0,Yr.S)((function(e){return e.struct({uphookContent:e.readonly(e.record(e.string)),uphookMetaData:e.readonly(e.record(e.string))})})),$Y=((0,Yr.S)((function(e){return(0,Kr.wf)(zY(e),e.struct({}))(e)})),(0,Yr.S)((function(e){var t;return e.sum("action")(((t={})["vbars_lockedui:freeLookEvent"]=HY(e),t))})),(0,Yr.S)((function(e){var t;return e.sum("action")(((t={})["vbars_lockedui:updateFreeUnlocks"]=qY(e),t["vbars_lockedui:freeLookEvent"]=HY(e),t))})));(0,Yr.S)((function(e){var t;return e.sum("action")(((t={})["vbars_lockedui:updateFreeUnlocks"]=qY(e),t))})),(0,Yr.S)((function(e){var t;return e.sum("action")(((t={})["vbars_lockedui:updateFreeUnlocks"]=qY(e),t))}));const XY=Yr.n(Ax.Schemable)($Y).is;var KY,YY=__webpack_require__(99562);function ZY(e,t){return e.reduce(((e,t)=>(vu.s.isInsertString(t)?(e.text=`${e.text.substring(0,e.index)}${t.insert}${e.text.substring(e.index)}`,e.index+=t.insert.length):vu.s.isDelete(t)?e.text=`${e.text.substring(0,e.index)}${e.text.substring(e.index+t.delete)}`:vu.s.isRetain(t)?e.index+=t.retain:function(e){var t;return vu.s.isInsertEmbed(e)&&!0===(null===(t=e.insert)||void 0===t?void 0:t.linebreak)}(t)&&(e.text=`${e.text.substring(0,e.index)}\n${e.text.substring(e.index)}`,e.index+=1),e)),{text:t,index:0}).text}!function(e){e.Inline="inline",e.Popover="popover",e.Short="short",e.Long="long",e.StandalonePlagiarism="standalone-plagiarism"}(KY||(KY={}));const JY={text:!0,button:!0,alternativeChoice:!0,count:!0,icon:!0,block:!0,row:!0,column:!0,slider:!0,alternativeSlider:!0,transition:!0,openSettings:!0,openToneDetector:!0,openFeedback:!0,openLearnMore:!0,notify:!0,closeCard:!0,nextCard:!0,prevCard:!0,removeRoot:!0,applyAlerts:!0,selectAlternative:!0,upgradeToPremium:!0,showHighlights:!0,hideHighlights:!0,strongAlertRef:!0,removeAlerts:!0,openLink:!0,copyToClipboard:!0,scroll:!0,list:!0,image:!0,assistantFeed:!0,assistantCard:!0,gButton:!0,pushAssistantFeed:!0,popAssistantFeed:!0,focusAssistantCard:!0,alertsCount:!0,nativeToneInsightsModal:!0,nativeLearnMoreModal:!0,nativeSettingsModal:!0,nativeFeedbackModal:!0,viewStack:!0,switchView:!0,dropDownMenuButton:!0,proofitButton:!0,nativeProofitModal:!0,nativeKeyTakeawaysAssistantCard:!1,newRevision:!1,nativeExperimentalGBConsistencyUpsellFooter:!1,nativeExperimentalGBToneInsightsUpsellFooter:!1,box:!0,openCreateSnippetModal:!0,clickableText:!0,lensesSwitchPanel:!1,radioButtonsGroup:!1,nativeSkillsModal:!1,nativeGetStartedChecklistModal:!0,"behavior:strongAlertRef":!0,inlineCard:!0,closePopover:!0,interactPopover:!0,popoverStack:!0,"behavior:popoverAnchor":!0,nativeSkillsList:!1,nativeSkillsView:!1,nativeInlineCardContent:!0,collapsedCard:!0,nativeOpenAssistant:!1,highlightAlert:!0,progressBar:!0,"behavior:animation:fadeIn":!1,"behavior:animation:fadeOut":!1,"behavior:animation:textShimmer":!0,"behavior:animation:progressiveBlur":!0,"gButton:default":!1,"gButton:tone":!1,"gButton:proofit":!1,"gButton:get-started":!1,"gButton:plagiarism":!0,"gButton:writingExpert":!0,"gButton:audienceAdapt":!0,"gButton:aiStudio":!0,nativePerformanceScoreButton:!1,longFormCard:!0,horizontalRule:!0,stopApplyingAlerts:!1,tooltip:!0,openGrammarlyGo:!0,enablePlagiarismCheck:!0,disablePlagiarismCheck:!0,"behavior:lifecycle":!0,openPerformanceScore:!1,selectableDropDownMenu:!0,globalPart:!0,globalPartPlaceholder:!0,shortFormCard:!1,nativeOpenUserSatisfactionFeedback:!1,enableWritingExpertCheck:!0,disableWritingExpertCheck:!0,sticker:!0,overlay:!0,enableAudienceAdaptCheck:!0,disableAudienceAdaptCheck:!0,enableAiStudioCheck:!0,disableAiStudioCheck:!0,nativeUndoableTextChanges:!0},QY={...JY,lensesSwitchPanel:!0,count:!0,"behavior:animation:fadeIn":!0,"behavior:animation:fadeOut":!0,"behavior:animation:progressiveBlur":!0},eZ={"":{supportedComponents:(0,Ir.zG)(JY,wT.hX(Ir.yR),wT.KM(Ir.yR)),supportedForms:[KY.Short,KY.Inline],dslParser:wR.dslRootParser,dslSchema:xM}},tZ=((0,Ir.zG)(QY,wT.hX(Ir.yR),wT.KM(Ir.yR)),KY.Long,KY.Inline,wR.dslRootParser,(e,t)=>n=>{if(t){const{kind:r}=t;switch(r){case"scope":return{...n,scope:{...t.scope,rev:e}};case"default":return{...n,rev:e};default:(0,ll.vE)(r)}}return n});var nZ,rZ,iZ;!function(e){let t,n,r,i,o,s,a,c,l,u;!function(e){e.parseOrEmpty=function(e){return kr.fS((()=>jF.R$.unset))(jF.R$.parse(e))}}(t=e.DocumentContextExt||(e.DocumentContextExt={})),function(e){e.serialize=function(e){const{integrationResultTracker:t,...n}=e;return{...n,context:jF.R$.serialize(e.context),clientConfigs:r.serialize(e.clientConfigs)}},e.parse=function(e){return{...e,context:t.parseOrEmpty(e.context),clientConfigs:r.parseOrEmpty(e.clientConfigs),integrationResultTracker:void 0}}}(n=e.DenaliCAPISettings||(e.DenaliCAPISettings={})),function(e){e.serialize=function(e){return e?{...e,sdui:e.sdui?{...e.sdui,config:Object.keys(e.sdui.config).reduce(((t,n)=>{var r;const i=null===(r=null==e?void 0:e.sdui)||void 0===r?void 0:r.config[n];return i&&(t[n]={...i,dslParser:void 0}),t}),{})}:void 0}:void 0},e.parseOrEmpty=function(e){return{...e,sdui:(null==e?void 0:e.sdui)?{...e.sdui,config:Object.keys(e.sdui.config).reduce(((t,n)=>{var r;const i=null===(r=null==e?void 0:e.sdui)||void 0===r?void 0:r.config[n];return i&&(t[n]={...i,dslParser:eZ[""].dslParser}),t}),{})}:void 0}}}(r=e.ClientConfigs||(e.ClientConfigs={})),function(e){let t;!function(e){let t;!function(e){e.Value="context_serialized"}(t=e.Kind||(e.Kind={}))}(t=e.Serialized||(e.Serialized={}))}(i=e.ContextOption||(e.ContextOption={})),function(e){e.serialize=function(e){return e.kind===Hj.rP.Context?{kind:i.Serialized.Kind.Value,context:jF.R$.serialize(e.context)}:e},e.parse=function(e){return e.kind===i.Serialized.Kind.Value?{kind:Hj.rP.Context,context:t.parseOrEmpty(e.context)}:e}}(o=e.SessionOption||(e.SessionOption={})),function(e){e.serialize=e=>{switch(e.kind){case"delta":case"reset":return{...e};default:return e}},e.parse=e=>{switch(e.kind){case"delta":return rZ.createDeltaChange(e.delta,e.prevLen);case"reset":return rZ.createResetChange(e.delta);default:return e}}}(s=e.Change||(e.Change={})),function(e){e.serialize=e=>{const{snippets:t,...n}=e;return{...n,snippets:null==t?void 0:t.map(c.serialize)}},e.parse=e=>{const{snippets:t,...n}=e;return{...n,snippets:null==t?void 0:t.map(c.parse)}}}(a=e.SnippetsResult||(e.SnippetsResult={})),function(e){e.serialize=e=>{const{contentDelta:t,...n}=e;return{...n,contentDelta:l.serialize(t)}},e.parse=e=>{const{contentDelta:t,...n}=e;return{...n,contentDelta:l.parse(t)}}}(c=e.SnippetRule||(e.SnippetRule={})),function(e){e.serialize=e=>({...e}),e.parse=e=>iZ.createDelta(e.ops)}(l=e.Delta||(e.Delta={})),function(e){e.serialize=e=>({...e}),e.parse=e=>rZ.createResetChange(e.delta)}(u=e.Reset||(e.Reset={}))}(nZ||(nZ={})),function(e){e.createDeltaChange=$M.delta,e.createResetChange=$M.unsafeRes}(rZ||(rZ={})),function(e){e.createDelta=e=>new _u.i(e)}(iZ||(iZ={}));var oZ=Object.defineProperty,sZ=Object.defineProperties,aZ=Object.getOwnPropertyDescriptors,cZ=Object.getOwnPropertySymbols,lZ=Object.prototype.hasOwnProperty,uZ=Object.prototype.propertyIsEnumerable,dZ=(e,t,n)=>t in e?oZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;class hZ{constructor(e,t,n,r,i){this._storage=e,this._sendStorageMessage=t,this._canSaveEntryToStorage=n,this.getCAPIWSMessageSizeLimit=r,this._monitoringHandler=i,this._guardStorageServerMessage=Yr.n(Ax.Schemable)(gi.ServerMessageImplementations)}handleMessage(e){return this._guardStorageServerMessage.is(e)?(this._handleStorageMessage(e),!0):!!fi.is(e)}_handleStorageMessage(e){switch(e.action){case"storage:get":return(0,Ir.zG)(this._storage.get(((e,t)=>sZ(e,aZ(t)))(((e,t)=>{for(var n in t||(t={}))lZ.call(t,n)&&dZ(e,n,t[n]);if(cZ)for(var n of cZ(t))uZ.call(t,n)&&dZ(e,n,t[n]);return e})({},e),{maxResponseSize:(0,Ir.zG)(this.getCAPIWSMessageSizeLimit(),kr.UI((e=>e-1e3)),kr.FS)})),Nr.Zl((t=>(0,Ir.zG)(this._sendStorageMessage({id:e.id,action:"storage:entries",data:t.entries}),Nr.Pd((e=>new Hr("Error sending storage:entries",e)),(()=>({data:t})))))),Dr.UI(Tr.g_((t=>this._monitoringHandler.onStorageGetError({request:e,error:t})),(({data:t})=>{this._monitoringHandler.onStorageGetSuccess({request:e,entriesCount:t.entries.length,entriesDropped:t.entriesDropped})}))))().catch((t=>this._monitoringHandler.onStorageGetError({request:e,error:new Hr("Promise rejection",t)})));case"storage:clear":return(0,Ir.zG)(this._storage.clear(e),Dr.UI(Tr.g_((t=>this._monitoringHandler.onStorageClearError({request:e,error:t})),(()=>this._monitoringHandler.onStorageClearSuccess({request:e})))))().catch((t=>this._monitoringHandler.onStorageClearError({request:e,error:new Hr("Promise rejection",t)})));case"storage:save":return this._canSaveEntryToStorage.catch((()=>!1)).then((t=>t?(0,Ir.zG)(this._storage.save(e),Dr.UI(Tr.g_((t=>this._monitoringHandler.onStorageSaveError({request:e,error:t})),(()=>this._monitoringHandler.onStorageSaveSuccess({request:e,bytesCount:yi(e.data)})))))().catch((t=>this._monitoringHandler.onStorageSaveError({request:e,error:new Hr("Promise rejection",t)}))):this._monitoringHandler.onCannotSaveEntry({request:e})));default:return(0,Ir.Rz)(e)}}}function pZ(e,t,n){const r=xa(10);return(0,Ir.zG)(iS(e.enqueueExternalCommand(n),(e=>!0===GF.isNotConnectedError(e)?kr.G(function(e){return(0,Ir.zG)(e,Ki.h(XF.hX.is("session_started")),Pr.q(1),Gr.U(Ir.Q1),YX.yY)}(t)):kr.YP),r),IS([bS(2),yS(200)],(0,ao.Kg)(LF.isDroppedError,FF.isTimeoutError)))}var gZ;!function(e){e.create=function(){return h.iy.create()}}(gZ||(gZ={}));const fZ=(e,t)=>e?e=>!(e.kind in Hj.PZ)||!(e=>"subtype"in e)(e)||((e=>e.subtype===Hj.e3.Inline)(e)||((e,t)=>t&&e.subtype===Hj.e3.Sidebar)(e,t)||!((e,t)=>!t&&e.subtype===Hj.e3.Sidebar)(e,t)):void 0;Ur.dt({action:Ur.Z_});var mZ;!function(e){e.create=function(e,n,r,i,o,s,a,c){var l;const u=new Er.x,d=u.pipe(Ki.h((e=>{var t,i;if((e=>"alert_received"===e.kind&&e.alert.pname===YY.w.STAND_WITH_UKRAINE_ALERT_PNAME)(e)){const e=(null===(t=n())||void 0===t?void 0:t.supportUkraineCard)||{},o=!0!==e.enabled,s=e.maximumAppearances||2,a=(null===(i=r())||void 0===i?void 0:i.supportUkraineCardAppearanceCount)||0;return!o&&a<s}return!0}))),h=function(e){const t=t=>{e.next(t)};return{onSessionStarted:t,onWaitForOT:t,onReady:t,onSessionInbound:t,beforeAlert:t,onAlert:t,onRemove:t,onChange:t,onSynonyms:t,onPlagiarism:t,onTextInfo:t,onEmotions:t,onBeforeAsyncCheckFinish:t,onAsyncCheckFinish:t,onAsyncCheckProgress:t,onError:t,onBeforeFinish:t,onFinish:t,onConnect:t,onDisconnect:t,onQueueMsgDropped:t,onAck:t,onPong:t,onMessageReceived:t,onMessageSent:t,onAutoComplete:t,onAttentionHeatmap:t,onAttentionInfo:t,onProofitAvailability:t,onProofitCancelled:t,onProofitCompleted:t,onProofitProgress:t,onProofitProgressProblem:t,onProofitSubmit:t,onShortenItFinished:t,onSDUI:t,onGbRuleCreated:t,onReconnectInfo:t,onShowSurvey:t,onTouchTypistTriggerResponse:t}}(u),p=i.backendManagedStorageFactory(),g=s.watchCAPIEvents(d,e,a),f=t(e.useDlp,e.dlpConfiguration,a),m=new XX({client:{type:e.clientName,sub:e.clientSubType},extDomain:e.domain,clientSupports:[...(0,Or.Sb)(e.supportedFeatures)],dialect:e.dialect,docid:Rq(e.docId),docIdIsTransient:(b=e.docId,"transientDocId"in b),handler:h,context:e.context,clientVersion:e.clientVersion,startSessionOptions:e.startSessionOptions,shouldSendFeedback:fZ(Boolean(null===(l=e.clientConfigs)||void 0===l?void 0:l.sdui),"google_docs"===e.clientSubType||"google_docs_retail"===e.clientSubType),clientConfigs:{...e.clientConfigs,storage:p?{version:"3.0.0"}:void 0},containerId:null!=c?c:void 0},(t=>t.connect(e.capiUrl)),f);var b;let y=new _u.i;const _={changes:new bi.y,flushChanges:()=>{},getContents:(e,t)=>(0,Tr.fS)((()=>$M.resFromText(ZY(y,""))))($M.res(y))},v=new KX(u.asObservable(),m.client,_,m),w=new QX(u,v),S=u.pipe((0,Gr.U)((()=>w.checkingState)),(0,ea.x)()),k=new Er.x;w.registerExternalMessageHandler((e=>(k.next(e),LX(e)||aY(e)||FY(e)||XY(e)||wY(e)||vY(e)||EW(e)||QW(e)?NF.Result.STOP_HANDLING:NF.Result.CONTINUE_HANDLING))),i.deleteAllBackendStorageIfNeeded();const I=new Gl.w0;return null!==p&&(I.add(p.setupErrors.subscribe((e=>{o.backendManagedStorage.error(`BackendManagedStorage.Setup ${String(e)}`,e),q.create("BackendManagedStorage.Setup").error(String(e),e)}))),function(e,t,n,r,i,o=(()=>F.ERROR),s,a){const c=o()===F.WARN,l=new hZ(n,(n=>(0,Ir.zG)(pZ(t,e,(()=>n)),Nr.UI((()=>{})))),r,i,{onCannotSaveEntry:e=>{c&&(null==a||a.backendManagedStorage.warn("storage:save not allowed",{key:e.request.key})),null==s||s.warn("storage:save not allowed",{key:e.request.key})},onStorageGetError:e=>{const t="storage:get error "+String(e.error);null==a||a.backendManagedStorage.error(t,e.error),null==s||s.error(t,e.error)},onStorageSaveError:e=>{const t="storage:save error "+String(e.error);null==a||a.backendManagedStorage.error(t,e.error),null==s||s.error(t,e.error)},onStorageClearError:e=>{const t="storage:clear error "+String(e.error);null==a||a.backendManagedStorage.error(t,e.error),null==s||s.error(t,e.error)},onStorageGetSuccess:e=>{if(null==s||s.info("storage:get success",{keyPrefixes:e.request.keyPrefixes,entriesCount:e.entriesCount,entriesDropped:e.entriesDropped}),e.entriesDropped>0){const t="storage:get data dropped";null==s||s.warn(t,{entriesDropped:e.entriesDropped,keyPrefixes:e.request.keyPrefixes}),c&&(null==a||a.backendManagedStorage.warn(t,{entriesDropped:e.entriesDropped,keyPrefixes:e.request.keyPrefixes.join(",")}))}},onStorageSaveSuccess:e=>null==s?void 0:s.info("storage:save success",{key:e.request.key,bytesCount:e.bytesCount}),onStorageClearSuccess:e=>null==s?void 0:s.info("storage:clear success",{keyPrefixes:e.request.keyPrefixes})});t.registerExternalMessageHandler((e=>l.handleMessage(e)?NF.Result.STOP_HANDLING:NF.Result.CONTINUE_HANDLING))}(d,w,p.instance,p.canSaveToStorage,(()=>m.maxWsMessageSize),i.backendManagedStorageFelogLevel,q.create("BackendManagedStorage.CAPIMessageHandler"),o),i.runCleanupRequests()&&I.add(p.instance.runCleanupRequests().subscribe((0,Tr.Vn)((e=>{o.backendManagedStorage.error(`BackendManagedStorage.Cleanup ${String(e)}`,e),q.create("BackendManagedStorage.Cleanup").error(String(e),e)}))))),{client:w,pushChanges:e=>($M.isReset(e)?y=new _u.i(e.delta):$M.isFlush(e)||(y=y.compose(e.delta)),w.pushChanges((0,Ir.zG)(e,(e=>$M.isReset(e)?$M.unsafeRes(new _u.i(e.delta)):$M.isFlush(e)?$M.flush():$M.delta(new _u.i(e.delta),e.prevLen))))),getCheckingState:()=>w.checkingState,getCheckingStateObs:()=>S,getAsyncChecksState:()=>w.asyncChecksState,getEventsObs:()=>d,getMessagesObs:()=>k.asObservable(),connect(e){y=new _u.i(e.delta),m.connect(_.getContents)},sendMessage:(e,t,n,r)=>pZ(w,u,(({id:i,sessionId:o,currentRevision:s})=>({...tZ(s,r)({...t,id:i,action:e}),sessionId:n?o:void 0}))),dispose(){I.unsubscribe(),null==p||p.instance.dispose(),g.unsubscribe(),u.complete(),u.unsubscribe(),k.complete(),k.unsubscribe(),m.close(),w.close("Disposed")}}};const t=(e,t,i)=>{const o=e=>new(WebSocket||self.MozWebSocket)(e);return new DF(e?r(o,t):n(o),i)},n=e=>new uK(Rj.create(e).writer(NL),new zj(Bj.d1,0,!1),10),r=(e,t)=>{const n=new aj(t,[MX.Message,LK,pY]);return n.sanitizeWSHandler(new uK(n.sanitizeWS(Rj.create(e),NL),new zj(Bj.d1,0,!1),10))}}(mZ||(mZ={}));class bZ{constructor(e,t=q.create("DenaliCapiRpcApi")){this._factory=e,this._log=t,this._instances=new Map,this.api={requestWritingExpert:this._callClientMethod("requestWritingExpert",((e,t)=>e.requestWritingExpert(...t))),requestSynonyms:this._callClientMethod("requestSynonyms",((e,t)=>e.requestSynonyms(...t))),requestSnippets:this._callClientMethod("requestSnippets",((e,t)=>e.requestSnippets(...t))),sendFeedback:this._callClientMethod("sendFeedback",((e,t)=>e.sendFeedback(...t))),close:this._callClientMethod("close",((e,t)=>e.close(...t))),enablePlagiarismSearch:this._callClientMethod("enablePlagiarismSearch",(e=>e.enablePlagiarismSearch())),disablePlagiarismSearch:this._callClientMethod("disablePlagiarismSearch",(e=>e.disablePlagiarismSearch())),enableWritingExpert:this._callClientMethod("enableWritingExpert",(e=>e.enableWritingExpert())),disableWritingExpert:this._callClientMethod("disableWritingExpert",(e=>e.disableWritingExpert())),sendTouchTypistCommand:this._callClientMethod("sendTouchTypistCommand",((e,t)=>e.sendTouchTypistCommand(...t))),setSessionOption:this._callClientMethod("setSessionOption",((e,t)=>e.setSessionOption(...t))),setContext:this._callClientMethod("setContext",((e,t)=>e.setContext(...t))),requestDocStats:this._callClientMethod("requestDocStats",(e=>e.requestDocStats())),ping:this._callClientMethod("ping",(e=>e.ping())),getText:this._callClientMethod("getText",(e=>e.getText())),isClosed:this._callClientMethod("isClosed",(e=>e.isClosed())),realtimeProofitSubmit:this._callClientMethod("realtimeProofitSubmit",((e,t)=>e.realtimeProofitSubmit(...t))),realtimeProofitCancel:this._callClientMethod("realtimeProofitCancel",(e=>e.realtimeProofitCancel())),submitRecipients:this._callClientMethod("submitRecipients",((e,t)=>e.submitRecipients(...t))),sendUserAction:this._callClientMethod("sendUserAction",((e,t)=>e.sendUserAction(...t))),shortenItSubmit:this._callClientMethod("shortenItSubmit",((e,t)=>e.shortenItSubmit(...t))),sendDebugReport:this._callClientMethod("sendDebugReport",((e,t)=>e.sendDebugReport(...t))),updateContextInfo:this._callClientMethod("updateContextInfo",((e,t)=>e.updateContextInfo(...t))),published:this._callClientMethod("published",(e=>e.published())),submitScoreSurveyResult:this._callClientMethod("submitScoreSurveyResult",((e,t)=>e.submitScoreSurveyResult(...t))),submitSurvey:this._callClientMethod("submitSurvey",((e,t)=>e.submitSurvey(...t))),resetReconnectInfo:this._callClientMethod("resetReconnectInfo",((e,t)=>e.resetReconnectInfo(...t))),getCheckingState:this._callWrapperMethod("getCheckingState",(e=>e.getCheckingState())),getCheckingStateObs:this._callWrapperMethod("getCheckingStateObs",(e=>e.getCheckingStateObs())),getAsyncChecksState:this._callWrapperMethod("getAsyncChecksState",(e=>e.getAsyncChecksState())),getEventsObs:this._callWrapperMethod("getEventsObs",(e=>e.getEventsObs())),getMessagesObs:this._callWrapperMethod("getMessagesObs",(e=>e.getMessagesObs())),pushChanges:this._callWrapperMethod("pushChanges",((e,t)=>e.pushChanges(...t))),connect:this._callWrapperMethod("connect",((e,t)=>e.connect(...t))),sendMessage:this._callWrapperMethod("sendMessage",((e,t)=>e.sendMessage(...t))),enableAudienceAdapt:this._callClientMethod("enableAudienceAdapt",((e,t)=>e.enableAudienceAdapt(...t))),disableAudienceAdapt:this._callClientMethod("disableAudienceAdapt",(e=>e.disableAudienceAdapt()))}}_callClientMethod(e,t){return({token:n,args:r})=>{const i=this._instances.get(n);if(!i)throw new Error(`no instance for ${n}`);try{return t(i.client,r)}catch(t){throw new Error(`method ${e} of instance ${n} threw an error: ${t.message?t.message:t}`)}}}_callWrapperMethod(e,t){return({token:n,args:r})=>{const i=this._instances.get(n);if(!i)throw new Error(`no instance for ${n}`);try{return t(i,r)}catch(t){throw new Error(`method ${e} of instance ${n} threw an error: ${t.message?t.message:t}`)}}}startSession(e){const t=gZ.create();return this._instances.set(t,this._factory(e)),t}stopSession(e){const t=this._instances.get(e);t?(t.dispose(),this._instances.delete(e)):this._log.warn(`no instance for ${e}, ignoring`)}getInstance(e){return this._instances.get(e)}dispose(){for(const e of this._instances.keys())try{this.stopSession(e)}catch(t){this._log.error(`failed trying to dispose instance ${e}`,t)}this._instances.clear()}}const yZ=Ur.IM(Ur.Z_,Ur.dt({dataSharing:Ur.O7})),_Z=Ur.dt({consentRequired:Ur.O7,dataSharing:Ur.O7,features:yZ});class vZ extends Kc.Base{constructor(e,t,n){super(),this._url=e,this._ajaxFactory=t,this._fingerprints=n,this._ajax=this._ajaxFactory({requestExtender:Yc.toHeaderAppender(this._fingerprints)})}static getDefaultUrl(e){return`https://gateway${e}/privacy/v1/api/data-sharing/`}getUserDataSharingSettings(){const e=gl.get(this._url,"user");return this._ajax.json(e,_Z)}getInstitutionDataSharingSettings(){const e=gl.get(this._url,"institution");return this._ajax.json(e,_Z)}updateUserDataSharingFeature(e,t){const n=gl.put(this._url,`user/features/${e}`).json({consentAction:t});return this._ajax.empty(n)}updateInstitutionDataSharingFeature(e,t){const n=gl.put(this._url,`institution/features/${e}`).json({consentAction:t});return this._ajax.empty(n)}updateUserDataSharing(e){const t=gl.put(this._url,"user").json({consentAction:e});return this._ajax.empty(t)}updateInstitutionDataSharing(e){const t=gl.put(this._url,"institution").json({consentAction:e});return this._ajax.empty(t)}updateInstitutionFeature(e,t){const n=gl.put(this._url,`institution/features/${e}`).json({consentAction:t});return this._ajax.json(n)}}class wZ{constructor(e,t,n,r,i){this._store=n,this._actions=r,this._experimentClient=i,this._logger=q.create("DataSharingService"),this._lastDataFetchTimestamp=void 0,this._getUserDataSharingSettings=()=>this._experimentClient.isGateEnabled(De.DataSharing)?this._api.get().getUserDataSharingSettings().then((e=>(this._lastDataFetchTimestamp=Date.now(),this._actions.dataSharingSettings.setDataSharingSettings(e),e))).catch((e=>(Kt().dataSharingGetError(e),this._logger.error(`There was an issue calling Data Sharing API: ${e}`),null))):Promise.resolve(null),this.getSettings=()=>this._getUserDataSharingSettings(),this.getSettingsRateLimited=async()=>{var e;if(void 0===this._lastDataFetchTimestamp||Date.now()-this._lastDataFetchTimestamp>3e5)return await this._getUserDataSharingSettings();const{extensionSettings:t}=await this._store.get(["extensionSettings"]);return(null===(e=null==t?void 0:t.common)||void 0===e?void 0:e.dataSharingSettings)||null},this._api=(0,h.Vo)((()=>new vZ(e,t.ajaxFactory,t.fingerprints)))}}class SZ{constructor(e,t=Kt()){this._experimentClient=e,this._telemetry=t}getIterableAccessToken(e,t){this._experimentClient.isGateEnabled(De.IterableMetrics)&&this._telemetry.mise.getIterableAccessToken(e,t)}logMISeApi(e){this._experimentClient.isGateEnabled(De.IterableLogs)&&this._telemetry.mise.logMISeApi(e)}}var kZ;!function(e){e.GetSubscriptionStatus="GET_SUBSCRIPTION_STATUS",e.GetAppleSubscribeEligibility="CHECK_APPLE_SUBSCRIBE_ELIGIBILITY",e.GetAppleTrialEligibility="CHECK_APPLE_TRIAL_ELIGIBILITY",e.SubscribeAppleReceipt="SUBSCRIBE_APPLE_RECEIPT"}(kZ||(kZ={}));class IZ{constructor(e){this._subscriptionService=e,this._logger=q.create("NetworkServiceHandlerImpl")}async handleNetworkServiceRequest(e){switch(this._logger.debug("Processing NetworkServiceRequest",e),e.userInfo.name){case kZ.GetSubscriptionStatus:return this._handleGetSubscriptionStatus();case kZ.GetAppleSubscribeEligibility:return this._handleGetAppleSubscribeEligibility();case kZ.GetAppleTrialEligibility:return this._handleGetAppleTrialEligibility(e.userInfo.payload);case kZ.SubscribeAppleReceipt:return this._handleSubscribeAppleReceipt(e.userInfo.payload);default:return this._logger.warn("Unknown message name:",e.name),JSON.stringify({status:400,error:`Unknown message name: ${e.name}`,response:null})}}async _handleGetSubscriptionStatus(){try{const e=await this._subscriptionService.getSubscriptionStatus();return this._logger.debug("Subscription status retrieved:",e),CZ(e)}catch(e){return this._logger.error("Failed to get subscription status:",e),EZ(e)}}async _handleGetAppleSubscribeEligibility(){try{const e=await this._subscriptionService.getAppleSubscribeEligibility();return this._logger.debug("Apple subscribe eligibility retrieved:",e),CZ(e)}catch(e){return this._logger.error("Failed to get Apple subscribe eligibility:",e),EZ(e)}}async _handleGetAppleTrialEligibility(e){try{const{receipt:t}=AZ(e),n=await this._subscriptionService.getAppleTrialEligibility(t);return this._logger.debug("Apple trial eligibility retrieved:",n),CZ(n)}catch(e){return this._logger.error("Failed to get Apple trial eligibility:",e),EZ(e)}}async _handleSubscribeAppleReceipt(e){try{const{priceLocale:t,receipt:n}=AZ(e),r=await this._subscriptionService.subscribeAppleReceipt(t,n);return this._logger.debug("Apple receipt subscription result:",r),CZ(r)}catch(e){return this._logger.error("Failed to subscribe Apple receipt:",e),EZ(e)}}}function CZ(e){return JSON.stringify({status:200,error:null,response:e})}function EZ(e){return JSON.stringify({status:400,error:e instanceof Error?e.message:"Unknown error",response:null})}function AZ(e){try{return JSON.parse(e)}catch(e){throw new Error(`Failed to parse payload: ${e instanceof Error?e.message:"Unknown error"}`)}}class xZ{constructor(e){this._store=e,this._lastSuccess=null,this._initialRefreshDone=null,this._initializationPromise=null,this._initializationPromise=this._readStorageState()}async waitForInitialized(){await this._initializationPromise}registerAuthSuccess(){this._lastSuccess=Date.now(),this._store.patch({lastAuthSuccessEvent:{timestamp:this._lastSuccess}})}getLastAuthSuccessTimestamp(){return this._lastSuccess}async _readStorageState(){var e,t,n;const r=await this._store.get(["lastAuthSuccessEvent","authTokenInitialRefreshDone"]);this._lastSuccess=null!==(t=null===(e=r.lastAuthSuccessEvent)||void 0===e?void 0:e.timestamp)&&void 0!==t?t:null,this._initialRefreshDone=null!==(n=r.authTokenInitialRefreshDone)&&void 0!==n?n:null}setInitialRefreshDone(e){this._store.patch({authTokenInitialRefreshDone:e})}getInitialRefreshDone(){return this._initialRefreshDone}}const TZ=["inbox.google.com","mail.google.com","yahoo.com","mail.live.com","facebook.com","stackoverflow.com","wordpress.com","wordpress.org","blogspot.com"];const OZ=Ta(10),PZ=(Ta(5),OZ),RZ=[Ta(10),PZ,Ta(60),Oa(3),Aa(12),Aa(1),Aa(365)];const DZ={"chrome.google.com":{enabled:!1},"facebook.com":{enabled:!0,pages:{".*/notes":{enabled:!1}}},"onedrive.live.com":{enabled:!1},"docs.com":{enabled:!1},"sp.docs.com":{enabled:!1},"docs.google.com":{enabled:!0,matchInclusions:!1,matchSubdomains:!1,pages:{".*/document":{matchPartOfUrl:!0,minFieldHeight:0,minFieldWidth:0,enabled:!0},".*/spreadsheets":{enabled:!1},".*/presentation":{enabled:!1}},track:!0},"drive.google.com":{enabled:!1},"texteditor.nsspot.net":{enabled:!1},"jsbin.com":{enabled:!1},"jsfiddle.net":{enabled:!1},"paper.dropbox.com":{enabled:!1},"mail.live.com":{enabled:!1,matchInclusions:!0},"imperavi.com":{enabled:!1},"usecanvas.com":{enabled:!1},"figma.com":{enabled:!1}};function NZ(){return{pageConfig:K({},DZ,{version:{enabled:!1,servicePage:!0},extensions:{enabled:!1,servicePage:!0},settings:{enabled:!1,servicePage:!0},"com.safari.grammarlyspellcheckergrammarchecker":{enabled:!1,matchInclusions:!0,servicePage:!0},[`app.${$e()}`]:{enabled:!1,grammarlyEditor:!0},"linkedin.com":{pages:{"/messaging":{afterReplaceEvents:["input"]}}},"plus.google.com":{afterReplaceEvents:["keyup"],minFieldHeight:0,minFieldWidth:0},"facebook.com":{minFieldHeight:0,pages:{"/marketplace":{afterReplaceEvents:["input"]}}},"mail.google.com":{fields:[{name:"to"},{name:"cc"},{name:"bcc"},{className:"vO"}],subframes:!1},"drive.google.com":{dontShowDisabledBadge:!0},"docs.google.com":{track:!0},"app.asana.com":{fields:[{className:"task-row-text-input"}]},"chrome.google.com":{dontShowDisabledBadge:!0}})}}class UZ{static isValid(e){if(e&&e.pageConfig&&Object.keys(e).length&&Object.keys(e.pageConfig).length&&(!e.protocolVersion||"1.0"===e.protocolVersion))return!0}static getInterval(e){return RZ.includes(e)?e:PZ}}class MZ{constructor(e,t=q.create("MetaDataServiceImpl")){this._persistentStore=e,this._log=t}async loadFromStorage(){try{const{blocklistConfigMetadata:e}=await this._persistentStore.get(["blocklistConfigMetadata"]);await this.set(e)}catch(e){this._log.error("Error getting meta data",e),await this.set(null)}return this}async set(e){try{const{version:t,date:n,interval:r}=e||{};this._meta={date:Number(n)||0,interval:UZ.getInterval(Number(r)),version:t},await this._persistentStore.patch({blocklistConfigMetadata:this._meta}),this._log.info("Meta data saved successfully",this._meta)}catch(e){this._log.error("Error saving meta data",e)}}get metaData(){return this._meta}}const jZ=q.create("lib.page-config.decorator");function FZ(e){const t=K({pageConfig:{}},null!=e?e:{});return t.pageConfig||(t.pageConfig={}),t}class LZ{static decorate(e){let t=e||{};return t=this.filterByVersion(t),t=this.withDefault(t),t=this.parseBooleans(t),t=this.parseBrowserValues(t),t=this.filterInvalidPageRegexp(t),t=this.collectSubdomains(t),t=this.collectPartials(t),t}static withDefault(e){var t;const n=FZ(e),r=NZ&&NZ().pageConfig||{};return n.pageConfig=K(r,null!==(t=n.pageConfig)&&void 0!==t?t:{}),n}static filterByVersion(e,t=ze()){const n=FZ(e),r=n.pageConfig;return n.pageConfig=Object.keys(r||{}).filter((e=>{const n=r[e].version;return!n||"*"===n||1!==function(e="",t=""){function n(e){return e.split(".").map((e=>Number(e)||0))}const r=n(e),i=n(t),o=Array(Math.abs(r.length-i.length)).fill(0);if(r.length>i.length?i.push(...o):r.push(...o),r.every(((e,t)=>e===i[t])))return 0;for(let e=0,t=r.length;e<t;e++){if(r[e]>i[e])return 1;if(r[e]<i[e])return-1}return-1}(t,n)})).reduce(((e,t)=>Object.assign({},e,{[t]:n.pageConfig[t]})),{}),n}static parseBooleans(e){function t(e){return!(!1===e||"false"===e)}function n(e){return!!e&&t(e)}const r=FZ(e),i=r.pageConfig;return Object.keys(i||{}).forEach((e=>{i[e]||(i[e]={});const r=i[e];r.enabled=t(r.enabled),r.matchInclusions=n(r.matchInclusions),r.matchSubdomains=n(r.matchSubdomains),r.pages&&Object.keys(r.pages).forEach((e=>{r.pages[e].enabled=t(r.pages[e].enabled)}))})),r}static parseBrowserValues(e,t=Be()){const n=FZ(e),r=n.pageConfig;return Object.keys(r||{}).forEach((e=>{const n=r[e]&&r[e].disabledBrowsers;n&&n.includes(t)&&(r[e].enabled=!1)})),n}static filterInvalidPageRegexp(e){const t=FZ(e),n=t.pageConfig;return Object.keys(n||{}).forEach((e=>{const t=n[e];t.pages&&(t.pages=Object.keys(t.pages).filter((e=>{try{return new RegExp(e)}catch(e){return!1}})).reduce(((e,n)=>Object.assign({},e,{[n]:t.pages[n]})),{}))})),t}static collectSubdomains(e){function t(e){try{return Object.keys(e||{}).filter((t=>e[t].matchSubdomains)).map((t=>Object.assign({domain:t},e[t])))}catch(e){jZ.warn("Cannot collect subdomains from config")}return[]}const n=FZ(e);return n.subdomains=t(n.pageConfig),n.allowedPageConfig&&(n.allowedSubdomains=t(n.allowedPageConfig)),n}static collectPartials(e){const t=FZ(e),n=t.pageConfig;t.partials=[];try{t.partials=Object.keys(n||{}).filter((e=>n[e].matchInclusions)).map((e=>Object.assign({domain:e},n[e])))}catch(e){jZ.warn("Cannot collect partials from config")}return t}}function GZ(e){return LZ.decorate(e)}class BZ{constructor(e,t,n,r,i=q.create("PageConfigLoaderImpl")){this._cdnConfigurationSource=e,this._clientControlsConfigurationSource=t,this._persistentStore=n,this._prefs=r,this._log=i,this._initCompletionSource=(0,Ke.II)(),this._pageConfigDebugTools=()=>{(0,ao.iR)("showPageConfig",(()=>console.log(this.config?K({},this.config):null))),(0,ao.iR)("overridePageConfig",(e=>{if(!this.config)throw new Error("Config is not defined");this._setConfig(K({},this.config,{pageConfig:K({},this.config.pageConfig||{},e),locallyOverriddenBy:e})),console.warn("Page Config updated. It will be reset with the next refresh from the server! The new pageConfig is:",K({},this.config))})),(0,ao.iR)("resetPageConfig",(async()=>{await this.load(),console.warn("Page Config was reset to the server state. The new pageConfig is",K({},this.config||{}))}))},this._pageConfigDebugTools()}init(){return this._init().then((e=>this._initCompletionSource.resolve(e)),(e=>this._initCompletionSource.reject(e)))}get config(){return this._config}async loadIfNeeded(){if(!this._metaDataService&&(await this._initCompletionSource.promise,!this._metaDataService))throw new Error("Metadata has not been initialized.");const{date:e,interval:t}=this._metaDataService.metaData;if(!(e+t>Date.now()))return this._log.info("Config: going to update config from CDN and client controls..."),this.load();{const n=(e+t-Date.now())/1e3/60;this._log.info(`Config: next update in ${n.toFixed(2)} m`)}}async load(){const e=K(await this._cdnConfigurationSource.fetchConfigOrFallback(),await this._clientControlsConfigurationSource.fetchConfigOrFallback());await this._updateMetadata(e),this._setConfig(e)}async loadFromStorage(){return K(await this._cdnConfigurationSource.getConfigFromStorage(),await this._clientControlsConfigurationSource.getConfigFromStorage())}async _init(){aA.start("pageConfig_init"),await this._isSkipConfig()?this._log.warn("Config: use default config in DEBUG mode (skipConfig=true)"):this._setConfig(await this.loadFromStorage()),this._metaDataService=await new MZ(this._persistentStore).loadFromStorage(),aA.stop("pageConfig_init")}async _isSkipConfig(){return!1}_setConfig(e){this._config=GZ(null!=e?e:{})}async _updateMetadata(e){const{interval:t,version:n}=e;this._fireVersionUpdate(n,this._metaDataService.metaData.version),await this._metaDataService.set({date:Date.now(),interval:t,version:n})}_fireVersionUpdate(e,t){e&&t!==e&&Kt().pageConfigUpdated(t,e)}}class zZ{constructor(e){this._pageConfigLoader=e,this.get=(e,t)=>{var n,r,i,o,s,a,c,l,u,d,h;const p=(null===(r=null===(n=this.config)||void 0===n?void 0:n.allowedPageConfig)||void 0===r?void 0:r[e])||(null===(o=null===(i=this.config)||void 0===i?void 0:i.allowedSubdomains)||void 0===o?void 0:o.find((t=>new RegExp(`\\.${xs(t.domain)}$`).test(e)))),g=p&&p.enabled,f=Pw();if((null===(s=this.config)||void 0===s?void 0:s.allowedDomainsEnabled)&&!g)return{enabled:!1,unsupportedMessage:f.ORGANIZATION_CONTROLS};const m=null===(c=null===(a=this.config)||void 0===a?void 0:a.subdomains)||void 0===c?void 0:c.find((t=>new RegExp(`\\.${xs(t.domain)}$`).test(e)));if(!1===(null==m?void 0:m.enabled)&&m.matchSubdomains&&m.isEnterpriseConfig)return m;const b=(null===(u=null===(l=this.config)||void 0===l?void 0:l.pageConfig)||void 0===u?void 0:u[e])||m||(null===(h=null===(d=this.config)||void 0===d?void 0:d.partials)||void 0===h?void 0:h.find((t=>e.includes(t.domain))));if(b&&!1===b.enabled)return b;const y=this.getByPage(b&&b.pages,t),_=this._getClientConfig(),v=y||b||{};return v.enabled=!1!==v.enabled,!1===_.enabled&&(v.enabled=!1,v.unsupportedMessage=_.unsupportedMessage),v},this._invalidateIfNeeded=()=>this._pageConfigLoader.loadIfNeeded(),this.invalidateIfNeeded=function(e,t,n){const r={};return function(...i){const o="_memoize_"+(t?t.apply(this,i):arguments[0]);return self.hasOwnProperty.call(r,o)?r[o]:(n&&setTimeout((()=>{delete r[o]}),n),r[o]=e.apply(this,i))}}(this._invalidateIfNeeded,void 0,1e4),this.getByPage=(e,t=Et())=>{if(!e)return;const n=Object.keys(e).find((e=>new RegExp(e).test(t)));return n?e[n]:void 0},this._getClientConfig=()=>{var e,t,n;return null!==(n=null===(t=null===(e=this.config)||void 0===e?void 0:e.clientConfig)||void 0===t?void 0:t[He()])&&void 0!==n?n:{}}}init(){return this._pageConfigLoader.init()}forceInvalidate(){this._pageConfigLoader.load()}toReload(e){return 0===e.indexOf("http")&&TZ.some((t=>e.includes(t)))}get config(){return this._pageConfigLoader.config}}const VZ="Config malformed",qZ="Config missed";class HZ{constructor(e,t=q.create("CDNBlocklistConfigSource")){this._persistentStore=e,this._log=t}async fetchConfigOrFallback(){try{const e=await Promise.race([this._fetchBlocklistConfigFromCDN(),(0,Ke.gw)(6e4).then((()=>{throw new Error("Page config load Timeout")}))]);if(!UZ.isValid(e))throw new Error(VZ);return await this._saveConfigToStorage(e),e}catch(e){return Kt().pageConfigCDNError(e.message),this._log.error(`Config: can't get valid config - ${e.message}. Using cached fallback`),this.getConfigFromStorage()}}async getConfigFromStorage(){try{const{blocklistConfigFromCDN:e}=await this._persistentStore.get(["blocklistConfigFromCDN"]);if(!e)throw new Error(qZ);if(!UZ.isValid(e))throw new Error(VZ);return this._log.info("Config: loaded from persistent storage successfully"),e}catch(e){return e.message!==qZ&&Kt().pageConfigLocalStorageError(e.message,e.name),this._log.warn(`Config: cannot get valid config from storage: ${e}`),{}}}async _saveConfigToStorage(e){var t;await this._persistentStore.patch({blocklistConfigFromCDN:e}),this._log.info(`Config: new config saved to persistent storage successfully: ${null!==(t=e.version)&&void 0!==t?t:""}`,e)}_fetchBlocklistConfigFromCDN(){return fetch(N().appConfig.url.pageConfigUrl,{credentials:"include"}).then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()})).then((e=>{if("string"!=typeof e&&e&&e.error)throw new Error(e.error);return e}))}}var WZ;(e=>{var t,n,r,i,o,s,a,c,l,u,d,h,p,g,f,m,b,y,_,v;let w;let S;let k;let I;let C;let E;let A;(t=e.Feature||(e.Feature={})).AdminControlledGroups="admin_controlled_groups",t.Authorship="authorship",t.BrandingSet="branding_set",t.BrandToneProfilesLimit="brand_tone_profiles_limit",t.BrandTones="brandtones",t.BYOK="byok",t.Cheetah="cheetah",t.ClientControls="clientcontrols",t.CompanyLanguage="companylanguage",t.CostCenters="costcenters",t.CustomRoles="customroles",t.DomainCapture="domain_capture",t.DomainVerification="domain_verification",t.EcosystemApi="ecosystem_api",t.EnterpriseAnalytics="enterprise_analytics",t.Institution="institution",t.InviteCapture="invite_capture",t.KnowledgeHub="knowledgehub",t.ManagedMode="managedmode",t.MemberUsageAnalytics="member_usage_analytics",t.OrgDictionary="orgdictionary",t.SCIM="scim",t.Snippets="snippets",t.Sso="sso",t.Statistics="statistics",t.StyleGuideRuleSetsLimit="style_guide_rule_sets_limit",t.Subscription="subscription",t.UserGroupsLimit="user_groups_limit",t.Vox="vox",t.WritingStyle="writingstyle",t.BillingGroups="billing_groups",t.AIStudio="ai_studio",(n=e.AdminControlledGroupsPermission||(e.AdminControlledGroupsPermission={})).AdminControlledGroupsCreate="admin-controlled-groups:create",n.AdminControlledGroupsDelete="admin-controlled-groups:delete",n.AdminControlledGroupsMembershipDelete="admin-controlled-groups:membership:delete",(r=e.AuthorshipPermission||(e.AuthorshipPermission={})).InstitutionSettingsRead="institution:settings:read",r.InstitutionSettingsWrite="institution:settings:write",(i=e.BrandTonesPermission||(e.BrandTonesPermission={})).GlobalRead="global:read",i.GroupCreate="group:create",i.GroupDelete="group:delete",i.GlobalDelete="global:delete",i.GlobalCreate="global:create",(o=e.CheetahPermission||(e.CheetahPermission={})).ConfigurationRead="configuration:read",o.ConfigurationWrite="configuration:write",(s=e.ClientControlsPermission||(e.ClientControlsPermission={})).ClientControlsRead="clientcontrols:read",s.ClientControlsWrite="clientcontrols:write",(a=e.EcosystemApiPermission||(e.EcosystemApiPermission={})).CredentialsRead="credentials:read",a.CredentialsWrite="credentials:write",(c=e.KnowledgeHubPermission||(e.KnowledgeHubPermission={})).GlobalRead="global:read",c.GlobalWrite="global:write",(l=e.InstitutionPermission||(e.InstitutionPermission={})).DomainRead="domain:read",l.DomainWrite="domain:write",l.GroupCreate="group:create",l.GroupDelete="group:delete",l.GroupMembershipManage="group:membership:manage",l.GroupRead="group:read",l.InstitutionGlobalRead="institution:global:read",l.InstitutionGlobalWrite="institution:global:write",l.LogoWrite="logo:write",l.MembershipCsv="membership:csv",l.MembershipRead="membership:read",l.MembershipCreate="membership:create",l.MembershipDelete="membership:delete",l.RequestToJoinManage="request-to-join:manage",l.RolesRead="roles:read",l.RolesWriteGroupManager="roles:write:group_contributor",l.RolesWriteInstitutionUser="roles:write:institution_user",l.RolesWriteAccountManager="roles:write:contributor",l.RolesWriteCustomRoles="roles:write:custom_roles",l.RolesWriteAdmin="roles:write:owner",l.SettingsDictionaryWrite="settings:dictionary:write",l.SettingsSuggestionManage="settings:suggestion:manage",l.TeamDiscoveryRead="teamdiscovery:read",l.TeamDiscoveryWrite="teamdiscovery:write",l.ToneWrite="tone:write",l.VaultPrivateManage="vault:private:manage",l.VaultProtectedManage="vault:protected:manage",l.VaultPublicManage="vault:public:manage",(u=e.CustomRolesPermission||(e.CustomRolesPermission={})).CustomRolesRead="custom-roles:read",u.CustomRolesWrite="custom-roles:write",(d=e.SnippetsPermission||(e.SnippetsPermission={})).SettingsRead="settings:read",d.SettingsToggleWrite="settings:toggle:write",d.SettingsWrite="settings:write",d.SnippetsGlobalRead="snippets:global:read",d.SnippetsGlobalCreate="snippets:global:create",d.SnippetsGlobalDelete="snippets:global:delete",d.SnippetsRead="snippets:read",d.SnippetsWrite="snippets:write",d.SnippetsGroupCreate="snippets:group:create",d.SnippetsGroupDelete="snippets:group:delete",(h=e.StatisticsPermission||(e.StatisticsPermission={})).GeneralRead="general:read",h.GeneralWrite="general:write",h.GroupRead="group:read",h.UsersRead="users:read",h.InstitutionSettingsRead="institution:settings:read",h.InstitutionSettingsWrite="institution:settings:write",h.ManagedModeRead="managed_mode:read",(p=e.SsoPermission||(e.SsoPermission={})).ScimRead="scim:read",p.ScimWrite="scim:write",p.SettingsRead="settings:read",p.SettingsWrite="settings:write",(e.SubscriptionPermission||(e.SubscriptionPermission={})).Write="subscription:write",(g=e.WritingStylePermission||(e.WritingStylePermission={})).ReadAll="read:all",g.CreateAll="create:all",g.DeleteAll="delete:all",g.CreateGroup="create:group",g.DeleteGroup="delete:group",(f=e.VoxPermission||(e.VoxPermission={})).GlobalRead="global:read",f.GlobalCreate="global:create",f.GlobalDelete="global:delete",f.GroupCreate="group:create",f.GroupDelete="group:delete",f.RulesRead="rules:read",(m=e.CompanyLanguagePermission||(e.CompanyLanguagePermission={})).ConfigurationWrite="configuration:write",m.ConfigurationRead="configuration:read",(b=e.OrgDictionaryPermission||(e.OrgDictionaryPermission={})).Read="read",b.Write="write",(y=e.CostCenterPermission||(e.CostCenterPermission={})).SettingsRead="settings:read",y.SettingsWrite="settings:write",(_=e.BillingGroupsPermission||(e.BillingGroupsPermission={})).GlobalRead="global:read",_.GlobalWrite="global:write",_.GlobalDelete="global:delete",_.BillingContactRead="billing_contact:read",_.BillingContactWrite="billing_contact:write",(v=e.AIStudioPermission||(e.AIStudioPermission={})).globalRead="playbook:global:read",v.globalWrite="playbook:global:write",v.globalCreate="playbook:global:create",v.globalDelete="playbook:global:delete",v.playbookRead="playbook:read",v.playbookWrite="playbook:write",v.playbookCreate="playbook:create",v.playbookDelete="playbook:delete",(w=e.FeatureEntitlement||(e.FeatureEntitlement={})).codec=Ur.r$({boolValue:Ur.O7,stringValue:Ur.Z_,numberValue:Ur.pk}),(S=e.ResourceType||(e.ResourceType={})).codec=Ur.G0([Ur.i0("UNKNOWN_RESOURCE_TYPE"),Ur.i0("INSTITUTION_RESOURCE"),Ur.i0("USER_GROUP_RESOURCE")]),(k=e.Permission||(e.Permission={})).codec=Ur.dt({resourceId:Ur.Z_,resourceType:S.codec,permission:Ur.IX(Ur.Z_)}),(I=e.FeatureReference||(e.FeatureReference={})).codec=Ur.G0([Ur.i0("brandtones"),Ur.i0("cheetah"),Ur.i0("clientcontrols"),Ur.i0("ecosystem_api"),Ur.i0("institution"),Ur.i0("knowledgehub"),Ur.i0("snippets"),Ur.i0("sso"),Ur.i0("statistics"),Ur.i0("subscription"),Ur.i0("vox"),Ur.i0("orgdictionary"),Ur.i0("writingstyle"),Ur.i0("companylanguage"),Ur.i0("brand_tone_profiles_limit"),Ur.i0("domain_capture"),Ur.i0("domain_verification"),Ur.i0("invite_capture"),Ur.i0("managedmode"),Ur.i0("member_usage_analytics"),Ur.i0("enterprise_analytics"),Ur.i0("scim"),Ur.i0("style_guide_rule_sets_limit"),Ur.i0("user_groups_limit"),Ur.i0("byok"),Ur.i0("customroles"),Ur.i0("costcenters"),Ur.i0("admin_controlled_groups"),Ur.i0("branding_set"),Ur.i0("billing_groups"),Ur.i0("authorship"),Ur.i0("ai_studio")]),(C=e.FeatureVisa||(e.FeatureVisa={})).codec=Ur.jV([Ur.dt({featureReference:I.codec}),Ur.r$({entitlement:w.codec,permission:Ur.IX(k.codec)})]),(E=e.InstitutionDetails||(e.InstitutionDetails={})).codec=Ur.r$({institutionId:Ur.Z_}),e.codec=Ur.r$({institutionDetails:E.codec,featureVisa:Ur.IX(C.codec)}),(A=e.PassportResponse||(e.PassportResponse={})).codec=Ur.OT(Ur.dt({passport:e.codec}));class x extends Kc.Base{constructor(e,t,n){super(),this._url=e,this._ajaxFactory=t,this._fingerprints=n,this._ajax=this._ajaxFactory({requestExtender:Yc.toHeaderAppender(this._fingerprints)})}static getDefaultUrl(e){return`https://goldengate${e}/passport/api/v1/passport`}getPassport(e){const t=gl.get(this._url);return e&&e.forEach((e=>t.queryParam("features",e))),this._ajax.json(t,A.codec)}}e.PassportClient=x})(WZ||(WZ={}));class $Z{constructor(e){this.passportResponse=e}get featureEntitlements(){var e,t;return null!==(t=null===(e=this.passportResponse.passport.featureVisa)||void 0===e?void 0:e.map((({featureReference:e,entitlement:t})=>({featureReference:e,entitlement:t}))))&&void 0!==t?t:[]}hasEntitlement(e){return this.featureEntitlements.some((({featureReference:t,entitlement:n})=>{const r=Boolean(null==n?void 0:n.boolValue)||Boolean(null==n?void 0:n.stringValue)||Boolean(null==n?void 0:n.numberValue);return t===e&&r}))}getEntitlementValue(e){var t;const n=this.featureEntitlements.find((({featureReference:t})=>t===e));if(!n||!n.entitlement)return null;const{stringValue:r,numberValue:i,boolValue:o}=n.entitlement;return null!==(t=null!=r?r:i)&&void 0!==t?t:o}}class XZ{constructor(e){this.passport=e}get institutionPermissions(){var e,t;return null!==(t=null===(e=this.passport.passport.featureVisa)||void 0===e?void 0:e.flatMap((e=>{var t,n,r;return null!==(r=null===(n=null===(t=e.permission)||void 0===t?void 0:t.find((e=>"INSTITUTION_RESOURCE"===e.resourceType)))||void 0===n?void 0:n.permission.map((t=>({feature:e.featureReference,permission:t}))))&&void 0!==r?r:[]})))&&void 0!==t?t:[]}hasInstitutionPermission(e){return this.institutionPermissions.some((t=>t.feature===e.feature&&t.permission===e.permission))}}class KZ{}KZ.MembershipCreate={feature:WZ.Feature.Institution,permission:WZ.InstitutionPermission.MembershipCreate};const YZ=[WZ.Feature.BrandingSet,WZ.Feature.Institution];class ZZ{constructor(e,t,n,r,i=q.create("PassportService")){this._apiService=t,this._actions=n,this._telemetry=r,this._log=i,this.fetchPassport=async()=>{try{const e=await this._api.get().getPassport(YZ);this._log.info("fetched passport",e),this._entitlements=new $Z(e),this._log.info("parsed entitlements",this._entitlements),this._permissions=new XZ(e),this._log.info("parsed permissions",this._permissions),this._actions.setPassportSettings({entitlements:{brandingSet:this.brandingSet},permissions:{hasMembershipCreatePermission:this.hasMembershipCreatePermission}})}catch(e){this._log.warn("Passport Service | fetch passport failed. Message: ",e.message),this._telemetry.getFetchPassportError(e.statusCode,e.body)}},this._api=(0,h.Vo)((()=>new WZ.PassportClient(e,this._apiService.ajaxFactory,this._apiService.fingerprints)))}get brandingSet(){return this._entitlements.getEntitlementValue(WZ.Feature.BrandingSet)}get hasMembershipCreatePermission(){return this._permissions.hasInstitutionPermission(KZ.MembershipCreate)}}var JZ,QZ;!function(e){e.createWithRandomId=function(e){const t=h.iy.create().slice(0,6);return e&&q.create("ConnectionId").debug(`Created connectionId "${t}" for "${e}"`),`${e}-${t}`},e.createStatic=function(e){return`${e}`}}(JZ||(JZ={})),function(e){e.create=function(e,t){return`${e}-${t}`},e.getRevisionNumber=function(e){if(!e)return-1;const t=e.split("-");return t.length>0?Number(t[t.length-1]):-1},e.fromString=function(e){return e},e.unregistered="unreg"}(QZ||(QZ={}));class eJ{constructor(e,t=q.create("CsToBgCAPIRpcApiImpl")){this._capiApi=e,this._log=t,this._rev=QZ.unregistered,this.publicApi=YL({log:e=>{this._log.debug(` log via CS-BG-CAPI rpc: ${e}`)},startSession:e=>this._capiApi.startSession(nZ.DenaliCAPISettings.parse(e)),stopSession:ae(this._capiApi).stopSession,pushChanges:e=>(this._rev=e.rev,this._capiApi.api.pushChanges({token:e.token,args:[nZ.Change.parse(e.args[0])]})),requestSynonyms:this._capiApi.api.requestSynonyms,requestSnippets:e=>(0,tS.zG)(this._capiApi.api.requestSnippets(e),Nr.UI(nZ.SnippetsResult.serialize)),sendFeedback:this._capiApi.api.sendFeedback,close:this._capiApi.api.close,setSessionOption:e=>this._capiApi.api.setSessionOption({token:e.token,args:[nZ.SessionOption.parse(e.args[0])]}),setContext:e=>this._capiApi.api.setContext({token:e.token,args:[nZ.DocumentContextExt.parseOrEmpty(e.args[0])]}),requestDocStats:this._capiApi.api.requestDocStats,ping:this._capiApi.api.ping,getText:this._capiApi.api.getText,isClosed:this._capiApi.api.isClosed,enablePlagiarismSearch:this._capiApi.api.enablePlagiarismSearch,disablePlagiarismSearch:this._capiApi.api.disablePlagiarismSearch,enableWritingExpert:this._capiApi.api.enableWritingExpert,disableWritingExpert:this._capiApi.api.disableWritingExpert,enableAudienceAdapt:this._capiApi.api.enableAudienceAdapt,disableAudienceAdapt:this._capiApi.api.disableAudienceAdapt,enableAiStudio:this._capiApi.api.enableAiStudio,disableAiStudio:this._capiApi.api.disableAiStudio,realtimeProofitSubmit:this._capiApi.api.realtimeProofitSubmit,realtimeProofitCancel:this._capiApi.api.realtimeProofitCancel,shortenItSubmit:this._capiApi.api.shortenItSubmit,submitRecipients:this._capiApi.api.submitRecipients,sendUserAction:this._capiApi.api.sendUserAction,sendDebugReport:this._capiApi.api.sendDebugReport,getCheckingState:this._capiApi.api.getCheckingState,getCheckingStateObs:this._capiApi.api.getCheckingStateObs,getEventsObs:e=>this._capiApi.api.getEventsObs(e).pipe(Gr.U((e=>({rev:this._rev,event:e})))),getMessagesObs:this._capiApi.api.getMessagesObs,getAsyncChecksState:this._capiApi.api.getAsyncChecksState,updateContextInfo:this._capiApi.api.updateContextInfo,published:this._capiApi.api.published,submitScoreSurveyResult:this._capiApi.api.submitScoreSurveyResult,submitSurvey:this._capiApi.api.submitSurvey,resetReconnectInfo:this._capiApi.api.resetReconnectInfo,connect:e=>this._capiApi.api.connect({token:e.token,args:[nZ.Reset.parse(e.args[0])]}),sendMessage:this._capiApi.api.sendMessage,requestWritingExpert:this._capiApi.api.requestWritingExpert,sendTouchTypistCommand:this._capiApi.api.sendTouchTypistCommand})}}const tJ={intervalMinutes:1440,delayMinutes:5};const nJ=q.create("universal.bg.sessionKeepAlive.sideEffect"),rJ=e=>{const t=function(){const e=ZJ().experimentClient;return{...tJ,enabled:"test"===(null==e?void 0:e.getTreatment(YS.V5UserInfo))}}();return gu.alarm(pu.sessionKeepAlive,{name:lu.sessionKeepAlive,delayInMinutes:t.delayMinutes,periodInMinutes:t.intervalMinutes})((async()=>{if(t.enabled){nJ.debug("Sending session keep-alive request");try{await iJ(e),nJ.debug("Session keep-alive request sent")}catch(e){nJ.error("Session keep-alive request failed",e)}}else nJ.debug("Session keep-alive service is disabled")}))},iJ=async e=>{const t=new Sc(ZJ().browserApi);await HE.fetchUser(e,t)};var oJ=__webpack_require__(38601),sJ=__webpack_require__(2673),aJ=__webpack_require__(56612);var cJ=__webpack_require__(10135),lJ=__webpack_require__(25941),uJ=__webpack_require__(20610);const dJ="id",hJ="userId",pJ={name:"GrammarlyAssistantChatStorage",version:1,schema:{Chat:{options:{keyPath:dJ},indexList:[{indexName:dJ},{indexName:hJ,keyPath:hJ,options:{unique:!1}}]}}};class gJ{constructor(e){var t,n;this._user=e,this._logger=q.create("ChatIndexedDBStorage"),this._encoder=new TextEncoder,this._dataWaitingForUpdate=U.h.create(null),this._dbTable=new Sw(pJ).getTable("Chat"),this._subscription=(0,Lc.D)(this._dataWaitingForUpdate).pipe((0,Ki.h)((e=>null!==e)),function(e){for(var t,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=null!==(t=(0,sJ.yG)(r))&&void 0!==t?t:lJ.z,s=null!==(n=r[0])&&void 0!==n?n:null,a=r[1]||1/0;return(0,zr.e)((function(t,n){var r=[],i=!1,c=function(e){var t=e.buffer;e.subs.unsubscribe(),(0,cJ.P)(r,e),n.next(t),i&&l()},l=function(){if(r){var t=new Gl.w0;n.add(t);var i={buffer:[],subs:t};r.push(i),(0,uJ.f)(t,o,(function(){return c(i)}),e)}};null!==s&&s>=0?(0,uJ.f)(n,o,l,s,!0):i=!0,l();var u=(0,Vr.x)(n,(function(e){var t,n,i=r.slice();try{for(var o=(0,Cr.XA)(i),s=o.next();!s.done;s=o.next()){var l=s.value,u=l.buffer;u.push(e),a<=u.length&&c(l)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}}),(function(){for(;null==r?void 0:r.length;)n.next(r.shift().buffer);null==u||u.unsubscribe(),n.complete(),n.unsubscribe()}),void 0,(function(){return r=null}));t.subscribe(u)}))}(100),(0,Ki.h)((e=>e.length>0)),(0,Gr.U)((e=>e.reduce(((e,t)=>{const[n,r]=t,i=e[n]||{};return e[n]={...i,...r},e}),{}))),(t=e=>function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(0,sJ.jO)(e),r=(0,oJ.D)(e),i=r.args,o=r.keys,s=new bi.y((function(e){var t=i.length;if(t)for(var n=new Array(t),r=t,s=t,a=function(t){var a=!1;(0,Br.Xf)(i[t]).subscribe((0,Vr.x)(e,(function(e){a||(a=!0,s--),n[t]=e}),(function(){return r--}),void 0,(function(){r&&a||(s||e.next(o?(0,aJ.n)(o,n):n),e.complete())})))},c=0;c<t;c++)a(c);else e.complete()}));return n?s.pipe((0,vH.Z)(n)):s}(Object.entries(e).map((([e,t])=>this._handleUpdate(e,t)))),(0,_H.m)(n)?(0,Gc.z)(t,n,1):(0,Gc.z)(t,1))).subscribe()}async _handleUpdate(e,t){const n=await this._getEncryptedChatById(e);if(!n)return void this._logger.error(`Chat with ID ${e} not found`);if(n.userId!==await this._hashUserId(this._user.id))return void this._logger.error("User ID mismatch when updating chat");const r={...n,...t,name:t.name||n.name,messages:t.messages?await this._encryptMessages(t.messages):n.messages};try{await this._dbTable.put(r)}catch(t){this._logger.error(`Failed to update chat with ID ${e}`,t)}}async _hashUserId(e){const t=this._encoder.encode(e),n=await crypto.subtle.digest("SHA-256",t);return btoa(String.fromCharCode(...new Uint8Array(n)))}async _deriveKey(){const e=await crypto.subtle.importKey("raw",this._encoder.encode(this._user.id),{name:"PBKDF2"},!1,["deriveKey"]);return await crypto.subtle.deriveKey({name:"PBKDF2",iterations:1e5,salt:this._encoder.encode("assistant-chats"),hash:"SHA-256"},e,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"])}async _encryptMessages(e){const t=await this._deriveKey(),n=crypto.getRandomValues(new Uint8Array(12)),r=(new TextEncoder).encode(JSON.stringify(e)),i=await crypto.subtle.encrypt({name:"AES-GCM",iv:n},t,r);return{encryptedData:new Uint8Array(i),iv:n}}async _decryptMessages(e,t){try{const n=await this._deriveKey(),r=await crypto.subtle.decrypt({name:"AES-GCM",iv:t},n,e);return JSON.parse((new TextDecoder).decode(r))}catch(e){throw this._logger.error("Failed to decrypt messages",e),new Error("Decryption failed")}}async add(e){const t={...e,userId:await this._hashUserId(this._user.id),messages:await this._encryptMessages(e.messages)};try{return await this._dbTable.put(t)}catch(e){this._logger.error("Failed to add chat",e)}}updateMetadata(e,t){return this._dataWaitingForUpdate.set([e,t]),Promise.resolve()}update(e,t){return this._dataWaitingForUpdate.set([e,t]),Promise.resolve()}updateMessages(e,t){return this._dataWaitingForUpdate.set([e,{messages:t,lastUpdatedTime:new Date}]),Promise.resolve()}async delete(e){const t=await this._getEncryptedChatById(e);if(t)if(t.userId===await this._hashUserId(this._user.id))try{return await this._dbTable.delete(e)}catch(t){this._logger.error(`Failed to delete chat with ID ${e}`,t)}else this._logger.error("User ID mismatch when delete the chat")}async deleteAllExceptCurrentUser(){const e=await this._hashUserId(this._user.id),t=await this._dbTable.getAll(),n=t.filter((t=>t.userId!==e));if(0===n.length)return!1;try{return n.length===t.length?await this._dbTable.clear():await Promise.all(n.map((e=>this._dbTable.delete(e.id)))),this._logger.info(`Deleted ${n.length} chats which do not belong to the current user`),!0}catch(e){return this._logger.error("Failed to delete chats",e),!1}}async _getEncryptedChatById(e){try{return await this._dbTable.get(dJ,e)}catch(t){return void this._logger.error(`Failed to get chat with ID ${e}`,t)}}async getById(e){const t=await this._getEncryptedChatById(e);if(!t)return;if(t.userId!==await this._hashUserId(this._user.id))return void this._logger.error("User ID mismatch when get chat by ID");const n=await this._decryptMessages(t.messages.encryptedData,t.messages.iv);return{...t,messages:n}}getAll(){return this.getMetadataForAllChats()}async getMetadataForAllChats(){try{return(await this._dbTable.getAllByIndex(hJ,await this._hashUserId(this._user.id))).map((e=>({id:e.id,name:e.name,userId:e.userId,createdTime:e.createdTime,lastUpdatedTime:e.lastUpdatedTime})))}catch(e){return this._logger.error("Failed to get metadata for all chats",e),[]}}clear(){try{return this._dbTable.clear()}catch(e){return this._logger.error("Failed to clear all chats",e),Promise.reject(e)}}dispose(){this._subscription.unsubscribe()}}var fJ,mJ,bJ,yJ,_J,vJ;(mJ=fJ||(fJ={})).codec=Ur.dt({currency:Ur.Z_,value:Ur.pk},"Money"),mJ.eq=vT.MW({currency:vT.yv,value:vT.lr}),(bJ||(bJ={})).codec=Ur.dt({price:Ur.pk,priceMoney:fJ.codec,fromSeats:Ur.pk,toSeats:Ur.pk},"PriceTier"),(yJ||(yJ={})).codec=Ur.jV([Ur.dt({id:Ur.pk,title:Ur.Z_,description:Ur.Z_,periodMonths:Ur.pk,price:Ur.pk,priceMoney:fJ.codec,regularPlanId:Ur.pk,regularPrice:Ur.pk,regularPriceMoney:fJ.codec}),Ur.r$({nextPaymentPrice:Ur.pk,numberOfSeats:Ur.pk,renewalPrice:Ur.pk,renewalPriceMoney:fJ.codec,hasTrial:Ur.O7,priceTiers:Ur.IX(bJ.codec),trialDays:Ur.pk,renewalPlanId:Ur.pk})],"PaymentPlan"),(_J||(_J={})).codec=Ur.dt({nextPayDate:Ur.Z_,plan:yJ.codec},"HardChangePaymentPlan"),(vJ||(vJ={})).codec=Ur.G0([Ur.i0("payPal"),Ur.i0("creditCard"),Ur.i0("stripe"),Ur.i0("applePay"),Ur.i0("googlePay"),Ur.S1],"PaymentMethod");var wJ,SJ,kJ,IJ,CJ,EJ,AJ,xJ,TJ,OJ,PJ=(e=>(e.mastercard="MasterCard",e.visa="Visa",e.americanExpress="American Express",e.jcb="JCB",e.maestro="Maestro",e.discover="Discover",e.dinersClub="Diners Club",e.unionPay="UnionPay",e.mir="Mir",e.elo="Elo",e.hiper="Hiper",e))(PJ||{});(wJ||(wJ={})).codec=Ur.G0([fl.Dy.createStringEnum(PJ,"KnownCardType"),Ur.Z_],"CreditCardType"),(SJ||(SJ={})).codec=Ur.G0([Ur.jV([Ur.dt({cardType:wJ.codec}),Ur.r$({cardSuffix:Ur.Z_,expirationMonth:Ur.pk,expirationYear:Ur.pk})]),Ur.S1],"CreditCard"),(kJ||(kJ={})).codec=Ur.dt({id:Ur.Z_,description:Ur.Z_,discountPercent:Ur.pk,isLifelong:Ur.O7}),(IJ||(IJ={})).codec=Ur.G0([Ur.i0("INCLUSIVE"),Ur.i0("EXCLUSIVE")],"RenewalPriceType"),(CJ||(CJ={})).codec=Ur.jV([Ur.dt({discountSuppressed:Ur.O7}),Ur.r$({countryCode:Ur.Z_,renewalPriceType:IJ.codec})],"PricingOptions"),(EJ||(EJ={})).codec=Ur.dt({payPalDisabled:Ur.O7,americanExpressDisabled:Ur.O7,disabledCardTypes:Ur.IX(wJ.codec)},"PaymentMethodOptions"),(AJ||(AJ={})).codec=Ur.G0([Ur.i0("RENEWAL"),Ur.i0("SEAT_EXPANSION"),Ur.i0("INITIAL_CHARGE"),Ur.i0("UNKNOWN")],"InvoiceType"),(xJ||(xJ={})).codec=Ur.dt({amount:fJ.codec,numberOfSeats:Ur.pk,dueDate:Ur.Z_,hostedLink:Ur.Z_,chargeable:Ur.O7,invoiceType:AJ.codec},"StripeInvoiceInfo"),(TJ||(TJ={})).codec=Ur.dt({planId:Ur.pk,pauseStartDate:Ur.Z_,unpauseDate:Ur.Z_,isPremium:Ur.O7},"UnPausedInfo"),(OJ||(OJ={})).codec=Ur.r$({state:Ur.G0([Ur.i0("DEFAULT"),Ur.i0("FROZEN"),Ur.i0("TRIAL"),Ur.i0("BILLING_FLOW_MIGRATION_STARTED"),Ur.i0("BILLING_FLOW_MIGRATION_ENDED")]),paymentMethod:vJ.codec,creditCard:SJ.codec,billingFlowMigrationMethod:Ur.G0([Ur.i0("DEFAULT"),Ur.i0("INVOICING")]),usePaymentsApi:Ur.O7,isPremium:Ur.O7,nextPayDate:Ur.Z_,nextRenewalInvoiceDate:Ur.Z_,lastSubscribedDate:Ur.Z_,expirationDate:Ur.Z_,isAppleSubscription:Ur.O7,isGooglePlaySubscription:Ur.O7,isCancelled:Ur.O7,isDunning:Ur.O7,isPaymentMethodFailed:Ur.O7,isFree:Ur.O7,isFreebie:Ur.O7,isPremiumConversion:Ur.O7,isLegacyPayPal:Ur.O7,canCancelPlanSwitch:Ur.O7,hasInstitutionSubscription:Ur.O7,currentPlan:yJ.codec,queuedPlan:yJ.codec,plans:Ur.IX(yJ.codec),hardChangePlans:Ur.IX(_J.codec),institutionDynamicPlans:Ur.IX(yJ.codec),institutionPlans:Ur.IX(yJ.codec),institutionEduPlans:Ur.IX(yJ.codec),proPlans:Ur.IX(yJ.codec),bundleProPlans:Ur.IX(yJ.codec),bundleBusinessPlans:Ur.IX(yJ.codec),pricingOptions:CJ.codec,proPricingOptions:CJ.codec,bundleProPricingOptions:CJ.codec,bundleBusinessPricingOptions:CJ.codec,paymentMethodOptions:EJ.codec,payPalEmail:Ur.Z_,isOnTrial:Ur.O7,companyInfo:Ur.Z_,dunningEndDate:Ur.Z_,dunningDeactivationDate:Ur.Z_,campaign:kJ.codec,proCampaign:kJ.codec,bundleProCampaign:kJ.codec,bundleBusinessCampaign:kJ.codec,stripeInvoiceInfo:xJ.codec,countryCode:Ur.Z_,regionCode:Ur.Z_,isUngatedTrialDisabled:Ur.O7,isEligibleForGr4vyMigration:Ur.O7,migratedFromPremium:Ur.O7,paused:Ur.O7,isVoucherActivated:Ur.O7,unpauseInfo:TJ.codec,isGrammarlyProPlan:Ur.O7},"SubscriptionStatus");const RJ=Ur.G0([Ur.i0("NO_ACTIVE_SUBSCRIPTION"),Ur.i0("ON_TRIAL"),Ur.i0("RENEWAL_IN_PROGRESS"),Ur.i0("MOBILE_SUBSCRIPTION"),Ur.i0("NOT_MATURE_ENOUGH")],"ReferrerNotEligibleReason");var DJ,NJ,UJ;(DJ||(DJ={})).codec=Ur.dt({referralLink:Ur.jV([Ur.dt({notEligibleReason:RJ}),Ur.r$({key:Ur.lB})]),canReferUsersStatus:Ur.i0("NOT_ELIGIBLE")},"ReferralInfoNoLink"),(NJ||(NJ={})).codec=Ur.jV([Ur.dt({referralLink:Ur.dt({key:Ur.Z_}),referralRewardsLimit:Ur.pk,referralRewardsReceived:Ur.pk}),Ur.r$({canReferUsersStatus:Ur.G0([Ur.i0("OK"),Ur.i0("NOT_ELIGIBLE_FOR_REWARD")]),rewardNotEligibleReason:Ur.G0([Ur.lB,RJ,Ur.i0("REWARD_LIMIT_EXCEEDED")]),referralHistory:Ur.IX(Ur.dt({refereeName:Ur.Z_,createdAt:Ur.Z_}))})],"ReferralInfoHasLink"),(UJ||(UJ={})).codec=Ur.G0([DJ.codec,NJ.codec],"ReferralInfo");const MJ=class extends Kc.Base{constructor(e,t,n){super(),this._url=e,this._ajaxFactory=t,this._fingerprints=n,this._ajax=this._ajaxFactory({requestExtender:Yc.toHeaderAppender(this._fingerprints)})}static getDefaultUrl(e){return`https://subscription${e}/api/v1`}getStatus(){const e=gl.get(this._url,"/subscription");return this._ajax.json(e)}checkStatus(){const e=gl.post(this._url,"/subscription");return this._ajax.json(e)}getIndividualStatus(){const e=gl.get(this._url,"/individual-subscription");return this._ajax.json(e)}getFrozenProSubscriptionStatus(){const e=gl.get(this._url,"/subscriptions/frozen/grammarly-pro");return this._ajax.json(e)}getIndividualPlans(e){const t=gl.get(this._url,"/individual-plans").queryParam("billingCountryCode",e);return this._ajax.json(t)}getInstitutionalPlans(e){const t=gl.get(this._url,"/institutional-plans").queryParam("billingCountryCode",e);return this._ajax.json(t)}cancelSubscription(){const e=gl.post(this._url,"/cancel");return this._ajax.empty(e)}renewSubscription(){const e=gl.post(this._url,"/renew");return this._ajax.empty(e)}ackPremiumConversion(){const e=gl.post(this._url,"/ack-premium-conversion");return this._ajax.empty(e)}generateClientToken(){const e=gl.post(this._url,"/token/generateClientToken");return this._ajax.json(e)}getAvailablePlans(){const e=gl.get(this._url,"/pricing");return this._ajax.json(e)}changePlan(e){const t=gl.post(this._url,"/set-plan").pathParam(e.toString());return this._ajax.empty(t)}changeCurrentPlan(e){const t=gl.post(this._url,"/hard-change-plan").pathParam(e.toString());return this._ajax.empty(t)}subscribe(e,t,n,r,i,o){const s=gl.post(this._url,"/subscribe").formParam("nonce",t).formParam("planId",e.toString()).formParam("sessionId",n);return r&&s.formParam("billingZip",r),i&&s.formParam("billingCountryCode",i),o&&s.formParam("billingRegionCode",o),this._ajax.empty(s)}getSetupStatus(e){const t=gl.get(this._url,`/setup/${e}`);return this._ajax.json(t)}subscribeCard(e,t,n,r){return this.subscribe(e,t,n,r)}subscribeCardSandbox(e="1"){const t=gl.post(this._url,"/subscribe").formParam("planId",e).formParam("nonce","fake-valid-nonce").formParam("sessionId","test-session").formParam("billingZip","12345");return this._ajax.empty(t)}updateCreditCard(e,t,n,r){const i=gl.post(this._url,"/update-card").formParam("nonce",e);return t&&i.formParam("billingZip",t),n&&i.formParam("billingCountryCode",n),r&&i.formParam("billingRegionCode",r),this._ajax.empty(i)}generateTokenPaypal({cancelUrl:e,returnUrl:t}){const n=gl.post(this._url,"/token/paypal").formParam("cancelUrl",e).formParam("returnUrl",t);return this._ajax.json(n)}downloadSingleReceipt(e){const t=gl.get(this._url,`/receipt/${e}`);return this._ajax.file(t)}downloadBillingReceipts(){const e=gl.get(this._url,"/receipt");return this._ajax.file(e)}downloadSingleProReceipt(e){const t=gl.get(this._url,`/grammarly-pro/receipt//${e}`);return this._ajax.file(t)}downloadProBillingReceipts(){const e=gl.get(this._url,"/grammarly-pro/receipt");return this._ajax.file(e)}setCompanyInfo(e){const t=gl.post(this._url,"/set-company-info").formParam("companyInfo",e);return this._ajax.empty(t)}setProCompanyInfo(e){const t=gl.post(this._url,"/grammarly-pro/set-company-info").formParam("companyInfo",e);return this._ajax.empty(t)}getProCompanyInfo(){const e=gl.get(this._url,"/grammarly-pro/company-info");return this._ajax.json(e)}subscribeNewInstitution(e){return this._subscribeNewInstitutionInternal(e)}setupTrial(e){const t=gl.post(this._url,"/setup/trial").json(e);return this._ajax.json(t)}getSetupTrialStatus(e){const t=gl.get(this._url,`/setup/trial/payment-methods/${e}`);return this._ajax.json(t)}sendInvoice(e){return this._subscribeNewInstitutionInternal({...e,stripeInvoice:!0})}subscribeNewInstitutionForNgo(e){return this._subscribeNewInstitutionInternal(e)}subscribeNewInstitutionUsingIndividualPremium(e){return this._subscribeNewInstitutionInternal(e)}isEligibleForBusinessTrial(){const e=gl.get(this._url,"/is-eligible-for-business-trial");return this._ajax.json(e)}getInstitutionPlans(){const e=gl.get(this._url,"/get-institution-plans");return this._ajax.json(e)}getInstitutionPlansForNgo(){const e=gl.get(this._url,"/get-institution-plans-for-ngo");return this._ajax.json(e)}isVoucherValid(e){const t=gl.get(this._url,"/voucher",e,"valid");return this._ajax.empty(t)}applyVoucher(e){const t=gl.post(this._url,"/voucher",e,"apply");return this._ajax.empty(t)}getPaymentHistory(){const e=gl.get(this._url,"/payment-history");return this._ajax.json(e)}updateInstitutionSeats({numberOfSeats:e}){const t=gl.post(this._url,"/set-number-of-seats").formParam("numberOfSeats",e.toString());return this._ajax.empty(t)}updateInstitutionPlan({numberOfSeats:e,plan:t}){const n=gl.post(this._url,"/change-institution-subscription");return e&&n.formParam("numberOfSeats",e.toString()),t&&n.formParam("plan",t.toString()),this._ajax.empty(n)}getAdjustedVolumePricing(e){const t=gl.get(this._url,"/volume-adjust-pricing").pathParam(e.toString());return this._ajax.json(t)}getInstitutionAdjustedPricing(e,t){const n=gl.get(this._url,"/institution-subscription-adjust-pricing").queryParam("numberOfSeats",e.toString()).queryParam("plan",t.toString());return this._ajax.json(n)}isPaymentMethodExpired(){const e=gl.get(this._url,"/isPaymentMethodExpired");return this._ajax.json(e)}getIndividualPaymentHistory(){const e=gl.get(this._url,"/individual/payment-history");return this._ajax.json(e)}getProPaymentHistory(){const e=gl.get(this._url,"/grammarly-pro/payment-history");return this._ajax.json(e)}requestRefund(){const e=gl.post(this._url,"/individual-subscription/refund");return this._ajax.empty(e)}requestFrozenProSubscriptionRefund(){const e=gl.post(this._url,"subscriptions/frozen/grammarly-pro/refund");return this._ajax.empty(e)}validateUSZipCode(e){const t=gl.post(this._url,"/zip-code/validate").json({zipCode:e});return this._ajax.json(t)}sendInvoiceDraft(e){const t=gl.post(this._url,"/submit-draft-invoice");return Object.entries(e).forEach((([e,n])=>t.formParam(e,n))),this._ajax.empty(t)}getInvoiceDraft(){const e=gl.get(this._url,"/get-draft-invoice");return this._ajax.json(e)}voidDraftInvoice(){const e=gl.post(this._url,"void-unpaid-invoice");return this._ajax.empty(e)}getCountriesConfiguration(){const e=gl.get(this._url,"/country-config");return this._ajax.json(e)}getTaxInformation(e,t,{billingPostalCode:n,billingRegionCode:r,numberOfSeats:i}={}){const o=gl.get(this._url,"/tax-info").queryParam("planId",e.toString()).queryParam("billingCountryCode",t);return n&&o.queryParam("billingZip",n),r&&o.queryParam("billingRegionCode",r),i&&o.queryParam("numberOfSeats",i.toString()),this._ajax.json(o)}getOrderStatus(e){const t=gl.get(this._url,`/order/${e}`);return this._ajax.json(t)}getReferralInfo(){const e=gl.post(this._url,"/referrals/info");return this._ajax.json(e)}createOrder(e,t,n,r){const i=gl.post(this._url,"/order/individual").formParam("planId",e.toString()).formParam("billingCountryCode",t);return void 0!==n&&i.formParam("billingZip",n),void 0!==r&&i.formParam("billingRegionCode",r),this._ajax.json(i)}createInstitutionalOrder({planId:e,volume:t,institutionName:n,countryCode:r,postalCode:i,regionCode:o,specialOfferName:s}){const a=gl.post(this._url,"/order").formParam("planId",e.toString()).formParam("volume",t.toString()).formParam("institutionName",n).formParam("billingCountryCode",r);return void 0!==i&&a.formParam("billingZip",i),void 0!==o&&a.formParam("billingRegionCode",o),void 0!==s&&a.formParam("specialOfferName",s),this._ajax.json(a)}updatePaymentMethod(e,t,n){const r=gl.post(this._url,"/setup/payment-methods").json({billingCountry:e,billingPostalCode:t,billingRegion:n});return this._ajax.json(r)}getPaymentMethodUpdateStatus(e){const t=gl.get(this._url,`/setup/update/payment-methods/${e}`);return this._ajax.json(t)}pauseSubscription(e){const t=gl.post(this._url,`/subscriptions/pause?periodMinutes=${e}`);return this._ajax.empty(t)}unpauseSubscription(){const e=gl.post(this._url,"/subscriptions/unpause");return this._ajax.empty(e)}cancelUnPauseSubscription(){const e=gl.post(this._url,"/subscriptions/cancel-unpausing");return this._ajax.empty(e)}checkAppleSubscribeEligibility(){const e=gl.post(this._url,"/apple/is-subscribe-eligible");return this._ajax.json(e)}checkAppleTrialEligibility(e){const t=gl.post(this._url,"/apple/get-trial-eligibility").body(e).mime(nl.MimeType.txt);return this._ajax.json(t)}subscribeWithAppleReceipt(e,t){const n=gl.post(this._url,`/apple/subscribe-apple-receipt?priceLocale=${e}`).body(t).mime(nl.MimeType.txt);return this._ajax.json(n)}_subscribeNewInstitutionInternal(e){const t=gl.post(this._url,"/subscribe-new-institution").formParam("institutionName",e.institutionName).formParam("numberOfSeats",e.numberOfSeats.toString());return"sessionId"in e&&e.sessionId&&t.formParam("sessionId",e.sessionId),"billingCountryCode"in e&&e.billingCountryCode&&t.formParam("billingCountryCode",e.billingCountryCode),"billingRegionCode"in e&&e.billingRegionCode&&t.formParam("billingRegionCode",e.billingRegionCode),"billingZip"in e&&e.billingZip&&t.formParam("billingZip",e.billingZip),"nonce"in e&&e.nonce&&t.formParam("nonce",e.nonce),e.planId&&t.formParam("planId",e.planId.toString()),"voxEnabled"in e&&e.voxEnabled&&t.formParam("voxEnabled",e.voxEnabled.toString()),"stripeInvoice"in e&&e.stripeInvoice&&t.formParam("stripeInvoice",e.stripeInvoice.toString()),"brandTonesEnabled"in e&&e.brandTonesEnabled&&t.formParam("brandTonesEnabled",e.brandTonesEnabled.toString()),"specialOfferName"in e&&e.specialOfferName&&t.formParam("specialOfferName",e.specialOfferName.toString()),this._ajax.json(t)}};MJ.targetTag="subscription";let jJ=MJ;class FJ{constructor(e,t){this._log=q.create("SubscriptionService"),this.getSubscriptionStatus=async()=>this._api.get().checkStatus().catch((e=>{throw this._log.error("[SubscriptionService] Unable to fetch subscription status:",e),e})),this.getAppleSubscribeEligibility=async()=>this._api.get().checkAppleSubscribeEligibility().catch((e=>{throw this._log.error("[SubscriptionService] Unable to fetch Apple subscribe eligibility:",e),e})),this.getAppleTrialEligibility=async e=>this._api.get().checkAppleTrialEligibility(e).catch((e=>{throw this._log.error("[SubscriptionService] Unable to fetch Apple trial eligibility:",e),e})),this.subscribeAppleReceipt=async(e,t)=>this._api.get().subscribeWithAppleReceipt(e,t).catch((e=>{throw this._log.error("[SubscriptionService] Unable to subscribe Apple receipt:",e),e})),this._api=(0,h.Vo)((()=>new jJ(e,t.ajaxFactory,t.fingerprints)))}}class LJ{constructor(e,t){this._spec=e,this._extensionApi=t,this._log=q.create("universal.bg.bgPageApp"),this._cookiesHelper=new Sc(this._extensionApi),this._migration=function(e,t){if(cz(e)){const n=Kt();return t.trace("Migrating preferences data..."),e.ensureMigrationCompleted().then((e=>{e===Is.success?(t.trace("Preferences data migration successful!"),n.storageMigrationSucceeded()):t.trace("Preferences data was already migrated or empty.")}),(e=>{t.error("XXX Preferences migration failed",e),n.storageMigrationFailed(e)}))}return Promise.resolve()}(this._extensionApi.preferences,this._log),this._store=new sH(this._extensionApi.preferences,this._migration),this._storeActions=RB(this._store),this._storeState=this._store.view((e=>{var t,n,r,i,o,s,a,c;return{user:null!==(t=e.user)&&void 0!==t?t:qS.defaultUser,settings:null!==(n=e.extensionSettings)&&void 0!==n?n:gw,dynamicConfig:null!==(r=e.dynamicConfig)&&void 0!==r?r:EV,environment:e.environmentState,connection:null!==(i=e.connection)&&void 0!==i?i:{},extensionInstallSource:null!==(o=e.extensionInstallSource)&&void 0!==o?o:"unknown",extensionInstallDate:e.extensionInstallDate,tabs:{active:null!==(s=e.activeTab)&&void 0!==s?s:fw},dapi:null!==(a=e.dapi)&&void 0!==a?a:{},growth:null!==(c=e.growthSettings)&&void 0!==c?c:{}}})),this._disposables=[this._store],this._experimentUpdateRelatedDisposables=[],this._subs=[],this._profiler=new aA,this._config=N(),this._felog=Kt(),this._experimentsUpdated=new xr,this._isAuthenticationOptionsApiEnabled=U.h.create(!1),this._backgroundPageStartEventsLog=[],this._getStartType=async()=>{try{return(await this._extensionApi.sessionStorage.get("isBGInitialized")).isBGInitialized?PV.StartType.wakeUp:(await this._extensionApi.sessionStorage.set({isBGInitialized:!0}),PV.StartType.firstStart)}catch(e){return this._log.error("Cannot store bg start type"),PV.StartType.firstStart}},this.startType=this._getStartType(),this._getUser=()=>this._storeState.view("user").get(),this._gnarInitialized=!1,this._initGnarClient=async()=>{if(!this._gnarInitialized)return this._gnarInitialized=!0,this._log.trace("initGnarClient"),this._profiler.track(Uc,this._spec,(()=>{const e=this._getUser();return e?{userId:e.id,isTest:e.isTest}:null}),!0)}}_recordProgressLog(e,t){this._log.debug(e),this._backgroundPageStartEventsLog.push({message:e,error:t,timestamp:Date.now()})}async _withTimeout(e,t,n,r){let i=!1;return Promise.race([e,(0,Ke.gw)(t).then((()=>(i=!0,n)))]).then((e=>(i&&(this._log.warn(`${r} timed out after ${t}ms, using fallback`),this._felog.bgPage.operationTimeout(r,t)),e)))}get backgroundPageStartLog(){return this._backgroundPageStartEventsLog}async run(){this._recordProgressLog("Starting background page app");const e="firefox"===this._config.bundleInfo.browser;e||this._initGnarClient(),await this._migration,this._recordProgressLog("Migration completed");const t=new Ps(this._extensionApi.preferences);"chrome-mv3"===this._extensionApi.sessionStorage.kind&&(await this._extensionApi.sessionStorage.allowCStoUseSessionStorage(),this._recordProgressLog("allowCStoUseSessionStorage completed"));const n=new xZ(this._store);await this._withTimeout(n.waitForInitialized(),xa(10),void 0,"authSuccessTracker.waitForInitialized"),this._recordProgressLog("AuthSuccessTrackerImpl initialized");const r=nW.create(!je(),this._felog,this._config.appConfig.gnar.appName,this._config.buildInfo.version,this._getUser,this._cookiesHelper,this._storeState.get().dynamicConfig),i=new ZS(this._store),o=new tk((()=>this._cookiesHelper.getCSRFToken(!1).then((e=>null!=e?e:void 0))),(()=>{var e;return xc("ApiService",(null===(e=ZJ().experimentClient)||void 0===e?void 0:e.isGateEnabled(De.TrackContainerIdFailures))?Ac.withTracking:Ac.legacy).then((e=>null!=e?e:""))}),this._config.appConfig.auth.xClientType,this._config.buildInfo.version,this._felog,r,n,this._getUser,this._store,this._isAuthenticationOptionsApiEnabled,i),{experimentClient:s,bgTreatmentService:a,bgGatesService:c}=await(async(e,t,n)=>{const r=new nH(Zq.map((e=>e.name)),e,t,n),i=new rH(r,Yq.map((e=>e.name)),Zq.map((e=>e.name)),e,t,n);return i.initSentLogsStorage&&await i.initSentLogsStorage(),{bgGatesService:r,bgTreatmentService:i,experimentClient:Jq(i,r)}})(t,o,this._felog);if(this._recordProgressLog("ExperimentClient initialized"),Ue()){const e=this._storeState.view("tabs").pipe(Ki.h((e=>""!==e.active.url)),Fr.b(500));if(!Wq(this._storeState.view("growth").get())){const t=Yi.a([e,this._storeState.view("extensionInstallSource"),this._storeState.view("extensionInstallDate")]).subscribe((([e,n,r])=>{const i=this._storeState.view("user").get(),o=this._storeState.view("growth").get(),a=$q(s,n,r,o,e,i,this._config);(e=>"popup_once"===e||"popup_persistent"===e)(a)?this._storeActions.growthSettings.setChromeStoreSignup({timesToShowToolbarPopup:"popup_persistent"===a?3:1,popupType:"chromeStorePopup"}).then((()=>{Nc.chromeStoreSignupToolbarPopupOpen(),ZJ().browserApi.openPopup()})):this._storeActions.growthSettings.setChromeStoreSignup({popupType:void 0}),Wq(o)&&t.unsubscribe()}));this._subs.push(t)}}ZJ().setExperimentClient(s),ZJ().setProductMetricsCSClient(o.oauthClient.getAccessTokenOrRenew.bind(o.oauthClient)),i.registerExperimentClient(s);const l=async(e=!0)=>{try{const t=await a.getTreatment(void 0,e);await s.fetchTreatments(),this._experimentsUpdated.next(!0),this._log.info("experiments updated",t)}catch(e){}},u=await this._withTimeout(Vi($i,this._extensionApi.indexedDB).then(kr.WG).catch((e=>(this._log.error("backendManagedStorageManager creation failed",e),null))),xa(30),null,"backendManagedStorageManager");this._recordProgressLog("backendManagedStorageManager created: "+(u?"success":"timeout/failed"));const d={backendManagedStorageFactory:RG(u,this._store,s),deleteAllBackendStorageIfNeeded:()=>function(e,t,n){if(t.isGateEnabled(De.ExtensionFeatureFlagCAPIClientStorageCleanup)&&null!==e){const t="BackendManagedStorage.clearAllStorage.oneTime";e.clearAllStorage().then((0,Tr.g_)((e=>{n.backendManagedStorage.error(`${t}. ${String(e)}`,e),q.create(t).error(String(e),e)}),(()=>{n.backendManagedStorage.info(`${t}. Success`),q.create(t).info("Success")}))).catch((e=>{n.backendManagedStorage.error(`${t}. Unexpected promise rejection. ${String(e)}`,e),q.create(t).error(String(e),e)}))}}(u,s,this._felog),backendManagedStorageFelogLevel:()=>s.isGateEnabled(De.ExtensionFeatureFlagCAPIClientStorageLogWarnings)?F.WARN:F.ERROR,runCleanupRequests:()=>s.isGateEnabled(De.ExtensionFeatureFlagCAPIClientStorageRunCleanupRequests)},h=await(async(e,t=Ac.legacy,n=500)=>{const r=new Promise((e=>{setTimeout((()=>e(void 0)),n)}));return Promise.race([xc(e,t),r])})("CAPI:start",s.isGateEnabled(De.TrackContainerIdFailures)?Ac.withTracking:Ac.legacy,300),p=new bZ((e=>mZ.create(e,(()=>this._store.view("dynamicConfig").get()),(()=>{var e;return null===(e=this._store.view("extensionSettings").get())||void 0===e?void 0:e.common}),d,this._felog,r,o.fingerprints.accessToken,h)));this._recordProgressLog("DenaliCapiRpcApi created");const g=(e=>{const t=new eJ(e).publicApi,n=ZJ().message;return new vG(new jl(WV.rpcLegacyMessageName,n),new jl(WV.rpcLegacyObservableName,n),t)})(p);this._disposables.push(g),this._disposables.push(p),this._recordProgressLog("CAPI RPC server created and registered"),this._subs.push(Zi.timer(0,Ta(10)).pipe(Ji.n((()=>!s.isGateEnabled(De.StandWithUkraineGrammarlySuspended))),Pr.q(1)).subscribe((async()=>{try{await function(e){const t=gl.get(qe().standWithUkraineBlockedUserPing);return e.ajax.empty(t)}(o),await Nc.standWithUkraineSuspendExtensionInit()}catch(e){q.create("StandWithUkraine").error("Ping error",e)}})),WB(this._cookiesHelper.onUserAuthChange).subscribe((()=>z.refreshUser("changed-user"))),await this._getLoggingSettingsListener(s),this._experimentsUpdated.pipe(Ki.h(Boolean),Qi.P()).subscribe((()=>{V.initWithExperimentClient(s),ru(ZJ().message,this._storeActions.connectorSettings,s,this._felog.connector).then((e=>this._disposables.push(e))),dw(s)&&uw(this._extensionApi.message),s.isGateEnabled(De.AssistantInSidePanel)&&Da(Nc,this._log),s.isGateEnabled(De.AuthenticationOptionsApi)?this._isAuthenticationOptionsApiEnabled.set(!0):this._isAuthenticationOptionsApiEnabled.set(!1),x.setAllDomainsTrackingEnabled(s.isGateEnabled(De.HWRSourceTrackingEverywhere))})),this._experimentsUpdated.pipe(Ki.h(Boolean)).subscribe((()=>{if(this._dispose(this._experimentUpdateRelatedDisposables),s.isGateEnabled(De.ListenToSidePanelClose)&&this._experimentUpdateRelatedDisposables.push(tl({felog:this._felog,denaliCapiRpcApi:p})),s.isGateEnabled(De.BrowserSidePanelEnablement)){Ma({extensionApi:this._extensionApi,log:this._log,store:this._store});const e=(({extensionApi:e,log:t=q.create("listenForAAASettingsChange"),store:n})=>n.view("extensionSettings").view((e=>{var t;return null===(t=null==e?void 0:e.common.alwaysAvailableAssistantSettings)||void 0===t?void 0:t.enabled})).pipe(ro(1),Fr.b(300)).subscribe((()=>{Ma({extensionApi:e,log:t,store:n})})))({extensionApi:this._extensionApi,log:this._log,store:this._store});this._experimentUpdateRelatedDisposables.push({dispose:()=>{e.unsubscribe()}})}}))),this._recordProgressLog("Subscriptions created"),this._recordProgressLog("Creating services...");const f=new zw(this._config.appConfig.url.settingsRegistryApi,o),m=new cH(f,(()=>{var e;return null!==(e=this._getUser())&&void 0!==e?e:void 0}),this._extensionApi,s,new pH(this._store)),b=new HB(this._config.appConfig.url.dialect,o,this._storeActions,this._felog),y=new LB(this._config.appConfig.url.dapi,this._store,this._storeActions,this._cookiesHelper,o,this._felog),_=new El(this._config.appConfig.url.cheetahSettings,this._storeActions,this._store,o,this._felog),v=new _w(this._config.appConfig.url.knowledgeHubApi,this._storeActions,this._store,o,(()=>this._getUser()),this._felog),w=new Er.x;var S;this._experimentsUpdated.pipe(Ki.h(Boolean),Pr.q(1),Gr.U((()=>ve(s))),Ki.h(Boolean),(S=w,(0,zr.e)((function(e,t){(0,Br.Xf)(S).subscribe((0,Vr.x)(t,(function(){return t.complete()}),eo.Z)),!t.closed&&e.subscribe(t)}))),Lr.w((()=>new bi.y((()=>{try{const e=new Pa({experimentClient:s,agentsFeatureBgActions:this._storeActions.agents,agentsFeatureState:this._storeState.view((e=>{var t;return null!==(t=e.settings.common.agentsFeature)&&void 0!==t?t:Sa})),activeTabId:this._storeState.view("tabs","active","id").view(String),messageBusTelemetryConfig:this._storeState.view((e=>e.dynamicConfig.agentsMessageBusTelemetry))});return()=>e.dispose()}catch(e){return this._felog.agents.bg.error("AgentsBackgroundIntegration error",e),Ir.Q1}}))))).subscribe();const k=new Vw,I=new YB(this._config.appConfig.url.institutionAdminApi,o),C=new FJ(this._config.appConfig.url.subscriptionApi,o);if(this._extensionApi.initNetworkServiceHandler){const e=new IZ(C);this._extensionApi.initNetworkServiceHandler(e),this._recordProgressLog("NetworkServiceHandler initialized")}const E=new iu({storeActions:this._storeActions}),A=new Eu((()=>this._getUser()),o),x=new Au(this._storeActions,A.settings),T=new nk(this._config.appConfig.url.specialOffer,o),O=new mH(this._config.appConfig.url.uphookHub,o,fetch,(()=>{var e;return null===(e=this._getUser())||void 0===e?void 0:e.id})),P=new wZ(this._config.appConfig.url.dataSharing,o,this._store,this._storeActions,s),R=new BZ(new HZ(this._store),new Rw(m),this._store,t),D=new ZZ(this._config.appConfig.url.passport,o,this._storeActions.passport,this._felog),N=new zZ(R),U=new Hq(y,_,b,v,this._felog,ZJ().productMetricsClient,this._cookiesHelper,(e=>{var t;return xc(e,(null===(t=ZJ().experimentClient)||void 0===t?void 0:t.isGateEnabled(De.TrackContainerIdFailures))?Ac.withTracking:Ac.legacy)}),(()=>l(!0)),this._storeActions,this._store,s,o,D,P,I),M=new SZ(s),j=new az(this._config.appConfig.url.mise,o.ajax.json,M,this._store,this._storeActions),L=new zV(s),G=new sz(o.ajaxFactory({}).json,j,s,L),B=new fu((()=>this._store.get(["alarms"]).then((e=>e.alarms))),(e=>this._storeActions.base.setAlarms(e)));this._recordProgressLog("Services created, initializing side effects...");const z=new Gq,V=new Bq(this._extensionApi,this._store,z,B,o,this.startType);this._recordProgressLog("SideEffectManager created"),((e,t,n)=>{const r=()=>t().then((e=>e.dynamicConfig));(0,ao.iR)("showDynamicConfig",(async()=>console.log(K({},await r()||{})))),(0,ao.iR)("overrideDynamicConfig",(async t=>{const n=await r();if(!n)throw new Error("dynamicConfig is empty");await e.setDynamicConfig(K({},n,t,{source:pz.localOverride})),console.warn("Page Config updated. It will be reset with the next refresh from the server! The new dynamicConfig is",K({},await r()||{}))})),(0,ao.iR)("resetDynamicConfig",(async()=>{const i=await t();await TV(i,e,n),console.warn("Page Config was reset to the server state. The new dynamicConfig is",await r())}))})(this._storeActions.base,(()=>this._store.getAll()),m);const H=new xw,W=new Fw(H,N.get);var $,X,Y,Z,J;V.register(DV(this._felog,this._initGnarClient,ZJ().productMetricsClient,this._storeActions.base,(e=>{var t;return xc(e,(null===(t=ZJ().experimentClient)||void 0===t?void 0:t.isGateEnabled(De.TrackContainerIdFailures))?Ac.withTracking:Ac.legacy)})),((e,t)=>gu.bgFirstStart(pu.fsmInit,(async n=>{var r;const{extensionFSM:i,version:o,connection:s}=n.state;"installed"===(null!==(r=null==i?void 0:i.stage)&&void 0!==r?r:"installed")&&(e?void 0!==o&&void 0!==s&&s.dataControl!==NV.active?await t.setFSM({stage:"ready",trackingEnabled:!(null==s?void 0:s.disableDataTracking)}):await t.setFSM({stage:"data_control"}):await t.setFSM({stage:"ready",trackingEnabled:!0}))})))(e,this._storeActions.base),(J=this._extensionApi,gu.storeChange(pu.openDataControl,hu.isDataControl,(()=>{var e;return null===(e=J.openDataControl)||void 0===e?void 0:e.call(J)}))),(Z=this._storeActions.connection,gu.storeChange(pu.checkOnline,(e=>{var t;return hu.isStoreChange(e)&&void 0!==(null===(t=e.change.connection)||void 0===t?void 0:t.newValue)}),(async e=>{var t;const n=null===(t=e.change.connection)||void 0===t?void 0:t.newValue;if(!n)return;const r=n.online,i=function(e,t){return["networkOffline","bgNotConnected","authToCapiDegradation"].map((t=>e[t]))}(n),o=i.every((e=>!e));r!==o&&await Z.modifyConnection({online:o})}))),(e=>gu.bgFirstStart(pu.connectionInit,(t=>{t.state.connection||e.initConnection()})))(this._storeActions.connection),(e=>gu.compose(gu.createEffect(pu.userUpdateOnBgInit,du.bgFirstStart,(e=>{var t;return hu.isBgFirstStart(e)&&"ready"===(null===(t=e.state.extensionFSM)||void 0===t?void 0:t.stage)})),gu.storeChange(pu.userUpdateOnFSMChangeReady,hu.isReady),gu.refreshUser(pu.userUpdateOnEmitRefresh),gu.alarm(pu.userUpdateOnAlarm,{name:lu.refreshUser,periodInMinutes:240,execRandomly:!0,isDefault:!0}))((async t=>{const n=hu.isRefreshUser(t)?t.reason:void 0,r=hu.isRefreshUser(t)?t.isSignUp:void 0;await e.update({reason:n,eventType:t.type,useCache:!n,isSignUp:r})})))(U),(e=>{const t=new Er.x;return e.initUserInfoReporter&&e.initUserInfoReporter(t.asObservable()),gu.storeChange(pu.safariUserInfoReporter,hu.isUserSwitched,(e=>{var n;(null===(n=e.change.user)||void 0===n?void 0:n.newValue)&&t.next(e.change.user.newValue)}))})(this._extensionApi),((e,t,n)=>gu.compose(gu.createEffect(pu.dynamicConfigInit,du.bgFirstStart,(e=>hu.isBgFirstStart(e)&&!!e.state.alarms&&!!e.state.alarms[lu.refreshDynamicConfig]&&!e.state.dynamicConfig)),gu.createEffect(pu.dynamicConfigInit,du.bgWakeUp,(e=>hu.isBgWakeUp(e)&&!!e.state.alarms&&!!e.state.alarms[lu.refreshDynamicConfig]&&!e.state.dynamicConfig)),gu.alarm(pu.dynamicConfigAlarm,{name:lu.refreshDynamicConfig,delayInMinutes:0,periodInMinutes:5}),gu.storeChange(pu.dynamicConfigUserSwitch,hu.isUserSwitched))((async({state:r})=>{const i=await TV(r,e,t);null!==i&&i.refreshExperimentsInterval&&n.update(lu.refreshUser,{periodInMinutes:60*i.refreshExperimentsInterval,execRandomly:!0,isDefault:!0})})))(this._storeActions.base,m,B),((e,t,n)=>gu.storeChange(pu.renderBadge,hu.isStoreChange,(r=>LV.render(r.state,e,t,n))))(this._extensionApi.button,N.get,s),((e,t)=>gu.storeChange(pu.updateUninstallUrl,hu.isStoreChange,(n=>{var r;const{state:i,change:o}=n,{activeTab:s,user:a,extensionSettings:c}=i,l=void 0!==o.extensionSettings,u=void 0!==o.user;if(!l&&!u)return;if(!s)return;const d=Ct(s.url),h=BV(t,a,c);null===(r=e.setUninstallURL)||void 0===r||r.call(e,nA(d,h))})))(this._extensionApi,s),((e,t,n,r)=>gu.activeTabChange(pu.activeTabChange,(async i=>{var o;const{tab:s,state:a}=i,{activeTab:c,user:l,environmentState:u,extensionSettings:d}=a;if(!c||c.id!==s.id||c.url!==s.url){await e.setActiveTab(s);const i=Ct(s.url),a=BV(r,l,d);if(null===(o=t.setUninstallURL)||void 0===o||o.call(t,nA(i,a)),d&&l){const e=Ct(s.url),t=n(e,s.url);Mc("tab-connected",{user:l,enabledByUserSettings:Nw(d,e).enabled,enabledForDomain:t.enabled,isGrammarlyEditorPage:t.grammarlyEditor,environmentState:u})}else q.create("universal.bg.sideEffects.getActiveTabChangeSideEffect").warn("Cannot track tab-connected as there is no enough data")}})))(this._storeActions.tabs,this._extensionApi,N.get,s),UV(U,this._cookiesHelper,this._storeActions,o,this._felog),(X=this._storeActions.settings,Y=this._felog,gu.storeChange(pu.reminderNotificationUpdate,hu.isUserSwitched,(async e=>{var t,n,r,i,o,s,a,c,l,u;const d=null===(t=e.change.user)||void 0===t?void 0:t.newValue,h=null===(n=e.change.user)||void 0===n?void 0:n.oldValue,p=!0===(null==d?void 0:d.anonymous);(null===(i=null===(r=e.state.extensionSettings)||void 0===r?void 0:r.common)||void 0===i?void 0:i.showLoginReminder)&&!p&&await X.hideLoginReminder(),p&&!(null===(s=null===(o=e.state.extensionSettings)||void 0===o?void 0:o.common)||void 0===s?void 0:s.loginReminderDisabled)&&(!h||(null===(c=null===(a=e.state.extensionSettings)||void 0===a?void 0:a.common)||void 0===c?void 0:c.showOnboarding)||(null===(u=null===(l=e.state.extensionSettings)||void 0===l?void 0:l.common)||void 0===u?void 0:u.showLoginReminder)||(0,Ir.zG)(fB.fromUserType(qS.getType(h)),Tr.g_((e=>Y.loginReminderCanceled(e)),(async e=>{await X.showLoginReminder(e),Nc.loginReminderBadgeShow(),Y.loginReminderBadgeShow()}))))}))),(e=>gu.storeChange(pu.pageConfigUpdateFromCDN,hu.isUserSwitched,(()=>e.forceInvalidate())))(N),(e=>gu.bgWakeUp(pu.pageConfigInit,(()=>e.init())))(N),((e,t,n)=>gu.bgFirstStart(pu.desktopIntegrationInit,(async r=>{var i;try{const o=await(null===(i=null==n?void 0:n.get("GrammarlyExtensionMode"))||void 0===i?void 0:i.then((([e])=>e))),{extensionSettings:s}=r.state,a=null==s?void 0:s.common.desktopIntegrationExtensionMode;if((o||a)&&await e.setDesktopIntegrationExtensionMode(o),o)return await e.setLlamaInstalled(),void(a!==o&&await e.setDesktopIntegration("full"!==o));a&&await e.setLlamaUninstalled();const c=await t.getLlamaInstalled(),l=(null==s?void 0:s.common.isLlamaInstalled)||(null==s?void 0:s.common.isDesktopIntegrationEnabled);c&&c.value?(await e.setLlamaInstalled(),l||Nc.desktopIntegrationEnabled("initialization")):l&&await t.setLlamaInstalled()}catch(e){}})))(this._storeActions.settings,this._cookiesHelper,this._extensionApi.managedStorage),(e=>gu.bgFirstStart(pu.settingsInit,(t=>{t.state.extensionSettings||e.setInitial()})))(this._storeActions.settings),((e,t,n,r,i,o)=>gu.bgFirstStart(pu.legacyBgFirstStart,(async()=>{const s=new aA;await s.trackAsync(DG,e,t,n,r,i.settings.showOnboarding,await async function(e){const t=e.managedStorage;if(void 0===t)return!1;const[n]=await t.get("GrammarlyEnrollmentToken");return void 0!==n}(e),o),s.track((()=>{PE(e,n,$e())})),s.track((()=>{RE(e,n)})),await mE.initialEnable(i,r,e,o)})))(this._extensionApi,t,N,this._cookiesHelper,this._storeActions,this._store),(e=>gu.bgWakeUp(pu.trackingSetUserOnBgWakeUp,(t=>{t.state.user&&Mc("session-invalidate",t.state.user,void 0,void 0,t.state.extensionInstallDate,e.isGateEnabled(De.TrackInstitutionIdToGnar))})))(s),jq(G,j,L,this._config.bundleInfo.browser,s),($=e=>l(e),gu.createEffect(pu.userUpdateOnBgInit,du.bgWakeUp,(e=>{var t;return hu.isBgWakeUp(e)&&"ready"===(null===(t=e.state.extensionFSM)||void 0===t?void 0:t.stage)}))((async({state:e})=>{var t,n;const r=null===(n=null===(t=e.dynamicConfig)||void 0===t?void 0:t.manakin)||void 0===n?void 0:n.fetchTreatmentsOnWakeUp;r&&r.enabled&&await $(r.clearCache)}))),...null!==u?[Fq(u,this._felog)]:[],Lq(this._cookiesHelper,this._felog),Ow(H,s,this._felog.serviceAvailability),((e,t)=>[gu.storeChange(pu.viewDurationTracking,Mw,(n=>{Ew.isViewEnabled(t)&&e.handleStateChange(n.state)})),gu.windowOrActiveTabChange(pu.viewDurationTracking,(n=>{var r;Ew.isViewEnabled(t)&&e.handleDomainChange(n.state,null===(r=n.tab)||void 0===r?void 0:r.url)}))])(W,s),yu(ae(E).setVBarTypesActivated,this._store.view("dynamicConfig").get(),this._felog,(()=>!0)),gu.storeChange(pu.aaaCleanupChatHistory,hu.isUserSwitched,(async e=>{var t,n;const r=null===(t=e.change.user)||void 0===t?void 0:t.newValue,i=null===(n=e.change.user)||void 0===n?void 0:n.oldValue,o=(null==r?void 0:r.id)!==(null==i?void 0:i.id);if((null==r?void 0:r.id)&&o){const e=new gJ(r);await e.deleteAllExceptCurrentUser()&&Kt().alwaysAvailableAssistant.chatsDeleted(),e.dispose()}})),rJ(o),gu.storeChange(pu.brandingChange,hu.isStoreChange,(e=>{var t,n,r,i,o,s,a,c,l,u,d,h;const p=(null===(n=null===(t=e.change.user)||void 0===t?void 0:t.newValue)||void 0===n?void 0:n.go_experience)!==(null===(i=null===(r=e.change.user)||void 0===r?void 0:r.oldValue)||void 0===i?void 0:i.go_experience),g=(null===(c=null===(a=null===(s=null===(o=e.change.extensionSettings)||void 0===o?void 0:o.newValue)||void 0===s?void 0:s.common)||void 0===a?void 0:a.alwaysAvailableAssistantSettings)||void 0===c?void 0:c.enabled)!==(null===(h=null===(d=null===(u=null===(l=e.change.extensionSettings)||void 0===l?void 0:l.oldValue)||void 0===u?void 0:u.common)||void 0===d?void 0:d.alwaysAvailableAssistantSettings)||void 0===h?void 0:h.enabled);(p||g)&&ZJ().message.sendTo("popup",$L.Kind.brandingChanged,{})}))),V.init();const Q=((e,t,n,r)=>{const i=()=>{GV().then((e=>{if(e)return r()})).then((r=>r?LV.render(r,e,t,n):void 0)).catch((()=>{}))};return ZJ().message.on(MV,i),()=>{ZJ().message.off(MV,i)}})(this._extensionApi.button,N.get,s,(()=>this._store.getAll()));this._disposables.push({dispose:Q});const ee=ZJ().message;this._recordProgressLog("Starting legacy background page...");const te=await PG(this._extensionApi,this._cookiesHelper,t,this._store,this._storeActions,a,c,N,z,y,o,s,G,_,v,k,I,E,P,x,A,T,O,f,H);this._recordProgressLog("legacyStartBgPage completed"),this._disposables.push({dispose:()=>w.next()},function(e,t,n=e+"-response",r=t.getTopFrameId()){const i=(n,i,o)=>{var s;if(uz(n)&&o){const i=JSON.stringify([null!==(s=o.frameId)&&void 0!==s?s:null,n.clientId]);t.sendTo({tabId:o.tabId,frameId:r},e,{...n,clientId:i})}},o=(e,r,i)=>{if(uz(e)&&i){const[r,o]=JSON.parse(e.clientId);t.sendTo({tabId:i.tabId,frameId:r},n,{...e,clientId:o})}};return t.on(e,i),t.on(n,o),{dispose(){t.off(e,i),t.off(n,o)}}}("iframehost",ee),hz("iframeintegration",ee),hz("iframeintegration-observable",ee),te,{dispose:()=>null==u?void 0:u.dispose()},x),this._recordProgressLog("Background page app started successfully")}async _getLoggingSettingsListener(e){const t=await this._withTimeout(this._extensionApi.sessionStorage.get("isBGInitialized"),xa(5),{isBGInitialized:!1},"sessionStorage.get(isBGInitialized)"),n=Yi.a([this._store.view("extensionSettings").view((e=>{var t,n;return null!==(n=null===(t=null==e?void 0:e.common)||void 0===t?void 0:t.historyLoggerEnabledUntil)&&void 0!==n?n:null})),this._store.view("extensionSettings").view((e=>{var t,n;return null!==(n=null===(t=null==e?void 0:e.common)||void 0===t?void 0:t.advancedHistoryLoggerEnabledUntil)&&void 0!==n?n:null})),Zi.timer(0,Ta(1))]).pipe(to.M(this._store.view("extensionSettings").view((e=>{var t;return null===(t=null==e?void 0:e.common)||void 0===t?void 0:t.historyLoggerEnabled})),this._store.view("extensionSettings").view((e=>{var t;return null===(t=null==e?void 0:e.common)||void 0===t?void 0:t.advancedHistoryLoggerEnabled}))));return(t.isBGInitialized?n:this._experimentsUpdated.pipe(Qi.P(),Lr.w((()=>n)))).subscribe((([[t,n],r,i])=>{const o=UG(t,e.isGateEnabled(De.ExtensionDebugReport)),s=o&&UG(n);ZJ().enableHistoryLoggerInProd(o,"bgInitialized"),ZJ().enableAdvancedHistoryLoggerInProd(s,"bgInitialized");const a={};s!==i&&(a.advancedHistoryLoggerEnabled=s),o!==r&&(a.historyLoggerEnabled=o),(0,no.Qr)(a)||this._storeActions.settings.patchCommonSettings(a)}))}_dispose(e){for(const t of e)try{t.dispose()}catch(e){this._log.error("error at bg dispose",e)}e.length=0}dispose(){this._dispose(this._experimentUpdateRelatedDisposables),this._dispose(this._disposables),this._subs.forEach((e=>e.unsubscribe()))}}function GJ(e,t){const n=new LJ(e,t);Promise.race([n.run().then((()=>({kind:rW.StartKind.success}))).catch((e=>({kind:iW(e)?rW.StartKind.browserIsShuttingDown:rW.StartKind.error,error:e}))),(0,Ke.gw)(Me()?xa(100):xa(60)).then((()=>({kind:rW.StartKind.timeout})))]).then((async e=>{const t=await n.startType.catch((()=>PV.StartType.unknown));!function(e,t,n,r,i,o){const s=(t,r)=>{const i=(0,OM.fg)(10);e.fail("bg",t,i,r),e.failWithoutUser("bg",t,i,r),n.send({event_name:"crash",dataset_name:"crash",crash_id:i,error_message:r,extra:{failType:t}},{additionalProps:[...PH,...OH]})};switch(i.kind){case rW.StartKind.success:t.bgPage.bgStarted({status:"success",type:r});break;case rW.StartKind.error:q.create("universal.bg").error("bg page start fail",i.error),s("bgInitFail",Ye(i.error)?i.error.message:void 0),t.bgPage.bgStarted({status:"fail",reason:"error",type:r,error:i.error});break;case rW.StartKind.browserIsShuttingDown:q.create("universal.bg").error("bg page start fail as browser is shutting down",i.error),t.bgPage.bgStarted({status:"fail",reason:"browserIsShuttingDown",type:r,error:i.error});break;case rW.StartKind.timeout:q.create("universal.bg").error("bg page start fail due to timeout"),s("bgInitTimeout"),t.bgPage.bgStarted({status:"fail",reason:"timeout",type:r,json:o});break;default:(0,h.vE)(i)}}(Nc,Kt(),ZJ().productMetricsClient,t,e,n.backgroundPageStartLog)}))}class BJ extends ZV{constructor(e){super(e),this._api=e,this.sendTo=(e,t,n={})=>{try{if(!e)throw TypeError("emitTo: can't be used without destination point");this._api.sendTo(e,t,n)}catch(e){this._logError(e)}},this.sendToFocusedTab=async e=>{try{return e.kind===WL.Kind.hideGdocsSigninPopupMessage?this._api.toFocused(e.kind,e.option):this._api.toFocused(e.kind,{})}catch(e){this._logError(e)}},this.getTopFrameId=()=>this._api.topFrameId}}const zJ=(e,t)=>`${e}|${t}`,VJ=e=>{const t=e.map((e=>{var t;const n=[...null!==(t=e.labels&&Object.entries(e.labels).filter((([e,t])=>t)).map((([e,t])=>({key:e,value:String(t)}))))&&void 0!==t?t:[]],{type:r,duration:i}=e;return{type:r,value:i,labels:n,report_interval:"1m",name:`extension.duration.${e.metricName}`}}));let n=[];return n=t.filter((e=>"histogram"===e.type)).map((e=>({...e,name:`${e.name}Histogram`,type:"histogram_strikes_back"}))),[...t,...n]},qJ=xa(3);class HJ{constructor(e,t,n){this._browserInfo=e,this._getLogContext=t,this._storageApi=n,this._log=q.create("FEMetricsLoggerImpl"),this._url=qe().vmetrics,this._alarmService=new fu((()=>this._storageApi.get("feMetricsAlarms").then((e=>e.feMetricsAlarms))),(e=>this._storageApi.set({feMetricsAlarms:e}))),this._metricsData={rates:{},startedTimers:{},timers:[]},this._dataSharingEnabled=!Ne(),this._setToBgSessionStorage=(0,h.W3)((()=>{this._storageApi.set({feMetricsData:this._metricsData})}),qJ),(0,ao.iR)("flushFEMetrics",(()=>{this.sendMetrics()})),(0,ao.iR)("showCachedFEMetrics",(()=>{console.info(this._metricsData)})),this._storageApi.get("feMetricsData").then((e=>{e.feMetricsData&&this._updateMetricsData({rates:[...new Set([...Object.keys(e.feMetricsData.rates),...Object.keys(this._metricsData.rates)])].reduce(((t,n)=>{var r;return{...t,[n]:((null===(r=e.feMetricsData)||void 0===r?void 0:r.rates[n])||0)+(this._metricsData.rates[n]||0)}}),{}),timers:[...e.feMetricsData.timers,...this._metricsData.timers],startedTimers:{...e.feMetricsData.startedTimers,...this._metricsData.startedTimers}}),this._alarmService.register(lu.sendFeMetrics,{periodInMinutes:3}),this._alarmService.onAlarm((e=>{e.name===lu.sendFeMetrics&&this.sendMetrics()}))}))}_updateMetricsData(e){this._metricsData=e,this._setToBgSessionStorage()}_getMandatoryLabels(){const e=this._getLogContext();return{userType:e.userType||"unknown",client:e.gnarApplicationName,version:e.version,versionInt:String(tz.versionToInt(e.version))}}sendMetrics(){this._send(),this._updateMetricsData({rates:{},startedTimers:{},timers:[]})}getContextLabels(){var e,t;const n=this._getLogContext();return{firstInstall:n.firstInstall,registrationDate:n.registrationDate,userOrganizationType:n.userOrganizationType,browserVersion:null===(e=this._browserInfo)||void 0===e?void 0:e.browserVersion,browserName:null===(t=this._browserInfo)||void 0===t?void 0:t.browserName,os:this._browserInfo.osName}}logRate(e,t,n,r){const i=tz.metricToKey(e,Object.assign({},t,this._getMandatoryLabels()),r),o=J(n)?n:1;this._updateMetricsData({...this._metricsData,rates:{...this._metricsData.rates,[i]:this._metricsData.rates[i]?this._metricsData.rates[i]+o:o}})}startTimer(e,t,n,r){const i=zJ(e,t);this._updateMetricsData({...this._metricsData,startedTimers:{...this._metricsData.startedTimers,[i]:{metricName:e,startTime:n,labels:r}}})}endTimer(e,t,n,r,i){const o=zJ(e,t);if(this._metricsData.startedTimers[o]){const t=Math.round(n-this._metricsData.startedTimers[o].startTime);this._metricsData.timers.push({metricName:e,duration:t,type:r,labels:{...this._metricsData.startedTimers[o].labels,...i,...this._getMandatoryLabels()}}),delete this._metricsData.startedTimers[o],this._updateMetricsData(this._metricsData)}}logTimer(e,t,n,r){const i=parseFloat(t.toFixed(2));this._updateMetricsData({...this._metricsData,timers:[...this._metricsData.timers,{metricName:e,duration:i,type:n,labels:{...r,...this._getMandatoryLabels()}}]})}_send(){if(!this._dataSharingEnabled)return void this._log.debug("Data sharing is not enabled. Not sending metrics to VM");const e=[...tz.getRatesData(this._metricsData.rates),...VJ(this._metricsData.timers)];e.length>0?(this._log.debug("Sending to VM",e),fetch(this._url,{method:"POST",body:JSON.stringify(e)})):this._log.debug("No metrics to send to VM")}enableDataSharing(){this._dataSharingEnabled=!0}}const WJ=new Map([[Date.now(),ht.lessThan1Week],[Date.now()-Aa(7),ht.weekTo4Weeks],[Date.now()-Aa(28),ht.moreThan4weeks],[Date.now()-Aa(90),ht.moreThan3Months]]);class $J{setUserInfo(e){this._context={...this._context,...{...e,firstInstall:cu(Number(e.extensionInstallDate),WJ)||void 0,userOrganizationType:e.userOrganizationType,registrationDate:"Anonymous"===e.userType?"never":cu(Number(e.registrationDate),WJ)||void 0}}}setContainerId(e){this._context=Object.assign({},this._context,{containerId:e})}getContext(){return this._context}constructor(e,t,n,r){this._baseUrl=e,this._env=t,this._fetch=n,this._context={userId:void 0,containerId:void 0,userType:void 0,firstInstall:void 0,registrationDate:void 0,userOrganizationType:void 0},this._sessionId=As(),this._logEndpoint=`${this._baseUrl}/logv2`,this._crashEndpoint=function(e){return`${e}/crashv2`}(this._baseUrl),this._browserInfo=r.getBrowserInfo(),this._staticPayload={application:this._env.applicationName,version:this._env.version,env:this._env.env,browserInfo:this._browserInfo},this._metrics=new HJ(this._browserInfo,(()=>{const{userType:e,firstInstall:t,registrationDate:n,userOrganizationType:r}=this.getContext();return{userType:e,firstInstall:t,registrationDate:n,userOrganizationType:r,version:this._env.version,gnarApplicationName:this._env.gnarApplicationName}}),r.sessionStorage)}_sendRaw(e,t){return this._fetch(e,{mode:"cors",headers:{"Content-Type":"application/json"},method:"post",cache:"no-cache",body:JSON.stringify(t)}).then((e=>{}),(e=>{}))}sendEvent({hideUserInfo:e,...t}){const n=mt(t,{...this._staticPayload,context:e?void 0:this.getContext()}),r=QE(this._logEndpoint,e?[KE("extended","false")]:[]);return("ERROR"===n.level||n.sendToFemetrics)&&this.sendFemetricsRate(n.level.toLocaleLowerCase(),{logger:n.logger,message:n.femetricsMessage||n.message&&n.message.substring(0,20)||"other",context:n.eventContext,...n.gdocsExtra,...n.femetricsExtra}),this._sendRaw(r,n)}sendCrashLog(e){const t=e.map((e=>mt(e,{...this._staticPayload,sessionId:this._sessionId,context:this.getContext()})));return this._sendRaw(this._crashEndpoint,t)}sendUsageEvent(e,t,n,r){const i=mt({logger:e,message:t,level:n,extra_usage:r},this._staticPayload);return this._sendRaw(this._logEndpoint,i)}sendFemetricsRate(e,t,n,r,i){const o=n?(0,Ir.zG)(this._metrics.getContextLabels(),(0,no.H6)(...n)):{},s=Object.assign({},t,o);this._metrics.logRate(e,s,r,i)}startFemetricsTimer(e,t,n,r){this._metrics.startTimer(e,t,n,r)}endFemetricsTimer(e,t,n,r,i){this._metrics.endTimer(e,t,n,r,i)}sendFemetricsTimer(e,t,n,r){this._metrics.logTimer(e,t,n,r)}sendFemetrics(){this._metrics.sendMetrics()}enableDataSharing(){this._metrics.enableDataSharing()}}function XJ(e,t,n=1){e(t).catch((r=>{n>0&&XJ(e,t,n-1)}))}class KJ{constructor(e,t,n=q.create("lib.tracking.call.service")){this._getGnarClient=e,this._log=n,this._metricEvent=new Er.x,this._shouldSendEvents=!Ne(),this.enableDataSharing=()=>{this._shouldSendEvents=!0,this._felogClient.enableDataSharing()},this.sendFelog=(e,t,n,r)=>{this._shouldSendEvents&&XJ((e=>this._felogClient.sendEvent(e)),{logger:e,message:t,level:n,extra:r})},this.sendFelogEvent=e=>{this._shouldSendEvents&&XJ((e=>this._felogClient.sendEvent(e)),e)},this.sendFelogCrashLogs=e=>{this._shouldSendEvents&&this._felogClient.sendCrashLog(e)},this.sendFelogUsageEvent=(e,t,n,r)=>{this._shouldSendEvents&&XJ((e=>this._felogClient.sendUsageEvent(e.logger,e.message,e.level,e.usage)),{logger:e,message:t,level:n,usage:r})},this.sendFelogMetricEvent=e=>{this._shouldSendEvents&&this._metricEvent.next(e)},this.setUserInfo=e=>{this._felogClient.setUserInfo(e)},this.setContainerId=e=>{this._felogClient.setContainerId(e)},this.sendFemetricsRate=(e,t,n,r,i)=>{this._shouldSendEvents&&this._felogClient.sendFemetricsRate(e,t,n,r,i)},this.startFemetricsTimer=(e,t,n,r)=>{this._shouldSendEvents&&this._felogClient.startFemetricsTimer(e,t,n,r)},this.endFemetricsTimer=(e,t,n,r,i)=>{this._shouldSendEvents&&this._felogClient.endFemetricsTimer(e,t,n,r,i)},this.sendFemetricsTimer=(e,t,n,r)=>{this._shouldSendEvents&&this._felogClient.sendFemetricsTimer(e,t,n,r)},this.sendFemetrics=()=>{this._shouldSendEvents&&this._felogClient.sendFemetrics()},this._felogClient=new $J(qe().newFelog,{applicationName:He(),version:ze(),env:Ve(),gnarApplicationName:We()},ae(self).fetch,t)}call(e,...t){if(this._log.info(e,t),e===oq){const[e,...n]=t;return void(0,this[e])(...n)}const[n,r]=e.split(".");if("gnar"===n){const n=this._getGnarClient();if(n)if("track"===r){const[e,r]=t;n.track({eventName:`${We()}/${String(e)}`,...r})}else if("pingMaybe"===r)n.pingMaybe();else if("setUserWithParams"===r)try{n.setUserWithParams(t[0],t[1])}catch(e){Kt().gnar.errorSetUser(e)}else this._log.error(`gnar client does not have method '${r}' for '${e}' in runMessage`);else this._log.error(`gnar client not available for '${e}' in runMessage`)}else this._log.error(`unrecognized '${e}' in runMessage`)}}class YJ extends he{get productMetricsCSClient(){return this.productMetricsClient}static getInstance(){if(void 0===this._instance)throw new Error("bg Env not inited yet");return this._instance}static init(e){if(void 0!==this._instance)throw new Error("bg Env already inited");const t=new YJ(e);this._instance=t,ue.initShared(t),Yt(),async function(e,t=(()=>{var e;return null===(e=document.location)||void 0===e?void 0:e.reload()})){const n=new Ps(e);if((Le()||Ne())&&(!chrome.extension||!chrome.tabs||!chrome.runtime||!chrome.runtime.onConnect)){const e=await n.get("bgInitFail")||0;e>4?Ms.error(`too many bgInitFail ${e}`):(await n.set("bgInitFail",e+1),t())}}(t.browserApi.preferences),t.browserApi.initCodeSplittingListener&&t.browserApi.initCodeSplittingListener(),GJ(e.gnarSpecClass,t.browserApi)}constructor(e){super({browser:e.browser,extensionType:e.extensionType,deploymentType:e.deploymentType,context:"bg",browserInfo:e.browserApi.getBrowserInfo(),historyLoggerExtraArgs:{isBG:!0,backupStorage:new iq(e.browserApi.sessionStorage,tq.bgHistoryLogs),getExperimentClient:()=>this.experimentClient}}),this.browserApi=e.browserApi,this.message=new BJ(e.browserApi.message),this.telemetryCallProvider=new KJ((()=>gc.gnar),this.browserApi)}get experimentClient(){return this._experimentClient}setExperimentClient(e){this._experimentClient=e}setProductMetricsCSClient(e){const t=N();var n;this.productMetricsClient=new _r(t.appConfig.gnar.ingestionUrl,(e=>({client:e.appConfig.gnar.appName,client_version:e.buildInfo.version,device:{system_name:e.systemInfo.os.name,system_version:e.systemInfo.os.version||"unknown",browser_name:e.systemInfo.browser.name,browser_version:e.systemInfo.browser.version||"unknown",user_agent:e.systemInfo.browser.userAgent}}))(t),e),n=this.productMetricsClient,mc=n}}function ZJ(){return YJ.getInstance()}const JJ="docs.google.com";function QJ(e,t){return(n,r)=>"extensionSettings"===n&&function(e){return!!e&&"object"==typeof e&&"common"in e}(r)?function(e,t,n){const r=e[JJ];if(!1!==(null==r?void 0:r.enabled)||(null==r?void 0:r.forcedEnabledDate_1639893688790))return n(),e;{const{disabledDate:n,...i}=r;return t(n),{...e,[JJ]:{...i,enabled:!0,forcedEnabledDate_1639893688790:Date.now()}}}}(r,e,t):r}function eQ(e){const t=new Map;for(const{isFree:n,cardLayout:{group:r}}of e){t.has(r)||t.set(r,{lensName:r,free:0,premium:0});const e=t.get(r);e&&(e[n?"free":"premium"]+=1)}return Array.from(t.values()).sort(((e,t)=>t.premium-e.premium))}const tQ={TOOLBAR:{DEFAULT:{light:"./src/icon/toolbar/icon",dark:"./src/icon/toolbar/icon",universal:"./src/icon/toolbar/icon"},SUPERHUMAN_GO:{light:"./src/icon/toolbar/superhuman_go/light/icon",dark:"./src/icon/toolbar/superhuman_go/dark/icon",universal:"./src/icon/toolbar/superhuman_go/universal/icon"}},SAFARI:{PREFIX:"./src/icon/toolbar/safari/icon",POSTFIX:"-safari"}};function nQ(e,t){chrome.runtime.lastError?t(chrome.runtime.lastError):e()}class rQ{constructor(){this._log=q.create("extension-api.managed-storage.validator")}validate(e,t){switch(e){case"GrammarlyEnrollmentToken":return"string"==typeof t&&t.length>0&&/^[a-z0-9_-]+$/i.test(t);case"GrammarlyBlockedClients":case"GrammarlyBlockedDomains":return"string"==typeof t;case"GrammarlyConfidentialModeEnabled":case"GrammarlyDlpEnabled":return"boolean"==typeof t;case"GrammarlyExtensionMode":return"string"==typeof t&&("limited"===t||"full"===t);default:return this._log.warn(`Unknown key: ${e}`),!1}}}class iQ{constructor(){this._log=q.create("extension-api.managed-storage.chrome"),this._validator=new rQ}get(e){return Ts.fromPromise(Promise.race([new Promise((t=>{chrome.storage.managed.get(e,(n=>{nQ((()=>{const r=n[e];void 0===r||this._validator.validate(e,r)?t([r]):(this._log.warn(`Invalid value for "${e}": ${JSON.stringify(n[e])}`),t([void 0]))}),(n=>{this._log.error(`Could not get "${e}"`,n),t([void 0,n])}))}))})),new Promise((t=>{setTimeout((()=>{this._log.error(`Manage storage timeout to get "${e}"`),t([void 0,new Error("Manage storage timeout to get access")])}),3e3)}))]))}}var oQ;!function(e){class t{constructor(e,t){this._port=e,this._getErrorMessage=t}onMessage(e){this._port.onMessage.addListener(e)}onDisconnect(e){this._port.onDisconnect.addListener((()=>e(this._getErrorMessage())))}postMessage(e){this._port.postMessage(e)}}e.PortImpl=t,e.createPort=function(e,n){return(0,h.fQ)(e.runtime.connectNative)?new t(e.runtime.connectNative(n),(()=>{var t;return null===(t=e.runtime.lastError)||void 0===t?void 0:t.message})):null}}(oQ||(oQ={}));class sQ{constructor(e,t=q.create("ChromeMV3SessionStorageApiImpl")){this._chromeInstance=e,this._logger=t,this.kind="chrome-mv3",this.get=e=>Ts.create(((t,n)=>{this._chromeInstance.storage.session.get(e,(e=>{nQ((()=>t(e)),n)}))})),this.set=e=>Ts.create(((t,n)=>{this._chromeInstance.storage.session.set(e,(()=>{nQ(t,n)}))})),this.getAll=()=>Ts.create(((e,t)=>{this._chromeInstance.storage.session.get(null,(n=>{nQ((()=>e(n)),t)}))})),this.remove=e=>Ts.create(((t,n)=>{this._chromeInstance.storage.session.remove(e,(()=>{nQ(t,n)}))})),this.removeAll=()=>Ts.create(((e,t)=>{this._chromeInstance.storage.session.clear((()=>{nQ(e,t)}))})),this.onChange=e=>{const t=()=>{this.getAll().then((t=>e(t)))};return this._chromeInstance.storage.session.onChanged.addListener(t),()=>{try{this._chromeInstance.storage.session.onChanged.removeListener(t)}catch(e){this._logger.error("error removing session storage listener",e)}}},this.allowCStoUseSessionStorage=()=>Ts.create(((e,t)=>{var n,r,i,o,s,a;null===(i=null===(r=null===(n=chrome.storage)||void 0===n?void 0:n.session)||void 0===r?void 0:r.setAccessLevel)||void 0===i||i.call(r,{accessLevel:null!==(a=null===(s=null===(o=chrome.storage)||void 0===o?void 0:o.AccessLevel)||void 0===s?void 0:s.TRUSTED_AND_UNTRUSTED_CONTEXTS)&&void 0!==a?a:"TRUSTED_AND_UNTRUSTED_CONTEXTS"},(()=>{nQ(e,t)}))}))}}class aQ{constructor(){this.kind="memory",this._data={},this._listeners=[],this.get=e=>Ts.sync((()=>(Array.isArray(e)?e:[e]).reduce(((e,t)=>({...e,[t]:this._data[t]})),{}))),this.set=e=>Ts.sync((()=>{this._data={...this._data,...e},this._callListeners()})),this.getAll=()=>Ts.sync((()=>this._data)),this.remove=e=>Ts.sync((()=>{(Array.isArray(e)?e:[e]).forEach((e=>{e in this._data&&delete this._data[e]})),this._callListeners()})),this.removeAll=()=>Ts.sync((()=>{this._data={},this._callListeners()})),this.onChange=e=>(this._listeners.push(e),()=>this._listeners.splice(this._listeners.indexOf(e),1))}_callListeners(){this._listeners.forEach((e=>e(this._data)))}}class cQ{constructor(e,t){this._chrome=e,this._manifestVersion=t,this.kind="web-extension",this.executeScript=(e,t,n)=>Ts.create(((r,i)=>{"3"!==this._manifestVersion?this._chrome.tabs.executeScript(t,{file:e,matchAboutBlank:!0,...n?{frameId:Number(n)}:{}},(e=>lQ(null==e?void 0:e[0],r,i))):this._chrome.scripting.executeScript({files:[e],target:{tabId:t,...n?{frameIds:[Number(n)]}:{}}},(e=>{var t;return lQ(null===(t=null==e?void 0:e[0])||void 0===t?void 0:t.result,r,i)}))})),this.executeFunction=(e,t,n)=>Ts.create(((r,i)=>{"3"!==this._manifestVersion?this._chrome.tabs.executeScript(t,{code:`(${e.toString()})()`,matchAboutBlank:!0,...n?{frameId:Number(n)}:{}},(e=>lQ(null==e?void 0:e[0],r,i))):this._chrome.scripting.executeScript({func:e,target:{tabId:t,...n?{frameIds:[Number(n)]}:{}}},(e=>{var t;return lQ(null===(t=null==e?void 0:e[0])||void 0===t?void 0:t.result,r,i)}))})),this.insertCSS=(e,t,n,r)=>Ts.create(((i,o)=>{"3"!==this._manifestVersion?this._chrome.tabs.insertCSS(e,{file:t,code:n,matchAboutBlank:!0,...r?{frameId:Number(r)}:{}},(()=>lQ(void 0,i,o))):this._chrome.scripting.insertCSS({target:{tabId:e,...r?{frameIds:[Number(r)]}:{}},files:t?[t]:void 0,css:n},(()=>lQ(void 0,i,o)))}))}open(e,t){return Ts.create(((n,r)=>{this._chrome.tabs.create({url:e,active:t},(e=>{nQ((()=>n(e)),r)}))}))}create(e){return Ts.create(((t,n)=>{this._chrome.tabs.create(e,(e=>{nQ((()=>t(e)),n)}))}))}remove(e,t){return Ts.fromPromise(this._chrome.tabs.remove(e,t))}updateCurrent(e){return Ts.create(((t,n)=>{this._chrome.tabs.update({url:e},(e=>{nQ((()=>t(e)),n)}))}))}getActiveTab(){return Ts.create(((e,t)=>{const n=this._chrome.tabs;n.query({active:!0,lastFocusedWindow:!0},(r=>{nQ((()=>{r&&r.length?e(r[0]):n.query({active:!0},(n=>{nQ((()=>{e(n[0])}),t)}))}),t)}))}))}getAllTabs(){return Ts.create(((e,t)=>this._chrome.tabs.query({},(n=>nQ((()=>e(n)),t)))))}getActiveTabUrl(){return Ts.create(((e,t)=>this.getActiveTab().then((n=>nQ((()=>e(n&&n.url)),t)))))}getActiveTabZoom(){return Ts.create(((e,t)=>{this.getActiveTab().then((n=>{if(!n||!n.id)return e(void 0);this._chrome.tabs.getZoom(null==n?void 0:n.id).then((n=>{nQ((()=>e(n)),t)}))}))}))}_onActiveTabChange(e){this._chrome.tabs.onActivated.addListener((t=>this._chrome.tabs.get(t.tabId,e))),this._chrome.tabs.onUpdated.addListener(((t,n)=>{this.getActiveTab().then((r=>{r&&r.id===t&&(n.url||n.favIconUrl||"complete"===n.status||n.title)&&this._chrome.tabs.get(t,e)}))}))}_onTabChangeError(e,t,n){n(e),"Tabs cannot be edited right now (user may be dragging a tab)."===(null==e?void 0:e.message)&&setTimeout((()=>{this.getActiveTab().then((e=>{nQ((()=>t(e)),n)}))}),100)}onActiveTabChange(e,t){const n=n=>{nQ((()=>!!n&&e(n)),(n=>this._onTabChangeError(n,(t=>!!t&&e(t)),t)))};this._onActiveTabChange(n),this._chrome.windows.onFocusChanged.addListener((e=>this._chrome.tabs.query({active:!0,windowId:e,lastFocusedWindow:!0},(([e])=>n(e))))),this.getActiveTab().then(n)}onWindowOrActiveTabChange(e,t){const n=n=>{nQ((()=>e(n)),(n=>this._onTabChangeError(n,(t=>e(t)),t)))};this._onActiveTabChange(n),this._chrome.windows.getCurrent().then((r=>{nQ((()=>{r.focused?this.getActiveTab().then(n):e(void 0)}),(n=>{t(n),e(void 0)}))})),this._chrome.windows.onFocusChanged.addListener((t=>{this._chrome.windows.getCurrent().then((r=>{r.focused?this._chrome.tabs.query({active:!0,windowId:t,lastFocusedWindow:!0},(([e])=>n(e))):e(void 0)}))})),this._chrome.windows.onRemoved.addListener((()=>{this._chrome.windows.getCurrent().then((t=>{t.focused?this.getActiveTab().then(n):e(void 0)}))}))}reload(e){return Ts.create(((t,n)=>{const r=()=>nQ((()=>t()),n);e.id?this._chrome.tabs.reload(e.id,{},r):this._chrome.tabs.reload(r)}))}closeCurrentTab(){return Ts.create(((e,t)=>{this.getActiveTab().then((n=>{n&&n.id&&this._chrome.tabs.remove(n.id,(()=>{nQ((()=>e()),t)}))}))}))}focusTab(e){return Ts.create(((t,n)=>{this._chrome.tabs.update(e,{highlighted:!0},(()=>{nQ((()=>t()),n)}))}))}sendMessageToTab(e,t,n){return Ts.create(((r,i)=>{this._chrome.tabs.sendMessage(t,e,{frameId:n},(()=>{nQ((()=>r()),i)}))}))}get onUpdated(){return this._chrome.tabs.onUpdated}get onRemoved(){return this._chrome.tabs.onRemoved}}function lQ(e,t,n){Cs()?n(Cs()):t(e)}var uQ=__webpack_require__(87998);const dQ=e=>e.split(".")[0],hQ=(new Set(["google chrome","microsoft edge","samsung internet","opera"]),(e=self.navigator.userAgent)=>{const t=new uQ.UAParser(e).getResult();return"WebKit"===t.browser.name?(e=>{const t=new uQ.UAParser(e).getResult(),n=/Version\/(\d+)/.exec(e);return{browserName:"Safari",browserVersion:null==n?void 0:n[1],osName:t.os.name||"unknown",osVersion:t.os.version?dQ(t.os.version):void 0,userAgent:e}})(e):{browserName:t.browser.name||"unknown",browserVersion:t.browser.version?dQ(t.browser.version):void 0,osName:t.os.name||"unknown",osVersion:t.os.version?dQ(t.os.version):void 0,userAgent:e}});class pQ{get button(){const e=this._action;return{kind:"web-extension",setBadge(t){e.setBadgeText({text:t})},setIconByName(t,n,r="universal"){const{prefix:i,postfix:o}=function(e,t,n="universal"){return{prefix:t?tQ.TOOLBAR.SUPERHUMAN_GO[n]:tQ.TOOLBAR.DEFAULT[n],postfix:e?"-"+e:""}}(t,n,r);e.setIcon({path:{16:`${i}16${o}.png`,32:`${i}32${o}.png`}})},setTitle(t){e.setTitle({title:t})},setBadgeBackgroundColor(t){e.setBadgeBackgroundColor({color:t})}}}get baseUri(){var e;return null!==(e=this._baseUrl)&&void 0!==e?e:chrome.runtime.getURL("")}getBrowserInfo(e=self.navigator.userAgent){return hQ(e)}constructor(e,t,n,r){var i;this.preferences=e,this.message=t,this.tabs=n,this._manifestVersion=r,this._isManifestV3="3"===this._manifestVersion,this._action=this._isManifestV3?chrome.action:chrome.browserAction,this.managedStorage=new iQ,this.sessionStorage=this._isManifestV3&&(null===(i=chrome.storage)||void 0===i?void 0:i.session)?new sQ(chrome):new aQ,this.thirdPartyExtensionsInstalled={},this.notification={kind:"web-extension",create:e=>Ts.create(((t,n)=>{const r=chrome.notifications,i=As();r.create(i,Object.assign({type:"basic"},e),(()=>{nQ((()=>{const e=new bi.y((e=>{const t=t=>t===i&&e.next(t);return r.onClicked.addListener(t),()=>r.onClicked.removeListener(t)})),n=new bi.y((e=>{const t=(t,n)=>t===i&&e.next({id:t,buttonIndex:n});return r.onButtonClicked.addListener(t),()=>r.onButtonClicked.removeListener(t)})),o=new bi.y((e=>{const t=(t,n)=>t===i&&e.next({id:t,byUser:n});return r.onClosed.addListener(t),()=>r.onClosed.removeListener(t)}));t({id:i,click:e,buttonClick:n,close:o})}),n)}))})),clear:e=>Ts.create(((t,n)=>{chrome.notifications.clear(e,(e=>{nQ((()=>t(e)),n)}))}))},this.cookies={kind:"web-extension",get:e=>Ts.create(((t,n)=>chrome.cookies.get(e,(e=>nQ((()=>t(e)),n))))),remove:e=>Ts.fromPromise(new Promise(((t,n)=>chrome.cookies.remove(e,(()=>nQ((()=>t(null)),n)))))),getAll:e=>Ts.create(((t,n)=>chrome.cookies.getAll(e,(e=>nQ((()=>t(e)),n))))),set:e=>Ts.create(((t,n)=>chrome.cookies.set(e,(e=>nQ((()=>t(e)),n))))),watch(e,t){const n=n=>{const{cookie:r,cause:i}=n;!r||!r.name||e.path&&e.path!==r.path||e.name!==r.name||e.domain&&-1===r.domain.indexOf(e.domain)||("explicit"===i&&t(r),"expired_overwrite"===i&&t())};return chrome.cookies.onChanged.addListener(n),()=>chrome.cookies.onChanged.removeListener(n)},getChanges(e){return new bi.y((t=>this.watch(e,(e=>t.next(e)))))}},this.management={uninstallSelf(){chrome.management.uninstallSelf()}},this._baseUrl=(0,h.DV)((()=>chrome.runtime.getURL("")),(e=>null)),this.permissions=chrome.permissions?{watchAdded:e=>{chrome.permissions.onAdded.addListener(e)},added:new bi.y((e=>{const t=t=>{e.next(t)};return chrome.permissions.onAdded.addListener(t),()=>{chrome.permissions.onAdded.removeListener(t)}})),watchRemoved:e=>{chrome.permissions.onRemoved.addListener(e)},removed:new bi.y((e=>{const t=t=>{e.next(t)};return chrome.permissions.onRemoved.addListener(t),()=>{chrome.permissions.onRemoved.removeListener(t)}})),getAll:Ts.fromAsync((()=>new Promise((e=>chrome.permissions.getAll(e))))),request:Ts.fromAsync((e=>new Promise(((t,n)=>chrome.permissions.request(e,(e=>{chrome.runtime.lastError?n(chrome.runtime.lastError):t(e)})))))),contains:Ts.fromAsync((e=>new Promise(((t,n)=>{chrome.permissions.contains(e,(e=>{chrome.runtime.lastError?n(chrome.runtime.lastError):t(e)}))}))))}:void 0,this.fetchBlocklistConfig=()=>Ts.noop,this.getUrl=e=>this._baseUrl?this._baseUrl+e:chrome.runtime.getURL(e),this.fetchInternalResource=(e,t)=>Ts.fromPromise(fetch(this.getUrl(e)).then((e=>"json"===t?e.json():e.arrayBuffer()))),this.openUrl=e=>this.tabs.open(e,!0),this.openSubscriptionPage=e=>function(e,t){var n,r;const i=[KE("app_type","extension"),KE("browser",Be()),...e.currentAlerts?[KE("lensedAlerts",(o=eQ(e.currentAlerts),btoa(JSON.stringify(o))))]:[],...tA({medium:"internal",campaign:e.utmCampaign,source:null!==(n=e.utmSource)&&void 0!==n?n:e.isAnonymous?"signupHook":"upHook"})];var o;const s=null!==(r=e.overrideUrl)&&void 0!==r?r:qe().planComparison,a=new URLSearchParams(new URL(s).search),c=QE(s,i.filter((e=>!a.has(e.key))));t.open(c,!0)}(e,this.tabs),this.openSidePanel=e=>{var t;const n=Kt().sidePanel;if(!(null===(t=chrome.sidePanel)||void 0===t?void 0:t.open)){const e="chrome.sidePanel?.open is not available";return n.openFail(e),Promise.reject(new Error(e))}const r=jl.decodeClientId(e).tabId,i=Number(r);if(!r||isNaN(i)){const e=`Invalid tabId when open side panel: '${r}'`;return n.openFail(e),Promise.reject(new Error(e))}return chrome.sidePanel.open({tabId:i}).catch((e=>{throw n.openFail(e.message),e}))},this.isSidePanelSupported=()=>{var e;return Promise.resolve(!!(null===(e=chrome.sidePanel)||void 0===e?void 0:e.open))},this.setSidePanelEnabled=e=>{var t;const n=Kt().sidePanel;if(!(null===(t=chrome.sidePanel)||void 0===t?void 0:t.setOptions)){const e="chrome.sidePanel?.setOptions is not available";return n.openFail(e),Promise.reject(new Error(e))}return chrome.sidePanel.setOptions({enabled:e}).catch((e=>{throw n.openFail(e.message),e}))},this.openPopup=()=>{var e;const t=Kt().sidePanel;if(!(null===(e=chrome.action)||void 0===e?void 0:e.openPopup)){const e="chrome.action.openPopup is not available";return t.openFail(e),Promise.reject(new Error(e))}return chrome.action.openPopup().catch((e=>{throw t.openPopupFail(e.message),e}))},this.isExtensionUrl=(e,t)=>this.getUrl(e)===t,this.reload=()=>chrome.runtime.reload(),this.i18n={detectLanguage:e=>Ts.create(((t,n)=>chrome.i18n.detectLanguage(e,(e=>nQ((()=>t(e)),n))))),getUILanguage:()=>chrome.i18n.getUILanguage(),getAcceptLanguages:()=>Ts.create(((e,t)=>chrome.i18n.getAcceptLanguages((n=>nQ((()=>e(n)),t)))))},this.identity=chrome.identity,this.initCodeSplittingListener=()=>{return chrome.runtime.onMessage.addListener((e=this.tabs.executeScript,(n,r,i)=>{if(n&&"CODE_SPLITTING_INJECT"===n.type&&n.file&&r&&r.tab&&null!=r.tab.id){const o=n.file,s=Number(r.tab.id);e(o,s,r.frameId).catch((e=>{null==t||t(o,s,e)})),i()}}));var e,t},this.isExtensionInstalled=Ts.fromAsync((async(e,t=!1)=>{if(!t&&void 0!==this.thirdPartyExtensionsInstalled[e])return this.thirdPartyExtensionsInstalled[e];if("undefined"==typeof fetch)return!1;const n=pQ.thirdPartyExtensionsData[e].publicResources.reduce(((t,n)=>(Fe()&&t.push(`chrome-extension://${pQ.thirdPartyExtensionsData[e].MSStoreId}${n}`),t.concat(`chrome-extension://${pQ.thirdPartyExtensionsData[e].id}${n}`))),[]);return(0,Ke.Wp)(n.map((e=>fetch(e)))).then((e=>!0)).catch((e=>!1))})),this.setUninstallURL=e=>chrome.runtime.setUninstallURL(e),this.connectNative=e=>oQ.createPort(chrome,e),this.indexedDB=self.indexedDB}}var gQ;pQ.thirdPartyExtensionsData={mseditor:{id:"gpaiobkfhnonedkhhfjpmhdalgeoebfa",MSStoreId:"hokifickgkhplphjiodbggjmoafhignh",publicResources:["/fonts/fabric-icons.css"]},office:{id:"ndjpnladcallmjemlbaebfadecfhkepb",MSStoreId:"gggmmkjegpiggikcnhidnjjhmicpibll",publicResources:["/fonts/fabric-icons.css"]}},function(e){e.MigrationAwarePreferencesApiImpl=class{constructor(e,t,n,r=[],i){var o;this._source=t,this._destination=n,this._migrationCompleted=Ts.createCompletionSource(),this._ensureMigrationCompletedCalled=!1,this.get=this._getMigrationAwareMethod("get"),this.set=this._getMigrationAwareMethod("set"),this.getAll=this._getMigrationAwareMethod("getAll"),this.remove=this._getMigrationAwareMethod("remove"),this.removeAll=this._getMigrationAwareMethod("removeAll"),this._migration=new yE(e,t,n,r,i),this.changes=bG(n.changes).pipe((o=bG(this._migrationCompleted.promise),(0,zr.e)((function(e,t){var n=!1,r=(0,Vr.x)(t,(function(){null==r||r.unsubscribe(),n=!0}),eo.Z);(0,Br.Xf)(o).subscribe(r),e.subscribe((0,Vr.x)(t,(function(e){return n&&t.next(e)})))}))))}dispose(){var e,t,n,r;null===(t=(e=this._source).dispose)||void 0===t||t.call(e),null===(r=(n=this._destination).dispose)||void 0===r||r.call(n)}ensureMigrationCompleted(){return this._ensureMigrationCompletedCalled=!0,Ts.fromPromise(this._migration.ensureMigrationCompleted().then((e=>{var t,n;return null===(n=(t=this._source).dispose)||void 0===n||n.call(t),this._migrationCompleted.resolve(!0),Promise.resolve(e)}),(e=>(this._migrationCompleted.resolve(!1),Promise.reject(e)))))}_getMigrationAwareMethod(e){return(...t)=>(g(!0===this._ensureMigrationCompletedCalled,"supposed to run data migration before accessing prefs with web-extensions API"),Ts.fromPromise(this._migrationCompleted.promise.then((n=>(n?this._migration.migrationAwareDestination:this._source)[e](...t)))))}},e.mapValueFromString=e=>{if("undefined"!==e)try{return e&&JSON.parse(e)}catch(t){return null!=e?e:void 0}},e.mapValueToString=e=>void 0===e?"undefined":JSON.stringify(e)}(gQ||(gQ={}));class fQ{constructor(e){this._port=e,this.sender={};const{sender:t,name:n}=e;this.name=n,t&&(this.sender.url=t.url,this.sender.frameId=t.frameId,t.tab&&t.tab.url&&t.tab.id&&(this.sender.tab={url:t.tab.url,id:t.tab.id}))}onMessage(e){this._port.onMessage.addListener(e)}onDisconnect(e){this._port.onDisconnect.addListener(e)}postMessage(e){this._port.postMessage(e)}}const mQ=class{constructor(e){this.gnar=e}MSEditorConflictPopupOpen(e){return this.gnar.track({action:"open",eventName:"chromeExt/MSEditor-conflictPopup-open",object:"conflictPopup",objectId:"MSEditor",isConflict:e},{lite:!0,sendInstance:!0,sendBrowser:!0,sendUser:!0,sendUserIfExists:!1})}MSEditorInstalled(){return this.gnar.track({action:"installed",eventName:"chromeExt/MSEditor-installed",objectId:"MSEditor"},{lite:!0,sendInstance:!0,sendBrowser:!0,sendUser:!0,sendUserIfExists:!1})}MSOfficeInstalled(e){return this.gnar.track({action:"installed",eventName:"chromeExt/MSOffice-installed",objectId:"MSOffice",isEditorEnabled:e},{lite:!0,sendInstance:!0,sendBrowser:!0,sendUser:!0,sendUserIfExists:!1})}acceptedAlert(e,t,n){return this.gnar.track({eventName:"chromeExt/accepted-alert",object:"alert",objectId:"accepted",experiment:e,sessionId:t,url:n},{lite:!0,sendInstance:!1,sendBrowser:!1,sendUser:!1,sendUserIfExists:!1})}allSettingsButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/allSettings-button-click",object:"button",objectId:"allSettings",placement:e})}alwaysOnAssistantAgentActivated(e,t,n,r){return this.gnar.track({action:"activated",eventName:"chromeExt/alwaysOnAssistant-agent-activated",object:"agent",objectId:"alwaysOnAssistant",agent:e,assistantSessionId:t,cause:n,switchFromAgent:r})}alwaysOnAssistantAgentBenchItemClicked(e,t){return this.gnar.track({action:"clicked",eventName:"chromeExt/alwaysOnAssistant-agentBenchItem-clicked",object:"agentBenchItem",objectId:"alwaysOnAssistant",assistantSessionId:e,itemNameOrAgentId:t})}alwaysOnAssistantAgentDeactivated(e,t,n,r){return this.gnar.track({action:"deactivated",eventName:"chromeExt/alwaysOnAssistant-agent-deactivated",object:"agent",objectId:"alwaysOnAssistant",agent:e,assistantSessionId:t,cause:n,switchToAgent:r})}alwaysOnAssistantAgentDirectoryAddAgentClick(e,t){return this.gnar.track({action:"click",eventName:"chromeExt/alwaysOnAssistantAgentDirectory-addAgent-click",object:"addAgent",objectId:"alwaysOnAssistantAgentDirectory",agentId:e,assistantSessionId:t})}alwaysOnAssistantAgentDirectoryAgentCardClick(e,t){return this.gnar.track({action:"click",eventName:"chromeExt/alwaysOnAssistantAgentDirectory-agentCard-click",object:"agentCard",objectId:"alwaysOnAssistantAgentDirectory",agentId:e,assistantSessionId:t})}alwaysOnAssistantAgentDirectoryAgentSearch(e,t){return this.gnar.track({action:"search",eventName:"chromeExt/alwaysOnAssistantAgentDirectory-agent-search",object:"agent",objectId:"alwaysOnAssistantAgentDirectory",assistantSessionId:e,query:t})}alwaysOnAssistantAgentDirectoryManageAgentsClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/alwaysOnAssistantAgentDirectory-manageAgents-click",object:"manageAgents",objectId:"alwaysOnAssistantAgentDirectory",assistantSessionId:e})}alwaysOnAssistantAgentDirectoryRemoveAgentClick(e,t){return this.gnar.track({action:"click",eventName:"chromeExt/alwaysOnAssistantAgentDirectory-removeAgent-click",object:"removeAgent",objectId:"alwaysOnAssistantAgentDirectory",agentId:e,assistantSessionId:t})}alwaysOnAssistantAgentDirectorySignIntoAgentClick(e,t){return this.gnar.track({action:"click",eventName:"chromeExt/alwaysOnAssistantAgentDirectory-signIntoAgent-click",object:"signIntoAgent",objectId:"alwaysOnAssistantAgentDirectory",agentId:e,assistantSessionId:t})}alwaysOnAssistantAgentDirectoryViewAgentSettingsClick(e,t){return this.gnar.track({action:"click",eventName:"chromeExt/alwaysOnAssistantAgentDirectory-viewAgentSettings-click",object:"viewAgentSettings",objectId:"alwaysOnAssistantAgentDirectory",agentId:e,assistantSessionId:t})}alwaysOnAssistantAgentDirectoryViewInMarketplaceClick(e,t){return this.gnar.track({action:"click",eventName:"chromeExt/alwaysOnAssistantAgentDirectory-viewInMarketplace-click",object:"viewInMarketplace",objectId:"alwaysOnAssistantAgentDirectory",agentId:e,assistantSessionId:t})}alwaysOnAssistantBrowserInfoRetrieved(e,t,n){return this.gnar.track({action:"retrieved",eventName:"chromeExt/alwaysOnAssistant-browserInfo-retrieved",object:"browserInfo",objectId:"alwaysOnAssistant",brandsInfo:e,browserVariant:t,chromiumVersion:n})}alwaysOnAssistantChatHistoryOpen(e,t,n){return this.gnar.track({action:"open",eventName:"chromeExt/alwaysOnAssistant-chatHistory-open",object:"chatHistory",objectId:"alwaysOnAssistant",assistantSessionId:e,chatSection:t,chatUuid:n})}alwaysOnAssistantContextAddContext(e,t,n){return this.gnar.track({action:"addContext",eventName:"chromeExt/alwaysOnAssistant-context-addContext",object:"context",objectId:"alwaysOnAssistant",assistantSessionId:e,chatUuid:t,contextType:n})}alwaysOnAssistantContextRemoveContext(e,t,n){return this.gnar.track({action:"removeContext",eventName:"chromeExt/alwaysOnAssistant-context-removeContext",object:"context",objectId:"alwaysOnAssistant",assistantSessionId:e,chatUuid:t,contextType:n})}alwaysOnAssistantContextSwitchButtonClicked(e,t){return this.gnar.track({action:"switchButtonClicked",eventName:"chromeExt/alwaysOnAssistant-context-switchButtonClicked",object:"context",objectId:"alwaysOnAssistant",assistantSessionId:e,chatUuid:t})}alwaysOnAssistantCopyButtonClick(e,t,n,r,i){return this.gnar.track({action:"click",eventName:"chromeExt/alwaysOnAssistant-copyButton-click",object:"copyButton",objectId:"alwaysOnAssistant",assistantSessionId:e,chatUuid:t,messageId:n,responseLength:r,sessionUuid:i})}alwaysOnAssistantExplainerAgentInvoked(e,t,n,r,i){return this.gnar.track({action:"invoked",eventName:"chromeExt/alwaysOnAssistant-explainerAgent-invoked",object:"explainerAgent",objectId:"alwaysOnAssistant",agentPackId:e,assistantSessionId:t,sessionUuid:n,textScope:r,uiLocation:i})}alwaysOnAssistantExplainerAgentTabSelected(e,t,n,r){return this.gnar.track({action:"tabSelected",eventName:"chromeExt/alwaysOnAssistant-explainerAgent-tabSelected",object:"explainerAgent",objectId:"alwaysOnAssistant",agentPackId:e,assistantSessionId:t,sessionUuid:n,tabVariation:r})}alwaysOnAssistantFeedbackFormSubmit(e,t,n){return this.gnar.track({action:"submit",eventName:"chromeExt/alwaysOnAssistant-feedbackForm-submit",object:"feedbackForm",objectId:"alwaysOnAssistant",assistantSessionId:e,message:t,mood:n})}alwaysOnAssistantInsertButtonClick(e,t,n,r,i){return this.gnar.track({action:"click",eventName:"chromeExt/alwaysOnAssistant-insertButton-click",object:"insertButton",objectId:"alwaysOnAssistant",assistantSessionId:e,chatUuid:t,messageId:n,responseLength:r,sessionUuid:i})}alwaysOnAssistantNewChatButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/alwaysOnAssistant-newChatButton-click",object:"newChatButton",objectId:"alwaysOnAssistant",assistantSessionId:e})}alwaysOnAssistantNotchDeactivatedTextChecking(e,t,n){return this.gnar.track({action:"deactivatedTextChecking",eventName:"chromeExt/alwaysOnAssistant-notch-deactivatedTextChecking",object:"notch",objectId:"alwaysOnAssistant",appDomain:e,assistantSessionId:t,duration:n})}alwaysOnAssistantNotchPeek(e,t){return this.gnar.track({action:"peek",eventName:"chromeExt/alwaysOnAssistant-notch-peek",object:"notch",objectId:"alwaysOnAssistant",appDomain:e,assistantSessionId:t})}alwaysOnAssistantNotchPreviewCollapsed(e){return this.gnar.track({action:"previewCollapsed",eventName:"chromeExt/alwaysOnAssistant-notch-previewCollapsed",object:"notch",objectId:"alwaysOnAssistant",assistantSessionId:e})}alwaysOnAssistantNotchToggle(e,t,n){return this.gnar.track({action:"toggle",eventName:"chromeExt/alwaysOnAssistant-notch-toggle",object:"notch",objectId:"alwaysOnAssistant",previousValue:e,status:t,value:n})}alwaysOnAssistantOnboardingBenchTipDismiss(e){return this.gnar.track({action:"dismiss",eventName:"chromeExt/alwaysOnAssistantOnboarding-benchTip-dismiss",object:"benchTip",objectId:"alwaysOnAssistantOnboarding",assistantSessionId:e})}alwaysOnAssistantOnboardingBenchTipShow(e){return this.gnar.track({action:"show",eventName:"chromeExt/alwaysOnAssistantOnboarding-benchTip-show",object:"benchTip",objectId:"alwaysOnAssistantOnboarding",assistantSessionId:e})}alwaysOnAssistantOnboardingDataTipDismiss(e){return this.gnar.track({action:"dismiss",eventName:"chromeExt/alwaysOnAssistantOnboarding-dataTip-dismiss",object:"dataTip",objectId:"alwaysOnAssistantOnboarding",assistantSessionId:e})}alwaysOnAssistantOnboardingDataTipShow(e){return this.gnar.track({action:"show",eventName:"chromeExt/alwaysOnAssistantOnboarding-dataTip-show",object:"dataTip",objectId:"alwaysOnAssistantOnboarding",assistantSessionId:e})}alwaysOnAssistantOnboardingNotchPeek(){return this.gnar.track({action:"peek",eventName:"chromeExt/alwaysOnAssistantOnboarding-notch-peek",object:"notch",objectId:"alwaysOnAssistantOnboarding"})}alwaysOnAssistantOnboardingProBannerShow(e,t){return this.gnar.track({action:"show",eventName:"chromeExt/alwaysOnAssistantOnboarding-proBanner-show",object:"proBanner",objectId:"alwaysOnAssistantOnboarding",assistantSessionId:e,agentId:t})}alwaysOnAssistantPromptSubmit(e,t,n,r){return this.gnar.track({action:"submit",eventName:"chromeExt/alwaysOnAssistant-prompt-submit",object:"prompt",objectId:"alwaysOnAssistant",assistantSessionId:e,chatUuid:t,predefinedPromptId:n,sessionUuid:r})}alwaysOnAssistantResponseArtifactClick(e,t,n,r){return this.gnar.track({action:"click",eventName:"chromeExt/alwaysOnAssistant-responseArtifact-click",object:"responseArtifact",objectId:"alwaysOnAssistant",assistantSessionId:e,chatUuid:t,sessionUuid:n,tabIndex:r})}alwaysOnAssistantResponseCompleted(e,t,n,r,i,o,s){return this.gnar.track({action:"responseCompleted",eventName:"chromeExt/alwaysOnAssistant-responseCompleted",objectId:"alwaysOnAssistant",assistantSessionId:e,chatUuid:t,loadTime:n,responseLength:r,result:i,sessionUuid:o,errorType:s})}alwaysOnAssistantResponseSourceClick(e,t,n,r){return this.gnar.track({action:"click",eventName:"chromeExt/alwaysOnAssistant-responseSource-click",object:"responseSource",objectId:"alwaysOnAssistant",assistantSessionId:e,location:t,recordId:n,searchRequestId:r})}alwaysOnAssistantResponseSourceImpression(e,t,n,r){return this.gnar.track({action:"impression",eventName:"chromeExt/alwaysOnAssistant-responseSource-impression",object:"responseSource",objectId:"alwaysOnAssistant",assistantSessionId:e,location:t,recordId:n,searchRequestId:r})}alwaysOnAssistantSend(e,t,n,r){return this.gnar.track({action:"send",eventName:"chromeExt/alwaysOnAssistant-send",objectId:"alwaysOnAssistant",assistantSessionId:e,chatUuid:t,messageLength:n,sessionUuid:r})}alwaysOnAssistantSidePanelClose(e,t){return this.gnar.track({action:"close",eventName:"chromeExt/alwaysOnAssistant-sidePanel-close",object:"sidePanel",objectId:"alwaysOnAssistant",assistantSessionId:e,duration:t})}alwaysOnAssistantSidePanelLoaded(e){return this.gnar.track({action:"loaded",eventName:"chromeExt/alwaysOnAssistant-sidePanel-loaded",object:"sidePanel",objectId:"alwaysOnAssistant",assistantSessionId:e})}alwaysOnAssistantSidePanelOpen(e,t){return this.gnar.track({action:"open",eventName:"chromeExt/alwaysOnAssistant-sidePanel-open",object:"sidePanel",objectId:"alwaysOnAssistant",assistantSessionId:e,source:t})}alwaysOnAssistantStopStreaming(e,t,n){return this.gnar.track({action:"stopStreaming",eventName:"chromeExt/alwaysOnAssistant-stopStreaming",objectId:"alwaysOnAssistant",assistantSessionId:e,chatUuid:t,sessionUuid:n})}alwaysOnAssistantTranslationAgentInvoked(e,t,n,r,i,o){return this.gnar.track({action:"invoked",eventName:"chromeExt/alwaysOnAssistant-translationAgent-invoked",object:"translationAgent",objectId:"alwaysOnAssistant",agentPackId:e,assistantSessionId:t,sessionUuid:n,targetLanguage:r,textScope:i,uiLocation:o})}appActionsInlineTranslateButtonShow(){return this.gnar.track({action:"show",eventName:"chromeExt/appActions-inlineTranslateButton-show",object:"inlineTranslateButton",objectId:"appActions"})}appStart(e){return this.gnar.track({action:"start",component:"companion",eventName:"chromeExt/companion/app-start",object:"app",osVersion:e})}assistantActionButtonClick(e,t,n,r,i,o){return this.gnar.track({action:"click",eventName:"chromeExt/assistant-actionButton-click",object:"actionButton",objectId:"assistant",actionId:e,actionName:t,placement:n,position:r,promptNumber:i,sessionUuid:o})}assistantActionButtonImpression(e,t,n,r,i,o){return this.gnar.track({action:"impression",eventName:"chromeExt/assistant-actionButton-impression",object:"actionButton",objectId:"assistant",actionId:e,actionName:t,placement:n,position:r,promptNumber:i,sessionUuid:o})}assistantActionButtonRender(e,t,n,r,i,o){return this.gnar.track({action:"render",eventName:"chromeExt/assistant-actionButton-render",object:"actionButton",objectId:"assistant",actionId:e,actionName:t,placement:n,position:r,promptNumber:i,sessionUuid:o})}assistantAppletClose(e){return this.gnar.track({action:"close",eventName:"chromeExt/assistant-applet-close",object:"applet",objectId:"assistant",assistantView:e})}assistantAppletInteractionReady(e,t,n){return this.gnar.track({action:"interactionReady",eventName:"chromeExt/assistant-applet-interactionReady",object:"applet",objectId:"assistant",assistantView:e,duration:t,success:n})}assistantAppletVisuallyReady(e,t){return this.gnar.track({action:"visuallyReady",eventName:"chromeExt/assistant-applet-visuallyReady",object:"applet",objectId:"assistant",assistantView:e,duration:t})}assistantCollapsedUpgradeHookShow(){return this.gnar.track({action:"show",eventName:"chromeExt/assistant-collapsedUpgradeHook-show",object:"collapsedUpgradeHook",objectId:"assistant"})}assistantExpandedUpgradeHookClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/assistant-expandedUpgradeHook-click",object:"expandedUpgradeHook",objectId:"assistant",placement:"assistant",alertPremiumCount:e})}assistantExpandedUpgradeHookShow(e,t,n){return this.gnar.track({action:"show",eventName:"chromeExt/assistant-expandedUpgradeHook-show",object:"expandedUpgradeHook",objectId:"assistant",alertPremiumCount:e,upgradeButtonVisibleInViewPort:t,reason:n})}assistantFeedbackButtonClick(){return this.gnar.track({action:"click",entryPoint:"settings",eventName:"chromeExt/assistant-feedbackButton-click",object:"feedbackButton",objectId:"assistant",placement:"assistant"})}assistantFeedbackSubmitButtonClick(e,t,n,r){return this.gnar.track({action:"click",eventName:"chromeExt/assistant-feedbackSubmitButton-click",object:"feedbackSubmitButton",objectId:"assistant",placement:"assistant",entryPoint:e,domain:t,feedback:n,rating:r})}assistantHeaderMessageUpdate(e,t,n,r){return this.gnar.track({action:"update",eventName:"chromeExt/assistant-headerMessage-update",object:"headerMessage",objectId:"assistant",last_message:e,new_message:t,numWords:n,score:r})}assistantLensButtonClick(e,t){return this.gnar.track({action:"click",eventName:"chromeExt/assistant-lensButton-click",object:"lensButton",objectId:"assistant",lens:e,sessionUuid:t})}assistantLensShow(e,t){return this.gnar.track({action:"show",eventName:"chromeExt/assistant-lens-show",object:"lens",objectId:"assistant",lens:e,sessionUuid:t})}assistantMoreActionsButtonClick(e,t,n,r){return this.gnar.track({action:"click",eventName:"chromeExt/assistant-moreActionsButton-click",object:"moreActionsButton",objectId:"assistant",placement:e,position:t,promptNumber:n,sessionUuid:r})}assistantPerformanceScoreReportShow(e,t){return this.gnar.track({action:"show",eventName:"chromeExt/assistant-performanceScoreReport-show",object:"performanceScoreReport",objectId:"assistant",scoreStatus:e,sessionUuid:t})}assistantPersonalizationEmotionsContinueClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/assistantPersonalization-emotionsContinue-click",object:"emotionsContinue",objectId:"assistantPersonalization",placement:"assistantPersonalizationWizard",emotions:e})}assistantPersonalizationGoalsContinueClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/assistantPersonalization-goalsContinue-click",object:"goalsContinue",objectId:"assistantPersonalization",placement:"assistantPersonalizationWizard",goals:e})}assistantPersonalizationOpenClick(){return this.gnar.track({action:"click",eventName:"chromeExt/assistantPersonalization-open-click",object:"open",objectId:"assistantPersonalization",placement:"assistant"})}assistantPersonalizationPrimaryLanguageContinueClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/assistantPersonalization-primaryLanguageContinue-click",object:"primaryLanguageContinue",objectId:"assistantPersonalization",placement:"assistantPersonalizationWizard",language:e})}assistantPersonalizationRoleContinueClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/assistantPersonalization-roleContinue-click",object:"roleContinue",objectId:"assistantPersonalization",placement:"assistantPersonalizationWizard",role:e})}assistantPlagiarismCitationsStyleChange(e,t){return this.gnar.track({action:"change",eventName:"chromeExt/assistant-plagiarismCitationsStyle-change",object:"plagiarismCitationsStyle",objectId:"assistant",citationStyle:e,sessionUuid:t})}assistantPlagiarismCitationsStyleDropdownOpen(e,t){return this.gnar.track({action:"open",eventName:"chromeExt/assistant-plagiarismCitationsStyleDropdown-open",object:"plagiarismCitationsStyleDropdown",objectId:"assistant",citationStyle:e,sessionUuid:t})}assistantPlaybookClick(e,t){return this.gnar.track({action:"click",eventName:"chromeExt/assistant-playbook-click",object:"playbook",objectId:"assistant",playbookId:e,sessionUuid:t})}assistantPopupCloseButtonClick(e,t,n,r,i,o){return this.gnar.track({action:"click",eventName:"chromeExt/assistantPopupClose-button-click",object:"button",objectId:"assistantPopupClose",placement:"assistant",activeView:e,numAlerts:t,numClarityAlerts:n,numInlineAlerts:r,numPriorityAlerts:i,activePopupType:o})}assistantPopupDrag(e,t,n,r,i){return this.gnar.track({action:"drag",eventName:"chromeExt/assistant-popup-drag",object:"popup",objectId:"assistant",finalX:e,finalY:t,height:n,initialX:r,initialY:i})}assistantPopupReady(e,t,n,r,i,o){return this.gnar.track({action:"ready",eventName:"chromeExt/assistant-popup-ready",object:"popup",objectId:"assistant",sessionUuid:e,success:t,targetFeature:n,duration:r,source:i,uiType:o})}assistantPopupShow(e,t,n,r,i,o,s,a,c,l,u,d,h,p,g,f){return this.gnar.track({action:"show",eventName:"chromeExt/assistant-popup-show",object:"popup",objectId:"assistant",activeView:e,initialHeight:t,initialX:n,initialY:r,numAlerts:i,numClarityAlerts:o,numInlineAlerts:s,numPriorityAlerts:a,numWords:c,positionLogic:l,sessionUuid:u,activePopupType:d,openMs:h,score:p,source:g,uiType:f})}assistantPriorityDropdownClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/assistant-priorityDropdown-click",object:"priorityDropdown",objectId:"assistant",placement:"assistant",view:e})}assistantSelectionContextClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/assistant-selectionContext-click",object:"selectionContext",objectId:"assistant",sessionUuid:e})}assistantSelectionContextHover(e){return this.gnar.track({action:"hover",eventName:"chromeExt/assistant-selectionContext-hover",object:"selectionContext",objectId:"assistant",sessionUuid:e})}assistantSelectionContextRemoveButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/assistant-selectionContextRemoveButton-click",object:"selectionContextRemoveButton",objectId:"assistant",sessionUuid:e})}assistantSettingsShow(){return this.gnar.track({action:"show",eventName:"chromeExt/assistant-settings-show",object:"settings",objectId:"assistant",placement:"assistant"})}assistantSuccessStateShow(e,t,n){return this.gnar.track({action:"show",eventName:"chromeExt/assistant-successState-show",object:"successState",objectId:"assistant",feed:e,successStateType:t,sessionUuid:n})}assistantSwitchToLongFormClick(e,t,n){return this.gnar.track({action:"click",eventName:"chromeExt/assistant-switchToLongForm-click",object:"switchToLongForm",objectId:"assistant",activeFeed:e,numberOfSuggestions:t,sessionUuid:n})}assistantSwitchToShortFormClick(e,t,n){return this.gnar.track({action:"click",eventName:"chromeExt/assistant-switchToShortForm-click",object:"switchToShortForm",objectId:"assistant",activeFeed:e,numberOfSuggestions:t,sessionUuid:n})}authHookButtonClick(e,t,n,r,i,o){return this.gnar.track({action:"click",eventName:"chromeExt/authHook-button-click",object:"button",objectId:"authHook",authHookAction:e,authType:t,experience:n,name:r,slot:i,userType:o})}authHookClick(e,t,n,r,i,o){return this.gnar.track({action:"click",eventName:"chromeExt/authHook-click",objectId:"authHook",authHookAction:e,authType:t,experience:n,name:r,slot:i,userType:o})}authHookShow(e,t,n,r){return this.gnar.track({action:"show",eventName:"chromeExt/authHook-show",objectId:"authHook",experience:e,name:t,slot:n,userType:r})}authUnauthorizedState(e,t){return this.gnar.track({action:"unauthorizedState",eventName:"chromeExt/auth-unauthorizedState",objectId:"auth",userType:e,lastSuccess:t})}authzAuthorizationCodeExchange(e,t,n){return this.gnar.track({action:"authorizationCodeExchange",eventName:"chromeExt/authz-authorizationCodeExchange",objectId:"authz",status:e,error:t,httpStatusCode:n})}authzFallbackSucceedAfterCodeExchangeAttempt(){return this.gnar.track({action:"fallbackSucceedAfterCodeExchangeAttempt",eventName:"chromeExt/authz-fallbackSucceedAfterCodeExchangeAttempt",objectId:"authz"})}authzGrauthExchange(e,t,n,r,i){return this.gnar.track({action:"grauthExchange",eventName:"chromeExt/authz-grauthExchange",objectId:"authz",isInitial:e,status:t,error:n,httpStatusCode:r,isExplicitExchange:i})}authzGrauthRefresh(e,t,n,r){return this.gnar.track({action:"grauthRefresh",eventName:"chromeExt/authz-grauthRefresh",objectId:"authz",isInitial:e,status:t,error:n,httpStatusCode:r})}autoApplyAcceptButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/autoApply/accept-button-click",feature:"autoApply",object:"button",objectId:"accept",placement:"inlineCard",alertId:e})}autoApplyAlertAlertLooked(e){return this.gnar.track({action:"looked",eventName:"chromeExt/autoApply/alert-alert-looked",feature:"autoApply",object:"alert",objectId:"alert",alertId:e})}autoApplyAlertAlertTriggered(e){return this.gnar.track({action:"triggered",eventName:"chromeExt/autoApply/alert-alert-triggered",feature:"autoApply",object:"alert",objectId:"alert",alertId:e})}autoApplyRevertButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/autoApply/revert-button-click",feature:"autoApply",object:"button",objectId:"revert",placement:"inlineCard",alertId:e})}autoApplySettingsToggleClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/autoApply/settings-toggle-click",feature:"autoApply",object:"toggle",objectId:"settings",state:e})}autoApplyTurnOffUntilNextViewButtonClick(){return this.gnar.track({action:"click",eventName:"chromeExt/autoApply/turnOffUntilNextView-button-click",feature:"autoApply",object:"button",objectId:"turnOffUntilNextView",placement:"inlineCard"})}autocorrectToggleClick(e,t){return this.gnar.track({action:"click",eventName:"chromeExt/autocorrect-toggle-click",object:"toggle",objectId:"autocorrect",placement:e,state:t})}brandTonesActivationUphookCTAButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/brandTonesActivationUphookCTA-button-click",object:"button",objectId:"brandTonesActivationUphookCTA",placement:e})}brandTonesActivationUphookDismissButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/brandTonesActivationUphookDismiss-button-click",object:"button",objectId:"brandTonesActivationUphookDismiss",placement:e})}brandTonesActivationUphookShow(){return this.gnar.track({action:"show",eventName:"chromeExt/brandTonesActivation-uphook-show",object:"uphook",objectId:"brandTonesActivation"})}businessGButtonCloseButtonClick(e,t){return this.gnar.track({action:"click",eventName:"chromeExt/business/gButtonClose-button-click",feature:"business",object:"button",objectId:"gButtonClose",isSimpleView:e,placement:t})}businessGButtonHideTodayButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/business/gButtonHideToday-button-click",feature:"business",object:"button",objectId:"gButtonHideToday",placement:e})}businessGButtonSigninButtonClick(e,t){return this.gnar.track({action:"click",eventName:"chromeExt/business/gButtonSignin-button-click",feature:"business",object:"button",objectId:"gButtonSignin",isSimpleView:e,placement:t})}businessGButtonSigninPopupResetPopupShow(){return this.gnar.track({action:"show",eventName:"chromeExt/business/gButtonSigninPopupReset-popup-show",feature:"business",object:"popup",objectId:"gButtonSigninPopupReset"})}businessGButtonSigninPopupShow(e){return this.gnar.track({action:"show",eventName:"chromeExt/business/gButtonSignin-popup-show",feature:"business",object:"popup",objectId:"gButtonSignin",isSimpleView:e})}businessInlineCardSigninButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/business/inlineCardSignin-button-click",feature:"business",object:"button",objectId:"inlineCardSignin",placement:e})}businessInlineCardSigninPopupShow(){return this.gnar.track({action:"show",eventName:"chromeExt/business/inlineCardSignin-popup-show",feature:"business",object:"popup",objectId:"inlineCardSignin"})}businessToolBarSigninButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/business/toolBarSignin-button-click",feature:"business",object:"button",objectId:"toolBarSignin",placement:e})}businessUphookPopupCtaButtonClick(e,t,n){return this.gnar.track({action:"click",eventName:"chromeExt/businessUphookPopupCta-button-click",object:"button",objectId:"businessUphookPopupCta",domainCategory:e,placement:t,popupType:n})}businessUphookPopupDismissButtonClick(e,t,n,r){return this.gnar.track({action:"click",eventName:"chromeExt/businessUphookPopupDismiss-button-click",object:"button",objectId:"businessUphookPopupDismiss",domainCategory:e,placement:t,popupType:n,doNotShowAgain:r})}businessUphookPopupShow(e,t){return this.gnar.track({action:"show",eventName:"chromeExt/businessUphook-popup-show",object:"popup",objectId:"businessUphook",domainCategory:e,popupType:t})}capturedException(e,t,n){return this.gnar.track({eventName:"chromeExt/captured-exception",object:"exception",objectId:"captured",experiment:e,sessionId:t,url:n},{lite:!0,sendInstance:!1,sendBrowser:!1,sendUser:!1,sendUserIfExists:!1})}cardSeeMoreButtonClick(e,t,n,r,i,o){return this.gnar.track({action:"click",eventName:"chromeExt/cardSeeMore-button-click",object:"button",objectId:"cardSeeMore",placement:"inlineCard",numAlerts:e,numClarityAlerts:t,numInlineAlerts:n,numPriorityAlerts:r,numWords:i,outcome:o})}categoryDeactivatedShow(e){return this.gnar.track({action:"show",eventName:"chromeExt/categoryDeactivated-show",objectId:"categoryDeactivated",placement:e})}changeLensButtonClick(e,t,n,r,i){return this.gnar.track({action:"click",eventName:"chromeExt/changeLens-button-click",object:"button",objectId:"changeLens",lens:e,numAllAlerts:t,numChars:n,numPriorityAlerts:r,placement:i})}checkingToggleClick(e,t,n,r){return this.gnar.track({action:"click",eventName:"chromeExt/checking-toggle-click",object:"toggle",objectId:"checking",placement:e,siteCategory:t,state:n,domain:r})}chromeStoreSignupToolbarPopupOpen(){return this.gnar.track({action:"open",eventName:"chromeExt/chromeStoreSignup-toolbarPopup-open",object:"toolbarPopup",objectId:"chromeStoreSignup"})}citeCopyButtonClick(e,t,n,r,i){return this.gnar.track({action:"click",eventName:"chromeExt/citeCopy-button-click",object:"button",objectId:"citeCopy",citationFormat:e,domain:t,sessionId:n,sourceType:r,wasManuallyInvoked:i})}citeCopyIntextClick(e,t,n,r,i){return this.gnar.track({action:"click",eventName:"chromeExt/citeCopy-intext-click",object:"intext",objectId:"citeCopy",citationFormat:e,domain:t,sessionId:n,sourceType:r,wasManuallyInvoked:i})}citePopupAddMissingClick(e,t,n){return this.gnar.track({action:"click",eventName:"chromeExt/citePopup-addMissing-click",object:"addMissing",objectId:"citePopup",domain:e,sessionId:t,wasManuallyInvoked:n})}citePopupButtonClick(e,t,n){return this.gnar.track({action:"click",eventName:"chromeExt/citePopup-button-click",object:"button",objectId:"citePopup",domain:e,sessionId:t,wasManuallyInvoked:n})}citePopupButtonDisable(e,t,n,r,i){return this.gnar.track({action:"disable",eventName:"chromeExt/citePopup-button-disable",object:"button",objectId:"citePopup",domain:e,duration:t,sessionId:n,source:r,wasManuallyInvoked:i})}citePopupButtonShow(e,t,n){return this.gnar.track({action:"show",eventName:"chromeExt/citePopup-button-show",object:"button",objectId:"citePopup",source:"citePopup-loader",domain:e,sessionId:t,wasManuallyInvoked:n})}citePopupEditClick(e,t,n){return this.gnar.track({action:"click",eventName:"chromeExt/citePopup-edit-click",object:"edit",objectId:"citePopup",domain:e,sessionId:t,wasManuallyInvoked:n})}citePopupEditSuccess(e,t,n){return this.gnar.track({action:"success",eventName:"chromeExt/citePopup-edit-success",object:"edit",objectId:"citePopup",domain:e,sessionId:t,wasManuallyInvoked:n})}citePopupMissingInfoFormShow(e,t,n,r){return this.gnar.track({action:"show",eventName:"chromeExt/citePopup-missingInfoForm-show",object:"missingInfoForm",objectId:"citePopup",domain:e,isShownDirectly:t,sessionId:n,wasManuallyInvoked:r})}citePopupMissingInfoShow(e,t,n){return this.gnar.track({action:"show",eventName:"chromeExt/citePopup-missingInfo-show",object:"missingInfo",objectId:"citePopup",domain:e,sessionId:t,wasManuallyInvoked:n})}claimedInvitationButtonClick(){return this.gnar.track({action:"click",eventName:"chromeExt/claimedInvitation-button-click",object:"button",objectId:"claimedInvitation",placement:"claimedInvitationPopup"})}claimedInvitationPopupShow(){return this.gnar.track({action:"show",eventName:"chromeExt/claimedInvitation-popup-show",object:"popup",objectId:"claimedInvitation"})}clickToRunOptionButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/clickToRunOption-button-click",object:"button",objectId:"clickToRunOption",placement:"clickToRunPopup",option:e})}continueWithPlanButtonClick(e,t,n,r){return this.gnar.track({action:"click",component:"companion",eventName:"chromeExt/companion/continueWithPlan-button-click",object:"button",objectId:"continueWithPlan",osVersion:e,pageId:t,placement:n,productId:r})}definitionPopupShow(){return this.gnar.track({action:"show",eventName:"chromeExt/definition-popup-show",object:"popup",objectId:"definition"})}definitionToggleClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/definition-toggle-click",object:"toggle",objectId:"definition",state:e})}desktopIntegrationDisabled(){return this.gnar.track({action:"disabled",eventName:"chromeExt/desktopIntegration-disabled",objectId:"desktopIntegration"})}desktopIntegrationEnabled(e){return this.gnar.track({action:"enabled",eventName:"chromeExt/desktopIntegration-enabled",objectId:"desktopIntegration",reason:e})}desktopIntegrationGDocsRedirect(e){return this.gnar.track({action:"redirect",eventName:"chromeExt/desktopIntegrationGDocs-redirect",objectId:"desktopIntegrationGDocs",source:e})}desktopIntegrationToggleClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/desktopIntegration-toggle-click",object:"toggle",objectId:"desktopIntegration",state:e})}disableButtonClick(e,t){return this.gnar.track({action:"click",eventName:"chromeExt/disable-button-click",object:"button",objectId:"disable",placement:e,domain:t})}disableReminderDoNotShowAgainButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/disableReminderDoNotShowAgain-button-click",object:"button",objectId:"disableReminderDoNotShowAgain",placement:e})}disableReminderNotificationShow(){return this.gnar.track({action:"show",eventName:"chromeExt/disableReminder-notification-show",object:"notification",objectId:"disableReminder"})}disableUntilNextVisitButtonClick(e,t){return this.gnar.track({action:"click",eventName:"chromeExt/disableUntilNextVisit-button-click",object:"button",objectId:"disableUntilNextVisit",placement:e,siteCategory:t})}dismissUpHookButtonClick(e,t,n,r,i,o,s,a,c,l,u,d,h){return this.gnar.track({action:"click",eventName:"chromeExt/dismissUpHook-button-click",object:"button",objectId:"dismissUpHook",placement:e,bannerType:t,clarityAlerts:n,correctnessAlerts:r,deliveryAlerts:i,engagementAlerts:o,inline:s,numberOfAdvancedAlerts:a,numberOfCriticalAlerts:c,sessionUuid:l,upgradeHookName:u,upgradeHookSlot:d,upgradeHookVariant:h})}draftAIPopupCloseClick(){return this.gnar.track({action:"click",eventName:"chromeExt/draftAIPopup-close-click",object:"close",objectId:"draftAIPopup",placement:"popup"})}draftAIPopupCtaClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/draftAIPopup-cta-click",object:"cta",objectId:"draftAIPopup",placement:"popup",ctaType:e})}draftAIPopupShow(){return this.gnar.track({action:"show",eventName:"chromeExt/draftAI-popup-show",object:"popup",objectId:"draftAI"})}dunningCTAButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/dunningCTA-button-click",object:"button",objectId:"dunningCTA",placement:e})}dunningCloseButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/dunningClose-button-click",object:"button",objectId:"dunningClose",placement:e})}dunningMessageDunningCTAButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/dunningMessage/dunningCTA-button-click",feature:"dunningMessage",object:"button",objectId:"dunningCTA",placement:e})}dunningMessageDunningCloseButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/dunningMessage/dunningClose-button-click",feature:"dunningMessage",object:"button",objectId:"dunningClose",placement:e})}dunningMessageDunningNotificationNotificationShow(e){return this.gnar.track({action:"show",eventName:"chromeExt/dunningMessage/dunningNotification-notification-show",feature:"dunningMessage",object:"notification",objectId:"dunningNotification",placement:e})}dunningNotificationNotificationShow(e){return this.gnar.track({action:"show",eventName:"chromeExt/dunningNotification-notification-show",object:"notification",objectId:"dunningNotification",placement:e})}editorInit(e,t,n,r){return this.gnar.track({action:"init",eventName:"chromeExt/editor-init",object:"editor",docId:e,mode:t,cssBundle:n,jsBundle:r})}emailSummarizationAcceptButtonClick(e,t){return this.gnar.track({action:"click",eventName:"chromeExt/emailSummarizationAccept-button-click",object:"button",objectId:"emailSummarizationAccept",docId:e,placement:t})}emailSummarizationBadgeShow(e){return this.gnar.track({action:"show",eventName:"chromeExt/emailSummarization-badge-show",object:"badge",objectId:"emailSummarization",docId:e})}emailSummarizationDisableButtonClick(e,t){return this.gnar.track({action:"click",eventName:"chromeExt/emailSummarizationDisable-button-click",object:"button",objectId:"emailSummarizationDisable",docId:e,placement:t})}emailSummarizationExpandButtonClick(e,t){return this.gnar.track({action:"click",eventName:"chromeExt/emailSummarizationExpand-button-click",object:"button",objectId:"emailSummarizationExpand",docId:e,placement:t})}emailSummarizationIgnoreButtonClick(e,t){return this.gnar.track({action:"click",eventName:"chromeExt/emailSummarizationIgnore-button-click",object:"button",objectId:"emailSummarizationIgnore",docId:e,placement:t})}emailSummarizationPopupShow(e){return this.gnar.track({action:"show",eventName:"chromeExt/emailSummarization-popup-show",object:"popup",objectId:"emailSummarization",docId:e})}emogenieInGButtonTooltipShow(e){return this.gnar.track({action:"show",eventName:"chromeExt/emogenieInGButton-tooltip-show",object:"tooltip",objectId:"emogenieInGButton",prevalentEmotion:e})}emogeniePredictionButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/emogeniePrediction-button-click",object:"button",objectId:"emogeniePrediction",placement:"assistant",prevalentEmotion:e})}emogenieReportShow(e,t,n,r){return this.gnar.track({action:"show",eventName:"chromeExt/emogenie-report-show",object:"report",objectId:"emogenie",emotions:e,isBrandTonesEnabled:t,numberEmotionsShown:n,sessionUuid:r})}emogenieShow(e,t,n){return this.gnar.track({action:"show",eventName:"chromeExt/emogenie-show",object:"emogenie",docId:e,emotions:t,numberEmotionsShown:n})}emogenieTooltipShow(e){return this.gnar.track({action:"show",eventName:"chromeExt/emogenie-tooltip-show",object:"tooltip",objectId:"emogenie",prevalentEmotion:e})}enterpriseSiteClarityNotificationClick(){return this.gnar.track({action:"click",eventName:"chromeExt/enterpriseSiteClarity-notification-click",object:"notification",objectId:"enterpriseSiteClarity"})}enterpriseSiteClarityNotificationShow(){return this.gnar.track({action:"show",eventName:"chromeExt/enterpriseSiteClarity-notification-show",object:"notification",objectId:"enterpriseSiteClarity"})}enterpriseSiteToneDetectorNotificationClick(){return this.gnar.track({action:"click",eventName:"chromeExt/enterpriseSiteToneDetector-notification-click",object:"notification",objectId:"enterpriseSiteToneDetector"})}enterpriseSiteToneDetectorNotificationShow(){return this.gnar.track({action:"show",eventName:"chromeExt/enterpriseSiteToneDetector-notification-show",object:"notification",objectId:"enterpriseSiteToneDetector"})}ethicalAIAlertTriggered(e){return this.gnar.track({action:"triggered",eventName:"chromeExt/ethicalAI/alert-triggered",feature:"ethicalAI",objectId:"alert",sensitivityType:e})}ethicalAIAlertUnderlineClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/ethicalAI/alert-underline-click",feature:"ethicalAI",object:"underline",objectId:"alert",sensitivityType:e})}ethicalAIAlertUnderlineShow(e){return this.gnar.track({action:"show",eventName:"chromeExt/ethicalAI/alert-underline-show",feature:"ethicalAI",object:"underline",objectId:"alert",sensitivityType:e})}ethicalAIAssistantFullCardDismissButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/ethicalAI/assistant-fullCardDismissButton-click",feature:"ethicalAI",object:"fullCardDismissButton",objectId:"assistant",sensitivityType:e})}ethicalAIAssistantFullCardExternalLinkButtonClick(e,t){return this.gnar.track({action:"click",eventName:"chromeExt/ethicalAI/assistant-fullCardExternalLinkButton-click",feature:"ethicalAI",object:"fullCardExternalLinkButton",objectId:"assistant",externalLink:e,sensitivityType:t})}ethicalAIAssistantFullCardLearnMoreButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/ethicalAI/assistant-fullCardLearnMoreButton-click",feature:"ethicalAI",object:"fullCardLearnMoreButton",objectId:"assistant",sensitivityType:e})}ethicalAIAssistantFullCardShow(e){return this.gnar.track({action:"show",eventName:"chromeExt/ethicalAI/assistant-fullCard-show",feature:"ethicalAI",object:"fullCard",objectId:"assistant",sensitivityType:e})}ethicalAIAssistantMiniCardShow(e){return this.gnar.track({action:"show",eventName:"chromeExt/ethicalAI/assistant-miniCard-show",feature:"ethicalAI",object:"miniCard",objectId:"assistant",sensitivityType:e})}expandedGButtonYellowPremiumButtonClick(e,t){return this.gnar.track({action:"click",eventName:"chromeExt/expandedGButtonYellowPremium-button-click",object:"button",objectId:"expandedGButtonYellowPremium",numberOfAdvancedAlerts:e,placement:t})}extensionLoaded(e){return this.gnar.track({action:"loaded",eventName:"chromeExt/extension-loaded",objectId:"extension",oldVersion:e})}facebookSignInButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/facebookSignIn-button-click",object:"button",objectId:"facebookSignIn",placement:e})}facebookSignUpButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/facebookSignUp-button-click",object:"button",objectId:"facebookSignUp",placement:e})}fail(e,t,n,r){return this.gnar.track({action:"fail",eventName:"chromeExt/fail",extensionPart:e,failType:t,crashUUID:n,errorMessage:r},{lite:!1,sendUserIfExists:!0})}failWithoutUser(e,t,n,r){return this.gnar.track({action:"failWithoutUser",eventName:"chromeExt/failWithoutUser",extensionPart:e,failType:t,crashUUID:n,errorMessage:r},{lite:!0,sendInstance:!0,sendBrowser:!0,sendUser:!1,sendUserIfExists:!1})}featuresUnavailablePopupDisableButtonClick(){return this.gnar.track({action:"click",eventName:"chromeExt/featuresUnavailablePopupDisable-button-click",object:"button",objectId:"featuresUnavailablePopupDisable",placement:"featuresUnavailablePopup"})}featuresUnavailablePopupDismissButtonClick(){return this.gnar.track({action:"click",eventName:"chromeExt/featuresUnavailablePopupDismiss-button-click",object:"button",objectId:"featuresUnavailablePopupDismiss",placement:"featuresUnavailablePopup"})}featuresUnavailablePopupShow(){return this.gnar.track({action:"show",eventName:"chromeExt/featuresUnavailable-popup-show",object:"popup",objectId:"featuresUnavailable"})}feedbackFormSubmit(e,t,n,r){return this.gnar.track({action:"submit",eventName:"chromeExt/feedback-form-submit",object:"form",objectId:"feedback",mood:e,uiType:t,domain:n,message:r})}feedbackPopupShow(){return this.gnar.track({action:"show",eventName:"chromeExt/feedback-popup-show",object:"popup",objectId:"feedback",placement:"gdocs"})}feedbackSentButtonClick(e,t,n){return this.gnar.track({action:"click",eventName:"chromeExt/feedbackSent-button-click",object:"button",objectId:"feedbackSent",feedback:e,placement:t,score:n})}firstAcceptFooterShow(e,t,n){return this.gnar.track({action:"show",eventName:"chromeExt/firstAccept-footer-show",object:"footer",objectId:"firstAccept",category:e,placement:t,domainCategory:n})}followupPopoverCloseButtonClick(){return this.gnar.track({action:"click",eventName:"chromeExt/followup-popoverCloseButton-click",object:"popoverCloseButton",objectId:"followup",placement:"onboardingFollowupPopover"})}followupPopoverShow(){return this.gnar.track({action:"show",eventName:"chromeExt/followup-popover-show",object:"popover",objectId:"followup"})}followupSeeWhereItWorksButtonClick(){return this.gnar.track({action:"click",eventName:"chromeExt/followup-seeWhereItWorksButton-click",object:"seeWhereItWorksButton",objectId:"followup",placement:"onboardingFollowupPopover"})}followupTimeSet(e){return this.gnar.track({action:"set",eventName:"chromeExt/followup-time-set",object:"time",objectId:"followup",followupTimestamp:e})}freePremiumCardShow(e,t,n){return this.gnar.track({action:"show",eventName:"chromeExt/freePremium-card-show",object:"card",objectId:"freePremium",outcome:e,sessionUuid:t,domainCategory:n})}freePremiumSuggestionAcceptButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/freePremiumSuggestionAccept-button-click",object:"button",objectId:"freePremiumSuggestionAccept",placement:e})}freePremiumUphookPopupButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/freePremiumUphookPopup-button-click",object:"button",objectId:"freePremiumUphookPopup",placement:e})}freePremiumUphookPopupShow(e){return this.gnar.track({action:"show",eventName:"chromeExt/freePremiumUphook-popup-show",object:"popup",objectId:"freePremiumUphook",blocked:e})}gButtonClick(e,t,n,r,i,o,s,a,c,l,u,d,h){return this.gnar.track({action:"click",eventName:"chromeExt/g-button-click",object:"button",objectId:"g",assistantType:e,docId:t,hasTone:n,numAlerts:r,numClarityAlerts:i,numInlineAlerts:o,numPriorityAlerts:s,numWords:a,numberOfAdvancedAlerts:c,numberOfCriticalAlerts:l,placement:u,sessionUuid:d,tone:h})}gButtonInitialized(e,t,n,r,i){return this.gnar.track({action:"initialized",eventName:"chromeExt/g-button-initialized",object:"button",objectId:"g",duration:e,emogenieShown:t,suggestionCount:n,type:r,sessionUuid:i})}gButtonShow(e,t){return this.gnar.track({action:"show",eventName:"chromeExt/g-button-show",object:"button",objectId:"g",assistantAvailable:e,status:t})}gOSAssistantAppletClose(e){return this.gnar.track({action:"close",eventName:"chromeExt/gOS/assistant-applet-close",feature:"gOS",object:"applet",objectId:"assistant",assistantView:e})}gOSAssistantAppletInteractionReady(e,t,n){return this.gnar.track({action:"interactionReady",eventName:"chromeExt/gOS/assistant-applet-interactionReady",feature:"gOS",object:"applet",objectId:"assistant",assistantView:e,duration:t,success:n})}gOSAssistantAppletVisuallyReady(e,t){return this.gnar.track({action:"visuallyReady",eventName:"chromeExt/gOS/assistant-applet-visuallyReady",feature:"gOS",object:"applet",objectId:"assistant",assistantView:e,duration:t})}gbBillingMigrationCloseButtonClick(){return this.gnar.track({action:"click",eventName:"chromeExt/gbBillingMigrationClose-button-click",object:"button",objectId:"gbBillingMigrationClose",placement:"AccountMigrationNotification"})}gbBillingMigrationNotificationShow(){return this.gnar.track({action:"show",eventName:"chromeExt/gbBillingMigration-notification-show",object:"notification",objectId:"gbBillingMigration"})}gbBillingMigrationUpdateBillingButtonClick(){return this.gnar.track({action:"click",eventName:"chromeExt/gbBillingMigrationUpdateBilling-button-click",object:"button",objectId:"gbBillingMigrationUpdateBilling",placement:"AccountMigrationNotification"})}gbPromptAcceptClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/gbPrompt-accept-click",object:"accept",objectId:"gbPrompt",patternName:e})}gbPromptDismissClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/gbPrompt-dismiss-click",object:"dismiss",objectId:"gbPrompt",patternName:e})}gbPromptFormShow(e){return this.gnar.track({action:"show",eventName:"chromeExt/gbPrompt-form-show",object:"form",objectId:"gbPrompt",patternName:e})}gdocsEditorInit(e,t,n,r){return this.gnar.track({action:"init",eventName:"chromeExt/gdocs/editor-init",feature:"gdocs",object:"editor",docId:e,mode:t,cssBundle:n,jsBundle:r})}gdocsFeaturesUnavailablePopupDisableButtonClick(){return this.gnar.track({action:"click",eventName:"chromeExt/gdocs/featuresUnavailablePopupDisable-button-click",feature:"gdocs",object:"button",objectId:"featuresUnavailablePopupDisable",placement:"featuresUnavailablePopup"})}gdocsFeaturesUnavailablePopupDismissButtonClick(){return this.gnar.track({action:"click",eventName:"chromeExt/gdocs/featuresUnavailablePopupDismiss-button-click",feature:"gdocs",object:"button",objectId:"featuresUnavailablePopupDismiss",placement:"featuresUnavailablePopup"})}gdocsFeaturesUnavailablePopupShow(){return this.gnar.track({action:"show",eventName:"chromeExt/gdocs/featuresUnavailable-popup-show",feature:"gdocs",object:"popup",objectId:"featuresUnavailable"})}gdocsLargeDocumentButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/gdocs/largeDocument-button-click",feature:"gdocs",object:"button",objectId:"largeDocument",placement:e})}gdocsLargeDocumentPopupShow(){return this.gnar.track({action:"show",eventName:"chromeExt/gdocs/largeDocument-popup-show",feature:"gdocs",object:"popup",objectId:"largeDocument"})}gdocsNotificationButtonClick(e,t,n,r,i,o,s,a){return this.gnar.track({action:"click",eventName:"chromeExt/gdocs/notification-button-click",feature:"gdocs",object:"button",objectId:"notification",isDocumentOwner:e,placement:t,docAlertCount:n,documentLength:r,inlineAlertCount:i,nonHiddenClarityAlertCount:o,nonInlineAlertCount:s,notificationType:a})}gdocsOfflinePageReloadButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/gdocs/offlinePageReload-button-click",feature:"gdocs",object:"button",objectId:"offlinePageReload",placement:e})}gdocsOfflinePopupShow(){return this.gnar.track({action:"show",eventName:"chromeExt/gdocs/offline-popup-show",feature:"gdocs",object:"popup",objectId:"offline"})}gdocsOpenEditorButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/gdocs/openEditor-button-click",feature:"gdocs",object:"button",objectId:"openEditor",placement:e})}gdocsPlagiarismAlertEditToLook(){return this.gnar.track({action:"editToLook",eventName:"chromeExt/gdocs/plagiarism-alert-editToLook",feature:"gdocs",object:"alert",objectId:"plagiarism"})}gdocsPlagiarismButtonClick(){return this.gnar.track({action:"click",eventName:"chromeExt/gdocs/plagiarism-button-click",feature:"gdocs",object:"button",objectId:"plagiarism"})}gdocsPremiumUphookButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/gdocs/premiumUphook-button-click",feature:"gdocs",object:"button",objectId:"premiumUphook",placement:e})}gdocsRegisterPromptButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/gdocs/registerPrompt-button-click",feature:"gdocs",object:"button",objectId:"registerPrompt",placement:e})}gdocsRegisterPromptPopupShow(){return this.gnar.track({action:"show",eventName:"chromeExt/gdocs/registerPrompt-popup-show",feature:"gdocs",object:"popup",objectId:"registerPrompt"})}gdocsShareGGOMainPopupDismissButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/gdocs/shareGGOMainPopupDismiss-button-click",feature:"gdocs",object:"button",objectId:"shareGGOMainPopupDismiss",placement:e})}gdocsShareGGOMainPopupOpenAssistantButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/gdocs/shareGGOMainPopupOpenAssistant-button-click",feature:"gdocs",object:"button",objectId:"shareGGOMainPopupOpenAssistant",placement:e})}gdocsShareGGOMainPopupPopupShow(){return this.gnar.track({action:"show",eventName:"chromeExt/gdocs/shareGGOMainPopup-popup-show",feature:"gdocs",object:"popup",objectId:"shareGGOMainPopup"})}gdocsShareGGOPromptPopupPopupShow(){return this.gnar.track({action:"show",eventName:"chromeExt/gdocs/shareGGOPromptPopup-popup-show",feature:"gdocs",object:"popup",objectId:"shareGGOPromptPopup"})}gdocsShareModalButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/gdocs/shareModal-button-click",feature:"gdocs",object:"button",objectId:"shareModal",placement:e})}gdocsShareModalInviteNudgeButtonClick(e,t,n,r){return this.gnar.track({action:"click",eventName:"chromeExt/gdocs/shareModalInviteNudge-button-click",feature:"gdocs",object:"button",objectId:"shareModalInviteNudge",eligibleEmails:e,isInviting:t,placement:n,totalEmails:r})}gdocsShareModalInviteNudgePopupShow(e){return this.gnar.track({action:"show",eventName:"chromeExt/gdocs/shareModalInviteNudge-popup-show",feature:"gdocs",object:"popup",objectId:"shareModalInviteNudge",isOwnerWithNoCollaborators:e})}gdocsShareModalSelectorErrorDismiss(){return this.gnar.track({action:"dismiss",eventName:"chromeExt/gdocs/shareModalSelector-error-dismiss",feature:"gdocs",object:"error",objectId:"shareModalSelector"})}gdocsSharedDocumentButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/gdocs/sharedDocument-button-click",feature:"gdocs",object:"button",objectId:"sharedDocument",placement:e})}gdocsSharedDocumentDismissClick(){return this.gnar.track({action:"click",eventName:"chromeExt/gdocs/sharedDocument-dismiss-click",feature:"gdocs",object:"dismiss",objectId:"sharedDocument"})}gdocsSharedDocumentPopupShow(){return this.gnar.track({action:"show",eventName:"chromeExt/gdocs/sharedDocument-popup-show",feature:"gdocs",object:"popup",objectId:"sharedDocument"})}gdocsShowPremiumAlertsToggleClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/gdocs/showPremiumAlerts-toggle-click",feature:"gdocs",object:"toggle",objectId:"showPremiumAlerts",state:e})}gdocsSidebarChangeLensButtonClick(e,t,n,r,i){return this.gnar.track({action:"click",eventName:"chromeExt/gdocsSidebar/changeLens-button-click",feature:"gdocsSidebar",object:"button",objectId:"changeLens",lens:e,numAllAlerts:t,numChars:n,numPriorityAlerts:r,placement:i})}gdocsSidebarClose(e,t,n,r,i,o,s,a){return this.gnar.track({action:"close",eventName:"chromeExt/gdocs-sidebar-close",object:"sidebar",objectId:"gdocs",isDocumentOwner:e,reason:t,docAlertCount:n,documentLength:r,inlineAlertCount:i,nonHiddenClarityAlertCount:o,nonInlineAlertCount:s,notificationType:a})}gdocsSidebarGdocsSidebarClose(e,t,n,r,i,o,s,a){return this.gnar.track({action:"close",eventName:"chromeExt/gdocsSidebar/gdocs-sidebar-close",feature:"gdocsSidebar",object:"sidebar",objectId:"gdocs",isDocumentOwner:e,reason:t,docAlertCount:n,documentLength:r,inlineAlertCount:i,nonHiddenClarityAlertCount:o,nonInlineAlertCount:s,notificationType:a})}gdocsSidebarGdocsSidebarReady(e,t,n,r,i,o){return this.gnar.track({action:"ready",eventName:"chromeExt/gdocsSidebar/gdocs-sidebar-ready",feature:"gdocsSidebar",object:"sidebar",objectId:"gdocs",sessionUuid:e,success:t,targetFeature:n,duration:r,source:i,uiType:o})}gdocsSidebarGdocsSidebarShow(e,t,n,r,i,o,s,a,c,l,u){return this.gnar.track({action:"show",eventName:"chromeExt/gdocsSidebar/gdocs-sidebar-show",feature:"gdocsSidebar",object:"sidebar",objectId:"gdocs",isDocumentOwner:e,reason:t,docAlertCount:n,documentLength:r,inlineAlertCount:i,nonHiddenClarityAlertCount:o,nonInlineAlertCount:s,notificationType:a,openMs:c,source:l,uiType:u})}gdocsSidebarNotificationSidebarShow(e,t,n,r,i,o,s){return this.gnar.track({action:"show",eventName:"chromeExt/gdocsSidebar/notification-sidebar-show",feature:"gdocsSidebar",object:"sidebar",objectId:"notification",isDocumentOwner:e,docAlertCount:t,documentLength:n,inlineAlertCount:r,nonHiddenClarityAlertCount:i,nonInlineAlertCount:o,notificationType:s})}gdocsSidebarOpenLensButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/gdocsSidebar/openLens-button-click",feature:"gdocsSidebar",object:"button",objectId:"openLens",lensName:e})}gdocsSidebarReady(e,t,n,r,i,o){return this.gnar.track({action:"ready",eventName:"chromeExt/gdocs-sidebar-ready",object:"sidebar",objectId:"gdocs",sessionUuid:e,success:t,targetFeature:n,duration:r,source:i,uiType:o})}gdocsSidebarShow(e,t,n,r,i,o,s,a,c,l,u){return this.gnar.track({action:"show",eventName:"chromeExt/gdocs-sidebar-show",object:"sidebar",objectId:"gdocs",isDocumentOwner:e,reason:t,docAlertCount:n,documentLength:r,inlineAlertCount:i,nonHiddenClarityAlertCount:o,nonInlineAlertCount:s,notificationType:a,openMs:c,source:l,uiType:u})}gdocsVersionMismatchPopupDismissButtonClick(){return this.gnar.track({action:"click",eventName:"chromeExt/gdocs/versionMismatchPopupDismiss-button-click",feature:"gdocs",object:"button",objectId:"versionMismatchPopupDismiss",placement:"versionMismatchPopup"})}gdocsVersionMismatchPopupReloadButtonClick(){return this.gnar.track({action:"click",eventName:"chromeExt/gdocs/versionMismatchPopupReload-button-click",feature:"gdocs",object:"button",objectId:"versionMismatchPopupReload",placement:"versionMismatchPopup"})}gdocsVersionMismatchPopupShow(){return this.gnar.track({action:"show",eventName:"chromeExt/gdocs/versionMismatch-popup-show",feature:"gdocs",object:"popup",objectId:"versionMismatch"})}getGBButtonClick(e,t,n,r){return this.gnar.track({action:"click",eventName:"chromeExt/getGB-button-click",object:"button",objectId:"getGB",placement:e,bannerType:t,hasToneSuggestions:n,siteCategory:r})}getGBButtonShow(e,t,n){return this.gnar.track({action:"show",eventName:"chromeExt/getGB-button-show",object:"button",objectId:"getGB",placement:e,hasToneSuggestions:t,siteCategory:n})}getGBDismissClick(e,t,n){return this.gnar.track({action:"click",eventName:"chromeExt/getGB-dismiss-click",object:"dismiss",objectId:"getGB",placement:e,hasToneSuggestions:t,siteCategory:n})}getPremiumButtonClick(e,t,n,r,i,o,s,a,c,l,u,d,h){return this.gnar.track({action:"click",eventName:"chromeExt/getPremium-button-click",object:"button",objectId:"getPremium",placement:e,bannerType:t,clarityAlerts:n,correctnessAlerts:r,deliveryAlerts:i,engagementAlerts:o,inline:s,numberOfAdvancedAlerts:a,numberOfCriticalAlerts:c,sessionUuid:l,upgradeHookName:u,upgradeHookSlot:d,upgradeHookVariant:h})}getPremiumButtonShow(e,t,n,r,i,o,s,a,c,l,u,d,h){return this.gnar.track({action:"show",eventName:"chromeExt/getPremium-button-show",object:"button",objectId:"getPremium",placement:e,bannerType:t,clarityAlerts:n,correctnessAlerts:r,deliveryAlerts:i,engagementAlerts:o,inline:s,numberOfAdvancedAlerts:a,numberOfCriticalAlerts:c,sessionUuid:l,upgradeHookName:u,upgradeHookSlot:d,upgradeHookVariant:h})}getStartedChecklistComplete(e){return this.gnar.track({action:"complete",eventName:"chromeExt/getStarted-checklist-complete",object:"checklist",objectId:"getStarted",placement:e})}getStartedChecklistReview(e){return this.gnar.track({action:"review",eventName:"chromeExt/getStarted-checklist-review",object:"checklist",objectId:"getStarted",placement:e})}getStartedChecklistShow(e,t){return this.gnar.track({action:"show",eventName:"chromeExt/getStarted-checklist-show",object:"checklist",objectId:"getStarted",stepsCompleted:e,type:t})}getStartedItemCollapse(e,t){return this.gnar.track({action:"collapse",eventName:"chromeExt/getStarted-item-collapse",object:"item",objectId:"getStarted",status:e,type:t})}getStartedItemExpand(e,t){return this.gnar.track({action:"expand",eventName:"chromeExt/getStarted-item-expand",object:"item",objectId:"getStarted",status:e,type:t})}getStartedLinkClick(e,t,n,r,i){return this.gnar.track({action:"click",eventName:"chromeExt/getStarted-link-click",object:"link",objectId:"getStarted",installedProducts:e,link:t,type:n,completedItemsCount:r,totalItemsCount:i})}getStartedSectionClick(e,t){return this.gnar.track({action:"click",eventName:"chromeExt/getStarted-section-click",object:"section",objectId:"getStarted",status:e,type:t})}getStartedTooltipShow(e){return this.gnar.track({action:"show",eventName:"chromeExt/getStarted-tooltip-show",object:"tooltip",objectId:"getStarted",placement:e})}getStartedUseCasesLinkClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/getStarted-useCasesLink-click",object:"useCasesLink",objectId:"getStarted",link:e})}getStartedUseCasesShow(){return this.gnar.track({action:"show",eventName:"chromeExt/getStarted-useCases-show",object:"useCases",objectId:"getStarted"})}goalsFormSuccess(e,t,n,r,i,o,s){return this.gnar.track({action:"success",eventName:"chromeExt/goals-form-success",object:"form",objectId:"goals",domain:e,intent:t,source:n,academicType:r,audience:i,citationFormat:o,style:s})}goalsPopupShow(e){return this.gnar.track({action:"show",eventName:"chromeExt/goals-popup-show",object:"popup",objectId:"goals",source:e})}googleSignInButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/googleSignIn-button-click",object:"button",objectId:"googleSignIn",placement:e})}googleSignUpButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/googleSignUp-button-click",object:"button",objectId:"googleSignUp",placement:e})}grantAccessToAllSites(){return this.gnar.track({action:"grantAccessToAllSites",eventName:"chromeExt/grantAccessToAllSites"})}grantAccessToSpecificSite(){return this.gnar.track({action:"grantAccessToSpecificSite",eventName:"chromeExt/grantAccessToSpecificSite"})}hwrAssignmentsReport(e,t,n,r,i){return this.gnar.track({action:"report",eventName:"chromeExt/hwr-assignments-report",object:"assignments",objectId:"hwr",globalDisable:e,internalGate:t,availableInBackendSettings:n,enabledByDefaultInBackendSettings:r,enabledInBackendSettings:i})}hwrButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/hwr-button-click",object:"button",objectId:"hwr",documentId:e})}hwrButtonShow(e){return this.gnar.track({action:"show",eventName:"chromeExt/hwr-button-show",object:"button",objectId:"hwr",documentId:e})}hwrClipboardPermissionAllow(e){return this.gnar.track({action:"allow",eventName:"chromeExt/hwr-clipboardPermission-allow",object:"clipboardPermission",objectId:"hwr",documentId:e})}hwrClipboardPermissionDeny(e){return this.gnar.track({action:"deny",eventName:"chromeExt/hwr-clipboardPermission-deny",object:"clipboardPermission",objectId:"hwr",documentId:e})}hwrClipboardPermissionRequest(e){return this.gnar.track({action:"request",eventName:"chromeExt/hwr-clipboardPermission-request",object:"clipboardPermission",objectId:"hwr",documentId:e})}hwrFeatureOptIn(e){return this.gnar.track({action:"optIn",eventName:"chromeExt/hwr-feature-optIn",object:"feature",objectId:"hwr",documentId:e})}hwrFeatureOptOut(e){return this.gnar.track({action:"optOut",eventName:"chromeExt/hwr-feature-optOut",object:"feature",objectId:"hwr",documentId:e})}hwrFeedbackSubmit(e,t,n){return this.gnar.track({action:"submit",eventName:"chromeExt/hwr-feedback-submit",object:"feedback",objectId:"hwr",documentId:e,domain:t,feedback:n})}hwrGiveFeedbackButtonClick(e,t){return this.gnar.track({action:"click",eventName:"chromeExt/hwr-giveFeedbackButton-click",object:"giveFeedbackButton",objectId:"hwr",documentId:e,domain:t})}hwrKnownSourceDetect(e,t,n){return this.gnar.track({action:"detect",eventName:"chromeExt/hwr-knownSource-detect",object:"knownSource",objectId:"hwr",sourceDomain:e,textLength:t,promptDetected:n})}hwrKnownSourcePaste(e,t,n,r){return this.gnar.track({action:"paste",eventName:"chromeExt/hwr-knownSource-paste",object:"knownSource",objectId:"hwr",documentId:e,sourceDomain:t,textLength:n,promptDetected:r})}hwrOptInPopupClose(e){return this.gnar.track({action:"close",eventName:"chromeExt/hwr-optInPopup-close",object:"optInPopup",objectId:"hwr",documentId:e})}hwrOptInPopupShow(e){return this.gnar.track({action:"show",eventName:"chromeExt/hwr-optInPopup-show",object:"optInPopup",objectId:"hwr",documentId:e})}hwrPlagiarismButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/hwr-plagiarismButton-click",object:"plagiarismButton",objectId:"hwr",documentId:e})}hwrPlagiarismButtonShow(e){return this.gnar.track({action:"show",eventName:"chromeExt/hwr-plagiarismButton-show",object:"plagiarismButton",objectId:"hwr",documentId:e})}hwrReportButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/hwr-reportButton-click",object:"reportButton",objectId:"hwr",documentId:e})}hwrSuggestionApply(e,t,n,r){return this.gnar.track({action:"apply",eventName:"chromeExt/hwr-suggestion-apply",object:"suggestion",objectId:"hwr",documentId:e,product:t,textLength:n,vendor:r})}hwrToastShow(e,t,n){return this.gnar.track({action:"show",eventName:"chromeExt/hwr-toast-show",object:"toast",objectId:"hwr",documentId:e,level:t,toastType:n})}hwrTrackingEnableForDomain(e,t){return this.gnar.track({action:"enableForDomain",eventName:"chromeExt/hwr-tracking-enableForDomain",object:"tracking",objectId:"hwr",documentId:e,domain:t})}hwrTrackingPause(e){return this.gnar.track({action:"pause",eventName:"chromeExt/hwr-tracking-pause",object:"tracking",objectId:"hwr",documentId:e})}hwrTrackingStart(e,t,n){return this.gnar.track({action:"start",eventName:"chromeExt/hwr-tracking-start",object:"tracking",objectId:"hwr",documentId:e,isResume:t,untrackedTextLength:n})}hwrUnknownSourcePaste(e,t){return this.gnar.track({action:"paste",eventName:"chromeExt/hwr-unknownSource-paste",object:"unknownSource",objectId:"hwr",documentId:e,textLength:t})}initializedExtension(e,t,n){return this.gnar.track({eventName:"chromeExt/initialized-extension",object:"extension",objectId:"initialized",experiment:e,sessionId:t,url:n},{lite:!0,sendInstance:!1,sendBrowser:!1,sendUser:!1,sendUserIfExists:!1})}inlineCardSignInSignUpButtonClick(e,t,n,r,i,o){return this.gnar.track({action:"click",eventName:"chromeExt/inlineCardSignInSignUp-button-click",object:"button",objectId:"inlineCardSignInSignUp",cardAction:e,cardType:t,name:n,placement:r,userType:i,authType:o})}inlineCardSignInSignUpPopupShow(e,t,n){return this.gnar.track({action:"show",eventName:"chromeExt/inlineCardSignInSignUp-popup-show",object:"popup",objectId:"inlineCardSignInSignUp",cardType:e,name:t,userType:n})}inlineYellowUnderlineClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/inline-yellowUnderline-click",object:"yellowUnderline",objectId:"inline",sessionUuid:e})}inlineYellowUnderlineShow(e){return this.gnar.track({action:"show",eventName:"chromeExt/inline-yellowUnderline-show",object:"yellowUnderline",objectId:"inline",sessionUuid:e})}install(e){return this.gnar.track({action:"install",eventName:"chromeExt/install",installSource:e})}ipmMessageClick(e,t,n){return this.gnar.track({action:"click",eventName:"chromeExt/ipm-message-click",object:"message",objectId:"ipm",messageId:e,sessionUuid:t,campaignName:n})}ipmMessageClose(e,t,n,r){return this.gnar.track({action:"close",eventName:"chromeExt/ipm-message-close",object:"message",objectId:"ipm",actionOnClick:e,messageId:t,sessionUuid:n,campaignName:r})}ipmMessageCooldown(e,t){return this.gnar.track({action:"cooldown",eventName:"chromeExt/ipm-message-cooldown",object:"message",objectId:"ipm",campaignName:e,remainingImpressions:t})}ipmMessageDelete(e,t,n,r){return this.gnar.track({action:"delete",eventName:"chromeExt/ipm-message-delete",object:"message",objectId:"ipm",deleteAction:e,messageId:t,sessionUuid:n,campaignName:r})}ipmMessageFailed(e){return this.gnar.track({action:"failed",eventName:"chromeExt/ipm-message-failed",object:"message",objectId:"ipm",reason:e})}ipmMessageGet(e,t,n,r,i,o,s){return this.gnar.track({action:"get",eventName:"chromeExt/ipm-message-get",object:"message",objectId:"ipm",isDocumentHidden:e,sessionStartTime:t,sessionTime:n,sessionUuid:r,trigger:i,alertsAccepted:o,documentId:s})}ipmMessageGlobalCooldown(){return this.gnar.track({action:"globalCooldown",eventName:"chromeExt/ipm-message-globalCooldown",object:"message",objectId:"ipm"})}ipmMessageImageLoadingError(e){return this.gnar.track({action:"imageLoadingError",eventName:"chromeExt/ipm-message-imageLoadingError",object:"message",objectId:"ipm",campaignName:e})}ipmMessageMatchCustomPayload(e){return this.gnar.track({action:"matchCustomPayload",eventName:"chromeExt/ipm-message-matchCustomPayload",object:"message",objectId:"ipm",type:e})}ipmMessageOpen(e,t,n){return this.gnar.track({action:"open",eventName:"chromeExt/ipm-message-open",object:"message",objectId:"ipm",messageId:e,sessionUuid:t,campaignName:n})}ipmMessageTrigger(e,t,n){return this.gnar.track({action:"trigger",eventName:"chromeExt/ipm-message-trigger",object:"message",objectId:"ipm",isTriggerAfterRateLimit:e,isTriggerEnabled:t,trigger:n})}keyboardShortcutShortcutKeysChanged(e){return this.gnar.track({action:"keysChanged",eventName:"chromeExt/keyboardShortcut-shortcut-keysChanged",object:"shortcut",objectId:"keyboardShortcut",kind:e})}keyboardShortcutShortcutTriggered(e){return this.gnar.track({action:"triggered",eventName:"chromeExt/keyboardShortcut-shortcut-triggered",object:"shortcut",objectId:"keyboardShortcut",kind:e})}knowledgeHubAlertDescriptionCopyButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/knowledgeHub/alert-descriptionCopyButton-click",feature:"knowledgeHub",object:"descriptionCopyButton",objectId:"alert",site:e})}knowledgeHubAlertPointPeopleClick(e,t){return this.gnar.track({action:"click",eventName:"chromeExt/knowledgeHub/alert-pointPeople-click",feature:"knowledgeHub",object:"pointPeople",objectId:"alert",actionOnClick:e,site:t})}knowledgeHubAlertRelatedMaterialsClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/knowledgeHub/alert-relatedMaterials-click",feature:"knowledgeHub",object:"relatedMaterials",objectId:"alert",site:e})}knowledgeHubAlertSuggestEditButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/knowledgeHub/alert-suggestEditButton-click",feature:"knowledgeHub",object:"suggestEditButton",objectId:"alert",site:e})}knowledgeHubFeatureToggleClick(e,t,n){return this.gnar.track({action:"click",eventName:"chromeExt/knowledgeHub/feature-toggle-click",feature:"knowledgeHub",object:"toggle",objectId:"feature",placement:e,site:t,state:n})}knowledgeHubKnowledgeHubOnboardingPopupShow(e,t){return this.gnar.track({action:"show",eventName:"chromeExt/knowledgeHub/knowledgeHubOnboarding-popup-show",feature:"knowledgeHub",object:"popup",objectId:"knowledgeHubOnboarding",onboardingType:e,site:t})}knowledgeHubOnboardingCloseButtonClick(e,t,n){return this.gnar.track({action:"click",eventName:"chromeExt/knowledgeHub/onboardingClose-button-click",feature:"knowledgeHub",object:"button",objectId:"onboardingClose",placement:"onboardingPopup",onboardingType:e,site:t,step:n})}knowledgeHubOnboardingNextButtonClick(e,t,n){return this.gnar.track({action:"click",eventName:"chromeExt/knowledgeHub/onboardingNext-button-click",feature:"knowledgeHub",object:"button",objectId:"onboardingNext",placement:"onboardingPopup",onboardingType:e,site:t,step:n})}knowledgeHubOnboardingSkipButtonClick(e,t,n){return this.gnar.track({action:"click",eventName:"chromeExt/knowledgeHub/onboardingSkip-button-click",feature:"knowledgeHub",object:"button",objectId:"onboardingSkip",placement:"onboardingPopup",onboardingType:e,site:t,step:n})}knowledgeHubTermDetailsCardClose(e,t,n,r){return this.gnar.track({action:"close",eventName:"chromeExt/knowledgeHub/termDetails-card-close",feature:"knowledgeHub",object:"card",objectId:"termDetails",duration:e,sessionUuid:t,site:n,termId:r})}languageSettingUpdate(e,t,n){return this.gnar.track({action:"update",eventName:"chromeExt/language-setting-update",object:"setting",objectId:"language",language:e,languageSource:t,isLikeCapi:n})}largeDocumentButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/largeDocument-button-click",object:"button",objectId:"largeDocument",placement:e})}largeDocumentPopupShow(){return this.gnar.track({action:"show",eventName:"chromeExt/largeDocument-popup-show",object:"popup",objectId:"largeDocument"})}learnMoreButtonClick(){return this.gnar.track({action:"click",eventName:"chromeExt/learnMore-button-click",object:"button",objectId:"learnMore",placement:"assistant"})}loadFail(e){return this.gnar.track({action:"fail",eventName:"chromeExt/load-fail",object:"load",errorMessage:e})}localExperimentUserAssign(e,t){return this.gnar.track({action:"assign",eventName:"chromeExt/localExperiment-user-assign",object:"user",objectId:"localExperiment",experiment_enabled:e,experiment_name:t})}logInFormClose(e,t){return this.gnar.track({action:"close",eventName:"chromeExt/logInForm-close",objectId:"logInForm",isSignUp:e,msSinceLoginClick:t})}logInFormSuccess(e,t,n){return this.gnar.track({action:"success",eventName:"chromeExt/logIn-form-success",object:"form",objectId:"logIn",extensionInitiated:e,isSignUp:t,timeFromLoginClick:n})}loginReminderBadgeShow(){return this.gnar.track({action:"show",eventName:"chromeExt/loginReminder-badge-show",object:"badge",objectId:"loginReminder"})}loginReminderCloseButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/loginReminderClose-button-click",object:"button",objectId:"loginReminderClose",placement:e})}loginReminderDoNotShowThisAgainButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/loginReminderDoNotShowThisAgain-button-click",object:"button",objectId:"loginReminderDoNotShowThisAgain",placement:e})}loginReminderPopupShow(){return this.gnar.track({action:"show",eventName:"chromeExt/loginReminder-popup-show",object:"popup",objectId:"loginReminder"})}logoutFormFail(e,t){return this.gnar.track({action:"fail",eventName:"chromeExt/logout-form-fail",object:"form",objectId:"logout",fieldErrors:e,formErrorMessage:t})}logoutFormSuccess(){return this.gnar.track({action:"success",eventName:"chromeExt/logout-form-success",object:"form",objectId:"logout"})}mutedAlertsCardTurnOffButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/mutedAlerts-cardTurnOffButton-click",object:"cardTurnOffButton",objectId:"mutedAlerts",placement:e})}mutedAlertsTurnBackOnButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/mutedAlerts-turnBackOnButton-click",object:"turnBackOnButton",objectId:"mutedAlerts",placement:e})}myGrammarlyButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/myGrammarly-button-click",object:"button",objectId:"myGrammarly",placement:e})}newDocumentButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/newDocument-button-click",object:"button",objectId:"newDocument",placement:e})}newToneDetectedPopupShow(){return this.gnar.track({action:"show",eventName:"chromeExt/newToneDetected-popup-show",object:"popup",objectId:"newToneDetected"})}noPaymentMethodSubscriptionCloseButtonClick(){return this.gnar.track({action:"click",eventName:"chromeExt/noPaymentMethodSubscriptionClose-button-click",object:"button",objectId:"noPaymentMethodSubscriptionClose",placement:"NoPaymentMethodSubscription"})}noPaymentMethodSubscriptionNotificationShow(){return this.gnar.track({action:"show",eventName:"chromeExt/noPaymentMethodSubscription-notification-show",object:"notification",objectId:"noPaymentMethodSubscription"})}noPaymentMethodSubscriptionUpdateBillingButtonClick(){return this.gnar.track({action:"click",eventName:"chromeExt/noPaymentMethodSubscriptionUpdateBilling-button-click",object:"button",objectId:"noPaymentMethodSubscriptionUpdateBilling",placement:"NoPaymentMethodSubscription"})}notificationButtonClick(e,t,n,r,i,o,s,a){return this.gnar.track({action:"click",eventName:"chromeExt/notification-button-click",object:"button",objectId:"notification",isDocumentOwner:e,placement:t,docAlertCount:n,documentLength:r,inlineAlertCount:i,nonHiddenClarityAlertCount:o,nonInlineAlertCount:s,notificationType:a})}notificationSidebarShow(e,t,n,r,i,o,s){return this.gnar.track({action:"show",eventName:"chromeExt/notification-sidebar-show",object:"sidebar",objectId:"notification",isDocumentOwner:e,docAlertCount:t,documentLength:n,inlineAlertCount:r,nonHiddenClarityAlertCount:i,nonInlineAlertCount:o,notificationType:s})}offlinePageReloadButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/offlinePageReload-button-click",object:"button",objectId:"offlinePageReload",placement:e})}offlinePopupShow(){return this.gnar.track({action:"show",eventName:"chromeExt/offline-popup-show",object:"popup",objectId:"offline"})}onboardingFollowupPopoverCloseButtonClick(){return this.gnar.track({action:"click",eventName:"chromeExt/onboarding/followup-popoverCloseButton-click",feature:"onboarding",object:"popoverCloseButton",objectId:"followup",placement:"onboardingFollowupPopover"})}onboardingFollowupPopoverShow(){return this.gnar.track({action:"show",eventName:"chromeExt/onboarding/followup-popover-show",feature:"onboarding",object:"popover",objectId:"followup"})}onboardingFollowupSeeWhereItWorksButtonClick(){return this.gnar.track({action:"click",eventName:"chromeExt/onboarding/followup-seeWhereItWorksButton-click",feature:"onboarding",object:"seeWhereItWorksButton",objectId:"followup",placement:"onboardingFollowupPopover"})}onboardingFollowupTimeSet(e){return this.gnar.track({action:"set",eventName:"chromeExt/onboarding/followup-time-set",feature:"onboarding",object:"time",objectId:"followup",followupTimestamp:e})}onboardingOnboardingStepOverlayShow(e){return this.gnar.track({action:"show",eventName:"chromeExt/onboarding/onboardingStep-overlay-show",feature:"onboarding",object:"overlay",objectId:"onboardingStep",step:e})}onboardingOverlayCloseButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/onboarding/overlayClose-button-click",feature:"onboarding",object:"button",objectId:"overlayClose",placement:e})}onboardingOverlayLetsWriteButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/onboarding/overlayLetsWrite-button-click",feature:"onboarding",object:"button",objectId:"overlayLetsWrite",placement:e})}onboardingOverlayShow(){return this.gnar.track({action:"show",eventName:"chromeExt/onboarding/overlay-show",feature:"onboarding",object:"overlay"})}onboardingPopupCloseButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/onboarding/popupClose-button-click",feature:"onboarding",object:"button",objectId:"popupClose",placement:e})}onboardingPopupShow(){return this.gnar.track({action:"show",eventName:"chromeExt/onboarding/popup-show",feature:"onboarding",object:"popup"})}onboardingRemindMeLaterButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/onboarding/remindMeLater-button-click",feature:"onboarding",object:"button",objectId:"remindMeLater",placement:"onboardingPopupWithReminder",option:e})}onboardingReminderPopoverCloseButtonClick(){return this.gnar.track({action:"click",eventName:"chromeExt/onboarding/reminder-popoverCloseButton-click",feature:"onboarding",object:"popoverCloseButton",objectId:"reminder",placement:"onboardingReminderPopover"})}onboardingReminderPopoverShow(){return this.gnar.track({action:"show",eventName:"chromeExt/onboarding/reminder-popover-show",feature:"onboarding",object:"popover",objectId:"reminder"})}onboardingReminderTakeATourButtonClick(){return this.gnar.track({action:"click",eventName:"chromeExt/onboarding/reminder-takeATourButton-click",feature:"onboarding",object:"takeATourButton",objectId:"reminder",placement:"onboardingReminderPopover"})}onboardingReminderTimeSet(e,t){return this.gnar.track({action:"set",eventName:"chromeExt/onboarding/reminder-time-set",feature:"onboarding",object:"time",objectId:"reminder",option:e,reminderTimestamp:t})}onboardingSkipButtonClick(e,t){return this.gnar.track({action:"click",eventName:"chromeExt/onboarding/skip-button-click",feature:"onboarding",object:"button",objectId:"skip",placement:e,step:t})}onboardingStepOverlayShow(e){return this.gnar.track({action:"show",eventName:"chromeExt/onboardingStep-overlay-show",object:"overlay",objectId:"onboardingStep",step:e})}onboardingTakeATourButtonClick(){return this.gnar.track({action:"click",eventName:"chromeExt/onboarding/takeATour-button-click",feature:"onboarding",object:"button",objectId:"takeATour",placement:"onboardingPopupWithReminder"})}onboardingWithReminderPopupShow(){return this.gnar.track({action:"show",eventName:"chromeExt/onboarding/withReminder-popup-show",feature:"onboarding",object:"popup",objectId:"withReminder"})}openAppButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/openApp-button-click",object:"button",objectId:"openApp",placement:e})}openEditorButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/openEditor-button-click",object:"button",objectId:"openEditor",placement:e})}openLensButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/openLens-button-click",object:"button",objectId:"openLens",lensName:e})}overlayCloseButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/overlayClose-button-click",object:"button",objectId:"overlayClose",placement:e})}overlayLetsWriteButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/overlayLetsWrite-button-click",object:"button",objectId:"overlayLetsWrite",placement:e})}overlayShow(){return this.gnar.track({action:"show",eventName:"chromeExt/overlay-show",object:"overlay"})}persistentStorageLoadFail(e){return this.gnar.track({action:"fail",eventName:"chromeExt/persistentStorage/load-fail",feature:"persistentStorage",object:"load",errorMessage:e})}persistentStorageValueLoadFail(e){return this.gnar.track({action:"fail",eventName:"chromeExt/persistentStorage/value-load-fail",feature:"persistentStorage",object:"load",objectId:"value",errorMessage:e})}persistentStorageValueLoadSuccess(){return this.gnar.track({action:"success",eventName:"chromeExt/persistentStorage/value-load-success",feature:"persistentStorage",object:"load",objectId:"value"})}persistentStorageValueLoadTimeout(){return this.gnar.track({action:"timeout",eventName:"chromeExt/persistentStorage/value-load-timeout",feature:"persistentStorage",object:"load",objectId:"value"})}personalizedInsightsConsentPopupButtonClick(e,t){return this.gnar.track({action:"click",eventName:"chromeExt/personalizedInsights/consentPopup-button-click",feature:"personalizedInsights",object:"button",objectId:"consentPopup",placement:"popup",actionType:e,id:t})}personalizedInsightsConsentPopupLog(e,t,n,r){return this.gnar.track({action:"log",eventName:"chromeExt/personalizedInsights/consentPopup-log",feature:"personalizedInsights",objectId:"consentPopup",data:e,id:t,timestamp:n,details:r})}personalizedInsightsConsentPopupShow(e,t){return this.gnar.track({action:"show",eventName:"chromeExt/personalizedInsights/consentPopup-show",feature:"personalizedInsights",objectId:"consentPopup",dataSharingConsent:e,id:t})}plagiarismAlertEditToLook(){return this.gnar.track({action:"editToLook",eventName:"chromeExt/plagiarism-alert-editToLook",object:"alert",objectId:"plagiarism"})}plagiarismButtonClick(){return this.gnar.track({action:"click",eventName:"chromeExt/plagiarism-button-click",object:"button",objectId:"plagiarism"})}popupCloseButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/popupClose-button-click",object:"button",objectId:"popupClose",placement:e})}popupShow(){return this.gnar.track({action:"show",eventName:"chromeExt/popup-show",object:"popup"})}premiumUngatingRenewalCtaButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/premiumUngatingRenewalCta-button-click",object:"button",objectId:"premiumUngatingRenewalCta",placement:e})}premiumUngatingRenewalDismissButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/premiumUngatingRenewalDismiss-button-click",object:"button",objectId:"premiumUngatingRenewalDismiss",placement:e})}premiumUngatingRenewalNotificationShow(e){return this.gnar.track({action:"show",eventName:"chromeExt/premiumUngatingRenewal-notification-show",object:"notification",objectId:"premiumUngatingRenewal",placement:e})}premiumUphookButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/premiumUphook-button-click",object:"button",objectId:"premiumUphook",placement:e})}proofitButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/proofit-button-click",object:"button",objectId:"proofit",placement:e})}proofitButtonDisabled(e){return this.gnar.track({action:"disabled",eventName:"chromeExt/proofit-button-disabled",object:"button",objectId:"proofit",reason:e})}proofitButtonEnabled(){return this.gnar.track({action:"enabled",eventName:"chromeExt/proofit-button-enabled",object:"button",objectId:"proofit"})}proofitFeedbackFormSubmit(e,t){return this.gnar.track({action:"submit",eventName:"chromeExt/proofit-feedbackForm-submit",object:"feedbackForm",objectId:"proofit",placement:"assistant",feedback:e,score:t})}proofitOrderCanceled(){return this.gnar.track({action:"canceled",eventName:"chromeExt/proofit-order-canceled",object:"order",objectId:"proofit"})}proofitOrderDone(){return this.gnar.track({action:"done",eventName:"chromeExt/proofit-order-done",object:"order",objectId:"proofit"})}proofitOrderReviewed(){return this.gnar.track({action:"reviewed",eventName:"chromeExt/proofit-order-reviewed",object:"order",objectId:"proofit"})}proofitOrderTurnaroundTimeInSeconds(e){return this.gnar.track({action:"turnaroundTimeInSeconds",eventName:"chromeExt/proofit-order-turnaroundTimeInSeconds",object:"order",objectId:"proofit",seconds:e})}proofitRequestFormShow(){return this.gnar.track({action:"show",eventName:"chromeExt/proofit-requestForm-show",object:"requestForm",objectId:"proofit"})}proofitRequestFormSubmit(){return this.gnar.track({action:"submit",eventName:"chromeExt/proofit-requestForm-submit",object:"requestForm",objectId:"proofit",placement:"assistant"})}recapPopupShow(e,t,n,r,i,o){return this.gnar.track({action:"show",eventName:"chromeExt/recap-popup-show",object:"popup",objectId:"recap",clarityCount:e,correctnessCount:t,deliveryCount:n,engagementCount:r,tonesDetectedCount:i,topThreeTones:o})}registerPromptButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/registerPrompt-button-click",object:"button",objectId:"registerPrompt",placement:e})}registerPromptPopupShow(){return this.gnar.track({action:"show",eventName:"chromeExt/registerPrompt-popup-show",object:"popup",objectId:"registerPrompt"})}remindMeLaterButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/remindMeLater-button-click",object:"button",objectId:"remindMeLater",placement:"onboardingPopupWithReminder",option:e})}reminderPopoverCloseButtonClick(){return this.gnar.track({action:"click",eventName:"chromeExt/reminder-popoverCloseButton-click",object:"popoverCloseButton",objectId:"reminder",placement:"onboardingReminderPopover"})}reminderPopoverShow(){return this.gnar.track({action:"show",eventName:"chromeExt/reminder-popover-show",object:"popover",objectId:"reminder"})}reminderTakeATourButtonClick(){return this.gnar.track({action:"click",eventName:"chromeExt/reminder-takeATourButton-click",object:"takeATourButton",objectId:"reminder",placement:"onboardingReminderPopover"})}reminderTimeSet(e,t){return this.gnar.track({action:"set",eventName:"chromeExt/reminder-time-set",object:"time",objectId:"reminder",option:e,reminderTimestamp:t})}removeAccessToAllSites(){return this.gnar.track({action:"removeAccessToAllSites",eventName:"chromeExt/removeAccessToAllSites"})}removeAccessToSpecificSite(){return this.gnar.track({action:"removeAccessToSpecificSite",eventName:"chromeExt/removeAccessToSpecificSite"})}safariMigrationInlineCardClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/safariMigration-inlineCard-click",object:"inlineCard",objectId:"safariMigration",migrationRequestType:e})}safariMigrationInlineCardShow(e){return this.gnar.track({action:"show",eventName:"chromeExt/safariMigration-inlineCard-show",object:"inlineCard",objectId:"safariMigration",migrationRequestType:e})}safariMigrationPopupButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/safariMigrationPopup-button-click",object:"button",objectId:"safariMigrationPopup",placement:e})}safariMigrationPopupShow(){return this.gnar.track({action:"show",eventName:"chromeExt/safariMigration-popup-show",object:"popup",objectId:"safariMigration"})}sessionEndWithConnectionStats(e,t,n,r,i,o,s,a,c,l,u,d,h,p,g,f,m,b,y){return this.gnar.track({action:"endWithConnectionStats",eventName:"chromeExt/session-endWithConnectionStats",object:"session",alertsReceived:e,inlineAlertsReceived:t,integrationUuid:n,neverConnected:r,numberOfDisconnects:i,numberOfIdleTimeouts:o,numberOfSuccessfulConnects:s,sessionConnectedDuration:a,sessionDisconnectedDuration:c,sessionIdleDuration:l,sessionKind:u,firstTextCheckCharacterCount:d,sessionInitDuration:h,sessionUuid:p,timeToFirstCapiAckForEligibleText:g,timeToFirstCapiFinishForEligibleText:f,timeToFirstEligibleTextCheck:m,timeToFirstInlineAlertFound:b,timeToFirstNonInlineAlertFound:y})}settingsShowEmojiForDetectedTonesToggleClick(e,t){return this.gnar.track({action:"click",eventName:"chromeExt/settings/showEmojiForDetectedTones-toggle-click",feature:"settings",object:"toggle",objectId:"showEmojiForDetectedTones",domain:e,state:t})}shareGGOMainPopupDismissButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/shareGGOMainPopupDismiss-button-click",object:"button",objectId:"shareGGOMainPopupDismiss",placement:e})}shareGGOMainPopupOpenAssistantButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/shareGGOMainPopupOpenAssistant-button-click",object:"button",objectId:"shareGGOMainPopupOpenAssistant",placement:e})}shareGGOMainPopupPopupShow(){return this.gnar.track({action:"show",eventName:"chromeExt/shareGGOMainPopup-popup-show",object:"popup",objectId:"shareGGOMainPopup"})}shareGGOPromptPopupPopupShow(){return this.gnar.track({action:"show",eventName:"chromeExt/shareGGOPromptPopup-popup-show",object:"popup",objectId:"shareGGOPromptPopup"})}shareModalButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/shareModal-button-click",object:"button",objectId:"shareModal",placement:e})}shareModalInviteNudgeButtonClick(e,t,n,r){return this.gnar.track({action:"click",eventName:"chromeExt/shareModalInviteNudge-button-click",object:"button",objectId:"shareModalInviteNudge",eligibleEmails:e,isInviting:t,placement:n,totalEmails:r})}shareModalInviteNudgePopupShow(e){return this.gnar.track({action:"show",eventName:"chromeExt/shareModalInviteNudge-popup-show",object:"popup",objectId:"shareModalInviteNudge",isOwnerWithNoCollaborators:e})}shareModalSelectorErrorDismiss(){return this.gnar.track({action:"dismiss",eventName:"chromeExt/shareModalSelector-error-dismiss",object:"error",objectId:"shareModalSelector"})}sharedDocumentButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/sharedDocument-button-click",object:"button",objectId:"sharedDocument",placement:e})}sharedDocumentDismissClick(){return this.gnar.track({action:"click",eventName:"chromeExt/sharedDocument-dismiss-click",object:"dismiss",objectId:"sharedDocument"})}sharedDocumentPopupShow(){return this.gnar.track({action:"show",eventName:"chromeExt/sharedDocument-popup-show",object:"popup",objectId:"sharedDocument"})}showPremiumAlertsToggleClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/showPremiumAlerts-toggle-click",object:"toggle",objectId:"showPremiumAlerts",state:e})}signInButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/signIn-button-click",object:"button",objectId:"signIn",placement:e})}signInFormFail(e,t,n){return this.gnar.track({action:"fail",eventName:"chromeExt/signIn-form-fail",object:"form",objectId:"signIn",placement:e,fieldErrors:t,formErrorMessage:n})}signInFormSuccess(e){return this.gnar.track({action:"success",eventName:"chromeExt/signIn-form-success",object:"form",objectId:"signIn",placement:e})}signUpButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/signUp-button-click",object:"button",objectId:"signUp",placement:e})}signUpFormFail(e,t,n){return this.gnar.track({action:"fail",eventName:"chromeExt/signUp-form-fail",object:"form",objectId:"signUp",placement:e,fieldErrors:t,formErrorMessage:n})}signUpFormSuccess(e){return this.gnar.track({action:"success",eventName:"chromeExt/signUp-form-success",object:"form",objectId:"signUp",placement:e})}siteIsBrowserDisabled(){return this.gnar.track({action:"siteIsBrowserDisabled",eventName:"chromeExt/siteIsBrowserDisabled"})}skipButtonClick(e,t){return this.gnar.track({action:"click",eventName:"chromeExt/skip-button-click",object:"button",objectId:"skip",placement:e,step:t})}snippetsAppActionClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/snippets/appAction-click",feature:"snippets",objectId:"appAction",appId:e})}snippetsAppActionsListShow(){return this.gnar.track({action:"show",eventName:"chromeExt/snippets/appActionsList-show",feature:"snippets",objectId:"appActionsList"})}snippetsFeatureInit(){return this.gnar.track({action:"init",eventName:"chromeExt/snippets/feature-init",feature:"snippets",objectId:"feature"})}snippetsFromAppActionsListShow(){return this.gnar.track({action:"show",eventName:"chromeExt/snippets/fromAppActionsList-show",feature:"snippets",objectId:"fromAppActionsList"})}snippetsInlineSnippetCreated(){return this.gnar.track({action:"created",eventName:"chromeExt/snippets/inlineSnippet-created",feature:"snippets",objectId:"inlineSnippet"})}snippetsLinkOpened(e){return this.gnar.track({action:"opened",eventName:"chromeExt/snippets/link-opened",feature:"snippets",objectId:"link",linkType:e})}snippetsListDismissed(e){return this.gnar.track({action:"dismissed",eventName:"chromeExt/snippets/list-dismissed",feature:"snippets",objectId:"list",cause:e})}snippetsListLoaded(e,t){return this.gnar.track({action:"loaded",eventName:"chromeExt/snippets/list-loaded",feature:"snippets",objectId:"list",size:e,delay:t})}snippetsListPresented(e){return this.gnar.track({action:"presented",eventName:"chromeExt/snippets/list-presented",feature:"snippets",objectId:"list",trigger:e})}snippetsPopupShow(){return this.gnar.track({action:"show",eventName:"chromeExt/snippets/popup-show",feature:"snippets",objectId:"popup",popupAim:"inline creation via hotkey",popupTrigger:"text selection"})}snippetsShortcutUsed(){return this.gnar.track({action:"used",eventName:"chromeExt/snippets/shortcut-used",feature:"snippets",objectId:"shortcut"})}snippetsSnippetApplied(e,t,n){return this.gnar.track({action:"applied",eventName:"chromeExt/snippets/snippet-applied",feature:"snippets",objectId:"snippet",isAdvanced:e,isRtfContent:t,searchStringSize:n})}snippetsTriggerSequenceEntered(e,t){return this.gnar.track({action:"entered",eventName:"chromeExt/snippets/triggerSequence-entered",feature:"snippets",objectId:"triggerSequence",snippetsPresented:e,trigger:t})}standWithUkraineHelpButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/standWithUkraineHelp-button-click",object:"button",objectId:"standWithUkraineHelp",placement:e})}standWithUkraineHelpPopupShow(){return this.gnar.track({action:"show",eventName:"chromeExt/standWithUkraineHelp-popup-show",object:"popup",objectId:"standWithUkraineHelp"})}standWithUkraineSuspendCloseButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/standWithUkraineSuspendClose-button-click",object:"button",objectId:"standWithUkraineSuspendClose",placement:e})}standWithUkraineSuspendExtensionInit(){return this.gnar.track({action:"init",eventName:"chromeExt/standWithUkraineSuspendExtension-init",object:"standWithUkraineSuspendExtension"})}standWithUkraineSuspendGdocsPopupShow(){return this.gnar.track({action:"show",eventName:"chromeExt/standWithUkraineSuspendGdocs-popup-show",object:"popup",objectId:"standWithUkraineSuspendGdocs"})}standWithUkraineSuspendLearnMoreButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/standWithUkraineSuspendLearnMore-button-click",object:"button",objectId:"standWithUkraineSuspendLearnMore",placement:e})}standWithUkraineSuspendPopupShow(){return this.gnar.track({action:"show",eventName:"chromeExt/standWithUkraineSuspend-popup-show",object:"popup",objectId:"standWithUkraineSuspend"})}standWithUkraineSuspendSettingsPopupShow(){return this.gnar.track({action:"show",eventName:"chromeExt/standWithUkraineSuspendSettings-popup-show",object:"popup",objectId:"standWithUkraineSuspendSettings"})}standWithUkraineUseDefaultColorsButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/standWithUkraineUseDefaultColors-button-click",object:"button",objectId:"standWithUkraineUseDefaultColors",placement:e})}subscriptionFormFail(e,t,n,r,i,o,s,a){return this.gnar.track({action:"fail",component:"companion",eventName:"chromeExt/companion/subscription-form-fail",object:"form",objectId:"subscription",osVersion:e,pageId:t,billingError:n,fieldErrors:r,formErrorMessage:i,productId:o,reason:s,subReason:a})}subscriptionFormShow(e,t){return this.gnar.track({action:"show",component:"companion",eventName:"chromeExt/companion/subscription-form-show",object:"form",objectId:"subscription",utmCampaign:"safariUpgradeHook",utmMedium:"internal",utmSource:"upHook",osVersion:e,pageId:t})}subscriptionFormSuccess(e,t,n){return this.gnar.track({action:"success",component:"companion",eventName:"chromeExt/companion/subscription-form-success",object:"form",objectId:"subscription",osVersion:e,pageId:t,productId:n})}subscriptionPageShow(e,t){return this.gnar.track({action:"show",component:"companion",eventName:"chromeExt/companion/subscription-page-show",object:"page",objectId:"subscription",utmCampaign:"safariUpgradeHook",utmMedium:"internal",utmSource:"upHook",osVersion:e,pageId:t})}suggestedSnippetCardAccept(e){return this.gnar.track({action:"accept",eventName:"chromeExt/suggestedSnippet-card-accept",object:"card",objectId:"suggestedSnippet",placement:e})}suggestedSnippetCardDeactivate(e){return this.gnar.track({action:"deactivate",eventName:"chromeExt/suggestedSnippet-card-deactivate",object:"card",objectId:"suggestedSnippet",placement:e})}suggestedSnippetCardDismiss(e){return this.gnar.track({action:"dismiss",eventName:"chromeExt/suggestedSnippet-card-dismiss",object:"card",objectId:"suggestedSnippet",placement:e})}suggestedSnippetCardLook(e){return this.gnar.track({action:"look",eventName:"chromeExt/suggestedSnippet-card-look",object:"card",objectId:"suggestedSnippet",placement:e})}suggestedSnippetCardUndoDeactivate(e){return this.gnar.track({action:"undoDeactivate",eventName:"chromeExt/suggestedSnippet-card-undoDeactivate",object:"card",objectId:"suggestedSnippet",placement:e})}suggestedSnippetCreateSnippetButtonClick(){return this.gnar.track({action:"click",eventName:"chromeExt/suggestedSnippet-createSnippetButton-click",object:"createSnippetButton",objectId:"suggestedSnippet",placement:"inline"})}suggestedSnippetHighlightShow(){return this.gnar.track({action:"show",eventName:"chromeExt/suggestedSnippet-highlight-show",object:"highlight",objectId:"suggestedSnippet",placement:"inline"})}suggestedSnippetMiniCardShow(){return this.gnar.track({action:"show",eventName:"chromeExt/suggestedSnippet-miniCard-show",object:"miniCard",objectId:"suggestedSnippet",placement:"assistant"})}suggestedSnippetOpenAssistantButtonClick(){return this.gnar.track({action:"click",eventName:"chromeExt/suggestedSnippet-openAssistantButton-click",object:"openAssistantButton",objectId:"suggestedSnippet",placement:"inline"})}suggestionManagementClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/suggestionManagement-click",objectId:"suggestionManagement",placement:e})}synonymAcceptButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/synonymAccept-button-click",object:"button",objectId:"synonymAccept",placement:e})}synonymsPopupShow(){return this.gnar.track({action:"show",eventName:"chromeExt/synonyms-popup-show",object:"popup",objectId:"synonyms"})}takeATourButtonClick(){return this.gnar.track({action:"click",eventName:"chromeExt/takeATour-button-click",object:"button",objectId:"takeATour",placement:"onboardingPopupWithReminder"})}textFieldDetected(){return this.gnar.track({action:"detected",eventName:"chromeExt/textField-detected",objectId:"textField"})}toneAIAlertUnderlineClick(e,t){return this.gnar.track({action:"click",eventName:"chromeExt/toneAI/alert-underline-click",feature:"toneAI",object:"underline",objectId:"alert",sessionUuid:e,toneRewriteType:t})}toneAIAlertUnderlineShow(e,t){return this.gnar.track({action:"show",eventName:"chromeExt/toneAI/alert-underline-show",feature:"toneAI",object:"underline",objectId:"alert",sessionUuid:e,toneRewriteType:t})}toneAIAssistantFullCardDismissButtonClick(e,t){return this.gnar.track({action:"click",eventName:"chromeExt/toneAI/assistant-fullCardDismissButton-click",feature:"toneAI",object:"fullCardDismissButton",objectId:"assistant",sessionUuid:e,toneRewriteType:t})}toneAIAssistantFullCardMuteButtonClick(e,t){return this.gnar.track({action:"click",eventName:"chromeExt/toneAI/assistant-fullCardMuteButton-click",feature:"toneAI",object:"fullCardMuteButton",objectId:"assistant",sessionUuid:e,toneRewriteType:t})}toneAIAssistantFullCardReplacementApply(e,t){return this.gnar.track({action:"apply",eventName:"chromeExt/toneAI/assistant-fullCardReplacement-apply",feature:"toneAI",object:"fullCardReplacement",objectId:"assistant",sessionUuid:e,toneRewriteType:t})}toneAIAssistantFullCardShow(e,t){return this.gnar.track({action:"show",eventName:"chromeExt/toneAI/assistant-fullCard-show",feature:"toneAI",object:"fullCard",objectId:"assistant",sessionUuid:e,toneRewriteType:t})}toneAIAssistantFullCardSliderMove(e,t,n,r){return this.gnar.track({action:"move",eventName:"chromeExt/toneAI/assistant-fullCardSlider-move",feature:"toneAI",object:"fullCardSlider",objectId:"assistant",newTone:e,oldTone:t,sessionUuid:n,toneRewriteType:r})}toneAIAssistantFullCardUndoMuteButtonClick(e,t){return this.gnar.track({action:"click",eventName:"chromeExt/toneAI/assistant-fullCardUndoMuteButton-click",feature:"toneAI",object:"fullCardUndoMuteButton",objectId:"assistant",sessionUuid:e,toneRewriteType:t})}toneAIAssistantMiniCardShow(e,t){return this.gnar.track({action:"show",eventName:"chromeExt/toneAI/assistant-miniCard-show",feature:"toneAI",object:"miniCard",objectId:"assistant",sessionUuid:e,toneRewriteType:t})}toneDetectorToneSuggestionInfoCtaClick(e,t,n,r,i){return this.gnar.track({action:"click",eventName:"chromeExt/toneDetector/toneSuggestionInfo-cta-click",feature:"toneDetector",object:"cta",objectId:"toneSuggestionInfo",isToneImprovementUphook:e,patternName:t,sessionUuid:n,title:r,emojiOrIcon:i})}toneDetectorToneSuggestionInfoShow(e,t,n,r,i){return this.gnar.track({action:"show",eventName:"chromeExt/toneDetector/toneSuggestionInfo-show",feature:"toneDetector",objectId:"toneSuggestionInfo",isToneImprovementUphook:e,patternName:t,sessionUuid:n,title:r,emojiOrIcon:i})}toolbarButtonClick(e,t){return this.gnar.track({action:"click",eventName:"chromeExt/toolbar-button-click",object:"button",objectId:"toolbar",placement:e,type:t})}touchTypistA11yOnboardingReadyPopupShow(){return this.gnar.track({action:"show",eventName:"chromeExt/touchTypist/a11yOnboardingReadyPopup-show",feature:"touchTypist",object:"a11yOnboardingReadyPopup"})}touchTypistA11yOnboardingSuccessPopupShow(){return this.gnar.track({action:"show",eventName:"chromeExt/touchTypist/a11yOnboardingSuccessPopup-show",feature:"touchTypist",object:"a11yOnboardingSuccessPopup"})}touchTypistA11yReviewCardShow(){return this.gnar.track({action:"show",eventName:"chromeExt/touchTypist/a11yReviewCard-show",feature:"touchTypist",object:"a11yReviewCard"})}touchTypistOpenQuickSettingsButtonClick(){return this.gnar.track({action:"click",eventName:"chromeExt/touchTypist/openQuickSettingsButton-click",feature:"touchTypist",object:"openQuickSettingsButton"})}touchTypistQuickSettingsEditHotkeyButtonClick(){return this.gnar.track({action:"click",eventName:"chromeExt/touchTypist/quickSettingsEditHotkeyButton-click",feature:"touchTypist",object:"quickSettingsEditHotkeyButton"})}touchTypistQuickSettingsShow(){return this.gnar.track({action:"show",eventName:"chromeExt/touchTypist/quickSettings-show",feature:"touchTypist",object:"quickSettings"})}touchTypistQuickSettingsSnoozeButtonClick(){return this.gnar.track({action:"click",eventName:"chromeExt/touchTypist/quickSettingsSnoozeButton-click",feature:"touchTypist",object:"quickSettingsSnoozeButton"})}touchTypistQuickSettingsTurnOffButtonClick(){return this.gnar.track({action:"click",eventName:"chromeExt/touchTypist/quickSettingsTurnOffButton-click",feature:"touchTypist",object:"quickSettingsTurnOffButton"})}touchTypistSettingsEditHotkeyButtonClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/touchTypist/settingsEditHotkeyButton-click",feature:"touchTypist",object:"settingsEditHotkeyButton",newValue:e})}touchTypistSettingsToggleClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/touchTypist/settingsToggle-click",feature:"touchTypist",object:"settingsToggle",enabledChoice:e})}translatePopupButtonClick(e,t){return this.gnar.track({action:"click",eventName:"chromeExt/translatePopup-button-click",object:"button",objectId:"translatePopup",domain:e,sessionId:t})}translatePopupButtonDisable(e,t,n){return this.gnar.track({action:"disable",eventName:"chromeExt/translatePopup-button-disable",object:"button",objectId:"translatePopup",source:"translate-button",domain:e,duration:t,sessionId:n})}translatePopupButtonShow(e,t){return this.gnar.track({action:"show",eventName:"chromeExt/translatePopup-button-show",object:"button",objectId:"translatePopup",source:"translatePopup-loader",domain:e,sessionId:t})}update(e){return this.gnar.track({action:"update",eventName:"chromeExt/update",oldVersion:e})}vBarCardClose(e,t,n,r,i,o,s){return this.gnar.track({action:"close",eventName:"chromeExt/vBarCard-close",objectId:"vBarCard",isGoogleDocs:e,sessionUuid:t,textHash:n,textLength:r,vBarId:i,vBarTextLength:o,vBarType:s})}vBarCardLoaded(e,t,n,r,i,o,s,a,c,l){return this.gnar.track({action:"loaded",eventName:"chromeExt/vBarCard-loaded",objectId:"vBarCard",isGoogleDocs:e,prompt:t,result:n,sessionUuid:r,textHash:i,textLength:o,vBarId:s,vBarTextLength:a,vBarType:c,loadingTime:l})}vBarCardPromptSubmit(e,t,n,r,i,o,s,a,c){return this.gnar.track({action:"submit",eventName:"chromeExt/vBarCard-prompt-submit",object:"prompt",objectId:"vBarCard",isGoogleDocs:e,previousRewriteType:t,prompt:n,sessionUuid:r,textHash:i,textLength:o,vBarId:s,vBarTextLength:a,vBarType:c})}vBarCardRewriteApply(e,t,n,r,i,o,s,a){return this.gnar.track({action:"apply",eventName:"chromeExt/vBarCard-rewrite-apply",object:"rewrite",objectId:"vBarCard",isGoogleDocs:e,prompt:t,sessionUuid:n,textHash:r,textLength:i,vBarId:o,vBarTextLength:s,vBarType:a})}vBarCardRewriteCopy(e,t,n,r,i,o,s,a){return this.gnar.track({action:"copy",eventName:"chromeExt/vBarCard-rewrite-copy",object:"rewrite",objectId:"vBarCard",isGoogleDocs:e,prompt:t,sessionUuid:n,textHash:r,textLength:i,vBarId:o,vBarTextLength:s,vBarType:a})}vBarCardRewriteDismiss(e,t,n,r,i,o,s,a){return this.gnar.track({action:"dismiss",eventName:"chromeExt/vBarCard-rewrite-dismiss",object:"rewrite",objectId:"vBarCard",isGoogleDocs:e,prompt:t,sessionUuid:n,textHash:r,textLength:i,vBarId:o,vBarTextLength:s,vBarType:a})}vBarCardRewriteRegenerate(e,t,n,r,i,o,s,a){return this.gnar.track({action:"regenerate",eventName:"chromeExt/vBarCard-rewrite-regenerate",object:"rewrite",objectId:"vBarCard",isGoogleDocs:e,prompt:t,sessionUuid:n,textHash:r,textLength:i,vBarId:o,vBarTextLength:s,vBarType:a})}vBarCardRewriteRevert(e,t,n,r,i,o,s,a){return this.gnar.track({action:"revert",eventName:"chromeExt/vBarCard-rewrite-revert",object:"rewrite",objectId:"vBarCard",isGoogleDocs:e,prompt:t,sessionUuid:n,textHash:r,textLength:i,vBarId:o,vBarTextLength:s,vBarType:a})}vBarCardShow(e,t,n,r,i,o,s,a){return this.gnar.track({action:"show",eventName:"chromeExt/vBarCard-show",objectId:"vBarCard",isGoogleDocs:e,isLocked:t,sessionUuid:n,textHash:r,textLength:i,vBarId:o,vBarTextLength:s,vBarType:a})}vBarCardShowLess(e,t,n,r,i,o,s,a,c){return this.gnar.track({action:"less",eventName:"chromeExt/vBarCard-show-less",object:"show",objectId:"vBarCard",domain:e,isGoogleDocs:t,prompt:n,sessionUuid:r,textHash:i,textLength:o,vBarId:s,vBarTextLength:a,vBarType:c})}vBarCardStreamingStart(e,t,n,r,i,o,s,a,c){return this.gnar.track({action:"start",eventName:"chromeExt/vBarCard-streaming-start",object:"streaming",objectId:"vBarCard",isGoogleDocs:e,prompt:t,sessionUuid:n,textHash:r,textLength:i,vBarId:o,vBarTextLength:s,vBarType:a,duration:c})}vBarCardSubmitCustomPrompt(e,t,n,r,i,o,s){return this.gnar.track({action:"submitCustomPrompt",eventName:"chromeExt/vBarCard-submitCustomPrompt",objectId:"vBarCard",isGoogleDocs:e,sessionUuid:t,textHash:n,textLength:r,vBarId:i,vBarTextLength:o,vBarType:s})}vBarEntrypointClose(e,t,n,r,i,o,s){return this.gnar.track({action:"close",eventName:"chromeExt/vBarEntrypoint-close",objectId:"vBarEntrypoint",isGoogleDocs:e,sessionUuid:t,textHash:n,textLength:r,vBarId:i,vBarTextLength:o,vBarType:s})}vBarEntrypointShow(e,t,n,r,i,o,s){return this.gnar.track({action:"show",eventName:"chromeExt/vBarEntrypoint-show",objectId:"vBarEntrypoint",isGoogleDocs:e,sessionUuid:t,textHash:n,textLength:r,vBarId:i,vBarTextLength:o,vBarType:s})}vBarsSettingsFeatureToggleClick(e,t){return this.gnar.track({action:"click",eventName:"chromeExt/vBarsSettings-featureToggle-click",object:"featureToggle",objectId:"vBarsSettings",checked:e,domain:t})}valueLoadFail(e){return this.gnar.track({action:"fail",eventName:"chromeExt/value-load-fail",object:"load",objectId:"value",errorMessage:e})}valueLoadSuccess(){return this.gnar.track({action:"success",eventName:"chromeExt/value-load-success",object:"load",objectId:"value"})}valueLoadTimeout(){return this.gnar.track({action:"timeout",eventName:"chromeExt/value-load-timeout",object:"load",objectId:"value"})}versionMismatchPopupDismissButtonClick(){return this.gnar.track({action:"click",eventName:"chromeExt/versionMismatchPopupDismiss-button-click",object:"button",objectId:"versionMismatchPopupDismiss",placement:"versionMismatchPopup"})}versionMismatchPopupReloadButtonClick(){return this.gnar.track({action:"click",eventName:"chromeExt/versionMismatchPopupReload-button-click",object:"button",objectId:"versionMismatchPopupReload",placement:"versionMismatchPopup"})}versionMismatchPopupShow(){return this.gnar.track({action:"show",eventName:"chromeExt/versionMismatch-popup-show",object:"popup",objectId:"versionMismatch"})}versionStorageFailed(){return this.gnar.track({action:"failed",eventName:"chromeExt/versionStorage-failed",objectId:"versionStorage"})}welcomePageOpened(e,t){return this.gnar.track({action:"opened",eventName:"chromeExt/welcomePage-opened",objectId:"welcomePage",tabID:e,url:t})}welcomePageShow(e){return this.gnar.track({action:"show",eventName:"chromeExt/welcomePage-show",objectId:"welcomePage",url:e})}welcomeToPremiumPageShow(e,t){return this.gnar.track({action:"show",component:"companion",eventName:"chromeExt/companion/welcomeToPremium-page-show",object:"page",objectId:"welcomeToPremium",osVersion:e,pageId:t})}withReminderPopupShow(){return this.gnar.track({action:"show",eventName:"chromeExt/withReminder-popup-show",object:"popup",objectId:"withReminder"})}yellowUnderlineInlineYellowUnderlineClick(e){return this.gnar.track({action:"click",eventName:"chromeExt/yellowUnderline/inline-yellowUnderline-click",feature:"yellowUnderline",object:"yellowUnderline",objectId:"inline",sessionUuid:e})}yellowUnderlineInlineYellowUnderlineShow(e){return this.gnar.track({action:"show",eventName:"chromeExt/yellowUnderline/inline-yellowUnderline-show",feature:"yellowUnderline",object:"yellowUnderline",objectId:"inline",sessionUuid:e})}};var bQ;bQ={browser:"chrome",extensionType:"chromiumWebExtension",deploymentType:"regular",browserApi:function(){const e=function(){var e;const t=new Er.x;return null===(e=chrome.storage)||void 0===e||e.onChanged.addListener(((e,n)=>{"local"===n&&t.next(e)})),{...(n=chrome,{get:e=>Ts.create(((t,r)=>n.storage.local.get(e,(e=>{nQ((()=>t(e)),r)})))),set:e=>Ts.create(((t,r)=>n.storage.local.set(e,(()=>{nQ(t,r)})))),getAll:()=>Ts.create(((e,t)=>n.storage.local.get(null,(n=>{nQ((()=>e(n)),t)})))),remove:e=>Ts.create(((t,r)=>n.storage.local.remove(e,(()=>{nQ(t,r)})))),removeAll:()=>Ts.create(((e,t)=>n.storage.local.clear((()=>{nQ(e,t)}))))}),changes:t};var n}(),t=new gQ.MigrationAwarePreferencesApiImpl("chromeGdocsForceEnableMigration",e,e,void 0,QJ((e=>Kt().gdocs.disabledBeforeForceEnable(e)),(()=>Kt().gdocs.enabledBeforeForceEnable()))),{manifestVersion:n,tabs:r}={manifestVersion:"3",tabs:new cQ(chrome,"3")},i=new Vs((e=>{const t=t=>e(new fQ(t));return chrome.runtime.onConnect.addListener(t),()=>chrome.runtime.onConnect.removeListener(t)}),ae(r).getActiveTab,ae(r).sendMessageToTab,ae(r).getAllTabs,(e=>(chrome.runtime.onMessage.addListener(e),()=>chrome.runtime.onMessage.removeListener(e))));return new pQ(t,i,r,n)}(),gnarSpecClass:mQ},YJ.init(bQ)})();