(self.webpackChunk=self.webpackChunk||[]).push([[2970],{65948:(e,t,n)=>{n.r(t),n.d(t,{Zendesk:()=>z,getZendeskAsyncReplaceDelay:()=>S,zendeskTransformBeforeApply:()=>L});var i=n(84714),a=n(58303),r=n(63866),o=n(44287),s=n(18647),l=n(22234),d=n(28958),c=n(22086),p=n(61431),m=n(26761),u=n(95523),v=n(33357),f=n(18122),k=n(90595),g=n(16381),x=n(79707),E=n(29483),b=n(27970),w=n(3670),C=n(14527),y=n(95869),R=n(43789);const T=e=>R.RI.isDelta(e)?R.RI.delta(Z(e.delta),e.prevLen):e,Z=e=>new C.i(e.map(h)),h=e=>y.s.isInsertString(e)&&A(e)?{...e,attributes:{...e.attributes,zendeskMacro:!0}}:e,A=({insert:e})=>e.split("\n").length>5;var z;function O(e){const t=(0,s.wr)(e,(e=>e.className.includes("ticket section")))||e;return(0,r.z)(t)}function L(e){return!(0,E.OB)().experimentClient.isGateEnabled(k.K.ZendeskTransformReplacementOnlyForString)||(0,x.HD)(e.value)?d.T.transformReplacementNotToTrimSpaces(e):e}function S(e){return(0,g.pZ)()&&e.isGateEnabled(k.K.ExtensionZendeskAsyncReplaceDelay)?50:void 0}!function(e){const t=()=>n(27970).V0,r=l.T.contentEditable("Zendesk.editor",(e=>({integrationName:"Zendesk Editor",extraCondition:e=>e.field.classList.contains("editor"),createLayout:t=>new o.A7(t,{innerElementsField:e.field.closest(".zendesk-editor--rich-text-container")||e.field,createGbuttonShiftBehavior:e=>(0,i.of)({top:-40,left:-10}),scroller:O(t),pretendFieldPositioned:!0}),createReplacementService:n=>new(t())({eventTarget:e.field,textObserver:n,experimentClient:e.experimentClient,replaceEvent:"paste",deletionEvent:"beforeinput"})}))),s=p.O$.generic((e=>({genericOpts:{integrationName:"Zendesk Reply (slatejs)",validationRules:[...m.u,(0,u.jw)(25)],createLayout:e=>new o.A7(e,{innerElementsField:e.closest(".zendesk-editor--rich-text-container")||e,minimizeEnabled:!1,pretendFieldPositioned:!0}),extraCondition:e=>"true"===e.field.getAttribute("data-slate-editor"),createReplacementService:n=>new(t())({eventTarget:e.field,textObserver:n,experimentClient:e.experimentClient,replaceEvent:"paste",deletionEvent:"beforeinput"})}}))),g=l.T.textarea("Zendesk.chat",(()=>({validationRules:[...m.u,(0,u.jw)(25)],createLayout:e=>new o.A7(e,{innerElementsField:e.closest("[name='message']")||e,minimizeEnabled:!1})}))),x=d.T.generic((e=>({integrationName:"Zendesk Agent Chat",validationRules:[...m.u,(0,u.jw)(25)],genericOpts:{mapChange:T,getVBarsIntegrationInfo:t=>a.G({integrationName:t,kind:"zendesk",domain:e.pageContext.domain,isInsideIFrame:!1})},asyncReplaceDelay:S(e.experimentClient),transformReplacementBeforeApply:L,deletionEvent:(0,b.Xw)()?"beforeinput":"keydown"})));e.page=(0,w.$W)({domain:f.Qk,name:"zendesk",eventPropagationHandler:e=>{(0,E.OB)().experimentClient.isGateEnabled(k.K.CentralizeStopEventPropagation)||e.addEventListener("keydown",(e=>{e.stopPropagation()}))}},[r,g,x,s,l.T.contentEditable("Zendesk",(e=>({createLayout:e=>new o.A7(e),extraCondition:()=>!0,createReplacementService:n=>new(t())({eventTarget:e.field,textObserver:n,experimentClient:e.experimentClient,replaceEvent:"paste",deletionEvent:"beforeinput"})}))),(0,c.q)("Zendesk"),l.T.textarea("Zendesk",(()=>({createLayout:e=>new o.A7(e),validationRules:m.u}))),v.k.iframeHostRule])}(z||(z={}))}}]);