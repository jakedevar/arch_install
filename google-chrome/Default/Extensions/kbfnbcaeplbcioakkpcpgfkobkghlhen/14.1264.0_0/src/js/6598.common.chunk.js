(self.webpackChunk=self.webpackChunk||[]).push([[6598],{9870:(e,t,i)=>{i.d(t,{K:()=>s});class s{constructor(){this._pendingRevision=0,this._finishedRevisions={regular:-1,plagiarism:-1,ai_detector:-1,writing_expert_check:-1,ai_studio:-1,audience_adapt:-1},this._wasChecked={regular:!1,plagiarism:!1,ai_detector:!1,writing_expert_check:!1,ai_studio:!1,audience_adapt:!1},this.reset()}getCheckState(e){return this._pendingRevision>this._finishedRevisions[e]?this._wasChecked[e]?"checking":"full":"idle"}getRevisionCheckState(){return this.getCheckState("regular")}getAsyncChecksState(){return{plagiarism:this.getCheckState("plagiarism"),ai_detector:this.getCheckState("ai_detector"),writing_expert_check:this.getCheckState("writing_expert_check"),ai_studio:this.getCheckState("ai_studio"),audience_adapt:this.getCheckState("audience_adapt")}}stage(e){this._pendingRevision=Math.max(this._pendingRevision,e)}finishRevision(e){this._finishedRevisions.regular=Math.max(this._finishedRevisions.regular,e),this._wasChecked.regular=!0}finishAsyncCheck(e,t){this._finishedRevisions[e]=Math.max(this._finishedRevisions[e],t),this._wasChecked[e]=!0}reset(){this._pendingRevision=0,this._finishedRevisions={regular:-1,plagiarism:-1,ai_detector:-1,writing_expert_check:-1,ai_studio:-1,audience_adapt:-1}}}},7616:(e,t,i)=>{if(i.d(t,{N:()=>n}),/^6(052|168)$/.test(i.j))var s=i(8867);function n(e){return new s.y((t=>{const i=new DisposableStack,s=i.use(e());return i.adopt(s.subscribe((e=>t.next(e))),(e=>e.unsubscribe())),()=>i.dispose()}))}},27902:(e,t,i)=>{i.d(t,{D8:()=>n.D,Kf:()=>o.K,N4:()=>a.N,TJ:()=>n.T,kX:()=>s.k});var s=i(20181),n=i(71365);if(/^6(052|168)$/.test(i.j))var a=i(7616);if(!/^6(052|168)$/.test(i.j))var o=i(9870)},96598:(e,t,i)=>{i.r(t),i.d(t,{activate:()=>W});var s,n,a,o,r,c,h,d=i(651),u=i(90572),l=i(33885),p=i(39104),v=i(27902),m=i(31601),k=i(13391),g=i(6183),w=i(9174),_=i(25249),S=e=>{throw TypeError(e)},f=(e,t,i)=>t.has(e)||S("Cannot "+i),b=(e,t,i)=>(f(e,t,"read from private field"),i?i.call(e):t.get(e)),x=(e,t,i)=>t.has(e)?S("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),C=(e,t,i,s)=>(f(e,t,"write to private field"),s?s.call(e,i):t.set(e,i),i),A=(e,t,i)=>(f(e,t,"access private method"),i);class y{constructor(e){x(this,c),x(this,s),x(this,n),x(this,a),x(this,o),x(this,r),C(this,s,new DisposableStack),C(this,n,k.h.create({kind:w.x.State.Kind.Initial})),C(this,a,k.h.create(null)),this.title=_.K_,this.state=b(this,n).view(),this.audience=b(this,a).view((e=>null!=e?e:void 0)),this.loadReactions=()=>(A(this,c,h).call(this,{kind:"loadReactionsAction"}),Promise.resolve()),this.goBack=()=>{A(this,c,h).call(this,{kind:"goBackAction"})},this.selectAudience=()=>{A(this,c,h).call(this,{kind:"selectAudienceAction"})},this.setAudience=e=>(A(this,c,h).call(this,{kind:"setAudienceAction",audience:e}),Promise.resolve()),this.editAudience=()=>{A(this,c,h).call(this,{kind:"editAudienceAction"})},this.saveAudience=e=>(A(this,c,h).call(this,{kind:"saveAudienceAction",name:e}),Promise.resolve()),this.removeAudience=e=>(A(this,c,h).call(this,{kind:"removeAudienceAction",audience:e}),Promise.resolve()),C(this,o,e.documentId),C(this,r,e.bus),b(this,s).adopt(e.agentState.subscribe((e=>b(this,n).set(e))),(e=>e.unsubscribe())),b(this,s).adopt(e.audience.subscribe((e=>b(this,a).set(e))),(e=>e.unsubscribe())),this.textWordsCount=b(this,s).use(b(this,r).state.textInfo.view(b(this,o),null)),this.capiSessionId=b(this,s).use(b(this,r).state.capiSessionId.view(b(this,o),null)),this.context={tracking:{trackEvent:(e,t)=>b(this,r).events.trackingEvent.emit(b(this,o),{event:e,detail:t})},textWordsCount:this.textWordsCount.view((e=>{var t;return null!=(t=null==e?void 0:e.wordsCount)?t:0})),capiSessionId:this.capiSessionId.view((e=>null!=e?e:void 0))},this.featureFlags={customAudiences:e.experimentation.isAssigned(g.bI),removeCustomAudiences:e.experimentation.isAssigned(g.kz)},this.hasTextChanges=b(this,s).use(b(this,r).state.hasTextChanges.view(b(this,o),!1))}[Symbol.dispose](){b(this,s).dispose()}dispose(){b(this,s).dispose()}}s=new WeakMap,n=new WeakMap,a=new WeakMap,o=new WeakMap,r=new WeakMap,c=new WeakSet,h=function(e){b(this,r).events.panelUIAction.emit(b(this,o),e)};i(90499);var R=i(45212),D=i(10398),I=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),j=e=>{throw TypeError(e)},M=(e,t,i)=>{var s;null!=t?("object"!=typeof t&&"function"!=typeof t&&j("Object expected"),i&&(s=t[I("asyncDispose")]),void 0===s&&(s=t[I("dispose")]),"function"!=typeof s&&j("Object not disposable"),e.push([i,s,t])):i&&e.push([i]);return t},P=(e,t,i)=>{var s="function"==typeof SuppressedError?SuppressedError:function(e,t,i,s){return(s=Error(i)).name="SuppressedError",s.error=e,s.suppressed=t,s},n=e=>t=i?new s(e,t,"An error was suppressed during disposal"):(i=!0,e),a=s=>{for(;s=e.pop();)try{var o=s[1]&&s[1].call(s[2]);if(s[0])return Promise.resolve(o).then(a,(e=>(n(e),a())))}catch(e){n(e)}if(i)throw t};return a()};const W=e=>((e,t,i)=>new Promise(((s,n)=>{var a=e=>{try{r(i.next(e))}catch(e){n(e)}},o=e=>{try{r(i.throw(e))}catch(e){n(e)}},r=e=>e.done?s(e.value):Promise.resolve(e.value).then(a,o);r((i=i.apply(e,t)).next())})))(void 0,[e],(function*({bus:e,documents:t,experimentation:i}){var s=[];try{const o=M(s,new DisposableStack),r=o.use(new v.D8({activeDocument:t.activeDocument,documentSessionDisposed:t.documentSessionDisposed,createNewSession:t=>{var s=[];try{const o=M(s,new DisposableStack),r=o.use(e.state.agentState.view(t,{kind:w.x.State.Kind.Initial})),c=o.use(e.state.audience.view(t,null)),h=o.use(new y({bus:e,experimentation:i,agentState:r,audience:c.pipe(u.h(p.C_)),documentId:t})),d=o.move();return{viewModel:h,[Symbol.dispose]:()=>d.dispose()}}catch(e){var n=e,a=!0}finally{P(s,n,a)}}})),c=o.move();return{title:_.K_,renderPanel:e=>(0,d.jsx)(l.F.Fragment,{children:r.activeSession.view(v.TJ.match({activeSession:t=>(0,d.jsx)(D.n,{viewModel:t.viewModel,onClosePanel:e.onClosePanel}),noActiveSession:()=>(0,d.jsx)(m.ZD,{agentName:_.K_}),documentNotSupported:()=>(0,d.jsx)(m.Di,{agentName:_.K_})}))}),renderIcon:e=>(0,d.jsx)(R.b,{size:e.size}),[Symbol.dispose]:()=>c.dispose()}}catch(e){var n=e,a=!0}finally{P(s,n,a)}}))}}]);