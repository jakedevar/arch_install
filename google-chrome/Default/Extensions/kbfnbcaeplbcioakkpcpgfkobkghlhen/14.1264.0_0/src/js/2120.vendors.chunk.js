/*! For license information please see 2120.vendors.chunk.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[2120],{67119:(e,t,n)=>{n.d(t,{W:()=>d});var r=n(92379),a=Object.defineProperty,s=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(e,t,n)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const c=/^6(052|168)$/.test(n.j)?[.03125,.0625,.125,.25,.5,1]:null;const d=(e,t={})=>{const{minIntervalSec:n=1,maxIntervalSec:a=30,maxDurationSec:d=360,enabled:u=!0,addFuzz:g=!0,random:h,shouldContinuePolling:p}=t,m=1e3*Math.max(0,n),f=1e3*Math.max(0,a),x=1e3*Math.max(0,d),v=Math.min(m,f),b=Math.max(m,f),C=(0,r.useRef)(null),y=(0,r.useRef)(0),k=(0,r.useRef)(null),w=(0,r.useRef)(!1),[j,S]=(0,r.useState)(0),[I,A]=(0,r.useState)(0),E=(0,r.useRef)(e),_=(0,r.useRef)(p);(0,r.useEffect)((()=>{E.current=e}),[e]),(0,r.useEffect)((()=>{_.current=p}),[p]);const M=(0,r.useCallback)((()=>{C.current&&(clearTimeout(C.current),C.current=null),y.current=0,k.current=null,w.current=!1,S(0),A(0)}),[]);return(0,r.useEffect)((()=>{let e=!1;if(C.current&&(clearTimeout(C.current),C.current=null),!u||!E.current)return w.current=!1,void(k.current=null);null===k.current&&(k.current=Date.now(),y.current=0,S(0),A(0));const t=()=>{var n;if(e)return;if(w.current)return;const r=Date.now(),a=r-(null!=(n=k.current)?n:r);if(a>=x)return A(a),void(w.current=!1);const d=y.current+1;if(y.current=d,S(d),A(a),_.current&&!_.current(d))return void(w.current=!1);w.current=!0;const u=E.current;u?Promise.resolve(u()).finally((()=>{var n;if(e)return;w.current=!1;const r=Date.now(),a=r-(null!=(n=k.current)?n:r);if(a>=x)return void A(a);const u=function({attempt:e,minMs:t,maxMs:n,addFuzz:r,rng:a=Math.random}){var s;const i=(n-t)*(null!=(s=c[e-1])?s:1)+t;if(!r)return Math.min(n,i);const o=.25*i*(a()-.5)*2;return Math.max(t,Math.min(n,i+o))}(((e,t)=>{for(var n in t||(t={}))i.call(t,n)&&l(e,n,t[n]);if(s)for(var n of s(t))o.call(t,n)&&l(e,n,t[n]);return e})({attempt:d,minMs:v,maxMs:b,addFuzz:g},h&&{rng:h}));e||(C.current=setTimeout(t,u))})):w.current=!1};return setTimeout(t,0),()=>{e=!0,C.current&&(clearTimeout(C.current),C.current=null),w.current=!1}}),[u,v,b,x,g,h]),{attemptCount:j,elapsedTimeMs:I,hasReachedMaxDuration:I>=x,reset:M}}},45114:(e,t,n)=>{n.d(t,{D:()=>a});var r=n(92379);function a(e){const t=(0,r.useRef)(void 0);return(0,r.useEffect)((()=>{t.current=e}),[e]),t.current}},37554:(e,t,n)=>{var r,a,s;n.d(t,{BT:()=>r,K0:()=>a,PU:()=>s}),function(e){e.Rewrite="rewrite",e.Ideate="ideate"}(r||(r={})),function(e){e.VbarCard="vbar_card",e.Assistant="assistant"}(a||(a={})),function(e){e.Final="final",e.Partial="partial"}(s||(s={}))},54221:(e,t,n)=>{var r=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,i=/^0o[0-7]+$/i,o=parseInt,l="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,c="object"==typeof self&&self&&self.Object===Object&&self,d=l||c||Function("return this")(),u=Object.prototype.toString,g=Math.max,h=Math.min,p=function(){return d.Date.now()};function m(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function f(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==u.call(e)}(e))return NaN;if(m(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=m(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var n=s.test(e);return n||i.test(e)?o(e.slice(2),n?2:8):a.test(e)?NaN:+e}e.exports=function(e,t,n){var r,a,s,i,o,l,c=0,d=!1,u=!1,x=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var n=r,s=a;return r=a=void 0,c=t,i=e.apply(s,n)}function b(e){return c=e,o=setTimeout(y,t),d?v(e):i}function C(e){var n=e-l;return void 0===l||n>=t||n<0||u&&e-c>=s}function y(){var e=p();if(C(e))return k(e);o=setTimeout(y,function(e){var n=t-(e-l);return u?h(n,s-(e-c)):n}(e))}function k(e){return o=void 0,x&&r?v(e):(r=a=void 0,i)}function w(){var e=p(),n=C(e);if(r=arguments,a=this,l=e,n){if(void 0===o)return b(l);if(u)return o=setTimeout(y,t),v(l)}return void 0===o&&(o=setTimeout(y,t)),i}return t=f(t)||0,m(n)&&(d=!!n.leading,s=(u="maxWait"in n)?g(f(n.maxWait)||0,t):s,x="trailing"in n?!!n.trailing:x),w.cancel=function(){void 0!==o&&clearTimeout(o),c=0,r=l=a=o=void 0},w.flush=function(){return void 0===o?i:k(p())},w}},32959:(e,t,n)=>{var r=n(92379);var a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=r.useState,i=r.useEffect,o=r.useLayoutEffect,l=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!a(e,n)}catch(e){return!0}}var d="undefined"==typeof self||void 0===self.document||void 0===self.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=s({inst:{value:n,getSnapshot:t}}),a=r[0].inst,d=r[1];return o((function(){a.value=n,a.getSnapshot=t,c(a)&&d({inst:a})}),[e,n,t]),i((function(){return c(a)&&d({inst:a}),e((function(){c(a)&&d({inst:a})}))}),[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:d},57807:(e,t,n)=>{var r=n(92379),a=n(43481);var s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=a.useSyncExternalStore,o=r.useRef,l=r.useEffect,c=r.useMemo,d=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,a){var u=o(null);if(null===u.current){var g={hasValue:!1,value:null};u.current=g}else g=u.current;u=c((function(){function e(e){if(!l){if(l=!0,i=e,e=r(e),void 0!==a&&g.hasValue){var t=g.value;if(a(t,e))return o=t}return o=e}if(t=o,s(i,e))return t;var n=r(e);return void 0!==a&&a(t,n)?(i=e,t):(i=e,o=n)}var i,o,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,a]);var h=i(e,u[0],u[1]);return l((function(){g.hasValue=!0,g.value=h}),[h]),d(h),h}},43481:(e,t,n)=>{e.exports=n(32959)},82180:(e,t,n)=>{e.exports=n(57807)},42514:(e,t,n)=>{n.d(t,{Gi:()=>Ue,B5:()=>Ie,Th:()=>Wt,O6:()=>$t,Me:()=>Ft,Ot:()=>Re,zE:()=>_e,vr:()=>De,qC:()=>Be,_M:()=>Me,AA:()=>Oe,hT:()=>Te,Z$:()=>Le});var r=n(92054);if(6168==n.j)var a=n(62220);if(6168==n.j)var s=n(98846);var i=n(6824),o=n(59190),l=n(37554),c=n(24961),d=n(21622),u=n(36661),g=n(90023),h=ne((function(e){return(0,c.wf)(m(e),e.intersect(e.partial({additionalContext:b(e)}))(e.struct({entrypoint:y(e),scope:X(e),args:e.readonly(e.record(B(e)))})))(e)})),p=ne((function(e){return(0,c.wf)(x(e),e.intersect(e.partial({backendBlob:C(e)}))(e.struct({kind:Z(e),actionId:v(e),extraProperties:e.readonly(e.record(B(e)))})))(e)})),m=ne((function(e){return(0,c.wf)(f(e),e.struct({}))(e)})),f=ne((function(e){return e.struct({id:e.number,correlationId:e.string,metadata:e.readonly(e.record(B(e)))})})),x=ne((function(e){return(0,c.wf)(f(e),e.struct({}))(e)})),v=(ne((function(e){return F(e)})),ne((function(e){return e.struct({id:e.string})}))),b=ne((function(e){return e.intersect(e.partial({backendBlob:C(e)}))(e.struct({extraProperties:e.readonly(e.record(B(e)))}))})),C=ne((function(e){return e.struct({blob:e.string})})),y=ne((function(e){var t;return e.sum("family")(((t={}).ggo=w(e),t.g2=S(e),t.other=I(e),t))})),k=(0,c.Dd)(l.BT),w=ne((function(e){return e.struct({family:e.literal("ggo"),name:k(e)})})),j=(0,c.Dd)(l.K0),S=ne((function(e){return e.intersect(e.partial({request_tag:e.string}))(e.struct({family:e.literal("g2"),name:j(e)}))})),I=ne((function(e){return e.struct({family:e.literal("other"),name:e.string})})),A=ne((function(e){var t;return e.sum("kind")(((t={}).sensitivity=E(e),t.badRequest=_(e),t.serviceLimitExceeded=M(e),t.unsupportedLanguage=R(e),t.updateClient=D(e),t.backendError=T(e),t.other=O(e),t))})),E=ne((function(e){return e.struct({kind:e.literal("sensitivity")})})),_=ne((function(e){return e.struct({kind:e.literal("badRequest")})})),M=ne((function(e){return e.struct({kind:e.literal("serviceLimitExceeded")})})),R=ne((function(e){return e.struct({kind:e.literal("unsupportedLanguage")})})),D=ne((function(e){return e.struct({kind:e.literal("updateClient")})})),T=ne((function(e){return e.struct({kind:e.literal("backendError")})})),O=ne((function(e){return e.struct({kind:e.literal("other"),type:e.string})})),L=ne((function(e){var t;return e.sum("kind")(((t={}).plain=N(e),t.gzip=P(e),t))})),N=ne((function(e){return e.struct({kind:e.literal("plain")})})),P=ne((function(e){return e.struct({kind:e.literal("gzip")})})),B=ne((function(e){return e.intersect(e.partial({encoding:L(e)}))(e.struct({json:e.string}))})),F=ne((function(e){var t;return e.sum("action")(((t={})["text_actions:invokeCommand"]=z(e),t["text_actions:commandResult"]=H(e),t["text_actions:invokeRewrite"]=U(e),t["text_actions:rewriteResult"]=$(e),t["text_actions:error"]=G(e),t))})),z=ne((function(e){return(0,c.wf)(h(e),f(e),e.struct({action:e.literal("text_actions:invokeCommand"),actionId:v(e)}))(e)})),H=ne((function(e){return(0,c.wf)(p(e),f(e),e.struct({action:e.literal("text_actions:commandResult")}))(e)})),U=ne((function(e){return(0,c.wf)(h(e),f(e),e.struct({action:e.literal("text_actions:invokeRewrite"),kind:V(e)}))(e)})),$=ne((function(e){return(0,c.wf)(p(e),f(e),e.struct({action:e.literal("text_actions:rewriteResult"),rewrite:e.sensitiveString,explanation:e.string}))(e)})),G=ne((function(e){return(0,c.wf)(f(e),x(e),e.intersect(e.partial({usageLimits:te(e)}))(e.struct({action:e.literal("text_actions:error"),errorType:A(e),title:e.string,details:e.string,extraProperties:e.readonly(e.record(B(e)))})))(e)})),W=ne((function(e){return e.struct({start:e.number,end:e.number})})),Z=(0,c.Dd)(l.PU),V=ne((function(e){var t;return e.sum("kind")(((t={}).default=q(e),t.rephrase=K(e),t.userPrompt=J(e),t.other=Y(e),t))})),q=ne((function(e){return e.struct({kind:e.literal("default")})})),K=ne((function(e){return e.struct({kind:e.literal("rephrase")})})),J=ne((function(e){return e.struct({kind:e.literal("userPrompt"),prompt:e.sensitiveString})})),Y=ne((function(e){return e.struct({kind:e.literal("other"),actionId:v(e)})})),X=ne((function(e){var t;return e.sum("kind")(((t={}).sessionText=Q(e),t.otherText=ee(e),t))})),Q=ne((function(e){return e.intersect(e.partial({range:W(e)}))(e.struct({kind:e.literal("sessionText"),rev:e.number}))})),ee=ne((function(e){return e.intersect(e.partial({range:W(e)}))(e.struct({kind:e.literal("otherText"),text:e.sensitiveString}))})),te=ne((function(e){return e.struct({remaining:e.number,limit:e.number,refillDate:e.string})}));ne((function(e){var t;return e.sum("action")(((t={})["text_actions:invokeCommand"]=z(e),t["text_actions:invokeRewrite"]=U(e),t))})),ne((function(e){var t;return e.sum("action")(((t={})["text_actions:commandResult"]=H(e),t["text_actions:rewriteResult"]=$(e),t))})),ne((function(e){var t;return e.sum("action")(((t={})["text_actions:invokeCommand"]=z(e),t["text_actions:commandResult"]=H(e),t["text_actions:invokeRewrite"]=U(e),t["text_actions:rewriteResult"]=$(e),t["text_actions:error"]=G(e),t))})),ne((function(e){var t;return e.sum("action")(((t={})["text_actions:error"]=G(e),t))}));function ne(e){return d.H(e)}var re=(0,g.MZ)(u.n);function ae(e){return function(t){return(0,o.pi)((0,o.pi)({},e),t)}}if(6168==n.j)var se=n(28338);var ie,oe,le,ce,de,ue,ge,he,pe,me,fe,xe,ve=n(11633),be=n(64443),Ce=e=>{throw TypeError(e)},ye=(e,t,n)=>t.has(e)||Ce("Cannot "+n),ke=(e,t,n)=>(ye(e,t,"read from private field"),n?n.call(e):t.get(e)),we=(e,t,n)=>t.has(e)?Ce("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),je=(e,t,n,r)=>(ye(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Se=(e,t,n)=>(ye(e,t,"access private method"),n),Ie=(e=>(e.AiEditorOutput="ai_editor_output",e.PromptOutput="prompt_output",e.Other="other",e))(Ie||{});function Ae(e,t){return{kind:"nonSessionText",referenceContent:e,selectedRange:null==t?void 0:t.range}}function Ee(e){return{kind:"sessionText",selection:e}}function _e(e){return"string"==typeof e}function Me(e){return"object"==typeof e&&null!==e&&"selectedText"in e&&"range"in e}function Re(e){return"object"==typeof e&&null!==e&&"kind"in e&&"default"===e.kind}function De(e){return"object"==typeof e&&null!==e&&"kind"in e&&"integratedDoc"===e.kind}function Te(e){return _e(e)||Me(e)}function Oe(e,t){return!(!e||!t)&&(Re(e)&&Re(t)&&e.id===t.id||Te(e)&&Te(t)&&e===t)}function Le(e){return"user"===e.type}function Ne(e,t){return{id:e,type:"assistant",kind:"thinking",content:"",previousMessageId:t}}function Pe(e,t){const n=t?function(e){return _e(e)?{selectedText:e,textScope:Ae(e)}:Me(e)?{selectedText:e.selectedText,textScope:Ee(e)}:{}}(t):{};return{...e,...n}}function Be(e){return"assistant"===(null==e?void 0:e.type)&&("final"!==e.kind&&!e.stopped)}function Fe(e,t,n,a){const s=e.slice();if(function(e){const t=e[e.length-1];return"error"===(null==t?void 0:t.type)}(s)&&s.pop(),null!==t){const{predefinedPromptKind:e}=n,i=function(e,t,n){return{id:(0,r.Z)(),type:"user",content:e,context:t,predefinedPromptKind:n}}(t,a,e),o=function(e){return Ne(`${e}-response`,e)}(i.id);return[...s,i,o]}const{systemMessageMetadata:i}=n,o=i?function(e){return{id:(0,r.Z)(),content:"",type:"system",metadata:e}}(i):void 0,l=function(e){const t=e||(0,r.Z)();return Ne(`system-${t}-response`,t)}(null==o?void 0:o.id);return o?[...s,o,l]:[...s,l]}class ze{constructor(e){we(this,ie),we(this,oe,{}),we(this,le,{}),je(this,ie,e)}async initialize(){const e=await ke(this,ie).getAll();je(this,oe,e.reduce(((e,t)=>(e[t.id]={messages:[],metadata:t},e)),{}))}doesChatExist(e){return void 0!==ke(this,oe)[e]}getAllChatsMetadata(){return Object.entries(ke(this,oe)).reduce(((e,[t,n])=>(e[t]=n.metadata,e)),{})}getChatMetadata(e){if(this.doesChatExist(e))return ke(this,oe)[e].metadata}async getChatMessages(e){if(!this.doesChatExist(e))return[];if(ke(this,le)[e])return ke(this,oe)[e].messages;const t=await ke(this,ie).getById(e),n=function(e){return e.map((e=>Be(e)?{...e,stopped:"unknown"}:e))}((null==t?void 0:t.messages)??[]);return ke(this,oe)[e].messages=n,ke(this,le)[e]=!0,ke(this,oe)[e].messages}createChat(e){return e||(e=this.createDraft()),ke(this,oe)[e.metadata.id]=e,ke(this,le)[e.metadata.id]=!0,ke(this,ie).add({...e.metadata,messages:e.messages}),{id:e.metadata.id,metadata:e.metadata}}deleteChat(e){return!!this.doesChatExist(e)&&(delete ke(this,oe)[e],ke(this,ie).delete(e),!0)}updateMetadata(e,t){if(this.doesChatExist(e))return ke(this,ie).update(e,{...t}),ke(this,oe)[e].metadata={...ke(this,oe)[e].metadata,...t},ke(this,oe)[e].metadata}updateMessages(e,t){if(this.doesChatExist(e))return ke(this,oe)[e].messages=t,ke(this,ie).update(e,{messages:t}),ke(this,oe)[e].messages}createDraft(){return{messages:[],metadata:{id:(0,r.Z)(),name:"New Chat",createdTime:new Date,lastUpdatedTime:new Date}}}}ie=new WeakMap,oe=new WeakMap,le=new WeakMap;class He{constructor(){we(this,ce,{})}static getMessageWithStreamedResponse(e,t){return{...e,id:t.id,previousMessageId:t.previousMessageId}}static getUpdatedMetadata(e,t){if("assistant"===e.type&&e.chatName)return t?void 0:{name:e.chatName}}add(e,t){ke(this,ce)[e]={stopGenerating:t}}stop(e){const t=ke(this,ce)[e];t&&(t.stopGenerating(),delete ke(this,ce)[e])}static getMessagesOnStreamingStopped(e){const t=e[e.length-1];return Be(t)?e.slice(0,-1).concat({...t,stopped:"byUser"}):e}static getMessagesWithUpdate(e,t){return t.map((t=>t.id===e.id?e:t))}static getMessagesWithDebugInfo(e,t,n){return n.map((n=>n.id===e?{...n,debugInfo:t}:n))}}ce=new WeakMap;class Ue{constructor(e){we(this,de),this.streamingResponse=new He,this.updates=new a.v,this.chatIOProvider=e.chatIO,this.store=new ze(e.chatStorage)}async initialize(){await this.store.initialize()}async getAllChatsMetadata(){return this.store.getAllChatsMetadata()}async getChatMessages(e){return this.store.getChatMessages(e)}doesChatExist(e){return this.store.doesChatExist(e)}createDraft(){const e=this.store.createDraft();return this.updates.emit("draftCreated",{id:e.metadata.id,metadata:e.metadata}),e}createChat(e){const{id:t,metadata:n}=this.store.createChat(e);return this.chatIOProvider.reset(),this.updates.emit("chatCreated",{id:t,metadata:n}),t}deleteChat(e){this.store.deleteChat(e)&&this.updates.emit("chatDeleted",{id:e})}updateChatMetadata(e,t){const n=this.store.updateMetadata(e,t);n&&this.updates.emit("chatMetadataUpdated",{id:e,metadata:n})}async sendMessage(e,t,n={},r){if(!this.store.doesChatExist(e))return;const a=await this.getChatMessages(e);return null===t?Se(this,de,he).call(this,e,a,n,r):Se(this,de,ge).call(this,e,t,a,n,r)}async stopStreamingResponse(e){if(!this.store.doesChatExist(e))return;this.streamingResponse.stop(e);const t=await this.store.getChatMessages(e);Se(this,de,ue).call(this,e,He.getMessagesOnStreamingStopped(t)),this.updates.emit("streamingResponseStopped",{id:e})}async retryMessage(e){if(!this.store.doesChatExist(e))return;const t=function(e,t){let n=e.pop();for(;n&&"user"!==n.type;)n=e.pop();if("user"===(null==n?void 0:n.type))return{messages:e,userMessage:n}}(await this.store.getChatMessages(e));if(!t)return;const{messages:n,userMessage:r}=t;this.store.updateMessages(e,n),this.sendMessage(e,r.content,{contextId:void 0},r.context)}}function $e(e){return"string"==typeof e}function Ge(e){return Array.isArray(e)&&e.every((e=>"string"==typeof e))}function We(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function Ze(e){return Array.isArray(e)}de=new WeakSet,ue=function(e,t){this.store.updateMessages(e,t),this.updates.emit("chatMessagesUpdated",{id:e,messages:t})},ge=function(e,t,n,r={},a){const{responseMessageId:s,messageOptions:i}=Se(this,de,pe).call(this,e,t,n,r,a);this.updates.emit("userMessageSent",{id:e,responseMessageId:s,content:t,messageOptions:i,messageCountBeforeSend:n.length})},he=function(e,t,n={},r){const{responseMessageId:a,messageOptions:s}=Se(this,de,pe).call(this,e,null,t,n,r);this.updates.emit("systemMessageSent",{id:e,responseMessageId:a,messageOptions:s,messageCountBeforeSend:t.length})},pe=function(e,t,n,r={},a){const{predefinedPromptKind:s,systemMessageKind:i,systemMessageMetadata:o,contextId:l,scopedThirdPartyAgentIds:c,targetLanguage:d,extraOptions:u}=r,g=Fe(n,t,r,a);Se(this,de,ue).call(this,e,g);const h=g.length>1?g[g.length-2].id:void 0,p=g[g.length-1].id,m=function(e,t){const n=e.findLast((e=>"assistant"===e.type&&"final"===e.kind));return n&&n.blob,null==n?void 0:n.blob}(g),f=Pe({scopedThirdPartyAgentIds:c,backendBlob:m,predefinedPromptKind:s,systemMessageKind:i,systemMessageMetadata:o,messageId:p,chatId:e,contextId:l,...void 0!==d&&{targetLanguage:d},...void 0!==u&&{extraOptions:u}},a),x=Se(this,de,fe).call(this,e,p),v=Se(this,de,xe).call(this,e,t??"",x,f);return void 0!==h&&void 0!==v&&Se(this,de,me).call(this,v,e,h),{responseMessageId:p,messageOptions:f}},me=async function(e,t,n){const r=await e;if(void 0===r)return;const a=await this.store.getChatMessages(t),s=He.getMessagesWithDebugInfo(n,r,a);Se(this,de,ue).call(this,t,s)},fe=function(e,t){return async n=>{if(!this.store.doesChatExist(e))return;const r=(await this.store.getChatMessages(e)).find((e=>e.id===t));if(!r)return;const a=He.getMessageWithStreamedResponse(n,r),s=this.store.getChatMetadata(e),i=He.getUpdatedMetadata(n,null==s?void 0:s.userEditedTitle);if(a){this.updates.emit("chatMessageStreamed",{id:e,message:a,previousVersion:r});const t=await this.store.getChatMessages(e),n=He.getMessagesWithUpdate(a,t);Se(this,de,ue).call(this,e,n)}i&&this.updateChatMetadata(e,i)}},xe=function(e,t,n,r){const a=this.chatIOProvider.sendMessage(t,n,r);return this.streamingResponse.add(e,a),a.debug};const Ve=ve.dt({start:ve.pk,end:ve.pk}),qe=ve.jV([ve.dt({location:ve.Z_,original:ve.Z_,updated:ve.Z_}),ve.r$({reason:ve.Z_})]),Ke=ve.r$({original:ve.Z_,updated:ve.Z_,reason:ve.Z_,validated:ve.O7,edit_span:Ve,raw_edit_proposal:qe}),Je=ve.dt({type:ve.i0("ai_message"),id:ve.Z_,content:ve.Z_}),Ye=ve.dt({type:ve.i0("proposed_edits"),id:ve.Z_,edits:ve.IX(Ke)}),Xe=ve.dt({type:ve.i0("reading_document"),id:ve.Z_}),Qe=ve.dt({type:ve.i0("generic_tool_call"),id:ve.Z_,content:ve.Z_,sticky:ve.O7}),et=ve.dt({type:ve.i0("error"),id:ve.Z_,message:ve.Z_}),tt=ve.jV([ve.dt({type:ve.i0("generated_text"),id:ve.Z_,content:ve.Z_}),ve.r$({title:ve.Z_,content_type:ve.Z_,format:ve.Z_})]),nt=ve.G0([ve.i0("chatAgent"),ve.i0("improve"),ve.i0("proofreaderAgent"),ve.i0("plagiarismAgent"),ve.i0("aiDetectorAgent"),ve.i0("aiGraderAgent"),ve.i0("citationFinderAgent"),ve.i0("expertPanelAgent"),ve.i0("humanizerAgent"),ve.i0("readerReactionAgent")]),rt=ve.G0([ve.i0("onboarding:welcome"),ve.i0("onboarding:start"),ve.i0("onboarding:next"),ve.i0("onboarding:exit")]),at=ve.jV([ve.dt({kind:ve.i0("chatMessage"),label:ve.Z_,message:ve.Z_}),ve.r$({isRecommended:ve.O7,icon:nt,systemMessageKind:rt})]),st=ve.dt({kind:ve.i0("OpenAgent"),agentId:ve.Z_}),it=ve.jV([ve.dt({kind:ve.i0("assistantCommand"),label:ve.Z_,command:st}),ve.r$({isRecommended:ve.O7,icon:nt})]),ot=ve.G0([at,it]),lt=ve.jV([ve.dt({type:ve.i0("quick_actions"),id:ve.Z_,actions:ve.IX(ot)}),ve.r$({title:ve.Z_})]),ct=ve.dt({type:ve.i0("insert_text"),id:ve.Z_,insert_offset:ve.pk,text:ve.Z_}),dt=ve.dt({type:ve.i0("widget"),id:ve.Z_,widget_type:ve.Z_}),ut=ve.dt({id:ve.Z_,title:ve.Z_,statusLabel:ve.Z_}),gt=ve.jV([ut,ve.dt({type:ve.i0("research_page"),status:ve.i0("proposed")})]),ht=ve.jV([ut,ve.dt({type:ve.i0("research_page"),status:ve.i0("loading"),progress:ve.pk})]),pt=ve.jV([ut,ve.dt({type:ve.i0("research_page"),status:ve.i0("completed"),pageId:ve.Z_})]),mt=ve.G0([gt,ht,pt]),ft=ve.G0([Je,et,tt,Qe,ct,Ye,lt,Xe,dt,mt]),xt=ve.dt({id:ve.Z_,name:ve.Z_,args:ve.mI});ve.jV([ve.dt({items:ve.IX(ft)}),ve.r$({clientToolCalls:ve.IX(xt)})]);const vt=ve.dt({pname:ve.Z_,original_paragraph:ve.Z_,begin:ve.pk,end:ve.pk,rewrite:ve.Z_,explanation:ve.Z_,contentId:ve.Z_});let bt;function Ct(){return bt||(bt=be.C8.Logging.getLogger("assistant.chat")),bt}function yt(e){return e.filter((e=>{const t=ft.is(e);if(!t)if(e&&"object"==typeof e){const{type:t,kind:n}=e;Ct().warn(`Invalid AiEditor output item. type=${t}, kind=${n}`)}else Ct().warn("Invalid AiEditor output item. Not an object.");return t}))}function kt(e){return e.filter((e=>{const t=xt.is(e);return t||Ct().warn("Invalid AiEditor client tool call item. Not an object."),t}))}function wt(e,t=0){return Rt(e,["responseText",t].filter(Boolean).join(""),"",$e)}function jt(e){return Rt(e,"historyTitle",void 0,$e)}function St(e){return Rt(e,"planning",[],(e=>Ze(e)&&e.every((e=>We(e)&&"title"in e))))}function It(e){return Rt(e,"pendingToolCallActions",[],(e=>Ze(e)&&e.every((e=>We(e)&&"toolCallId"in e))))}function At(e){return Rt(e,"currentSessionRewrites",[],(e=>Ze(e)&&e.every((e=>We(e)&&"explanation"in e))))}function Et(e){return Rt(e,"sources",void 0,(e=>Ze(e)&&e.every((e=>We(e)&&"url"in e&&"title"in e&&"recordId"in e&&"searchRequestId"in e))))}function _t(e){return Rt(e,"kind",Ie.Other,function(e){return t=>"string"==typeof t&&Object.values(e).includes(t)}(Ie))}function Mt(e){return function(e){if(!Ze(e))return[];const t=e.filter(vt.is);if(t.length!==e.length){const n=e.length-t.length,r=e.length;Ct().warn(`Invalid AiEditor alerts structure: validation failed for ${n} items out of ${r}`)}return t}(Rt(e,"alerts",[],Ze))}function Rt(e,t,n,r){const a=e[t];if(!a)return n;try{const e=a.json,s=JSON.parse(e);return r&&!r(s)?(Ct().warn(`Parsed value for ${t} does not match expected type`),n):s}catch{return Ct().warn(`Failed to parse ${t}`),n}}const Dt=e=>{const t=function(e){return Rt(e,"ideation_approaches",[],Ge)}(e);if(t.length>0){const n=t.map(((t,n)=>({title:t,content:wt(e,n)})));return{responseFormat:Ie.PromptOutput,variations:n,content:n[0].content}}const n=function(e){return Rt(e,"tabResponses",[],(e=>Ze(e)&&e.every((e=>We(e)&&"title"in e&&"mainContent"in e))))}(e);if(n.length>0){const e=n.map((e=>({title:e.title,content:e.mainContent})));return{responseFormat:Ie.PromptOutput,content:e[0].content,variations:e}}const r=wt(e);return{responseFormat:Ie.PromptOutput,content:r}};function Tt(e){const{items:t,clientToolCalls:n}=function(e){const{items:t,clientToolCalls:n}=Rt(e,"output",{},We);return{items:Ze(t)?yt(t):[],clientToolCalls:Ze(n)?kt(n):[]}}(e);return{responseFormat:Ie.AiEditorOutput,items:t,clientToolCalls:n,alerts:Mt(e),content:""}}function Ot(e){return{chatName:jt(e)}}function Lt(e){return{sources:Et(e)}}function Nt(e){return{planning:St(e)}}function Pt(e){return{currentSessionRewrites:At(e)}}function Bt(e){return{pendingToolCallActions:It(e)}}function Ft(e){try{return"```json\n"+JSON.stringify(e,null,2)+"\n```"}catch(e){return`# Failed to serialize message: ${e}`}}const zt=re(ae(i.Schemable)({sensitiveString:i.string}))(G).is,Ht=re(ae(i.Schemable)({sensitiveString:i.string}))(H).is;function Ut(e){var t;switch(e.kind){case l.PU.Partial:return{kind:l.PU.Partial};case l.PU.Final:return{kind:l.PU.Final,blob:(null==(t=e.backendBlob)?void 0:t.blob)||""};default:(0,se.vE)(e)}}const $t=(e,t)=>({...e,debugInfo:{networkMessage:Ft(t)}});function Gt(e){return _t(e.extraProperties)===Ie.AiEditorOutput?Tt(e.extraProperties):Dt(e.extraProperties)}function Wt({correlationId:e,onResponse:t,onResponseComplete:n,middleware:r=[]}){return a=>{if(!Ht(a)&&!zt(a))return s._.Result.CONTINUE_HANDLING;if(a.correlationId!==e)return s._.Result.CONTINUE_HANDLING;const i=zt(a)?function(e){return{type:"error",title:e.title,content:e.details,errorType:e.errorType.kind,debugInfo:{networkMessage:Ft(e)}}}(a):function(e,t){let n={type:"assistant",...Ut(e),...Gt(e),...Ot(e.extraProperties),...Lt(e.extraProperties),...Nt(e.extraProperties),...Pt(e.extraProperties),...Bt(e.extraProperties)};for(const r of t)n=r(n,e);return n}(a,r);return t(i),(zt(a)||a.kind===l.PU.Final)&&(null==n||n()),s._.Result.STOP_HANDLING}}},34254:(e,t,n)=>{n.d(t,{ID:()=>j,cB:()=>k});var r,a,s,i,o,l,c,d=Object.defineProperty,u=e=>{throw TypeError(e)},g=(e,t,n)=>((e,t,n)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n),h=(e,t,n)=>t.has(e)||u("Cannot "+n),p=(e,t,n)=>(h(e,t,"read from private field"),n?n.call(e):t.get(e)),m=(e,t,n)=>t.has(e)?u("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),f=(e,t,n,r)=>(h(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),x=(e,t,n)=>(h(e,t,"access private method"),n);class v{constructor(){g(this,"listeners",new Map)}on(e,t){return this._getOrInitializeListeners(e).add(t),{dispose:()=>{const n=this.listeners.get(e);null==n||n.delete(t)}}}emit(e,t){const n=this.listeners.get(e);if(n)for(const r of n)try{r(t)}catch(t){console.error(`Error in event listener for event "${String(e)}":`,t)}}_getOrInitializeListeners(e){return this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e)}}class b{constructor(e){m(this,i),m(this,r,new v),m(this,a),m(this,s,[]),f(this,a,e),x(this,i,o).call(this)}on(e,t){return p(this,r).on(e,t)}getAppContext(e){return x(this,i,l).call(this,e)}getInitialContextId(){return p(this,a).getInitialContextId()}dispose(){for(const e of p(this,s))e.dispose();p(this,s).length=0}}r=new WeakMap,a=new WeakMap,s=new WeakMap,i=new WeakSet,o=function(){p(this,s).push(p(this,a).on("available",(e=>{p(this,r).emit("contextAvailable",e)}))),p(this,s).push(p(this,a).on("invalidated",(e=>{p(this,r).emit("contextInvalidated",e)}))),p(this,s).push(p(this,a).on("selectionChange",(e=>{p(this,r).emit("selectionChange",e)})))},l=function(e){p(this,r).emit("contextExtractionStart",e);try{const t=p(this,a).getContext(e);return p(this,r).emit("contextExtractionSuccess",{context:t}),t}catch(e){throw p(this,r).emit("contextExtractionError",{error:e}),e}};class C{constructor(e){m(this,c),f(this,c,e)}get state(){return p(this,c).state}async write(e,t){if(!p(this,c).state.isAvailable)throw new Error("Writable context is not available");p(this,c).write(e,t)}on(e,t){return p(this,c).on(e,t)}}c=new WeakMap;class y{constructor(){this.on=()=>({dispose:()=>{}}),this.write=async()=>{throw new Error("Cannot write into disabled writable context")}}get state(){return{isAvailable:!1}}}class k{constructor(e){this.appContext=new b(e.appContextExtractionProvider),this.documentContext=e.documentContextProvider?new C(e.documentContextProvider):new y}}function w(e){return"string"==typeof e}function j(e){return w(e)?0===e.length:0===e.selectedText.length}},92120:(e,t,n)=>{n.d(t,{pd:()=>es,uk:()=>ts,i7:()=>gd,IQ:()=>Qa,w9:()=>Uc,FP:()=>Xa,wc:()=>Us,xg:()=>gg,aM:()=>hg,ZY:()=>dg,f$:()=>xd,GV:()=>vi,ht:()=>Pl,Op:()=>Ja,so:()=>Ya,Ie:()=>ed,D_:()=>wl,GP:()=>yl,eB:()=>ps,Tm:()=>ms,ar:()=>ss,bF:()=>is,AX:()=>ds,Ox:()=>fg,RJ:()=>hs,fK:()=>Ro,ej:()=>_o,Sh:()=>hd,rD:()=>Qg,zI:()=>vg,wz:()=>Kg,i5:()=>xg,hA:()=>Jg});var r=n(28338),a=n(62220),s=n(651),i=n(92379);if(6168==n.j)var o=n(54295);if(6168==n.j)var l=n(88035);if(6168==n.j)var c=n(60132);if(6168==n.j)var d=n(15411);if(6168==n.j)var u=n(18956);if(6168==n.j)var g=n(75362);if(6168==n.j)var h=n(2651);var p=n(74881),m=n(37710),f=n(88915),x=n(90898),v=n(90371),b=n(11087),C=n(60454),y=n(47095),k=n(77382),w=n(71784),j=n(30515);if(6168==n.j)var S=n(61230);if(6168==n.j)var I=n(82494);if(6168==n.j)var A=n(99807);if(6168==n.j)var E=n(692);if(6168==n.j)var _=n(91259);if(6168==n.j)var M=n(13446);if(6168==n.j)var R=n(57526);if(6168==n.j)var D=n(79223);if(6168==n.j)var T=n(93607);if(6168==n.j)var O=n(72936);if(6168==n.j)var L=n(89923);if(6168==n.j)var N=n(99589);if(6168==n.j)var P=n(39981);if(6168==n.j)var B=n(69237);var F=n(95295);const z="undefined"!=typeof self&&void 0!==self.document&&void 0!==self.document.createElement;function H(e){const t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function U(e){return"nodeType"in e}function $(e){var t,n;return e?H(e)?e:U(e)&&null!=(t=null==(n=e.ownerDocument)?void 0:n.defaultView)?t:self:self}function G(e){const{Document:t}=$(e);return e instanceof t}function W(e){return!H(e)&&e instanceof $(e).HTMLElement}function Z(e){return e instanceof $(e).SVGElement}function V(e){return e?H(e)?e.document:U(e)?G(e)?e:W(e)||Z(e)?e.ownerDocument:document:document:document}const q=6168==n.j?z?i.useLayoutEffect:i.useEffect:null;function K(e){const t=(0,i.useRef)(e);return q((()=>{t.current=e})),(0,i.useCallback)((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)}),[])}function J(e,t){void 0===t&&(t=[e]);const n=(0,i.useRef)(e);return q((()=>{n.current!==e&&(n.current=e)}),t),n}function Y(e,t){const n=(0,i.useRef)();return(0,i.useMemo)((()=>{const t=e(n.current);return n.current=t,t}),[...t])}function X(e){const t=K(e),n=(0,i.useRef)(null),r=(0,i.useCallback)((e=>{e!==n.current&&(null==t||t(e,n.current)),n.current=e}),[]);return[n,r]}function Q(e){const t=(0,i.useRef)();return(0,i.useEffect)((()=>{t.current=e}),[e]),t.current}let ee={};function te(e,t){return(0,i.useMemo)((()=>{if(t)return t;const n=null==ee[e]?0:ee[e]+1;return ee[e]=n,e+"-"+n}),[e,t])}function ne(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.reduce(((t,n)=>{const r=Object.entries(n);for(const[n,a]of r){const r=t[n];null!=r&&(t[n]=r+e*a)}return t}),{...t})}}const re=ne(1),ae=ne(-1);function se(e){if(!e)return!1;const{KeyboardEvent:t}=$(e.target);return t&&e instanceof t}function ie(e){if(function(e){if(!e)return!1;const{TouchEvent:t}=$(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return function(e){return"clientX"in e&&"clientY"in e}(e)?{x:e.clientX,y:e.clientY}:null}const oe=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[oe.Translate.toString(e),oe.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),le="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function ce(e){return e.matches(le)?e:e.querySelector(le)}const de={display:"none"};function ue(e){let{id:t,value:n}=e;return i.createElement("div",{id:t,style:de},n)}function ge(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;return i.createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":r,"aria-atomic":!0},n)}const he=6168==n.j?(0,i.createContext)(null):null;const pe={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},me={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function fe(e){let{announcements:t=me,container:n,hiddenTextDescribedById:r,screenReaderInstructions:a=pe}=e;const{announce:s,announcement:o}=function(){const[e,t]=(0,i.useState)("");return{announce:(0,i.useCallback)((e=>{null!=e&&t(e)}),[]),announcement:e}}(),l=te("DndLiveRegion"),[c,d]=(0,i.useState)(!1);if((0,i.useEffect)((()=>{d(!0)}),[]),function(e){const t=(0,i.useContext)(he);(0,i.useEffect)((()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)}),[e,t])}((0,i.useMemo)((()=>({onDragStart(e){let{active:n}=e;s(t.onDragStart({active:n}))},onDragMove(e){let{active:n,over:r}=e;t.onDragMove&&s(t.onDragMove({active:n,over:r}))},onDragOver(e){let{active:n,over:r}=e;s(t.onDragOver({active:n,over:r}))},onDragEnd(e){let{active:n,over:r}=e;s(t.onDragEnd({active:n,over:r}))},onDragCancel(e){let{active:n,over:r}=e;s(t.onDragCancel({active:n,over:r}))}})),[s,t])),!c)return null;const u=i.createElement(i.Fragment,null,i.createElement(ue,{id:r,value:a.draggable}),i.createElement(ge,{id:l,announcement:o}));return n?(0,F.createPortal)(u,n):u}var xe;function ve(){}function be(e,t){return(0,i.useMemo)((()=>({sensor:e,options:null!=t?t:{}})),[e,t])}!function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"}(xe||(xe={}));const Ce=Object.freeze({x:0,y:0});function ye(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function ke(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function we(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function je(e){let{left:t,top:n,height:r,width:a}=e;return[{x:t,y:n},{x:t+a,y:n},{x:t,y:n+r},{x:t+a,y:n+r}]}function Se(e,t){if(!e||0===e.length)return null;const[n]=e;return t?n[t]:n}function Ie(e,t,n){return void 0===t&&(t=e.left),void 0===n&&(n=e.top),{x:t+.5*e.width,y:n+.5*e.height}}const Ae=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=Ie(t,t.left,t.top),s=[];for(const e of r){const{id:t}=e,r=n.get(t);if(r){const n=ye(Ie(r),a);s.push({id:t,data:{droppableContainer:e,value:n}})}}return s.sort(ke)};function Ee(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),i=a-r,o=s-n;if(r<a&&n<s){const n=t.width*t.height,r=e.width*e.height,a=i*o;return Number((a/(n+r-a)).toFixed(4))}return 0}const _e=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=[];for(const e of r){const{id:r}=e,s=n.get(r);if(s){const n=Ee(s,t);n>0&&a.push({id:r,data:{droppableContainer:e,value:n}})}}return a.sort(we)};function Me(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Ce}const Re=6168==n.j?(De=1,function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce(((e,t)=>({...e,top:e.top+De*t.y,bottom:e.bottom+De*t.y,left:e.left+De*t.x,right:e.right+De*t.x})),{...e})}):null;var De;function Te(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}const Oe={ignoreTransform:!1};function Le(e,t){void 0===t&&(t=Oe);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:t,transformOrigin:r}=$(e).getComputedStyle(e);t&&(n=function(e,t,n){const r=Te(t);if(!r)return e;const{scaleX:a,scaleY:s,x:i,y:o}=r,l=e.left-i-(1-a)*parseFloat(n),c=e.top-o-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),d=a?e.width/a:e.width,u=s?e.height/s:e.height;return{width:d,height:u,top:c,right:l+d,bottom:c+u,left:l}}(n,t,r))}const{top:r,left:a,width:s,height:i,bottom:o,right:l}=n;return{top:r,left:a,width:s,height:i,bottom:o,right:l}}function Ne(e){return Le(e,{ignoreTransform:!0})}function Pe(e,t){const n=[];return e?function r(a){if(null!=t&&n.length>=t)return n;if(!a)return n;if(G(a)&&null!=a.scrollingElement&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!W(a)||Z(a))return n;if(n.includes(a))return n;const s=$(e).getComputedStyle(a);return a!==e&&function(e,t){void 0===t&&(t=$(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some((e=>{const r=t[e];return"string"==typeof r&&n.test(r)}))}(a,s)&&n.push(a),function(e,t){return void 0===t&&(t=$(e).getComputedStyle(e)),"fixed"===t.position}(a,s)?n:r(a.parentNode)}(e):n}function Be(e){const[t]=Pe(e,1);return null!=t?t:null}function Fe(e){return z&&e?H(e)?e:U(e)?G(e)||e===V(e).scrollingElement?self:W(e)?e:null:null:null}function ze(e){return H(e)?e.scrollX:e.scrollLeft}function He(e){return H(e)?e.scrollY:e.scrollTop}function Ue(e){return{x:ze(e),y:He(e)}}var $e;function Ge(e){return!(!z||!e)&&e===document.scrollingElement}function We(e){const t={x:0,y:0},n=Ge(e)?{height:self.innerHeight,width:self.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height};return{isTop:e.scrollTop<=t.y,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=r.y,isRight:e.scrollLeft>=r.x,maxScroll:r,minScroll:t}}!function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"}($e||($e={}));const Ze={x:.2,y:.2};function Ve(e,t,n,r,a){let{top:s,left:i,right:o,bottom:l}=n;void 0===r&&(r=10),void 0===a&&(a=Ze);const{isTop:c,isBottom:d,isLeft:u,isRight:g}=We(e),h={x:0,y:0},p={x:0,y:0},m=t.height*a.y,f=t.width*a.x;return!c&&s<=t.top+m?(h.y=$e.Backward,p.y=r*Math.abs((t.top+m-s)/m)):!d&&l>=t.bottom-m&&(h.y=$e.Forward,p.y=r*Math.abs((t.bottom-m-l)/m)),!g&&o>=t.right-f?(h.x=$e.Forward,p.x=r*Math.abs((t.right-f-o)/f)):!u&&i<=t.left+f&&(h.x=$e.Backward,p.x=r*Math.abs((t.left+f-i)/f)),{direction:h,speed:p}}function qe(e){if(e===document.scrollingElement){const{innerWidth:e,innerHeight:t}=self;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}const{top:t,left:n,right:r,bottom:a}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:a,width:e.clientWidth,height:e.clientHeight}}function Ke(e){return e.reduce(((e,t)=>re(e,Ue(t))),Ce)}function Je(e,t){if(void 0===t&&(t=Le),!e)return;const{top:n,left:r,bottom:a,right:s}=t(e);Be(e)&&(a<=0||s<=0||n>=self.innerHeight||r>=self.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Ye=[["x",["left","right"],function(e){return e.reduce(((e,t)=>e+ze(t)),0)}],["y",["top","bottom"],function(e){return e.reduce(((e,t)=>e+He(t)),0)}]];class Xe{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=Pe(t),r=Ke(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[e,t,a]of Ye)for(const s of t)Object.defineProperty(this,s,{get:()=>{const t=a(n),i=r[e]-t;return this.rect[s]+i},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Qe{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach((e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)}))},this.target=e}add(e,t,n){var r;null==(r=this.target)||r.addEventListener(e,t,n),this.listeners.push([e,t,n])}}function et(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return"number"==typeof t?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t&&r>t.y}var tt,nt;function rt(e){e.preventDefault()}function at(e){e.stopPropagation()}!function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"}(tt||(tt={})),function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"}(nt||(nt={}));const st={start:[nt.Space,nt.Enter],cancel:[nt.Esc],end:[nt.Space,nt.Enter,nt.Tab]},it=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case nt.Right:return{...n,x:n.x+25};case nt.Left:return{...n,x:n.x-25};case nt.Down:return{...n,y:n.y+25};case nt.Up:return{...n,y:n.y-25}}};class ot{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new Qe(V(t)),this.windowListeners=new Qe($(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(tt.Resize,this.handleCancel),this.windowListeners.add(tt.VisibilityChange,this.handleCancel),setTimeout((()=>this.listeners.add(tt.Keydown,this.handleKeyDown)))}handleStart(){const{activeNode:e,onStart:t}=this.props,n=e.node.current;n&&Je(n),t(Ce)}handleKeyDown(e){if(se(e)){const{active:t,context:n,options:r}=this.props,{keyboardCodes:a=st,coordinateGetter:s=it,scrollBehavior:i="smooth"}=r,{code:o}=e;if(a.end.includes(o))return void this.handleEnd(e);if(a.cancel.includes(o))return void this.handleCancel(e);const{collisionRect:l}=n.current,c=l?{x:l.left,y:l.top}:Ce;this.referenceCoordinates||(this.referenceCoordinates=c);const d=s(e,{active:t,context:n.current,currentCoordinates:c});if(d){const t=ae(d,c),r={x:0,y:0},{scrollableAncestors:a}=n.current;for(const n of a){const a=e.code,{isTop:s,isRight:o,isLeft:l,isBottom:c,maxScroll:u,minScroll:g}=We(n),h=qe(n),p={x:Math.min(a===nt.Right?h.right-h.width/2:h.right,Math.max(a===nt.Right?h.left:h.left+h.width/2,d.x)),y:Math.min(a===nt.Down?h.bottom-h.height/2:h.bottom,Math.max(a===nt.Down?h.top:h.top+h.height/2,d.y))},m=a===nt.Right&&!o||a===nt.Left&&!l,f=a===nt.Down&&!c||a===nt.Up&&!s;if(m&&p.x!==d.x){const e=n.scrollLeft+t.x,s=a===nt.Right&&e<=u.x||a===nt.Left&&e>=g.x;if(s&&!t.y)return void n.scrollTo({left:e,behavior:i});r.x=s?n.scrollLeft-e:a===nt.Right?n.scrollLeft-u.x:n.scrollLeft-g.x,r.x&&n.scrollBy({left:-r.x,behavior:i});break}if(f&&p.y!==d.y){const e=n.scrollTop+t.y,s=a===nt.Down&&e<=u.y||a===nt.Up&&e>=g.y;if(s&&!t.x)return void n.scrollTo({top:e,behavior:i});r.y=s?n.scrollTop-e:a===nt.Down?n.scrollTop-u.y:n.scrollTop-g.y,r.y&&n.scrollBy({top:-r.y,behavior:i});break}}this.handleMove(e,re(ae(d,this.referenceCoordinates),r))}}}handleMove(e,t){const{onMove:n}=this.props;e.preventDefault(),n(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function lt(e){return Boolean(e&&"distance"in e)}function ct(e){return Boolean(e&&"delay"in e)}ot.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=st,onActivation:a}=t,{active:s}=n;const{code:i}=e.nativeEvent;if(r.start.includes(i)){const t=s.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==a||a({event:e.nativeEvent}),!0)}return!1}}];class dt{constructor(e,t,n){var r;void 0===n&&(n=function(e){const{EventTarget:t}=$(e);return e instanceof t?e:V(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:a}=e,{target:s}=a;this.props=e,this.events=t,this.document=V(s),this.documentListeners=new Qe(this.document),this.listeners=new Qe(n),this.windowListeners=new Qe($(s)),this.initialCoordinates=null!=(r=ie(a))?r:Ce,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(tt.Resize,this.handleCancel),this.windowListeners.add(tt.DragStart,rt),this.windowListeners.add(tt.VisibilityChange,this.handleCancel),this.windowListeners.add(tt.ContextMenu,rt),this.documentListeners.add(tt.Keydown,this.handleKeydown),t){if(null!=n&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(ct(t))return this.timeoutId=setTimeout(this.handleStart,t.delay),void this.handlePending(t);if(lt(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:n,onPending:r}=this.props;r(n,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(tt.Click,at,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(tt.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:n,initialCoordinates:r,props:a}=this,{onMove:s,options:{activationConstraint:i}}=a;if(!r)return;const o=null!=(t=ie(e))?t:Ce,l=ae(r,o);if(!n&&i){if(lt(i)){if(null!=i.tolerance&&et(l,i.tolerance))return this.handleCancel();if(et(l,i.distance))return this.handleStart()}return ct(i)&&et(l,i.tolerance)?this.handleCancel():void this.handlePending(i,l)}e.cancelable&&e.preventDefault(),s(o)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===nt.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}const ut={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class gt extends dt{constructor(e){const{event:t}=e,n=V(t.target);super(e,ut,n)}}gt.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!(!n.isPrimary||0!==n.button)&&(null==r||r({event:n}),!0)}}];const ht={move:{name:"mousemove"},end:{name:"mouseup"}};var pt;!function(e){e[e.RightClick=2]="RightClick"}(pt||(pt={}));(class extends dt{constructor(e){super(e,ht,V(e.event.target))}}).activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button!==pt.RightClick&&(null==r||r({event:n}),!0)}}];const mt={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};var ft,xt;function vt(e){let{acceleration:t,activator:n=ft.Pointer,canScroll:r,draggingRect:a,enabled:s,interval:o=5,order:l=xt.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:u,delta:g,threshold:h}=e;const p=function(e){let{delta:t,disabled:n}=e;const r=Q(t);return Y((e=>{if(n||!r||!e)return bt;const a={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[$e.Backward]:e.x[$e.Backward]||-1===a.x,[$e.Forward]:e.x[$e.Forward]||1===a.x},y:{[$e.Backward]:e.y[$e.Backward]||-1===a.y,[$e.Forward]:e.y[$e.Forward]||1===a.y}}}),[n,t,r])}({delta:g,disabled:!s}),[m,f]=function(){const e=(0,i.useRef)(null);return[(0,i.useCallback)(((t,n)=>{e.current=setInterval(t,n)}),[]),(0,i.useCallback)((()=>{null!==e.current&&(clearInterval(e.current),e.current=null)}),[])]}(),x=(0,i.useRef)({x:0,y:0}),v=(0,i.useRef)({x:0,y:0}),b=(0,i.useMemo)((()=>{switch(n){case ft.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case ft.DraggableRect:return a}}),[n,a,c]),C=(0,i.useRef)(null),y=(0,i.useCallback)((()=>{const e=C.current;if(!e)return;const t=x.current.x*v.current.x,n=x.current.y*v.current.y;e.scrollBy(t,n)}),[]),k=(0,i.useMemo)((()=>l===xt.TreeOrder?[...d].reverse():d),[l,d]);(0,i.useEffect)((()=>{if(s&&d.length&&b){for(const e of k){if(!1===(null==r?void 0:r(e)))continue;const n=d.indexOf(e),a=u[n];if(!a)continue;const{direction:s,speed:i}=Ve(e,a,b,t,h);for(const e of["x","y"])p[e][s[e]]||(i[e]=0,s[e]=0);if(i.x>0||i.y>0)return f(),C.current=e,m(y,o),x.current=i,void(v.current=s)}x.current={x:0,y:0},v.current={x:0,y:0},f()}else f()}),[t,y,r,f,s,o,JSON.stringify(b),JSON.stringify(p),m,d,k,u,JSON.stringify(h)])}(class extends dt{constructor(e){super(e,mt)}static setup(){return self.addEventListener(mt.move.name,e,{capture:!1,passive:!1}),function(){self.removeEventListener(mt.move.name,e)};function e(){}}}).activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:a}=n;return!(a.length>1)&&(null==r||r({event:n}),!0)}}],function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"}(ft||(ft={})),function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"}(xt||(xt={}));const bt={x:{[$e.Backward]:!1,[$e.Forward]:!1},y:{[$e.Backward]:!1,[$e.Forward]:!1}};var Ct,yt;!function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"}(Ct||(Ct={})),function(e){e.Optimized="optimized"}(yt||(yt={}));const kt=new Map;function wt(e,t){return Y((n=>e?n||("function"==typeof t?t(e):e):null),[t,e])}function jt(e){let{callback:t,disabled:n}=e;const r=K(t),a=(0,i.useMemo)((()=>{if(n||"undefined"==typeof self||void 0===self.ResizeObserver)return;const{ResizeObserver:e}=self;return new e(r)}),[n]);return(0,i.useEffect)((()=>()=>null==a?void 0:a.disconnect()),[a]),a}function St(e){return new Xe(Le(e),e)}function It(e,t,n){void 0===t&&(t=St);const[r,a]=(0,i.useState)(null);function s(){a((r=>{if(!e)return null;var a;if(!1===e.isConnected)return null!=(a=null!=r?r:n)?a:null;const s=t(e);return JSON.stringify(r)===JSON.stringify(s)?r:s}))}const o=function(e){let{callback:t,disabled:n}=e;const r=K(t),a=(0,i.useMemo)((()=>{if(n||"undefined"==typeof self||void 0===self.MutationObserver)return;const{MutationObserver:e}=self;return new e(r)}),[r,n]);return(0,i.useEffect)((()=>()=>null==a?void 0:a.disconnect()),[a]),a}({callback(t){if(e)for(const n of t){const{type:t,target:r}=n;if("childList"===t&&r instanceof HTMLElement&&r.contains(e)){s();break}}}}),l=jt({callback:s});return q((()=>{s(),e?(null==l||l.observe(e),null==o||o.observe(document.body,{childList:!0,subtree:!0})):(null==l||l.disconnect(),null==o||o.disconnect())}),[e]),r}const At=6168==n.j?[]:null;function Et(e,t){void 0===t&&(t=[]);const n=(0,i.useRef)(null);return(0,i.useEffect)((()=>{n.current=null}),t),(0,i.useEffect)((()=>{const t=e!==Ce;t&&!n.current&&(n.current=e),!t&&n.current&&(n.current=null)}),[e]),n.current?ae(e,n.current):Ce}function _t(e){return(0,i.useMemo)((()=>e?function(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}(e):null),[e])}const Mt=6168==n.j?[]:null;function Rt(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return W(t)?t:e}const Dt=[{sensor:gt,options:{}},{sensor:ot,options:{}}],Tt={current:{}},Ot={draggable:{measure:Ne},droppable:{measure:Ne,strategy:Ct.WhileDragging,frequency:yt.Optimized},dragOverlay:{measure:Le}};class Lt extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter((e=>{let{disabled:t}=e;return!t}))}getNodeFor(e){var t,n;return null!=(t=null==(n=this.get(e))?void 0:n.node.current)?t:void 0}}const Nt={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Lt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:ve},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ot,measureDroppableContainers:ve,windowRect:null,measuringScheduled:!1},Pt={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ve,draggableNodes:new Map,over:null,measureDroppableContainers:ve},Bt=6168==n.j?(0,i.createContext)(Pt):null,Ft=6168==n.j?(0,i.createContext)(Nt):null;function zt(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Lt}}}function Ht(e,t){switch(t.type){case xe.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case xe.DragMove:return null==e.draggable.active?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case xe.DragEnd:case xe.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case xe.RegisterDroppable:{const{element:n}=t,{id:r}=n,a=new Lt(e.droppable.containers);return a.set(r,n),{...e,droppable:{...e.droppable,containers:a}}}case xe.SetDroppableDisabled:{const{id:n,key:r,disabled:a}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const i=new Lt(e.droppable.containers);return i.set(n,{...s,disabled:a}),{...e,droppable:{...e.droppable,containers:i}}}case xe.UnregisterDroppable:{const{id:n,key:r}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const s=new Lt(e.droppable.containers);return s.delete(n),{...e,droppable:{...e.droppable,containers:s}}}default:return e}}function Ut(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:a}=(0,i.useContext)(Bt),s=Q(r),o=Q(null==n?void 0:n.id);return(0,i.useEffect)((()=>{if(!t&&!r&&s&&null!=o){if(!se(s))return;if(document.activeElement===s.target)return;const e=a.get(o);if(!e)return;const{activatorNode:t,node:n}=e;if(!t.current&&!n.current)return;requestAnimationFrame((()=>{for(const e of[t.current,n.current]){if(!e)continue;const t=ce(e);if(t){t.focus();break}}}))}}),[r,t,a,o,s]),null}function $t(e,t){let{transform:n,...r}=t;return null!=e&&e.length?e.reduce(((e,t)=>t({transform:e,...r})),n):n}const Gt=(0,i.createContext)({...Ce,scaleX:1,scaleY:1});var Wt;!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"}(Wt||(Wt={}));const Zt=6168==n.j?(0,i.memo)((function(e){var t,n,r,a;let{id:s,accessibility:o,autoScroll:l=!0,children:c,sensors:d=Dt,collisionDetection:u=_e,measuring:g,modifiers:h,...p}=e;const m=(0,i.useReducer)(Ht,void 0,zt),[f,x]=m,[v,b]=function(){const[e]=(0,i.useState)((()=>new Set)),t=(0,i.useCallback)((t=>(e.add(t),()=>e.delete(t))),[e]);return[(0,i.useCallback)((t=>{let{type:n,event:r}=t;e.forEach((e=>{var t;return null==(t=e[n])?void 0:t.call(e,r)}))}),[e]),t]}(),[C,y]=(0,i.useState)(Wt.Uninitialized),k=C===Wt.Initialized,{draggable:{active:w,nodes:j,translate:S},droppable:{containers:I}}=f,A=null!=w?j.get(w):null,E=(0,i.useRef)({initial:null,translated:null}),_=(0,i.useMemo)((()=>{var e;return null!=w?{id:w,data:null!=(e=null==A?void 0:A.data)?e:Tt,rect:E}:null}),[w,A]),M=(0,i.useRef)(null),[R,D]=(0,i.useState)(null),[T,O]=(0,i.useState)(null),L=J(p,Object.values(p)),N=te("DndDescribedBy",s),P=(0,i.useMemo)((()=>I.getEnabled()),[I]),B=(H=g,(0,i.useMemo)((()=>({draggable:{...Ot.draggable,...null==H?void 0:H.draggable},droppable:{...Ot.droppable,...null==H?void 0:H.droppable},dragOverlay:{...Ot.dragOverlay,...null==H?void 0:H.dragOverlay}})),[null==H?void 0:H.draggable,null==H?void 0:H.droppable,null==H?void 0:H.dragOverlay]));var H;const{droppableRects:U,measureDroppableContainers:G,measuringScheduled:Z}=function(e,t){let{dragging:n,dependencies:r,config:a}=t;const[s,o]=(0,i.useState)(null),{frequency:l,measure:c,strategy:d}=a,u=(0,i.useRef)(e),g=function(){switch(d){case Ct.Always:return!1;case Ct.BeforeDragging:return n;default:return!n}}(),h=J(g),p=(0,i.useCallback)((function(e){void 0===e&&(e=[]),h.current||o((t=>null===t?e:t.concat(e.filter((e=>!t.includes(e))))))}),[h]),m=(0,i.useRef)(null),f=Y((t=>{if(g&&!n)return kt;if(!t||t===kt||u.current!==e||null!=s){const t=new Map;for(let n of e){if(!n)continue;if(s&&s.length>0&&!s.includes(n.id)&&n.rect.current){t.set(n.id,n.rect.current);continue}const e=n.node.current,r=e?new Xe(c(e),e):null;n.rect.current=r,r&&t.set(n.id,r)}return t}return t}),[e,s,n,g,c]);return(0,i.useEffect)((()=>{u.current=e}),[e]),(0,i.useEffect)((()=>{g||p()}),[n,g]),(0,i.useEffect)((()=>{s&&s.length>0&&o(null)}),[JSON.stringify(s)]),(0,i.useEffect)((()=>{g||"number"!=typeof l||null!==m.current||(m.current=setTimeout((()=>{p(),m.current=null}),l))}),[l,g,p,...r]),{droppableRects:f,measureDroppableContainers:p,measuringScheduled:null!=s}}(P,{dragging:k,dependencies:[S.x,S.y],config:B.droppable}),V=function(e,t){const n=null!=t?e.get(t):void 0,r=n?n.node.current:null;return Y((e=>{var n;return null==t?null:null!=(n=null!=r?r:e)?n:null}),[r,t])}(j,w),K=(0,i.useMemo)((()=>T?ie(T):null),[T]),Q=function(){const e=!1===(null==R?void 0:R.autoScrollEnabled),t="object"==typeof l?!1===l.enabled:!1===l,n=k&&!e&&!t;if("object"==typeof l)return{...l,enabled:n};return{enabled:n}}(),ee=function(e,t){return wt(e,t)}(V,B.draggable.measure);!function(e){let{activeNode:t,measure:n,initialRect:r,config:a=!0}=e;const s=(0,i.useRef)(!1),{x:o,y:l}="boolean"==typeof a?{x:a,y:a}:a;q((()=>{if(!o&&!l||!t)return void(s.current=!1);if(s.current||!r)return;const e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;const a=Me(n(e),r);if(o||(a.x=0),l||(a.y=0),s.current=!0,Math.abs(a.x)>0||Math.abs(a.y)>0){const t=Be(e);t&&t.scrollBy({top:a.y,left:a.x})}}),[t,o,l,r,n])}({activeNode:null!=w?j.get(w):null,config:Q.layoutShiftCompensation,initialRect:ee,measure:B.draggable.measure});const ne=It(V,B.draggable.measure,ee),ae=It(V?V.parentElement:null),se=(0,i.useRef)({activatorEvent:null,active:null,activeNode:V,collisionRect:null,collisions:null,droppableRects:U,draggableNodes:j,draggingNode:null,draggingNodeRect:null,droppableContainers:I,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),oe=I.getNodeFor(null==(t=se.current.over)?void 0:t.id),le=function(e){let{measure:t}=e;const[n,r]=(0,i.useState)(null),a=(0,i.useCallback)((e=>{for(const{target:n}of e)if(W(n)){r((e=>{const r=t(n);return e?{...e,width:r.width,height:r.height}:r}));break}}),[t]),s=jt({callback:a}),o=(0,i.useCallback)((e=>{const n=Rt(e);null==s||s.disconnect(),n&&(null==s||s.observe(n)),r(n?t(n):null)}),[t,s]),[l,c]=X(o);return(0,i.useMemo)((()=>({nodeRef:l,rect:n,setRef:c})),[n,l,c])}({measure:B.dragOverlay.measure}),ce=null!=(n=le.nodeRef.current)?n:V,de=k?null!=(r=le.rect)?r:ne:null,ue=Boolean(le.nodeRef.current&&le.rect),ge=Me(pe=ue?null:ne,wt(pe));var pe;const me=_t(ce?$(ce):null),ve=function(e){const t=(0,i.useRef)(e),n=Y((n=>e?n&&n!==At&&e&&t.current&&e.parentNode===t.current.parentNode?n:Pe(e):At),[e]);return(0,i.useEffect)((()=>{t.current=e}),[e]),n}(k?null!=oe?oe:V:null),be=function(e,t){void 0===t&&(t=Le);const[n]=e,r=_t(n?$(n):null),[a,s]=(0,i.useState)(Mt);function o(){s((()=>e.length?e.map((e=>Ge(e)?r:new Xe(t(e),e))):Mt))}const l=jt({callback:o});return q((()=>{null==l||l.disconnect(),o(),e.forEach((e=>null==l?void 0:l.observe(e)))}),[e]),a}(ve),ye=$t(h,{transform:{x:S.x-ge.x,y:S.y-ge.y,scaleX:1,scaleY:1},activatorEvent:T,active:_,activeNodeRect:ne,containerNodeRect:ae,draggingNodeRect:de,over:se.current.over,overlayNodeRect:le.rect,scrollableAncestors:ve,scrollableAncestorRects:be,windowRect:me}),ke=K?re(K,S):null,we=function(e){const[t,n]=(0,i.useState)(null),r=(0,i.useRef)(e),a=(0,i.useCallback)((e=>{const t=Fe(e.target);t&&n((e=>e?(e.set(t,Ue(t)),new Map(e)):null))}),[]);return(0,i.useEffect)((()=>{const t=r.current;if(e!==t){s(t);const i=e.map((e=>{const t=Fe(e);return t?(t.addEventListener("scroll",a,{passive:!0}),[t,Ue(t)]):null})).filter((e=>null!=e));n(i.length?new Map(i):null),r.current=e}return()=>{s(e),s(t)};function s(e){e.forEach((e=>{const t=Fe(e);null==t||t.removeEventListener("scroll",a)}))}}),[a,e]),(0,i.useMemo)((()=>e.length?t?Array.from(t.values()).reduce(((e,t)=>re(e,t)),Ce):Ke(e):Ce),[e,t])}(ve),je=Et(we),Ie=Et(we,[ne]),Ae=re(ye,je),Ee=de?Re(de,ye):null,De=_&&Ee?u({active:_,collisionRect:Ee,droppableRects:U,droppableContainers:P,pointerCoordinates:ke}):null,Te=Se(De,"id"),[Oe,Ne]=(0,i.useState)(null),ze=function(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}(ue?ye:re(ye,Ie),null!=(a=null==Oe?void 0:Oe.rect)?a:null,ne),He=(0,i.useRef)(null),$e=(0,i.useCallback)(((e,t)=>{let{sensor:n,options:r}=t;if(null==M.current)return;const a=j.get(M.current);if(!a)return;const s=e.nativeEvent,i=new n({active:M.current,activeNode:a,event:s,options:r,context:se,onAbort(e){if(!j.get(e))return;const{onDragAbort:t}=L.current,n={id:e};null==t||t(n),v({type:"onDragAbort",event:n})},onPending(e,t,n,r){if(!j.get(e))return;const{onDragPending:a}=L.current,s={id:e,constraint:t,initialCoordinates:n,offset:r};null==a||a(s),v({type:"onDragPending",event:s})},onStart(e){const t=M.current;if(null==t)return;const n=j.get(t);if(!n)return;const{onDragStart:r}=L.current,a={activatorEvent:s,active:{id:t,data:n.data,rect:E}};(0,F.unstable_batchedUpdates)((()=>{null==r||r(a),y(Wt.Initializing),x({type:xe.DragStart,initialCoordinates:e,active:t}),v({type:"onDragStart",event:a}),D(He.current),O(s)}))},onMove(e){x({type:xe.DragMove,coordinates:e})},onEnd:o(xe.DragEnd),onCancel:o(xe.DragCancel)});function o(e){return async function(){const{active:t,collisions:n,over:r,scrollAdjustedTranslate:a}=se.current;let i=null;if(t&&a){const{cancelDrop:o}=L.current;if(i={activatorEvent:s,active:t,collisions:n,delta:a,over:r},e===xe.DragEnd&&"function"==typeof o){await Promise.resolve(o(i))&&(e=xe.DragCancel)}}M.current=null,(0,F.unstable_batchedUpdates)((()=>{x({type:e}),y(Wt.Uninitialized),Ne(null),D(null),O(null),He.current=null;const t=e===xe.DragEnd?"onDragEnd":"onDragCancel";if(i){const e=L.current[t];null==e||e(i),v({type:t,event:i})}}))}}He.current=i}),[j]),We=(0,i.useCallback)(((e,t)=>(n,r)=>{const a=n.nativeEvent,s=j.get(r);if(null!==M.current||!s||a.dndKit||a.defaultPrevented)return;const i={active:s};!0===e(n,t.options,i)&&(a.dndKit={capturedBy:t.sensor},M.current=r,$e(n,t))}),[j,$e]),Ze=function(e,t){return(0,i.useMemo)((()=>e.reduce(((e,n)=>{const{sensor:r}=n;return[...e,...r.activators.map((e=>({eventName:e.eventName,handler:t(e.handler,n)})))]}),[])),[e,t])}(d,We);!function(e){(0,i.useEffect)((()=>{if(!z)return;const t=e.map((e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()}));return()=>{for(const e of t)null==e||e()}}),e.map((e=>{let{sensor:t}=e;return t})))}(d),q((()=>{ne&&C===Wt.Initializing&&y(Wt.Initialized)}),[ne,C]),(0,i.useEffect)((()=>{const{onDragMove:e}=L.current,{active:t,activatorEvent:n,collisions:r,over:a}=se.current;if(!t||!n)return;const s={active:t,activatorEvent:n,collisions:r,delta:{x:Ae.x,y:Ae.y},over:a};(0,F.unstable_batchedUpdates)((()=>{null==e||e(s),v({type:"onDragMove",event:s})}))}),[Ae.x,Ae.y]),(0,i.useEffect)((()=>{const{active:e,activatorEvent:t,collisions:n,droppableContainers:r,scrollAdjustedTranslate:a}=se.current;if(!e||null==M.current||!t||!a)return;const{onDragOver:s}=L.current,i=r.get(Te),o=i&&i.rect.current?{id:i.id,rect:i.rect.current,data:i.data,disabled:i.disabled}:null,l={active:e,activatorEvent:t,collisions:n,delta:{x:a.x,y:a.y},over:o};(0,F.unstable_batchedUpdates)((()=>{Ne(o),null==s||s(l),v({type:"onDragOver",event:l})}))}),[Te]),q((()=>{se.current={activatorEvent:T,active:_,activeNode:V,collisionRect:Ee,collisions:De,droppableRects:U,draggableNodes:j,draggingNode:ce,draggingNodeRect:de,droppableContainers:I,over:Oe,scrollableAncestors:ve,scrollAdjustedTranslate:Ae},E.current={initial:de,translated:Ee}}),[_,V,De,Ee,j,ce,de,U,I,Oe,ve,Ae]),vt({...Q,delta:S,draggingRect:Ee,pointerCoordinates:ke,scrollableAncestors:ve,scrollableAncestorRects:be});const Ve=(0,i.useMemo)((()=>({active:_,activeNode:V,activeNodeRect:ne,activatorEvent:T,collisions:De,containerNodeRect:ae,dragOverlay:le,draggableNodes:j,droppableContainers:I,droppableRects:U,over:Oe,measureDroppableContainers:G,scrollableAncestors:ve,scrollableAncestorRects:be,measuringConfiguration:B,measuringScheduled:Z,windowRect:me})),[_,V,ne,T,De,ae,le,j,I,U,Oe,G,ve,be,B,Z,me]),qe=(0,i.useMemo)((()=>({activatorEvent:T,activators:Ze,active:_,activeNodeRect:ne,ariaDescribedById:{draggable:N},dispatch:x,draggableNodes:j,over:Oe,measureDroppableContainers:G})),[T,Ze,_,ne,x,N,j,Oe,G]);return i.createElement(he.Provider,{value:b},i.createElement(Bt.Provider,{value:qe},i.createElement(Ft.Provider,{value:Ve},i.createElement(Gt.Provider,{value:ze},c)),i.createElement(Ut,{disabled:!1===(null==o?void 0:o.restoreFocus)})),i.createElement(fe,{...o,hiddenTextDescribedById:N}))})):null,Vt=6168==n.j?(0,i.createContext)(null):null,qt="button";function Kt(e){let{id:t,data:n,disabled:r=!1,attributes:a}=e;const s=te("Draggable"),{activators:o,activatorEvent:l,active:c,activeNodeRect:d,ariaDescribedById:u,draggableNodes:g,over:h}=(0,i.useContext)(Bt),{role:p=qt,roleDescription:m="draggable",tabIndex:f=0}=null!=a?a:{},x=(null==c?void 0:c.id)===t,v=(0,i.useContext)(x?Gt:Vt),[b,C]=X(),[y,k]=X(),w=function(e,t){return(0,i.useMemo)((()=>e.reduce(((e,n)=>{let{eventName:r,handler:a}=n;return e[r]=e=>{a(e,t)},e}),{})),[e,t])}(o,t),j=J(n);q((()=>(g.set(t,{id:t,key:s,node:b,activatorNode:y,data:j}),()=>{const e=g.get(t);e&&e.key===s&&g.delete(t)})),[g,t]);return{active:c,activatorEvent:l,activeNodeRect:d,attributes:(0,i.useMemo)((()=>({role:p,tabIndex:f,"aria-disabled":r,"aria-pressed":!(!x||p!==qt)||void 0,"aria-roledescription":m,"aria-describedby":u.draggable})),[r,p,f,x,m,u.draggable]),isDragging:x,listeners:r?void 0:w,node:b,over:h,setNodeRef:C,setActivatorNodeRef:k,transform:v}}function Jt(){return(0,i.useContext)(Ft)}const Yt={timeout:25};function Xt(e,t,n){const r={...e};return t.top+e.y<=n.top?r.y=n.top-t.top:t.bottom+e.y>=n.top+n.height&&(r.y=n.top+n.height-t.bottom),t.left+e.x<=n.left?r.x=n.left-t.left:t.right+e.x>=n.left+n.width&&(r.x=n.left+n.width-t.right),r}const Qt=e=>{let{containerNodeRect:t,draggingNodeRect:n,transform:r}=e;return n&&t?Xt(r,n,t):r},en=e=>{let{transform:t}=e;return{...t,x:0}};function tn(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function nn(e,t){return e.reduce(((e,n,r)=>{const a=t.get(n);return a&&(e[r]=a),e}),Array(e.length))}function rn(e){return null!==e&&e>=0}const an=e=>{let{rects:t,activeIndex:n,overIndex:r,index:a}=e;const s=tn(t,r,n),i=t[a],o=s[a];return o&&i?{x:o.left-i.left,y:o.top-i.top,scaleX:o.width/i.width,scaleY:o.height/i.height}:null},sn={scaleX:1,scaleY:1},on=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:a,rects:s,overIndex:i}=e;const o=null!=(t=s[n])?t:r;if(!o)return null;if(a===n){const e=s[i];return e?{x:0,y:n<i?e.top+e.height-(o.top+o.height):e.top-o.top,...sn}:null}const l=function(e,t,n){const r=e[t],a=e[t-1],s=e[t+1];if(!r)return 0;if(n<t)return a?r.top-(a.top+a.height):s?s.top-(r.top+r.height):0;return s?s.top-(r.top+r.height):a?r.top-(a.top+a.height):0}(s,a,n);return a>n&&a<=i?{x:0,y:-o.height-l,...sn}:a<n&&a>=i?{x:0,y:o.height+l,...sn}:{x:0,y:0,...sn}};const ln="Sortable",cn=i.createContext({activeIndex:-1,containerId:ln,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:an,disabled:{draggable:!1,droppable:!1}});function dn(e){let{children:t,id:n,items:r,strategy:a=an,disabled:s=!1}=e;const{active:o,dragOverlay:l,droppableRects:c,over:d,measureDroppableContainers:u}=Jt(),g=te(ln,n),h=Boolean(null!==l.rect),p=(0,i.useMemo)((()=>r.map((e=>"object"==typeof e&&"id"in e?e.id:e))),[r]),m=null!=o,f=o?p.indexOf(o.id):-1,x=d?p.indexOf(d.id):-1,v=(0,i.useRef)(p),b=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(p,v.current),C=-1!==x&&-1===f||b,y=function(e){return"boolean"==typeof e?{draggable:e,droppable:e}:e}(s);q((()=>{b&&m&&u(p)}),[b,p,m,u]),(0,i.useEffect)((()=>{v.current=p}),[p]);const k=(0,i.useMemo)((()=>({activeIndex:f,containerId:g,disabled:y,disableTransforms:C,items:p,overIndex:x,useDragOverlay:h,sortedRects:nn(p,c),strategy:a})),[f,g,y.draggable,y.droppable,C,p,x,c,h,a]);return i.createElement(cn.Provider,{value:k},t)}const un=e=>{let{id:t,items:n,activeIndex:r,overIndex:a}=e;return tn(n,r,a).indexOf(t)},gn=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:a,items:s,newIndex:i,previousItems:o,previousContainerId:l,transition:c}=e;return!(!c||!r)&&((o===s||a!==i)&&(!!n||i!==a&&t===l))},hn={duration:200,easing:"ease"},pn="transform",mn=oe.Transition.toString({property:pn,duration:0,easing:"linear"}),fn={roleDescription:"sortable"};function xn(e){let{animateLayoutChanges:t=gn,attributes:n,disabled:r,data:a,getNewIndex:s=un,id:o,strategy:l,resizeObserverConfig:c,transition:d=hn}=e;const{items:u,containerId:g,activeIndex:h,disabled:p,disableTransforms:m,sortedRects:f,overIndex:x,useDragOverlay:v,strategy:b}=(0,i.useContext)(cn),C=function(e,t){var n,r;if("boolean"==typeof e)return{draggable:e,droppable:!1};return{draggable:null!=(n=null==e?void 0:e.draggable)?n:t.draggable,droppable:null!=(r=null==e?void 0:e.droppable)?r:t.droppable}}(r,p),y=u.indexOf(o),k=(0,i.useMemo)((()=>({sortable:{containerId:g,index:y,items:u},...a})),[g,a,y,u]),w=(0,i.useMemo)((()=>u.slice(u.indexOf(o))),[u,o]),{rect:j,node:S,isOver:I,setNodeRef:A}=function(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:a}=e;const s=te("Droppable"),{active:o,dispatch:l,over:c,measureDroppableContainers:d}=(0,i.useContext)(Bt),u=(0,i.useRef)({disabled:n}),g=(0,i.useRef)(!1),h=(0,i.useRef)(null),p=(0,i.useRef)(null),{disabled:m,updateMeasurementsFor:f,timeout:x}={...Yt,...a},v=J(null!=f?f:r),b=jt({callback:(0,i.useCallback)((()=>{g.current?(null!=p.current&&clearTimeout(p.current),p.current=setTimeout((()=>{d(Array.isArray(v.current)?v.current:[v.current]),p.current=null}),x)):g.current=!0}),[x]),disabled:m||!o}),C=(0,i.useCallback)(((e,t)=>{b&&(t&&(b.unobserve(t),g.current=!1),e&&b.observe(e))}),[b]),[y,k]=X(C),w=J(t);return(0,i.useEffect)((()=>{b&&y.current&&(b.disconnect(),g.current=!1,b.observe(y.current))}),[y,b]),(0,i.useEffect)((()=>(l({type:xe.RegisterDroppable,element:{id:r,key:s,disabled:n,node:y,rect:h,data:w}}),()=>l({type:xe.UnregisterDroppable,key:s,id:r}))),[r]),(0,i.useEffect)((()=>{n!==u.current.disabled&&(l({type:xe.SetDroppableDisabled,id:r,key:s,disabled:n}),u.current.disabled=n)}),[r,s,n,l]),{active:o,rect:h,isOver:(null==c?void 0:c.id)===r,node:y,over:c,setNodeRef:k}}({id:o,data:k,disabled:C.droppable,resizeObserverConfig:{updateMeasurementsFor:w,...c}}),{active:E,activatorEvent:_,activeNodeRect:M,attributes:R,setNodeRef:D,listeners:T,isDragging:O,over:L,setActivatorNodeRef:N,transform:P}=Kt({id:o,data:k,attributes:{...fn,...n},disabled:C.draggable}),B=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,i.useMemo)((()=>e=>{t.forEach((t=>t(e)))}),t)}(A,D),F=Boolean(E),z=F&&!m&&rn(h)&&rn(x),H=!v&&O,U=H&&z?P:null,$=z?null!=U?U:(null!=l?l:b)({rects:f,activeNodeRect:M,activeIndex:h,overIndex:x,index:y}):null,G=rn(h)&&rn(x)?s({id:o,items:u,activeIndex:h,overIndex:x}):y,W=null==E?void 0:E.id,Z=(0,i.useRef)({activeId:W,items:u,newIndex:G,containerId:g}),V=u!==Z.current.items,K=t({active:E,containerId:g,isDragging:O,isSorting:F,id:o,index:y,items:u,newIndex:Z.current.newIndex,previousItems:Z.current.items,previousContainerId:Z.current.containerId,transition:d,wasDragging:null!=Z.current.activeId}),Y=function(e){let{disabled:t,index:n,node:r,rect:a}=e;const[s,o]=(0,i.useState)(null),l=(0,i.useRef)(n);return q((()=>{if(!t&&n!==l.current&&r.current){const e=a.current;if(e){const t=Le(r.current,{ignoreTransform:!0}),n={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(n.x||n.y)&&o(n)}}n!==l.current&&(l.current=n)}),[t,n,r,a]),(0,i.useEffect)((()=>{s&&o(null)}),[s]),s}({disabled:!K,index:y,node:S,rect:j});return(0,i.useEffect)((()=>{F&&Z.current.newIndex!==G&&(Z.current.newIndex=G),g!==Z.current.containerId&&(Z.current.containerId=g),u!==Z.current.items&&(Z.current.items=u)}),[F,G,g,u]),(0,i.useEffect)((()=>{if(W===Z.current.activeId)return;if(null!=W&&null==Z.current.activeId)return void(Z.current.activeId=W);const e=setTimeout((()=>{Z.current.activeId=W}),50);return()=>clearTimeout(e)}),[W]),{active:E,activeIndex:h,attributes:R,data:k,rect:j,index:y,newIndex:G,items:u,isOver:I,isSorting:F,isDragging:O,listeners:T,node:S,overIndex:x,over:L,setNodeRef:B,setActivatorNodeRef:N,setDroppableNodeRef:A,setDraggableNodeRef:D,transform:null!=Y?Y:$,transition:function(){if(Y||V&&Z.current.newIndex===y)return mn;if(H&&!se(_)||!d)return;if(F||K)return oe.Transition.toString({...d,property:pn});return}()}}function vn(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&"object"==typeof t.sortable&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const bn=[nt.Down,nt.Right,nt.Up,nt.Left],Cn=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:a,droppableContainers:s,over:i,scrollableAncestors:o}}=t;if(bn.includes(e.code)){if(e.preventDefault(),!n||!r)return;const t=[];s.getEnabled().forEach((n=>{if(!n||null!=n&&n.disabled)return;const s=a.get(n.id);if(s)switch(e.code){case nt.Down:r.top<s.top&&t.push(n);break;case nt.Up:r.top>s.top&&t.push(n);break;case nt.Left:r.left>s.left&&t.push(n);break;case nt.Right:r.left<s.left&&t.push(n)}}));const l=(e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=je(t),s=[];for(const e of r){const{id:t}=e,r=n.get(t);if(r){const n=je(r),i=a.reduce(((e,t,r)=>e+ye(n[r],t)),0),o=Number((i/4).toFixed(4));s.push({id:t,data:{droppableContainer:e,value:o}})}}return s.sort(ke)})({active:n,collisionRect:r,droppableRects:a,droppableContainers:t,pointerCoordinates:null});let c=Se(l,"id");if(c===(null==i?void 0:i.id)&&l.length>1&&(c=l[1].id),null!=c){const e=s.get(n.id),t=s.get(c),i=t?a.get(t.id):null,l=null==t?void 0:t.node.current;if(l&&i&&e&&t){const n=Pe(l).some(((e,t)=>o[t]!==e)),a=yn(e,t),s=function(e,t){if(!vn(e)||!vn(t))return!1;if(!yn(e,t))return!1;return e.data.current.sortable.index<t.data.current.sortable.index}(e,t),c=n||!a?{x:0,y:0}:{x:s?r.width-i.width:0,y:s?r.height-i.height:0},d={x:i.left,y:i.top};return c.x&&c.y?d:ae(d,c)}}}};function yn(e,t){return!(!vn(e)||!vn(t))&&e.data.current.sortable.containerId===t.data.current.sortable.containerId}var kn=n(8146),wn=n(31601),jn=n(58636);if(6168==n.j)var Sn=n(96308);var In,An={exports:{}};In=An,function(){var e={}.hasOwnProperty;function t(){for(var e="",t=0;t<arguments.length;t++){var a=arguments[t];a&&(e=r(e,n(a)))}return e}function n(n){if("string"==typeof n||"number"==typeof n)return n;if("object"!=typeof n)return"";if(Array.isArray(n))return t.apply(null,n);if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]"))return n.toString();var a="";for(var s in n)e.call(n,s)&&n[s]&&(a=r(a,s));return a}function r(e,t){return t?e?e+" "+t:e+t:e}In.exports?(t.default=t,In.exports=t):self.classNames=t}();var En=An.exports;const _n=6168==n.j?function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(En):null,Mn=()=>(0,s.jsxs)("svg",{width:"20",height:"24",viewBox:"0 0 20 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("path",{d:"M9 12.5C9 13.3284 8.32843 14 7.5 14C6.67157 14 6 13.3284 6 12.5C6 11.6716 6.67157 11 7.5 11C8.32843 11 9 11.6716 9 12.5Z",fill:"#707070"}),(0,s.jsx)("path",{d:"M9 18.5C9 19.3284 8.32843 20 7.5 20C6.67157 20 6 19.3284 6 18.5C6 17.6716 6.67157 17 7.5 17C8.32843 17 9 17.6716 9 18.5Z",fill:"#707070"}),(0,s.jsx)("path",{d:"M9 6.5C9 7.32843 8.32843 8 7.5 8C6.67157 8 6 7.32843 6 6.5C6 5.67157 6.67157 5 7.5 5C8.32843 5 9 5.67157 9 6.5Z",fill:"#707070"}),(0,s.jsx)("path",{d:"M14 12.5C14 13.3284 13.3284 14 12.5 14C11.6716 14 11 13.3284 11 12.5C11 11.6716 11.6716 11 12.5 11C13.3284 11 14 11.6716 14 12.5Z",fill:"#707070"}),(0,s.jsx)("path",{d:"M14 18.5C14 19.3284 13.3284 20 12.5 20C11.6716 20 11 19.3284 11 18.5C11 17.6716 11.6716 17 12.5 17C13.3284 17 14 17.6716 14 18.5Z",fill:"#707070"}),(0,s.jsx)("path",{d:"M14 6.5C14 7.32843 13.3284 8 12.5 8C11.6716 8 11 7.32843 11 6.5C11 5.67157 11.6716 5 12.5 5C13.3284 5 14 5.67157 14 6.5Z",fill:"#707070"})]});var Rn=(e=>(e.SYNC_STATUS="sync-status",e.SETTINGS="settings",e))(Rn||{});const Dn=async({agentId:e,agentDirectoryService:t,ingestionId:n,ingestionTab:r})=>{if(!(0,kn.kq)(e)||typeof self>"u")return;const a=Number((0,kn.Hr)(e)),s=t.getConfiguredUrl(kn.uK.AGENT_SETUP_URL,`${a}`),i=[];if("sync-status"===(n&&i.push(`ingestionId=${n}`),r))i.push(`ingestionTab=${r}`);const o=i.length>0?`${s}?${i.join("&")}`:s,l=self.open(o,"_blank","noopener,noreferrer");l&&(l.opener=null)};var Tn=(e=>(e.ComponentImpression="componentImpression",e.ComponentClicked="componentClicked",e.AgentDirectorySearch="agentDirectory/search",e.AgentDirectoryReorderAgent="agentDirectory/reorderAgent",e))(Tn||{}),On=(e=>(e.AgentCard="agentDirectory/agentCard",e.LoadMore="agentDirectory/loadMore",e.AddAgent="agentDirectory/addAgent",e.OpenAgent="agentDirectory/openAgent",e.SignInToAgent="agentDirectory/signInToAgent",e.ViewAgentInMarketplace="agentDirectory/viewAgentInMarketplace",e.ManageAgents="agentDirectory/manageAgents",e.RemoveAgent="agentDirectory/manageAgents/removeAgent",e.ViewAgentSettings="agentDirectory/manageAgents/viewAgentSettings",e))(On||{}),Ln=(e=>(e.Directory="directory",e.AgentProfile="agentProfile",e.ManageAgents="manageAgents",e.AgentSettings="agentSettings",e))(Ln||{});const Nn=(0,i.createContext)(null);function Pn(e){switch(e.viewType){case kn.Gk.Directory:return{type:"directory"};case kn.Gk.AgentProfile:return{type:"agentProfile",agentId:e.agentId};case kn.Gk.ManageAgents:return{type:"manageAgents"};case kn.Gk.AgentSettings:return{type:"agentSettings",agentMetadata:e.agentMetadata};case kn.Gk.AgentChat:return null;default:(0,r.vE)(e)}return null}const Bn=()=>{const e=(0,i.useContext)(Nn);if(!e)throw new Error("useAgentDirectoryModalNavigation must be used within an AgentDirectoryModalNavigationProvider");return e},Fn=(0,i.createContext)(null),zn=()=>{const e=(0,i.useContext)(Fn);if(!e)throw new Error("useAgentDirectoryService must be used within an AgentDirectoryServiceProvider");return e},Hn=(0,i.createContext)(null),Un=()=>{const e=(0,i.useContext)(Hn);if(!e)throw new Error("useTrackingService must be used within a TrackingServiceProvider");return e};function $n(e,t){return function(e,t,n){const{trackingService:a}=Un(),[s,o]=(0,i.useState)(!1),l=(0,i.useCallback)(((e,t,n)=>{const i={componentId:e,detail:n};switch(t){case jn.Jn.Impression:if(s)return;return null==a||a.trackEvent(Tn.ComponentImpression,i),void o(!0);case jn.Jn.Clicked:return void(null==a||a.trackEvent(Tn.ComponentClicked,i));default:return(0,r.vE)(t)}}),[a,s]);return(0,jn.B9)({componentId:e,detail:t,trackEvent:l,autoTrackedInteractions:n})}(e,t,{clicked:!0})}const Gn=(e,t)=>{const[n,r]=(0,i.useState)(),[a,s]=(0,i.useState)(),[o,l]=(0,i.useState)(),[c,d]=(0,i.useState)(!0),[u,g]=(0,i.useState)(),{agentDirectoryService:h}=zn();return(0,i.useEffect)((()=>{(async()=>{d(!0),g(void 0);try{const n=await h.getAgentMetadata(e,{includeInstallationContext:(null==t?void 0:t.withInstallationContext)??!1,includeExternalPackMetadata:(null==t?void 0:t.withExternalPackMetadata)??!1});r(null==n?void 0:n.metadata),s(null==n?void 0:n.externalPackMetadata),l(null==n?void 0:n.installationContext)}catch(e){g(e instanceof Error?e.message:"Failed to fetch agent metadata")}finally{d(!1)}})()}),[e,h,null==t?void 0:t.withExternalPackMetadata,null==t?void 0:t.withInstallationContext]),{agentMetadata:n,packMetadata:a,installationContext:o,isLoading:c,error:u}},Wn={item:"_item_yekiz_1",iconSwap:"_iconSwap_yekiz_6",agentIcon:"_agentIcon_yekiz_13",dragHandle:"_dragHandle_yekiz_14",hovered:"_hovered_yekiz_31",iconContainer:"_iconContainer_yekiz_41",openAgentSettingsButton:"_openAgentSettingsButton_yekiz_54",menu:"_menu_yekiz_58"},Zn=({item:e,onDelete:t,onOpenAgent:n,shouldUseNativeInstallFlow:r,goBrandingEnabled:a})=>{var u,g,h;const p=Bn(),{agentDirectoryService:m}=zn(),{trackClicked:f}=$n(On.RemoveAgent,{agentId:e.id}),{trackClicked:x}=$n(On.ViewAgentSettings,{agentId:e.id}),{attributes:v,listeners:b,setNodeRef:C,transform:y,transition:k}=xn({id:e.id,disabled:!e.canReorder}),[w,j]=(0,i.useState)(!1),S={transform:oe.Transform.toString(y),transition:k},I=m.getAgentInstancesForAgent(e.id),{packMetadata:A}=Gn(e.id,{withExternalPackMetadata:!0}),E=void 0!==A,_=(null==(u=null==A?void 0:A.authentication)?void 0:u.type)!==kn.am.None,M=!(null==(g=null==A?void 0:A.syncTables)||!g.length),R=E&&(_||M),D=(0,i.useCallback)((async()=>{var t;await Dn({agentId:e.id,agentDirectoryService:m,ingestionId:null==(t=I[0])?void 0:t.agentInstanceId})}),[m,I,e.id]),T=_n(w?Wn.item:""),O=_n(e.canReorder?Wn.iconSwap:Wn.iconContainer,e.canReorder&&w?Wn.hovered:""),L=(0,i.useCallback)((()=>{t(e.id),f()}),[t,f,e.id]),N=(0,i.useCallback)((()=>{x(),r?p.showAgentSettings(e):D()}),[D,p,r,e,x]);return(0,s.jsx)("div",{ref:C,style:S,className:_n(w&&Wn.visible),onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1),onFocus:()=>j(!0),onBlur:()=>j(!1),children:(0,s.jsxs)(o.k,{className:T,direction:"row",align:"center",justify:"space-between",padding:2,gap:2,children:[(0,s.jsxs)(o.k,{flex:"1",direction:"row",align:"center",gap:2,children:[(0,s.jsxs)("div",{className:O,children:[e.canReorder&&(0,s.jsx)("div",{className:Wn.dragHandle,"aria-label":`Reorder ${e.name}`,...v,...b,children:(0,s.jsx)(Mn,{})}),(0,s.jsx)(sr,{agent:e,size:"large",className:Wn.agentIcon,goBrandingEnabled:a})]}),(0,s.jsx)(l.x,{as:"span",variant:"text-medium",children:e.name})]}),(!0===r||(null==(h=I[0])?void 0:h.agentInstanceId))&&R&&(0,s.jsx)(c.h,{className:Wn.openAgentSettingsButton,size:"small",variant:"tertiary",accessibilityLabel:"Open agent settings",icon:wn.ew,onClick:N}),(0,s.jsxs)(d.v,{className:Wn.menu,activator:"more-horizontal",children:[e.canDelete&&(0,s.jsx)(d.v.Item,{onClick:L,children:(0,s.jsx)(l.x,{as:"p",variant:"text-small",weight:"normal",children:"Remove agent"})},"removeAgent"),(0,s.jsx)(d.v.Item,{onClick:()=>{null==n||n(e.id)},children:(0,s.jsx)(l.x,{as:"p",variant:"text-small",weight:"normal",children:"Open agent"})},"openAgent")]})]})})},Vn="_confirmationBox_15k92_1",qn="_closeIcon_15k92_7";function Kn({message:e,closeButton:t}){return(0,s.jsx)(u.x,{"data-testid":"ConfirmationBox",className:Vn,padding:3,children:(0,s.jsxs)(o.k,{gap:2,align:"center",children:[(0,s.jsx)(g.J,{icon:h.j,accessibilityLabel:"","aria-hidden":"true"}),(0,s.jsx)(o.k,{flex:"1",children:(0,s.jsx)(l.x,{as:"p",weight:"normal",variant:"text-xsmall",children:e})}),t&&(0,s.jsx)(c.h,{size:"small",variant:"tertiary",accessibilityLabel:"Close",className:qn,icon:wn.Tw,onClick:t})]})})}const Jn={hoverBox:"_hoverBox_ioe9q_1"},Yn=({onOpenAgent:e,shouldUseNativeInstallFlow:t,isFirstPartyPackAgentsEnabled:n=!1,selectedAgentId:r,coordinatorAgentId:a,goBrandingEnabled:l})=>{const{agentDirectoryService:c}=zn(),{trackingService:d}=Un(),{agents:u,refetch:g}=(()=>{const{agentDirectoryService:e}=zn(),[t,n]=(0,i.useState)([]),[r,a]=(0,i.useState)(!1),[s,o]=(0,i.useState)(null),l=(0,i.useCallback)((async()=>{if(e){a(!0),o(null);try{const t=e.listInstalledAgents();n(t)}catch(e){const t=e instanceof Error?e:new Error("Failed to load agents");o(t),console.error("Error fetching installed agents:",t)}finally{a(!1)}}}),[e]),c=(0,i.useCallback)((async()=>{await l()}),[l]);return(0,i.useEffect)((()=>{l()}),[l]),{agents:t,isLoading:r,error:s,refetch:c}})(),h=(0,i.useRef)(null),p=(0,i.useRef)(!1),m=(0,i.useMemo)((()=>n?u:(0,kn.xr)(u)),[u,n]),[f,x]=(0,i.useState)(m),[v,b]=(0,i.useState)(void 0),[C,y]=(0,i.useState)(void 0);(0,i.useEffect)((()=>{x(m)}),[m]);const k=(0,i.useMemo)((()=>f.map((e=>e.id))),[f]),w=e=>{y(e),h.current&&clearTimeout(h.current),h.current=setTimeout((()=>{y(void 0),h.current=null}),1500)};(0,i.useEffect)((()=>()=>{h.current&&clearTimeout(h.current)}),[]);const j=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,i.useMemo)((()=>[...t].filter((e=>null!=e))),[...t])}(be(gt),be(ot,{coordinateGetter:Cn})),S=async t=>{const n=[...f],s=f.find((e=>e.id===t)),i=f.filter((e=>e.id!==t)),o=r===t;x(i);try{await c.removeAgent(t),g(),s&&w(`${s.name} removed`),o&&a&&e&&e(a)}catch(e){x(n),console.error(`Failed to remove agent ${t}:`,e),b("We hit a bump trying to remove your agent. Please try it again.")}};return(0,s.jsxs)(o.k,{direction:"column",style:{height:"100%",position:"relative"},children:[(0,s.jsx)(o.k,{role:"list","aria-label":"Installed agents",direction:"column","data-testid":"manageAgents",style:{height:"100%",overflowY:"auto"},children:(0,s.jsx)(Zt,{sensors:j,collisionDetection:Ae,onDragEnd:async e=>{var t,n;const{active:r,over:a}=e;if(a&&r.id!==a.id){if(p.current)return;const e=[...f],s=f.findIndex((e=>e.id===r.id)),i=f.findIndex((e=>e.id===a.id));if(-1===s||-1===i||s===i||!f[s].canReorder)return;const o=Math.min(s,i),l=Math.max(s,i);if(f.slice(o,l+1).some(((e,t)=>o+t!==s&&!e.canReorder)))return void b("Cannot move agents across pinned agents.");const u=f[s].id,g=null==(t=f[s+1])?void 0:t.id,h=tn(f,s,i),m=null==(n=h[i+1])?void 0:n.id;if(g===m)return void x(h);try{p.current=!0,null==d||d.trackEvent(Tn.AgentDirectoryReorderAgent,{agentId:u,oldIndex:s,newIndex:i}),x(h),await c.setInstalledAgentsOrder(u,m);const e=h.find((e=>e.id===u));e&&w(`${e.name} moved`)}catch(t){console.error(`Failed to reorder agent ${u}:`,t),x(e),b("We hit a snag trying to move your agents. Please try it again.")}finally{p.current=!1}}},modifiers:[en,Qt],children:(0,s.jsx)(dn,{items:k,strategy:on,children:f.map((n=>(0,s.jsx)(Zn,{item:n,onDelete:S,onOpenAgent:e,shouldUseNativeInstallFlow:t,goBrandingEnabled:l},n.id)))})})}),v&&(0,s.jsx)(o.k,{className:Jn.errorBox,role:"alert",children:(0,s.jsx)(wn.Tv,{title:"Let's try that again",content:v,closeButton:()=>b(void 0)})}),C&&(0,s.jsx)(o.k,{className:Jn.hoverBox,"aria-live":"polite",children:(0,s.jsx)(Kn,{message:C,closeButton:()=>y(void 0)})})]})},Xn=({children:e,agentDirectoryService:t})=>{const n=(0,i.useMemo)((()=>({agentDirectoryService:t})),[t]);return(0,s.jsx)(Fn.Provider,{value:n,children:e})},Qn=({children:e,trackingService:t})=>{const n=(0,i.useMemo)((()=>({trackingService:t})),[t]);return(0,s.jsx)(Hn.Provider,{value:n,children:e})},er=({children:e,initialView:t,agentDirectoryService:n})=>{const[a,o]=(0,i.useState)(t?[t]:[{type:Ln.Directory}]),l=a[a.length-1],c=a.length>1,d=(0,i.useCallback)((e=>{o((t=>function(e,t){if(e.type!==t.type)return!1;switch(e.type){case"directory":case"manageAgents":return!0;case"agentProfile":return"agentProfile"===t.type&&e.agentId===t.agentId;case"agentSettings":return"agentSettings"===t.type&&e.agentMetadata.id===t.agentMetadata.id;default:return(0,r.vE)(e)}}(t[t.length-1],e)?t:[...t,e]))}),[]),u=(0,i.useCallback)((()=>{d({type:Ln.Directory})}),[d]),g=(0,i.useCallback)((e=>{d({type:Ln.AgentProfile,agentId:e})}),[d]),h=(0,i.useCallback)((e=>{d({type:Ln.AgentSettings,agentMetadata:e})}),[d]),p=(0,i.useCallback)((()=>{d({type:Ln.ManageAgents})}),[d]),m=(0,i.useCallback)((()=>{o((e=>e.length>1?e.slice(0,-1):e))}),[]),f=(0,i.useCallback)((()=>{o([t??{type:Ln.Directory}])}),[t]);(0,i.useEffect)((()=>n.onDeeplinkRequested((e=>{const t=Pn(e);t&&d(t)}))),[n,d]);const x=(0,i.useMemo)((()=>({current:l,canGoBack:c,stack:a,showDirectory:u,showAgentProfile:g,showAgentSettings:h,showManageAgents:p,goBack:m,reset:f})),[l,c,a,u,g,h,p,m,f]);return(0,s.jsx)(Nn.Provider,{value:x,children:e})},tr={agents:[],searchQuery:"",isLoading:!1,isSearching:!1,error:null,pagination:{hasMore:!0,nextPageToken:void 0,isLoadingMore:!1},hasInitiallyLoaded:!1};function nr(e,t){switch(t.type){case"SET_QUERY":return{...e,searchQuery:t.query};case"LOAD_START":return{...e,isLoading:!0,error:null,pagination:{...e.pagination,isLoadingMore:!1}};case"LOAD_SUCCESS":return{...e,isLoading:!1,agents:t.agents,error:null,pagination:{hasMore:t.hasMore,nextPageToken:t.nextPageToken,isLoadingMore:!1}};case"LOAD_ERROR":return{...e,isLoading:!1,error:t.error,pagination:{...e.pagination,isLoadingMore:!1}};case"SEARCH_START":return{...e,isSearching:!0,error:null};case"SEARCH_SUCCESS":return{...e,isSearching:!1,agents:t.agents,error:null,pagination:{hasMore:!1,nextPageToken:void 0,isLoadingMore:!1}};case"SEARCH_ERROR":return{...e,isSearching:!1,error:t.error};case"LOAD_MORE_START":return{...e,pagination:{...e.pagination,isLoadingMore:!0}};case"LOAD_MORE_SUCCESS":return{...e,agents:[...e.agents,...t.agents],pagination:{hasMore:t.hasMore,nextPageToken:t.nextPageToken,isLoadingMore:!1},error:null};case"LOAD_MORE_ERROR":return{...e,error:t.error,pagination:{...e.pagination,isLoadingMore:!1}};case"UPDATE_AGENT":{const n=e.agents.findIndex((e=>e.id===t.id));if(n<0)return e;const r=e.agents.slice();return r[n]=t.updated,{...e,agents:r}}case"RESET_PAGINATION":return{...e,pagination:{hasMore:!0,nextPageToken:void 0,isLoadingMore:!1}};case"MARK_INIT_LOADED":return{...e,hasInitiallyLoaded:!0};default:return e}}const rr=({agentDirectoryService:e,initialLimit:t=kn.Cn,searchDebounceMs:n=500,autoLoad:r=!0})=>{const[a,s]=(0,i.useReducer)(nr,{...tr,isLoading:r&&!!e}),{trackEvent:o}=function(e){const{trackingService:t}=Un();return{trackEvent:n=>null==t?void 0:t.trackEvent(e,n)}}(Tn.AgentDirectorySearch),l=a.searchQuery.trim().length>0,c=(0,i.useRef)(null),d=(0,i.useRef)(null),u=(0,i.useRef)(null),g=(0,i.useRef)(!0),h=(0,i.useRef)(""),p=(0,i.useMemo)((()=>a.agents.map((t=>({...t,status:t.status??(null!=e&&e.isAgentInstalled(t.id)?kn._W.Installed:kn._W.Uninstalled)})))),[a.agents,e]),m=(0,i.useCallback)((t=>t.map((t=>({...t,status:null!=e&&e.isAgentInstalled(t.id)?kn._W.Installed:kn._W.Uninstalled})))),[e]),f=(0,i.useCallback)((async()=>{var n;if(!e)return;null==(n=c.current)||n.abort(),c.current=new AbortController;const{signal:r}=c.current;s({type:"LOAD_START"});try{const n=a.pagination.nextPageToken?{nextPageToken:a.pagination.nextPageToken}:{limit:t},i=await e.listAgents(n);if(r.aborted||!g.current)return;const o=m(i.items),l=!!i.nextPageToken;s({type:"LOAD_SUCCESS",agents:o,hasMore:l,nextPageToken:i.nextPageToken}),a.hasInitiallyLoaded||s({type:"MARK_INIT_LOADED"})}catch(e){if(!r.aborted&&g.current){const t=e instanceof Error?e:new Error("Failed to load agents");console.error("Error loading agents:",t),s({type:"LOAD_ERROR",error:t})}}}),[e,t,a.pagination.nextPageToken,a.hasInitiallyLoaded,m]),x=(0,i.useCallback)((async n=>{var r;if(!e||h.current!==n)return;null==(r=d.current)||r.abort(),d.current=new AbortController;const{signal:a}=d.current;s({type:"SEARCH_START"}),o({query:n});try{const r={limit:t},i=await e.searchAgents(n,r,a);if(a.aborted||!g.current)return;const o=m(i);s({type:"SEARCH_SUCCESS",agents:o})}catch(e){if(!a.aborted&&g.current){const t=e instanceof Error?e:new Error("Failed to search agents");console.error("Error searching agents:",t),s({type:"SEARCH_ERROR",error:t})}}}),[e,t,m,o]),v=(0,i.useMemo)((()=>(0,wn.Ds)((e=>{x(e)}),n)),[x,n]),b=(0,i.useCallback)((e=>{var t;const n=e.trim();h.current=n,s({type:"SET_QUERY",query:e}),n?v(n):(s({type:"RESET_PAGINATION"}),null==(t=d.current)||t.abort(),f())}),[v,f]),C=(0,i.useRef)(!1),y=(0,i.useCallback)((async()=>{var n;if(!e||l||C.current||!a.pagination.hasMore)return;C.current=!0,null==(n=u.current)||n.abort(),u.current=new AbortController;const{signal:r}=u.current;s({type:"LOAD_MORE_START"});try{const n=a.pagination.nextPageToken?{nextPageToken:a.pagination.nextPageToken}:{limit:t},i=await e.listAgents(n);if(r.aborted||!g.current)return;const o=m(i.items),l=!!i.nextPageToken;s({type:"LOAD_MORE_SUCCESS",agents:o,hasMore:l,nextPageToken:i.nextPageToken})}catch(e){if(!r.aborted&&g.current){const t=e instanceof Error?e:new Error("Failed to load more agents");console.error("Error loading more agents:",t),s({type:"LOAD_MORE_ERROR",error:t})}}finally{C.current=!1}}),[e,t,l,a.pagination.hasMore,a.pagination.nextPageToken,m]),k=(0,i.useCallback)((async()=>{var e,t,n;s({type:"SET_QUERY",query:""}),s({type:"RESET_PAGINATION"}),null==(e=c.current)||e.abort(),null==(t=d.current)||t.abort(),null==(n=u.current)||n.abort(),await f()}),[f]),w=(0,i.useCallback)((async()=>{l?await x(a.searchQuery.trim()):await f()}),[l,a.searchQuery,x,f]),j=(0,i.useCallback)((()=>{b("")}),[b]),S=(0,i.useCallback)((()=>{s({type:"RESET_PAGINATION"}),w()}),[w]);return(0,i.useEffect)((()=>{if(!e)return;const t=e.onStateUpdated(S);return()=>t()}),[e,S]),(0,i.useEffect)((()=>{r&&!a.hasInitiallyLoaded&&e&&f()}),[r,e,f,a.hasInitiallyLoaded]),(0,i.useEffect)((()=>()=>{var e,t,n;g.current=!1,null==(e=c.current)||e.abort(),null==(t=d.current)||t.abort(),null==(n=u.current)||n.abort()}),[]),(0,i.useMemo)((()=>({agents:p,isSearchActive:l,searchQuery:a.searchQuery,isLoading:a.isLoading,isSearching:a.isSearching,error:a.error,pagination:a.pagination,search:b,loadMore:y,reset:k,refetch:w,clearSearch:j})),[p,l,a.searchQuery,a.isLoading,a.isSearching,a.error,a.pagination,b,y,k,w,j])},ar={[kn.Bm.GrammarlyProofreader]:p.O,[kn.Bm.GrammarlyPlagiarismChecker]:m.L,[kn.Bm.GrammarlyAiDetector]:f.b,[kn.Bm.GrammarlyAiGrader]:x._,[kn.Bm.GrammarlyCitationFinder]:v.k,[kn.Bm.GrammarlyParaphraser]:b.y,[kn.Bm.GrammarlyReaderReactions]:C.Q,[kn.Bm.GrammarlyHumanizer]:y.i,[kn.Bm.GrammarlyExpertReview]:k.F,[kn.Bm.GrammarlyReaderTranslate]:p.O,[kn.Bm.GrammarlyReaderComprehension]:p.O,[kn.Bm.SuperhumanGo]:w.j},sr=(0,i.forwardRef)((({agent:e,size:t,className:n,goBrandingEnabled:r=!1,...a},i)=>{let o;if((0,kn.xt)(e.id)){o=((e,t)=>t&&e===kn.Bm.SuperhumanGo?j.O:ar[e])((0,kn.Oo)(e.id),r)}return(0,s.jsx)(wn.J$,{agent:e,size:t,className:n,iconComponent:o,ref:i,...a})})),ir=e=>{const{agentDirectoryService:t}=zn(),[n,r]=(0,i.useState)(!1);return(0,i.useEffect)((()=>(r(t.isAgentInstalled(e)),t.onStateUpdated((()=>{r(t.isAgentInstalled(e))})))),[e,t]),{isInstalled:n}},or="_agentIcon_10pb9_1",lr="_clickableCard_10pb9_6",cr="_addedMarker_10pb9_23",dr=({agent:e,onOpenAgent:t,goBrandingEnabled:n})=>{const{trackClicked:r}=$n(On.AgentCard,{agentId:e.id}),a=Bn(),{isInstalled:c}=ir(e.id),d=(0,i.useCallback)((()=>{a.showAgentProfile(e.id)}),[e.id,a]),u=(0,i.useCallback)((()=>{null==t||t(e.id)}),[e.id,t]),h=(0,i.useCallback)((()=>{r(),e.status===kn._W.Installed?u():d()}),[e.status,u,d,r]),p=e.status===kn._W.Installed?"Open agent":"View agent details";return(0,s.jsx)("div",{role:"button",tabIndex:0,onClick:h,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),h())},className:lr,"aria-label":`${p} ${e.name}`,children:(0,s.jsxs)(o.k,{direction:"column",paddingLeft:4,paddingRight:4,paddingBottom:3,paddingTop:3,gap:2,borderRadius:3,borderColor:"base-subdued",children:[(0,s.jsxs)(o.k,{direction:"row",gap:3,children:[(0,s.jsx)(sr,{agent:e,size:"xlarge",className:or,goBrandingEnabled:n}),(0,s.jsxs)(o.k,{direction:"column",flex:"1",children:[(0,s.jsxs)(o.k,{direction:"row",flex:"1",gap:2,justify:"space-between",children:[(0,s.jsx)(l.x,{as:"small",variant:"text-small",weight:"semibold",color:"base-default",children:e.name}),c&&(0,s.jsxs)(S.u,{children:[(0,s.jsx)(S.aJ,{asChild:!0,children:(0,s.jsx)("span",{className:cr,children:(0,s.jsx)(g.J,{icon:I.L,accessibilityLabel:"Active agent",size:"small"})})}),(0,s.jsx)(S._v,{root:null,children:"This agent is active"})]})]}),e.creator&&(0,s.jsxs)(l.x,{as:"p",variant:"text-small",color:"base-subdued",children:["By ",e.creator]})]})]}),(0,s.jsx)(l.x,{as:"p",variant:"text-small",color:"base-default",children:e.shortDescription})]})})},ur="_agentDirectory_w3x3n_1",gr="_agentsLoadingEmpty_w3x3n_5",hr="_scrollableContainer_w3x3n_11",pr="_agentSearchFieldContainer_w3x3n_17",mr="_searchField_w3x3n_25",fr=({onOpenAgent:e,goBrandingEnabled:t=!1})=>{const{agentDirectoryService:n}=zn(),{agents:r,isLoading:a,isSearching:l,error:c,search:d,pagination:u,loadMore:g}=rr({agentDirectoryService:n,autoLoad:!0}),{trackClicked:h}=$n(On.LoadMore,{}),p=(0,i.useCallback)((e=>{d(e)}),[d]),m=(0,i.useCallback)((()=>{h(),g()}),[g,h]),f=a||l,x=!f&&u.hasMore&&r.length>0;return(0,s.jsxs)(o.k,{className:ur,direction:"column",gap:4,paddingBottom:2,children:[(0,s.jsx)("div",{className:pr,children:(0,s.jsx)(A.U,{className:mr,label:"Search agents",placeholder:"Search agents",onChange:p,size:"large"})}),c&&(0,s.jsxs)("div",{className:gr,children:["Error loading agents: ",c.message]}),f?(0,s.jsx)("div",{className:gr,children:"Loading agents..."}):0===r.length?(0,s.jsx)("div",{className:gr,children:"No agents available"}):(0,s.jsxs)(o.k,{className:hr,direction:"column",gap:2,children:[r.map((n=>(0,s.jsx)(dr,{agent:n,onOpenAgent:e,goBrandingEnabled:t},n.id))),x&&(0,s.jsx)(E.z,{variant:"secondary",size:"large",onClick:m,disabled:u.isLoadingMore,children:u.isLoadingMore?"Loading more...":"Load more agents"})]})]})},xr=(e,t)=>{const{agentDirectoryService:n}=zn();return(0,i.useMemo)((()=>n.getConfiguredUrl(e,t)),[n,e,t])},vr=()=>{const{agentDirectoryService:e}=zn(),[t,n]=(0,i.useState)(!1),[r,a]=(0,i.useState)(null);return{createAgentInstance:(0,i.useCallback)((async(t,r)=>{n(!0),a(null);let s=null;try{const a={packId:(0,kn.Oo)(t.agentId),originalConnectionId:t.originalConnectionId,packConfigurationId:t.packConfigurationId,...t.ingestionParameters&&{ingestionParams:{ingestionParameters:t.ingestionParameters,timezone:null}}};s=await e.createAgentInstance(a),s&&r&&r(s)}catch(e){a(e instanceof Error?e.message:"An error occurred"),console.error("Failed to create agent instance",e)}finally{n(!1)}return s}),[e]),isInstalling:t,error:r}},br="Open agent",Cr="Sign in",yr=({agentMetadata:e,canOneClickInstall:t,installationContext:n,onOpenAgent:r,shouldUseNativeInstallFlow:a})=>{const{createAgentInstance:c,isInstalling:d,error:u}=vr(),{showAgentSettings:g}=Bn(),{agentDirectoryService:h}=zn(),{isInstalled:p}=ir(e.id),m={agentId:e.id},{trackClicked:f}=$n(On.OpenAgent,m),{trackClicked:x}=$n(On.SignInToAgent,m),{trackClicked:v}=$n(On.AddAgent,m),b=((e,t)=>e||t?br:Cr)(p,t),C=(0,i.useCallback)((()=>{f(),null==r||r(e.id)}),[f,r,e.id]),y=(0,i.useCallback)((()=>{var t,a,s;v(),c({agentId:e.id,packConfigurationId:null==(s=null==(a=null==(t=null==n?void 0:n.packInstallability)?void 0:t.mostPermissiveConfigurationAndConnections)?void 0:a.configurationForAgentCreation)?void 0:s.configurationId,ingestionParameters:null!=n&&n.defaultIngestionParameters?{...null==n?void 0:n.defaultIngestionParameters}:void 0},(()=>{null==r||r(e.id)}))}),[v,c,e.id,n,r]),k=(0,i.useCallback)((()=>{x(),a?g(e):Dn({agentId:e.id,agentDirectoryService:h})}),[x,a,g,e,h]),w=(0,i.useCallback)((async()=>{p?C():t?y():k()}),[p,t,C,y,k]),j=void 0===t||d,S=j,I="agent-action-error";return(0,s.jsxs)(o.k,{justify:"center",direction:"column",gap:2,children:[u&&(0,s.jsx)(l.x,{as:"p",variant:"text-small",color:"critical-default",id:I,role:"alert","aria-live":"polite",children:u}),(0,s.jsx)(E.z,{id:"agent-action-button",variant:"primary",size:"large",text:b,style:{width:"100%"},onClick:w,isLoading:j,isDisabled:S,"aria-label":`${b} ${e.name} agent`,"aria-describedby":u?I:void 0,"aria-busy":j})]})},kr="_imageContainer_zy259_1",wr="_fallbackImageContainer_zy259_16",jr="_errorIcon_zy259_27",Sr=({imageUrl:e,agentName:t,shortDescription:n})=>{const r=()=>(0,s.jsx)("div",{className:wr,children:(0,s.jsx)(g.J,{size:"large",icon:M.E,className:jr,accessibilityLabel:"Image not available"})});return(0,s.jsxs)(o.k,{direction:"column",gap:2,children:[e?(0,s.jsx)(wn.bC,{src:e,alt:t,className:kr,loadingState:()=>(0,s.jsx)(_.g,{accessibilityLabel:"Loading agent image",children:(0,s.jsx)(_.g.Rectangle,{height:232,width:328})}),errorState:r}):r(),(0,s.jsx)(l.x,{as:"span",variant:"text-small",color:"base-subdued",align:"center",children:n})]})},Ir=e=>!(!/^[A-Z]/.test(e)||!/[a-z]/.test(e))&&/^([A-Z]+[a-z]+|[A-Z][a-z]+)([A-Z][a-z]+|[A-Z]{2,})*$/.test(e),Ar=e=>(e.match(/[A-Z]+(?=[A-Z][a-z]|$)|[A-Z][a-z]+/g)||[]).map(((e,t)=>/^[A-Z]+$/.test(e)?e:0===t?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():e.toLowerCase())).join(" "),Er=e=>Ir(e)?Ar(e):e.toLowerCase().replace(/^./,(e=>e.toUpperCase())),_r="_pill_1u9r2_1",Mr=({name:e,description:t,isHidden:n})=>(0,s.jsxs)(S.u,{children:[(0,s.jsx)(S.aJ,{asChild:!0,children:(0,s.jsx)(o.k,{className:_r,"data-pill-item":!0,"aria-hidden":n,"aria-label":t?`${e}: ${t}`:void 0,children:(0,s.jsx)(o.k,{direction:"row",gap:1,align:"center",children:(0,s.jsx)(l.x,{as:"span",variant:"text-xsmall",children:e})})})}),t&&(0,s.jsx)(S._v,{root:null,children:(0,s.jsx)(l.x,{as:"span",variant:"text-xsmall",children:t})})]}),Rr=({title:e,pillItems:t,maxLines:n,pillHeight:r,gap:a})=>{const c=(0,i.useRef)(null),[d,u]=(0,i.useState)(void 0),g=(0,i.useMemo)((()=>`expandable-pills-${e.toLowerCase().replace(/\s+/g,"-")}`),[e]),{isExpanded:h,containerRef:p,hiddenCount:m,maxHeight:f,toggleExpanded:x,visibleItemsCount:v,shouldShowInlineButton:b,shouldShowNewlineButton:C}=(({pillItems:e,maxLines:t=3,pillHeight:n=28,gap:r=4,buttonWidth:a=75,measuredButtonWidth:s})=>{const o=e.length,[l,c]=(0,i.useState)(!1),[d,u]=(0,i.useState)(o),[g,h]=(0,i.useState)("newline"),[p,m]=(0,i.useState)(0),[f,x]=(0,i.useState)(0),v=(0,i.useRef)(null),b=s??a;(0,i.useEffect)((()=>{const e=v.current;if(!e||0===o)return;const a=(e,t,n)=>{let a=0,s=1,i=0;const o=[];for(let l=0;l<e.length;l++){const c=e[l].offsetWidth+r;if(a+c<=t)a+=c,i++;else{if(n&&s>=n)break;o.push(i-o.reduce(((e,t)=>e+t),0)),s++,a=c,i++}}return(!n||s<=n)&&o.push(i-o.reduce(((e,t)=>e+t),0)),{totalFittingItems:i,itemsPerLine:o,linesUsed:s}},s=(e,t,n,a)=>{let s=0;for(let t=n-(a[a.length-1]||0);t<n;t++)e[t]&&(s+=e[t].offsetWidth+r);return t-s},i=()=>{const i=e.querySelectorAll("[data-pill-item]");if(0===i.length)return;const d=e.offsetWidth;if(0===d)return;let g=!1;const p=e.scrollHeight,{totalFittingItems:f,itemsPerLine:v,linesUsed:C}=a(i,d,t);let y=Math.max(0,t*(n+r)-r);if(f>0&&i[f-1]){const t=e.getBoundingClientRect(),n=i[f-1].getBoundingClientRect().bottom-t.top;n>0&&n<2*p&&(y=Math.ceil(n))}if(l&&f>=o&&c(!1),l&&f<o){const{totalFittingItems:e,itemsPerLine:t}=a(i,d);g=s(i,d,e,t)>=b,u(e)}else C===t&&f<o&&(g=s(i,d,f,v)>=b),u(f);m(y),x(Math.max(p,y)),h(g?"inline":"newline")};if(i(),typeof ResizeObserver<"u"){const t=new ResizeObserver(i);return t.observe(e),()=>{t.disconnect()}}}),[e,t,r,b,l,o,n]);const C=Math.max(0,o-d),y=C>0||l,k=l?f:p,w=(0,i.useCallback)((()=>{c((e=>!e))}),[]);return{isExpanded:l,containerRef:v,hiddenCount:C,shouldShowButton:y,maxHeight:k,toggleExpanded:w,buttonPlacement:g,visibleItemsCount:d,shouldShowInlineButton:y&&"inline"===g,shouldShowNewlineButton:y&&"newline"===g}})({pillItems:t,maxLines:n,pillHeight:r,gap:a,measuredButtonWidth:d});(0,i.useEffect)((()=>{if(c.current){const e=c.current.offsetWidth;e>0&&e!==d&&u(e)}}),[m,h,d]);const y=(0,i.useMemo)((()=>(0,s.jsx)(l.x,{ref:c,as:"span",variant:"text-xsmall",onClick:x,"aria-expanded":h,"aria-controls":g,"aria-label":h?"Show less":`Show ${m} more`,role:"button",tabIndex:0,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),x())},style:{cursor:"pointer",paddingLeft:b?"6px":void 0},children:h?"Show less":`+ ${m} more`})),[x,h,g,m,b]),k=(0,i.useMemo)((()=>{const e=h?t.length:v,n=t.slice(0,e),r=t.slice(e);return(0,s.jsxs)(s.Fragment,{children:[n.map((e=>(0,s.jsx)(Mr,{name:e.name,description:e.description},e.id))),b&&y,r.map(((t,n)=>{const r=!h&&e+n>=v;return(0,s.jsx)(Mr,{name:t.name,description:t.description,isHidden:r},t.id)}))]})}),[t,h,v,b,y]);return 0===t.length?null:(0,s.jsxs)(o.k,{direction:"column",gap:2,children:[(0,s.jsx)(l.x,{as:"span",variant:"text-small",weight:"semibold",children:e}),(0,s.jsxs)(o.k,{direction:"column",gap:1,children:[(0,s.jsx)("div",{id:g,ref:p,style:{maxHeight:f>0?`${f}px`:void 0,overflow:"hidden",transition:"max-height 0.3s ease-in-out"},children:(0,s.jsx)(o.k,{direction:"row",gap:1,wrap:!0,align:"center",children:k})}),C&&(0,s.jsx)(o.k,{direction:"row",children:y})]})]})},Dr=({packMetadata:e})=>{const t=(0,i.useMemo)((()=>((null==e?void 0:e.syncTables)||[]).map(((e,t)=>{const n=Er(e.name),r=`datasource:${e.name}:${t}`;return{name:n,description:e.description,id:r}}))),[e]);return 0===t.length?null:(0,s.jsx)(Rr,{title:"Data sources",pillItems:t})},Tr="_agentIcon_1msim_1",Or=({agent:e,goBrandingEnabled:t})=>{const{scheme:n}=(0,R.t)(),r="dark"===n,a=(d=e.creator)===kn.eh.GRAMMARLY||d===kn.eh.CODA||d===kn.eh.SUPERHUMAN,i=t?kn.eh.SUPERHUMAN:kn.eh.GRAMMARLY,c=a?`${i} agent: ${i} built this agent to meet our high standards of quality and policy compliance.`:"Verified agent: This agent was built by a trusted developer. We made sure it complies with our policies and applied abuse-prevention checks.";var d;return(0,s.jsxs)(o.k,{direction:"row",gap:3,align:"center",children:[(0,s.jsx)(o.k,{width:40,height:40,padding:3,borderRadius:3,style:{border:"1px solid var(--color-border-base-subdued)"},children:(0,s.jsx)(sr,{agent:e,size:"xxlarge",className:Tr,goBrandingEnabled:t})}),(0,s.jsxs)(o.k,{direction:"column",align:"start",children:[(0,s.jsxs)(o.k,{direction:"row",align:"center",gap:1,children:[(0,s.jsx)(D.X,{as:"h1",variant:"heading-xsmall",children:e.name}),e.certifiedAgent&&(0,s.jsxs)(S.u,{placement:"top",children:[(0,s.jsx)(S.aJ,{asChild:!0,children:(0,s.jsx)("span",{style:{display:"inline-flex"},children:(0,s.jsx)(g.J,{icon:h.j,accessibilityLabel:"Certified Agent",size:"small",style:{color:r?"var(--blue-30)":"var(--blue-60)",backgroundColor:"var(--color-background-base-default)"}})})}),(0,s.jsx)(S._v,{style:{whiteSpace:"pre-wrap"},root:null,children:c})]})]}),(0,s.jsxs)(l.x,{as:"span",variant:"text-small",color:"base-subdued",children:["By ",e.creator]})]})]})},Lr=()=>{const e=xr(kn.uK.AGENT_SECURITY_URL);return(0,s.jsxs)(o.k,{direction:"column",gap:2,children:[(0,s.jsx)(l.x,{as:"span",variant:"text-small",weight:"bold",children:"How this agent handles data"}),(0,s.jsxs)(l.x,{as:"span",variant:"text-small",children:["When you're interacting with this agent, it can see info from your apps and tabs to give you personalized help."," ",(0,s.jsx)(T.r,{href:e,target:"_blank",rel:"noopener noreferrer",children:"Learn more"})]})]})},Nr=({packMetadata:e})=>{const t=(0,i.useMemo)((()=>[...(null==e?void 0:e.skills)||[],...(null==e?void 0:e.formulas)||[]].map(((e,t)=>{const n="displayName"in e?e.displayName:e.name,r=Er(n),a=`${"displayName"in e?"skill":"formula"}:${"displayName"in e?e.displayName:e.name}:${t}`;return{name:r,description:e.description,id:a}}))),[e]);return 0===t.length?null:(0,s.jsx)(Rr,{title:"Skills",pillItems:t})},Pr=({domains:e})=>{const t=e.length;return(0,s.jsx)(o.k,{direction:"column",children:t>0?(0,s.jsxs)(o.k,{direction:"column",gap:4,children:[(0,s.jsxs)(o.k,{direction:"column",gap:2,children:[(0,s.jsx)(l.x,{as:"span",variant:"text-small",weight:"bold",children:"Restricted network requests"}),(0,s.jsx)(l.x,{as:"span",variant:"text-small",children:"Superhuman ensures agents only connect to their specific domains."})]}),(0,s.jsxs)(o.k,{direction:"column",gap:2,children:[(0,s.jsxs)(l.x,{as:"span",variant:"text-small",weight:"bold",children:["This agent connects to ",t," domain",t>1?"s":""]}),(0,s.jsx)(l.x,{as:"span",variant:"text-small",children:e.map(((e,n)=>(0,s.jsxs)("span",{children:[e,n<t-1&&(0,s.jsx)("span",{children:""})]},e)))})]})]}):(0,s.jsxs)(o.k,{direction:"column",gap:2,children:[(0,s.jsx)(l.x,{as:"span",variant:"text-small",weight:"bold",children:"No connection to external networks"}),(0,s.jsx)(l.x,{as:"span",variant:"text-small",children:"This agent doesn't connect to any other domains."})]})})},Br=({agentMetadata:e,externalPackMetadata:t})=>{const n=(null==t?void 0:t.networkDomains)??[];return(0,s.jsxs)(o.k,{direction:"column",gap:4,children:[(0,s.jsxs)(o.k,{direction:"column",gap:2,children:[(0,s.jsx)(l.x,{as:"span",variant:"text-small",weight:"bold",children:"Privacy and security"}),(0,s.jsxs)(o.k,{direction:"column",children:[(0,s.jsx)(l.x,{as:"span",variant:"text-small",children:"Agents follow strict security protocols. They only connect to declared domains, never access your login details, and run in isolated environments. Permissions are granular, and you control who can view and act on data. Verified agents are human-reviewed for quality and policy compliance."}),(0,s.jsx)(l.x,{as:"span",variant:"text-small",children:(null==e?void 0:e.privacyPolicyUrl)&&(0,s.jsx)(T.r,{href:e.privacyPolicyUrl,target:"_blank",rel:"noopener noreferrer","data-testid":"privacy-policy-link",children:"See developer's privacy policy"})}),(0,s.jsx)(l.x,{as:"span",variant:"text-small",children:(null==e?void 0:e.termsOfServiceUrl)&&(0,s.jsx)(T.r,{href:e.termsOfServiceUrl,target:"_blank",rel:"noopener noreferrer","data-testid":"terms-of-service-link",children:"See developer's terms of service"})})]})]}),(0,s.jsx)(Pr,{domains:n})]})},Fr=({agentMetadata:e})=>{const t=e.releaseId,n=e.lastReleasedAt;if(!n||!t)return null;const r=Sn.wj.create(n),a=Sn.wj.fullDate(r);return(0,s.jsx)(o.k,{direction:"column",gap:4,children:(0,s.jsxs)(o.k,{direction:"column",gap:2,children:[(0,s.jsx)(l.x,{as:"span",variant:"text-small",weight:"bold",children:"Updates"}),(0,s.jsxs)(l.x,{as:"span",variant:"text-small",children:["Last updated ",a," (Release ",t,")"]})]})})},zr="_contentContainer_134qn_1",Hr="_descriptionContainer_134qn_12",Ur="_actionButtonContainer_134qn_16",$r=({agentId:e,onOpenAgent:t,shouldUseNativeInstallFlow:n,goBrandingEnabled:r})=>{var a,i;const{agentMetadata:c,packMetadata:d,installationContext:g,isLoading:h,error:p}=Gn(e,{withExternalPackMetadata:!0,withInstallationContext:!0}),m=null!=c&&c.id?(0,kn.Oo)(c.id):void 0,f=xr(kn.uK.AGENT_STORE_URL,m?`${m}`:void 0),x=xr(kn.uK.REPORT_AN_ISSUE,m?`?agentID=${m}`:void 0),v=(null==g?void 0:g.packInstallability.canInstallPackAndConnectAccountForAgentInstance)&&(null==g?void 0:g.canSkipManualSetup)&&(null==g?void 0:g.hasNoAuth);return h?(0,s.jsx)(_.g,{accessibilityLabel:"Loading agent profile",style:{height:"100%"},children:(0,s.jsxs)(o.k,{direction:"column",gap:2,justify:"space-between",height:"100%",children:[(0,s.jsxs)(o.k,{direction:"column",gap:3,children:[(0,s.jsxs)(o.k,{direction:"column",gap:2,children:[(0,s.jsx)(_.g.Rectangle,{height:64,width:"100%"}),(0,s.jsx)(_.g.Rectangle,{height:36,width:"100%"})]}),(0,s.jsx)(_.g.Rectangle,{height:150,width:"80%"})]}),(0,s.jsx)(o.k,{justify:"center",paddingTop:3,children:(0,s.jsx)(_.g.Rectangle,{height:40,width:"100%"})})]})}):c&&d&&!p?(0,s.jsxs)(o.k,{direction:"column",height:"100%",children:[(0,s.jsx)(Or,{agent:c,goBrandingEnabled:r}),(0,s.jsx)(u.x,{className:zr,children:(0,s.jsxs)(o.k,{direction:"column",gap:4,children:[(0,s.jsxs)(o.k,{direction:"column",gap:4,children:[!c.certifiedAgent&&(0,s.jsx)(wn.Tv,{title:"This agent is not verified",content:"This agent may put your devices and data at risk. We have not reviewed the agent or its developer. Make sure you trust the developer before you use it."}),(0,s.jsx)(Sr,{imageUrl:null==(i=null==(a=c.agentImages)?void 0:a[0])?void 0:i.imageUrl,agentName:c.name,shortDescription:c.shortDescription}),(0,s.jsx)("div",{className:Hr,children:(0,s.jsx)(l.x,{as:"pre",variant:"text-small",children:c.description})})]}),(0,s.jsx)(Lr,{}),(0,s.jsx)(Nr,{packMetadata:d}),(0,s.jsx)(Dr,{packMetadata:d}),(0,s.jsx)(Br,{agentMetadata:c,externalPackMetadata:d}),(0,s.jsx)(Fr,{agentMetadata:c}),(0,s.jsxs)(o.k,{direction:"column",children:[m&&(0,s.jsx)(l.x,{as:"span",variant:"text-small",children:(0,s.jsx)(T.r,{href:f,target:"_blank",rel:"noopener noreferrer",children:"See full security details"})}),(0,s.jsx)(l.x,{as:"span",variant:"text-small",children:(0,s.jsx)(T.r,{href:x,target:"_blank",rel:"noopener noreferrer",children:"Report an issue"})}),c.supportEmail&&(0,s.jsx)(l.x,{as:"span",variant:"text-small",children:(0,s.jsx)(T.r,{href:`mailto:${c.supportEmail}`,target:"_blank",rel:"noopener noreferrer",children:"Contact developer"})})]})]})}),(0,s.jsx)(u.x,{className:Ur,children:(0,s.jsx)(yr,{agentMetadata:c,canOneClickInstall:v,installationContext:g,onOpenAgent:t,shouldUseNativeInstallFlow:n})})]}):(0,s.jsx)(o.k,{direction:"column",justify:"center",align:"center",height:"100%",gap:2,children:(0,s.jsx)(l.x,{as:"span",variant:"text-small",children:p??"Unable to load agent information"})})};function Gr(e){const{agentMetadata:t,isLoading:n,error:r}=Gn(e),a=null==t?void 0:t.externalMetadataUrl,{packMetadata:s,isLoading:o,error:l}=(e=>{const{agentDirectoryService:t}=zn(),[n,r]=(0,i.useState)(),[a,s]=(0,i.useState)(!1),[o,l]=(0,i.useState)();return(0,i.useEffect)((()=>{e&&(async()=>{s(!0);try{const n=await t.getExternalPackMetadata(e);r(n)}catch(e){l(e instanceof Error?e.message:"Failed to fetch pack metadata")}finally{s(!1)}})()}),[e,t]),{packMetadata:n,isLoading:a,error:o}})(a);return{agentMetadata:t,packMetadata:s,isLoading:n||!!a&&o,error:{agent:r,pack:l}}}const Wr=({agentId:e,connections:t,agentInstance:n,selectedConnectionId:r})=>{const{createAgentInstance:a,isInstalling:i,error:c}=vr(),{isInstalled:d}=ir(e),u=t?Object.entries(t):[],g=u.length>0,h=u.length>1,p=!!n,{buttonText:m,isButtonDisabled:f}=function({isInstalled:e,hasConnections:t,hasExistingInstance:n,hasMultipleConnections:r,selectedConnectionId:a,connections:s}){let i="Sync Data",o=!1;if(e)i="Open";else if(t)if(n)if(i="Update",r){const e=Object.values(s||{}).sort(((e,t)=>t.connection.modificationTimestamp-e.connection.modificationTimestamp))[0],t=null==e?void 0:e.connection.id;o=!(a&&a!==t)}else o=!0;else i="Sync Data",o=!a;else i="Sync Data",o=!0;return{buttonText:i,isButtonDisabled:o}}({isInstalled:d,hasConnections:g,hasExistingInstance:p,hasMultipleConnections:h,selectedConnectionId:r,connections:t});return(0,s.jsxs)(o.k,{direction:"column",gap:2,style:{width:"100%"},children:[c&&(0,s.jsx)(l.x,{as:"p",variant:"text-small",color:"critical-default",children:c}),(0,s.jsx)(E.z,{variant:"primary",size:"large",isLoading:i,text:m,style:{width:"100%"},onClick:()=>{d||a({agentId:e,originalConnectionId:r||void 0},(()=>{}))},isDisabled:f})]})};const Zr="_container_1sik4_1",Vr="_primaryAccountButton_1sik4_7",qr="_signInAnotherButton_1sik4_14",Kr="_noAccountContainer_1sik4_18",Jr=({connections:e,isLoading:t=!1,agentInstance:n,onConnectionSelect:r})=>{var a;const c=e?Object.entries(e):[],d=c.length>0,u=c.length>1,h=(0,i.useCallback)((()=>{if(!e)return null;const t=Object.values(e).sort(((e,t)=>t.connection.modificationTimestamp-e.connection.modificationTimestamp))[0];return(null==t?void 0:t.connection.id)||null}),[e]),[p,m]=(0,i.useState)(h());!function(e,t){const n=(0,i.useRef)(!1);(0,i.useEffect)((()=>{!t()||n.current||(n.current=!0,e())}),[e,t])}((0,i.useCallback)((()=>{const e=h();e&&(m(e),null==r||r(e))}),[h,r]),(0,i.useCallback)((()=>d),[d]));let f=null;d&&(f=p&&e&&e[p]?e[p]:Object.values(e||{}).sort(((e,t)=>t.connection.modificationTimestamp-e.connection.modificationTimestamp))[0]||null);const x=null==f?void 0:f.connection,v=(null==x?void 0:x.name)||"Unknown Account",b=!!n;return t?(0,s.jsxs)(o.k,{direction:"column",gap:2,children:[(0,s.jsx)(l.x,{as:"span",variant:"text-small",weight:"bold",children:"Account"}),(0,s.jsx)(o.k,{direction:"column",gap:2,className:Zr,children:(0,s.jsx)(l.x,{as:"span",variant:"text-small",color:"base-subdued",children:"Loading account information..."})})]}):d?(0,s.jsxs)(o.k,{direction:"column",gap:2,children:[(0,s.jsx)(l.x,{as:"span",variant:"text-small",weight:"bold",children:"Account"}),(0,s.jsxs)(o.k,{direction:"column",gap:2,children:[u&&(0,s.jsx)(O.P,{label:b?"Switch to another connection":"Select a connection",value:p||"",onChange:e=>(e=>{m(e),null==r||r(e)})(e),children:c.map((([e,t])=>{const n=t.connection.name||"Unknown Connection";return(0,s.jsx)(O.P.Option,{value:e,children:n},e)}))}),(0,s.jsxs)(o.k,{direction:"column",gap:2,className:Zr,children:[(0,s.jsx)(o.k,{direction:"row",justify:"space-between",children:(0,s.jsxs)(o.k,{direction:"row",gap:2,align:"center",children:[(0,s.jsx)(g.J,{icon:L.g,accessibilityLabel:"Account avatar",size:"xlarge"}),(0,s.jsx)(l.x,{as:"span",variant:"text-small",children:v})]})}),b&&(!u||p===(null==(a=c[0])?void 0:a[0]))&&(0,s.jsx)(E.z,{variant:"primary",size:"small",className:Vr,children:"Primary account"})]}),d&&(0,s.jsx)(E.z,{variant:"secondary",size:"small",className:qr,children:"Sign into another account"})]})]}):(0,s.jsxs)(o.k,{direction:"column",gap:2,children:[(0,s.jsx)(l.x,{as:"span",variant:"text-small",weight:"bold",children:"Account"}),(0,s.jsx)(o.k,{direction:"column",gap:2,className:Zr,children:(0,s.jsxs)(o.k,{direction:"column",gap:2,align:"start",className:Kr,children:[(0,s.jsx)(l.x,{as:"span",variant:"text-small",color:"base-subdued",children:"No account connected"}),(0,s.jsx)(E.z,{variant:"secondary",size:"small",children:"Sign In"})]})})]})},Yr=({packMetadata:e})=>{const t=(0,i.useMemo)((()=>((null==e?void 0:e.syncTables)||[]).map((e=>{let t=e.name;return Ir(t)&&(t=Ar(t)),{id:e.name.toLowerCase().replace(/\s+/g,"-"),name:t}}))),[e]);return 0===t.length?null:(0,s.jsxs)(o.k,{direction:"column",gap:2,children:[(0,s.jsx)(l.x,{as:"span",variant:"text-small",weight:"bold",children:"Info sources"}),(0,s.jsx)(l.x,{as:"span",variant:"text-small",color:"base-subdued",children:"This connection will let you use info from the selected sources. It updates automatically."}),(0,s.jsx)(o.k,{direction:"column",gap:2,children:t.map((e=>(0,s.jsx)(N.XZ,{isSelected:!0,isDisabled:!0,"aria-label":e.name,children:(0,s.jsx)(l.x,{as:"span",variant:"text-small",children:e.name})},e.id)))})]})},Xr=({agentMetadata:e,agentInstance:t})=>{const{agentDirectoryService:n}=zn(),{packMetadata:r}=Gr(e.id),{connections:a,isLoading:c,error:d}=(({packId:e,ignoreVersionsAfterLive:t,agentDirectoryService:n})=>{const[r,a]=(0,i.useState)(null),[s,o]=(0,i.useState)(!1),[l,c]=(0,i.useState)(null),d=(0,i.useCallback)((async()=>{if(n&&e){o(!0),c(null);try{const r={packId:e,...void 0!==t&&{ignoreVersionsAfterLive:t}},s=await n.getConnectionsInfoForUser(r);a(s)}catch(e){const t=e instanceof Error?e:new Error("Failed to fetch agent connections");c(t),console.error("Error fetching agent connections:",t)}finally{o(!1)}}}),[n,e,t]),u=(0,i.useCallback)((async()=>{await d()}),[d]);return(0,i.useEffect)((()=>{d()}),[d]),{connections:r,isLoading:s,error:l,refetch:u}})({packId:(0,kn.Hr)(e.id),agentDirectoryService:n}),[u,g]=(0,i.useState)(null),h=(0,i.useCallback)((e=>{g(e)}),[]),p=!a||0===Object.keys(a).length;return(0,s.jsxs)(o.k,{direction:"column",justify:"space-between",height:"100%",children:[(0,s.jsxs)(o.k,{direction:"column",gap:2,children:[(0,s.jsx)(D.X,{as:"h2",variant:"heading-medium",children:"Settings"}),(0,s.jsxs)(o.k,{direction:"column",gap:4,children:[!c&&p&&(0,s.jsxs)(o.k,{direction:"column",gap:2,children:[(0,s.jsx)(D.X,{as:"h3",variant:"heading-small",children:"Make a connection"}),(0,s.jsxs)(l.x,{as:"span",variant:"text-small",color:"base-subdued",children:["Connect your info to Go so you can use it in your chats. You'll get smarter, more relevant responses."," ",(0,s.jsx)(T.r,{href:"https://www.grammarly.com/security",children:"See how we keep your data safe"})]})]}),(0,s.jsx)(Jr,{connections:a,isLoading:c,agentInstance:t,onConnectionSelect:h}),(0,s.jsx)(o.k,{paddingTop:4,children:(0,s.jsx)(Yr,{packMetadata:r})}),c&&(0,s.jsx)(_.g,{accessibilityLabel:"Loading settings",children:(0,s.jsx)(_.g.Rectangle,{height:"100px"})})]}),d&&(0,s.jsxs)(l.x,{as:"span",variant:"text-small",color:"base-subdued",children:["Error loading connections: ",d.message]})]}),(0,s.jsx)(o.k,{align:"center",justify:"center",direction:"column",gap:2,paddingTop:3,paddingBottom:3,children:(0,s.jsx)(Wr,{agentId:e.id,connections:a,agentInstance:t,selectedConnectionId:u})})]})},Qr="_manageAgentsButton_1po2c_1",ea="View in Agent Store",ta="Configure in new tab",na=({currentView:e,canGoBack:t,onClose:n,onBack:a,onManageAgents:l})=>{const{agentDirectoryService:d}=zn(),u=ra(e),{trackClicked:g}=$n(On.ViewAgentInMarketplace,{agentId:u||""}),{trackClicked:h}=$n(On.ManageAgents,{}),p=(0,i.useCallback)((async()=>{switch(e.type){case Ln.AgentSettings:await Dn({agentId:e.agentMetadata.id,agentDirectoryService:d}),g();break;case Ln.AgentProfile:await(({agentId:e,agentDirectoryService:t})=>{if(!(0,kn.kq)(e)||typeof self>"u")return;const n=Number((0,kn.Hr)(e)),r=t.getConfiguredUrl(kn.uK.AGENT_STORE_URL,`${n}`),a=self.open(r,"_blank","noopener,noreferrer");a&&(a.opener=null)})({agentId:e.agentId,agentDirectoryService:d}),g()}}),[e,d,g]),m=(()=>{switch(e.type){case Ln.Directory:return"Add agents";case Ln.AgentProfile:return"";case Ln.ManageAgents:return"Manage agents";case Ln.AgentSettings:return e.agentMetadata.name;default:return(0,r.vE)(e)}})(),f=(0,i.useCallback)((()=>{l(),h()}),[l,h]);return(0,s.jsxs)(o.k,{direction:"row",justify:"space-between",children:[t?(0,s.jsx)(c.h,{size:"small",variant:"tertiary",accessibilityLabel:"Back",icon:P.n,onClick:a}):(0,s.jsx)(c.h,{size:"small",variant:"tertiary",accessibilityLabel:"Close",icon:wn.Tw,onClick:n}),(0,s.jsx)(o.k,{justify:"center",flex:"1",align:"center",children:(0,s.jsx)(D.X,{as:"h1",variant:"heading-xxsmall",children:m})}),e.type===Ln.Directory&&(0,s.jsx)(c.h,{className:Qr,size:"small",variant:"tertiary",accessibilityLabel:"Manage agents",icon:wn.d$,onClick:f}),[Ln.AgentSettings,Ln.AgentProfile].includes(e.type)&&(0,s.jsx)(c.h,{size:"small",variant:"tertiary",accessibilityLabel:e.type===Ln.AgentProfile?ea:ta,icon:B.n,onClick:p})]})},ra=e=>{switch(e.type){case Ln.AgentProfile:return e.agentId;case Ln.AgentSettings:return e.agentMetadata.id;default:return}},aa=({closeModal:e,shouldUseNativeInstallFlow:t,onOpenAgent:n,isFirstPartyPackAgentsEnabled:a,selectedAgentId:l,coordinatorAgentId:c,goBrandingEnabled:d})=>{const g=Bn(),h=(0,i.useCallback)((e=>{switch(e.type){case Ln.Directory:return(0,s.jsx)(fr,{onOpenAgent:n,goBrandingEnabled:d});case Ln.AgentProfile:return(0,s.jsx)($r,{agentId:e.agentId,onOpenAgent:n,shouldUseNativeInstallFlow:t,goBrandingEnabled:d});case Ln.ManageAgents:return(0,s.jsx)(Yn,{onOpenAgent:n,shouldUseNativeInstallFlow:t,isFirstPartyPackAgentsEnabled:a,selectedAgentId:l,coordinatorAgentId:c});case Ln.AgentSettings:return(0,s.jsx)(Xr,{agentMetadata:e.agentMetadata});default:(0,r.vE)(e)}}),[t,n,a,l,c,d]);return(0,s.jsxs)(o.k,{direction:"column",gap:8,height:"100%",children:[(0,s.jsx)(na,{currentView:g.current,canGoBack:g.canGoBack,onClose:e,onBack:g.goBack,onManageAgents:g.showManageAgents}),(0,s.jsx)(u.x,{style:{flex:"1",minHeight:0},children:(()=>{const e={display:"none"},t={display:"contents"};return(0,s.jsx)(s.Fragment,{children:g.stack.map((n=>{const r=(e=>{switch(e.type){case Ln.AgentProfile:return`${e.type}-${e.agentId}`;case Ln.AgentSettings:return`${e.type}-${e.agentMetadata.id}`;default:return e.type}})(n),a=n===g.current;return(0,s.jsx)("div",{style:a?t:e,children:h(n)},r)}))})})()})]})},sa=({agentDirectoryService:e,trackingService:t,onOpenAgent:n,closeModal:r,initialView:a,shouldUseNativeInstallFlow:i,isFirstPartyPackAgentsEnabled:o=!1,selectedAgentId:l,coordinatorAgentId:c,goBrandingEnabled:d=!1})=>(0,s.jsx)(er,{initialView:a,agentDirectoryService:e,children:(0,s.jsx)(Xn,{agentDirectoryService:e,children:(0,s.jsx)(Qn,{trackingService:t,children:(0,s.jsx)(aa,{closeModal:r,onOpenAgent:n,shouldUseNativeInstallFlow:i,isFirstPartyPackAgentsEnabled:o,selectedAgentId:l,coordinatorAgentId:c,goBrandingEnabled:d})})})});kn.km.all;var ia=n(80324),oa=n(47785);if(6168==n.j)var la=n(82717);var ca=n(70892);if(6168==n.j)var da=n(22825);if(6052==n.j)T=n(93607);if(/^6(052|168)$/.test(n.j))var ua=n(6837);if(/^6(052|168)$/.test(n.j))var ga=n(17302);if(/^6(052|168)$/.test(n.j))var ha=n(59189);if(/^6(052|168)$/.test(n.j))var pa=n(3343);var ma=n(68198),fa=n(95366),xa=n(82491),va=n(38076);const ba=(0,xa.I)("color",(({title:e,titleId:t,desc:n,descId:r,resourcePrefix:a=(0,va.O)(),...s})=>i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceMute",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...s},n?i.createElement("desc",{id:r},n):null,e?i.createElement("title",{id:t},e):null,i.createElement("path",{stroke:"#646B81",strokeLinecap:"round",d:"m12 4-8 8m4 2A6 6 0 1 0 8 2a6 6 0 0 0 0 12Z"}))));var Ca=n(82597);const ya=(0,xa.I)("color",(({title:e,titleId:t,desc:n,descId:r,resourcePrefix:a=(0,va.O)(),...s})=>i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceUp",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...s},n?i.createElement("desc",{id:r},n):null,e?i.createElement("title",{id:t},e):null,i.createElement("path",{stroke:"#646B81",strokeLinecap:"round",d:"m2 11 6-6 6 6"}))));if(/^6(052|168)$/.test(n.j))var ka=n(38665);var wa=n(76957);if(6052==n.j)P=n(39981);if(/^6(052|168)$/.test(n.j))var ja=n(5320);var Sa=n(7368);if(6168==n.j)var Ia=n(33171);var Aa=n(34254),Ea=n(42514);if(6168==n.j)var _a=n(17862);if(6168==n.j)var Ma=n(93806);if(6168==n.j)var Ra=n(29246);if(6168==n.j)var Da=n(45114);if(/^6(052|168)$/.test(n.j))var Ta=n(67119);var Oa,La,Na,Pa,Ba,Fa,za,Ha=n(83816),Ua=e=>{throw TypeError(e)},$a=(e,t,n)=>t.has(e)||Ua("Cannot "+n),Ga=(e,t,n)=>($a(e,t,"read from private field"),n?n.call(e):t.get(e)),Wa=(e,t,n)=>t.has(e)?Ua("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Za=(e,t,n,r)=>($a(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Va=(e,t,n)=>($a(e,t,"access private method"),n),qa=(e=>(e.AgentBench="agentBench",e.ExternalChange="external",e.Command="command",e))(qa||{}),Ka=(e=>(e.DiscoverabilityPopup="pushedContent/discoverabilityPopup",e.DiscoverabilityPanelFooter="pushedContent/discoverabilityPanelFooter",e.DiscoverabilityPanelFooterAcceptButton="pushedContent/discoverabilityPanelFooter/accept",e.DiscoverabilityPanelFooterDismissButton="pushedContent/discoverabilityPanelFooter/dismiss",e))(Ka||{}),Ja=(e=>(e.AgentBenchItem="agentBench/agentIcon",e.AgentBenchLabelsOverlay="agentBench/agentLabelsOverlay",e.AgentPanel="agentBench/agentPanel",e.ViewDirectoryBenchItem="agentBench/viewDirectoryBenchItem",e.AgentHeaderClose="agent/headerClose",e.ChatHistoryDelete="chatHistory/delete",e.ChatHistorySelect="chatHistory/select",e.ChatHistoryCreate="chatHistory/create",e.ErrorFallback="agent/errorFallback",e.RetryButton="chat/retryButton",e.CopyArtifactButton="chat/copyArtifactButton",e.InsertArtifactButton="chat/insertArtifactButton",e.IdeationTabs="chat/ideationTabs",e.IdeationTabContent="chat/ideationTabContent",e.ChatInputUphookSecondaryCta="chat/inputUphookSecondaryCta",e.QuickActionButton="chat/quickActionButton",e.ApplyAllSuggestionsButton="chat/applyAllSuggestionsButton",e.DismissAllSuggestionsButton="chat/dismissAllSuggestionsButton",e.ShowSuggestionsButton="chat/summaryButton",e.ChatResponseSource="chat/responseSource",e.ContextOption="chatAgentPanel/context-option",e.RemoveContextItemButton="chatAgentPanel/remove-context-item-button",e.ContextSwitcherButton="chatAgentPanel/context-switcher-button",e[e.AgentDirectoryAgentCard=On.AgentCard]="AgentDirectoryAgentCard",e[e.AgentDirectoryLoadMore=On.LoadMore]="AgentDirectoryLoadMore",e[e.AgentDirectoryAddAgent=On.AddAgent]="AgentDirectoryAddAgent",e[e.AgentDirectoryOpenAgent=On.OpenAgent]="AgentDirectoryOpenAgent",e[e.AgentDirectorySignInToAgent=On.SignInToAgent]="AgentDirectorySignInToAgent",e[e.AgentDirectoryViewAgentInMarketplace=On.ViewAgentInMarketplace]="AgentDirectoryViewAgentInMarketplace",e[e.AgentDirectoryManageAgents=On.ManageAgents]="AgentDirectoryManageAgents",e[e.AgentDirectoryRemoveAgent=On.RemoveAgent]="AgentDirectoryRemoveAgent",e[e.AgentDirectoryViewAgentSettings=On.ViewAgentSettings]="AgentDirectoryViewAgentSettings",e[e.DiscoverabilityPopup=Ka.DiscoverabilityPopup]="DiscoverabilityPopup",e[e.DiscoverabilityPanelFooter=Ka.DiscoverabilityPanelFooter]="DiscoverabilityPanelFooter",e[e.DiscoverabilityPanelFooterAcceptButton=Ka.DiscoverabilityPanelFooterAcceptButton]="DiscoverabilityPanelFooterAcceptButton",e[e.DiscoverabilityPanelFooterDismissButton=Ka.DiscoverabilityPanelFooterDismissButton]="DiscoverabilityPanelFooterDismissButton",e))(Ja||{}),Ya=(e=>(e.ComponentImpression="componentImpression",e.ComponentClicked="componentClicked",e.ComponentInteraction="componentInteraction",e.AgentActivated="agentActivated",e.AgentDeactivated="agentDeactivated",e.ResponseCopied="responseCopied",e.ResponseInserted="responseInserted",e.ResponseStreamingCompleted="responseStreamingCompleted",e.ResponseStoppedByUser="responseStoppedByUser",e.MessageSubmitted="messageSubmitted",e.PredefinedPromptSubmitted="predefinedPromptSubmitted",e[e.AgentDirectorySearch=Tn.AgentDirectorySearch]="AgentDirectorySearch",e[e.AgentDirectoryReorderAgent=Tn.AgentDirectoryReorderAgent]="AgentDirectoryReorderAgent",e))(Ya||{}),Xa=(e=>(e.OpenAgent="OpenAgent",e.OpenCoordinatorAgent="OpenCoordinatorAgent",e.MessageAgent="MessageAgent",e))(Xa||{}),Qa=(e=>(e.Command="Command",e.Event="Event",e))(Qa||{}),es=(e=>(e.OpenChat="OpenChat",e.CreateChat="CreateChat",e))(es||{}),ts=(e=>(e.ChatDeleted="ChatDeleted",e))(ts||{});class ns{constructor(e){Wa(this,Pa),Wa(this,Oa,new Map),Wa(this,La,new Map),Wa(this,Na,new Set),this.capabilities=e}execute(e){switch(e.kind){case Xa.OpenAgent:Va(this,Pa,Ba).call(this,e);break;case Xa.OpenCoordinatorAgent:Va(this,Pa,Fa).call(this);break;case Xa.MessageAgent:Va(this,Pa,za).call(this,e);break;default:(0,r.vE)(e)}}registerAgent(e){Ga(this,Na).has(e)||(Ga(this,Na).add(e),Ga(this,La).set(e,new a.v))}unregisterAgent(e){Ga(this,Na).delete(e),Ga(this,La).delete(e),Ga(this,Oa).delete(e)}subscribeToAgentMessages(e){return Ga(this,La).get(e)}getPendingAgentMessages(e){const t=[...Ga(this,Oa).get(e)??[]];return Ga(this,Oa).set(e,[]),t}}Oa=new WeakMap,La=new WeakMap,Na=new WeakMap,Pa=new WeakSet,Ba=function(e){this.capabilities.openAgent(e.agentId,qa.Command)},Fa=function(){this.capabilities.openCoordinatorAgent()},za=function({agentId:e,message:t}){var n,r;Ga(this,Na).has(e)?null==(r=Ga(this,La).get(e))||r.emit("message",t):Ga(this,Oa).has(e)?null==(n=Ga(this,Oa).get(e))||n.push(t):Ga(this,Oa).set(e,[t])};const rs=(0,i.createContext)({}),as=({children:e,value:t})=>(0,s.jsx)(rs.Provider,{value:{...t},children:e});function ss(){return(0,i.useContext)(rs)}function is(e){const{commandExecutor:t,agentId:n}=ss();(0,i.useEffect)((()=>{var r;if(!t||!n)return;t.getPendingAgentMessages(n).forEach((t=>e(t))),t.registerAgent(n);const a=null==(r=t.subscribeToAgentMessages(n))?void 0:r.on("message",e);return()=>{null==a||a.dispose(),t.unregisterAgent(n)}}),[t,n,e])}rs.Provider;const os=(0,i.createContext)({showModal:()=>{},closeModal:()=>{},isOpen:!1}),ls=()=>(0,i.useContext)(os),cs=(0,i.createContext)(null);function ds(e){const t=(0,i.useContext)(cs);if(!t)throw new Error("Missing AssistantStoreContext.Provider in the tree");return(0,Sa.oR)(t,e)}function us(){const e=ds((e=>({chats:e.chatHistory.chats,renameChat:e.chatHistory.renameChat,deleteChat:e.chatHistory.deleteChat,initialize:e.chatHistory.initialize,subscribeToChatEvents:e.chatHistory.subscribeToChatEvents,unsubscribeFromChatEvents:e.chatHistory.unsubscribeFromChatEvents})));return{...e,chats:Object.values(e.chats)}}function gs(e,t){return(0,i.useCallback)(((...n)=>t(e,...n)),[t,e])}function hs(){const{agentId:e}=ss();if(!e)throw new Error("Agent ID is required to use chat");const{createNewChat:t,setActiveChat:n,sendMessage:r,retryMessage:a,stopStreamingResponse:s,activeChats:i}=ds((e=>e.chat)),o=i[e];return{id:(null==o?void 0:o.id)??"",messages:(null==o?void 0:o.messages)??[],draft:(null==o?void 0:o.draft)??void 0,createNewChat:gs(e,t),setActiveChat:gs(e,n),sendMessage:gs(e,r),retryMessage:gs(e,a),stopStreamingResponse:gs(e,s)}}function ps(){return ds((e=>({responseCopied:e.tracking.responseCopied,responseInserted:e.tracking.responseInserted,responseStreamed:e.tracking.responseStreamed,responseStoppedByUser:e.tracking.responseStoppedByUser,messageSubmitted:e.tracking.messageSubmitted,trackComponentEvent:e.tracking.trackComponentEvent,subscribeToChatEvents:e.tracking.subscribeToChatEvents,unsubscribeFromChatEvents:e.tracking.unsubscribeFromChatEvents})))}function ms(){return ds((e=>e.featureToggle))}function fs(e,t){return(0,i.useCallback)(((...n)=>t(e,...n)),[t,e])}function xs(){const{agentId:e}=ss();if(!e)throw new Error("Agent ID is required to use suggestions");const t=ds((e=>e.suggestions)),n=fs(e,t.focusSuggestions),r=fs(e,t.hasSuggestion),a=fs(e,t.applyAllSuggestions),s=fs(e,t.dismissAllSuggestions);return(0,i.useMemo)((()=>({onUpdate:t.onUpdate,focusSuggestions:n,hasSuggestion:r,applyAllSuggestions:a,dismissAllSuggestions:s})),[t,n,r,a,s])}function vs(){const{installedAgents:e,loadInstalledAgents:t,subscribeToAgentStateChanges:n}=ds((e=>e.agentDirectory));return{installedAgents:e,loadInstalledAgents:t,subscribeToAgentStateChanges:n}}function bs(e,t){var n,r;const{get:a,messages:s,trackImpression:o}=ds((e=>e.inProductMessaging)),l=s[e];(0,i.useEffect)((()=>{a(e,t)}),[a,e,null==(n=null==t?void 0:t.selectedAgent)?void 0:n.id]);const c=(0,i.useCallback)((()=>{o(e,null==l?void 0:l.id,t)}),[o,e,null==l?void 0:l.id,null==(r=null==t?void 0:t.selectedAgent)?void 0:r.id]);return{message:l,trackImpression:c}}const Cs=(0,i.createContext)(null);function ys(){var e;return null==(e=(0,i.useContext)(Cs))?void 0:e.tracking}function ks(e,t,n=!1){return Ss(e,t,jn.IX.Impression,n)}function ws(e,t,n=!1){return Ss(e,t,jn.IX.ImpressionAndClicked,n)}function js(e,t,n=!1){return Ss(e,t,jn.IX.Clicked,n)}function Ss(e,t,n,a=!1){const s=ys(),[o,l]=(0,i.useState)(!1),c=(0,i.useCallback)(((e,t,n)=>{const i={componentId:e,detail:n};switch(t){case jn.Jn.Impression:if(a&&o)return;return null==s||s.trackEvent(Ya.ComponentImpression,i),void l(!0);case jn.Jn.Clicked:return void(null==s||s.trackEvent(Ya.ComponentClicked,i));default:return(0,r.vE)(t)}}),[s,o,a]);return(0,jn.B9)({componentId:e,detail:t,trackEvent:c,autoTrackedInteractions:n})}const Is="_chatThreadLink_1wvyl_1",As=(0,i.forwardRef)((function({id:e,text:t,chatTimeRange:n,onClick:r},a){const{trackClicked:i}=js(Ja.ChatHistorySelect,{chatId:e,chatTimeRange:n});return(0,s.jsx)("button",{ref:a,className:Is,onClick:t=>{t.preventDefault(),i(),r(e,n)},children:(0,s.jsx)(l.x,{as:"small",variant:"text-xsmall",children:t})})})),Es="_chatListItem_heqpe_1",_s="_menu_heqpe_13",Ms="_moreOptions_heqpe_18",Rs=(0,i.forwardRef)((function({id:e,name:t,onEdit:n,chatTimeRange:r,onDelete:a,onSelect:i},c){const{deleteChat:g}=us(),{trackClicked:h}=js(Ja.ChatHistoryDelete,{chatId:e});return(0,s.jsx)(u.x,{as:"section",width:"full",className:Es,children:(0,s.jsxs)(o.k,{align:"center",justify:"space-between",width:"100%",children:[(0,s.jsx)(As,{ref:c,text:t,id:e,chatTimeRange:r,onClick:i}),(0,s.jsxs)(d.v,{className:_s,activator:(0,s.jsx)(E.z,{variant:"tertiary",className:Ms,iconStart:oa.o,accessibilityLabel:`More options for ${t}`}),children:[(0,s.jsx)(d.v.Item,{onClick:n,children:(0,s.jsx)(l.x,{"aria-label":`Rename chat titled ${t}`,as:"small",variant:"text-small",children:"Rename"})},"rename"),(0,s.jsx)(d.v.Item,{onClick:()=>{h(),g(e),a(e)},children:(0,s.jsx)(l.x,{"aria-label":`Delete chat titled ${t}`,as:"small",variant:"text-small",children:"Delete"})},"delete")]})]})},e)})),Ds="_chatRename_1go1y_1";function Ts({id:e,name:t,onComplete:n}){const{renameChat:r}=us(),a=(0,i.useRef)(null);(0,i.useLayoutEffect)((()=>{if(a.current){const e=requestAnimationFrame((()=>{var e;null==(e=a.current)||e.focus()}));return()=>cancelAnimationFrame(e)}}),[]);const o=t=>{const a=t.currentTarget.value.trim();a&&r(e,a),n(!!a)};return(0,s.jsx)("div",{className:Ds,children:(0,s.jsx)(la.n,{ref:a,helperMessage:"Type a new chat name. Press Enter to confirm. Press Esc to cancel.",label:"Chat name",type:"text",isRequired:!0,defaultValue:t,onBlur:e=>o(e),onKeyDown:e=>{"Enter"===e.key?(e.preventDefault(),e.stopPropagation(),o(e)):"Escape"===e.key&&n(!1)},labelDisplay:"hidden"})})}const Os="_hiddenElementStyle_n69is_1";function Ls({chat:e,chatTimeRange:t,onDelete:n,onSelect:r}){const[a,o]=(0,i.useState)(!1),[l,c]=(0,i.useState)(""),[d,u]=(0,i.useState)(!1),g=(0,i.useRef)(null);return(0,i.useEffect)((()=>{if(l){const e=setTimeout((()=>c("")),500);return()=>clearTimeout(e)}}),[l]),(0,i.useLayoutEffect)((()=>{var e;d&&(null==(e=g.current)||e.focus(),u(!1))}),[d]),(0,s.jsxs)(s.Fragment,{children:[a?(0,s.jsx)(Ts,{id:e.id,name:e.name,onComplete:e=>{o(!1),e&&(c("Chat renamed"),u(!0))}},e.id):(0,s.jsx)(Rs,{ref:g,chatTimeRange:t,id:e.id,name:e.name,onEdit:()=>o(!0),onDelete:n,onSelect:r},e.id),(0,s.jsx)("div",{role:"status","aria-live":"polite",className:Os,children:l})]})}const Ns="_chatGroupHeading_1gfig_1";function Ps(e){switch(e){case"Today":return"today";case"Last 7 days":return"last_7_days";case"Last 30 days":return"last_30_days";default:return"other"}}function Bs({title:e,chats:t,onDelete:n,onSelect:r}){return(0,s.jsxs)(u.x,{as:"div",width:"full",children:[(0,s.jsx)(D.X,{as:"h3",variant:"text-xsmall",color:"base-subdued",margin:2,className:Ns,children:e}),t.map((t=>(0,s.jsx)(Ls,{chat:t,chatTimeRange:Ps(e),onDelete:n,onSelect:r},t.id)))]})}const Fs=(0,s.jsxs)("svg",{width:"80",height:"80",viewBox:"0 0 80 80",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.71428 43.2002C6.55837 43.2002 4 45.7586 4 48.9145L4 73.6002L11.7109 68.8759H36.6857C39.8416 68.8759 42.4 66.3175 42.4 63.1616V48.9145C42.4 45.7586 39.8416 43.2002 36.6857 43.2002H9.71428Z",fill:"white"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 48.9145C3.5 45.4824 6.28223 42.7002 9.71428 42.7002H36.6857C40.1178 42.7002 42.9 45.4824 42.9 48.9145V63.1616C42.9 66.5936 40.1178 69.3759 36.6857 69.3759H11.8519L4.26121 74.0265C4.1069 74.1211 3.91356 74.1249 3.75567 74.0364C3.59778 73.948 3.5 73.7812 3.5 73.6002V48.9145ZM9.71428 43.7002C6.83451 43.7002 4.5 46.0347 4.5 48.9145V72.7075L11.4497 68.4495C11.5283 68.4014 11.6187 68.3759 11.7109 68.3759H36.6857C39.5655 68.3759 41.9 66.0414 41.9 63.1616V48.9145C41.9 46.0347 39.5655 43.7002 36.6857 43.7002H9.71428Z",fill:"#1C1C1C"}),(0,s.jsx)("path",{d:"M34.4004 58.7002C34.6764 58.7003 34.9004 58.9241 34.9004 59.2002C34.9002 59.4761 34.6763 59.7 34.4004 59.7002H12L11.8994 59.6904C11.6718 59.6438 11.5002 59.4416 11.5 59.2002C11.5 58.9586 11.6716 58.7566 11.8994 58.71L12 58.7002H34.4004ZM34.4004 52.2998C34.6764 52.3 34.9004 52.5238 34.9004 52.7998C34.9004 53.0758 34.6764 53.2997 34.4004 53.2998H12L11.8994 53.29C11.6716 53.2434 11.5 53.0414 11.5 52.7998C11.5 52.5582 11.6716 52.3562 11.8994 52.3096L12 52.2998H34.4004Z",fill:"#1C1C1C"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M70.2857 6.40039C73.4416 6.40039 76 8.95876 76 12.1147L76 53.7604L64.1123 46.4004H22.5143C19.3584 46.4004 16.8 43.842 16.8 40.6861V12.1147C16.8 8.95876 19.3584 6.40039 22.5143 6.40039H70.2857Z",fill:"white"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M76.5 12.1147C76.5 8.68262 73.7178 5.90039 70.2857 5.90039H22.5143C19.0822 5.90039 16.3 8.68262 16.3 12.1147V40.6861C16.3 44.1182 19.0822 46.9004 22.5143 46.9004H63.9701L75.7368 54.1855C75.891 54.281 76.0849 54.2855 76.2433 54.1972C76.4018 54.1089 76.5 53.9418 76.5 53.7604V12.1147ZM70.2857 6.90039C73.1655 6.90039 75.5 9.23491 75.5 12.1147V52.8628L64.3755 45.9753C64.2964 45.9263 64.2053 45.9004 64.1123 45.9004H22.5143C19.6345 45.9004 17.3 43.5659 17.3 40.6861V12.1147C17.3 9.23491 19.6345 6.90039 22.5143 6.90039H70.2857Z",fill:"#1C1C1C"}),(0,s.jsx)("path",{d:"M46.3996 39.1996C53.4689 39.1996 59.1996 33.4689 59.1996 26.3996C59.1996 19.3304 53.4689 13.5996 46.3996 13.5996C39.3304 13.5996 33.5996 19.3304 33.5996 26.3996C33.5996 33.4689 39.3304 39.1996 46.3996 39.1996Z",fill:"#00E0AC"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M46.3996 14.0996C39.6065 14.0996 34.0996 19.6065 34.0996 26.3996C34.0996 33.1927 39.6065 38.6996 46.3996 38.6996C53.1927 38.6996 58.6996 33.1927 58.6996 26.3996C58.6996 19.6065 53.1927 14.0996 46.3996 14.0996ZM33.0996 26.3996C33.0996 19.0542 39.0542 13.0996 46.3996 13.0996C53.745 13.0996 59.6996 19.0542 59.6996 26.3996C59.6996 33.745 53.745 39.6996 46.3996 39.6996C39.0542 39.6996 33.0996 33.745 33.0996 26.3996Z",fill:"#1C1C1C"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M53.5812 21.7802C53.7765 21.9755 53.7765 22.2921 53.5812 22.4873L44.6944 31.3742L40.0742 26.754C39.8789 26.5587 39.8789 26.2421 40.0742 26.0469C40.2694 25.8516 40.586 25.8516 40.7813 26.0469L44.6944 29.96L52.8741 21.7802C53.0694 21.585 53.3859 21.585 53.5812 21.7802Z",fill:"#1C1C1C"})]});function zs({onCreate:e}){const{trackClicked:t}=js(Ja.ChatHistoryCreate,{});return(0,s.jsxs)(o.k,{direction:"column",padding:6,gap:6,align:"center",justify:"center",flex:"1 1 0%",children:[Fs,(0,s.jsxs)(u.x,{children:[(0,s.jsx)(D.X,{as:"h3",variant:"heading-small",align:"center",children:"No chats yet"}),(0,s.jsx)(l.x,{as:"p",variant:"text-small",color:"base-subdued",align:"center",children:"You can find a list of your chats here."})]}),(0,s.jsx)(E.z,{onClick:()=>{t(),e()},children:"Start a chat"})]})}const Hs="_chatHistory_1wqog_1";function Us({onDelete:e,onSelect:t,onCreate:n}){const{chats:r}=us(),{today:a,last7Days:i,last30Days:l,monthly:c,yearly:d}=function(e){e.sort(((e,t)=>new Date(t.lastUpdatedTime).getTime()-new Date(e.lastUpdatedTime).getTime()));const t=new Date,n={today:[],last7Days:[],last30Days:[],monthly:{},yearly:{}};return e.forEach((e=>{const r=new Date(e.lastUpdatedTime),a=(t.getTime()-r.getTime())/864e5;if(a<=1)n.today.push(e);else if(a<=7)n.last7Days.push(e);else if(a<=30)n.last30Days.push(e);else{const a=r.getFullYear();if(t.getFullYear()===a){const t=r.toLocaleString("default",{month:"long"});n.monthly[t]||(n.monthly[t]=[]),n.monthly[t].push(e)}else n.yearly[a]||(n.yearly[a]=[]),n.yearly[a].push(e)}})),n}(r),u=[["Today",a],["Last 7 days",i],["Last 30 days",l],...Object.entries(c),...Object.entries(d)];return 0===r.length?(0,s.jsx)(zs,{onCreate:n}):(0,s.jsx)(o.k,{direction:"column",flex:"1",gap:3,className:Hs,children:u.filter((([,e])=>e.length>0)).map((([n,r])=>(0,s.jsx)(Bs,{title:n,chats:r,onDelete:e,onSelect:t},n)))})}const $s="_chatHistoryModal_jgsq2_1";function Gs({commandExecutor:e,coordinatorAgentId:t}){const{closeModal:n}=ls();return(0,s.jsx)("div",{className:$s,children:(0,s.jsx)(Us,{onDelete:n=>{const r={kind:Qa.Event,event:{kind:ts.ChatDeleted,chatId:n}},a={kind:Xa.MessageAgent,agentId:t,message:r};e.execute(a)},onSelect:r=>{n(),e.execute({kind:Xa.OpenCoordinatorAgent}),e.execute({kind:Xa.MessageAgent,agentId:t,message:{kind:Qa.Command,command:{kind:es.OpenChat,chatId:r}}})},onCreate:()=>{n(),e.execute({kind:Xa.OpenCoordinatorAgent})}})})}function Ws({commandExecutor:e,coordinatorAgentId:t}){const{showModal:n}=ls();return(0,s.jsx)(c.h,{variant:"tertiary",icon:wn.F_,size:"small",accessibilityLabel:"Your chats",onClick:()=>{n({content:(0,s.jsx)(Gs,{commandExecutor:e,coordinatorAgentId:t}),title:"Your chats"})}})}const Zs="_sidebar_tozyd_1",Vs="_goBrandingSidebar_tozyd_15",qs="_header_tozyd_19",Ks="_main_tozyd_24",Js="_footer_tozyd_31",Ys=({children:e,footer:t,includeChatHistory:n,commandExecutor:r,coordinatorAgentId:a,goBrandingEnabled:i})=>{const o=ia(Zs,i&&Vs);return(0,s.jsxs)("div",{className:o,children:[(0,s.jsx)("div",{className:qs,children:n&&(0,s.jsx)(Ws,{commandExecutor:r,coordinatorAgentId:a})}),(0,s.jsx)("div",{className:Ks,children:e}),t&&(0,s.jsx)("div",{className:Js,children:t})]})};var Xs,Qs,ei={exports:{}},ti=ei.exports={};function ni(){throw new Error("setTimeout has not been defined")}function ri(){throw new Error("clearTimeout has not been defined")}function ai(e){if(Xs===setTimeout)return setTimeout(e,0);if((Xs===ni||!Xs)&&setTimeout)return Xs=setTimeout,setTimeout(e,0);try{return Xs(e,0)}catch{try{return Xs.call(null,e,0)}catch{return Xs.call(this,e,0)}}}!function(){try{Xs="function"==typeof setTimeout?setTimeout:ni}catch{Xs=ni}try{Qs="function"==typeof clearTimeout?clearTimeout:ri}catch{Qs=ri}}();var si,ii=[],oi=!1,li=-1;function ci(){!oi||!si||(oi=!1,si.length?ii=si.concat(ii):li=-1,ii.length&&di())}function di(){if(!oi){var e=ai(ci);oi=!0;for(var t=ii.length;t;){for(si=ii,ii=[];++li<t;)si&&si[li].run();li=-1,t=ii.length}si=null,oi=!1,function(e){if(Qs===clearTimeout)return clearTimeout(e);if((Qs===ri||!Qs)&&clearTimeout)return Qs=clearTimeout,clearTimeout(e);try{Qs(e)}catch{try{return Qs.call(null,e)}catch{return Qs.call(this,e)}}}(e)}}function ui(e,t){this.fun=e,this.array=t}function gi(){}ti.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];ii.push(new ui(e,t)),1===ii.length&&!oi&&ai(di)},ui.prototype.run=function(){this.fun.apply(null,this.array)},ti.title="browser",ti.browser=!0,ti.env={},ti.argv=[],ti.version="",ti.versions={},ti.on=gi,ti.addListener=gi,ti.once=gi,ti.off=gi,ti.removeListener=gi,ti.removeAllListeners=gi,ti.emit=gi,ti.prependListener=gi,ti.prependOnceListener=gi,ti.listeners=function(e){return[]},ti.binding=function(e){throw new Error("process.binding is not supported")},ti.cwd=function(){return"/"},ti.chdir=function(e){throw new Error("process.chdir is not supported")},ti.umask=function(){return 0};var hi=ei.exports;const pi=6168==n.j?function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(hi):null;function mi(e){return(t,n,r)=>e(((e,r,a)=>{const s=n();t(e,r);const i=n();console.debug("[Assistant Store Logger]",{action:a??"anonymous",prevState:s,nextState:i})}),n,r)}const fi=({set:e,chatService:t})=>{const n=new Set;return{chatHistory:{chats:{},initialize:async()=>{const n=await t.getAllChatsMetadata();e((e=>({chatHistory:{...e.chatHistory,chats:n}})),!1,"initialize")},renameChat:(e,n)=>{t.updateChatMetadata(e,{name:n,userEditedTitle:!0})},deleteChat:e=>{t.deleteChat(e)},subscribeToChatEvents:()=>{const r=({id:t,metadata:n})=>{e((e=>({chatHistory:{...e.chatHistory,chats:{...e.chatHistory.chats,[t]:n}}})),!1,"handleChatMetadataUpdated")};n.add(t.updates.on("chatCreated",r)),n.add(t.updates.on("chatMetadataUpdated",r)),n.add(t.updates.on("chatDeleted",(({id:t})=>{e((e=>({chatHistory:{...e.chatHistory,chats:Object.fromEntries(Object.entries(e.chatHistory.chats).filter((([e])=>e!==t)))}})),!1,"handleChatDeleted")})))},unsubscribeFromChatEvents:()=>{n.forEach((e=>{e.dispose()})),n.clear()}}}};var xi=(e=>(e.default="default",e.text_selection="text_selection",e))(xi||{}),vi=(e=>(e.AppContent="app_content",e.TextSelection="text_selection",e))(vi||{});function bi(e){if(!e)return null;switch(e.type){case vi.AppContent:return e.context;case vi.TextSelection:return e.context.textSelection;default:return null}}function Ci(e){return!!e&&ki(e)&&"loaded"===e.status}const yi=(e,t)=>Object.fromEntries(Object.entries(e).filter((([e])=>e!==t))),ki=e=>!!e&&e.type===vi.AppContent,wi=e=>!!e&&e.type===vi.TextSelection,ji=e=>({id:e.id,type:vi.TextSelection,context:e,lastUpdated:new Date}),Si=({set:e,get:t,services:n})=>{var r,a;const s=new Set,i=null==(r=n.context.appContext)?void 0:r.getInitialContextId(),o=i?null==(a=n.context.appContext)?void 0:a.getAppContext(i):void 0,l=(null==o?void 0:o.textSelection)&&!(0,Aa.ID)(null==o?void 0:o.textSelection),c={};l&&(c[xi.text_selection]=ji(o));const d=[xi.default];return l&&d.push(xi.text_selection),{contextExtraction:{currentAppId:i??xi.default,contextSources:c,selectedContextSourceIds:d,documentContextState:{...n.context.documentContext.state},attachContext:(n,r)=>{const a=t().contextExtraction.contextSources[r];a&&(t().tracking.addContext(n,a.type),e((e=>({contextExtraction:{...e.contextExtraction,selectedContextSourceIds:[...e.contextExtraction.selectedContextSourceIds.slice(0,-1),r]}})),!1,"attachContext"))},detachCurrentContext:(n,r)=>{const a=t().contextExtraction.contextSources[r];a&&t().tracking.removeContext(n,a.type),e((e=>({contextExtraction:{...e.contextExtraction,selectedContextSourceIds:e.contextExtraction.selectedContextSourceIds.filter((e=>e!==r))}})),!1,"detachCurrentContext")},extractCurrentContext:t=>{var r;if(null!==t){e(function(e){return t=>({...t,contextExtraction:{...t.contextExtraction,currentAppId:e}})}(t),!1,"setCurrentAppId");try{const a=null==(r=n.context.appContext)?void 0:r.getAppContext(t);e(function(e){const t=e.id;return n=>({...n,contextExtraction:{...n.contextExtraction,contextSources:{...n.contextExtraction.contextSources,[t]:{type:vi.AppContent,appId:t,id:t,status:"loaded",context:e,error:null,lastUpdated:new Date}}}})}(a),!1,"extractCurrentContext")}catch(n){e(function(e,t){return n=>({...n,contextExtraction:{...n.contextExtraction,contextSources:{...n.contextExtraction.contextSources,[e]:{type:vi.AppContent,appId:e,id:e,status:"error",context:null,error:t,lastUpdated:new Date}}}})}(t,n),!1,"extractCurrentContext")}}else console.warn("No window ID provided to extractCurrentContext")},resetContextSource:()=>{const n=t().contextExtraction.selectedContextSourceIds.includes(xi.text_selection)&&!!t().contextExtraction.contextSources[xi.text_selection];e((e=>({contextExtraction:{...e.contextExtraction,selectedContextSourceIds:n?[xi.default,xi.text_selection]:[xi.default]}})),!1,"resetContextSource")},getCurrentAppContext:()=>function(e){const{contextSources:t,selectedContextSourceIds:n}=e.contextExtraction,r=n[n.length-1];if(r===xi.text_selection)return bi(t[r]);const a=e.contextExtraction.currentAppId,s=e.contextExtraction.contextSources[a];return s?bi(s):null}(t()),getSelectedContextId:()=>{const{selectedContextSourceIds:e}=t().contextExtraction;return e[e.length-1]},subscribeToExternalEvents:()=>{n.context.appContext&&(s.add(n.context.appContext.on("contextAvailable",(e=>{t().contextExtraction.extractCurrentContext(e.id)}))),s.add(n.context.appContext.on("contextInvalidated",(n=>{e((e=>({contextExtraction:{...e.contextExtraction,contextSources:yi(e.contextExtraction.contextSources,n),selectedContextSourceIds:t().contextExtraction.selectedContextSourceIds.filter((e=>e!==n))}})),!1,"removeAppContext")}))),s.add(n.context.appContext.on("selectionChange",(({context:n})=>{const{textSelection:r}=n,a=!r||(0,Aa.ID)(r),{[xi.text_selection]:s,...i}=t().contextExtraction.contextSources,o=a?i:{...i,[xi.text_selection]:ji(n)},l=t().contextExtraction.selectedContextSourceIds.filter((e=>e!==xi.text_selection)),c=a?l:[...l,xi.text_selection];e((e=>({contextExtraction:{...e.contextExtraction,contextSources:o,selectedContextSourceIds:c}})),!1,"textSelectionChange")}))),s.add(n.context.documentContext.on("documentContextStateUpdated",(()=>{e((e=>({contextExtraction:{...e.contextExtraction,documentContextState:{...n.context.documentContext.state}}})))}))))},unsubscribeFromExternalEvents:()=>{s.forEach((e=>{e.dispose()})),s.clear()},insertArtifact:(e,t,r)=>n.context.documentContext.state.isAvailable?n.context.documentContext.write(e,{chatId:t,messageId:r}):Promise.resolve()}}};var Ii,Ai,Ei,_i,Mi,Ri,Di,Ti,Oi,Li,Ni,Pi,Bi,Fi,zi,Hi,Ui,$i,Gi,Wi,Zi,Vi,qi,Ki;class Ji{constructor(e){Wa(this,_i),Wa(this,Ii,new Map),Wa(this,Ai,new a.v),Wa(this,Ei),Za(this,Ei,e)}register(e){if(!e.id)throw new Error("Option must have a non-empty id");Ga(this,Ii).set(e.id,e),Ga(this,Ai).emit("registered",e),Ga(this,Ai).emit("optionsChanged",this.getOptions())}unregister(e){if(!e)throw new Error("Option ID must be provided");Ga(this,Ii).delete(e)&&(Ga(this,Ai).emit("unregistered",e),Ga(this,Ai).emit("optionsChanged",this.getOptions()))}getOptions(){return Array.from(Ga(this,Ii).values())}resolveOptions(e){return this.getOptions().filter((t=>{try{return t.rule(e)}catch(e){return console.warn(`Error evaluating rule for option ${t.id}:`,e),!1}})).map((t=>Va(this,_i,Mi).call(this,t,e))).filter((e=>null!==e))}execute(e){Ga(this,Ei).execute(e.command)}on(e,t){return Ga(this,Ai).on(e,t)}dispose(){Ga(this,Ii).clear()}}Ii=new WeakMap,Ai=new WeakMap,Ei=new WeakMap,_i=new WeakSet,Mi=function(e,t){try{return{id:e.id,label:Va(this,_i,Ri).call(this,e.label,t),icon:Va(this,_i,Ri).call(this,e.icon,t),command:Va(this,_i,Ri).call(this,e.command,t)}}catch(t){return console.warn(`Error resolving option ${e.id}:`,t),null}},Ri=function(e,t){return"function"==typeof e?e(t):e};class Yi extends(6168==n.j?Ji:null){constructor(e,t){super(e),Wa(this,Li),Wa(this,Di,new a.v),Wa(this,Ti,new Map),Wa(this,Oi),Za(this,Oi,t),Va(this,Li,Ni).call(this)}updateAgentHandles(){for(const[e,t]of Ga(this,Oi).entries())Ga(this,Ti).has(e)||Va(this,Li,Pi).call(this,e,t);for(const e of Ga(this,Ti).keys())Ga(this,Oi).has(e)||Va(this,Li,Bi).call(this,e);Ga(this,Di).emit("optionsChanged",this.getOptions())}on(e,t){return Ga(this,Di).on(e,t)}getOptions(){return[...super.getOptions(),...Va(this,Li,Fi).call(this)]}resolveOptions(e){return this.getOptions().filter((t=>{try{return t.rule(e)}catch(e){return console.warn(`Error evaluating rule for option ${t.id}:`,e),!1}})).map((t=>Va(this,Li,Ui).call(this,t,e)))}dispose(){for(const e of Ga(this,Ti).values())e.forEach((e=>e.dispose()));Ga(this,Ti).clear()}}Di=new WeakMap,Ti=new WeakMap,Oi=new WeakMap,Li=new WeakSet,Ni=function(){for(const[e,t]of Ga(this,Oi).entries())Va(this,Li,Pi).call(this,e,t)},Pi=function(e,t){const n=[];n.push(t.on("registered",(t=>{Ga(this,Di).emit("registered",Va(this,Li,zi).call(this,t,e))}))),n.push(t.on("unregistered",(t=>{Ga(this,Di).emit("unregistered",Va(this,Li,Hi).call(this,t,e))}))),n.push(t.on("optionsChanged",(()=>{Ga(this,Di).emit("optionsChanged",this.getOptions())}))),Ga(this,Ti).set(e,n)},Bi=function(e){const t=Ga(this,Ti).get(e);t&&(t.forEach((e=>e.dispose())),Ga(this,Ti).delete(e))},Fi=function(){return Array.from(Ga(this,Oi).entries()).flatMap((([e,t])=>t.getOptions().map((t=>Va(this,Li,zi).call(this,t,e)))))},zi=function(e,t){return{...e,id:Va(this,Li,Hi).call(this,e.id,t)}},Hi=function(e,t){return`${t}/${e}`},Ui=function(e,t){try{return{...e,label:Va(this,Li,$i).call(this,e.label,t,"Untitled Option"),icon:Va(this,Li,$i).call(this,e.icon,t,void 0),command:Va(this,Li,$i).call(this,e.command,t,"function"==typeof e.command?e.command():e.command)}}catch(t){return console.warn(`Error resolving option ${e.id}:`,t),{id:e.id,label:"Error resolving option",icon:void 0,command:"function"==typeof e.command?e.command():e.command}}},$i=function(e,t,n){if("function"==typeof e)try{return e(t)}catch(e){return console.warn("Error resolving deferred value:",e),n}return e};class Xi{constructor(e,t){Wa(this,qi),Wa(this,Gi,new Map),Wa(this,Wi),Wa(this,Zi),Wa(this,Vi),Za(this,Zi,e),Za(this,Vi,t),Za(this,Wi,new Yi(t,Ga(this,Gi)))}getAgentHandle(e){return Va(this,qi,Ki).call(this,e)}getAgentIds(){return Array.from(Ga(this,Gi).keys())}getAgentCount(){return Ga(this,Gi).size}hasAgent(e){return e===Ga(this,Zi)||Ga(this,Gi).has(e)}removeAgent(e){if(e===Ga(this,Zi))throw new Error("Cannot remove the coordinator agent");const t=Ga(this,Gi).delete(e);return t&&Ga(this,Wi).updateAgentHandles(),t}clear(){Ga(this,Gi).clear(),Ga(this,Wi).updateAgentHandles()}dispose(){Ga(this,Gi).forEach((e=>e.dispose())),Ga(this,Gi).clear(),Ga(this,Wi).dispose()}}function Qi(e,t,n=[]){const r=i.useMemo((()=>new Xi(e,t)),[e,t]);return i.useEffect((()=>()=>{r.dispose()}),[r]),i.useEffect((()=>(n.forEach((e=>{var t;null==(t=e.contextualOptions)||t.forEach((t=>{r.getAgentHandle(e.id).register(function(e,t){return e.icon?e:{...e,icon:t.renderIcon({size:"medium"})}}(t,e))}))})),()=>{n.forEach((e=>{var t;null==(t=e.contextualOptions)||t.forEach((t=>{r.getAgentHandle(e.id).unregister(t.id)}))}))})),[n,r]),r}function eo(e,t){const[n,r]=i.useState({status:"loading",data:null,error:null});return i.useEffect((()=>{const t=new AbortController;return r({status:"loading",data:null,error:null}),e(t).then((e=>{t.signal.aborted||r({status:"success",data:e,error:null})})).catch((e=>{t.signal.aborted||r({status:"error",data:null,error:e})})),()=>{t.abort()}}),t),n}function to(e){switch(e){case"summarize":case"summarizeChat":case"summarizeEmail":case"summarizeWindow":return"Summarize this for me";case"improve":return"Improve this text";case"replyChat":return"Give me some ways I can reply to this chat";case"replyEmail":return"Give me some ways I can reply to this email";case"helpBrainstorm":return"Help me brainstorm";case"createResearchPlan":return"Create a research plan";case"makeFriendlier":return"Make it sound friendlier";case"makeNextStepsClear":return"Make next steps clear";case"shortenAndRemoveJargon":return"Shorten and remove jargon";case"translate":return"Translate this text";case"comprehension":return"Help me understand this text";default:(0,r.vE)(e)}}Gi=new WeakMap,Wi=new WeakMap,Zi=new WeakMap,Vi=new WeakMap,qi=new WeakSet,Ki=function(e){if(e===Ga(this,Zi))return Ga(this,Wi);if(!Ga(this,Gi).has(e)){const t=new Ji(Ga(this,Vi));Ga(this,Gi).set(e,t),Ga(this,Wi).updateAgentHandles()}const t=Ga(this,Gi).get(e);if(!t)throw new Error(`Agent handle for agent ${e} not found`);return t};const no={isAvailable:e=>(0,Ea.Ot)(e)&&"aiEditor"===e.app,getActions:()=>[{kind:"helpBrainstorm",icon:"chatAgent",label:"Start brainstorming",predefinedPrompt:to("helpBrainstorm")},{kind:"createResearchPlan",icon:"chatAgent",label:"Create research plan",predefinedPrompt:to("createResearchPlan")},{kind:"makeFriendlier",icon:"chatAgent",label:"Sound friendlier",predefinedPrompt:to("makeFriendlier")}]},ro={isAvailable:()=>!0,getActions:()=>[{kind:"summarizeWindow",icon:"summarize",label:"Summarize this page",predefinedPrompt:to("summarizeWindow")}]},ao=({isAvailable:e})=>({isAvailable:e,getActions:()=>[{kind:"summarizeWindow",icon:"summarize",label:"Summarize this document",predefinedPrompt:to("summarizeWindow")}]}),so=/docs\.google\.com/,io=ao({isAvailable:e=>{var t;if(!(0,Ea.Ot)(e))return!1;const n=e.origin&&so.test(e.origin),r=null==(t=e.title)?void 0:t.toLowerCase().includes("google docs");return n||r}}),oo=ao({isAvailable:e=>{var t;return(0,Ea.Ot)(e)&&"pages"===(null==(t=e.app)?void 0:t.toLowerCase())}}),lo=["microsoft word","word"],co=ao({isAvailable:e=>!!(0,Ea.Ot)(e)&&lo.some((t=>{var n;return(null==(n=e.app)?void 0:n.toLowerCase())===t}))}),uo=["microsoft excel","excel"],go=ao({isAvailable:e=>!!(0,Ea.Ot)(e)&&uo.some((t=>{var n;return(null==(n=e.app)?void 0:n.toLowerCase())===t}))}),ho=["coda docs","coda"],po=ao({isAvailable:e=>!!(0,Ea.Ot)(e)&&ho.some((t=>{var n;return null==(n=e.app)?void 0:n.toLowerCase().includes(t)}))}),mo=({isAvailable:e})=>({isAvailable:e,getActions:()=>[{kind:"summarizeEmail",icon:"summarize",label:"Summarize this thread",predefinedPrompt:to("summarizeEmail")}]}),fo=/mail\.google\.com/,xo=mo({isAvailable:e=>{var t;if(!(0,Ea.Ot)(e))return!1;const n=e.origin&&fo.test(e.origin),r="gmail"===(null==(t=e.app)?void 0:t.toLowerCase());return n||r}}),vo=[/outlook\.office\.com/,/outlook\.live\.com/,/outlook\.office365\.com/,/outlook\.office365\.us/],bo=["microsoft outlook","outlook"],Co=mo({isAvailable:e=>{if(!(0,Ea.Ot)(e))return!1;const t=e.origin&&vo.some((t=>t.test(e.origin))),n=bo.some((t=>{var n;return(null==(n=e.app)?void 0:n.toLowerCase())===t}));return t||n}}),yo=/mail\.yahoo\.com/,ko=mo({isAvailable:e=>{var t;if(!(0,Ea.Ot)(e))return!1;const n=e.origin&&yo.test(e.origin),r="yahoo mail"===(null==(t=e.app)?void 0:t.toLowerCase());return n||r}}),wo=mo({isAvailable:e=>{var t;return(0,Ea.Ot)(e)&&"mail"===(null==(t=e.app)?void 0:t.toLowerCase())}}),jo={isAvailable:e=>(0,Ea.Ot)(e)&&!!e.textSelection,getActions:()=>[{kind:"improve",icon:"improve",label:"Improve this text",predefinedPrompt:to("improve")},{kind:"summarize",icon:"summarize",label:"Summarize this text",predefinedPrompt:to("summarize")}]},So={isAvailable:e=>(0,Ea.Ot)(e)&&(e=>e.startsWith("https://superhuman.com/superhuman-go-intro"))(e.origin),getActions:()=>[{kind:"summarize",icon:"chatAgent",label:"Summarize this text",predefinedPrompt:to("summarize")},{kind:"shortenAndRemoveJargon",icon:"chatAgent",label:"Shorten and remove jargon",predefinedPrompt:to("shortenAndRemoveJargon")}]},Io={isAvailable:e=>(0,Ea.Ot)(e)&&/mail\.superhuman\.com/.test(e.origin),getActions:()=>[]},Ao=[jo,ko,Co,xo,io,no,wo,oo,co,go,po,So,Io,ro];class Eo{constructor(e=Ao){this._rules=e}resolve(e){if(!e)return Promise.resolve([]);const t=this._rules.find((t=>t.isAvailable(e)));return Promise.resolve(t?t.getActions(e):[])}}function _o(){const e=i.useRef(new Eo),t=function(){const{contextualOptionsRegistry:e}=ss(),[t,n]=i.useState([]);return i.useEffect((()=>{if(!e)return;n(e.resolveOptions());const t=e.on("optionsChanged",(()=>n(e.resolveOptions())));return()=>{t.dispose()}}),[e]),t}(),n=ds((e=>{const t=e.contextExtraction.currentAppId,n=e.contextExtraction.selectedContextSourceIds,r=e.contextExtraction.contextSources,a=n.includes(xi.text_selection)?r[xi.text_selection]:r[t];return ki(a)?a:wi(a)?{status:"loaded",error:null,context:a.context}:{status:"error",error:new Error("No context source found"),context:null}})),r=eo((async()=>"loaded"!==n.status?[]:e.current.resolve(n.context)),[n.status,n.context]),a=i.useMemo((()=>function(e,t){return"error"===e.status?{status:"error",error:e.error,actions:null}:"error"===t.status?{status:"error",error:t.error,actions:null}:"loading"===t.status?{status:"loading",error:null,actions:null}:{status:"loaded",error:null,actions:t.data}}(n,r)),[n,r]);if("loaded"===a.status){const e=[...a.actions,...Mo(t)].slice(0,4);return{...a,actions:e}}return a}function Mo(e){return e.map((e=>({kind:"assistantCommand",icon:e.icon,label:e.label,command:e.command})))}function Ro(){const{extractCurrentContext:e,subscribeToExternalEvents:t,unsubscribeFromExternalEvents:n,currentAppId:r}=ds((e=>({currentAppId:e.contextExtraction.currentAppId,extractCurrentContext:e.contextExtraction.extractCurrentContext,subscribeToExternalEvents:e.contextExtraction.subscribeToExternalEvents,unsubscribeFromExternalEvents:e.contextExtraction.unsubscribeFromExternalEvents})));i.useEffect((()=>(e(r),t(),()=>{n()})),[e,t,n,r])}const Do=({services:e,get:t,set:n})=>{const r=new Set;return{tracking:{responseStreamingStartTime:null,responseStreamingStarted:()=>{n((e=>({tracking:{...e.tracking,responseStreamingStartTime:performance.now()}})),!1,"responseStreamingStarted")},responseCopied:({chatId:t,responseLength:n,messageId:r})=>{e.tracking.trackEvent(Ya.ResponseCopied,{chatId:t,responseLength:n,messageId:r})},responseStreamed:({chatId:r,message:a,previousVersion:s})=>{var i;if("assistant"===a.type&&"final"!==a.kind||"assistant"!==a.type&&"error"!==a.type)return;const o=t().tracking.responseStreamingStartTime;if(o){const t="assistant"===a.type?a.content.length:(null==(i=null==s?void 0:s.content)?void 0:i.length)||0,l=a.type,c="error"===l?"failed":"loaded",d="error"===l?a.title:void 0,u="error"===l?a.errorType:void 0,g=performance.now()-o;e.tracking.trackEvent(Ya.ResponseStreamingCompleted,{chatId:r,messageId:a.id,durationMs:g,contentLength:t,result:c,error:d,errorType:u}),n((e=>({tracking:{...e.tracking,responseStreamingStartTime:null}})),!1,"responseStreamed")}},responseStoppedByUser:({chatId:r,lastMessage:a})=>{const s=t().tracking.responseStreamingStartTime,i=s?performance.now()-s:void 0;a&&e.tracking.trackEvent(Ya.ResponseStoppedByUser,{chatId:r,payload:{messageId:a.id,durationMs:i,contentLength:a.content.length||0}}),n((e=>({tracking:{...e.tracking,responseStreamingStartTime:null}})),!1,"responseStoppedByUser")},messageSubmitted:({chatId:t,responseMessageId:n,content:r,messageOptions:a,messageCountBeforeSend:s})=>{a.predefinedPromptKind?e.tracking.trackEvent(Ya.PredefinedPromptSubmitted,{chatId:t,contextualActionKind:a.predefinedPromptKind,payload:{messageId:n,messageCount:s}}):e.tracking.trackEvent(Ya.MessageSubmitted,{chatId:t,messageLength:r.length,payload:{messageId:n,messageCount:s}})},responseInserted:({chatId:t,responseLength:n,messageId:r})=>{e.tracking.trackEvent(Ya.ResponseInserted,{chatId:t,responseLength:n,messageId:r})},trackComponentEvent:({componentId:t,event:n,detail:r})=>{e.tracking.trackEvent(Ya.ComponentInteraction,{componentId:t,event:n,detail:r})},subscribeToChatEvents:()=>{r.add(e.chat.updates.on("chatMessageStreamed",(({id:e,message:n,previousVersion:r})=>{t().tracking.responseStreamed({chatId:e,message:n,previousVersion:r})}))),r.add(e.chat.updates.on("userMessageSent",(({id:e,responseMessageId:n,content:r,messageOptions:a,messageCountBeforeSend:s})=>{t().tracking.responseStreamingStarted(),t().tracking.messageSubmitted({chatId:e,responseMessageId:n,content:r,messageOptions:a,messageCountBeforeSend:s})})))},addContext:(t,n)=>{var r,a;null==(a=(r=e.tracking).addContext)||a.call(r,t,n)},removeContext:(t,n)=>{var r,a;null==(a=(r=e.tracking).removeContext)||a.call(r,t,n)},unsubscribeFromChatEvents:()=>{r.forEach((e=>{e.dispose()})),r.clear()}}}},To=({set:e,get:t,services:n})=>{const r=new Map;return{chat:{activeChats:{},createNewChat:t=>{var r,a;const s=null==(a=(r=n.chat).createDraft)?void 0:a.call(r);e((e=>({chat:{...e.chat,activeChats:{...e.chat.activeChats,[t]:{id:s?s.metadata.id:"",messages:s?s.messages:[],draft:s}}}})),!1,"createNewChat")},setActiveChat:async(r,a)=>{var s;if(!n.chat.doesChatExist(a))return void t().chat.createNewChat(r);if((null==(s=t().chat.activeChats[r])?void 0:s.id)===a)return;const i=await n.chat.getChatMessages(a);e((e=>({chat:{...e.chat,activeChats:{...e.chat.activeChats,[r]:{id:a,messages:i,draft:void 0}}}})),!1,"setActiveChat")},sendMessage:(r,a,s={},i)=>{const o=t().chat.activeChats[r];if(!o)return;let l=o.id;(o.draft||!l)&&(l=n.chat.createChat(o.draft),e((e=>({chat:{...e.chat,activeChats:{...e.chat.activeChats,[r]:{id:l,messages:[],draft:void 0}}}})),!1,"sendMessage")),n.chat.sendMessage(l,a,s,i)},sendSystemMessage:(e,n)=>{t().chat.sendMessage(e,null,{systemMessageMetadata:n})},stopStreamingResponse:e=>{var r;const a=null==(r=t().chat.activeChats[e])?void 0:r.id;a&&n.chat.stopStreamingResponse(a)},retryMessage:e=>{var r;const a=null==(r=t().chat.activeChats[e])?void 0:r.id;a&&n.chat.retryMessage(a)},subscribeToChatEvents:a=>{r.has(a)||r.set(a,new Set);const s=r.get(a);null==s||s.add(n.chat.updates.on("chatMessagesUpdated",(({id:n,messages:r})=>{var s;n===(null==(s=t().chat.activeChats[a])?void 0:s.id)&&e((e=>({chat:{...e.chat,activeChats:{...e.chat.activeChats,[a]:{...e.chat.activeChats[a],messages:r}}}})),!1,"chatMessagesUpdated")})))},unsubscribeFromChatEvents:e=>{const t=r.get(e);t&&(t.forEach((e=>{e.dispose()})),r.delete(e))}}}};var Oo,Lo=Object.defineProperty,No=Object.defineProperties,Po=Object.getOwnPropertyDescriptors,Bo=Object.getOwnPropertySymbols,Fo=Object.prototype.hasOwnProperty,zo=Object.prototype.propertyIsEnumerable,Ho=(e,t,n)=>t in e?Lo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Uo=(e=>(e[e.TRACE=0]="TRACE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.FATAL=5]="FATAL",e[e.OFF=6]="OFF",e))(Uo||{});(e=>{e.fromString=function(e){switch(e){case"TRACE":return 0;case"DEBUG":return 1;case"INFO":return 2;case"WARN":return 3;case"ERROR":return 4;case"FATAL":return 5;case"OFF":return 6;default:throw new TypeError(`Unrecognized log level string '${e}'`)}}})(Uo||(Uo={})),(e=>{var t;function n(e){return t=>{let n=0;if(null==t||0===t.length)return e;for(let e=0;e<t.length;e++)n=t.charCodeAt(e)+((n<<5)-n),n&=n;return n=(n%50+50)%50,((e,t)=>No(e,Po(t)))(((e,t)=>{for(var n in t||(t={}))Fo.call(t,n)&&Ho(e,n,t[n]);if(Bo)for(var n of Bo(t))zo.call(t,n)&&Ho(e,n,t[n]);return e})({},e),{lightness:e.lightness-n})}}(t=e.HSL||(e.HSL={})).getContrastTextColor=e=>({hue:0,saturation:0,lightness:e.lightness>50?0:100}),t.toString=e=>`hsl(${e.hue}, ${e.saturation}%, ${e.lightness}%)`,(e=>{e.base={hue:43,saturation:74,lightness:66},e.getColor=n(e.base)})(e.Model||(e.Model={})),(e=>{e.base={hue:12,saturation:76,lightness:61},e.getColor=n(e.base)})(e.ViewModel||(e.ViewModel={})),(e=>{e.base={hue:173,saturation:58,lightness:39},e.getColor=n(e.base)})(e.Manager||(e.Manager={}))})(Oo||(Oo={}));var $o=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof self<"u"?self:{},Go={};!function(e){var t=$o&&$o.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,a=0,s=t.length;a<s;a++)(r||!(a in t))&&(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(e,"__esModule",{value:!0}),e.dual=e.getEndomorphismMonoid=e.SK=e.hole=e.constVoid=e.constUndefined=e.constNull=e.constFalse=e.constTrue=e.unsafeCoerce=e.apply=e.getRing=e.getSemiring=e.getMonoid=e.getSemigroup=e.getBooleanAlgebra=void 0,e.identity=n,e.constant=r,e.flip=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.length>1?e(t[1],t[0]):function(n){return e(n)(t[0])}}},e.flow=a,e.tuple=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},e.increment=function(e){return e+1},e.decrement=function(e){return e-1},e.absurd=s,e.tupled=function(e){return function(t){return e.apply(void 0,t)}},e.untupled=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e(t)}},e.pipe=function(e,t,n,r,a,s,i,o,l){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return a(r(n(t(e))));case 6:return s(a(r(n(t(e)))));case 7:return i(s(a(r(n(t(e))))));case 8:return o(i(s(a(r(n(t(e)))))));case 9:return l(o(i(s(a(r(n(t(e))))))));default:for(var c=arguments[0],d=1;d<arguments.length;d++)c=arguments[d](c);return c}},e.not=function(e){return function(t){return!e(t)}};e.getBooleanAlgebra=function(e){return function(){return{meet:function(t,n){return function(r){return e.meet(t(r),n(r))}},join:function(t,n){return function(r){return e.join(t(r),n(r))}},zero:function(){return e.zero},one:function(){return e.one},implies:function(t,n){return function(r){return e.implies(t(r),n(r))}},not:function(t){return function(n){return e.not(t(n))}}}}};e.getSemigroup=function(e){return function(){return{concat:function(t,n){return function(r){return e.concat(t(r),n(r))}}}}};e.getMonoid=function(t){var n=(0,e.getSemigroup)(t);return function(){return{concat:n().concat,empty:function(){return t.empty}}}};e.getSemiring=function(e){return{add:function(t,n){return function(r){return e.add(t(r),n(r))}},zero:function(){return e.zero},mul:function(t,n){return function(r){return e.mul(t(r),n(r))}},one:function(){return e.one}}};e.getRing=function(t){var n=(0,e.getSemiring)(t);return{add:n.add,mul:n.mul,one:n.one,zero:n.zero,sub:function(e,n){return function(r){return t.sub(e(r),n(r))}}}};function n(e){return e}function r(e){return function(){return e}}function a(e,t,n,r,a,s,i,o,l){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return n(t(e.apply(this,arguments)))};case 4:return function(){return r(n(t(e.apply(this,arguments))))};case 5:return function(){return a(r(n(t(e.apply(this,arguments)))))};case 6:return function(){return s(a(r(n(t(e.apply(this,arguments))))))};case 7:return function(){return i(s(a(r(n(t(e.apply(this,arguments)))))))};case 8:return function(){return o(i(s(a(r(n(t(e.apply(this,arguments))))))))};case 9:return function(){return l(o(i(s(a(r(n(t(e.apply(this,arguments)))))))))}}}function s(e){throw new Error("Called `absurd` function which should be uncallable")}e.apply=function(e){return function(t){return t(e)}},e.unsafeCoerce=n,e.constTrue=r(!0),e.constFalse=r(!1),e.constNull=r(null),e.constUndefined=r(void 0),e.constVoid=e.constUndefined,e.hole=s;e.SK=function(e,t){return t};e.getEndomorphismMonoid=function(){return{concat:function(e,t){return a(e,t)},empty:n}};e.dual=function(e,n){var r="number"==typeof e?function(t){return t.length>=e}:e;return function(){var e=Array.from(arguments);return r(arguments)?n.apply(this,e):function(r){return n.apply(void 0,t([r],e,!1))}}}}(Go);var Wo,Zo,Vo=Object.defineProperty,qo=Object.defineProperties,Ko=Object.getOwnPropertyDescriptors,Jo=Object.getOwnPropertySymbols,Yo=Object.prototype.hasOwnProperty,Xo=Object.prototype.propertyIsEnumerable,Qo=(e,t,n)=>t in e?Vo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;(e=>{e.isErrorLike=function(e){const t=e;return null!=t&&(void 0!==t.message&&void 0!==t.name||void 0!==t.stack)}})(Wo||(Wo={})),(e=>{function t(e,r){if(null==e||"number"==typeof e||"string"==typeof e||"boolean"==typeof e)return e;if("object"==typeof e){if(e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e.toString();if(e instanceof Set)return Array.from(e,(e=>t(e,r)));if(e instanceof Map)return Array.from(e).reduce(((e,[n,a])=>((e,t)=>qo(e,Ko(t)))(((e,t)=>{for(var n in t||(t={}))Yo.call(t,n)&&Qo(e,n,t[n]);if(Jo)for(var n of Jo(t))Xo.call(t,n)&&Qo(e,n,t[n]);return e})({},e),{[n]:t(a,r)})),{});if(-1===r.indexOf(e)){r.push(e);const t=n(e,r,Wo.isErrorLike(e));return Object.keys(t).length>0?t:e}}}function n(e,n,r){if(!e)return{};const a={};return(r?Object.getOwnPropertyNames:Object.keys)(e).forEach((r=>{const s=e[r];a[r]=t(s,n)})),a}e.fromAny=function(e){return n(e,[e],Wo.isErrorLike(e))}})(Zo||(Zo={}));const el=/^(?!\.[\w])[\w.]*\w$/;function tl(e){if(""===e)throw new Error("Empty name");if(!el.test(e))throw new Error(`Invalid name: ${e}. Should be hierarchical dot separated string and may contain only word characters)`)}const nl=function(e="(nomessage)"){Error.call(this,e),this.stack=(new Error).stack,this.message=e,this.name=this.constructor.name};nl.prototype=Object.create(Error.prototype);let rl=class extends nl{};class al{constructor(e,t){if(this.messageCount=e,this.timeframe=t,e<1)throw new rl("messagesCount should be > 1");if(t<=0)throw new rl("timeframe should be > 0");this._allowance=e,this._lastChecked=Date.now()}hit(){const e=Date.now(),t=e-this._lastChecked;return this._lastChecked=e,this._allowance+=t*(this.messageCount/this.timeframe),this._allowance>this.messageCount&&(this._allowance=this.messageCount),!(this._allowance<1)&&(this._allowance-=1,!0)}toString(){return`[ messageCount: ${this.messageCount}, timeframe: ${this.timeframe}, allowance: ${Math.trunc(1e3*this._allowance)/1e3}, _lastCheck: ${this._lastChecked}]`}}(e=>{e.RateLimitIndicator=class{constructor(e,t){if(this._limiter=e,this._cooldownTime=t,this._lastLimiting=0,this._aboveThreshold=!1,t<0)throw new rl("cooldownTime should be non-negative")}hit(){const e=this._limiter.hit();let t=!1;return e?this._aboveThreshold&&Date.now()-this._cooldownTime>this._lastLimiting&&(this._aboveThreshold=!1,t=!0):(this._lastLimiting=Date.now(),this._aboveThreshold||(this._aboveThreshold=!0,t=!0)),{allow:e,aboveThreshold:this._aboveThreshold,wasTriggered:t}}}})(al||(al={}));class sl{constructor(e,t,n,r="."){this.name=e,this.timersSink=t,this.countersSink=n,this._nameSeparator=r,tl(e)}getMetric(e){return this.createChild(e)}getTimer(e){return this.createChild(e)}getCounter(e){return this.createChild(e)}get parent(){const e=this.name.lastIndexOf(this._nameSeparator),t=this.name.substring(0,-1===e?0:e);return""===t?void 0:new sl(t,this.timersSink,this.countersSink,this._nameSeparator)}get root(){const e=this.name.indexOf(this._nameSeparator),t=this.name.substring(0,-1===e?0:e);return""===t?this:new sl(t,this.timersSink,this.countersSink,this._nameSeparator)}createName(e){return this.name+this._nameSeparator+e}start(){const e=Date.now(),t=this;return{stop(){t.recordTime(Date.now()-e)}}}recordTime(e){this.timersSink(this.name,e)}timing(e){const t=this.start();try{return e()}finally{try{t.stop()}catch{}}}increment(e=1){this.countersSink(this.name,e)}decrement(e=1){this.increment(-e)}createChild(e){return new sl(this.createName(e),this.timersSink,this.countersSink,this._nameSeparator)}}let il=class extends sl{constructor(e){super("MP",((t,n)=>e("TIMER: "+t+" = "+n)),((t,n)=>e("COUNTER: "+t+" = "+n)),".")}},ol=class e{static getRootMetric(){return null==e._metricsRoot&&(console.warn("[WARNING] Using default timeseries implementation."),e._metricsRoot=new il(console.log)),e._metricsRoot}static configure(t){e._metricsRoot=t}},ll=class e{constructor(e,t,n,r,a,s,i,o){this.level=e,this.message=t,this.logger=n,this.timestamp=r,this.exception=a,this.extra=s,this.context=i,this.logColor=o}dropContext(){return new e(this.level,this.message,this.logger,this.timestamp,this.exception,this.extra,this.logColor)}addContext(t){return new e(this.level,this.message,this.logger,this.timestamp,this.exception,this.extra,t,this.logColor)}changeLogger(t){return new e(this.level,this.message,t,this.timestamp,this.exception,this.extra,this.context)}};(e=>{e.show=e=>`[${e.logger}]: ${Uo[e.level]} : ${e.message} ${e.extra?JSON.stringify(e.extra):""} ${e.exception?JSON.stringify(e.exception):""}`})(ll||(ll={}));let cl=class e extends sl{constructor(e,t){super(e,((e,n)=>t("TIMER: "+e+" = "+n)),((e,n)=>t("COUNTER: "+e+" = "+n)),"_"),this.name=e,this._fn=t}setContext(e){return console.log(this.name,e),this}getMetric(e){return this.createChild(e)}getCounter(e){return this.createChild(e)}getTimer(e){return this.createChild(e)}createChild(t){return new e(this.createName(t),this._fn)}createName(e){return this.name+"_"+e}},dl=class e{static getRootMetric(){return null==e._femetricsRoot&&(console.warn("[WARNING] Using default femetrics timeseries implementation."),e._femetricsRoot=new cl("FM",console.log)),e._femetricsRoot}static configure(t){e._femetricsRoot=t}};class ul{constructor(e,t,n,r){this.name=e,this.level=t,this.context=n,this.logColor=r,tl(e)}isEnabled(e){return e>=this.level}handler(e,t){return{trace:n=>{throw this.trace(e,n,t),n},debug:n=>{throw this.debug(e,n,t),n},info:n=>{throw this.info(e,n,t),n},warn:n=>{throw this.warn(e,n,t),n},error:n=>{throw this.error(e,n,t),n},fatal:n=>{throw this.fatal(e,n,t),n}}}trace(e,t,n){this.log(Uo.TRACE,e,t,n)}debug(e,t,n){this.log(Uo.DEBUG,e,t,n)}info(e,t,n){this.log(Uo.INFO,e,t,n)}warn(e,t,n){this.log(Uo.WARN,e,t,n)}error(e,t,n){this.log(Uo.ERROR,e,t,n)}fatal(e,t,n){this.log(Uo.FATAL,e,t,n)}log(e,t,n,r){this.isEnabled(e)&&(n&&r||Wo.isErrorLike(n)?this.logImpl(e,t,n,r):this.logImpl(e,t,void 0,r??n))}}class gl{constructor(e){this.parent=e,this._context=void 0}get(){const e=this.parent&&this.parent.get(),t=this._context;return e||t?Object.assign({},e,t):void 0}add(e){this._context=Object.assign({},this._context,e)}remove(e){this._context&&e.forEach((e=>{e in this._context&&delete this._context[e]}))}clear(){this._context=void 0}}class hl extends ul{constructor(e,t,n,r,a){super(e,t,r||new gl,a),this.appender=n,this.logColor=a}getLogger(e,t,n){return new hl(this.name+"."+e,t??this.level,this.appender,new gl(this.context),n)}logImpl(e,t,n,r){const a=new ll(e,t,this.name,Date.now(),n,r,this.context.get());try{this.appender(a)}catch(e){console.trace("Failed processing log event",e);try{pl.printToConsole(a)}catch(e){console.error("No luck. Can't print the event",e)}}}}class pl extends hl{constructor(e,t,n){super(e,t,(e=>e.level>=t&&pl.printToConsole(e)),n)}static printToConsole(e){let t=console.log;t=e.level<=Uo.TRACE||e.level<=Uo.DEBUG?"function"==typeof console.debug?console.debug:console.log:e.level<=Uo.INFO?console.log:e.level<=Uo.WARN?console.warn:console.error,t.apply(console,(e.logColor?[...pl._getStyledLoggerName(e),`${Uo[e.level]} : ${e.message}`,e.exception,e.extra]:[`[${e.logger}]: ${Uo[e.level]} : ${e.message}`,e.exception,e.extra]).filter((e=>!!e)))}static _getStyledLoggerName(e){const t=Go.pipe(Oo.HSL.getContrastTextColor(e.logColor),Oo.HSL.toString),n=Oo.HSL.toString(e.logColor);return[`%c${e.logger}`,`color:${t};padding:4px;background:${n};border-radius:4px`]}}class ml{static getRootLogger(){return null==ml._rootLogger&&(ml._rootLogger=ml._createDefaultRootLogger(),ml._rootLogger.warn("Using DEFAULT root logger")),ml._rootLogger}static configure(e){ml._rootLogger=e,ml._rootLogger.debug("ROOT logger changed",e)}static _createDefaultRootLogger(){return new pl("DEFAULT",Uo.DEBUG)}}const fl=Uo;var xl;(e=>{const t=class e{static configureLogLevelGetter(t){e._getLogLevel=t}static get root(){return ml.getRootLogger()}static getLogger(t,n,r){const a=e._getLogLevel(t,n),s=e.root.getLogger(t,e._getLogLevel(t,n),r);return n!==a&&s.debug(`Logger "${t}" initialized with level "${null!=a&&fl[a]}" instead of "${null!=n&&fl[n]}"`),s}};t._getLogLevel=(e,t)=>t;let n=t;e.Logging=n;e.TimeSeries=class{static get root(){return ol.getRootMetric()}static get rootFemetrics(){return dl.getRootMetric()}}})(xl||(xl={}));const vl=({services:e,set:t})=>{const n=n=>{if(e.agentDirectory)try{const r=e.agentDirectory.listInstalledAgents();t((e=>({agentDirectory:{...e.agentDirectory,installedAgents:r.map((e=>({id:e.id,title:e.name,hasData:e.hasData,renderPanel:e.renderPanel,renderIcon:bl(e),isPaidAgentFreeInBeta:e.isPaidAgentFreeInBeta})))}})),!1,n)}catch(e){xl.Logging.getLogger("agentDirectorySlice").error("Error updating installed agent state:",e)}};return{agentDirectory:{installedAgents:[],subscribeToAgentStateChanges:()=>{if(!e.agentDirectory)return Cl;const r=e.agentDirectory.onStateUpdated((()=>n("agentStateChanged"))),a=e.agentDirectory.onInstalledAgentsOrderChanged((e=>{t((t=>{const n=new Map(t.agentDirectory.installedAgents.map((e=>[e.id,e]))),r=e.map((e=>n.get(e))).filter((e=>void 0!==e));return{agentDirectory:{...t.agentDirectory,installedAgents:r}}}),!1,"handleInstalledAgentsOrderChanged")}));return()=>{r(),a()}},loadInstalledAgents:()=>{n("loadInstalledAgents")}}}},bl=e=>({size:t="large",goBrandingEnabled:n=!1})=>(0,s.jsx)(sr,{agent:e,size:t,goBrandingEnabled:n}),Cl=()=>{};var yl=(e=>(e.SuggestionsSummary="suggestionsSummary",e.AcceptAllSuggestions="acceptAllSuggestions",e.NativeInstallFlow="nativeInstallFlow",e.AgentDirectory="agentDirectory",e.FirstPartyPackAgents="firstPartyPackAgents",e.GoBranding="goBranding",e.ContextSelectorRedesign="contextSelectorRedesign",e))(yl||{});const kl={acceptAllSuggestions:!1,agentDirectory:!1,firstPartyPackAgents:!1,goBranding:!1,nativeInstallFlow:!1,suggestionsSummary:!1,contextSelectorRedesign:!1};class wl{constructor(e={}){this.togglesState={...kl,...e}}isFeatureEnabled(e){return this.togglesState[e]}}const jl=({services:e})=>({featureToggle:e.featureToggle??new wl}),Sl=({set:e,services:t})=>{const n=new Set;return{inProductMessaging:{messages:{},get:async(n,r)=>{var a;const s=await(null==(a=t.inProductMessaging)?void 0:a.get(n,r));e((e=>({inProductMessaging:{...e.inProductMessaging,messages:{...e.inProductMessaging.messages,[n]:s}}})),!1,"get")},trackImpression:(e,n,r)=>{var a;null==(a=t.inProductMessaging)||a.trackImpression(e,n,r)},subscribeToUpdates:()=>{var r;const a=null==(r=t.inProductMessaging)?void 0:r.on("update",(({slot:t,message:n})=>{e((e=>({inProductMessaging:{...e.inProductMessaging,messages:{...e.inProductMessaging.messages,[t]:n}}})))}));a&&n.add(a)},unsubscribeFromUpdates:()=>{n.forEach((e=>{e.dispose()})),n.clear()}}}},Il=({services:e})=>{var t,n,r,a;return{suggestions:{onUpdate:t=>{var n;return(null==(n=e.suggestions)?void 0:n.on("update",t))??{dispose:Al}},focusSuggestions:(null==(t=e.suggestions)?void 0:t.focusSuggestions)??Al,hasSuggestion:(null==(n=e.suggestions)?void 0:n.hasSuggestion)??(()=>!1),applyAllSuggestions:(null==(r=e.suggestions)?void 0:r.applyAllSuggestions)??Al,dismissAllSuggestions:(null==(a=e.suggestions)?void 0:a.dismissAllSuggestions)??Al}}},Al=()=>{};function El({chatService:e,contextService:t,trackingService:n,featureToggleService:r,suggestionsService:a,agentDirectoryService:o,inProductMessagingService:l,children:c}){const d=(0,i.useMemo)((()=>(e=>{const t="dev"===pi.env.NODE_ENV?mi:e=>e;return(0,Ia.M)()(t(((t,n)=>({...fi({chatService:e.chat,set:t}),...Do({services:e,set:t,get:n}),...To({services:e,set:t,get:n}),...jl({services:e}),...Il({services:e}),...vl({services:e,set:t,get:n}),...Sl({services:e,set:t}),...Si({services:e,set:t,get:n})}))))})({chat:e,context:t,tracking:n,featureToggle:r,suggestions:a,agentDirectory:o,inProductMessaging:l})),[e,t,n,r,a,o,l]);return(0,s.jsx)(cs.Provider,{value:d,children:(0,s.jsx)(_l,{children:c})})}function _l({children:e}){return(()=>{const{subscribeToAgentStateChanges:e,loadInstalledAgents:t}=vs();(0,i.useEffect)((()=>{t();const n=e();return()=>{n()}}),[t,e])})(),function(){const{subscribeToChatEvents:e,unsubscribeFromChatEvents:t,initialize:n}=us();(0,i.useEffect)((()=>(n(),e(),()=>{t()})),[n,e,t])}(),function(){const{subscribeToUpdates:e,unsubscribeFromUpdates:t}=ds((e=>e.inProductMessaging));(0,i.useEffect)((()=>(e(),()=>{t()})),[e,t])}(),function(){const{subscribeToChatEvents:e,unsubscribeFromChatEvents:t}=ps();(0,i.useEffect)((()=>(e(),()=>{t()})),[e,t])}(),e}function Ml(){var e;return null==(e=(0,i.useContext)(Cs))?void 0:e.experimental_agentDirectory}class Rl{constructor(e){this.assistantTrackingService=e}trackEvent(e,t){this.assistantTrackingService.trackEvent(e,t)}}function Dl({commandExecutor:e,selectedAgentId:t,coordinatorAgentId:n}){const{showModal:r,closeModal:a,isOpen:o}=ls(),l=Ml(),c=ys(),d=ms(),u=d.isFeatureEnabled(yl.NativeInstallFlow),g=d.isFeatureEnabled(yl.FirstPartyPackAgents),h=xl.Logging.getLogger("useOpenAgentDirectory"),p=d.isFeatureEnabled(yl.GoBranding),m=(0,i.useCallback)((t=>{if((0,kn.kq)(t)&&(null==l||!l.isAgentInstalled(t)))return void h.info("Agent not installed but called to open from agent directory");let n=t;if(g&&(0,kn.kq)(t)){const e=(0,kn.HS)(t);e&&(n=e)}e.execute({kind:Xa.OpenAgent,agentId:n}),a()}),[l,g,e,a,h]),f=(0,i.useCallback)((()=>{a()}),[a]),x=(0,i.useCallback)((e=>{if(!l||o)return;const a=c?new Rl(c):void 0;r({content:(0,s.jsx)(sa,{agentDirectoryService:l,trackingService:a,onOpenAgent:m,closeModal:f,initialView:e,shouldUseNativeInstallFlow:u,isFirstPartyPackAgentsEnabled:g,selectedAgentId:t&&(0,kn.d1)(t)?t:void 0,coordinatorAgentId:n&&(0,kn.d1)(n)?n:void 0,goBrandingEnabled:p}),hideDefaultHeader:!0})}),[l,c,r,f,m,u,g,o,t,n,p]);return{openAgentDirectory:(0,i.useCallback)((()=>{x({type:Ln.Directory})}),[x]),openAgentDirectoryModal:x,handleOpenAgent:m,isOpen:o}}var Tl=(e=>(e.Agent="agent",e.Directory="directory",e))(Tl||{});function Ol(e){return"agent"===e.type}const Ll={agentNamesOverlay:"_agentNamesOverlay_1odfg_1",agentName:"_agentName_1odfg_1",agentNameClickable:"_agentNameClickable_1odfg_27"},Nl=({allItems:e,hoveredAgentId:t,selectedAgentId:n,showTopChevron:r,showBottomChevron:a,onHover:o,onSelectItem:c,onScroll:d,scrollContainerRef:u,closeOnAgentReselect:g=!0,onOpenAgentDirectory:h})=>{const p=(0,i.useRef)(null),{trackingRef:m}=ks(Ja.AgentBenchLabelsOverlay,{agentId:t??""}),f=(0,i.useCallback)((e=>{p.current=e,m(e)}),[]),{overlayHeight:x,marginTop:v,marginBottom:b}=(({scrollContainerRef:e,overlayRef:t,showTopChevron:n,showBottomChevron:r})=>{const[a,s]=(0,i.useState)(0),{marginTop:o,marginBottom:l}=(0,i.useMemo)((()=>({marginTop:n?48:4,marginBottom:r?48:4})),[n,r]);return(0,i.useEffect)((()=>{const n=e.current,r=t.current;if(!n||!r)return;s(n.clientHeight);const a=()=>{r.scrollTop=n.scrollTop};return a(),n.addEventListener("scroll",a,{passive:!0}),()=>{n.removeEventListener("scroll",a)}}),[e,n,r,t]),{overlayHeight:a,marginTop:o,marginBottom:l}})({scrollContainerRef:u,overlayRef:p,showTopChevron:r,showBottomChevron:a});return u.current?(0,s.jsx)("div",{ref:f,onScroll:()=>{var e;return d((null==(e=p.current)?void 0:e.scrollTop)??0)},className:Ll.agentNamesOverlay,"data-testid":"agent-names-overlay",style:{maxHeight:x,marginTop:v,marginBottom:b},children:e.map((e=>{const r=Ol(e)?e.item.id:e.id,a=Ol(e)?e.item.title:e.title,i=r===t,d=r===n,u=g||!d,p=!!Ol(e)&&!!e.item.experimental_disabledReason,m=ia(Ll.agentName,{[Ll.agentNameHovered]:i,[Ll.agentNameSelected]:d,[Ll.agentNameSubdued]:!i&&!d,[Ll.agentNameClickable]:u&&!p});return(0,s.jsx)("div",{className:Ll.agentName,style:{minHeight:"32px",marginBottom:"8px"},onMouseEnter:()=>o(r),onClick:()=>{!function(e){return"directory"===e.type}(e)?c(r):null==h||h()},children:(0,s.jsx)(l.x,{as:"span",variant:"text-xsmall",weight:"medium",color:i||d?"base-default":"base-subdued",className:m,children:a})},r)}))}):null};var Pl=(e=>(e.AgentNoticeCard="AgentNoticeCard",e.AddDataSourcePopover="AddDataSourcePopover",e.FindMoreAgentsPopover="FindMoreAgentsPopover",e.AgentHeaderNoticeCard="AgentHeaderNoticeCard",e))(Pl||{});const Bl=e=>{var t;const n=null==(t=(0,i.useContext)(Cs))?void 0:t.pushedContentService,[r,a]=(0,i.useState)(void 0);return(0,i.useEffect)((()=>{const t=null==n?void 0:n.getCollection(e).view((e=>Ma.$.values(e))).view((e=>[...e].sort(((e,t)=>t.id-e.id)).map((e=>({id:e.id,promotion:e.notification.notificationElement.promotion}))).find((e=>void 0!==e.promotion)))).subscribe((e=>{const t=e&&e.promotion?{id:e.id,...e.promotion}:void 0;a(t)}));return()=>null==t?void 0:t.unsubscribe()}),[e,n]),r},Fl=(e,t)=>{const[n]=(0,i.useState)(e);(0,i.useEffect)((()=>{e!==n&&t()}),[e,n,t])},zl=({promotion:e,commandExecutor:t,selectedAgentId:n})=>{const[r,a]=(0,i.useState)(!0);Fl(n,(()=>a(!1)));const c={promotedAgentId:(null==e?void 0:e.agentId)??""},{trackClicked:d}=js(Ja.DiscoverabilityPanelFooterAcceptButton,c),{trackClicked:h}=js(Ja.DiscoverabilityPanelFooterDismissButton,c),{trackingRef:w}=ks(Ja.DiscoverabilityPanelFooter,c,!0),j=void 0!==e,{icon:S,name:I}=(e=>{switch(e){case"AIGrader":return{icon:x._,name:"AI Grader"};case"aiDetector":return{icon:f.b,name:"AI Detector"};case"citationFinder":return{icon:v.k,name:"Citations Finder"};case"expertPanel":return{icon:k.F,name:"Expert Panel"};case"humanizer":return{icon:y.i,name:"Humanizer"};case"paraphraser":return{icon:b.y,name:"Paraphraser"};case"plagiarism":return{icon:m.L,name:"Plagiarism Checker"};case"proofreader":return{icon:p.O,name:"Proofreader"};case"readerReactions":return{icon:C.Q,name:"Reader Reactions"};default:return{icon:void 0,name:void 0}}})(null==e?void 0:e.agentId);return(0,s.jsx)(o.k,{padding:4,ref:e&&w,alignSelf:"center",bgColor:"background-base-default",style:{position:"sticky",bottom:0,width:"calc(100% - 2 * var(--space-4))",display:j&&r?"flex":"none"},children:(0,s.jsx)(u.x,{borderRadius:2,bgColor:"neutral-gray-0",width:"100%",padding:3,children:(0,s.jsxs)(o.k,{gap:2,children:[S&&(0,s.jsx)(g.J,{icon:S,size:"medium",accessibilityLabel:""}),(0,s.jsxs)(o.k,{direction:"column",gap:3,marginTop:.5,children:[(0,s.jsx)(l.x,{as:"p",variant:"text-xsmall",children:null==e?void 0:e.message}),(0,s.jsxs)(o.k,{gap:2,children:[(0,s.jsx)(E.z,{variant:"primary",size:"small",onClick:()=>{e&&(t.execute({kind:Xa.OpenAgent,agentId:e.agentId}),d(),a(!1))},children:(0,s.jsxs)(l.x,{as:"span",variant:"text-xsmall",weight:"bold",children:["Try ",I]})}),(0,s.jsx)(E.z,{variant:"tertiary",size:"small",onClick:()=>{h(),a(!1)},children:"Not now"})]})]})]})})})},Hl="_discoverabilityPopup_19yoh_1",Ul=({children:e,agents:t,promotion:n,hoveredAgentId:r,selectedAgentId:a,setHoveredAgentId:o})=>{const[c,d]=(0,i.useState)(!0),[u,g]=(0,i.useState)(!1);Fl(a,(()=>d(!1)));const h=void 0!==n,{setAnchorRef:p,setContentRef:m}=((e,t)=>{var n,r;const[a,s]=(0,i.useState)(null),[o,l]=(0,i.useState)(null),c=e.findIndex((e=>"agent"===e.type&&e.item.id===(null==t?void 0:t.agentId))),d=null==a?void 0:a.getBoundingClientRect();if(-1!==c&&e.length&&d&&d.height&&d.top){const t=d.height/e.length*(c-.5)+d.top,a=null==(r=null==(n=null==o?void 0:o.parentElement)?void 0:n.parentElement)?void 0:r.parentElement;a&&(a.style.top=`${t}px`)}return{setAnchorRef:s,setContentRef:l}})(t,n),{trackingRef:f}=ks(Ja.DiscoverabilityPopup,{promotedAgentId:(null==n?void 0:n.agentId)??""},!0);return(0,s.jsxs)(ca.J,{placement:"left",open:h&&c&&(!r||u),onOpenChange:d,dismissOnOutsideClick:!1,children:[(0,s.jsx)(ca.J.Anchor,{ref:e=>p(e),children:e}),(0,s.jsx)(ca.J.Content,{width:248,onMouseEnter:()=>{g(!0),o(null)},onMouseLeave:()=>{g(!1),o(r)},className:Hl,accessibilityLabel:`Popup: ${null==n?void 0:n.message}`,children:(0,s.jsx)(l.x,{as:"p",variant:"text-small",ref:e=>{n&&f(e),m(e)},children:null==n?void 0:n.message})})]})},$l="_chevronButton_1kx4f_1",Gl="_disabled_1kx4f_5",Wl=()=>(0,s.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M16.7068 13.2929C17.0973 13.6834 17.0973 14.3164 16.7068 14.707C16.3162 15.0974 15.6832 15.0975 15.2927 14.707L11.9997 11.414L8.70675 14.707L8.63058 14.7753C8.23781 15.0956 7.65878 15.073 7.29269 14.707C6.9266 14.3409 6.90406 13.7618 7.22433 13.3691L7.29269 13.2929L11.2927 9.29289C11.6832 8.90237 12.3162 8.90237 12.7068 9.29289L16.7068 13.2929Z",fill:"#707070"})}),Zl=()=>(0,s.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M7.29314 10.707C6.90261 10.3164 6.90261 9.68343 7.29314 9.29291C7.68367 8.90247 8.31671 8.90241 8.7072 9.29291L12.0002 12.5859L15.2931 9.29291L15.3693 9.22455C15.7621 8.90428 16.3411 8.92682 16.7072 9.29291C17.0733 9.659 17.0958 10.238 16.7756 10.6308L16.7072 10.707L12.7072 14.707C12.3167 15.0975 11.6837 15.0975 11.2931 14.707L7.29314 10.707Z",fill:"#707070"})}),Vl=({direction:e,onClick:t,disabled:n=!1,className:r})=>{const a=ia($l,r,{[Gl]:n});return(0,s.jsx)(E.z,{className:a,onClick:()=>{n||t()},disabled:n,size:"small",variant:"ghost",style:{height:"32px",width:"32px",padding:"4px",marginTop:"up"===e?"4px":"",marginBottom:"down"===e?"4px":""},accessibilityLabel:`Scroll ${e}`,children:"up"===e?(0,s.jsx)(Wl,{}):(0,s.jsx)(Zl,{})})};function ql({containerHeight:e,totalItemsCount:t,itemHeight:n}){const r=(0,i.useRef)(null),[a,s]=(0,i.useState)(!1),[o,l]=(0,i.useState)(!1),c=t*n>e,{scrollUp:d,scrollDown:u}=function(e){const{itemHeight:t}=e,n=(0,i.useCallback)(((e,n)=>{const r=Math.min(.8*e.clientHeight,3*t),a="up"===n?Math.max(0,e.scrollTop-r):Math.min(e.scrollHeight-e.clientHeight,e.scrollTop+r);e.scrollTo({top:a,behavior:"smooth"})}),[t]);return{scrollUp:(0,i.useCallback)((e=>n(e,"up")),[n]),scrollDown:(0,i.useCallback)((e=>n(e,"down")),[n])}}({itemHeight:n}),g=(0,i.useCallback)((()=>{const e=r.current;if(!e)return;const{isAtTop:t,isAtBottom:n}=(e=>{const{scrollTop:t,scrollHeight:n,clientHeight:r}=e;return{isAtTop:t<=1,isAtBottom:t+r>=n-1}})(e);c?(s(!t),l(!n)):(s(!1),l(!1))}),[c]);(0,i.useEffect)((()=>{g()}),[e,g]);const h=(0,i.useCallback)((()=>{const e=r.current;e&&d(e)}),[d]),p=(0,i.useCallback)((()=>{const e=r.current;e&&u(e)}),[u]);return{showTopChevron:a,showBottomChevron:o,scrollContainerRef:r,handleScroll:g,handleScrollUp:h,handleScrollDown:p}}function Kl(e){const[t,n]=(0,i.useState)(!1),r=(0,i.useCallback)(((e,t)=>{if("onscrollend"in e){const n=()=>{t(),e.removeEventListener("scrollend",n)};e.addEventListener("scrollend",n)}else setTimeout(t,500)}),[]);return{handleOverlayScroll:(0,i.useCallback)((n=>{e.current&&!t&&(e.current.scrollTop=n)}),[t]),handleChevronScroll:(0,i.useCallback)((t=>{n(!0),t(),e.current&&r(e.current,(()=>{n(!1)}))}),[r])}}function Jl(e,t){const n=ms();return(0,i.useMemo)((()=>{if(!n.isFeatureEnabled(yl.FirstPartyPackAgents))return[...e,...t];const r=function(e,t){const n=new Map(t.map((e=>[e.id,e])));return e.map((e=>{const t=(0,kn.Cb)(e.id);if(!t)return e;const r=n.get(t);return r?{...e,title:r.title,renderIcon:r.renderIcon,isPaidAgentFreeInBeta:r.isPaidAgentFreeInBeta}:e}))}(e,t);return function(e,t){const n=new Set(t.map((e=>e.id))),r=new Set(e.map((e=>e.id)));if(!e.some((e=>{const t=(0,kn.Cb)(e.id);return t&&n.has(t)})))return[...e,...t];const a=new Map(e.map((e=>[e.id,e]))),s=[];return t.forEach((e=>{const t=(0,kn.HS)(e.id);if(t&&r.has(t)){const e=a.get(t);e&&s.push(e)}else(0,kn.xt)(e.id)||s.push(e)})),s}(r,t)}),[e,t,n])}const Yl="_agentBenchContainer_qf12b_1",Xl="_scrollContainer_qf12b_8",Ql="_agentBench_qf12b_1",ec="_agentBenchWithGoBranding_qf12b_26",tc="_itemsContainer_qf12b_29",nc="_topChevron_qf12b_37",rc="_bottomChevron_qf12b_38",ac=({children:e,totalItemsCount:t,allItems:n,hoveredAgentId:r,selectedAgentId:a,setHoveredAgentId:l,onSelectItem:c,closeOnAgentReselect:d=!0,onOpenAgentDirectory:u})=>{const g=(0,i.useRef)(null),h=(0,i.useRef)(null),{height:p=0}=(0,_a.yU)({ref:g,box:"content-box"}),{showTopChevron:m,showBottomChevron:f,scrollContainerRef:x,handleScroll:v,handleScrollUp:b,handleScrollDown:C}=ql({containerHeight:p,totalItemsCount:t,itemHeight:40}),{handleOverlayScroll:y,handleChevronScroll:k}=Kl(x),w=ia(Ql,[ec]),j=Bl(Ra.z.isBenchPopup),S=(0,i.useMemo)((()=>{const e=n.find((e=>e.type===Tl.Agent&&e.item.id===r));return!!e&&(e.type===Tl.Directory||!e.item.experimental_disabledReason)}),[n,r]);return(0,s.jsx)("div",{ref:g,className:Yl,onMouseLeave:()=>l(null),children:(0,s.jsxs)(o.k,{ref:h,direction:"column",elevation:"low",gap:2,align:"center",className:w,children:[m&&(0,s.jsx)(Vl,{direction:"up",onClick:()=>k(b),className:nc,"data-testid":"chevron-up"}),S&&(0,s.jsx)(Nl,{allItems:n,hoveredAgentId:r,selectedAgentId:a,showTopChevron:m,showBottomChevron:f,onHover:l,onSelectItem:c,onScroll:y,scrollContainerRef:x,closeOnAgentReselect:d,onOpenAgentDirectory:u}),(0,s.jsx)(Ul,{agents:n,promotion:j,hoveredAgentId:r,selectedAgentId:a,setHoveredAgentId:l,children:(0,s.jsx)("div",{ref:x,className:Xl,style:{padding:"4px"},onScroll:v,"data-testid":"scroll-container",children:(0,s.jsx)("div",{className:tc,children:e})})},null==j?void 0:j.id),f&&(0,s.jsx)(Vl,{direction:"down",onClick:()=>k(C),className:rc,"data-testid":"chevron-down"})]})})},sc=(0,s.jsxs)("svg",{width:"44",height:"44",viewBox:"0 0 44 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsxs)("g",{filter:"url(#filter0_d_8766_21194)",children:[(0,s.jsx)("path",{d:"M6 19C6 13.3995 6 10.5992 7.08993 8.46009C8.04867 6.57847 9.57847 5.04867 11.4601 4.08993C13.5992 3 16.3995 3 22 3C27.6005 3 30.4008 3 32.5399 4.08993C34.4215 5.04867 35.9513 6.57847 36.9101 8.46009C38 10.5992 38 13.3995 38 19C38 24.6005 38 27.4008 36.9101 29.5399C35.9513 31.4215 34.4215 32.9513 32.5399 33.9101C30.4008 35 27.6005 35 22 35C16.3995 35 13.5992 35 11.4601 33.9101C9.57847 32.9513 8.04867 31.4215 7.08993 29.5399C6 27.4008 6 24.6005 6 19Z",fill:"#533192"}),(0,s.jsx)("path",{d:"M6 19C6 13.3995 6 10.5992 7.08993 8.46009C8.04867 6.57847 9.57847 5.04867 11.4601 4.08993C13.5992 3 16.3995 3 22 3C27.6005 3 30.4008 3 32.5399 4.08993C34.4215 5.04867 35.9513 6.57847 36.9101 8.46009C38 10.5992 38 13.3995 38 19C38 24.6005 38 27.4008 36.9101 29.5399C35.9513 31.4215 34.4215 32.9513 32.5399 33.9101C30.4008 35 27.6005 35 22 35C16.3995 35 13.5992 35 11.4601 33.9101C9.57847 32.9513 8.04867 31.4215 7.08993 29.5399C6 27.4008 6 24.6005 6 19Z",fill:"url(#paint0_linear_8766_21194)",fillOpacity:"0.2"}),(0,s.jsx)("path",{d:"M22 3.5C24.8085 3.5 26.8849 3.50057 28.5273 3.63477C30.1637 3.76846 31.3253 4.03224 32.3125 4.53516C34.1 5.44595 35.554 6.89996 36.4648 8.6875C36.9678 9.67471 37.2315 10.8363 37.3652 12.4727C37.4994 14.1151 37.5 16.1915 37.5 19C37.5 21.8085 37.4994 23.8849 37.3652 25.5273C37.2315 27.1637 36.9678 28.3253 36.4648 29.3125C35.554 31.1 34.1 32.554 32.3125 33.4648C31.3253 33.9678 30.1637 34.2315 28.5273 34.3652C26.8849 34.4994 24.8085 34.5 22 34.5C19.1915 34.5 17.1151 34.4994 15.4727 34.3652C13.8363 34.2315 12.6747 33.9678 11.6875 33.4648C9.89996 32.554 8.44595 31.1 7.53516 29.3125C7.03224 28.3253 6.76846 27.1637 6.63477 25.5273C6.50057 23.8849 6.5 21.8085 6.5 19C6.5 16.1915 6.50057 14.1151 6.63477 12.4727C6.76846 10.8363 7.03224 9.67471 7.53516 8.6875C8.44595 6.89996 9.89996 5.44595 11.6875 4.53516C12.6747 4.03224 13.8363 3.76846 15.4727 3.63477C17.1151 3.50057 19.1915 3.5 22 3.5Z",stroke:"#9E7BE0"}),(0,s.jsx)("path",{d:"M22 3.5C24.8085 3.5 26.8849 3.50057 28.5273 3.63477C30.1637 3.76846 31.3253 4.03224 32.3125 4.53516C34.1 5.44595 35.554 6.89996 36.4648 8.6875C36.9678 9.67471 37.2315 10.8363 37.3652 12.4727C37.4994 14.1151 37.5 16.1915 37.5 19C37.5 21.8085 37.4994 23.8849 37.3652 25.5273C37.2315 27.1637 36.9678 28.3253 36.4648 29.3125C35.554 31.1 34.1 32.554 32.3125 33.4648C31.3253 33.9678 30.1637 34.2315 28.5273 34.3652C26.8849 34.4994 24.8085 34.5 22 34.5C19.1915 34.5 17.1151 34.4994 15.4727 34.3652C13.8363 34.2315 12.6747 33.9678 11.6875 33.4648C9.89996 32.554 8.44595 31.1 7.53516 29.3125C7.03224 28.3253 6.76846 27.1637 6.63477 25.5273C6.50057 23.8849 6.5 21.8085 6.5 19C6.5 16.1915 6.50057 14.1151 6.63477 12.4727C6.76846 10.8363 7.03224 9.67471 7.53516 8.6875C8.44595 6.89996 9.89996 5.44595 11.6875 4.53516C12.6747 4.03224 13.8363 3.76846 15.4727 3.63477C17.1151 3.50057 19.1915 3.5 22 3.5Z",stroke:"url(#paint1_linear_8766_21194)",strokeOpacity:"0.4"})]}),(0,s.jsxs)("defs",{children:[(0,s.jsxs)("filter",{id:"filter0_d_8766_21194",x:"0",y:"0",width:"44",height:"44",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,s.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,s.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,s.jsx)("feMorphology",{radius:"2",operator:"erode",in:"SourceAlpha",result:"effect1_dropShadow_8766_21194"}),(0,s.jsx)("feOffset",{dy:"3"}),(0,s.jsx)("feGaussianBlur",{stdDeviation:"4"}),(0,s.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,s.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.443137 0 0 0 0 0.298039 0 0 0 0 0.713726 0 0 0 1 0"}),(0,s.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_8766_21194"}),(0,s.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_8766_21194",result:"shape"})]}),(0,s.jsxs)("linearGradient",{id:"paint0_linear_8766_21194",x1:"22",y1:"3",x2:"22",y2:"35",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{stopColor:"#F7F5FF",stopOpacity:"0"}),(0,s.jsx)("stop",{offset:"1",stopColor:"#F7F5FF"})]}),(0,s.jsxs)("linearGradient",{id:"paint1_linear_8766_21194",x1:"22",y1:"3",x2:"22",y2:"35",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{stopColor:"#F7F5FF",stopOpacity:"0"}),(0,s.jsx)("stop",{offset:"1",stopColor:"#F7F5FF"})]})]})]}),ic=(0,s.jsxs)("svg",{width:"44",height:"44",viewBox:"0 0 44 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsxs)("g",{filter:"url(#filter0_d_8765_20981)",children:[(0,s.jsx)("path",{d:"M6 19C6 13.3995 6 10.5992 7.08993 8.46009C8.04867 6.57847 9.57847 5.04867 11.4601 4.08993C13.5992 3 16.3995 3 22 3C27.6005 3 30.4008 3 32.5399 4.08993C34.4215 5.04867 35.9513 6.57847 36.9101 8.46009C38 10.5992 38 13.3995 38 19C38 24.6005 38 27.4008 36.9101 29.5399C35.9513 31.4215 34.4215 32.9513 32.5399 33.9101C30.4008 35 27.6005 35 22 35C16.3995 35 13.5992 35 11.4601 33.9101C9.57847 32.9513 8.04867 31.4215 7.08993 29.5399C6 27.4008 6 24.6005 6 19Z",fill:"#D4C7FF"}),(0,s.jsx)("path",{d:"M6 19C6 13.3995 6 10.5992 7.08993 8.46009C8.04867 6.57847 9.57847 5.04867 11.4601 4.08993C13.5992 3 16.3995 3 22 3C27.6005 3 30.4008 3 32.5399 4.08993C34.4215 5.04867 35.9513 6.57847 36.9101 8.46009C38 10.5992 38 13.3995 38 19C38 24.6005 38 27.4008 36.9101 29.5399C35.9513 31.4215 34.4215 32.9513 32.5399 33.9101C30.4008 35 27.6005 35 22 35C16.3995 35 13.5992 35 11.4601 33.9101C9.57847 32.9513 8.04867 31.4215 7.08993 29.5399C6 27.4008 6 24.6005 6 19Z",fill:"url(#paint0_linear_8765_20981)",fillOpacity:"0.6"}),(0,s.jsx)("path",{d:"M22 3.5C24.8085 3.5 26.8849 3.50057 28.5273 3.63477C30.1637 3.76846 31.3253 4.03224 32.3125 4.53516C34.1 5.44595 35.554 6.89996 36.4648 8.6875C36.9678 9.67471 37.2315 10.8363 37.3652 12.4727C37.4994 14.1151 37.5 16.1915 37.5 19C37.5 21.8085 37.4994 23.8849 37.3652 25.5273C37.2315 27.1637 36.9678 28.3253 36.4648 29.3125C35.554 31.1 34.1 32.554 32.3125 33.4648C31.3253 33.9678 30.1637 34.2315 28.5273 34.3652C26.8849 34.4994 24.8085 34.5 22 34.5C19.1915 34.5 17.1151 34.4994 15.4727 34.3652C13.8363 34.2315 12.6747 33.9678 11.6875 33.4648C9.89996 32.554 8.44595 31.1 7.53516 29.3125C7.03224 28.3253 6.76846 27.1637 6.63477 25.5273C6.50057 23.8849 6.5 21.8085 6.5 19C6.5 16.1915 6.50057 14.1151 6.63477 12.4727C6.76846 10.8363 7.03224 9.67471 7.53516 8.6875C8.44595 6.89996 9.89996 5.44595 11.6875 4.53516C12.6747 4.03224 13.8363 3.76846 15.4727 3.63477C17.1151 3.50057 19.1915 3.5 22 3.5Z",stroke:"#9E7BE0"}),(0,s.jsx)("path",{d:"M22 3.5C24.8085 3.5 26.8849 3.50057 28.5273 3.63477C30.1637 3.76846 31.3253 4.03224 32.3125 4.53516C34.1 5.44595 35.554 6.89996 36.4648 8.6875C36.9678 9.67471 37.2315 10.8363 37.3652 12.4727C37.4994 14.1151 37.5 16.1915 37.5 19C37.5 21.8085 37.4994 23.8849 37.3652 25.5273C37.2315 27.1637 36.9678 28.3253 36.4648 29.3125C35.554 31.1 34.1 32.554 32.3125 33.4648C31.3253 33.9678 30.1637 34.2315 28.5273 34.3652C26.8849 34.4994 24.8085 34.5 22 34.5C19.1915 34.5 17.1151 34.4994 15.4727 34.3652C13.8363 34.2315 12.6747 33.9678 11.6875 33.4648C9.89996 32.554 8.44595 31.1 7.53516 29.3125C7.03224 28.3253 6.76846 27.1637 6.63477 25.5273C6.50057 23.8849 6.5 21.8085 6.5 19C6.5 16.1915 6.50057 14.1151 6.63477 12.4727C6.76846 10.8363 7.03224 9.67471 7.53516 8.6875C8.44595 6.89996 9.89996 5.44595 11.6875 4.53516C12.6747 4.03224 13.8363 3.76846 15.4727 3.63477C17.1151 3.50057 19.1915 3.5 22 3.5Z",stroke:"url(#paint1_linear_8765_20981)",strokeOpacity:"0.4"})]}),(0,s.jsxs)("defs",{children:[(0,s.jsxs)("filter",{id:"filter0_d_8765_20981",x:"0",y:"0",width:"44",height:"44",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,s.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,s.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,s.jsx)("feMorphology",{radius:"2",operator:"erode",in:"SourceAlpha",result:"effect1_dropShadow_8765_20981"}),(0,s.jsx)("feOffset",{dy:"3"}),(0,s.jsx)("feGaussianBlur",{stdDeviation:"4"}),(0,s.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,s.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.701774 0 0 0 0 0.548002 0 0 0 0 1 0 0 0 0.4 0"}),(0,s.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_8765_20981"}),(0,s.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_8765_20981",result:"shape"})]}),(0,s.jsxs)("linearGradient",{id:"paint0_linear_8765_20981",x1:"22",y1:"3",x2:"22",y2:"35",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{stopColor:"#F7F5FF",stopOpacity:"0"}),(0,s.jsx)("stop",{offset:"1",stopColor:"#F7F5FF"})]}),(0,s.jsxs)("linearGradient",{id:"paint1_linear_8765_20981",x1:"22",y1:"3",x2:"22",y2:"35",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{stopColor:"#F7F5FF",stopOpacity:"0"}),(0,s.jsx)("stop",{offset:"1",stopColor:"#F7F5FF"})]})]})]}),oc=(0,s.jsxs)("svg",{width:"44",height:"44",viewBox:"0 0 44 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsxs)("g",{filter:"url(#filter0_d_10515_13844)",children:[(0,s.jsx)("path",{d:"M6 19C6 13.3995 6 10.5992 7.08993 8.46009C8.04867 6.57847 9.57847 5.04867 11.4601 4.08993C13.5992 3 16.3995 3 22 3C27.6005 3 30.4008 3 32.5399 4.08993C34.4215 5.04867 35.9513 6.57847 36.9101 8.46009C38 10.5992 38 13.3995 38 19C38 24.6005 38 27.4008 36.9101 29.5399C35.9513 31.4215 34.4215 32.9513 32.5399 33.9101C30.4008 35 27.6005 35 22 35C16.3995 35 13.5992 35 11.4601 33.9101C9.57847 32.9513 8.04867 31.4215 7.08993 29.5399C6 27.4008 6 24.6005 6 19Z",fill:"url(#paint0_linear_10515_13844)",fillOpacity:"0.2",shapeRendering:"crispEdges"}),(0,s.jsx)("path",{d:"M22 3.5C24.8085 3.5 26.8849 3.50057 28.5273 3.63477C30.1637 3.76846 31.3253 4.03224 32.3125 4.53516C34.1 5.44595 35.554 6.89996 36.4648 8.6875C36.9678 9.67471 37.2315 10.8363 37.3652 12.4727C37.4994 14.1151 37.5 16.1915 37.5 19C37.5 21.8085 37.4994 23.8849 37.3652 25.5273C37.2315 27.1637 36.9678 28.3253 36.4648 29.3125C35.554 31.1 34.1 32.554 32.3125 33.4648C31.3253 33.9678 30.1637 34.2315 28.5273 34.3652C26.8849 34.4994 24.8085 34.5 22 34.5C19.1915 34.5 17.1151 34.4994 15.4727 34.3652C13.8363 34.2315 12.6747 33.9678 11.6875 33.4648C9.89996 32.554 8.44595 31.1 7.53516 29.3125C7.03224 28.3253 6.76846 27.1637 6.63477 25.5273C6.50057 23.8849 6.5 21.8085 6.5 19C6.5 16.1915 6.50057 14.1151 6.63477 12.4727C6.76846 10.8363 7.03224 9.67471 7.53516 8.6875C8.44595 6.89996 9.89996 5.44595 11.6875 4.53516C12.6747 4.03224 13.8363 3.76846 15.4727 3.63477C17.1151 3.50057 19.1915 3.5 22 3.5Z",stroke:"#15A694",shapeRendering:"crispEdges"}),(0,s.jsx)("path",{d:"M22 3.5C24.8085 3.5 26.8849 3.50057 28.5273 3.63477C30.1637 3.76846 31.3253 4.03224 32.3125 4.53516C34.1 5.44595 35.554 6.89996 36.4648 8.6875C36.9678 9.67471 37.2315 10.8363 37.3652 12.4727C37.4994 14.1151 37.5 16.1915 37.5 19C37.5 21.8085 37.4994 23.8849 37.3652 25.5273C37.2315 27.1637 36.9678 28.3253 36.4648 29.3125C35.554 31.1 34.1 32.554 32.3125 33.4648C31.3253 33.9678 30.1637 34.2315 28.5273 34.3652C26.8849 34.4994 24.8085 34.5 22 34.5C19.1915 34.5 17.1151 34.4994 15.4727 34.3652C13.8363 34.2315 12.6747 33.9678 11.6875 33.4648C9.89996 32.554 8.44595 31.1 7.53516 29.3125C7.03224 28.3253 6.76846 27.1637 6.63477 25.5273C6.50057 23.8849 6.5 21.8085 6.5 19C6.5 16.1915 6.50057 14.1151 6.63477 12.4727C6.76846 10.8363 7.03224 9.67471 7.53516 8.6875C8.44595 6.89996 9.89996 5.44595 11.6875 4.53516C12.6747 4.03224 13.8363 3.76846 15.4727 3.63477C17.1151 3.50057 19.1915 3.5 22 3.5Z",stroke:"url(#paint1_linear_10515_13844)",strokeOpacity:"0.4",shapeRendering:"crispEdges"})]}),(0,s.jsxs)("defs",{children:[(0,s.jsxs)("filter",{id:"filter0_d_10515_13844",x:"0",y:"0",width:"44",height:"44",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,s.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,s.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,s.jsx)("feMorphology",{radius:"2",operator:"erode",in:"SourceAlpha",result:"effect1_dropShadow_10515_13844"}),(0,s.jsx)("feOffset",{dy:"3"}),(0,s.jsx)("feGaussianBlur",{stdDeviation:"4"}),(0,s.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,s.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.141176 0 0 0 0 0.670588 0 0 0 0 0.607843 0 0 0 0.4 0"}),(0,s.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_10515_13844"}),(0,s.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_10515_13844",result:"shape"})]}),(0,s.jsxs)("linearGradient",{id:"paint0_linear_10515_13844",x1:"22",y1:"3",x2:"22",y2:"35",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{stopColor:"#17A695",stopOpacity:"0"}),(0,s.jsx)("stop",{offset:"1",stopColor:"#16A694"})]}),(0,s.jsxs)("linearGradient",{id:"paint1_linear_10515_13844",x1:"22",y1:"3",x2:"22",y2:"35",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{stopColor:"#19A796"}),(0,s.jsx)("stop",{offset:"1",stopColor:"#17A695"})]})]})]}),lc=(0,s.jsxs)("svg",{width:"44",height:"44",viewBox:"0 0 44 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsxs)("g",{filter:"url(#filter0_d_10515_13842)",children:[(0,s.jsx)("path",{d:"M6 19C6 13.3995 6 10.5992 7.08993 8.46009C8.04867 6.57847 9.57847 5.04867 11.4601 4.08993C13.5992 3 16.3995 3 22 3C27.6005 3 30.4008 3 32.5399 4.08993C34.4215 5.04867 35.9513 6.57847 36.9101 8.46009C38 10.5992 38 13.3995 38 19C38 24.6005 38 27.4008 36.9101 29.5399C35.9513 31.4215 34.4215 32.9513 32.5399 33.9101C30.4008 35 27.6005 35 22 35C16.3995 35 13.5992 35 11.4601 33.9101C9.57847 32.9513 8.04867 31.4215 7.08993 29.5399C6 27.4008 6 24.6005 6 19Z",fill:"#B1F0E8"}),(0,s.jsx)("path",{d:"M6 19C6 13.3995 6 10.5992 7.08993 8.46009C8.04867 6.57847 9.57847 5.04867 11.4601 4.08993C13.5992 3 16.3995 3 22 3C27.6005 3 30.4008 3 32.5399 4.08993C34.4215 5.04867 35.9513 6.57847 36.9101 8.46009C38 10.5992 38 13.3995 38 19C38 24.6005 38 27.4008 36.9101 29.5399C35.9513 31.4215 34.4215 32.9513 32.5399 33.9101C30.4008 35 27.6005 35 22 35C16.3995 35 13.5992 35 11.4601 33.9101C9.57847 32.9513 8.04867 31.4215 7.08993 29.5399C6 27.4008 6 24.6005 6 19Z",fill:"url(#paint0_linear_10515_13842)",fillOpacity:"0.6"}),(0,s.jsx)("path",{d:"M22 3.5C24.8085 3.5 26.8849 3.50057 28.5273 3.63477C30.1637 3.76846 31.3253 4.03224 32.3125 4.53516C34.1 5.44595 35.554 6.89996 36.4648 8.6875C36.9678 9.67471 37.2315 10.8363 37.3652 12.4727C37.4994 14.1151 37.5 16.1915 37.5 19C37.5 21.8085 37.4994 23.8849 37.3652 25.5273C37.2315 27.1637 36.9678 28.3253 36.4648 29.3125C35.554 31.1 34.1 32.554 32.3125 33.4648C31.3253 33.9678 30.1637 34.2315 28.5273 34.3652C26.8849 34.4994 24.8085 34.5 22 34.5C19.1915 34.5 17.1151 34.4994 15.4727 34.3652C13.8363 34.2315 12.6747 33.9678 11.6875 33.4648C9.89996 32.554 8.44595 31.1 7.53516 29.3125C7.03224 28.3253 6.76846 27.1637 6.63477 25.5273C6.50057 23.8849 6.5 21.8085 6.5 19C6.5 16.1915 6.50057 14.1151 6.63477 12.4727C6.76846 10.8363 7.03224 9.67471 7.53516 8.6875C8.44595 6.89996 9.89996 5.44595 11.6875 4.53516C12.6747 4.03224 13.8363 3.76846 15.4727 3.63477C17.1151 3.50057 19.1915 3.5 22 3.5Z",stroke:"#15A694"}),(0,s.jsx)("path",{d:"M22 3.5C24.8085 3.5 26.8849 3.50057 28.5273 3.63477C30.1637 3.76846 31.3253 4.03224 32.3125 4.53516C34.1 5.44595 35.554 6.89996 36.4648 8.6875C36.9678 9.67471 37.2315 10.8363 37.3652 12.4727C37.4994 14.1151 37.5 16.1915 37.5 19C37.5 21.8085 37.4994 23.8849 37.3652 25.5273C37.2315 27.1637 36.9678 28.3253 36.4648 29.3125C35.554 31.1 34.1 32.554 32.3125 33.4648C31.3253 33.9678 30.1637 34.2315 28.5273 34.3652C26.8849 34.4994 24.8085 34.5 22 34.5C19.1915 34.5 17.1151 34.4994 15.4727 34.3652C13.8363 34.2315 12.6747 33.9678 11.6875 33.4648C9.89996 32.554 8.44595 31.1 7.53516 29.3125C7.03224 28.3253 6.76846 27.1637 6.63477 25.5273C6.50057 23.8849 6.5 21.8085 6.5 19C6.5 16.1915 6.50057 14.1151 6.63477 12.4727C6.76846 10.8363 7.03224 9.67471 7.53516 8.6875C8.44595 6.89996 9.89996 5.44595 11.6875 4.53516C12.6747 4.03224 13.8363 3.76846 15.4727 3.63477C17.1151 3.50057 19.1915 3.5 22 3.5Z",stroke:"url(#paint1_linear_10515_13842)",strokeOpacity:"0.4"})]}),(0,s.jsxs)("defs",{children:[(0,s.jsxs)("filter",{id:"filter0_d_10515_13842",x:"0",y:"0",width:"44",height:"44",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,s.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,s.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,s.jsx)("feMorphology",{radius:"2",operator:"erode",in:"SourceAlpha",result:"effect1_dropShadow_10515_13842"}),(0,s.jsx)("feOffset",{dy:"3"}),(0,s.jsx)("feGaussianBlur",{stdDeviation:"4"}),(0,s.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,s.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.137255 0 0 0 0 0.670588 0 0 0 0 0.603922 0 0 0 0.4 0"}),(0,s.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_10515_13842"}),(0,s.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_10515_13842",result:"shape"})]}),(0,s.jsxs)("linearGradient",{id:"paint0_linear_10515_13842",x1:"22",y1:"3",x2:"22",y2:"35",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{stopColor:"#F7F5FF",stopOpacity:"0"}),(0,s.jsx)("stop",{offset:"1",stopColor:"#F7F5FF"})]}),(0,s.jsxs)("linearGradient",{id:"paint1_linear_10515_13842",x1:"22",y1:"3",x2:"22",y2:"35",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{stopColor:"#F7F5FF",stopOpacity:"0"}),(0,s.jsx)("stop",{offset:"1",stopColor:"#F7F5FF"})]})]})]}),cc=({goBrandingEnabled:e})=>{const{scheme:t}=(0,R.t)(),n="dark"===t;return e?n?sc:ic:n?oc:lc},dc={benchItemButton:"_benchItemButton_f99tr_1",benchItem:"_benchItem_f99tr_1",nonActionableSelected:"_nonActionableSelected_f99tr_24",hovered:"_hovered_f99tr_25",selectedAgentPointer:"_selectedAgentPointer_f99tr_39"},uc=(0,i.forwardRef)((({children:e,onClick:t,label:n,id:r,onHover:a,isSelected:i,isHovered:l,isActionableWhenSelected:c=!0,disabledReason:d},u)=>{const g=ms().isFeatureEnabled(yl.GoBranding),h=ia(dc.benchItemButton,{[dc.hovered]:l,[dc.nonActionableSelected]:i&&!c}),p=(0,s.jsx)(o.k,{className:dc.selectedAgentPointer,"data-testid":"selected-agent-pointer",align:"center",children:(0,s.jsx)(cc,{goBrandingEnabled:g})}),m=(0,s.jsx)(E.z,{ref:u,className:h,onClick:t,size:"medium",variant:"tertiary","aria-label":n,style:{height:"32px",width:"32px",marginBottom:"8px"},isDisabled:!!d,accessibilityLabel:d,children:e});return(0,s.jsxs)("div",{className:ia(dc.benchItem,{[dc.goBrandingEnabled]:g}),onMouseEnter:()=>a(r),children:[i&&p,d?(0,s.jsxs)(S.u,{placement:"left",children:[(0,s.jsx)(S.aJ,{asChild:!0,children:m}),(0,s.jsx)(S._v,{root:null,children:d})]}):m]})})),gc=({size:e})=>(0,s.jsx)(g.J,{size:e,icon:hc,accessibilityLabel:"Add agent"}),hc=e=>(0,s.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,s.jsx)("path",{d:"M7 12L12.0001 12M17.0001 12H12.0001M12.0001 12V6.99995M12.0001 12V17.0001",stroke:"var(--color-icon-base-default, #707070)",strokeWidth:"1.5",strokeLinecap:"round"})});hc.__brand="nocolor";const pc=({children:e,title:t,content:n,placement:r="left",width:a=280,onDismiss:o,trackImpression:c,className:d})=>{const[u,g]=(0,i.useState)(!0),{isOpen:h}=ls(),p=(0,i.useRef)(!1),m=!h&&u,f=(0,i.useCallback)((()=>{p.current||(p.current=!0,c())}),[c]);return(0,s.jsxs)(ca.J,{open:m,placement:r,onOpenChange:e=>{e||(o(),g(!1))},onShow:f,children:[(0,s.jsx)(ca.J.Anchor,{children:e}),(0,s.jsx)(ca.J.Content,{className:d,title:t,accessibilityLabel:t,width:a,children:(0,s.jsx)(l.x,{variant:"text-xsmall",as:"p",children:n})})]})},mc=({children:e,message:t,trackImpression:n})=>(0,s.jsx)(pc,{placement:"left",title:"Find more agents",content:"Build the perfect lineup of agents for your work.",onDismiss:t.onDismiss,trackImpression:n,children:e}),fc=({children:e})=>{const[t,n]=(0,i.useState)(!1),{message:r,trackImpression:a}=bs(Pl.FindMoreAgentsPopover),{ref:o,isIntersecting:l}=(0,_a.S1)({threshold:1}),c=e(o,(()=>{n(!0)}));return r&&l&&!t?(0,s.jsx)(mc,{message:r,trackImpression:a,children:c}):c},xc=({id:e,onHover:t,isSelected:n,isHovered:r,commandExecutor:a,selectedAgentId:o,coordinatorAgentId:l})=>{const{trackClicked:c}=js(Ja.ViewDirectoryBenchItem,{}),d=Ml(),{openAgentDirectory:u,openAgentDirectoryModal:g,handleOpenAgent:h,isOpen:p}=Dl({commandExecutor:a,selectedAgentId:o,coordinatorAgentId:l}),m=(0,i.useRef)(h);m.current=h;const f=(0,i.useRef)(p);f.current=p,(0,i.useEffect)((()=>d?d.onDeeplinkRequested((e=>{if(e.viewType===kn.Gk.AgentChat)return void m.current(e.agentId);const t=Pn(e);t&&!f.current&&g(t)})):void 0),[d,g]);const x=u;return(0,s.jsx)(fc,{children:(a,i)=>(0,s.jsx)(vc,{id:e,isHovered:r,isSelected:n,onHover:t,onClick:()=>{c(),i(),x()},ref:a})})},vc=(0,i.forwardRef)(((e,t)=>{const{id:n,isSelected:r,isHovered:a,onHover:i,onClick:o}=e;return(0,s.jsx)(uc,{id:n,ref:t,label:"View agent directory",isSelected:r,isHovered:a,onHover:i,onClick:o,children:(0,s.jsx)(gc,{size:"medium"})})})),bc=({id:e,order:t,children:n,isSelected:r,onClick:a,label:i,onHover:o,isHovered:l,isActionableWhenSelected:c=!0,disabledReason:d})=>{const{trackingRef:u}=ws(Ja.AgentBenchItem,{agentId:e,order:t});return(0,s.jsx)(uc,{ref:u,label:i,id:e,isSelected:r,isHovered:l,onHover:o,onClick:a,isActionableWhenSelected:c,disabledReason:d,children:n})},Cc=({firstPartyAgents:e,commandExecutor:t,selectedItemId:n,onSelectItem:r,onClose:a,closeOnAgentReselect:o=!0,coordinatorAgentId:l})=>{const c=ms(),{installedAgents:d}=vs(),[u,g]=(0,i.useState)(null),h=function(e){const t=ms();return(0,i.useMemo)((()=>{const n=e.map((e=>({type:"agent",item:e})));return t.isFeatureEnabled(yl.AgentDirectory)&&n.push({type:"directory",id:"viewAgentDirectory",title:"More agents"}),n}),[e,t])}(Jl(e,c.isFeatureEnabled(yl.AgentDirectory)?d:[])),p=ms().isFeatureEnabled(yl.GoBranding),{openAgentDirectory:m}=Dl({commandExecutor:t,selectedAgentId:n,coordinatorAgentId:l}),f=(0,i.useCallback)((e=>{g(null),r(e)}),[r]),x=(0,i.useCallback)((e=>{n!==e?f(e):o&&a()}),[f,n,o,a]);return(0,s.jsx)(ac,{totalItemsCount:h.length,hoveredAgentId:u,setHoveredAgentId:g,allItems:h,onSelectItem:f,selectedAgentId:n??null,closeOnAgentReselect:o,onOpenAgentDirectory:m,children:h.map(((e,r)=>{if(Ol(e)){const t=e.item;return(0,s.jsx)(bc,{id:t.id,order:r,isSelected:n===t.id,onClick:()=>x(t.id),label:t.title,onHover:g,isHovered:u===t.id,isActionableWhenSelected:o,disabledReason:t.experimental_disabledReason,children:t.renderIcon({size:"large",goBrandingEnabled:p})},t.id)}return(0,s.jsx)(xc,{commandExecutor:t,id:e.id,onHover:g,isSelected:n===e.id,isHovered:u===e.id,selectedAgentId:n,coordinatorAgentId:l},e.id)}))})},yc="_agentPanelContainer_bo866_1",kc="_open_bo866_6",wc=({children:e,open:t,commandExecutor:n,selectedAgentId:r})=>{const a=ia(yc,t&&kc),i=Bl(Ra.z.isAgentPanelFooter);return(0,s.jsxs)(o.k,{direction:"column",flex:"1",className:a,children:[e,(0,s.jsx)(zl,{promotion:i,commandExecutor:n,selectedAgentId:r},null==i?void 0:i.id)]})},jc={modal:"_modal_1u63o_1"},Sc=({title:e,content:t,onClose:n,hideDefaultHeader:r=!1})=>{const a=(0,i.useRef)(null),l=(0,i.useId)();return(0,i.useEffect)((()=>{const e=e=>{"Escape"===e.key&&n()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)}),[n]),(0,i.useEffect)((()=>{var e;null==(e=a.current)||e.focus()}),[]),(0,s.jsx)("div",{role:"dialog","aria-modal":"true","aria-label":e,"aria-labelledby":l,ref:a,tabIndex:-1,children:(0,s.jsxs)(o.k,{direction:"column",gap:8,className:jc.modal,children:[!r&&(0,s.jsxs)(o.k,{direction:"row",justify:"space-between",children:[(0,s.jsx)(c.h,{size:"small",variant:"tertiary",accessibilityLabel:"Close",icon:wn.Tw,onClick:n}),(0,s.jsx)(o.k,{justify:"center",flex:"1",align:"center",children:(0,s.jsx)(D.X,{as:"h1",variant:"heading-xxsmall",className:jc.modalTitle,id:l,children:e})})]}),t]})})},Ic=({children:e})=>{const[t,n]=(0,i.useState)(null),r=(0,i.useCallback)((e=>n(e)),[]),a=(0,i.useCallback)((()=>n(null)),[]),o=(0,i.useMemo)((()=>({showModal:r,closeModal:a,isOpen:!!t})),[r,a,t]);return(0,s.jsxs)(os.Provider,{value:o,children:[t&&(0,s.jsx)(Sc,{title:t.title,content:t.content,onClose:a,hideDefaultHeader:t.hideDefaultHeader}),e]})};function Ac(e){const{installedAgents:t}=vs(),n=(0,i.useMemo)((()=>[...e,...t]),[e,t]),r=(0,i.useMemo)((()=>n.map((e=>e.id))),[n]);return{agents:n,availableAgentsIds:r}}const Ec=({id:e,children:t})=>{const n=ss().agentId,{trackingRef:r}=ks(Ja.ErrorFallback,{agentId:n??"",errorFallbackId:e});return(0,s.jsx)("div",{style:{display:"contents"},ref:r,children:t})};class _c extends i.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){xl.Logging.getLogger(`ErrorBoundary.${this.props.id}`).warn("Triggered error boundary",e,t)}render(){return this.state.hasError?(0,s.jsx)(Ec,{id:this.props.id,children:this.props.fallback}):this.props.children}}const Mc="_agentPanel_28mfu_1",Rc="_selected_28mfu_6",Dc=({id:e,renderPanel:t,selected:n})=>{const r=i.useRef(!1),{trackingRef:a}=ks(Ja.AgentPanel,{agentId:e});if(i.useEffect((()=>{n&&(r.current=!0)}),[n]),!r.current&&!n)return null;const o=ia(Mc,n&&Rc);return(0,s.jsx)(_c,{id:"AgentPanel",fallback:(0,s.jsx)(wn.e$,{title:"The panel cannot be displayed",content:"Try reloading the page."}),children:(0,s.jsx)(u.x,{ref:a,className:o,children:t()})})},Tc=({agent:e,selectedAgentId:t,availableAgentsIds:n,commandExecutor:r,contextualOptionsRegistry:a,additionalProviderContext:i,withoutPanel:o=!1})=>{const l=e.id,c=t===e.id,d={agentId:l,selectedAgentId:t,availableAgentsIds:n,commandExecutor:r,contextualOptionsRegistry:a.getAgentHandle(e.id),closeAssistantPanel:i.closeAssistantPanel};return(0,s.jsxs)(as,{value:d,children:[!o&&(0,s.jsx)(Dc,{id:e.id,selected:c,renderPanel:()=>e.renderPanel()}),o&&e.renderPanel()]})};function Oc({firstPartyAgents:e,coordinatorAgentId:t,commandExecutor:n,...r}){const{agents:a,availableAgentsIds:s}=Ac(e),{installedAgents:o}=vs(),l=Jl(e,o),c=Qi(t,n,l);return a.map((e=>(0,i.createElement)(Tc,{...r,key:e.id,agent:e,availableAgentsIds:s,contextualOptionsRegistry:c,commandExecutor:n})))}function Lc({commandExecutor:e,coordinatorAgentId:t,firstPartyAgents:n,...r}){const{agents:a,availableAgentsIds:i}=Ac(n),o=Qi(t,e,a),l=a.find((e=>e.id===t));return l?(0,s.jsx)(Tc,{...r,agent:l,availableAgentsIds:i,contextualOptionsRegistry:o,commandExecutor:e}):null}function Nc(){var e;const t=null==(e=(0,i.useContext)(Cs))?void 0:e.user;if(!t)throw new Error("User service not found");return t}function Pc({children:e}){const{openSignInPage:t,openSignUpPage:n,getUserInfo:r}=Nc(),{anonymous:a}=r();return a?(0,s.jsx)(o.k,{justify:"center",align:"center",height:"100%",width:"100%",children:(0,s.jsx)(wn.A4,{onSignIn:t,onSignUp:n})}):e}const Bc="_assistant_r00db_1",Fc=({children:e})=>(0,s.jsx)(o.k,{flex:"1",direction:"row",justify:"end",height:"100%",className:Bc,children:e});const zc="_assistantColorSchemeProviderContainer_1ohys_1",Hc="_grammarlyAgentIcons_1ohys_10",Uc=({agents:e,coordinatorAgentId:t,selectedAgentId:n,onSelect:r,onClose:a,sidebarFooter:o,services:l,hideCloseInHeader:c=!1,includeChatHistory:d=!1,transparentMode:u=!1,gdsColorScheme:g="auto",closeOnAgentReselect:h=!0})=>{var p;const[m,f]=function(e,t){const[n,r]=(0,i.useState)(e),a=(0,i.useCallback)(((e,n=qa.AgentBench)=>{r((r=>{const a=r;return a===e?a:(a&&t.trackEvent(Ya.AgentDeactivated,{agent:a,switchToAgent:e,cause:n}),e&&t.trackEvent(Ya.AgentActivated,{agent:e,switchFromAgent:a,cause:n}),e)}))}),[t]);return(0,i.useEffect)((()=>{a(e,qa.ExternalChange)}),[e,a]),[n,a]}(n??t,l.tracking),x=null==(p=l.experimental_featureToggle)?void 0:p.isFeatureEnabled(yl.GoBranding);!function(e,t){const n=(0,Da.D)(e);(0,i.useEffect)((()=>{e!==n&&(n&&(null==t||t.deactivateAgent({agentId:n})),e&&(null==t||t.activateAgent({agentId:e})))}),[e,n,t])}(m,l.experimental_agentLifecycle);const v=function(e,t){return(0,i.useCallback)(((n=qa.AgentBench)=>{e(void 0,n),null==t||t()}),[t,e])}(f,a),b=function(e,t){return(0,i.useCallback)(((n,r=qa.AgentBench)=>{e(n,r),null==t||t(n)}),[t,e])}(f,r),C=function(e){const t=(0,i.useMemo)((()=>({openAgent:e.openAgent,openCoordinatorAgent:e.openCoordinatorAgent})),[e.openAgent,e.openCoordinatorAgent]);return(0,i.useMemo)((()=>new ns(t)),[t])}({openAgent:b,openCoordinatorAgent:(0,i.useCallback)((()=>f(t)),[t,f])}),y=c?void 0:v,k={selectedAgentId:m,commandExecutor:C,additionalProviderContext:{closeAssistantPanel:y}},w=ia(zc,{[Hc]:!x});return(0,s.jsx)(wn.zx,{isEnabled:!!x,style:{height:"100%"},children:(0,s.jsx)(R.A,{scheme:g,className:w,children:(0,s.jsx)(Cs.Provider,{value:l,children:(0,s.jsx)(El,{chatService:l.chat,contextService:l.context,trackingService:l.tracking,featureToggleService:l.experimental_featureToggle,suggestionsService:l.experimental_suggestions,agentDirectoryService:l.experimental_agentDirectory,inProductMessagingService:l.experimental_inProductMessaging,children:(0,s.jsx)(wn.qM.Provider,{value:{closeAssistantPanel:y},children:(0,s.jsxs)(Pc,{children:[u&&(0,s.jsx)(Lc,{...k,coordinatorAgentId:t,firstPartyAgents:e}),!u&&(0,s.jsx)(Fc,{children:(0,s.jsxs)(Ic,{children:[(0,s.jsx)(wc,{open:!!m,commandExecutor:C,selectedAgentId:m??null,children:(0,s.jsx)(Oc,{firstPartyAgents:e,coordinatorAgentId:t,...k})}),(0,s.jsx)(Ys,{footer:o,commandExecutor:C,includeChatHistory:d,coordinatorAgentId:t,goBrandingEnabled:x,children:(0,s.jsx)(Cc,{commandExecutor:C,firstPartyAgents:e,onClose:v,onSelectItem:b,selectedItemId:m,closeOnAgentReselect:h,coordinatorAgentId:t})})]})})]})})})})})})};const $c=e=>(0,s.jsxs)("svg",{width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,s.jsx)("path",{d:"M11.6667 10.5C12.127 10.5 12.5001 10.8731 12.5001 11.3333C12.5001 11.7936 12.127 12.1667 11.6667 12.1667H6.66675C6.20651 12.1667 5.83342 11.7936 5.83342 11.3333C5.83342 10.8731 6.20651 10.5 6.66675 10.5H11.6667Z",fill:"var(--color-icon-base-default, #707070)"}),(0,s.jsx)("path",{d:"M13.3334 7.16667C13.7937 7.16667 14.1667 7.53976 14.1667 8C14.1667 8.46024 13.7937 8.83333 13.3334 8.83333H6.66675C6.20651 8.83333 5.83342 8.46024 5.83342 8C5.83342 7.53976 6.20651 7.16667 6.66675 7.16667H13.3334Z",fill:"var(--color-icon-base-default, #707070)"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.0001 3C16.841 3 18.3334 4.49238 18.3334 6.33333V13C18.3334 14.8409 16.841 16.3333 15.0001 16.3333H13.3334C13.1038 16.3333 12.8859 16.4278 12.7296 16.5921L12.6669 16.667L12.0004 17.5557C11.0317 18.8473 9.12403 18.8877 8.0966 17.6769L7.99976 17.5557L7.33325 16.667C7.17587 16.4572 6.92905 16.3333 6.66675 16.3333H5.00008C3.15913 16.3333 1.66675 14.8409 1.66675 13V6.33333C1.66675 4.49238 3.15913 3 5.00008 3H15.0001ZM5.00008 4.66667C4.07961 4.66667 3.33341 5.41286 3.33341 6.33333V13C3.33341 13.9205 4.07961 14.6667 5.00008 14.6667H6.66675C7.45364 14.6667 8.19494 15.0373 8.66707 15.6668L9.33358 16.5555L9.3995 16.6336C9.74859 16.9983 10.354 16.9722 10.6666 16.5555L11.3331 15.6668L11.425 15.5521C11.8984 14.9925 12.5956 14.6667 13.3334 14.6667H15.0001C15.9206 14.6667 16.6667 13.9205 16.6667 13V6.33333C16.6667 5.41286 15.9206 4.66667 15.0001 4.66667H5.00008Z",fill:"var(--color-icon-base-default, #707070)"})]});function Gc({isGoBrandingEnabled:e=!1}){const{closeModal:t}=ls(),{submitFeedback:n}=Nc();return(0,s.jsx)(o.k,{justify:"center",flex:"1",children:(0,s.jsx)(wn.Vn,{onSubmit:e=>{n(e)},onClose:t,heading:e?"How do you like Superhuman Go?":"How do you like Grammarly?"})})}$c.__brand="nocolor";const Wc=({size:e})=>(0,s.jsx)(g.J,{size:e,icon:Zc,accessibilityLabel:"Anonymous user"}),Zc=e=>(0,s.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,s.jsx)("path",{d:"M7.00004 1.16663C6.22649 1.16663 5.48463 1.47392 4.93765 2.0209C4.39066 2.56788 4.08337 3.30974 4.08337 4.08329C4.08337 4.85684 4.39066 5.59871 4.93765 6.14569C5.48463 6.69267 6.22649 6.99996 7.00004 6.99996C7.77359 6.99996 8.51546 6.69267 9.06244 6.14569C9.60942 5.59871 9.91671 4.85684 9.91671 4.08329C9.91671 3.30974 9.60942 2.56788 9.06244 2.0209C8.51546 1.47392 7.77359 1.16663 7.00004 1.16663ZM5.7626 2.84586C6.09079 2.51767 6.53591 2.33329 7.00004 2.33329C7.46417 2.33329 7.90929 2.51767 8.23748 2.84586C8.56567 3.17404 8.75004 3.61916 8.75004 4.08329C8.75004 4.54742 8.56567 4.99254 8.23748 5.32073C7.90929 5.64892 7.46417 5.83329 7.00004 5.83329C6.53591 5.83329 6.09079 5.64892 5.7626 5.32073C5.43442 4.99254 5.25004 4.54742 5.25004 4.08329C5.25004 3.61916 5.43442 3.17404 5.7626 2.84586Z",fill:"var(--color-icon-base-default, #707070)"}),(0,s.jsx)("path",{d:"M5.25004 7.58329C3.63921 7.58329 2.33337 8.88913 2.33337 10.5V11.6666C2.33337 12.311 2.85571 12.8333 3.50004 12.8333H10.5C11.1444 12.8333 11.6667 12.311 11.6667 11.6666V10.5C11.6667 8.88913 10.3609 7.58329 8.75004 7.58329H5.25004ZM3.50004 10.5C3.50004 9.53346 4.28354 8.74996 5.25004 8.74996H8.75004C9.71654 8.74996 10.5 9.53346 10.5 10.5V11.6666H3.50004V10.5Z",fill:"var(--color-icon-base-default, #707070)"})]});Zc.__brand="nocolor";const Vc={userInitialsAvatar:"_userInitialsAvatar_d99r2_1",small:"_small_d99r2_15",large:"_large_d99r2_23"},qc=({size:e="small"})=>{const{getUserInfo:t}=Nc(),n=t(),r=function(e){if(e.anonymous)return"";const t=[e.firstName,e.lastName].map((e=>e.trim())).filter((e=>e.length>0));return 0===t.length?"":1===t.length?t[0].slice(0,2).toUpperCase():t.map((e=>e[0])).join("").toUpperCase()}(n),a="small"===e?Vc.small:Vc.large;return n.anonymous?(0,s.jsx)("span",{className:ia(Vc.userInitialsAvatar,Vc.anonymous,a),children:(0,s.jsx)(Wc,{size:e})}):(0,s.jsx)("span",{className:ia(Vc.userInitialsAvatar,a),children:r})},Kc="_userInfo_1km94_1",Jc=()=>{const{getUserInfo:e}=Nc(),t=e(),n=t.anonymous?"Anonymous":`${t.firstName} ${t.lastName}`;return(0,s.jsxs)(o.k,{padding:4,gap:3,direction:"row",align:"center",className:Kc,children:[(0,s.jsx)(qc,{size:"large"}),(0,s.jsxs)(o.k,{direction:"column",children:[(0,s.jsx)(l.x,{as:"span",variant:"heading-xsmall",children:n}),(0,s.jsx)(l.x,{as:"span",variant:"text-small",color:"base-subdued",children:t.email})]})]})},Yc="_userMenu_igj34_1",Xc="_userMenuActivator_igj34_22",Qc="_darkModeMenuItem_igj34_35",ed=({openSettings:e,onDarkModeChange:t,isGoBrandingEnabled:n=!1})=>{const{showModal:r}=ls(),{scheme:a,setScheme:i}=(0,R.t)(),l=(0,s.jsx)(E.z,{className:Xc,accessibilityLabel:"View options",children:(0,s.jsx)(qc,{})});return(0,s.jsxs)(d.v,{className:Yc,activator:l,children:[(0,s.jsx)(Jc,{}),(0,s.jsx)(d.v.Item,{icon:wn.ew,onClick:e,children:"Settings"},"settings"),(0,s.jsx)(d.v.Item,{icon:wn.ce,onMouseDown:e=>e.stopPropagation(),className:Qc,children:(0,s.jsx)(o.k,{align:"center",justify:"space-between",gap:2,children:(0,s.jsx)(da.r,{labelDisplay:"left",isSelected:"dark"===a,label:"Dark Mode",onChange:()=>{const e="light"===a||"auto"===a?"dark":"light";i(e),null==t||t(e)}})})},"darkMode"),(0,s.jsx)(d.v.Item,{icon:$c,onClick:()=>{r({content:(0,s.jsx)(Gc,{isGoBrandingEnabled:n}),title:"Give feedback"})},children:"Feedback"},"feedback")]})},td="_link_1tj56_1",nd=({label:e,onClick:t})=>(0,s.jsx)(T.r,{href:"#",className:td,onClick:e=>{e.preventDefault(),t()},variant:"inherit",children:e});function rd({message:e,trackImpression:t}){const{shortcut:n,onChangeShortcut:r}=e,{scheme:a}=(0,R.t)();(0,i.useEffect)((()=>{t()}),[t]);const c="base-default";return(0,s.jsx)(u.x,{bgColor:"background-base-subdued",borderRadius:2,padding:"var(--space-4) var(--space-3)",children:(0,s.jsx)(o.k,{gap:2,children:(0,s.jsxs)(o.k,{direction:"column",children:[(0,s.jsx)(l.x,{as:"p",weight:"semibold",color:c,variant:"text-xsmall",children:"Try the Grammarly shortcut"}),(0,s.jsxs)(l.x,{as:"p",weight:"normal",color:c,variant:"text-xsmall",children:["Use ",n," to open Grammarly any time."]}),(0,s.jsx)(l.x,{as:"p",weight:"normal",color:c,variant:"text-xsmall",children:(0,s.jsx)(nd,{onClick:r,label:"Change shortcut"})})]})})})}function ad({message:e,trackImpression:t}){const{previewEndDate:n}=e;return(0,i.useEffect)((()=>{t()}),[t]),(0,s.jsx)(u.x,{bgColor:"background-base-subdued",borderRadius:2,padding:3,children:(0,s.jsx)(o.k,{gap:2,children:(0,s.jsxs)(o.k,{direction:"column",children:[(0,s.jsx)(l.x,{as:"p",weight:"semibold",color:"base-default",variant:"text-xsmall",children:"Enjoy your free preview"}),(0,s.jsxs)(l.x,{as:"p",weight:"normal",color:"base-default",variant:"text-xsmall",children:["As thanks for trying Go early, you can use this agent free until ",n,"."]})]})})})}function sd({message:e,trackImpression:t}){switch(e.type){case"proPreviewAwarenessNoticeCardMessage":return(0,s.jsx)(ad,{message:e,trackImpression:t});case"assistantShortcutNoticeCardMessage":return(0,s.jsx)(rd,{message:e,trackImpression:t});default:return null}}const id=(e,t={})=>{const{stopWhenResolved:n=!0,minIntervalSec:r=3,maxIntervalSec:a=30,maxDurationSec:s=360,...o}=t,l=(e=>{const[t,n]=(0,i.useState)(null),[r,a]=(0,i.useState)(!1),[s,o]=(0,i.useState)(!1),[l,c]=(0,i.useState)(null),d=Ml(),u=(0,i.useRef)(e),g=(0,i.useRef)(d),h=(0,i.useRef)(null);(0,i.useEffect)((()=>{u.current=e,g.current=d}),[e,d]);const p=(0,i.useCallback)((async(e=!1)=>{const t=g.current,r=u.current;if(!t)return n(null),a(!1),o(!1),void c(null);if(!r||!r.rootCsbIngestionId)return n(null),a(!1),o(!1),void c(null);e?o(!0):a(!0),c(null);try{const s=await t.getExecutionSummary(r);n(s)}catch(e){const t=e instanceof Error?e:new Error("Failed to fetch execution summary");c(t)}finally{e?o(!1):a(!1)}}),[]);return(0,i.useEffect)((()=>{const t=(null==e?void 0:e.agentInstanceId)??null;t!==h.current&&(h.current=t,n(null),c(null))}),[null==e?void 0:e.agentInstanceId]),{executionSummary:t,isLoading:r,isRefetching:s,error:l,refetch:(0,i.useCallback)((async()=>{await p(!0)}),[p])}})(e),{executionSummary:c,refetch:d}=l,u=(0,i.useMemo)((()=>{if(null==c||!c.ingestions)return!1;const e=Object.values(c.ingestions);return e.some((e=>null===e.lastIndexedTimestamp))||e.some((e=>e.failedIngestions>0))}),[c]),g=(0,i.useCallback)((()=>!n||(!c||u)),[n,u,c]),{attemptCount:h,elapsedTimeMs:p,hasReachedMaxDuration:m,reset:f}=(0,Ta.W)(d,{minIntervalSec:r,maxIntervalSec:a,maxDurationSec:s,...o,enabled:!1!==o.enabled&&null!==e,shouldContinuePolling:g});return(0,i.useEffect)((()=>{f()}),[e,f]),{...l,attemptCount:h,elapsedTimeMs:p,hasReachedMaxDuration:m,reset:f}},od="_inlineLink_1i76p_1";var ld=(e=>(e.Info="info",e.Warning="warning",e.Success="success",e))(ld||{});function cd({title:e,content:t,actions:n=[],severity:r="info",containerPadding:a=4,containerPaddingTop:i,containerPaddingBottom:c,containerPaddingLeft:d,containerPaddingRight:h,ariaLive:p="polite",testId:m="Banner"}){const{scheme:f}=(0,R.t)(),x="dark"===f,v=n.length>0,b=t||v,C="warning"!==r?"background-base-subdued":x?"gold-20":"gold-0",y=(()=>{if("warning"===r)return x?"dark-default":"base-default"})(),k="warning"===r?ua.F:"success"===r?ga.t:ha.r;return(0,s.jsx)(u.x,{padding:a,paddingTop:i,paddingBottom:c,paddingLeft:d,paddingRight:h,"aria-live":p,children:(0,s.jsx)(u.x,{"data-testid":m,bgColor:C,borderRadius:2,padding:3,children:(0,s.jsxs)(o.k,{gap:2,align:b?void 0:"center",children:[(0,s.jsx)(o.k,{children:(0,s.jsx)(g.J,{size:"medium",icon:k,accessibilityLabel:"","aria-hidden":"true"})}),(0,s.jsxs)(o.k,{direction:"column",children:[(0,s.jsx)(l.x,{as:"p",weight:"semibold",color:y,variant:"text-xsmall",children:e}),b&&(0,s.jsx)(l.x,{as:"p",weight:"normal",color:y,variant:"text-xsmall",children:"string"!=typeof t&&void 0!==t?t:"string"==typeof t?(0,s.jsxs)(s.Fragment,{children:[t,v&&(0,s.jsxs)(s.Fragment,{children:[" ",n.map(((e,t)=>{const r=t===n.length-1;return(0,s.jsxs)("span",{children:[(0,s.jsx)(T.r,{href:"",onClick:t=>{t.preventDefault(),e.onClick()},className:od,variant:"inherit",accessibilityLabel:e.accessibilityLabel||e.label,"data-testid":e.testId,children:e.label}),!r&&(0,s.jsx)(s.Fragment,{children:t===n.length-2?", or ":", "}),r&&"."]},t)}))]})]}):null})]})]})})})}const dd=({agentId:e,selectedAgentId:t})=>{const{installedAgents:n}=vs(),r=Ml(),a=e===t,[o,l]=(0,i.useState)(!1),c=(0,i.useRef)(null),d=(0,i.useMemo)((()=>n.find((e=>e.id===t))),[n,t]),u=(0,i.useMemo)((()=>{if(!(a&&t&&(0,kn.d1)(t)&&r))return null;const e=r.getAgentInstancesForAgent(t);return e.length>0?e[0]:null}),[a,t,r]),{executionSummary:g,isLoading:h,error:p,attemptCount:m,hasReachedMaxDuration:f,refetch:x,reset:v}=id(u,{enabled:a}),b=(0,i.useCallback)((async()=>{if(t&&(0,kn.d1)(t)&&r)try{await Dn({agentId:t,agentDirectoryService:r,ingestionId:null==u?void 0:u.agentInstanceId,ingestionTab:Rn.SYNC_STATUS})}catch(e){xl.Logging.getLogger("AgentHeaderBanners").warn("openAgentSetupInNewTab failed",e)}}),[t,r,null==u?void 0:u.agentInstanceId]),C=(0,i.useCallback)((async()=>{v(),await x()}),[v,x]),y=(0,i.useMemo)((()=>!(null==g||!g.ingestions)&&Object.values(g.ingestions).some((e=>e.failedIngestions>0))),[g]),k=(0,i.useMemo)((()=>!(null==g||!g.ingestions)&&Object.values(g.ingestions).some((e=>null===e.lastIndexedTimestamp))),[g]);return(0,i.useEffect)((()=>{if(e!==t||h||p)return;const n=(null==g?void 0:g.ingestions)&&Object.keys(g.ingestions).length>0;if(!0===c.current&&!k&&!y&&n){l(!0);const e=setTimeout((()=>{l(!1)}),5e3);return()=>clearTimeout(e)}c.current=k}),[e,t,k,y,g,h,p]),(0,i.useEffect)((()=>{l(!1),c.current=null}),[t]),e!==t||h||p?null:o?(0,s.jsx)(cd,{severity:ld.Success,title:`${null==d?void 0:d.title} is connected`,testId:"Banner-Success"}):y?(0,s.jsx)(cd,{severity:ld.Warning,title:"Connected data issue",content:(0,s.jsxs)(s.Fragment,{children:["There's an issue with this connection's data, so it may not work properly. To learn more, check your"," ",(0,s.jsx)(T.r,{href:"",onClick:e=>{e.preventDefault(),b()},className:od,variant:"inherit",accessibilityLabel:"Check your connection settings","data-testid":"BannerSettingsLink",children:"connection settings"}),"."]}),testId:"Banner-FailedIngestions"}):null!=g&&g.hasTruncatedAtLimit?(0,s.jsx)(cd,{severity:ld.Warning,title:"Data limit reached",content:(0,s.jsxs)(s.Fragment,{children:["Your ",null==d?void 0:d.title," connection has reached its data limit. To fix this, select fewer data sources in your"," ",(0,s.jsx)(T.r,{href:"",onClick:e=>{e.preventDefault(),b()},className:od,variant:"inherit",accessibilityLabel:"Go to connection settings","data-testid":"BannerSettingsLink",children:"connection settings"}),"."]}),testId:"Banner-LimitReached"}):k?m>=5&&!f?(0,s.jsx)(cd,{severity:ld.Info,title:`Still connecting ${null==d?void 0:d.title}`,content:(0,s.jsxs)(s.Fragment,{children:["This connection is taking a while. Check"," ",(0,s.jsx)(T.r,{href:"",onClick:e=>{e.preventDefault(),b()},className:od,variant:"inherit",accessibilityLabel:"Go to connection settings to check for errors or make changes","data-testid":"BannerSettingsLink",children:"connection settings"})," ","for detailed status info."]}),testId:"Banner-TakingLonger"}):f?(0,s.jsx)(cd,{severity:ld.Info,title:"Connection is taking too long",content:(0,s.jsxs)(s.Fragment,{children:["This agent is still trying to connect in the background. You can check for errors in"," ",(0,s.jsx)(T.r,{href:"",onClick:e=>{e.preventDefault(),b()},className:od,variant:"inherit",accessibilityLabel:"Go to connection settings to check for errors and make changes","data-testid":"BannerSettingsLink",children:"connection settings"})," ","or"," ",(0,s.jsx)(T.r,{href:"",onClick:e=>{e.preventDefault(),C()},className:od,variant:"inherit",accessibilityLabel:"Try again to refresh the connection","data-testid":"BannerTryAgainLink",children:"refresh"}),"."]}),testId:"Banner-Timeout"}):(0,s.jsx)(cd,{severity:ld.Info,title:`Connecting ${null==d?void 0:d.title}`,content:"When it's done, you can work with the info you connected.",testId:"Banner-Connecting"}):null},ud=e=>{const{controls:t}=e,{agentId:n,closeAssistantPanel:r}=ss(),a=ks(Ja.AgentHeaderClose,{agentId:n}),o=(0,i.useMemo)((()=>({left:[...r?[{icon:pa.V,label:"Close",onClick:r,trackingRef:a.trackingRef}]:[],...(null==t?void 0:t.left)??[]],right:null==t?void 0:t.right})),[r,null==t?void 0:t.left,null==t?void 0:t.right,a.trackingRef]);return(0,s.jsx)(wn.i7,{...e,controls:o})},gd=e=>{const{agentId:t,selectedAgentId:n}=ss(),{installedAgents:r}=vs(),a=(0,i.useMemo)((()=>r.find((e=>e.id===n))),[r,n]),{message:o,trackImpression:l}=bs(Pl.AgentHeaderNoticeCard,{selectedAgent:a}),c=e.isAgentEmptyState&&o&&t===n;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ud,{...e,state:c?"collapsed":e.state}),c?(0,s.jsx)(u.x,{paddingTop:4,paddingLeft:4,paddingRight:4,paddingBottom:0,children:(0,s.jsx)(sd,{message:o,trackImpression:l})}):null,(0,s.jsx)(dd,{agentId:t,selectedAgentId:n})]})};const hd=()=>{if(!(0,i.useContext)(cs))throw new Error("Please ensure this agent is rendered inside the <Assistant /> component. If rendering the agent independently, use transparentMode prop with Assistant component.")};function pd(e){const t=i.useRef(null),[n,r]=i.useState(""),a=ms().isFeatureEnabled(yl.GoBranding),l=""!==n.trim(),c=a?"Ask Go":"Ask AI",d=e.placeholder||c,u=(0,s.jsx)(wn.oP,{size:"medium",goBrandingEnabled:a,accessibilityLabel:d});return(0,s.jsx)(wn.xg,{textAreaRef:t,value:n,onChange:r,placeholder:d,autoFocus:l,controls:e=>(0,s.jsx)(o.k,{direction:"row",justify:"end",width:"100%",align:"end",children:(0,s.jsx)(wn.TH,{hasValue:l,isProcessing:!1,onStop:()=>{},onSubmit:e.handleSubmit})}),disabled:e.disabled,icon:u,onSubmit:e.onSubmit,contextChip:void 0})}const md="_separator_g8reo_1",fd="_inputContainer_g8reo_7";function xd(e){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:md}),(0,s.jsx)(o.k,{direction:"column",justify:"center",className:fd,children:(0,s.jsx)(pd,{...e})})]})}const vd=e=>{const t=function(){var e;return null==(e=(0,i.useContext)(Cs))?void 0:e.uphook}(),n=(null==t?void 0:t.isEligibleForUphook(e))??!1,[r,a]=(0,i.useState)(void 0),s=eo((async()=>{if(t&&n)return t.getUphook(e)}),[t,e,n]);return(0,i.useEffect)((()=>{"success"===s.status&&a(s.data)}),[s]),(0,i.useEffect)((()=>{if(!t||!n)return;const r=t.updates.on(e,(e=>{a((t=>t&&{...t,value:{...t.value,...e}}))}));return()=>{null==r||r.dispose()}}),[t,e,n]),(0,i.useMemo)((()=>n?"loading"===s.status?{status:"loading"}:"error"===s.status?{status:"error",error:s.error}:r?{status:"success",data:r}:{status:"not-eligible"}:{status:"not-eligible"}),[n,s,r])};var bd=(e=>(e.ChatInputUphookSlot="ChatInputUphookSlot",e))(bd||{});function Cd(e){const t=e.cloneNode(!0);[".gds-sr-only"].forEach((e=>{t.querySelectorAll(e).forEach((e=>e.remove()))})),t.querySelectorAll("a span").forEach((e=>{var t;"Opens a new window"===((null==(t=e.textContent)?void 0:t.trim())||"")&&e.remove()}));return{html:t.innerHTML,text:t.textContent??""}}function yd(e){const{messageId:t,copyableTextId:n,title:r,rawArtifactContent:a}=e,{id:o}=hs(),{agentId:l}=ss(),{responseCopied:d}=ps(),[u,g]=(0,i.useState)("default"),{trackingRef:h,trackClicked:p}=ks(Ja.CopyArtifactButton,{agentId:l??"",chatId:o,messageId:t??""});(0,i.useEffect)((()=>{if("copied"===u){const e=setTimeout((()=>{g("default")}),1500);return()=>clearTimeout(e)}}),[u]);const m="copied"===u;return(0,s.jsx)(c.h,{ref:h,onClick:()=>{var e;null==(e=document.activeElement)||e.blur(),p(),d({chatId:o,responseLength:a.length,messageId:t}),function(e){const{html:t,text:n}=Cd(e);if(typeof ClipboardItem<"u"){const e=new Blob([t],{type:"text/html"}),r=new Blob([n],{type:"text/plain"}),a=new ClipboardItem({"text/plain":r,"text/html":e});navigator.clipboard.write([a]).catch(console.error)}else{const e=e=>{var r,a;null==(r=e.clipboardData)||r.setData("text/html",t),null==(a=e.clipboardData)||a.setData("text/plain",n),e.preventDefault()};document.addEventListener("copy",e),document.execCommand("copy"),document.removeEventListener("copy",e)}}(document.getElementById(n)),g("copied")},variant:"tertiary",icon:ma.c,accessibilityLabel:r?`Copy Grammarly generated text for ${r}`:"Copy Grammarly generated text",tooltipContentProps:{children:m?"Copied":"Copy"},tooltipProps:{open:!!m||void 0},"aria-describedby":n})}function kd({messageId:e,copyableTextId:t,rawArtifactContent:n,capabilities:a}){var o,l;const{id:c}=hs(),{agentId:d}=ss(),u=null==(o=null==a?void 0:a.insertArtifact)?void 0:o.isEnabled,g=null==(l=null==a?void 0:a.insertArtifact)?void 0:l.tooltip,[h,p]=(0,i.useState)(wd(u,g)),{trackingRef:m,trackClicked:f}=ks(Ja.InsertArtifactButton,{agentId:d??"",chatId:c,messageId:e??""});switch((0,i.useEffect)((()=>{p(wd(u,g))}),[u,g]),h){case"displayed":return(0,s.jsx)(jd,{trackingRef:m,chatId:c,messageId:e,copyableTextId:t,rawArtifactContent:n,capabilities:a,onClick:()=>{f(),p("inserted")}});case"inserted":return(0,s.jsx)(Sd,{trackingRef:m,onTimeout:()=>p("displayed")});case"disabled":return(0,s.jsxs)(S.u,{children:[(0,s.jsx)(S.aJ,{asChild:!0,children:(0,s.jsx)(E.z,{variant:"secondary",text:"Insert",isDisabled:!0})}),(0,s.jsx)(S._v,{root:null,children:g})]});case"hidden":return null;default:(0,r.vE)(h)}}function wd(e,t){return e?"displayed":t?"disabled":"hidden"}function jd(e){const{chatId:t,messageId:n,copyableTextId:r,rawArtifactContent:a,onClick:i,trackingRef:o,capabilities:l}=e,{responseInserted:c}=ps();return(0,s.jsx)(E.z,{ref:o,variant:"secondary",text:"Insert",onClick:()=>{var e;c({chatId:t,responseLength:a.length,messageId:n});const s=document.getElementById(r),{html:o,text:d}=Cd(s);null==(e=null==l?void 0:l.insertArtifact)||e.execute({html:o,plainText:d,rawArtifactContent:a,messageId:n}),i()}})}function Sd(e){const{trackingRef:t,onTimeout:n}=e;return(0,i.useEffect)((()=>{const e=setTimeout(n,3e3);return()=>clearTimeout(e)}),[n]),(0,s.jsx)(E.z,{ref:t,iconStart:I.L,variant:"tertiary",text:"Inserted"})}const Id="_artifactContent_r2gxs_1",Ad="_verticalBar_r2gxs_7";function Ed(e){const{title:t,content:n,messageId:r,artifactId:a,capabilities:i}=e;return(0,s.jsxs)(o.k,{className:Id,direction:"column",children:[(0,s.jsx)("div",{id:a,children:(0,s.jsx)(wn.r4,{children:n})}),(0,s.jsx)("div",{className:Ad}),(0,s.jsxs)(o.k,{gap:2,children:[(0,s.jsx)(kd,{messageId:r,copyableTextId:a,rawArtifactContent:n,capabilities:i}),(0,s.jsx)(yd,{messageId:r,copyableTextId:a,title:t,rawArtifactContent:n})]})]})}function _d(e){const{content:t,artifactId:n}=e;return(0,s.jsxs)(o.k,{className:Id,direction:"column",children:[(0,s.jsx)("div",{id:n,children:(0,s.jsx)(wn.e5,{content:t,isStreaming:!0})}),(0,s.jsx)("div",{className:Ad})]})}function Md(e){const{content:t,isStreaming:n=!1,messageId:r,title:a,capabilities:o}=e,l=(0,i.useId)();return n?(0,s.jsx)(_d,{artifactId:l,content:t}):(0,s.jsx)(Ed,{messageId:r,artifactId:l,title:a,content:t,capabilities:o})}function Rd({debugInfo:e,children:t,debugTitle:n="Raw Message"}){const[r,a]=i.useState(!1),o=i.useCallback((e=>{if(e.metaKey){const t=e.target;if(t.closest("button")||t.closest("a")||t.closest('[role="button"]'))return;a((e=>!e))}}),[]),l=e?e.networkMessage:void 0;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{onClick:void 0!==e?o:void 0,children:t}),r&&l&&(0,s.jsx)(Md,{isStreaming:!1,title:n,content:l})]})}const Dd="_thinkingBox_c7dl5_1";function Td(){return(0,s.jsx)(u.x,{className:Dd,accessibilityLabel:"Assistant is thinking",children:(0,s.jsxs)(o.k,{"aria-hidden":"true",gap:1,padding:.25,children:[(0,s.jsx)(wn.Xd,{}),(0,s.jsx)(wn.Xd,{}),(0,s.jsx)(wn.Xd,{})]})})}const Od="_citation_nj8l7_1";function Ld({href:e,citationIndex:t,recordId:n,searchRequestId:r}){const{trackingRef:a}=ws(Ja.ChatResponseSource,{location:"inline",recordId:n,searchRequestId:r});return(0,s.jsx)("a",{href:e,className:Od,ref:a,target:"_blank",rel:"noopener noreferrer",children:t})}function Nd(e){const{messageId:t,title:n,tabIndex:r,content:a,isStreaming:i,capabilities:o}=e,{id:l}=hs(),{agentId:c}=ss(),{trackingRef:d}=ks(Ja.IdeationTabContent,{agentId:c??"",chatId:l,messageId:t??"",tabIndex:r});return(0,s.jsx)("div",{ref:d,children:(0,s.jsx)(Md,{title:n,content:a,isStreaming:i,messageId:t,capabilities:o})})}const Pd="_root_1b8kx_1";function Bd(e){const{alternatives:t,isStreaming:n=!1,messageId:r,capabilities:a}=e,{id:i}=hs(),{agentId:o}=ss(),{trackingRef:l}=ks(Ja.IdeationTabs,{agentId:o??"",chatId:i,messageId:r??"",count:t.length});if(1===t.length)return(0,s.jsx)(Md,{messageId:r,isStreaming:n,content:t[0].content,title:t[0].title,capabilities:a});const c=t.map((e=>e.title)).join(";");return(0,s.jsx)(u.x,{children:(0,s.jsxs)(fa.m,{size:"small",className:ia(Pd),children:[(0,s.jsx)(fa.m.TabList,{ref:l,accessibilityLabel:"Ideation tabs",bottomBorder:"none",children:t.map(((e,t)=>(0,s.jsx)(fa.m.Tab,{id:t.toString(),label:e.title},t)))},c),t.map((({content:e,title:t},i)=>(0,s.jsx)(fa.m.Panel,{id:i.toString(),children:(0,s.jsx)(Nd,{messageId:r,title:t,tabIndex:i,content:e,isStreaming:n,capabilities:a},i)},i)))]})})}const Fd=({icon:e,accessibilityLabel:t=""})=>{const n=ms().isFeatureEnabled(yl.GoBranding);if(!e)return null;switch(e){case"aiDetectorAgent":return(0,s.jsx)(wn.Fq,{size:"medium",accessibilityLabel:t});case"plagiarismAgent":return(0,s.jsx)(wn.PJ,{size:"medium",accessibilityLabel:t});case"proofreaderAgent":return(0,s.jsx)(wn.YN,{size:"medium",accessibilityLabel:t});case"aiGraderAgent":return(0,s.jsx)(wn.DV,{size:"medium",accessibilityLabel:t});case"citationFinderAgent":return(0,s.jsx)(wn.ro,{size:"medium",accessibilityLabel:t});case"expertPanelAgent":return(0,s.jsx)(wn.W5,{size:"medium",accessibilityLabel:t});case"humanizerAgent":return(0,s.jsx)(wn.bN,{size:"medium",accessibilityLabel:t});case"readerReactionAgent":return(0,s.jsx)(wn.f8,{size:"medium",accessibilityLabel:t});default:return(0,s.jsx)(wn.oP,{size:"medium",accessibilityLabel:t,goBrandingEnabled:n})}},zd="_highlight_10ijo_1",Hd="_stopHighlight_10ijo_18",Ud=({action:e,onClick:t})=>{const{id:n}=hs(),[r,a]=(0,i.useState)("animating"),{agentId:o}=ss(),{trackingRef:l,trackClicked:c}=ks(Ja.QuickActionButton,{agentId:o??"",chatId:n,quickAction:e.kind,message:$d(e)?e.message:void 0,systemKind:$d(e)?e.systemMessageKind:void 0});return(0,s.jsx)(wn.Kk,{ref:l,iconStart:e.icon?(0,s.jsx)(Fd,{icon:e.icon}):void 0,text:e.label,className:ia(e.isRecommended&&"animating"===r&&zd,e.isRecommended&&"stopped"===r&&Hd),onClick:()=>{c(),a("stopped"),null==t||t()}})},$d=e=>"chatMessage"===e.kind,Gd="_stack_1air9_1",Wd=({actions:e,title:t,isStreaming:n,isMostRecentMessage:r,capabilities:a})=>n||!r?null:(0,s.jsxs)(o.k,{direction:"column",align:"stretch",gap:3,paddingTop:2,className:Gd,children:[t&&(0,s.jsx)(l.x,{as:"span",variant:"text-xsmall",weight:"medium",color:"base-subdued",children:t}),(0,s.jsx)(o.k,{direction:"column",align:"stretch",gap:2,children:e.map((e=>(0,s.jsx)(Ud,{action:e,onClick:()=>{var t;return null==(t=null==a?void 0:a.sendQuickAction)?void 0:t.execute(e)}},e.label)))})]});function Zd(e){const{status:t,isStreaming:n}=e;return n?(0,s.jsx)(l.x,{as:"p",color:"base-subdued",italic:!0,variant:"text-small",marginTop:2,marginBottom:2,children:t}):null}function Vd({messageId:e,suggestionIds:t}){const{id:n}=hs(),{agentId:r}=ss(),{applyAllSuggestions:a}=xs(),i=ms(),{trackingRef:o,trackClicked:l}=ws(Ja.ApplyAllSuggestionsButton,{agentId:r??"",chatId:n,messageId:e});return i.isFeatureEnabled(yl.AcceptAllSuggestions)?(0,s.jsx)(E.z,{ref:o,variant:"secondary",size:"small",onClick:()=>{a(t),l()},children:"Apply all"}):null}function qd({messageId:e,suggestionIds:t}){const{id:n}=hs(),{agentId:r}=ss(),{dismissAllSuggestions:a}=xs(),{trackingRef:i,trackClicked:o}=ws(Ja.DismissAllSuggestionsButton,{agentId:r??"",chatId:n,messageId:e});return(0,s.jsx)(E.z,{ref:i,variant:"secondary",size:"small",onClick:()=>{a(t),o()},children:"Dismiss all"})}function Kd(e){const{messageId:t,availableSuggestionsCount:n}=e,{id:r}=hs(),{agentId:a}=ss(),{focusSuggestions:i}=xs(),{trackingRef:o,trackClicked:l}=ws(Ja.ShowSuggestionsButton,{agentId:a??"",chatId:r,messageId:t});return(0,s.jsx)(wn.WD,{ref:o,title:"Suggestions",suggestions:n,onClick:()=>{i(),l()}})}function Jd(e){const{messageId:t,suggestions:n,isStreaming:r}=e,a=ms(),l=function(e){const{onUpdate:t,hasSuggestion:n}=xs(),[r,a]=(0,i.useState)([]),s=(0,i.useCallback)((()=>{const t=e.filter((e=>n(e.contentId))).map((e=>e.contentId));a((e=>e.length===t.length&&e.every(((e,n)=>e===t[n]))?e:t))}),[n,e]);return(0,i.useEffect)((()=>{s()}),[e,n,s]),(0,i.useEffect)((()=>{const e=t(s);return()=>e.dispose()}),[t,s]),r}(n);return!a.isFeatureEnabled(yl.SuggestionsSummary)||r||0===l.length?null:(0,s.jsxs)(o.k,{direction:"column",gap:2,marginTop:2,marginBottom:2,children:[(0,s.jsx)(Kd,{messageId:t,availableSuggestionsCount:l.length}),l.length>1&&(0,s.jsxs)(o.k,{align:"center",gap:2,children:[(0,s.jsx)(Vd,{messageId:t,suggestionIds:l}),(0,s.jsx)(qd,{messageId:t,suggestionIds:l})]})]})}function Yd({content:e,isStreaming:t=!1,sticky:n=!0}){return n||t?(0,s.jsx)(l.x,{as:"p",color:"base-subdued",italic:!0,variant:"text-small",children:e}):null}function Xd(e){return"string"==typeof e?e:Array.isArray(e)?e.map((e=>Xd(e))).join(""):i.isValidElement(e)?i.Children.toArray(e.props.children).map((e=>Xd(e))).join(""):""}function Qd(e,t,n){if(null==n||!n.length||!e)return;const r=Xd(t);if(!r)return;const a=r.match(/^\[(\d+)\]$/),s=a?parseInt(a[1],10):0;if(s<1||s>n.length)return;const i=n[s-1];return(null==i?void 0:i.url)===e?{index:s,source:i}:void 0}function eu({part:e,isStreaming:t,isMostRecentMessage:n,messageId:a,capabilities:o,sources:l}){const c=(0,i.useCallback)((e=>({...e,a:t=>{var n;const{children:r,node:a,...i}=t,o=Qd(i.href,r,l);return o?(0,s.jsx)(Ld,{href:o.source.url,citationIndex:o.index,recordId:o.source.recordId,searchRequestId:o.source.searchRequestId}):null==(n=e.a)?void 0:n.call(e,t)}})),[l]);switch(e.kind){case"text":return(0,s.jsx)(wn.e5,{content:e.content,isStreaming:t,updateComponents:c});case"artifact":return(0,s.jsx)(Md,{messageId:a,content:e.content,isStreaming:t,capabilities:o});case"alt-artifacts":return(0,s.jsx)(Bd,{messageId:a,alternatives:e.alts,isStreaming:t,capabilities:o});case"tool-call":return(0,s.jsx)(Yd,{content:e.content,sticky:e.sticky,isStreaming:t});case"suggestions-status":return(0,s.jsx)(Zd,{status:e.status,isStreaming:t});case"suggestions-summary":return(0,s.jsx)(Jd,{messageId:a,suggestions:e.suggestions,isStreaming:t});case"quick-actions":return(0,s.jsx)(Wd,{actions:e.actions,title:e.title,isStreaming:t,isMostRecentMessage:n,capabilities:o});case"widget":case"research-page":return null;default:return(0,r.vE)(e)}}function tu(e){switch(e.type){case"ai_message":return[{kind:"text",content:e.content}];case"generated_text":return[{kind:"artifact",content:e.content}];case"proposed_edits":return function(e){return e.edits.filter((e=>e.reason)).map((e=>({kind:"suggestions-status",status:e.reason||""})))}(e);case"reading_document":return[{kind:"tool-call",content:"Reading document",sticky:!1}];case"generic_tool_call":return[{kind:"tool-call",content:e.content,sticky:e.sticky}];case"error":default:return[];case"quick_actions":return[{kind:"quick-actions",actions:e.actions,title:e.title}];case"widget":return[{kind:"widget",widget:e.widget_type}];case"research_page":return[{kind:"research-page",...e}]}}const nu="`````artifact",ru="`````";function au(e){const t=[];let n=0;for(;n<e.length;){const r=e.indexOf(nu,n);if(-1===r){const r=e.slice(n);(r.length>0||0===t.length)&&t.push({kind:"text",content:r});break}const a=e.slice(n,r);(a.length>0||0===t.length)&&t.push({kind:"text",content:a});const s=r+nu.length,i=e.indexOf(ru,s);if(-1===i){const n=e.slice(s);t.push({kind:"artifact",content:n});break}const o=e.slice(s,i);t.push({kind:"artifact",content:o}),n=i+ru.length}return 0===t.length&&t.push({kind:"text",content:""}),t}function su(e){const t=[],n=[];for(const r of e){const[e,a]=au(r.content);if(e&&0===t.length&&t.push(e),!a||"artifact"!==a.kind)break;n.push({title:r.title,content:a.content})}return n.length>0&&t.push({kind:"alt-artifacts",alts:n}),t}function iu(e){return"kind"in e&&"thinking"===e.kind}function ou(e,t,n){if(iu(e))return[];if(function(e){return"responseFormat"in e&&e.responseFormat===Ea.B5.AiEditorOutput}(e))return function(e,t,n,r){const a=e.flatMap(tu);return t.length>0&&n&&!r&&a.push({kind:"suggestions-summary",suggestions:t.map((e=>({contentId:e.contentId})))}),a}(e.items,e.alerts,t,n);if(function(e){return"responseFormat"in e&&e.responseFormat===Ea.B5.PromptOutput}(e)){const t=e.variations;return t?su(t):au(e.content)}if(function(e){return!("responseFormat"in e&&void 0!==e.responseFormat||iu(e))}(e)){const t=e.variations;return t?su(t):au(e.content)}return function(e){return"responseFormat"in e&&e.responseFormat===Ea.B5.Other}(e)?au(e.content):[]}function lu({account:e}){return(0,s.jsxs)(o.k,{direction:"row",gap:1,children:[(0,s.jsx)(l.x,{as:"span",variant:"text-xsmall",color:"base-subdued",children:"Account"}),(0,s.jsx)(l.x,{as:"span",variant:"text-xsmall",color:"base-default",children:e})]})}function cu(e){if(!e)return e;if(e.includes(" "))return e.charAt(0).toUpperCase()+e.slice(1);const t=e.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/([A-Z])([A-Z][a-z])/g,"$1 $2");return t.charAt(0).toUpperCase()+t.slice(1)}function du(e){if(void 0===e.value)return"";switch(e.type){case"string":case"email":case"html":return e.value;case"date":return function(e){return new Date(e).toLocaleString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}(e.value);case"number":return e.value.toString();case"boolean":return e.value?"Yes":"No";case"array":return"string"===e.itemType?e.value.join(", "):(console.warn("Rendering for property not supported",e),"");default:return console.warn("Rendering for property not supported",e),""}}function uu({property:e}){const t=du(e),n=function(e){return e&&e.charAt(0).toUpperCase()+e.slice(1)}(e.label);return t&&n?(0,s.jsxs)(o.k,{direction:"column",gap:1,children:[(0,s.jsx)(l.x,{as:"span",variant:"text-xsmall",color:"base-subdued",children:n}),(0,s.jsx)(l.x,{as:"span",variant:"text-xsmall",color:"base-default",children:t})]}):null}const gu="_truncated_5t284_1";function hu({children:e,expanded:t,expandable:n,onExpandableChange:r}){const a=(0,i.useRef)(null);return(0,i.useEffect)((()=>{if(a.current&&!t){const e=a.current.scrollHeight>258;null==r||r(e)}}),[e,t,r]),t?(0,s.jsx)(u.x,{paddingLeft:4,paddingRight:4,children:e}):(0,s.jsx)(u.x,{paddingLeft:4,paddingRight:4,children:(0,s.jsx)("div",{ref:a,className:n?gu:void 0,style:{maxHeight:258},children:e})})}const pu="_footer_1wc75_1";function mu({status:e,title:t,onApprove:n,onDecline:r}){return(0,s.jsxs)(u.x,{className:pu,children:["pending"===e&&(0,s.jsxs)(o.k,{direction:"row",gap:1,children:[(0,s.jsx)(E.z,{variant:"primary",size:"small",onClick:n,children:"Approve"}),(0,s.jsx)(E.z,{variant:"secondary",size:"small",onClick:r,children:"Decline"})]}),"approved"===e&&(0,s.jsx)(fu,{title:t,label:"Approved",icon:I.L,variant:"success"}),"declined"===e&&(0,s.jsx)(fu,{title:t,label:"Declined",icon:ba,variant:"critical"})]})}function fu({title:e,label:t,icon:n,variant:r}){return(0,s.jsxs)(o.k,{direction:"row",gap:1,align:"center",children:[(0,s.jsxs)(l.x,{as:"span",variant:"text-xsmall",color:"base-default",weight:"medium",children:[cu(e),": ",t]}),(0,s.jsx)(o.k,{alignSelf:"start",children:(0,s.jsx)(g.J,{icon:n,accessibilityLabel:t,variant:r,size:"small"})})]})}const xu=()=>(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("path",{d:"M5.65999 13V10.3333H2.99333C2.62514 10.3333 2.32666 10.0349 2.32666 9.66667C2.32666 9.29848 2.62514 9 2.99333 9H6.32666C6.69485 9 6.99333 9.29848 6.99333 9.66667L6.99333 13C6.99333 13.3682 6.69485 13.6667 6.32666 13.6667C5.95847 13.6667 5.65999 13.3682 5.65999 13Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M10.3334 2.99658L10.3334 5.66325L13.0001 5.66325C13.3683 5.66325 13.6667 5.96173 13.6667 6.32992C13.6667 6.69811 13.3683 6.99658 13.0001 6.99658L9.66675 6.99658C9.29856 6.99658 9.00008 6.6981 9.00008 6.32991L9.00008 2.99658C9.00008 2.62839 9.29856 2.32991 9.66675 2.32991C10.0349 2.32991 10.3334 2.62839 10.3334 2.99658Z",fill:"currentColor"})]});xu.__brand="nocolor",xu.__source="GDS";const vu=()=>(0,s.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M3.33301 8.66671C3.33301 8.29852 3.63148 8.00004 3.99967 8.00004C4.36786 8.00004 4.66634 8.29852 4.66634 8.66671V11.3334H7.33301C7.7012 11.3334 7.99967 11.6319 7.99967 12C7.99967 12.3682 7.7012 12.6667 7.33301 12.6667H3.99967C3.63148 12.6667 3.33301 12.3682 3.33301 12V8.66671ZM11.333 7.33337V4.66671H8.66634C8.29815 4.66671 7.99967 4.36823 7.99967 4.00004C7.99967 3.63185 8.29815 3.33337 8.66634 3.33337H11.9997C12.3679 3.33337 12.6663 3.63185 12.6663 4.00004V7.33337C12.6663 7.70156 12.3679 8.00004 11.9997 8.00004C11.6315 8.00004 11.333 7.70156 11.333 7.33337Z",fill:"currentColor"})});vu.__brand="nocolor",vu.__source="GDS";const bu="_title_74jnx_1",Cu="_agentIconPlaceholder_74jnx_5";function yu({title:e,expanded:t,expandable:n,onToggleExpand:r}){const{agentId:a}=ss(),{isLoading:l,agentMetadata:d}=(e=>{const t=(0,kn.Ue)(e),[n,r]=(0,i.useState)(),[a,s]=(0,i.useState)(!0),o=Ml();return(0,i.useEffect)((()=>{(async()=>{try{const e=await(null==o?void 0:o.getAgentMetadata(t));r(null==e?void 0:e.metadata)}catch{}finally{s(!1)}})()}),[t,o]),{isLoading:a,agentMetadata:n}})(a||"");return(0,s.jsxs)(o.k,{direction:"row",justify:"space-between",align:"center",paddingLeft:4,paddingRight:4,paddingTop:4,children:[(0,s.jsxs)(o.k,{direction:"row",gap:2,align:"center",children:[l&&!d&&(0,s.jsx)("div",{className:Cu}),d&&(0,s.jsx)(wn.J$,{agent:d,size:"small"}),(0,s.jsx)(D.X,{as:"h3",variant:"heading-xxsmall",className:bu,children:cu(e)})]}),n&&(0,s.jsx)(c.h,{size:"small",variant:"tertiary",icon:t?xu:vu,onClick:r,accessibilityLabel:t?"Collapse":"Expand",tooltipProps:{openDelay:500,placement:"left"}})]})}const ku="_pendingToolCallCard_1ax8y_1";function wu({pendingToolCall:e,status:t,onApprove:n,onDecline:r}){const{toolCallId:a,externalUserAccount:l,title:c,properties:d}=e,[g,h]=(0,i.useState)(!1),[p,m]=(0,i.useState)(!1),f=(0,i.useCallback)((()=>{h((e=>!e))}),[]),x=(0,i.useCallback)((()=>{n(a)}),[n,a]),v=(0,i.useCallback)((()=>{r(a)}),[r,a]),b=(0,i.useCallback)((e=>{m(e)}),[]);return(0,s.jsx)(u.x,{className:ku,borderRadius:3,children:(0,s.jsxs)(o.k,{direction:"column",gap:4,children:[(0,s.jsx)(yu,{title:c,expanded:g,expandable:p,onToggleExpand:f}),(0,s.jsx)(hu,{expanded:g,expandable:p,onExpandableChange:b,children:(0,s.jsxs)(o.k,{direction:"column",gap:3,children:[l&&(0,s.jsx)(lu,{account:l}),d.map(((e,t)=>(0,s.jsx)(uu,{property:e},t)))]})}),(0,s.jsx)(mu,{title:c,status:t,onApprove:x,onDecline:v})]})})}function ju({message:e}){const t="final"===e.kind?e.pendingToolCallActions:void 0;if(!t||0===t.length)return null;const n=t[0];return(0,s.jsx)(wu,{status:"pending",onApprove:()=>{},onDecline:()=>{},pendingToolCall:n},n.toolCallId)}const Su="_hideSourcesButton_1ad1j_1",Iu="_viewSourcesButton_1ad1j_1",Au="_sourcePill_1ad1j_31",Eu="_index_1ad1j_47",_u="_icon_1ad1j_59",Mu="_title_1ad1j_63";function Ru(e){const{sources:t}=e,[n,r]=(0,i.useState)(!0),a=(0,i.useCallback)((()=>{r((e=>!e))}),[]);if(null==t||!t.length)return null;const l=(0,Ha._6)(t.length,"source","sources");return(0,s.jsxs)(o.k,{direction:"column",gap:1,children:[(0,s.jsxs)("button",{className:Iu,onClick:a,children:[t.length," ",l,(0,s.jsx)(g.J,{icon:n?Ca.b:ya,accessibilityLabel:"",size:"small"})]}),n?null:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.k,{direction:"column",gap:2,children:t.map(((e,t)=>(0,s.jsx)(Du,{source:e,index:t+1},e.url)))}),t.length>5&&(0,s.jsxs)("button",{className:Su,onClick:a,children:["Hide ",l]})]})]})}function Du({source:e,index:t}){const{trackingRef:n}=ws(Ja.ChatResponseSource,{location:"footer",recordId:e.recordId,searchRequestId:e.searchRequestId});return(0,s.jsxs)("a",{ref:n,className:Au,href:e.url,target:"_blank",rel:"noopener noreferrer",children:[(0,s.jsx)("div",{className:Eu,children:t}),(0,s.jsx)("img",{className:_u,alt:"",src:e.iconUrl}),(0,s.jsx)("div",{className:Mu,children:e.title})]})}const Tu="_stepList_m4x3r_1",Ou="_step_m4x3r_1",Lu="_animatedStep_m4x3r_39",Nu="_animatedStepText_m4x3r_47";function Pu({message:e,initialCollapsed:t}){const[n,r]=(0,i.useState)(t),a=n?"Show thought process":"Hide thought process";if("thinking"===e.kind||!e.planning||0===e.planning.length)return null;if("final"===e.kind)return(0,s.jsxs)(o.k,{gap:3,direction:"column",children:[(0,s.jsxs)(E.z,{onClick:()=>{r(!n)},variant:"secondary",size:"small",children:[a,(0,s.jsx)(g.J,{icon:n?Ca.b:ya,accessibilityLabel:a,size:"small"})]}),!n&&(0,s.jsx)("ul",{className:Tu,children:e.planning.map(((e,t)=>(0,s.jsx)("li",{className:Ou,children:e.title},`index-${t}`)))})]});const c=e.planning[e.planning.length-1];return(0,s.jsx)(o.k,{gap:3,direction:"column",children:(0,s.jsx)("div",{className:Lu,children:(0,s.jsx)(l.x,{className:Nu,as:"span",variant:"text-small",children:c.title})},c.title)})}function Bu(e){const{message:t,isMostRecentMessage:n,capabilities:r}=e,a="final"!==t.kind&&!t.stopped,o=(0,i.useMemo)((()=>ou(t,n,a)),[t,n,a]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Pu,{message:t,initialCollapsed:"final"===t.kind}),o.map(((i,l)=>{var c;const d=a&&l===o.length-1,u={part:i,messageId:t.id,isStreaming:d,isMostRecentMessage:n,capabilities:r,sources:"thinking"!==t.kind?t.sources:void 0},g=null==(c=e.externalContentPartHandler)?void 0:c.handleContentPart(u);return g&&"handled"===g.kind?g.component:(0,s.jsx)(_c,{id:"ContentPart",fallback:(0,s.jsx)(wn.Tv,{content:"Part of the message cannot be displayed"}),children:(0,s.jsx)(eu,{...u})},`${i.kind}-${l}`)})),(0,s.jsx)(Ru,{sources:"thinking"!==t.kind?t.sources:void 0}),(0,s.jsx)(ju,{message:t})]})}function Fu(e){return(0,s.jsx)(_c,{id:"RenderedResponse",fallback:(0,s.jsx)(wn.Tv,{content:"Part of the message cannot be displayed"}),children:(0,s.jsx)(Bu,{...e})})}const zu="_assistantChatMessage_525qj_1",Hu=i.forwardRef(((e,t)=>{const{message:n,isMostRecentMessage:r,capabilities:a}=e;return(0,s.jsx)(_c,{id:"AssistantChatMessage",fallback:(0,s.jsx)(wn.Tv,{title:"Something went wrong",content:"Message cannot be displayed."}),children:(0,s.jsx)(Rd,{debugInfo:n.debugInfo,debugTitle:"Raw Response Message",children:(0,s.jsx)(u.x,{className:zu,"data-testid":"AssistantChatMessage","aria-live":"polite",ref:t,children:"thinking"!==n.kind||n.stopped?(0,s.jsx)(Fu,{externalContentPartHandler:e.externalContentPartHandler,message:n,capabilities:a,isMostRecentMessage:r}):(0,s.jsx)(Td,{})})})})}));Hu.displayName="AssistantChatMessage";const Uu="_scrollToBottomButton_hi5xi_1",$u="_scrollToBottomButtonHidden_hi5xi_27",Gu=i.forwardRef(((e,t)=>{const{children:n,className:r,padding:a=3,gap:l=6,disableAutoScroll:c=!1}=e,[d,u]=i.useState(!1),g=i.useRef(0),h=i.useRef(!1),p=i.useRef(null),m=i.useCallback((()=>{var e;c||h.current?u(!!p.current&&Zu(p.current)):null==(e=p.current)||e.scrollTo({top:p.current.scrollHeight,behavior:"smooth"})}),[c]);i.useEffect((()=>{p.current&&u(Zu(p.current))}),[]),function(e,t){i.useEffect((()=>{const n=e.current;if(!n)return;const r=new MutationObserver(t);return r.observe(n,{childList:!0,subtree:!0}),()=>{r.disconnect()}}),[e,t])}(p,m),i.useEffect((()=>{const e=e=>{const t=e.target,n=t.scrollTop;h.current=n<g.current,u(Zu(t)),g.current=n};return p.current&&p.current.addEventListener("scroll",e),()=>{p.current&&p.current.removeEventListener("scroll",e)}}),[]);return(0,s.jsxs)(o.k,{direction:"column",style:{overflow:"auto",position:"relative"},children:[(0,s.jsx)(o.k,{"data-testid":"gr-auto-scroll-container",direction:"column",padding:a,className:r,gap:l,ref:e=>{t&&("function"==typeof t?t(e):t.current=e),p.current=e},style:{overflow:"auto"},children:n}),(0,s.jsx)(E.z,{className:Wu(Uu,!d&&$u),variant:"secondary",onClick:()=>{var e;u(!1),h.current=!1,null==(e=p.current)||e.scrollTo({top:p.current.scrollHeight,behavior:"smooth"})},"aria-label":"Scroll to the bottom",children:(0,s.jsx)(wn.Hf,{accessibilityLabel:""})})]})}));function Wu(...e){return e.filter(Boolean).join(" ")}Gu.displayName="AutoScrollContainer";function Zu(e){return e.scrollTop+e.clientHeight<e.scrollHeight-50}function Vu(e){return"assistant"===(null==e?void 0:e.type)&&"thinking"===(null==e?void 0:e.kind)}const qu="_chatAutoScrollContainer_16t37_1",Ku=({children:e,mostRecentMessage:t,mostRecentAssistantMessageRef:n})=>{const r=(0,wn.VL)("chatAutoScrollContainer"),a=(({ref:e,mostRecentAssistantMessageRef:t,mostRecentMessage:n})=>{const[r,a]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{if(!t.current||!e.current)return;if(Vu(n))return void a(!1);const r=new IntersectionObserver((([t])=>{if(!e.current)return;const n=t.boundingClientRect.top<=100;a(n)}),{root:e.current,threshold:[.85,.9,.95,1],rootMargin:"0px"});return r.observe(t.current),()=>{r.disconnect()}}),[e,t,n]),r})({ref:r,mostRecentAssistantMessageRef:n,mostRecentMessage:t});return(0,i.useEffect)((()=>{const e=Vu(t);r.current&&e&&r.current.scrollTo({top:r.current.scrollHeight,behavior:"smooth"})}),[r,t]),(0,s.jsx)(Gu,{ref:e=>{r.current=e},gap:4,padding:3,className:qu,disableAutoScroll:a,children:e})};function Ju({onRetry:e,message:t,previousMessage:n}){const{id:r}=hs(),{agentId:a}=ss(),i=ws(Ja.RetryButton,{chatId:r,agentId:a??""});return(0,s.jsx)("div",{"data-testid":"ChatError",children:(0,s.jsx)(Rd,{debugInfo:t.debugInfo,debugTitle:"Raw Error Message",children:(0,s.jsx)(wn.Tv,{title:t.title,content:t.content,action:{onClick:e,label:"Retry",accessibilityLabel:`Retry send message "${n}"`,tracking:i}})})})}function Yu({accessibilityLabel:e,className:t,height:n,width:r}){return(0,s.jsxs)("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",width:r??16,height:n??16,viewBox:"0 0 16 16",fill:"none","aria-hidden":""===e,"aria-label":e,children:[(0,s.jsx)("path",{d:"M8.00003 11.9981C10.2092 11.9981 12.0001 10.2072 12.0001 7.99807C12.0001 5.78892 10.2092 3.99805 8.00003 3.99805C5.79087 3.99805 4 5.78892 4 7.99807C4 10.2072 5.79087 11.9981 8.00003 11.9981Z",fill:"white"}),(0,s.jsx)("path",{d:"M7.99988 4.00004H14.927C14.2251 2.78383 13.2153 1.77386 11.9992 1.07169C10.7831 0.369521 9.40359 -9.79574e-05 7.99935 1.94734e-08C6.59511 9.79964e-05 5.21564 0.369909 3.99966 1.07225C2.78367 1.77459 1.77404 2.7847 1.07227 4.00101L4.53582 10.0001L4.53892 9.99928C4.18659 9.3917 4.00065 8.70197 3.99986 7.99962C3.99907 7.29727 4.18346 6.60713 4.53443 5.99876C4.88539 5.39038 5.39054 4.88529 5.99895 4.53439C6.60736 4.18348 7.29753 3.99918 7.99988 4.00004Z",fill:"url(#paint0_linear_5622_4937)"}),(0,s.jsx)("path",{d:"M8.00018 11.1664C9.7491 11.1664 11.1669 9.74861 11.1669 7.9997C11.1669 6.25078 9.7491 4.83301 8.00018 4.83301C6.25127 4.83301 4.8335 6.25078 4.8335 7.9997C4.8335 9.74861 6.25127 11.1664 8.00018 11.1664Z",fill:"#1A73E8"}),(0,s.jsx)("path",{d:"M11.464 10.0009L8.00046 16C9.40469 16.0002 10.7842 15.6307 12.0004 14.9286C13.2165 14.2265 14.2263 13.2166 14.9284 12.0005C15.6304 10.7843 15.9999 9.40478 15.9996 8.00054C15.9994 6.5963 15.6294 5.21688 14.9269 4.00098H7.99986L7.99902 4.00408C8.70137 4.00272 9.39167 4.18655 10.0003 4.53704C10.609 4.88753 11.1145 5.39228 11.4659 6.00042C11.8172 6.60855 12.0021 7.29858 12.0018 8.00093C12.0014 8.70328 11.816 9.39314 11.464 10.0009Z",fill:"url(#paint1_linear_5622_4937)"}),(0,s.jsx)("path",{d:"M4.53616 10.001L1.0726 4.00195C0.370305 5.21796 0.000540619 6.59744 0.000488287 8.00168C0.000435955 9.40592 0.370098 10.7854 1.0723 12.0015C1.77451 13.2175 2.78451 14.2273 4.00074 14.9292C5.21698 15.6311 6.59657 16.0004 8.00082 16L11.4644 10.001L11.4621 9.99869C11.1121 10.6076 10.6078 11.1135 9.99991 11.4654C9.39205 11.8172 8.70217 12.0026 7.99982 12.0028C7.29747 12.0031 6.60747 11.8182 5.99938 11.4667C5.39128 11.1153 4.88658 10.6097 4.53616 10.001Z",fill:"url(#paint2_linear_5622_4937)"}),(0,s.jsxs)("defs",{children:[(0,s.jsxs)("linearGradient",{id:"paint0_linear_5622_4937",x1:"1.07227",y1:"5.00005",x2:"14.927",y2:"5.00005",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{stopColor:"#D93025"}),(0,s.jsx)("stop",{offset:"1",stopColor:"#EA4335"})]}),(0,s.jsxs)("linearGradient",{id:"paint1_linear_5622_4937",x1:"6.90752",y1:"15.8931",x2:"13.8349",y2:"3.89451",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{stopColor:"#FCC934"}),(0,s.jsx)("stop",{offset:"1",stopColor:"#FBBC04"})]}),(0,s.jsxs)("linearGradient",{id:"paint2_linear_5622_4937",x1:"8.86602",y1:"15.5005",x2:"1.93864",y2:"3.50195",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{stopColor:"#1E8E3E"}),(0,s.jsx)("stop",{offset:"1",stopColor:"#34A853"})]})]})]})}function Xu({accessibilityLabel:e,className:t,width:n=18,height:r=18}){return(0,s.jsxs)("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",width:n,height:r,viewBox:"0 0 18 18",fill:"none","aria-hidden":""===e,"aria-label":e,children:[(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.25 16.5H13.5C15.1569 16.5 16.5 15.1569 16.5 13.5V11.25H15V13.5C15 14.3284 14.3284 15 13.5 15H11.25V16.5ZM3 11.25V13.5C3 14.3284 3.67157 15 4.5 15H6.75V16.5H4.5C2.84315 16.5 1.5 15.1569 1.5 13.5V11.25H3ZM6.75 3H4.5C3.67157 3 3 3.67157 3 4.5V6.75H1.5V4.5C1.5 2.84315 2.84315 1.5 4.5 1.5H6.75V3ZM15 6.75V4.5C15 3.67157 14.3284 3 13.5 3H11.25V1.5H13.5C15.1569 1.5 16.5 2.84315 16.5 4.5V6.75H15Z",fill:"var(--color-icon-base-default, #707070)"}),(0,s.jsx)("path",{d:"M5.625 7.125H9L12.375 7.125",stroke:"var(--color-icon-base-default, #707070)",strokeWidth:"1.5"}),(0,s.jsx)("path",{d:"M5.625 10.875H9L10.875 10.875",stroke:"var(--color-icon-base-default, #707070)",strokeWidth:"1.5"})]})}function Qu(e){const t=function(e){return"kind"in e?e:(0,Ea.zE)(e.context)||(0,Ea._M)(e.context)?{kind:"selection",className:e.className,height:e.height,width:e.width}:(0,Ea.Ot)(e.context)&&e.context.icon?{kind:"icon",iconSrc:e.context.icon.src,className:e.className,height:e.height,width:e.width}:{kind:"fallback",className:e.className,height:e.height,width:e.width}}(e);if("selection"===t.kind)return(0,s.jsx)(Xu,{accessibilityLabel:"Selected text context",className:t.className,width:t.width,height:t.height});if("icon"===t.kind&&t.iconSrc){const e=t.iconAlt||"Custom icon for context";return(0,s.jsx)(wn.bC,{alt:e,className:t.className,src:t.iconSrc,width:t.width??14,height:t.height??14,errorState:()=>(0,s.jsx)(Yu,{accessibilityLabel:e,className:t.className})})}return"fallback"===t.kind?(0,s.jsx)(Yu,{accessibilityLabel:"Application context",className:t.className,width:t.width,height:t.height}):null}function eg(e){return(0,Ea.zE)(e)?`"${e}"`:(0,Ea._M)(e)?e.selectedText:(0,Ea.Ot)(e)?e.title:""}const tg="_truncateLongText_8pr95_1",ng="_defaultColor_8pr95_7",rg="_subduedColor_8pr95_11";function ag(e){const{context:t,className:n,height:r,width:a,iconContainerClassName:i,includeSubtitle:c}=e;if(!t)return null;const d=function(e){return(0,Ea._M)(e)||(0,Ea.zE)(e)?"Selected text":(0,Ea.Ot)(e)?e.origin:null}(t),u=(0,s.jsx)(l.x,{as:"span",variant:"text-xsmall",weight:"medium",className:ia(tg,c?ng:rg),children:eg(t)});return(0,s.jsxs)(o.k,{direction:"row",align:"center",gap:2,className:ia(n,tg),children:[(0,s.jsx)(o.k,{flex:"0 0 auto",className:i,children:(0,s.jsx)(Qu,{context:t,height:r,width:a})}),c&&d?(0,s.jsxs)(o.k,{direction:"column",className:tg,children:[u,(0,s.jsx)(l.x,{as:"span",variant:"text-xsmall",weight:"medium",className:ia(tg,rg),children:d})]}):u]})}const sg={attachedContextChip:"_attachedContextChip_1cmb2_1",interactive:"_interactive_1cmb2_16",removeSourceButtonContainer:"_removeSourceButtonContainer_1cmb2_20",removeSourceButton:"_removeSourceButton_1cmb2_20",iconContainer:"_iconContainer_1cmb2_42"};function ig({context:e,onClear:t}){const n=function(e){return"object"==typeof e&&"kind"in e?e.kind:"selection"}(e),[r,a]=(0,i.useState)(null),l=!!t,{trackingRef:d,trackClicked:u}=ks(Ja.RemoveContextItemButton,{contextType:n});return(0,s.jsxs)(o.k,{className:ia(sg.attachedContextChip,l&&sg.interactive),gap:1,children:[(0,s.jsx)(ag,{context:e,className:sg.attachedContextHint,iconContainerClassName:sg.iconContainer,height:16,width:16,includeSubtitle:!0}),(0,s.jsx)("div",{className:sg.removeSourceButtonContainer,ref:a,children:r&&l&&(0,s.jsx)(c.h,{ref:d,onClick:()=>{u(),t()},size:"small",icon:pa.V,className:sg.removeSourceButton,accessibilityLabel:"Remove source",variant:"tertiary",tooltipContentProps:{root:r}})})]})}const og="_userChatMessage_1bbcw_1";function lg(e){const{message:t,showAttachedContextHint:n=!0}=e;return(0,s.jsx)(Rd,{debugInfo:t.debugInfo,debugTitle:"Raw User Message",children:(0,s.jsxs)(o.k,{gap:6,direction:"column",children:[t.context&&n?(0,s.jsxs)(o.k,{children:[(0,s.jsx)(o.k,{flex:"1 1 auto"}),(0,s.jsx)(ig,{context:t.context})]}):null,(0,s.jsx)(u.x,{className:og,"data-testid":"UserChatMessage",children:(0,s.jsx)(l.x,{as:"span",variant:"text-small",children:t.content})})]})})}function cg(e,t){for(let n=e.length-1;n>=0;n--){const r=e[n];if(t(r,n))return r}}const dg=({capabilities:e,externalContentPartHandler:t})=>{const{messages:n,retryMessage:a}=hs(),o=(0,i.useRef)(null),l=n[n.length-1],c=(0,i.useMemo)((()=>{const e=cg(n,(e=>"assistant"===e.type));return null==e?void 0:e.id}),[n]),d=()=>{a()};return(0,s.jsx)(Ku,{mostRecentMessage:l,mostRecentAssistantMessageRef:o,children:n.map(((a,i,l)=>{var u;switch(a.type){case"user":{const e=cg(l,((e,t)=>(0,Ea.Z$)(e)&&t<i)),t=e&&(0,Ea.Z$)(e)&&!(0,Ea.AA)(e.context,a.context);return(0,s.jsx)(lg,{message:a,showAttachedContextHint:t},a.id)}case"assistant":return(0,s.jsx)(Hu,{externalContentPartHandler:t,message:a,isMostRecentMessage:a.id===c,ref:a.id===c?o:null,capabilities:e},a.id);case"error":return(0,s.jsx)(Ju,{message:a,onRetry:d,previousMessage:null==(u=n[i-1])?void 0:u.content},a.id);case"system":return null;default:(0,r.vE)(a)}}))})},ug="_chatInput_jtdrq_1";function gg({contextChip:e,contextSwitcher:t,contextId:n,placeholder:r,selectedContext:a,selectedAgentIds:l,agentSelector:c}){const d=ms(),{installedAgents:u}=vs(),{stopStreamingResponse:g,messages:h,sendMessage:p,id:m}=hs(),{responseStoppedByUser:f}=ps(),x=d.isFeatureEnabled(yl.GoBranding),v=d.isFeatureEnabled(yl.ContextSelectorRedesign),b=i.useRef(null),[C,y]=i.useState(""),k=""!==C.trim(),w=i.useMemo((()=>u.filter((e=>e.hasData))),[u]).length>0,j=t||w,S=h[h.length-1],I=(0,Ea.qC)(S),A=()=>{var e;g(),f({chatId:m}),null==(e=b.current)||e.focus()},E=x?"Ask Go":"Ask AI";return(0,s.jsx)(wn.xg,{className:v?ug:void 0,alwaysShowControls:!0,textAreaRef:b,value:C,onSubmit:(e,t)=>{if(!I){const r=((null==l?void 0:l.length)??0)>0,s=n||r?{...r&&{scopedThirdPartyAgentIds:l},...n&&{contextId:n}}:void 0,i=null!=t&&t.includeContext?a:void 0;p(e,s,i),y("")}},onChange:e=>{y(e)},controls:({handleSubmit:e})=>v?(0,s.jsxs)(o.k,{direction:"row",justify:t?"space-between":"end",width:"100%",gap:2,align:"center",children:[(0,s.jsx)(o.k,{direction:"row",align:"center",gap:1,children:t}),(0,s.jsx)(wn.TH,{hasValue:k,isProcessing:I,onStop:A,onSubmit:e})]}):(0,s.jsxs)(o.k,{direction:"row",justify:j?"space-between":"end",width:"100%",gap:2,align:"center",children:[j?(0,s.jsxs)(o.k,{direction:"row",align:"center",gap:1,children:[t,w&&c]}):null,(0,s.jsx)(wn.TH,{hasValue:k,isProcessing:I,onStop:A,onSubmit:e})]}),contextChip:e,placeholder:r||E})}const hg=({chatId:e,children:t})=>{const{setActiveChat:n,createNewChat:r}=hs();return function(){const{agentId:e}=ss();if(!e)throw new Error("Agent ID is required to use chat subscription");const{subscribeToChatEvents:t,unsubscribeFromChatEvents:n}=ds((e=>e.chat));(0,i.useEffect)((()=>(t(e),()=>{n(e)})),[t,n,e])}(),(0,i.useEffect)((()=>{void 0!==e?n(e):r()}),[e,n,r]),t};function pg(e){return(0,Ea.Z$)(e)&&!!e.context}function mg(e){return e.filter(pg).map((({context:e})=>e))}function fg(){const{contextSources:e,currentAppId:t,selectedContextSourceIds:n,detachCurrentContext:r,attachContext:a,resetContextSource:s,getCurrentAppContext:i,getSelectedContextId:o}=ds((e=>({contextSources:e.contextExtraction.contextSources,currentAppId:e.contextExtraction.currentAppId,selectedContextSourceIds:e.contextExtraction.selectedContextSourceIds,attachContext:e.contextExtraction.attachContext,detachCurrentContext:e.contextExtraction.detachCurrentContext,resetContextSource:e.contextExtraction.resetContextSource,getCurrentAppContext:e.contextExtraction.getCurrentAppContext,getSelectedContextId:e.contextExtraction.getSelectedContextId}))),l=ms(),{messages:c}=hs(),d=((e,t,n)=>{const r=t[t.length-1],a=n[r===xi.default?e:r];return(null==a?void 0:a.type)===vi.AppContent&&"error"===a.status?null:a||null})(t,n,e),u=o(),g=bi(d),h=mg(c);return{currentAppId:t,availableContexts:Object.values(e).filter((e=>{const t=bi(e)??void 0;return(l.isFeatureEnabled(yl.ContextSelectorRedesign)||e.id!==(null==d?void 0:d.id))&&h.every((e=>!(0,Ea.AA)(e,t)))})),selectedContext:g,selectedContextSource:d,attachContext:a,detachCurrentContext:e=>u&&r(e,u),resetContextSource:s,getCurrentAppContext:i}}function xg(e){return t=>{const{selectedContext:n,selectedContextSource:r}=fg(),a=null==r?void 0:r.id;return(0,s.jsx)(e,{...t,contextId:a,selectedContext:n??void 0})}}function vg(e){return t=>{const{id:n,messages:r}=hs(),{selectedContext:a,detachCurrentContext:l}=fg(),c=0===r.length,d=!!a&&(0,Ea.vr)(a),u=(0,i.useMemo)((()=>{if(d)return!1;const e=mg(r).some((e=>(0,Ea.AA)(e,a??void 0)));return c||!e}),[c,r,a,d]);return(0,s.jsx)(e,{...t,contextChip:a&&u?(0,s.jsx)(o.k,{align:"center",justify:"start",children:(0,s.jsx)(ig,{context:a,onClear:()=>{l(n)}})}):null})}}const bg="_agentIcon_9z4ye_1";function Cg({selectedAgents:e}){const t=e.length-3,n=ms().isFeatureEnabled(yl.ContextSelectorRedesign);if(0===e.length)return n?null:(0,s.jsx)(g.J,{icon:ka.F,accessibilityLabel:"Select agents"});const r={bgColor:"white",direction:"row",align:"center",justify:"center",borderRadius:1,borderColor:"base-subdued"};return(0,s.jsxs)(o.k,{direction:"row",children:[e.slice(0,3).map(((e,t)=>(0,s.jsx)(o.k,{className:bg,marginLeft:0===t?0:-2,...r,children:e.renderIcon({size:"small"})},e.id))),t>0&&(0,s.jsxs)(o.k,{className:bg,marginLeft:-2,height:12,width:12,color:"base-default",...r,children:["+",t]},"remaining")]})}const yg="_popoverContent_1ccss_1",kg=({children:e,message:t,trackImpression:n})=>(0,s.jsx)(pc,{title:"Add a source",content:"Go gets smarter when it knows more. Share what you're working on.",placement:"top-start",onDismiss:t.onDismiss,trackImpression:n,className:yg,children:e}),wg=({isDisabled:e,hasSelectedContext:t,contextSwitcherWasOpened:n,children:r})=>{const{message:a,trackImpression:o}=bs(Pl.AddDataSourcePopover),{agentId:l,selectedAgentId:c}=ss(),d=l===c,[u,g]=(0,i.useState)(!1),h=(0,i.useCallback)((()=>{g(!0),o()}),[o]),p=!!a,m=!n;return p&&!e&&!t&&m&&d||u&&p&&m&&d?(0,s.jsx)(kg,{message:a,trackImpression:h,children:r}):r},jg="_contextSwitcherButton_1gg6x_1",Sg=(0,i.forwardRef)((({isDisabled:e,hasSelectedContext:t,onClick:n,...r},a)=>{const{id:o}=hs(),{trackClicked:l}=ks(Ja.ContextSwitcherButton,{chatId:o}),[d,u]=(0,i.useState)(!1);return(0,s.jsx)(wg,{isDisabled:e,hasSelectedContext:t,contextSwitcherWasOpened:d,children:(0,s.jsx)(c.h,{...r,ref:a,className:jg,icon:wa.m,accessibilityLabel:"Add sources to chat",tooltipProps:{children:"Add sources to chat"},variant:"tertiary",isDisabled:e,tooltipContentProps:{children:"Add sources to chat"},onClick:e=>{l(),u(!0),setTimeout((()=>null==n?void 0:n(e)),0)}})})})),Ig="_root_dpaq2_1",Ag="_menuItemIcon_dpaq2_9",Eg="_menuItem_dpaq2_9",_g="_contextSwitcherMenu_dpaq2_37",Mg="_mainMenuItemIconContainer_dpaq2_41",Rg="_agentMenuItemTitleContainer_dpaq2_50",Dg="_selectedMenuItemIcon_dpaq2_56",Tg="_menuItemTitle_dpaq2_60",Og="_menuItemContainer_dpaq2_66";function Lg(e){const{label:t,subLabel:n,onClick:r,icon:a,isDisabled:i,onMouseDown:c,onKeyDown:u}=e;return(0,s.jsx)(d.v.Item,{onClick:r,isDisabled:i,onMouseDown:c,onKeyDown:u,children:(0,s.jsxs)(o.k,{direction:"row",align:"center",gap:2,children:[(0,s.jsx)(o.k,{flex:"0 0 auto",className:Mg,children:(0,s.jsx)(g.J,{icon:a,size:"small",accessibilityLabel:`${t} external link`})}),(0,s.jsxs)(o.k,{direction:"column",children:[(0,s.jsx)(l.x,{as:"span",variant:"text-xsmall",weight:"semibold",color:"base-default",children:t}),(0,s.jsx)(l.x,{as:"span",variant:"text-xsmall",color:"base-subdued",children:n})]})]})},t)}function Ng(e){var t,n,a;const{contextSource:l,onClick:c,isSelected:u,onKeyDown:h,onMouseDown:p}=e,{id:m}=hs(),{trackingRef:f,trackClicked:x}=ks(Ja.ContextOption,{chatId:m,contextType:l.type});let v="fallback";l.type===vi.AppContent?v=null!=(t=l.context)&&t.icon?"icon":"fallback":l.type===vi.TextSelection?v="selection":(0,r.vE)(l,`Unknown context source type: ${l.type}`);const b=null==(a=null==(n=l.context)?void 0:n.icon)?void 0:a.src,C=(0,i.useCallback)((()=>(0,s.jsx)(Qu,{kind:v,iconSrc:b,className:Ag})),[v,b]),y=bi(l);return null===y?null:(0,s.jsx)(d.v.Item,{onClick:()=>{x(),c(l)},icon:C,onMouseDown:p,onKeyDown:h,className:Eg,children:(0,s.jsxs)(o.k,{className:Og,direction:"row",align:"center",gap:1,justify:"space-between",children:[(0,s.jsx)("span",{ref:f,className:Tg,children:eg(y)}),u&&(0,s.jsx)(g.J,{className:Dg,size:"small",icon:I.L,accessibilityLabel:"Selected"})]})},l.id)}function Pg(e){const{agent:t,isSelected:n,onClick:r,onKeyDown:a,onMouseDown:l}=e,c=(0,i.useCallback)((()=>{r(t)}),[r,t]);return(0,s.jsx)(d.v.Item,{className:Eg,onClick:c,onMouseDown:l,onKeyDown:a,children:(0,s.jsxs)(o.k,{className:Og,direction:"row",align:"center",gap:1,justify:"space-between",children:[(0,s.jsxs)(o.k,{className:Rg,flex:"0 1 auto",direction:"row",align:"center",gap:1,children:[t.renderIcon({size:"medium"}),(0,s.jsx)("span",{className:Tg,children:t.title})]}),n&&(0,s.jsx)(g.J,{className:Dg,size:"small",icon:I.L,accessibilityLabel:"Selected"})]})},t.id)}function Bg(e){const{label:t,onClick:n,onMouseDown:r,onKeyDown:a}=e;return(0,s.jsx)(d.v.Item,{onClick:n,onMouseDown:r,onKeyDown:a,children:(0,s.jsxs)(o.k,{direction:"row",align:"center",gap:1,children:[(0,s.jsx)(g.J,{size:"small",icon:P.n,accessibilityLabel:"Back to main menu"}),(0,s.jsx)(l.x,{as:"span",variant:"text-xsmall",color:"base-subdued",weight:"normal",children:t})]})},"go-back")}function Fg(e){const{agent:t,onConnect:n}=e,r=(0,i.useCallback)((()=>{n(t.id)}),[n,t.id]);return(0,s.jsx)(d.v.Item,{className:Eg,onClick:r,children:(0,s.jsxs)(o.k,{direction:"row",align:"center",gap:1,justify:"space-between",style:{width:"100%"},children:[(0,s.jsxs)(o.k,{flex:"0 1 auto",direction:"row",align:"center",gap:1,children:[(0,s.jsx)(wn.J$,{agent:t,size:"medium"}),(0,s.jsx)("span",{children:t.name})]}),(0,s.jsx)(o.k,{flex:"0 0 auto",justify:"end",children:(0,s.jsx)(l.x,{as:"span",variant:"text-xsmall",color:"base-subdued",children:"Connect"})})]})},t.id)}const zg=[kn.Y4.GoogleCalendar,kn.Y4.Gmail,kn.Y4.OutlookMail,kn.Y4.GoogleDrive,kn.Y4.Jira,kn.Y4.Confluence];function Hg(){return{getSubMenuKeyDownHandler:(0,i.useCallback)((e=>t=>{("Enter"===t.key||" "===t.key)&&t.stopPropagation(),"ArrowLeft"===t.key&&(t.stopPropagation(),e())}),[]),getNavigateToSubMenuHandler:(0,i.useCallback)((e=>t=>{("Enter"===t.key||" "===t.key||"ArrowRight"===t.key)&&(t.stopPropagation(),e())}),[]),onMouseDownHandler:(0,i.useCallback)((e=>{e.stopPropagation()}),[])}}function Ug(e){const{resetMenu:t,isAgentSelected:n,handleSelectAgent:r,handleAddAgentClick:a,installedAgentsWithData:o}=e,{onMouseDownHandler:l,getSubMenuKeyDownHandler:c}=Hg(),{availableAgents:u}=function(){const e=Ml(),[t,n]=(0,i.useState)([]),[r,a]=(0,i.useState)(!0),[s,o]=(0,i.useState)(null);return(0,i.useEffect)((()=>{!async function(){if(e)try{a(!0),o(null);const t=(await e.listAgents({packIds:zg})).items.sort(((e,t)=>zg.indexOf(Number(e.id))-zg.indexOf(Number(t.id))));n(t)}catch(e){const t=e instanceof Error?e:new Error("Failed to fetch available agents");o(t),console.error("Error fetching promoted connections:",t)}finally{a(!1)}else a(!1)}()}),[e]),{availableAgents:t,isLoading:r,error:s}}(),g=c(t),h=o.length>0;return(0,s.jsxs)(d.v.Section,{label:"Use connections",labelDisplay:"hidden",children:[(0,s.jsx)(Bg,{label:"Use connections",onClick:t,onMouseDown:l,onKeyDown:g},"go-back-from-agent-menu"),h?o.map((e=>(0,s.jsx)(Pg,{agent:e,isSelected:n(e),onClick:r,onKeyDown:g,onMouseDown:e=>e.stopPropagation()},e.id))):u.map((e=>(0,s.jsx)(Fg,{agent:e,onConnect:a},e.id)))]})}function $g(e){const{selectedContext:t,resetMenu:n,remainingContextSources:r,textSelectionContextSources:a,onContextSelect:o,hasAppContentContextSources:l,hasTextSelectionContextSources:c}=e,{onMouseDownHandler:u,getSubMenuKeyDownHandler:g}=Hg(),h=g(n),p=(0,i.useCallback)((e=>!!t&&e.id===t.id),[t]),m=(0,i.useCallback)((e=>{t&&e.id===t.id?o(null):o(e)}),[t,o]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(d.v.Section,{label:"Select a tab",labelDisplay:"hidden",children:[(0,s.jsx)(Bg,{label:"Select a tab",onClick:n,onMouseDown:u,onKeyDown:h},"go-back-from-app-menu"),r.map((e=>(0,s.jsx)(Ng,{contextSource:e,onClick:m,isSelected:p(e),onKeyDown:h,onMouseDown:u},e.id)))]}),l&&c&&(0,s.jsx)(d.v.Separator,{}),a.map((e=>(0,s.jsx)(Ng,{contextSource:e,onClick:m,isSelected:p(e),onKeyDown:h,onMouseDown:u},e.id)))]})}function Gg(e){const{isContextMenuDisabled:t,setMenuType:n}=e,{getNavigateToSubMenuHandler:r,onMouseDownHandler:a}=Hg(),o=(0,i.useCallback)((()=>{n("app")}),[n]),l=(0,i.useCallback)((()=>{n("agent")}),[n]),c=r(o),u=r(l);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.v.Section,{label:"Add sources to chat",children:(0,s.jsx)(Lg,{icon:ja.X,label:"Select a tab",subLabel:"Ask about an open website",onClick:o,onMouseDown:a,onKeyDown:c,isDisabled:t})},"add-sources-to-chat"),(0,s.jsx)(d.v.Separator,{},"separator"),(0,s.jsx)(d.v.Section,{label:"Use connections",labelDisplay:"hidden",children:(0,s.jsx)(Lg,{icon:ka.F,label:"Use connections",subLabel:"Work with info from other apps",onClick:l,onMouseDown:a,onKeyDown:u})},"agent-sources")]})}const Wg=8;function Zg(e){const{availableContexts:t,onContextSelect:n,maxContexts:r=Wg,selectedContext:a,selectedAgents:c,onAgentSelect:u}=e,g=ms(),[h,p]=(0,i.useState)("main"),{installedAgents:m}=vs(),f=Ml(),x=g.isFeatureEnabled(yl.ContextSelectorRedesign),v=(0,i.useRef)(null),b=(0,i.useMemo)((()=>m.filter((e=>e.hasData))),[m]),C=(0,i.useCallback)((e=>{v.current={viewType:e?kn.Gk.AgentProfile:kn.Gk.Directory,agentId:e}}),[]),y=(0,i.useCallback)((()=>{p("main")}),[]),k=(0,i.useCallback)((()=>{if(y(),v.current&&f){const{agentId:e}=v.current;e?f.requestDeeplink({viewType:kn.Gk.AgentProfile,agentId:e}):f.requestDeeplink({viewType:kn.Gk.Directory}),v.current=null}}),[y,f]),w=(0,i.useCallback)((e=>{c.includes(e)?u((t=>t.filter((t=>t.id!==e.id)))):u((t=>[...t,e]))}),[c,u]),j=(0,i.useCallback)((e=>c.some((t=>t.id===e.id))),[c]),S=Math.max(Math.min(r,Wg),1),I=t.filter(Ci).sort(((e,t)=>t.lastUpdated.getTime()-e.lastUpdated.getTime())).slice(0,S),A=t.filter(wi),E=I.length>0,_=A.length>0,M=(0,s.jsx)(Sg,{isDisabled:!E&&!_,hasSelectedContext:!!a}),R=(0,i.useMemo)((()=>{switch(h){case"main":return(0,s.jsx)(Gg,{isContextMenuDisabled:!E&&!_,setMenuType:p});case"app":return(0,s.jsx)($g,{selectedContext:a,resetMenu:y,remainingContextSources:I,textSelectionContextSources:A,onContextSelect:n,hasAppContentContextSources:E,hasTextSelectionContextSources:_});case"agent":return(0,s.jsx)(Ug,{resetMenu:y,isAgentSelected:j,handleSelectAgent:w,installedAgentsWithData:b,handleAddAgentClick:C})}}),[C,w,E,_,b,j,h,n,I,y,a,A]);return x?(0,s.jsxs)(o.k,{direction:"row",align:"center",justify:"start",gap:1,children:[(0,s.jsx)(d.v,{className:Ig,activator:M,onClose:k,children:(0,s.jsx)(o.k,{className:_g,direction:"column",children:R})}),c.length>0&&(0,s.jsxs)(o.k,{direction:"row",align:"center",gap:2,borderRadius:1,children:[(0,s.jsx)(Cg,{selectedAgents:c}),(0,s.jsx)(l.x,{as:"span",variant:"text-xsmall",weight:"semibold",color:"base-subdued",children:"Connections"})]})]}):(0,s.jsx)(d.v,{className:Ig,activator:M,children:(0,s.jsxs)(o.k,{className:_g,direction:"column",children:[(0,s.jsx)(d.v.Section,{label:"Work with",children:I.map(((e,t)=>(0,s.jsx)(Vg,{contextSource:e,onClick:n},t)))}),E&&_&&(0,s.jsx)(d.v.Separator,{}),A.map(((e,t)=>(0,s.jsx)(Vg,{contextSource:e,onClick:n},t)))]})})}function Vg(e){var t,n,a;const{contextSource:o,onClick:l}=e,{id:c}=hs(),{trackingRef:u,trackClicked:g}=ks(Ja.ContextOption,{chatId:c,contextType:o.type});let h="fallback";o.type===vi.AppContent?h=null!=(t=o.context)&&t.icon?"icon":"fallback":o.type===vi.TextSelection?h="selection":(0,r.vE)(o,`Unknown context source type: ${o.type}`);const p=null==(a=null==(n=o.context)?void 0:n.icon)?void 0:a.src,m=(0,i.useCallback)((()=>(0,s.jsx)(Qu,{kind:h,iconSrc:p,className:Ag})),[h,p]),f=bi(o);return null===f?null:(0,s.jsx)(d.v.Item,{onClick:()=>{g(),l(o)},icon:m,children:(0,s.jsx)("span",{ref:u,children:eg(f)})},o.id)}function qg(e){const t=[];for(const n of e)try{t.push((0,kn.Oo)(n.id))}catch{}return t}function Kg(e){return t=>{const n=ms().isFeatureEnabled(yl.ContextSelectorRedesign),[r,a]=(0,i.useState)([]),{id:o}=hs(),{availableContexts:l,selectedContext:c,selectedContextSource:d,attachContext:u,detachCurrentContext:g}=fg(),h=!!c&&(0,Ea.vr)(c),p=(0,i.useMemo)((()=>qg(r)),[r]);return(0,s.jsx)(e,{...t,contextSwitcher:!h&&(0,s.jsx)(Zg,{onContextSelect:e=>{e?n&&e.id===(null==d?void 0:d.id)?g(o):u(o,e.id):g(o)},availableContexts:l,selectedContext:d,selectedAgents:r,onAgentSelect:a}),selectedAgentIds:p})}}const Jg=e=>t=>{const n=(()=>{var e;const t=vd(bd.ChatInputUphookSlot),{messages:n}=hs(),r=0===n.length,{commandExecutor:a}=ss(),{trackClicked:s}=ks(Ja.ChatInputUphookSecondaryCta,{agentId:"success"===t.status?null==(e=t.data)?void 0:e.value.secondaryCtaTargetAgentId:""}),o=(0,i.useCallback)((()=>{var e;"success"===t.status&&null!=(e=t.data)&&e.value.secondaryCtaTargetAgentId&&(s(),null==a||a.execute({kind:Xa.OpenAgent,agentId:t.data.value.secondaryCtaTargetAgentId}))}),[a,t,s]);if(r)return{visibilityStatus:"hidden"};if("loading"===t.status)return{visibilityStatus:"loading"};if("success"===t.status&&t.data){const e=t.data;return{visibilityStatus:"visible",data:{...e.value,onClick:e.onClick,onShow:e.onShow,onSecondaryCtaClick:o}}}return{visibilityStatus:"hidden"}})();return(0,s.jsx)(wn.v8,{uphook:n,children:(0,s.jsx)(e,{...t})})},Yg="_menu_10z3n_1";function Xg({onChange:e,selectedAgents:t}){const{installedAgents:n}=vs(),r=Ml(),a=(0,i.useCallback)((n=>{t.includes(n)?e((e=>e.filter((e=>e.id!==n.id)))):e((e=>[...e,n]))}),[t,e]),l=(0,i.useCallback)((e=>t.some((t=>t.id===e.id))),[t]),c=(0,i.useCallback)((()=>{r&&r.requestDeeplink({viewType:kn.Gk.Directory})}),[r]),u=(0,i.useMemo)((()=>n.filter((e=>e.hasData))),[n]);return(0,s.jsxs)(d.v,{className:Yg,activator:(0,s.jsx)(E.z,{variant:"tertiary",size:"small",children:(0,s.jsxs)(o.k,{direction:"row",align:"center",gap:2,borderRadius:1,children:[(0,s.jsx)(Cg,{selectedAgents:t}),"Agent data"]})}),children:[u.length?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.v.Section,{label:"Work with agent data",children:u.map((e=>(0,s.jsx)(d.v.Item,{onClick:()=>a(e),children:(0,s.jsxs)(o.k,{direction:"row",align:"center",gap:1,justify:"space-between",children:[(0,s.jsxs)(o.k,{direction:"row",align:"center",gap:1,children:[e.renderIcon({size:"medium"}),(0,s.jsx)("span",{children:e.title})]}),l(e)&&(0,s.jsx)(g.J,{size:"small",icon:I.L,accessibilityLabel:"Selected"})]})},e.id)))}),(0,s.jsx)(d.v.Separator,{})," "]}):null,(0,s.jsx)(d.v.Item,{icon:wa.m,onClick:c,children:(0,s.jsx)("span",{children:"Add agent"})},"add-agent")]})}function Qg(e){return t=>{const[n,r]=(0,i.useState)([]),a=(0,s.jsx)(Xg,{onChange:r,selectedAgents:n}),o=(0,i.useMemo)((()=>qg(n)),[n]);return(0,s.jsx)(e,{...t,agentSelector:a,selectedAgentIds:o})}}},51990:(e,t,n)=>{if(n.d(t,{c:()=>a}),6168==n.j)var r=n(9417);function a(e){let[t,n]=(0,r.z)(s(e.value),s(e.defaultValue)||"",e.onChange);return{value:t,setValue:n}}function s(e){if(null!=e)return e.toString()}},54667:(e,t,n)=>{if(n.d(t,{l:()=>a}),6168==n.j)var r=n(9417);function a(e={}){let{isReadOnly:t}=e,[n,a]=(0,r.z)(e.isSelected,e.defaultSelected||!1,e.onChange);return{isSelected:n,setSelected:function(e){t||a(e)},toggle:function(){t||a(!n)}}}},99589:(e,t,n)=>{n.d(t,{XZ:()=>g});var r=n(92379);if(6168==n.j)var a=n(89566);if(6168==n.j)var s=n(16253);if(6168==n.j)var i=n(54667);if(6168==n.j)var o=n(13599);if(6168==n.j)var l=n(11278);if(6168==n.j)var c=n(64810);if(6168==n.j)var d=n(38253);if(6168==n.j)var u=n(60598);const g=6168==n.j?r.forwardRef((function(e,t){var n;const{helperMessage:u,labelDisplay:g="visible",errorMessage:p,isOptional:m,isRequired:f,labelIndicatorForRequired:x="(Required)",labelIndicatorForOptional:v="(Optional)",className:b,style:C,size:y="medium"}=e,k=(0,a.Me)(e.id),w=(0,a.Me)(),j=(0,i.l)(e),S=(0,a.B3)(t),{inputProps:I}=(0,o.O)({...e,validationState:null!=e.errorMessage?"invalid":"valid"},j,S),[A,E]=r.useState(!1),_=!0===e.isDisabled,M=!0===e.isIndeterminate,R=null!=u?w:void 0,D={labelDisplay:g,isDisabled:_,isSelected:j.isSelected||M,isIndeterminate:M,errorMessage:p,size:y};return r.createElement("div",{className:(0,s.W)("gds-checkbox",`gds-checkbox-${y}`,A&&"gds-checkbox-focus-visible",_&&"gds-checkbox-disabled")},r.createElement(l.A,{label:e.children,labelDisplay:g,htmlFor:k,helperMessage:u,errorMessage:p,isOptional:m,isRequired:f,labelIndicatorForOptional:v,labelIndicatorForRequired:x,size:y},r.createElement(d.u,{style:{width:24,height:24}},r.createElement("input",{...null!=(n=e.__inputProps)?n:I,onFocus:()=>E(!0),onBlur:()=>E(!1),id:k,ref:S,tabIndex:_?-1:0,"aria-describedby":null!=R?R:I["aria-describedby"],className:(0,s.W)("gds-checkbox-input",`gds-checkbox-input-${y}`,b),style:C})),r.createElement(h,{...D})),r.createElement(c.f,{size:y,errorMessage:p,className:"gds-checkbox-label-margin"}))})):null,h=e=>{const{labelDisplay:t,isDisabled:n,isSelected:a,isIndeterminate:i,errorMessage:o,size:l="medium"}=e,c=null!=o?u.I.Border.Critical.Default:u.I.Border.Base.Default;return r.createElement("svg",{className:(0,s.W)("gds-checkbox-icon",`gds-checkbox-icon-${l}`,"visible"===t&&"gds-checkbox-icon-label",n&&"gds-checkbox-element-disabled"),viewBox:"0 0 16 16","aria-hidden":"true",style:{backgroundColor:a?u.I.Background.Interactive.Default:void 0,border:`1px solid ${a?u.I.Background.Interactive.Default:c}`}},a&&!i&&r.createElement("path",{transform:"translate(2 4)",strokeWidth:0,fill:"var(--color-icon-base-inverse)",d:"M11.7071 1.41421L4.49995 8.62132L0.292847 4.41421L1.70706 3L4.49995 5.79289L10.2928 0L11.7071 1.41421Z"}),i&&r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",transform:"translate(2.5 7)",d:"M10.5 2H0.5V0H10.5V2Z",fill:"white"}))}},99807:(e,t,n)=>{n.d(t,{U:()=>h});var r=n(92379);if(6168==n.j)var a=n(16253);if(6168==n.j)var s=n(49642);if(6168==n.j)var i=n(51990);if(6168==n.j)var o=n(79615);if(6168==n.j)var l=n(75001);if(6168==n.j)var c=n(55167);if(6168==n.j)var d=n(95638);if(6168==n.j)var u=n(11278);if(6168==n.j)var g=n(75362);const h=6168==n.j?r.forwardRef((function(e,t){const{labelDisplay:n="hidden",accessibilityLabelClearButton:d="Clear search",className:h,label:m,placeholder:f,onClear:x,style:v,size:b="medium"}=e,C=(0,i.c)(e),y=r.useRef(null);r.useImperativeHandle(t,(()=>y.current));const{labelProps:k,inputProps:w,clearButtonProps:j}=(0,o.t)(e,C,y);(0,s.j)(w,e);const S={...j,excludeFromTabOrder:!1,"aria-label":d,onKeyDown:e=>{var t;"Enter"!==e.key&&"Space"!==e.key||(C.setValue(""),null==(t=y.current)||t.focus(),null==x||x())}};return r.createElement("div",{className:(0,a.W)("gds-text-field",`gds-text-field-${b}`)},r.createElement(u.A,{label:m,labelDisplay:n,...k,size:b}),r.createElement("div",{className:"gds-text-field-container"},r.createElement("div",{className:"gds-text-field-icon-start"},r.createElement(g.J,{icon:l.D,accessibilityLabel:""})),r.createElement("input",{ref:y,className:(0,a.W)("gds-text-field-input",h),...w,placeholder:f,spellCheck:!1,style:v}),""!==C.value&&r.createElement(p,{...S},r.createElement(g.J,{icon:c.L,accessibilityLabel:"",size:"medium"===b?"small":"medium"}))))})):null,p=e=>{const t=r.useRef(null),{buttonProps:n}=(0,d.U)(e,t);return r.createElement("button",{...n,ref:t},e.children)}},72936:(e,t,n)=>{n.d(t,{P:()=>g});var r=n(92379),a=n(16253),s=n(4968);var i=n(89566),o=n(82597),l=n(11278),c=n(75362),d=n(64810);const u=r.forwardRef((function(e,t){const n=(0,i.Me)(e.id),{label:s,labelIndicatorForOptional:u,labelIndicatorForRequired:g,labelDisplay:h="visible",errorMessage:p,helperMessage:m,isOptional:f,isRequired:x,isDisabled:v,className:b,onChange:C,...y}=e;return r.createElement("div",{className:"gds-select"},r.createElement(l.A,{label:s,labelDisplay:h,htmlFor:n,className:"gds-select-label",helperMessage:m,errorMessage:p,isOptional:f,isRequired:x,labelIndicatorForOptional:u,labelIndicatorForRequired:g}),r.createElement("div",{className:"gds-select-container"},r.createElement("select",{ref:t,id:n,className:(0,a.W)("gds-select-inner",b),disabled:v,required:x,"aria-invalid":null!=p?Boolean(p):void 0,onChange:null!=C?e=>C(e.target.value):void 0,...y}),r.createElement(c.J,{accessibilityLabel:"",icon:o.b,size:"small",className:"gds-select-icon"})),r.createElement(d.f,{errorMessage:p}))})),g=(0,s.o)(u,"Select",{Option:e=>r.createElement("option",{...e})})},22825:(e,t,n)=>{n.d(t,{r:()=>g});var r=n(92379);if(6168==n.j)var a=n(89566);var s=n(16253);if(6168==n.j)var i=n(54145);if(6168==n.j)var o=n(46538);if(6168==n.j)var l=n(38253);if(6168==n.j)var c=n(88035);if(6168==n.j)var d=n(54295);var u=n(60598);const g=6168==n.j?r.forwardRef((function(e,t){const{label:n,labelDisplay:s="left",isSelected:i,defaultSelected:l,helperMessage:c,isDisabled:d,onChange:u,size:g="medium",id:h,...p}=e,f=(0,a.Me)(),v=h||f,b=(0,a.B3)(t),C=void 0!==i,[y,k]=r.useState(l||!1);r.useEffect((()=>{C&&k(i)}),[i,C]);const w=(0,o.T)(),j=(0,a.Me)(),S=c?j:void 0;return r.createElement("div",{className:"gds-switch","data-disabled":d,"data-label-display":s},r.createElement(m,{label:n,labelDisplay:s,helperMessage:c,helperMessageId:S,inputId:v,size:g}),r.createElement(x,{label:e.label,labelDisplay:s,ref:b,size:g,isDisabled:e.isDisabled,isSelected:y,onChange:function(e){const t=e.target.checked;C||k(t),u&&u(t)},prefersReducedMotion:w,maybeHelperId:S,inputProps:{id:v,...p}}))})):null,h={small:"text-xsmall",medium:"text-small",large:"text-medium",xlarge:"text-large"},p={small:"text-xsmall",medium:"text-xsmall",large:"text-small",xlarge:"text-medium"};function m({label:e,labelDisplay:t,inputId:n,helperMessage:a,helperMessageId:s,size:o}){if("hidden"===t)return r.createElement(l.u,null,r.createElement("label",{htmlFor:n},r.createElement(c.x,{as:"span"},e)),a&&r.createElement(c.x,{as:"p",id:s},a));let u;return"top"===t?u="1 1 100%":"left"===t||"right"===t?u="1 1 auto":(0,i.v)(t),r.createElement(d.k,{direction:"column",gap:1,flex:u},r.createElement("label",{htmlFor:n,className:"gds-switch-label"},r.createElement(c.x,{as:"span",variant:h[o],weight:"medium"},e)),a&&r.createElement(c.x,{as:"p",id:s,variant:p[o],color:"base-subdued"},a))}const f={small:{height:18,width:34,selectedKnobRadius:7,deselectedKnobRadius:5,rectRadius:10,checkmarkScale:.75,checkmarkTranslation:"27 6.5"},medium:{height:21,width:40,selectedKnobRadius:8,deselectedKnobRadius:6,rectRadius:10.5,checkmarkScale:1,checkmarkTranslation:"24 5"},large:{height:24,width:44,selectedKnobRadius:9,deselectedKnobRadius:7,rectRadius:14,checkmarkScale:1.2,checkmarkTranslation:"21.5 4.5"},xlarge:{height:32,width:60,selectedKnobRadius:12,deselectedKnobRadius:10,rectRadius:16,checkmarkScale:1.5,checkmarkTranslation:"25 5.5"}},x=r.forwardRef((function({isDisabled:e,isSelected:t,maybeHelperId:n,prefersReducedMotion:a,size:i,onChange:o,inputProps:{className:l,"aria-describedby":c,tabIndex:d=0,...g}},h){return r.createElement("div",{"data-size":i},r.createElement("input",{...g,tabIndex:d,role:"switch",ref:h,className:(0,s.W)("gds-switch-input",l),"aria-describedby":n&&c?`${c} ${n}`:c||n,value:t?"on":"off",type:"checkbox",onChange:o,checked:t,disabled:e,"data-size":i}),r.createElement("svg",{width:f[i].width+2,height:f[i].height+2,"aria-hidden":"true",className:"gds-switch-indicator"},r.createElement("rect",{x:1,y:1,width:f[i].width,height:f[i].height,rx:f[i].rectRadius,stroke:t?u.I.Border.Interactive.Default:u.I.Border.Base.Default,strokeWidth:"1",fill:t?u.I.Background.Interactive.Default:u.I.Background.Base.Subdued,className:(0,s.W)(!a&&"gds-switch-animation")}),r.createElement("circle",{cx:t?f[i].width-f[i].selectedKnobRadius-2:2*f[i].deselectedKnobRadius,cy:(f[i].height+2)/2,r:t?f[i].selectedKnobRadius:f[i].deselectedKnobRadius,fill:t?u.I.Background.Base.Default:u.I.Background.Neutral.Default,className:(0,s.W)(!a&&"gds-switch-animation")}),r.createElement("path",{transform:`scale(${f[i].checkmarkScale}) translate(${f[i].checkmarkTranslation})`,opacity:t?"100":"0",fill:"none",d:"M1.5 6.83333L4.26923 9.5L10.5 3.5",stroke:u.I.Icon.Interactive.Default,strokeWidth:"1.5",strokeLinecap:"round",className:(0,s.W)(!a&&"gds-switch-check-animation-turning-"+(t?"on":"off"))})))}))},95366:(e,t,n)=>{n.d(t,{m:()=>b});var r=n(92379),a=n(89566),s=n(16253),i=n(4968);const o=()=>{};var l=n(39981),c=n(78393),d=n(88035),u=n(60132),g=n(54295);const h=r.createContext({selectedTab:"",setSelectedTab(){},focusedTab:"",setFocusedTab(){},onChangeHandler(){},tabIds:[""],size:"medium"}),p=e=>`gds-tab-${e}`,m=e=>`gds-tab-panel-${e}`;const f=r.forwardRef((function(e,t){const{bottomBorder:n="default",width:i}=e,d=(0,a.B3)(t),p=r.useRef(null),{hasHiddenLeftContent:m,hasHiddenRightContent:f}=(e=>{const[t,n]=r.useState(!1),[a,s]=r.useState(!1),i=r.useCallback((()=>{const t=e.current;null!==t&&(n(!(t.scrollLeft+t.clientWidth>=t.scrollWidth)),s(t.scrollLeft>0))}),[]);return r.useEffect((()=>{if("undefined"!=typeof self&&void 0!==self.ResizeObserver){const t=new ResizeObserver(i);return null!==e.current&&t.observe(e.current),()=>{t.disconnect()}}return o}),[e,i]),r.useEffect((()=>{var t;return"undefined"!=typeof self&&void 0!==self?(null==(t=e.current)||t.addEventListener("scroll",i),()=>{var t;null==(t=e.current)||t.removeEventListener("scroll",i)}):o}),[e]),r.useEffect((()=>{i()}),[i]),{hasHiddenRightContent:t,hasHiddenLeftContent:a}})(p),{setSelectedTab:x,setFocusedTab:v,onChangeHandler:b,focusedTab:C,tabIds:y,size:k}=r.useContext(h),[w,j]=r.useState(!1),[S,I]=r.useState(!1);return r.useEffect((()=>{j(f),I(m)}),[w,S,m,f]),r.createElement("div",{ref:d,role:"tablist","aria-orientation":"horizontal","aria-label":e.accessibilityLabel,className:(0,s.W)("gds-tabs-list-container","none"===n&&"gds-tabs-border-none","full"===i&&"gds-tabs-full-width",`gds-tabs-list-container-${k}`),onKeyDown:e=>{const t=y.length,n=y.indexOf(C),r=e=>{var t;v(e),null==(t=document.getElementById(e))||t.focus()},a={ArrowRight:()=>{const e=y[(n+1)%t];r(e)},ArrowLeft:()=>{const e=y[(n-1+t)%t];r(e)},Enter:()=>{x(C),b(C)}}[e.key];a&&(e.preventDefault(),a())}},S&&r.createElement(u.h,{"aria-hidden":!0,accessibilityLabel:"Show more tabs",className:"gds-tabs-list-overflow-button-left",size:"small"===k?"small":"medium",variant:"tertiary",icon:l.n,tabIndex:-1,onClick:()=>{null!==p.current&&(p.current.scrollLeft-=500)}}),r.createElement(g.k,{gap:3,align:"center",className:"gds-tabs-list",ref:p},e.children),w&&r.createElement(u.h,{"aria-hidden":!0,accessibilityLabel:"Show more tabs",className:"gds-tabs-list-overflow-button-right",size:"small"===k?"small":"medium",variant:"tertiary",icon:c.M,tabIndex:-1,onClick:()=>{null!==p.current&&(p.current.scrollLeft+=500)}}))})),x=r.forwardRef((function(e,t){const{selectedTab:n,setSelectedTab:i,setFocusedTab:o,onChangeHandler:l,size:c}=r.useContext(h),u=p(e.id),g=m(e.id),f=(0,a.B3)(t),x=n===u;return r.createElement("button",{"aria-selected":x,"aria-controls":g,className:(0,s.W)("gds-tabs-tab-container",e.className),id:u,ref:f,role:"tab",tabIndex:x?0:-1,onClick:()=>{i(u),o(u),l(u)},onFocus:()=>{o(u)}},r.createElement("div",{className:(0,s.W)("gds-tabs-tab",x&&"gds-tabs-tab-selected"),"data-text":e.label},null!=e.label?r.createElement(d.x,{weight:x?"semibold":"normal",as:"span",variant:{small:"text-xsmall",medium:"text-small",large:"text-medium",xlarge:"text-large",auto:"text-medium"}[c]},e.label):e.children))})),v=r.forwardRef((function(e,t){const{selectedTab:n}=r.useContext(h),s=(0,a.B3)(t),i=p(e.id),o=m(e.id);let l=n===i;return r.useEffect((()=>{l=n===i}),[n]),l?r.createElement("div",{className:"gds-tabs-panel",role:"tabpanel",id:o,"aria-labelledby":i,ref:s,tabIndex:0},e.children):null})),b=(0,i.o)((e=>{const t=function(e){const t=[];return r.Children.forEach(e.children,(e=>{r.isValidElement(e)&&e.type===f&&r.Children.forEach(e.props.children,(e=>{r.isValidElement(e)&&e.type===x&&t.push(p(e.props.id))}))})),t}(e),{defaultSelectedTab:n,children:a,size:s="medium",onChange:i,...o}=e,l=n?p(n):t[0],[c,d]=r.useState(l),[u,g]=r.useState(l);return r.createElement("div",{className:"gds-tabs",...o},r.createElement(h.Provider,{value:{selectedTab:c,setSelectedTab:d,setFocusedTab:g,onChangeHandler:e=>{i&&i(e.replace(/gds-tab-/,""))},focusedTab:u,tabIds:t,size:s}},a))}),"Tabs",{Panel:v,TabList:f,Tab:x})},54145:(e,t,n)=>{function r(e){throw new Error("Unexpected object: "+e)}n.d(t,{v:()=>r})},46538:(e,t,n)=>{n.d(t,{T:()=>a});var r=n(92379);function a(){const[e,t]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{if("undefined"==typeof self||!self.matchMedia)return void t(!1);const e=self.matchMedia("(prefers-reduced-motion: reduce)");function n(e){t(e.matches)}return t(e.matches),e.addEventListener?(e.addEventListener("change",n),()=>{e.removeEventListener("change",n)}):(e.addListener(n),()=>{e.removeListener(n)})}),[]),e}},11087:(e,t,n)=>{n.d(t,{y:()=>i});var r=n(92379),a=n(82491),s=n(38076);const i=(0,a.I)("nocolor",(({title:e,titleId:t,desc:n,descId:a,resourcePrefix:i=(0,s.O)(),...o})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20","aria-hidden":"true","data-icon":"AgentsParaphraser",stroke:"transparent","aria-labelledby":t,"aria-describedby":a,...o},e?r.createElement("title",{id:t},e):null,void 0===n?r.createElement("desc",{id:a},"Vector graphic: paraphraser"):n?r.createElement("desc",{id:a},n):null,r.createElement("path",{fill:"var(--color-icon-agent-default)",d:"M15.31 2.917H4.69c-.98 0-1.773.793-1.773 1.773v10.62c0 .98.793 1.773 1.773 1.773h10.62c.98 0 1.773-.793 1.773-1.772V4.69c0-.98-.793-1.773-1.772-1.773M12.43 13.99c-.899.632-1.83.923-2.93.923-2.68 0-4.623-1.919-4.623-4.558 0-2.331 1.83-4.234 4.08-4.234h.461l-.615-.55a.61.61 0 0 1-.049-.858.61.61 0 0 1 .858-.049l1.798 1.611a.61.61 0 0 1 0 .907L9.61 8.793a.6.6 0 0 1-.404.155.6.6 0 0 1-.454-.203.605.605 0 0 1 .049-.858l.615-.55h-.461c-1.579 0-2.866 1.352-2.866 3.02 0 1.966 1.4 3.343 3.408 3.343.85 0 1.538-.219 2.234-.705a.6.6 0 0 1 .842.146.6.6 0 0 1-.145.842zm2.363-2.493h-4.509a.61.61 0 0 1-.607-.607c0-.332.275-.608.607-.608h4.51c.331 0 .607.276.607.608a.61.61 0 0 1-.608.607m0-2.55h-1.756a.61.61 0 0 1-.607-.607c0-.332.275-.608.607-.608h1.756c.332 0 .607.276.607.608a.61.61 0 0 1-.607.607"}))))},82494:(e,t,n)=>{n.d(t,{L:()=>i});var r=n(92379),a=n(82491),s=n(38076);const i=(0,a.I)("color",(({title:e,titleId:t,desc:n,descId:a,resourcePrefix:i=(0,s.O)(),...o})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceCheckmark",stroke:"transparent","aria-labelledby":t,"aria-describedby":a,...o},n?r.createElement("desc",{id:a},n):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{stroke:"#646B81",strokeLinecap:"round",d:"M2 8.444 5.692 12 14 4"}))))},38665:(e,t,n)=>{n.d(t,{F:()=>i});var r=n(92379);if(/^6(052|168)$/.test(n.j))var a=n(82491);if(/^6(052|168)$/.test(n.j))var s=n(38076);const i=/^6(052|168)$/.test(n.j)?(0,a.I)("color",(({title:e,titleId:t,desc:n,descId:a,resourcePrefix:i=(0,s.O)(),...o})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceControls",stroke:"transparent","aria-labelledby":t,"aria-describedby":a,...o},n?r.createElement("desc",{id:a},n):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{stroke:"#646B81",strokeLinecap:"round",d:"M8.5 4H14M2 4h2.667m0 0a1 1 0 1 0 2 0 1 1 0 0 0-2 0ZM2 8h5.5m3.833 0H14m-2.667 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM10 12h4M2 12h4m0 0a1 1 0 1 0 2 0 1 1 0 0 0-2 0Z"})))):null},68198:(e,t,n)=>{n.d(t,{c:()=>i});var r=n(92379),a=n(82491),s=n(38076);const i=(0,a.I)("color",(({title:e,titleId:t,desc:n,descId:a,resourcePrefix:i=(0,s.O)(),...o})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceCopy",stroke:"transparent","aria-labelledby":t,"aria-describedby":a,...o},n?r.createElement("desc",{id:a},n):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{stroke:"#646B81",strokeLinecap:"round",strokeLinejoin:"round",d:"M7.053 10.842v1.908c0 .69.56 1.25 1.25 1.25h4.447c.69 0 1.25-.56 1.25-1.25V8.303c0-.69-.56-1.25-1.25-1.25h-1.908M8.947 3.25v4.447c0 .69-.56 1.25-1.25 1.25H3.25c-.69 0-1.25-.56-1.25-1.25V3.25C2 2.56 2.56 2 3.25 2h4.447c.69 0 1.25.56 1.25 1.25"}))))},82597:(e,t,n)=>{n.d(t,{b:()=>i});var r=n(92379),a=n(82491),s=n(38076);const i=(0,a.I)("color",(({title:e,titleId:t,desc:n,descId:a,resourcePrefix:i=(0,s.O)(),...o})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceDown",stroke:"transparent","aria-labelledby":t,"aria-describedby":a,...o},n?r.createElement("desc",{id:a},n):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{stroke:"#646B81",strokeLinecap:"round",d:"m2 5 6 6 6-6"}))))},69237:(e,t,n)=>{n.d(t,{n:()=>i});var r=n(92379),a=n(82491),s=n(38076);const i=(0,a.I)("color",(({title:e,titleId:t,desc:n,descId:a,resourcePrefix:i=(0,s.O)(),...o})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceExternalLink",stroke:"transparent","aria-labelledby":t,"aria-describedby":a,...o},n?r.createElement("desc",{id:a},n):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{stroke:"#646B81",strokeLinecap:"round",d:"M6.2 2H3.25C2.56 2 2 2.56 2 3.25v9.5c0 .69.56 1.25 1.25 1.25h9.5c.69 0 1.25-.56 1.25-1.25V9.8M8 8l6-6m0 0H9.2M14 2v4.8"}))))},5320:(e,t,n)=>{n.d(t,{X:()=>i});var r=n(92379);if(/^6(052|168)$/.test(n.j))var a=n(82491);if(/^6(052|168)$/.test(n.j))var s=n(38076);const i=/^6(052|168)$/.test(n.j)?(0,a.I)("color",(({title:e,titleId:t,desc:n,descId:a,resourcePrefix:i=(0,s.O)(),...o})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20","aria-hidden":"true","data-icon":"InterfaceGlobe",stroke:"transparent","aria-labelledby":t,"aria-describedby":a,...o},n?r.createElement("desc",{id:a},n):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{stroke:"#707070",strokeLinecap:"round",strokeLinejoin:"round",d:"M17.5 10a7.5 7.5 0 0 1-7.5 7.5m7.5-7.5A7.5 7.5 0 0 0 10 2.5m7.5 7.5h-15m7.5 7.5A7.5 7.5 0 0 1 2.5 10m7.5 7.5a11.47 11.47 0 0 0 3-7.5 11.47 11.47 0 0 0-3-7.5m0 15A11.48 11.48 0 0 1 7 10a11.48 11.48 0 0 1 3-7.5M2.5 10A7.5 7.5 0 0 1 10 2.5"})))):null},39981:(e,t,n)=>{n.d(t,{n:()=>i});var r=n(92379),a=n(82491),s=n(38076);const i=(0,a.I)("color",(({title:e,titleId:t,desc:n,descId:a,resourcePrefix:i=(0,s.O)(),...o})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceLeft",stroke:"transparent","aria-labelledby":t,"aria-describedby":a,...o},n?r.createElement("desc",{id:a},n):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{stroke:"#646B81",strokeLinecap:"round",d:"M11 2 5 8l6 6"}))))},2651:(e,t,n)=>{n.d(t,{j:()=>i});var r=n(92379),a=n(82491),s=n(38076);const i=(0,a.I)("nocolor",(({title:e,titleId:t,desc:n,descId:a,resourcePrefix:i=(0,s.O)(),...o})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceOk",stroke:"transparent","aria-labelledby":t,"aria-describedby":a,...o},n?r.createElement("desc",{id:a},n):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{fill:"#05735A",fillRule:"evenodd",d:"M8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12m3.498-7.44a.75.75 0 1 0-.996-1.12L6.5 8.996l-1.002-.89a.75.75 0 0 0-.996 1.12L6.5 11.004z",clipRule:"evenodd"}))))},55167:(e,t,n)=>{n.d(t,{L:()=>i});var r=n(92379);if(6168==n.j)var a=n(82491);if(6168==n.j)var s=n(38076);const i=6168==n.j?(0,a.I)("color",(({title:e,titleId:t,desc:n,descId:a,resourcePrefix:i=(0,s.O)(),...o})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceRemove",stroke:"transparent","aria-labelledby":t,"aria-describedby":a,...o},n?r.createElement("desc",{id:a},n):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{fill:"#646B81",fillRule:"evenodd",d:"M14 8A6 6 0 1 1 2 8a6 6 0 0 1 12 0M6.53 5.47a.75.75 0 0 0-1.06 1.06L6.94 8 5.47 9.47a.75.75 0 1 0 1.06 1.06L8 9.06l1.47 1.47a.75.75 0 1 0 1.06-1.06L9.06 8l1.47-1.47a.75.75 0 1 0-1.06-1.06L8 6.94z",clipRule:"evenodd"})))):null},78393:(e,t,n)=>{n.d(t,{M:()=>i});var r=n(92379),a=n(82491),s=n(38076);const i=(0,a.I)("color",(({title:e,titleId:t,desc:n,descId:a,resourcePrefix:i=(0,s.O)(),...o})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceRight",stroke:"transparent","aria-labelledby":t,"aria-describedby":a,...o},n?r.createElement("desc",{id:a},n):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{stroke:"#646B81",strokeLinecap:"round",d:"m5 2 6 6-6 6"}))))},75001:(e,t,n)=>{n.d(t,{D:()=>i});var r=n(92379);if(6168==n.j)var a=n(82491);if(6168==n.j)var s=n(38076);const i=6168==n.j?(0,a.I)("color",(({title:e,titleId:t,desc:n,descId:a,resourcePrefix:i=(0,s.O)(),...o})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceSearch",stroke:"transparent","aria-labelledby":t,"aria-describedby":a,...o},n?r.createElement("desc",{id:a},n):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{stroke:"#646B81",strokeLinecap:"round",d:"M9.784 9.784 14 14m-2.919-7.46A4.54 4.54 0 1 1 2 6.54a4.54 4.54 0 0 1 9.081 0Z"})))):null},17302:(e,t,n)=>{n.d(t,{t:()=>i});var r=n(92379);if(/^6(052|168)$/.test(n.j))var a=n(82491);if(/^6(052|168)$/.test(n.j))var s=n(38076);const i=/^6(052|168)$/.test(n.j)?(0,a.I)("color",(({title:e,titleId:t,desc:n,descId:a,resourcePrefix:i=(0,s.O)(),...o})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20","aria-hidden":"true","data-icon":"InterfaceStatusCheck",stroke:"transparent","aria-labelledby":t,"aria-describedby":a,...o},n?r.createElement("desc",{id:a},n):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{fill:"#707070",d:"M10 2a8 8 0 1 1 0 16 8 8 0 0 1 0-16m0 1a7 7 0 1 0 0 14 7 7 0 0 0 0-14m3.153 4.64a.5.5 0 0 1 .694.72L9 13.027l-2.347-2.26a.5.5 0 0 1 .694-.72L9 11.64z"})))):null},89923:(e,t,n)=>{n.d(t,{g:()=>i});var r=n(92379);if(6168==n.j)var a=n(82491);if(6168==n.j)var s=n(38076);const i=6168==n.j?(0,a.I)("color",(({title:e,titleId:t,desc:n,descId:a,resourcePrefix:i=(0,s.O)(),...o})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceUser",stroke:"transparent","aria-labelledby":t,"aria-describedby":a,...o},n?r.createElement("desc",{id:a},n):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{stroke:"#646B81",d:"m3.714 12 2.11-.88a2.14 2.14 0 0 0 1.319-1.977M12.286 12l-2.11-.88a2.14 2.14 0 0 1-1.319-1.977M6 6.286v1.143a2 2 0 1 0 4 0V6.286a2 2 0 1 0-4 0ZM14 8A6 6 0 1 1 2 8a6 6 0 0 1 12 0Z"})))):null},62220:(e,t,n)=>{n.d(t,{v:()=>r});class r{listeners=new Map;on(e,t){return this._getOrInitializeListeners(e).add(t),{dispose:()=>{this.listeners.get(e)?.delete(t)}}}emit(e,t){const n=this.listeners.get(e);if(n)for(const r of n)try{r(t)}catch(t){console.error(`Error in event listener for event "${String(e)}":`,t)}}_getOrInitializeListeners(e){return this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e)}}},58636:(e,t,n)=>{n.d(t,{B9:()=>y,IX:()=>o,Jn:()=>l});var r=n(92379),a=n(95295),s=n(64443);const i=Object.freeze({BLUR:"blur",CLICK:"click",CONTEXT_MENU:"contextmenu",COPY:"copy",CUT:"cut",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DRAG_START:"dragstart",DROP:"drop",ERROR:"error",FOCUS:"focus",HASH_CHANGE:"hashchange",KEY_DOWN:"keydown",KEY_UP:"keyup",LOAD:"load",MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",MOUSE_OVER:"mouseover",MOUSE_UP:"mouseup",PASTE:"paste",POP_STATE:"popstate",RESIZE:"resize",SCROLL:"scroll",TOUCH_END:"touchend",TOUCH_START:"touchstart"}),o=Object.freeze({Off:Object.seal({impression:!1,clicked:!1}),Clicked:Object.seal({impression:!1,clicked:!0}),Impression:Object.seal({impression:!0,clicked:!1}),ImpressionAndClicked:Object.seal({impression:!0,clicked:!0})});var l=(e=>(e.Clicked="clicked",e.Impression="impression",e))(l||{}),c=(e=>(e.Noop="noop",e))(c||{});function d(e,t){"function"==typeof e?e(t):e&&"current"in e&&(e.current=t)}function u(e,t){return e===t||"object"==typeof e&&"object"==typeof t&&null===function(e,t,n=[]){if(e===t||!e&&!t)return null;if(!e||!t)return g;let r=0;for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)&&!n.includes(a)&&(r++,!Object.prototype.hasOwnProperty.call(t,a)||t[a]!==e[a]))return a;let a=0;for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&!n.includes(e)&&(a++,a>r))return e;return null}(e,t)}const g="(falsy value)";const h=Symbol("uninitialized");function p(e,t=u){return function(e,t=u){const n=(0,r.useRef)(h);let a;a=n.current!==h&&t(n.current,e)?n.current:e,(0,r.useEffect)((()=>{n.current=a}),[a]);const s=n.current===h?void 0:n.current;return[a,s]}(e,t)[0]}const m=typeof self<"u",f=Object.freeze(m?r.useLayoutEffect:r.useEffect);function x(e){const t=(0,r.useRef)(e);return f((()=>{t.current=e}),[e]),t}class v{constructor(e,t){this.root=null,this.rootMargin="0px",this.thresholds=[0]}disconnect(){}observe(e){}takeRecords(){return[]}unobserve(e){}}function b(e={}){const t=s.C8.Logging.getLogger("useIntersectionObserver"),n=(0,r.useRef)(new Map),i=(0,r.useRef)(),{getRootElement:o,threshold:l,rootMargin:c}=e,d=x(o),u=p(l),g=(0,r.useCallback)(((e,t)=>{a.unstable_batchedUpdates((()=>{for(const r of e){const e=n.current.get(r.target);for(const n of e??[])n([r],t)}}))}),[]);(0,r.useEffect)((()=>{var e;i.current=function(e,t){return typeof IntersectionObserver>"u"?new v(e,t):new IntersectionObserver(e,t)}(g,{threshold:u,rootMargin:c,root:null==(e=d.current)?void 0:e.call(d)});for(const e of n.current.keys())i.current.observe(e);return()=>{var e;null==(e=i.current)||e.disconnect(),i.current=void 0}}),[d,g,c,u]);const h=(0,r.useCallback)(((e,r)=>{var a;let s=n.current.get(e);s||(s=new Set,n.current.set(e,s)),s.has(r)?t.warn("Received call to 'observe' with already registered callback for target: ",e):(s.add(r),1===s.size&&(null==(a=i.current)||a.observe(e)))}),[]),m=(0,r.useCallback)(((e,r)=>{var a;const s=n.current.get(e);null!=s&&s.has(r)?(s.delete(r),0===s.size&&(n.current.delete(e),null==(a=i.current)||a.unobserve(e))):t.warn("Received call to 'unobserve' for unregistered callback on target: ",e)}),[]),f=(0,r.useCallback)((e=>n.current.has(e)),[]),b=(0,r.useMemo)((()=>({observe:h,unobserve:m,isObserved:f})),[f,h,m]);return(0,r.useMemo)((()=>({observer:b})),[b])}function C(e,t,n){const{observer:a}=b(t);return function(e,t,{disabled:n}={}){const a=s.C8.Logging.getLogger("useIntersectionObserverConsumer"),i=x(t),o=(0,r.useRef)(null);e||a.error("Intersection observer not provided");const l=(0,r.useCallback)(((...e)=>i.current(...e)),[i]),c=(0,r.useCallback)((()=>{!o.current||!e||e.isObserved(o.current)||e.observe(o.current,l)}),[e,l]),u=(0,r.useCallback)((()=>{!o.current||!e||e.isObserved(o.current)&&e.unobserve(o.current,l)}),[e,l]);return(0,r.useEffect)((()=>{n?u():c()}),[n,c,u]),(0,r.useCallback)((e=>{o.current!==e&&(u(),d(o,e),c())}),[c,u])}(a,e,n)}function y({componentId:e,autoTrackedInteractions:t,trackEvent:n,detail:a,intersectionThreshold:s,shouldTrackClickEvent:o=k}){const u=e===c.Noop;a=p(a);const g=(0,r.useCallback)((()=>{u||n(e,l.Impression,a)}),[e,a,u,n]),h=(0,r.useCallback)((t=>{!u&&(!t||o(t))&&n(e,l.Clicked,a)}),[e,a,u,o,n]),m=C(((e,t)=>{e[e.length-1].isIntersecting&&(g(),t.disconnect())}),{threshold:[s||0]},{disabled:u||!(null!=t&&t.impression)}),f=(0,r.useRef)(null),x=function(e){return(0,r.useCallback)((t=>{for(const n of e)n&&d(n,t)}),e)}([m,(0,r.useCallback)((e=>{var n;null==(n=f.current)||n.call(f),null!=t&&t.clicked&&(null==e||e.addEventListener(i.MOUSE_DOWN,h),d(f,(()=>{null==e||e.removeEventListener(i.MOUSE_DOWN,h)})))}),[null==t?void 0:t.clicked,h])]);return{trackImpression:g,trackClicked:h,trackingRef:x}}function k(){return!0}},13599:(e,t,n)=>{n.d(t,{O:()=>s});var r=n(92379);if(6168==n.j)var a=n(80578);function s(e,t,n){let{inputProps:s,isSelected:i,isPressed:o,isDisabled:l,isReadOnly:c}=(0,a.O)(e,t,n),{isIndeterminate:d}=e;return(0,r.useEffect)((()=>{n.current&&(n.current.indeterminate=d)})),{inputProps:Object.assign(Object.assign({},s),{checked:i}),isSelected:i,isPressed:o,isDisabled:l,isReadOnly:c}}},79615:(e,t,n)=>{if(n.d(t,{t:()=>l}),6168==n.j)var r=n(89566);if(6168==n.j)var a=n(66708);if(6168==n.j)var s=n(73909);function i(e){return e&&e.__esModule?e.default:e}var o;function l(e,t,n){let l=(0,s.qb)(i(o)),{isDisabled:c,isReadOnly:d,onSubmit:u=(()=>{}),onClear:g,type:h="search"}=e,{labelProps:p,inputProps:m,descriptionProps:f,errorMessageProps:x}=(0,a.h)(Object.assign(Object.assign({},e),{value:t.value,onChange:t.setValue,onKeyDown:(0,r.tS)((e=>{const n=e.key;"Enter"!==n&&"Escape"!==n||e.preventDefault(),c||d||("Enter"===n&&u(t.value),"Escape"===n&&(t.setValue(""),g&&g()))}),e.onKeyDown),type:h}),n);return{labelProps:p,inputProps:Object.assign(Object.assign({},m),{defaultValue:void 0}),clearButtonProps:{"aria-label":l.format("Clear search"),excludeFromTabOrder:!0,preventFocusOnPress:!0,isDisabled:c||d,onPress:()=>{t.setValue(""),g&&g()},onPressStart:()=>{n.current.focus()}},descriptionProps:f,errorMessageProps:x}}o={"ar-AE":{"Clear search":" "},"bg-BG":{"Clear search":"  "},"cs-CZ":{"Clear search":"Vymazat hledn"},"da-DK":{"Clear search":"Ryd sgning"},"de-DE":{"Clear search":"Suche zurcksetzen"},"el-GR":{"Clear search":" "},"en-US":{"Clear search":"Clear search"},"es-ES":{"Clear search":"Borrar bsqueda"},"et-EE":{"Clear search":"Thjenda otsing"},"fi-FI":{"Clear search":"Tyhjenn haku"},"fr-FR":{"Clear search":"Effacer la recherche"},"he-IL":{"Clear search":" "},"hr-HR":{"Clear search":"Obrii pretragu"},"hu-HU":{"Clear search":"Keress trlse"},"it-IT":{"Clear search":"Cancella ricerca"},"ja-JP":{"Clear search":""},"ko-KR":{"Clear search":" "},"lt-LT":{"Clear search":"Ivalyti iek"},"lv-LV":{"Clear search":"Notrt meklanu"},"nb-NO":{"Clear search":"Tm sk"},"nl-NL":{"Clear search":"Zoekactie wissen"},"pl-PL":{"Clear search":"Wyczy zawarto wyszukiwania"},"pt-BR":{"Clear search":"Limpar pesquisa"},"pt-PT":{"Clear search":"Limpar pesquisa"},"ro-RO":{"Clear search":"tergei cutarea"},"ru-RU":{"Clear search":" "},"sk-SK":{"Clear search":"Vymaza vyhadvanie"},"sl-SI":{"Clear search":"Poisti iskanje"},"sr-SP":{"Clear search":"Obrii pretragu"},"sv-SE":{"Clear search":"Rensa skning"},"tr-TR":{"Clear search":"Aramay temizle"},"uk-UA":{"Clear search":" "},"zh-CN":{"Clear search":""},"zh-TW":{"Clear search":""}}},80578:(e,t,n)=>{if(n.d(t,{O:()=>i}),6168==n.j)var r=n(89566);if(6168==n.j)var a=n(70172);if(6168==n.j)var s=n(38715);function i(e,t,n){let{isDisabled:i=!1,isRequired:o=!1,isReadOnly:l=!1,value:c,name:d,children:u,"aria-label":g,"aria-labelledby":h,validationState:p="valid"}=e;null!=u||(null!=g||null!=h)||console.warn("If you do not provide children, you must specify an aria-label for accessibility");let{pressProps:m,isPressed:f}=(0,s.r7)({isDisabled:i}),{focusableProps:x}=(0,a.kc)(e,n),v=(0,r.dG)(m,x),b=(0,r.zL)(e,{labelable:!0});return(0,r.y$)(n,t.isSelected,t.setSelected),{inputProps:(0,r.dG)(b,Object.assign(Object.assign(Object.assign({"aria-invalid":"invalid"===p||void 0,"aria-errormessage":e["aria-errormessage"],"aria-controls":e["aria-controls"],"aria-readonly":l||void 0,"aria-required":o||void 0,onChange:e=>{e.stopPropagation(),t.setSelected(e.target.checked)},disabled:i},null==c?{}:{value:c}),{name:d,type:"checkbox"}),v)),isSelected:t.isSelected,isPressed:f,isDisabled:i,isReadOnly:l}}},17862:(e,t,n)=>{n.d(t,{S1:()=>a,yU:()=>i});var r=n(92379);n(54221);"undefined"!=typeof self?r.useLayoutEffect:r.useEffect;function a({threshold:e=0,root:t=null,rootMargin:n="0%",freezeOnceVisible:a=!1,initialIsIntersecting:s=!1,onChange:i}={}){var o;const[l,c]=(0,r.useState)(null),[d,u]=(0,r.useState)((()=>({isIntersecting:s,entry:void 0}))),g=(0,r.useRef)();g.current=i;const h=(null==(o=d.entry)?void 0:o.isIntersecting)&&a;(0,r.useEffect)((()=>{if(!l)return;if(!("IntersectionObserver"in self))return;if(h)return;let r;const s=new IntersectionObserver((e=>{const t=Array.isArray(s.thresholds)?s.thresholds:[s.thresholds];e.forEach((e=>{const n=e.isIntersecting&&t.some((t=>e.intersectionRatio>=t));u({isIntersecting:n,entry:e}),g.current&&g.current(n,e),n&&a&&r&&(r(),r=void 0)}))}),{threshold:e,root:t,rootMargin:n});return s.observe(l),()=>{s.disconnect()}}),[l,JSON.stringify(e),t,n,h,a]);const p=(0,r.useRef)(null);(0,r.useEffect)((()=>{var e;l||!(null==(e=d.entry)?void 0:e.target)||a||h||p.current===d.entry.target||(p.current=d.entry.target,u({isIntersecting:s,entry:void 0}))}),[l,d.entry,a,h,s]);const m=[c,!!d.isIntersecting,d.entry];return m.ref=m[0],m.isIntersecting=m[1],m.entry=m[2],m}var s={width:void 0,height:void 0};function i(e){const{ref:t,box:n="content-box"}=e,[{width:a,height:i},l]=(0,r.useState)(s),c=function(){const e=(0,r.useRef)(!1);return(0,r.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),(0,r.useCallback)((()=>e.current),[])}(),d=(0,r.useRef)({...s}),u=(0,r.useRef)(void 0);return u.current=e.onResize,(0,r.useEffect)((()=>{if(!t.current)return;if("undefined"==typeof self||!("ResizeObserver"in self))return;const e=new ResizeObserver((([e])=>{const t="border-box"===n?"borderBoxSize":"device-pixel-content-box"===n?"devicePixelContentBoxSize":"contentBoxSize",r=o(e,t,"inlineSize"),a=o(e,t,"blockSize");if(d.current.width!==r||d.current.height!==a){const e={width:r,height:a};d.current.width=r,d.current.height=a,u.current?u.current(e):c()&&l(e)}}));return e.observe(t.current,{box:n}),()=>{e.disconnect()}}),[n,t,c]),{width:a,height:i}}function o(e,t,n){return e[t]?Array.isArray(e[t])?e[t][0][n]:e[t][n]:"contentBoxSize"===t?e.contentRect["inlineSize"===n?"width":"height"]:void 0}},7368:(e,t,n)=>{n.d(t,{oR:()=>c});var r=n(92379),a=n(82180);const{useDebugValue:s}=r,{useSyncExternalStoreWithSelector:i}=a;let o=!1;const l=e=>e;function c(e,t=l,n){n&&!o&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),o=!0);const r=i(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return s(r),r}},33171:(e,t,n)=>{n.d(t,{M:()=>a});const r=e=>{let t;const n=new Set,r=(e,r)=>{const a="function"==typeof e?e(t):e;if(!Object.is(a,t)){const e=t;t=(null!=r?r:"object"!=typeof a||null===a)?a:Object.assign({},t,a),n.forEach((n=>n(t,e)))}},a=()=>t,s={setState:r,getState:a,getInitialState:()=>i,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},i=t=e(r,a,s);return s},a=e=>e?r(e):r}}]);