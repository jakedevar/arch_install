(()=>{"use strict";function e(){const e=1==(void 0!==navigator.userAgentData&&void 0!==navigator.userAgentData.platform)?navigator.userAgentData:navigator.userAgent;if(!e)return null;if("string"==typeof e)switch(!0){case e.indexOf("Chrome")>-1:return"chrome";case e.indexOf("Firefox")>-1:return"firefox";case e.indexOf("Safari")>-1:return"safari"}else switch(!0){case Boolean(e.brands.find((e=>"Microsoft Edge"===e.brand))):return"edge";case Boolean(e.brands.find((e=>"Opera"===e.brand))):return"opera";case Boolean(e.brands.find((e=>"Google Chrome"===e.brand||"Chromium"===e.brand))):return"chrome";case Boolean(e.brands.find((e=>"Firefox"===e.brand||"Mozilla"===e.brand))):return"firefox";case Boolean(e.brands.find((e=>"Safari"===e.brand))):return"safari"}return null}window.location,window.parent.location;const o="firefox"===e();e();function r(e,o,r){return(o=function(e){var o=function(e,o){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,o||"default");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(e)}(e,"string");return"symbol"==typeof o?o:o+""}(o))in e?Object.defineProperty(e,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[o]=r,e}const t={addMessageListener:function(e){const o=(o,r,t)=>(e(o,r,t),!0);return chrome.runtime.onMessage.addListener(o),()=>{chrome.runtime.onMessage.removeListener(o)}},handleResponse:_,get messageCallbacks(){return window.messageCallbacks},onMessage:function(e){return function(o,r,t){if("string"==typeof o)try{o=JSON.parse(o)}catch(e){}o.name?o.name.indexOf("re:")>-1?_(o):e(o,r,t):o.cmd?(o.name="toVault",e(o,r,t)):["chromex.dispatch","chromex.patch_state","chromex.state"].includes(o.type)}},sendMessage:function(e,r,t){var E;const _=JSON.parse(JSON.stringify({name:e,params:r}));if("undefined"==typeof chrome||o)o&&Promise.resolve().then((()=>browser.runtime.sendMessage(_))).then((e=>{t&&t(e)})).catch((()=>{}));else try{chrome.runtime.sendMessage(_,(function(e){chrome.runtime.lastError,t&&t(e)}))}catch(e){}"undefined"!=typeof chrome&&null!==(E=chrome.runtime)&&void 0!==E&&E.lastError}};class E{constructor(){r(this,"bucket",new Map)}register(e){const o="k-"+Math.random().toString(36).substr(2);return this.bucket.set(o,e),o}invoke(e,...o){const r=this.bucket.get(e);r&&(this.bucket.delete(e),r(...o))}}function _(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){return}e.callbackId&&window.messageCallbacks.invoke(e.callbackId,e.data)}window.messageCallbacks||(window.messageCallbacks=new E);let n=function(e){return e.GET="GET",e.SET="SET",e.ACTION="ACTION",e}({}),a=function(e){return e.ACCOUNT_SHARE_CONFIRMATION="accountShareConfirmation",e.CHANGE_PASSWORD_FORM_SUBMITTED="changePasswordFormSubmitted",e.CHANGE_PASSWORD_REPOSITION="changePasswordReposition",e.CHANGE_TARGETED_LOCK="changeTargetedLock",e.CHECK_DARK_MODE_META="checkDarkModeMeta",e.CHECK_IF_SSO_LOGIN_SCREEN="checkIfSSOLoginScreen",e.CHECK_SSO_PAGE_ON_PREM="checkSSOPageOnPrem",e.CHECK_SSO_PAGE_CLOUD="checkSSOPageCloud",e.CLEANUP_DETECTION_TESTS="cleanupDetectionTests",e.CLEAR_ALL_STORAGE="clearAllStorage",e.CLEAR_IDB_STORAGE="clearIDBStorage",e.CLEAR_LOCAL_STORAGE="clearLocalStorage",e.CLEAR_THROTTLE_STATE="clearThrottleState",e.CLEAR_LOCAL_STORAGE_DEVLOGS="clearLocalStorageDevlogs",e.CLICKJACK_CHECK="clickjackCheck",e.CLOSE_FRAME="closeFrame",e.CLOSE_HOVER_DATA="closeHoverData",e.CLOSE_INPUT_HELPER="closeInputHelper",e.CLOSE_TAB_SSO_AMH="closeTabSso",e.CONFIRM_THIS_MESSAGE="confirmThisMessage",e.DEBUG_PAGE="openDebugPage",e.DEVLOGS_ADD="devlogsAdd",e.DISABLE_LOCKS="disableLocks",e.DISPLAY_IFRAME_ERROR_MESSAGE="displayIframeErrorMessage",e.DUO_SELECTION="duoSelection",e.ENABLE_HUMIO_FIX="enableHumioFix",e.FILL_CUSTOM_FIELDS="fillCustomFields",e.FILL_GIVEN_AUTOFILL_RECORD="fillGivenAutofillRecord",e.FILL_NON_SECURE_SITE="fillNonSecureSite",e.FILL_BASIC_AUTH="fillBasicAuth",e.FRAME_FILL_FIELD="frameFillField",e.GET_INPUT_VALUE_FOR_LOCK="getInputValueForLock",e.GIVE_RECORD_TOTP_IN_CUSTOM_FOR_FILLING="giveRecordTotpInCustomForFilling",e.HANDLE_VAULT_MESSAGE_AMH="handleVaultMessage",e.INIT_INJECTED_SCRIPT="initInjectedScript",e.INJECT_CSS="injectCSS",e.IS_POPUP_ATTACHED_TO_LOCK="isPopupAttachedToLock",e.LOAD_EXTENSION_CONTENTS="loadExtensionContents",e.MAKE_DRAGGABLE_ELEMENT_UNMOVABLE="makeDraggableElementUnmovable",e.MAKE_VOICE_OVER_ALERT="makeVoiceOverAlert",e.MASTER_PASSWORD_REENTRY_ACTION="masterPasswordReentryAction",e.MATCH_MEDIA_REQUEST="matchMediaRequest",e.MATCH_MEDIA_THEME_REQUEST="matchMediaThemeRequest",e.OPEN_EXTENSION_PAGE_IN_BG="openExtensionPageInBg",e.OPEN_PROMPT_FROM_DISABLE_TAB="openPromptFromDisableTab",e.OPEN_PROMPT_FROM_GROUPS="openPromptFromGroupsThunk",e.OPEN_PROMPT_FROM_IS_APPENDED_TO_LOCK="openPromptFromIsAppendedToLock",e.OPEN_PROMPT_FROM_OPEN_TO_SPECIFIC_SCREEN="openPromptFromOpenToSpecificScreen",e.OPEN_PROMPT_FROM_SHOW_PROMPT="openPromptFromShowPrompt",e.OPEN_PROMPT_FROM_EXTENSION_PAGE="openPromptFromExtensionPage",e.PING="ping",e.POST_MESSAGE_TO_ALL_IFRAMES="postMessageToAllIframes",e.REMOVE_CONTENT_SCRIPTS_V3="removeContentScripts",e.REMOVE_DO_NOT_PROMPT="remove_do_not_prompt",e.REMOVE_INPUT_OBSERVERS="removeInputObservers",e.REPOSITION_FRAME="repositionFrame",e.REPOSITION_OVERLAY="repositionOverlay",e.REQUEST_ADMIN_APPROVAL="request_admin_approval",e.REQUEST_RESPONSE="requestResponse",e.RESET_EXTENSION="resetExtension",e.RESET_INACTIVITY_TIMEOUT_AMH="resetInactivityTimeout",e.RESTORE_LOCKS="restoreLocks",e.REVERT_MOVABLE_HEADER="revertMovableHeader",e.ROLE_ENFORCEMENT_RESTRICTION="roleEnforcementRestriction",e.SAVE_PROMPT_VIEW_RECORD_SCREEN="savePromptViewRecordScreen",e.SEND_KEEPER_PUSH="send_keeper_push",e.SEND_KEY_TO_INPUT_ON_PAGE="sendKeyToInputOnPage",e.SHOW_CHANGE_PASSWORD_FROM_CS="showChangePasswordFromCS",e.SHOW_EXTENSION_FROM_FRAME="showExtensionFromFrame",e.SHOW_EXTENSION_FROM_FRAME_BY_PROMPT="showExtensionFromFrameByPrompt",e.SHOW_HOVER_DATA="showHoverData",e.SHOW_KEEPER_NOT_APPENDED_TO_LOCK="showKeeperNotAppendedToLock",e.SHOW_INPUT_HELPER="showInputHelper",e.SHOW_LOCAL_STORAGE="showLocalStorage",e.SHOW_IDB_STORAGE="showIDBStorage",e.SHOW_MP_REENTRY_ERROR_POPUP="showMPRentryErrorPopup",e.SHOW_PASSKEY_PROMPT="showPasskeyPrompt",e.SHOW_PROMPT_FROM_FRAME="showPromptFromFrame",e.SHOW_PREVIEW="showPreview",e.SSO_ACCOUNT_NEEDS_RESOLUTION="ssoAccountNeedsResolution",e.SSO_LOGIN="sso_login",e.TEST_ACTION="testAction",e.TEST_REMOVE_DOMAIN="testRemoveDomain",e.TEST_EXPIRED_SESSION="testExpiredSession",e.TEST_REMOVE_SUBDOMAIN="testRemoveSubdomain",e.SETUP_DETECTION_TESTS="setupDetectionTests",e.SET_VISIBILITY="setVisibility",e.START_OBSERVER="startObserver",e.START_PROMPTS="startPrompts",e.STEAL_FOCUS="stealFocus",e.SUPPLY_TRY_TO_PROMPT="supplyTryToPrompt",e.TOGGLE_LISTENER_FOR_CHANGE_PASSWORD_SUBMISSION="toggleListenerForChangePasswordSubmission",e.TOGGLE_VERIFY_MODE="toggleVerifyMode",e.TRY_SHOULD_FIXINATOR_PROMPT="tryShouldFixinatorPrompt",e.UPDATE_EXTENSION_CLASSES="updateExtensionClasses",e.UPDATE_FRAME_HEIGHT="updateFrameHeight",e.UPDATE_INPUT_OBSERVER="updateInputObserver",e.UPDATE_LOCKS_PAYLOAD="updateLocksPayload",e.USE_BACKUP_2FA="useBackup2FA",e.USE_DARK_MODE_HEADER="useDarkModeMeta",e.USE_WIDTH="useWidth",e.VALIDATE_2FA="validate_2fa",e.VAULT_VERSION_CHECK="vaultVersionCheck",e.WEBAUTHN_RESPONSE="webauthnResponse",e.USER_TRIGGERED_SYNC_DOWN="userTriggeredSyncDown",e.LOCK_FILL="lockFill",e}({});t.addMessageListener(t.onMessage((function(e,o,r){if("confirmContextMenuFill"===e.name)!function(e){const o={action:e.action,message:e.message,payload:e.payload,displayMode:e.displayMode,dataKey:e.dataKey,lockId:e.lockId,recordUid:e.recordUid,retainIframe:e.retainIframe};t.sendMessage(a.CONFIRM_THIS_MESSAGE,{type:n.ACTION,data:o})}(e.data.message)})))})();